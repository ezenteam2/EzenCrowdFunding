(window.webpackJsonp=window.webpackJsonp||[]).push([[0],Array(41).concat([function(e,t,n){"use strict";var i;n.d(t,"a",function(){return i}),function(e){e.MOBILE_TUTORIAL="mobile_tutorial",e.MOBILE_TUTORIAL_READY="mobile_tutorial_ready",e.CONTENTEDITABLE="contenteditable",e.SINGLE="single",e.RENDER_PAGE="render_page",e.BUTTON_SAVE_MOCKUP="btn_save_mockup",e.BUTTON_SAVE_DEFAULT_TEXT="btn_save_default_text",e.BUTTON_EDIT_SIZE="btn_edit_size",e.USER_MESSAGE_MODAL="modal_user_message",e.NEW_MESSAGE_COUNT="new_message_count",e.ROW_TITLE="row_title",e.RAINBOW_LINE="rainbow_line",e.TEMPERATURE_LINE="temperature_line",e.LIBRARY_OPTION="lib_option",e.LIBRARY_PRESET="lib_preset",e.LIBRARY_ITEM="lib_item",e.LIBRARY_ITEM_ALL_TYPE="lib_item_all_type",e.LIBRARY_LINE="lib_line",e.LIBRARY_FIGURE="lib_figure",e.LIBRARY_ILLUST="lib_illust",e.LIBRARY_SVG="lib_svg",e.LIBRARY_PHOTO="lib_photo",e.LIBRARY_TEMPLATE="lib_template",e.LIBRARY_BIZ_TEMPLATE="lib_biz_template",e.LIBRARY_DESIGN="lib_design",e.LIBRARY_DESIGN_FOLDER="lib_design_folder",e.LIBRARY_DESIGN_BIZHOWS="lib_design_bizhows",e.LIBRARY_TEXT="lib_text",e.LIBRARY_UPLOAD="lib_upload",e.LIBRARY_FAVORITES="lib_favorites",e.LIBRARY_STICKER="lib_sticker",e.LIBRARY_BITMAP="lib_bitmap",e.LIBRARY_FRAME="lib_frame",e.LIBRARY_GRID="lib_grid",e.LIBRARY_LAYOUT="lib_layout",e.LIBRARY_BACKGROUND="lib_background",e.LIBRARY_BACKGROUND_PATTERN="lib_background_pattern",e.LIBRARY_BACKGROUND_PHOTO="lib_background_photo",e.LIBRARY_MY="lib_my",e.LIBRARY_ADMIN_TOOL="lib_admin_tool",e.LIBRARY_IMAGE_DOWNLOAD="lib_image_download",e.LIBRARY_IMAGE_SEARCH="lib_image_search",e.ITEM_SUFFIX="item_suffix",e.PHOTO_GUIDE="photo_guide",e.DESIGN_GUIDE="design_guide",e.DESIGN_GUIDE_ON="design_guide_on",e.EDGE_ROUNDING_ON="edge_rounding_on",e.UNICORN_SETTINGS_VIEW="unicorn_settings_view",e.UNICORN_SETTINGS="unicorn_settings",e.PAGE_NAVIGATOR_BUTTONS="page_navigator_buttons",e.DESIGN_SETTINGS="design_settings",e.DESIGN_HISTORY="design_history",e.DESIGN_HISTORY_PREVIEW="design_history_preview",e.USER_INFO="user_info",e.ZENDESK="zendesk",e.EDITING="editing",e.TOOLTIP="tooltip",e.PRINTOUT_TOOLTIP_CONTENT_ITEM="tooltip_content_item",e.PRINTOUT_TOOLTIP_ICON_AREA="tooltip_icon_area",e.LEFT_FLOATING_BUTTON="left_floating_button",e.LEFT_FLOATING_MENU_SHOW_PRINTOUT_OPTION="left_floating_menu_show_printout_option",e.PRINTOUT_TOOL_WRAPPER="printout_tool_wrapper",e.SHOW_PRINTOUT_FACTOR_REVIEW_POPUP="show_printout_factor_review_popup",e.SHOW_PRINTOUT_GUIDE_ICON="show_printout_guide_icon",e.PRINTOUT_SHOW_GUIDE_ON="show_guide_on",e.LOGIN_USER="login_user",e.ADMIN_USER="admin_user",e.ADMIN_BUTTON="admin_button",e.ADMIN_UI="admin_ui",e.DEV_BUTTON="dev_button",e.DEV_UI="dev_ui",e.BACKGROUND_TAB="background_tab",e.TOOLBOX_HEADER_MODE="toolbox_header_mode",e.COL_TEXT_COLOR="col_text_color",e.TOGGLE_EASY_TEXT_PRESET="toggle_easy_text_preset",e.ACTIVE_ROW_PRESET="active_row_preset",e.ROW_IMAGE_FILTER="row_image_filter",e.ROW_FONT_SIZE="row_font_size",e.ACCORDION_EFFECT_ROW="accordion_effect_row",e.COLOR_PICKER_ROW="color_picker_row",e.ROW_FONT_DETAIL="row_font_detail",e.ACTIVE_ROW_TEXT_DEFAULT="active_row_text_default",e.ROW_FILTER="row_filter",e.ROW_TEXT_DEFAULT="row_text_default",e.ACTIVE_ROW_ALIGN="active_row_align",e.ROW_EASY_ONLY="row_easy_only",e.ROW_TEXT_ALIGN="row_text_align",e.ROW_ITEM_ALIGN="row_item_align",e.ROW_ITEM_COMMON="row_item_common",e.ROW_OPACITY="row_opacity",e.ROW_TEXT_COLOR="row_text_color",e.ROW_GRID_COLOR="row_grid_color",e.ROW_MULTI_COLOR="row_multi_color",e.ROW_MULTI_COLORS="row_multi_colors",e.MULTI_COLOR_PICKER="multi_color_picker",e.ROW_FLIP="row_flip",e.ROW_PHOTO_EDIT="row_photo_edit",e.ROW_BACKGROUND_SOLID_COLOR="row_background_solid_color",e.ROW_BACKGROUND_DELETE="row_background_delete",e.ROW_WRAP="row_wrap",e.QUICK_PREV="quick_prev",e.QUICK_NEXT="quick_next",e.TOOLBOX_ANIMATE="toolbox_animate",e.REDO_Q="redo_q",e.ACTION_Q="action_q",e.ENABLE="enable",e.DISABLE="disabled",e.ITEM_LOCKED="item_locked",e.GROUP_ITEM="group_item",e.LINE_RIGHT="line_right",e.PAGE_DOT="page_dot",e.PAGE_REMOVE="page_remove",e.PAGE_ADD_CONTROL="page_add_control",e.PAGE_CONTROL="page_control",e.ADD_PAGE_BUTTONS="add_page_buttons",e.ADD_PAGE_CLONE="add_page_clone",e.ADD_PAGE_BLANK="add_page_blank",e.ROW_TEXT_EXTRA="row_text_extra",e.VALUE_ELEMENT="value_element",e.COLOR_ELEMENT="color_element",e.PAGE_THUMBNAIL="page_thumbnail",e.PAGE_LIST_ITEM="page_list_item",e.PAGE_LIST_ITEMS="page_list_items",e.PAGE_LIST_HEADER="page_list_header",e.PAGE_LIST="page_list",e.PAGE_TOOLBOX="pageToolbox",e.WORK_COMPLETE="work_complete",e.WORK_COMPLETE_VIEW="work_complete_view",e.ROW_CELL_MANAGEMENT="row_cell_management",e.ROW_CELL_BORDER="row_cell_border",e.NON_PADDING="non_padding",e.GRID_MANAGER="grid_manager",e.HIDDEN_LABEL="hidden_label",e.UPSIDE_DOWN="upside_down",e.SCREEN_LAYER="screen_layer",e.FILE_INFO_LAYER="file_info_layer",e.FILE_INFO="file_info",e.FILE_MENU="file_menu",e.DDDOT_INFO_LAYER="dddot_info_layer",e.KEYWORD_LAYER="keyword_layer",e.KEYWORD_WRAP="keyword_wrap",e.BTN_KEYWORD_MORE="btn_keyword_more",e.BTN_KEYWORD_SHORT="btn_keyword_short",e.PIXABAY_INFO_LAYER="pixabay_info_layer",e.PIXABAY_UPLOAD_USER_ID="pixabay_upload_user_id",e.PIXABAY_IMG_SIZE_INFO="pixabay_img_size_info",e.UPLOAD_INFO_LAYER="upload_info_layer",e.STORAGE_INFO="storage_info",e.FILE_GUIDE="file_guide",e.FILE_GUIDE_WRAP="file_guide_wrap",e.ITEM_TOOLS="item_tools",e.TOOLBOX_FOOTER="toolbox_footer",e.TOOLBOX_BODY="toolbox_body",e.TOOLBOX_HEADER="toolbox_header",e.GRID_TAB_MENU="grid_tab_menu",e.GRID_TAB_MENU_ITEM="grid_tab_menu_item",e.GRID_MANAGER_COL="grid_manager_col",e.GRID_FIRST_COL="first_col",e.GRID_SECOND_COL="second_col",e.GRID_LAST_COL="last_col",e.GRID_FIRST_LINE="second_line",e.GRID_SECOND_LINE="first_line",e.FULL_WIDTH="full_width",e.TIGHT="tight",e.ACTION_LIST_VIEW="action_list_view",e.ITEM_ORDER_LIST_VIEW="item_order_list_view",e.DESIGN_SETTINGS_VIEW="design_settings_view",e.RESIZE_SHEET_VIEW="resize_sheet_view",e.NEW_DESIGN_SIZE_VIEW="new_design_size_view",e.SHORTCUT="shortcut",e.SHORT="short",e.DESIGN_HISTORY_VIEW="design_history_view",e.DESIGN_HISTORY_LOG_CONTAINER="history-log-container",e.DESIGN_HISTORY_LAYER="design-history-layer",e.DESIGN_HISTORY_HEADER="history-header",e.DESIGN_HISTORY_FOOTER="history-footer",e.DESIGN_HISTORY_ROW="design-history-row",e.DESIGN_HISTORY_USER_PROFILE="user-profile",e.DESIGN_HISTORY_USER_PHOTO="user-photo",e.DESIGN_HISTORY_USER_NAME="user-name",e.DESIGN_HISTORY_DESIGN_LOG="design-log",e.DESIGN_HISTORY_BOX="history-box",e.DESIGN_HISTORY_FUNCTION="function-box",e.BUTTON_TOOL_TAB_TOGGLE="button_tools_tab_toggle",e.ADMIN_MODE="admin_mode",e.DEV_MODE="dev_mode",e.UPDATE_MODE="update_mode",e.STYLE_TEMPLATE_SELECTOR="style_template_selector",e.STYLE_TEMPLATE_SAVE="style_template_save",e.DESIGN_SAVE_STATUS="design_save_status",e.RING_LOADER="ring-loader",e.SAVE_REQUIRE="save_require",e.SAVE_FAILED="save_failed",e.SAVE_REQUEST="save_request",e.SAVE_COMPLETE="save_complete",e.BTN_SAVE_ITEM_COMBINATION="btn_save_item_combination",e.BTN_SAVE_ITEM_EFFECT="btn_save_item_effect",e.INLINE_BUTTON="inline_button",e.INLINE="inline",e.TOOLS_TAB="tools_tab",e.TOOLS_ITEM_TITLE="tools_item_title",e.SELECTED_VALUE="selected_value",e.ACTIVE="active",e.INACTIVE="inactive",e.HIDDEN="hidden",e.VISIBLE="visible",e.PREVENT_TRANSITION="prevent_transition",e.OPEN="open",e.SHOW="show",e.HIDE="hide",e.HOVER="hover",e.SWITCH="switch",e.SLIDER="slider",e.LEFT="left",e.RIGHT="right",e.TOP="top",e.BOTTOM="bottom",e.WARNING="warning",e.MOBILE="mobile",e.MOBILE_HIDE="mobile_hide",e.FLOATING_TOP="floating_top",e.EFFECT_TOOLS="effect_tools",e.SCROLL_ELEMENT_CONTENTS="scroll_contents",e.SCROLL_ELEMENT="scroll_element",e.SCROLL_ELEMENT_WRAPPER="scroll_element_wrapper",e.SCROLL_TRACK_HOR="scroll_track_hor",e.SCROLL_TRACK_HOR_BAR="scroll_track_hor_bar",e.SCROLL_TRACK_HOR_INNER="scroll_track_hor_inner",e.SCROLL_TRACK_VER="scroll_track_ver",e.SCROLL_TRACK_VER_BAR="scroll_track_ver_bar",e.SCROLL_TRACK_VER_INNER="scroll_track_ver_inner",e.SCROLL_OFF="scroll_off",e.CIRCLE_RANGE_VALUE_LINE="value_line",e.CIRCLE_RANGE_POINT="circle_range_point",e.CIRCLE_RANGE_WRAP="circle_range_wrap",e.BORDER_RIGHT="border_right",e.BORDER_LEFT="border_left",e.CUSTOM_RANGE_WRAP="custom_range_wrap",e.CUSTOM_RANGE_LINE="custom_range_line",e.CUSTOM_RANGE_BACKGROUND_LINE="background_line",e.CUSTOM_RANGE_VALUE_LINE="value_line",e.ACTION_LIST="action_list",e.ITEM_ORDER_LIST="item_order_list",e.IMAGE_LIST_HAS_TITLE="has_title",e.IMAGE_LIST_COL2="col2",e.ACCORDION_ITEM="tools_accordion_item",e.ACCORDION_LIST="accordion_list",e.ACCORDION_CONTENTS_WRAP="accordion_contents_wrap",e.ACCORDION_TITLE="accordion_title",e.ACCORDION_VISIBLE="accordion_visible",e.ACCORDION_ACTIVE="accordion_active",e.ITEM_RADIO_GROUP="item_radio_group",e.CHECKBOX_EXPAND="checkbox_expand",e.TOOLS_TITLE="tools_title",e.TOOLS_ICON="tools_icon",e.OPTION="option",e.GRADATION_VALUE_LINE="value_line",e.GRADATION_COLOR_VALUE="color_value",e.GRADATION_COLOR_LINE="color_line",e.GRADATION_COLOR_VIEW_BOX="gradation_color_view_box",e.GRADATION_COLOR_PICKER_ITEM="item_gradation_color_picker",e.GRADATION_MASK="gradation_mask",e.TOGGLE_BUTTON_FIRST="item_first_toggle",e.TOGGLE_BUTTON_SECOND="item_second_toggle",e.TOGGLE_BUTTON_ENABLED="item_toggle_enabled",e.TOGGLE_BUTTON_DISABLED="item_toggle_disabled",e.SVG_COLOR_PICKER_ITEM="svg_color_picker",e.COLOR_BUTTON="color_button",e.ACCORDION_ROW_COLOR="accordion_row_color",e.SVG_SETTING_TOOL="svg_setting_tool",e.SVG_INFO_TOOL="svg_info_tool",e.SVG_CATEGORY="svg_category",e.IMAGE_CROP="image_crop",e.IMAGE_WRAP="image_wrap",e.IMAGE_LIST_WRAP="image_list_wrap",e.CROP_BUTTON="crop_button",e.IMAGE_BACKGROUND="image_background",e.PHOTO_TO_BACKGROUND_BUTTON="photo_to_background_button",e.BACKGROUND_SOLID_COLOR_PICKER="background_solid_color_picker",e.COLOR_CONTROL_ITEM="item_color_control",e.COLOR_PICKER_ITEM="item_color_picker",e.CIRCLE_RANGE_ITEM="item_circle_range",e.IMAGE_LIST_ITEM="item_image_list",e.RANGE_ITEM="item_range",e.EXPAND_ITEM="item_expand",e.EFFECT_ITEM="item_effect",e.RADIO_ITEM="item_radio",e.SELECT_ITEM="item_select",e.TOGGLE_ITEM="item_toggle",e.LABEL_ITEM="item_label",e.ICON_LABEL_ITEM="item_icon_label",e.PLUS_MINUS_ITEM="item_plus_minus",e.INPUT_ITEM="item_input",e.PRESET_ITEM="item_preset",e.TOOLS_ITEM="tools_item",e.SVG_ADMIN_VIEW="svg_admin_view",e.SVG_ADMIN_VIEW_BUTTON="svg_admin_view_button",e.REGIST_SVG_WARN="regist_svg_warn",e.ROW_MARGIN_BOTTOM="margin_bottom",e.ROW_MARGIN_TOP="margin_top",e.ROW_BORDER_TOP="border_top",e.ROW_BORDER_BOTTOM="border_bottom",e.ROW_FLEX="flex_group",e.ROW_FLEX_UNSET="unset",e.TOOLS_ROW="tools_row",e.TOOLS_COLUMN="tools_column",e.TOOLS_ACCORDION_ROW="tools_accordion_row",e.TOOLS_CONTENTS_WRAPPER="tools",e.TOOLS_FOOTER="tools_footer",e.TOOLS_HEADER="tools_header",e.TOOLS_BODY="tools_body",e.TOOLS_SECTION_BUTTONS_WRAP="tools_section_buttons_wrap",e.TOOLS_SECTION_BUTTON="tools_section_button",e.TOOLS_SECTION="tools_section",e.TOOLS_FILTER="tools_filter",e.TOOLS_PRESET_FILTER_ROW="preset_filter_row",e.TOOLS_DIRECT_FILTER_ROW="direct_filter_row",e.DRAG_ITEM="drag_item",e.MENU_ITEM="menu_item",e.CONTENTS_ITEM="contents_item",e.TAB_MENU="tab_menu",e.TAB_MENU_ITEM="tab_menu_item",e.TAB_CONTENTS="tab_contents",e.TAB_CONTENTS_ITEM="tab_contents_item",e.MENU_CONTENTS_HEADER="menu_contents_header",e.MENU_CONTENTS_BODY="menu_contents_body",e.FORM="form",e.FORM_ITEM="form_item",e.ACCORDION="accordion",e.TABLE="table",e.TABLE_HEADER="table_header",e.TABLE_BODY="table_body",e.TABLE_ROW="table_row",e.TEMPLATE_TYPE_SELECT_TABLE="template_type_select_table",e.TABLE_ROW_CHECKBOX="table_row_checkbox",e.READ_ONLY="read_only",e.PAGINATION="pagination",e.PAGE_INPUT="page_input",e.TEMPLATE_PROJECT_CREATE_MENU="template_project_create_menu",e.TEMPLATE_PROJECT_MANAGEMENT_MENU="template_project_management_menu",e.TEMPLATE_PROJECT_SEARCH_MENU="template_project_search_menu",e.PROJECT_VIEW="project_view",e.TEMPLATE_PAGE_LIST_VIEW="template_page_list_view",e.TEMPLATE_LIST_VIEW="template_list_view",e.TEMPLATE_VIEW="template_view",e.PROJECT_SEARCH_VIEW="project_search_view",e.VIEW_CONTENTS="view_contents",e.TEXT_AREA_ROW="text_area_row",e.INFO_SECTION="info_section",e.BUTTON_SECTION="button_section",e.ARRANGE_TYPE_SECTION="arrange_type_section",e.ARRANGE_TYPE_DESC="arrange_type_desc",e.TEMPLATE_TYPE_SECTION="template_type_section",e.SEARCH_FORM_SECTION="search_form_section",e.LIST_SECTION="list_section",e.CANCEL="cancel",e.SUBMIT="submit",e.UPDATE="update",e.SEARCH="search",e.LOAD="load",e.DELETE="delete",e.FOOTER="footer",e.HEADER="header",e.BODY="body",e.CONTENTS="contents",e.INSIDE_CONTENTS="inside_contents",e.NUMBER_LABEL="number_label",e.DISABLED_ITEM_CNT="disabled_item_cnt",e.USED="used",e.SORT_TYPE="sort_type",e.PAGE_SIZE="page_size",e.PAGE_TITLE="page_title",e.PAGE_TITLE_WRAP="page_title_wrap",e.PAGE_TITLE_ICON="page_title_icon",e.PAGE="page",e.PAGING_RESULT="paging_result",e.POINTER="pointer",e.LINKED="linked",e.LINKED_MESSAGE="linked_message",e.TEMPLATE_LINK_POPUP_CONTENTS="template_link_popup_contents",e.THUMB="thumb",e.LOCK="lock",e.HIGHLIGHT="highlight",e.TEMPLATE_PAGE_ACCORDION_ITEM="template_page_accordion_item",e.TITLE_WRAP="title_wrap",e.BREADCRUMB="breadcrumb",e.HAS_BREADCRUMB="has_breadcrumb",e.BTN_RECYCLE_BIN="btn_recycle_bin",e.BTN_RECOVERY="btn_recovery",e.BTN_BACK="btn_back",e.TEMPLATE_PAGE_RECYCLE_BIN="template_page_recycle_bin",e.PREVIEW_SECTION="preview_section",e.PREVIEW_WRAP="preview_wrap",e.LIST_ROW="list_row",e.IMG_WRAP="img_wrap",e.CURRENT_PAGE="current_page",e.BTN_ADD_PAGE="btn_add_page",e.BTN_DELETE_MODE="btn_delete_mode",e.BTN_DELETE_PAGE="btn_delete_page",e.SELECT_TOOL="select_tool",e.SELECT_EDIT="select_edit",e.TWO_LAYER_SELECT_TOOL="two_layer_select_tool",e.IMAGE_SELECT_TOOL="image_select_tool",e.SEARCH_TOOL="search_tool",e.LAYER_TAB_TOOL="layer_tab_tool",e.PAGINATION_TOOL="pagination_tool",e.RADIO_TOOL="radio_tool",e.ITEM_MENU_RADIO_TOOL="item_menu_radio_tool",e.TEMPLATE_TYPE_TOOL="template_type_tool",e.SUB_PAGES_TOOL="sub_pages_tool",e.MULTI_TYPE_RESOURCE_LIST_TOOL="multi_type_resource_list_tool",e.HIDDEN_HEADER="hidden_header",e.MULTI_TYPE="multi_type",e.MULTI_TYPE_ITEM="multi_type_item",e.SEARCH_MODE="search_mode",e.HAS_MORE="has_more",e.BTN_MORE="btn_more",e.PRINT_OPTION="print_option",e.HIDDEN_TO_USER="hidden_to_user",e.BUTTON_MODE="button_mode",e.TEMPLATE_TYPE_SELECT="template_type_select",e.PRIVATE="private",e.LIB_TAB_NAV="lib_tab_nav",e.LIB_TAB_CONTENTS="lib_tab_contents",e.BTN_SELECT="btn_select",e.SELECT_LIST_WRAP="select_list_wrap",e.SEARCH_WRAP="search_wrap",e.LAYER_TAB_NAV="layer_tab_nav",e.LAYER_TAB_CONTENTS="layer_tab_contents",e.LIST_WRAP="list_wrap",e.JUSTIFIED="justified",e.EMPTY_MESSAGE="empty_message",e.HAS_CATE="has_cate",e.RESOURCE_FILTER_TOOL="resource_filter_wrapper",e.COLLECTION_FILTER="category_filter",e.SEARCH_WRAPPER="search_wrapper",e.PAGINATION_WRAPPER="pagination_wrapper",e.PREV="prev",e.NEXT="next",e.HIDE_LAST_PAGE_NO="hide_last_page_no",e.BTN_LAYER="btn_layer",e.MY_COLLECTION="my_collection",e.BOTTOM_WRAP="bottom_wrap",e.BORDER_DASHED="border_dashed",e.BTN_ADD_TEXT="btn_add_text",e.MULTI_COLOR="multi_color",e.FONT_COLOR="font_color",e.BTN_IMAGE_UPLOAD="image_upload",e.BTN_CAPACITY_INFO="capacity_info",e.BTN_IMAGE_SEARCH_INFO="image_search_info",e.USER_IMAGE_HANDLE="user_image_handle",e.PROGRESS_BAR_HOR="progress_bar_hor",e.CONTENTS_WRAP="contents_wrap",e.LOGIN_NOTI_LAYER="login_noti_layer",e.EMPTY_LIST_NOTI_LAYER="empty_list_noti_layer",e.DRAG_TO_UPLOAD_LAYER="drag_to_upload_layer",e.RECOMMEND_LIST="recommend_list",e.MENU_LAYER="menu_layer",e.TITLE="title",e.SUB_TITLE="sub_title",e.URL="url",e.ICON="icon",e.TITLE_SECTION="title_section",e.DESC="desc",e.DATE="date",e.CLEAR_BOTH="clear_both",e.BUTTON_WRAP="button_wrap",e.RADIO_WRAP="radio_wrap",e.NEW_TAB="new_tab",e.TEMPLATE_MANAGER="template_manager",e.NEW_TEMPLATE_MANAGER="new_template_manager",e.TEMPLATE_MANAGER_CONTENTS="template_manager_contents",e.THUMB_ROW="thumb_row",e.KEYWORD_ROW="keyword_row",e.LINK_ROW="link_row",e.LAST_ROW="last_row",e.BTN_CANCEL="btn_cancel",e.BORDER_NONE="border_none",e.SIZE_LABEL="size_label",e.CHECKBOX_WRAP="checkbox_wrap",e.CUSTOM_SIZE="custom_size",e.FIX_RATIO="fix_ratio",e.DDDOT_WRAP="dddot_wrap",e.DESIGNER_ID="designer_id",e.KEYWORDS="keywords",e.UPDATE_DATE="update_date",e.LIMIT_HEIGHT="limit_height",e.KEYWORD_NONE="keyword_none",e.WORD_WRAP="word_wrap",e.PAGE_CNT="page_cnt",e.POSITION_EVEN="position_even",e.SUB_PAGE_OPENED="sub_page_opened",e.BUTTON_BIZ="button_biz",e.POPUP="popup",e.OFFSET_POPUP="offset_popup",e.POPUP_CONTENTS_WRAP="popup_contents_wrap",e.UP_SIDE="up_side",e.LEFT_SIDE="left_side",e.RIGHT_SIDE="right_side",e.POPUP_TITLE="popup_title",e.POPUP_TEMPLATE_DESIGN_SAVE="popup_template_design_save",e.POPUP_DESIGN_SAVE="popup_design_save",e.SAVE_TYPE_RADIO_WRAP="save_type_radio_wrap",e.POPUP_DESIGN_LOAD="popup_design_load",e.BTN_INIT_DESIGN="btn_init_design",e.BTN_ADD_DESIGN="btn_add_design",e.POPUP_LOADING="popup_loading",e.LOADING_WRAP="loading_wrap",e.LOADING_BOX="loading_box",e.LOADING="loading",e.POPUP_TEMPLATE_STYLE_SAVE="popup_template_style_save",e.POPUP_MSG="popup_msg",e.BTN_CREATE="btn_create",e.BTN_UPDATE="btn_update",e.UPDATABLE="updatable",e.POPUP_WARNING="warning_popup",e.POPUP_WARNING_ICON_WRAP="icon_wrap",e.POPUP_WARNING_TITLE="title",e.POPUP_WARNING_SUB_TITLE="sub_title",e.POPUP_WARNING_DESCRIPTION="description",e.POPUP_WARNING_BTN_WRAP="btn_wrap",e.POPUP_WARNING_BTN_CANCEL="btn_cancel",e.POPUP_WARNING_BTN_CONFIRM="btn_confirm",e.POPUP_DOWNLOAD_WAITING="download_waiting_popup",e.POPUP_DOWNLOAD_WAITING_BACKGROUND="background",e.POPUP_DOWNLOAD_WAITING_CONTENTS="contents",e.RIGHT_MENU_POPUP="right_menu_popup",e.LEFT_MENU_POPUP="left_menu_popup",e.LAYER_SELECT_INFO="layer_select_Info",e.LAYER_WRAP="layer_wrap",e.LAYER="layer",e.NOT_DEEP="not_deep",e.DEEP="deep",e.FOLD="fold",e.FOLDABLE="foldable",e.VERY_DEEP="very_deep",e.SELECTED="selected",e.GROUP="group",e.BACKGROUND="background",e.LAST="last",e.BTN_GROUP="btn_group",e.BTN_LOCK="btn_lock",e.BTN_DELETE="btn_delete",e.SPECIAL="special",e.GUIDELINE_TOGGLE_BTN_WRAP="guideline_toggle_btn_wrap",e.GUIDELINE_ADD_BTN_WRAP="guideline_add_btn_wrap",e.GUIDELINE_ALL_DEL_BTN_WRAP="guideline_all_del_btn_wrap",e.GUIDELINE_CONTENTS="guideline_contents",e.GUIDELINE="guideline",e.HORIZONTAL="horizontal",e.VERTICAL="vertical",e.GUIDELINE_TOOLTIP="guideline_tooltip",e.COLOR_CONTROL_POPUP="color_control_popup",e.DEFAULT_MODE="default_mode",e.DIRECT_MODE="direct_mode",e.CUSTOM_MODE="custom_mode",e.EDIT_MODE="edit_mode",e.COLOR_CONTROL_HEADER="color_control_header",e.COLOR_CONTROL_BODY="color_control_body",e.COLOR_CONTROL_FOOTER="color_control_footer",e.COLOR_CONTROL_TITLE="color_control_title",e.COLOR_CONTROL_BACK="color_control_back",e.COLOR_CONTROL_MORE="color_control_more",e.COLOR_CONTROL_CLOSE="color_control_close",e.COLOR_CONTROL_NUMBER_TO_DELTE="color_control_number_to_delete",e.COLOR_CONTROL_QUANTITY_TO_DELETE="color_control_quantity_to_delete",e.PALETTE_WRAPPER="palette_wrapper",e.PICKER_WRAPPER="picker_wrapper",e.USER_PALETTE_WRAPPER="user_palette_wrapper",e.USED_COLORS_AREA="used_colors_area",e.BASIC_PALETTE_AREA="basic_palette_area",e.USER_PALETTE_AREA="user_palette_area",e.PALETTE_SET="palette_set",e.PALETTE_HEADER="palette_header",e.PALETTE_NAME="palette_name",e.PALETTE="palette",e.ADD_COLOR="add_color",e.ADD_NEW_PALETTE="add_new_palette",e.COLOR_TABS="color_tabs",e.MAIN_CONTENT="main_content",e.PALETTE_MENU="palette_menu",e.PALETTE_MENU_LAYER="palette_menu_layer",e.SCROLL_WRAP="scroll_wrap",e.SCROLL_CONTENT="scroll_content",e.BASIC_PALETTE="basic_palette",e.CUSTOM_PALETTE="custom_palette",e.CUSTOM_LONG_PALETTE="custom_long_palette",e.SCROLL_BAR_WRAP="scroll_bar_wrap",e.SCROLL_BAR="scroll_bar",e.PALETTE_LIST_WRAP="palette_list_wrap",e.PALETTE_LIST="palette_list",e.PALETTE_LIST_BOTTOM_BAR="palette_list_bottom_bar",e.PALETTE_POPUP="palette_popup",e.PALETTE_POPUP_LAYER="palette_popup_layer",e.PALETTE_POPUP_TITLE="palette_popup_title",e.PALETTE_POPUP_INPUT="palette_popup_input",e.PALETTE_POPUP_DESCRIPTION="palette_popup_description",e.PALETTE_POPUP_CANCEL="palette_popup_cancel",e.PALETTE_POPUP_CONFIRM="palette_popup_confirm",e.PALETTE_POPUP_DELETE="palette_popup_delete",e.COLOR_CHIP="color_chip",e.HIDDEN_CHIP="hidden_chip",e.TRANSPARENT="transparent",e.TRANSPARENT_PALETTE="transparent_palette",e.TRANSPARENT_CHIP="transparent_chip",e.TRANSPARENT_TEXT="transparent_text",e.TRANSPARENT_AREA="transparent_area",e.ADD_COLOR_POPUP="add_color_popup",e.SELECTION_COMPLETE="selection_complete",e.COLOR_SPECTRUM="color_spectrum",e.WHITE_SPECTRUM="white_spectrum",e.BLACK_SPECTRUM="black_spectrum",e.BORDER_SPECTRUM="border_spectrum",e.COLOR_SELECTOR="color_selector",e.COLOR_SPECTRUM_SELECTOR="color_spectrum_selector",e.COLOR_BAR="color_bar",e.COLOR_BAR_SELECTOR="color_bar_selector",e.DELETE_COLOR_BUTTONS="delete_color_buttons",e.CANCEL_TO_DELETE="cancel_to_delete",e.COMPLETE_TO_DELETE="complete_to_delete",e.DELETE_COLOR_BAR="delete_color_bar",e.DELETE_COLOR_MODE="delete_color_mode",e.DELETE_COLOR_DESCRIPTION="delete_color_description",e.DELETE_COLOR="delete_color",e.LINE="line",e.USED_COLOR_TEXT="used_color_text",e.COLOR_STATUS="color_status",e.COLOR_DISPLAY="color_display",e.PAGE_SPOID="page_spoid",e.SPOID_CANVAS="spoid_canvas",e.SPOID="spoid",e.MAGNIFIER="magnifier",e.RECT="rect",e.SPOID_COLOR_INFO="spoid_color_info",e.SPOID_COLOR="spoid_color",e.SPOID_COLOR_CODE="spoid_color_code",e.HEX_AREA="hex_area",e.HEX_INPUT="hex_input",e.CHANGE_TO_RIGHT="change_to_right",e.CHANGE_SAME_COLORS="change_same_colors",e.CHANGE_SAME_COLORS_CONTENT="change_same_colors_content",e.CHANGE_SAME_COLORS_CHECK="change_same_colors_check",e.CHANGE_SAME_COLORS_TEXT="change_same_colors_text",e.SOCIAL_LOGIN_BOX="social_login_box",e.SOCIAL_LOGIN_BTN="btn-social-login",e.SOCIAL_LOGIN_IMG="social-login-logo",e.SOCIAL_LOGIN_GOOGLE="google-logo",e.SOCIAL_LOGIN_FACEBOOK="facebook-logo",e.SOCIAL_LOGIN_NAVER="naver-logo",e.SOCIAL_LOGIN_KAKAO="kakao-logo",e.SOCIAL_LOGIN_BIZHOWS="bizhows-logo",e.INFO_WRAP="info_wrap",e.BITMAP_INFO="bitmap_info",e.BITMAP_THUMB="sticker_thumb",e.MOCKUP_INFO="mockup_info",e.MOCKUP_THUMB="mockup_thumb",e.BTN_REGIST_MOCKUP="btn_regist_mockup",e.HELP_CENTER="help_center",e.PROGRESS_WRAP="progress_wrap",e.PROGRESS_BAR="progress_bar",e.PROGRESS_CURRENT="progress_current",e.PROGRESS_CANCEL="progress_cancel",e.DESIGN_SHARE_HEADER="design_share_header",e.DESIGN_SHARE_TAB="share_tab",e.DESIGN_SHARE_DETAIL="share_detail_container",e.DESIGN_SHARE_PUB_TAB="public_share",e.DESIGN_SHARE_PRI_TAB="private_share",e.DESIGN_SHARE_LINK_WRAP="share_link_wrap",e.DESIGN_SHARE_LINK_WRAP_HEADER="share_link_header",e.DESIGN_SHARE_LINK_WRAP_FORM="share_link_form",e.DESIGN_SHARE_VISIBILITY_SETTER="share_visibility",e.DESIGN_SHARE_VISIBILITY_OPTION_BOX="visibility_option_box",e.DESIGN_SHARE_VISIBILITY_OPTION="visibility_option",e.DESIGN_SHARE_DESCRIPTION_FLASH="share_description_flash",e.DESIGN_SHARE_LABELED_OPTION="labeled_switch_wrap",e.DESIGN_SHARE_PUB_TAB_BTN_WRAP="public_share_btn_wrap",e.DESIGN_SHARE_PUB_TAB_BTN="btn_share_confirm",e.DESIGN_SHARE_PRI_SHARED_USER_LIST_WRAP="share_with_user_wrap",e.DESIGN_SHARE_PRI_SHARED_USER_LIST_HEADER="share_with_user_header",e.DESIGN_SHARE_PRI_BTN_UNSHARE_ALL="btn_toggle_unshare_all",e.DESIGN_SHARE_PRI_SHARED_USER_LIST="shared_user_list",e.DESIGN_SHARE_PRI_SHARED_USER_LIST_ROW="row_shared_user",e.DESIGN_SHARE_PRI_INVITE_USER_WRAP="invite_with_mail_wrap",e.DESIGN_SHARE_PRI_MAIL_LIST_WRAP="mail_list_wrap",e.DESIGN_SHARE_PRI_MAIL_LIST_CONTAINER="user_mail_container",e.DESIGN_SHARE_PRI_USER_MAIL_WRAP="user_mail_wrap",e.DESIGN_SHARE_PRI_TAB_BTN_WRAP="private_share_btn_wrap",e.DESIGN_SHARE_PRI_CHANGE_NOTI="change_notification_wrap",e.DESIGN_SHARE_PRI_TAB_BTN_SHARE="ps_btn_share",e.DESIGN_SHARE_PRI_TAB_BTN_CANCEL="ps_btn_cancel",e.DESIGN_PREVIEW_HEADER="new_preview_header",e.DESIGN_PREVIEW_HEADER_LEFT="header_left",e.DESIGN_PREVIEW_HEADER_DESIGN_INFO="design_info",e.DESIGN_PREVIEW_HEADER_RIGHT="header_right",e.DESIGN_PREVIEW_HEADER_RIGHT_PREVIEW_BTN="preview_btn",e.DESIGN_PREVIEW_HEADER_RIGHT_PROFILE="preview_user_profile",e.DESIGN_PREVIEW_BODY="new_preview_body",e.DESIGN_PREVIEW_LOWER_BAR="lower_bar",e.DESIGN_PREVIEW_LOWER_BAR_WEST="west_container",e.DESIGN_PREVIEW_LOWER_BAR_WEST_SCALE_CONTROLLER="scale_controller",e.DESIGN_PREVIEW_LOWER_BAR_WEST_SC_PERCENTAGE_INDICATOR="percentage_indicator",e.DESIGN_PREVIEW_LOWER_BAR_EAST="east_container",e.DESIGN_PREVIEW_LOWER_BAR_EAST_PAGE_INDICATOR="page_indicator",e.DESIGN_PREVIEW_LOWER_BAR_EAST_PI_CURRENT_PAGE="current_page",e.DESIGN_PREVIEW_LOWER_BAR_EAST_ROUND_BTN="round_btn",e.DESIGN_PREVIEW_PROFILE_INFO_BOX="profile-info-box",e.DESIGN_PREVIEW_PROFILE_INFO_BOX_UPPER="upper-wrap",e.DESIGN_PREVIEW_PROFILE_INFO_BOX_LOWER="lower-wrap",e.ITEM_HOVER_BOX="item_hover_box",e.DESIGN_PROJECT_ITEM="design_project_item",e.CONTENT_EDITABLE_ELEMENT="content_editable_element",e.TYPE_NAME="type_name",e.DESIGN_LIST="design_list",e.DESIGN_TYPE_SELECTOR="design_type_selector",e.DESIGN_PROJECT_ITEM_DDDOT_POPUP_CONTENTS="design_project_item_dddot_popup_contents",e.RIGHT_FLOATING_MENU_LAYER_BTN="right_floating_menu_layer_btn",e.RIGHT_FLOATING_MENU_GUIDELINE_BTN="right_floating_menu_guideline_btn",e.RIGHT_FLOATING_MENU_SHEET_SIZE_BTN="right_floating_menu_sheet_size_btn",e.CONTOUR="contour",e.PIXABAY_PHOTO="pixabay_photo",e.PIXABAY_INIT_LAYER="pixabay_init_layer",e.PIXABAY_INIT_TITLE="pixabay_init_title",e.PIXABAY_RECOMMEND_WRAP="pixabay_recommend_wrap",e.PIXABAY_RECOMMEND_TITLE="pixabay_recommend_title",e.PIXABAY_RECOMMENT_KEYWORDS="pixabay_recommend_keywords",e.PRINTOUT_INFO_PRINT_AREA_ON="print_area_on",e.PRINTOUT_RESTRICTION_LEVEL_WARNING="level_warning",e.PRINTOUT_RESTRICTION_LEVEL_CAUTION="level_caution",e.PRINTOUT_RESTRICTION_LEVEL_RECOMMEND="level_recommend",e.PRINTOUT_RESTRICTION_LEVEL_HOLD="level_hold",e.THEME_MIRIDI="theme_miridi",e.THEME_BIZHOWS="theme_bizhows",e.SHARED_DESIGN_VIEWER="shared_design_viewer",e.CONTAINER="container",e.DESIGN_VIEWER="design_viewer",e.BTN_HOME="btn_home",e.TOGGLE_BUTTON="toggle_button",e.DESIGN_PRESENTATION_PLAYER="design_presentation_player",e.DESIGN_PRESENTATION_VIEW="design_presentation_view",e.SLIDE_VIEW="slide_view",e.PAGE_CONTAINER="page_container",e.PAGE_WRAP="page_wrap",e.LOADING_PRESENTATION="loading_presentation",e.PAGE_END_VIEW="page_end_view",e.DESIGN_PRESENTATION_CONTROLLER="design_presentation_controller",e.DESIGN_PRESENTATION_CONFIG_MANAGER="design_presentation_config_manager",e.DESIGN_PRESENTATION_PLAY_CONTROLLER="design_presentation_play_controller",e.DESIGN_PRESENTATION_PAGE_NAVIGATOR="design_presentation_page_navigator",e.PLAYING="playing",e.BUTTON_PLAY="button_play",e.BUTTON_REPEAT="button_repeat",e.DESIGN_PRESENTATION_PAGE_MENU="design_presentation_page_menu",e.OPTION_NAME="option_name",e.OPTION_ELEMENT="option_element",e.ROW="row",e.DESIGN_VIEWER_PROGRESS_BAR="design_viewer_progress_bar",e.FOCUS_BAR="focus_bar",e.TOGGLE_BUTTON_SWITCH="toggle_button_switch",e.SWITCH_SLIDER="switch_slider",e.GUIDE_SCROLL="guide_scroll",e.BUTTON_RADIO="button_radio",e.EDITABLE_SELECT="editable_select",e.OPTION_LAYER="option_layer"}(i||(i={}))},,,,,,,,,function(e,t,n){"use strict";n.d(t,"e",function(){return V}),n.d(t,"d",function(){return Y}),n.d(t,"b",function(){return W}),n.d(t,"c",function(){return z}),n.d(t,"a",function(){return X});var i=n(0),r=n.n(i),a=n(1),o=n.n(a),s=n(35),l=n.n(s),c=n(36),u=n.n(c),h=n(39),d=n.n(h),p=n(44),v=n.n(p),f=n(38),g=n.n(f),m=n(46),E=n.n(m),y=n(40),T=n.n(y),_=n(37),I=n.n(_),C=n(51),S=n(59),w=n(49),k=n(187),R=n(3),L=n(245),O=n(64),A=n(43),b=n(223),P=n(391),N=n(101),x=n(45),M=n(42),D=n(96),B=n(48),U=n(172),G=n(137),F=n(124),H=n(71),V=function(e){function t(e,n,i,r,a){var o,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:z.INDEPENDENT,h=arguments.length>8&&void 0!==arguments[8]&&arguments[8],p=arguments.length>9&&void 0!==arguments[9]&&arguments[9],f=!(arguments.length>10&&void 0!==arguments[10])||arguments[10],m=!(arguments.length>11&&void 0!==arguments[11])||arguments[11],E=!(arguments.length>12&&void 0!==arguments[12])||arguments[12],y=!(arguments.length>13&&void 0!==arguments[13])||arguments[13];return l()(this,t),o=d()(this,g()(t).call(this,e,n,i,r,a,s,h,p,f,m,E,y)),I()(v()(o),"photoPos",new w.a(0,0,0,0)),I()(v()(o),"_isFrameFixed",!0),I()(v()(o),"_isPhotoFixedToFrame",!1),I()(v()(o),"photoXScale",1),I()(v()(o),"photoYScale",1),I()(v()(o),"photoScale",1),I()(v()(o),"isGradationMasked",!1),I()(v()(o),"oldCenter",new w.c(0,0)),I()(v()(o),"rotateCorrectV",new w.c(0,0)),I()(v()(o),"canIgnoreCropBox",!1),I()(v()(o),"shadowBlurConstant",3),I()(v()(o),"backgroundState",X.NONE),o.belongsTo=u,o.props.setChangePositionSetRevision(!1),o.props.setItemRotate(c),o.itemPosition=new w.a(o.props.getLeft(),o.props.getTop(),o.props.getRight(),o.props.getBottom()),o.photoCrop=new L.a(o.itemPosition.getWidth(),o.itemPosition.getHeight()),o.isActiveLiveEdit=!0,o.isActiveWebGLFilter=!0,o.originRect=o.getLTRBCoordinate(),o.originImageRect=o.itemPosition.clone(),o}var n,i,a,s;return T()(t,e),u()(t,[{key:"getImageElement",value:function(){return S.b.getData(this.props.getPhotoKey())}},{key:"makeProps",value:function(){return new k.c}},{key:"getPhotoImageRect",value:function(e){var t=this.itemPosition;return new w.a((t.left-this.props.getLeft())*e,(t.top-this.props.getTop())*e,(t.right-this.props.getLeft())*e,(t.bottom-this.props.getTop())*e)}},{key:"canDrawShadow",value:function(){return this.props.isActiveShadow()&&M.a.isDefaultMode()&&!this.isBackground&&this.belongsTo!==z.IMAGEFRAME}},{key:"render",value:(s=o()(r.a.mark(function e(t,n){var i=this;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=o()(r.a.mark(function e(a){var o,s,l,c,u,h,d,p,v,f,g,m,E,y,T;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=i.getImageElement(),!i.isResourceLoadFail()&&o){e.next=6;break}return e.next=4,i.renderResourceLoadFailView(t,n);case 4:return a(),e.abrupt("return");case 6:s=o.width,l=o.height,c=t.canvas.width,u=t.canvas.height,t.save(),t.globalAlpha=i.props.getOpacity()/255,i.isUnsupportedLicense()&&(t.globalAlpha=.5),t.translate(c/2,u/2),t.scale(i.props.isFlipH()?-1:1,i.props.isFlipV()?-1:1),t.translate(-c/2,-u/2),h=i.getPhotoImageRect(n),d=s/i.itemPosition.getWidth(),p=l/i.itemPosition.getHeight(),t.drawImage(o,h.left*d,h.top*p,s*n,l*n),v=P.b.getFilterParamMap(i.props),f=t.getImageData(0,0,c,u),g=Math.ceil(i.renderLeft),m=Math.ceil(i.renderTop),E=Math.floor(o.width*i.getWidth()/i.itemPosition.getWidth()*n),y=Math.floor(o.height*i.getHeight()/i.itemPosition.getHeight()*n),T=P.a.processImage(f,v,E,y,g,m),t.putImageData(T,0,0),i.props.isActiveGradationMask()&&(T=b.c.getLinearGradientMask(T,i.props.getGradationMaskDepth(),i.props.getGradationMaskDirection(),E,y,g,m),t.putImageData(T,0,0)),t.restore(),a();case 31:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)})),function(e,t){return s.apply(this,arguments)})},{key:"renderShadow",value:function(e,n,i,r,a){if(this.canDrawShadow()){var o=Math.ceil(this.props.getWidth()*n),s=Math.ceil(this.props.getHeight()*n),l=this.getShadowCanvasPosData(n);e.width=l.width,e.height=l.height;var c=e.getContext("2d");c.save();try{if(this.canDrawShadow()){c.translate(-o,-s);var u=b.a.hex2rgb(this.props.getShadowColor()),h=this.props.getShadowAlpha()/100,d=o<s?o:s;c.shadowColor="rgba(".concat(u.r,", ").concat(u.g,", ").concat(u.b,", ").concat(h,")"),c.shadowOffsetX=o*(t.VALUE_TO_MULTIPLY+1)/2,c.shadowOffsetY=s*(t.VALUE_TO_MULTIPLY+1)/2,c.shadowBlur=this.props.getShadowBlur()*d*this.shadowBlurConstant/600}r&&a?c.drawImage(i,0,0,r,a):c.drawImage(i,0,0)}finally{c.restore()}}}},{key:"renderThumbnail",value:(a=o()(r.a.mark(function e(n,i){var a=this;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=o()(r.a.mark(function e(o,s){var l,c,u,h,d,p,v,f,g,m,E,y,T,_,I,C,S,k,R,L,A,b,P,N,x,M,D,B;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.save(),e.prev=1,!a.isUnsupportedLicense()){e.next=6;break}return n.restore(),o(),e.abrupt("return");case 6:if(!((l=a.getCropPosData(n.canvas.width,n.canvas.height,i)).width>0&&l.height>0)){e.next=61;break}if(c=a.getImageElement()){e.next=23;break}return(u=O.a.createCanvas()).width=a.getWidth()*i,u.height=a.getHeight()*i,h=u.getContext("2d"),e.next=16,a.renderResourceLoadFailView(h,i);case 16:return n.save(),n.translate(a.props.getLeft()*i,a.props.getTop()*i),a.props.getRotate()&&(d=a.props.getWidth()/2*i,p=a.props.getHeight()/2*i,n.translate(d,p),n.rotate(Math.round(a.props.getRotate()*Math.PI/180*1e3)/1e3),n.translate(-d,-p)),n.drawImage(u,0,0),n.restore(),o(),e.abrupt("return");case 23:if(v=l.width/a.itemPosition.getWidth(),f=l.height/a.itemPosition.getHeight(),g=c.width*v,m=c.height*f,E=l.width*i,y=l.height*i,T=l.left,_=l.top,I=O.a.createCanvas(),5e3,C=Math.min(Math.min(E,5e3)/E,Math.min(y,5e3)/y),I.width=g*C,I.height=m*C,!(Math.min(I.width,I.height)<1)){e.next=39;break}return o(),e.abrupt("return");case 39:return S=c.width/a.itemPosition.getWidth(),k=c.height/a.itemPosition.getHeight(),a.renderLeft=T*S*C,a.renderTop=_*k*C,R=I.getContext("2d"),L=T,a.props.isFlipH()&&(L=-(a.props.getWidth()-l.width-l.left)),A=_,a.props.isFlipV()&&(A=-(a.props.getHeight()-l.height-l.top)),R.translate(-L*S*C,-A*k*C),n.save(),b=O.a.createCanvas(),e.next=53,a.render(R,C);case 53:a.renderShadow(b,i,I,E,y),a.renderLeft=0,a.renderTop=0,n.translate(a.props.getLeft()*i,a.props.getTop()*i),a.props.getRotate()&&(P=a.props.getWidth()/2*i,N=a.props.getHeight()/2*i,n.translate(P,N),n.rotate(Math.round(a.props.getRotate()*Math.PI/180*1e3)/1e3),n.translate(-P,-N)),a.canDrawShadow()&&(x=a.getCanvasPosData(i),M=x.width<x.height?x.width:x.height,D=a.props.getShadowDistance()*M/130,B=w.b.getPointByDistanceAngle(D,a.props.getShadowAngle()+90-a.props.getRotate()),n.drawImage(b,-x.width*(t.VALUE_TO_MULTIPLY-1)/2+B.cx+T*i,-x.height*(t.VALUE_TO_MULTIPLY-1)/2+B.cy+_*i)),n.drawImage(I,T*i,_*i,E,y),n.restore();case 61:e.next=67;break;case 63:return e.prev=63,e.t0=e.catch(1),s(e.t0),e.abrupt("return");case 67:n.restore(),o();case 69:case"end":return e.stop()}},e,null,[[1,63]])}));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)})),function(e,t){return a.apply(this,arguments)})},{key:"getCropPosData",value:function(e,n,i){if(!i)return E()(g()(t.prototype),"getCropPosData",this).call(this,e,n);var r=E()(g()(t.prototype),"getCropPosData",this).call(this,e/i,n/i);if(this.canDrawShadow()){var a=this.getCanvasPosData(1),o=a.width<a.height?a.width:a.height,s=this.props.getShadowDistance()*o/130,l=w.b.getPointByDistanceAngle(s,this.props.getShadowAngle()+90-this.props.getRotate()),c=this.props.getShadowBlur()*o*this.shadowBlurConstant/600+1;l.cx=l.cx<=0?l.cx-c:l.cx+c,l.cy=l.cy<=0?l.cy-c:l.cy+c;var u=this.props.getWidth(),h=this.props.getHeight();if(l.cx<0)r.left=r.left-c<0?0:r.left-c,r.width=r.width-l.cx+c>u?u:r.width-l.cx+c;else{var d=r.left;r.left=r.left-l.cx<0?0:r.left-l.cx-c,r.width+=d-r.left}if(l.cy<0)r.top=r.top-c<0?0:r.top-c,r.height=r.height-l.cy+c>h?h:r.height-l.cy+c;else{var p=r.top;r.top=r.top-l.cy<0?0:r.top-l.cy-c,r.height+=p-r.top}}return r}},{key:"getThumbUrl",value:(i=o()(r.a.mark(function e(t,n){var i,a,o,s,l,c,u,h,d,p,v;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=this.getImageElement())){e.next=19;break}return a=i.width,o=i.height,s=this.props.getWidth()/this.itemPosition.getWidth(),l=this.props.getHeight()/this.itemPosition.getHeight(),d=(h=(c=a*s)>(u=o*l))?t/c:n/u,(p=O.a.createCanvas()).width=h?t:Math.ceil(c*d),p.height=h?Math.ceil(u*d):n,v=p.getContext("2d"),e.next=16,this.render(v,d);case 16:return e.abrupt("return",p.toDataURL());case 19:return e.abrupt("return","");case 20:case"end":return e.stop()}},e,this)})),function(e,t){return i.apply(this,arguments)})},{key:"getLimitedCanvasSizeImgSrc",value:function(e,n,i,r){var a=this.isExternalPhoto()?t.USER_PHOTO_MAX_SIZE:t.BIZ_IMG_MAX_SIZE;if(n<=a&&i<=a)return e.toDataURL();var o=t.getLimitedNewSize(n,i,a),s=o.limitWidth,l=o.limitHeight,c=O.a.createCanvas();return c.width=s*r,c.height=l*r,c.getContext("2d").drawImage(e,0,0,c.width,c.height),c.toDataURL()}},{key:"isExternalPhoto",value:function(){return this.orgType===W.Photo||this.orgType===W.BackgroundPhoto||this.orgType===W.Pixabay||this.orgType===W.BackgroundPixabay}},{key:"getItemType",value:function(){return H.a.PHOTO}},{key:"getShadowCanvasPosData",value:function(e){var n=this.canDrawShadow(),i=this.props.getWidth()*e,r=this.props.getHeight()*e;return{width:Math.ceil(n?i*t.VALUE_TO_MULTIPLY:i),height:Math.ceil(n?r*t.VALUE_TO_MULTIPLY:r),contentleft:0,contenttop:0,offsetX:Math.ceil(n?i*(t.VALUE_TO_MULTIPLY-1)/2:0),offsetY:Math.ceil(n?r*(t.VALUE_TO_MULTIPLY-1)/2:0)}}},{key:"getCorrectedMove",value:function(e,t){var n=new w.c(e,t),i=w.b.getRotatedVectorByPoint(new w.c(0,0),new w.c(n.x,n.y),w.b.getRadianByDegree(-this.props.getRotate())),r=this.photoCrop.getPhotoCloneBoxRect(this.props.getRotate()),a=this.photoCrop.getBoxRect(this.props.getRotate()),o=r.bottom+i.y,s=o<a.bottom;!this.canIgnoreCropBox&&s&&(i.y+=a.bottom-o);var l=r.top+i.y,c=l>a.top;!this.canIgnoreCropBox&&c&&(i.y+=a.top-l);var u=r.right+i.x,h=u<a.right;!this.canIgnoreCropBox&&h&&(i.x+=a.right-u);var d=r.left+i.x,p=d>a.left;return!this.canIgnoreCropBox&&p&&(i.x+=a.left-d),this.photoCrop.increasePhotoCloneBoxPosition(i.x,i.y),w.b.getRotatedVectorByPoint(new w.c(0,0),new w.c(i.x,i.y),w.b.getRadianByDegree(this.props.getRotate()))}},{key:"move",value:function(e,n,i){
//!this.canIgnoreCropBox
if(M.a.isCropMode())if(this.photoCrop.isResizeSelected())this.photoCrop.resize(new w.c(e,n),this.props.getRotate(),this.photoCrop.getPhotoCloneBoxRect(this.props.getRotate())),this.lastRenderStatus.position=null;else if(i&&i.isCenterCorrect){var r=this.getLTRBCoordinate(),a=r.getCenterPos(),o=w.b.calcLocationByRotate(a,this.oldCenter,this.props.getRotate());r.moveCenter(o),this.setLTRBCoordinate(r,!0)}else{var s=this.getCorrectedMove(e,n);E()(g()(t.prototype),"move",this).call(this,s.x,s.y,i),this.itemPosition.move(s.x,s.y)}else this._isFrameFixed&&(E()(g()(t.prototype),"move",this).call(this,e,n,i),(i&&i.forceMove||this.props.isCanUserMove())&&(this.photoPos.left+=e,this.photoPos.right+=e,this.photoPos.top+=n,this.photoPos.bottom+=n))}},{key:"scale",value:function(e){return E()(g()(t.prototype),"scale",this).call(this,e),this.photoPos.changeScale(e),this}},{key:"clone",value:function(){var e=new t("".concat((new Date).getTime(),"-").concat(R.StringUtil.random()),this.props.getLeft(),this.props.getTop(),this.props.getRight(),this.props.getBottom(),this.props.getRotate(),this.props.getItemRotate(),this.belongsTo,this.props.isFlipH(),this.props.isFlipV(),this.props.isCanUserSelect(),this.props.isCanUserMove(),this.props.isCanUserResize(),this.props.isCanUserDel());return e.setProps(this.props.clone()),e._isFrameFixed=this._isFrameFixed,e._isPhotoFixedToFrame=this._isPhotoFixedToFrame,e.photoXScale=this.photoXScale,e.photoYScale=this.photoYScale,e.photoScale=this.photoScale,e.photoPos=new w.a(this.photoPos.left,this.photoPos.top,this.photoPos.right,this.photoPos.bottom),e.addedBy=this.addedBy,e.orgType=this.orgType,e.skinRatioId=this.skinRatioId,e.photoCrop.isCropped=this.photoCrop.isCropped,this.setCloneItemDefaultAttr(e),e.originRect=this.originRect.clone(),e.originImageRect=this.originImageRect.clone(),e.backgroundState=this.backgroundState,e}},{key:"getUsedColor",value:function(){var e=new Set;return this.props.isActiveSolidLine()&&e.add(this.props.getSolidLineColor()),this.canDrawShadow()&&e.add(this.props.getShadowColor()),e}},{key:"isStickerable",value:function(){return!(this.orgType!==W.Sticker||this.photoCrop.isCropped||this.props.getBitmapMaskBitmapId()||this.props.getBlur()||this.props.getVignette()||this.props.getStickerFrameStickerId()||this.props.getSolidLineThickness()||this.props.getGradationMaskDepth()||this.isGradationMask()||this.props.isActiveShadow())}},{key:"isRepoStickerDB",value:function(){switch(this.orgType){case W.Sticker:case W.BackgroundImage:case W.Image:return!0;default:return!1}}},{key:"isGradationMask",value:function(){return this.isGradationMasked}},{key:"isSkinable",value:function(e){return this.isBackground&&Math.round(this.props.getLeft())<=0&&Math.round(this.props.getTop())<=0&&Math.round(this.props.getRight())>=e.width&&Math.round(this.props.getBottom())>=e.height}},{key:"setLTRBCoordinate",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.oldCenter=this.getLTRBCoordinate().getCenterPos(),M.a.isCropMode()&&!n){var i=e.changeScale(1),r=this.getLTRBCoordinate().changeScale(1),a=i.getWidth(),o=i.getHeight(),s=i.left-r.left,l=i.top-r.top;this.photoCrop.increasePhotoCloneBoxPosition(s,l),this.photoCrop.updatePhotoCloneBoxSize(a,o),this.itemPosition=i.changeScaleReverse(1),E()(g()(t.prototype),"setLTRBCoordinate",this).call(this,i)}else{if(this.isBackground)this.itemPosition=e;else{var c=e.left-(this.props.getLeft()-this.itemPosition.left)*e.getWidth()/this.props.getWidth(),u=e.top-(this.props.getTop()-this.itemPosition.top)*e.getHeight()/this.props.getHeight(),h=e.right-(this.props.getRight()-this.itemPosition.right)*e.getWidth()/this.props.getWidth(),d=e.bottom-(this.props.getBottom()-this.itemPosition.bottom)*e.getHeight()/this.props.getHeight();this.itemPosition=new w.a(c,u,h,d)}E()(g()(t.prototype),"setLTRBCoordinate",this).call(this,e)}}},{key:"canDelete",value:function(){return E()(g()(t.prototype),"canDelete",this).call(this)&&M.a.isDefaultMode()}},{key:"canPropertyEdit",value:function(){return E()(g()(t.prototype),"canPropertyEdit",this).call(this)&&M.a.isDefaultMode()}},{key:"getHeaderTitle",value:function(){return this.isBackground?A.a.TOOLS_HEADER_PHOTO_BACKGROUND_TITLE:B.b.getText(this.getResourceType())}},{key:"initCropAndOriginSizeRollback",value:function(){this.setLTRBCoordinate(this.originRect),this.itemPosition=this.originImageRect.clone(),this.disableCrop()}},{key:"initRectToImageRect",value:function(){var e=this.getLTRBCoordinate();E()(g()(t.prototype),"setLTRBCoordinate",this).call(this,new w.a(e.left,e.top,e.left+this.originRect.getWidth(),e.top+this.originRect.getHeight())),this.itemPosition=this.getLTRBCoordinate().clone()}},{key:"disableCrop",value:function(){this.photoCrop.isCropped=!1}},{key:"isRequireLiveEdit",value:function(){return this.orgType!==W.Skin}},{key:"isOnlyOneItem",value:function(){return this.isBackground}},{key:"isPhotoItem",value:function(){return!0}},{key:"getImgOriginalSize",value:(n=o()(r.a.mark(function e(){var t=this;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=o()(r.a.mark(function e(n,i){var a,s,l;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.orgType!==W.Pixabay&&t.orgType!==W.BackgroundPixabay){e.next=13;break}return e.next=4,G.b.fetch(U.a.getFileIDWithKey(t.props.getPhotoKey()));case 4:if((a=e.sent)&&a.imageHeight&&a.imageWidth){e.next=11;break}return e.next=8,S.b.loadImageAsync(D.a.getOriginalPhotoUrl(t.props.getPhotoKey()));case 8:return s=e.sent,n({width:Number(s.width),height:Number(s.height)}),e.abrupt("return");case 11:return n({width:Number(a.imageWidth),height:Number(a.imageHeight)}),e.abrupt("return");case 13:if(t.orgType!==W.Photo&&t.orgType!==W.BackgroundPhoto){e.next=20;break}return e.next=16,S.b.loadImageAsync(D.a.getOriginalPhotoUrl(t.props.getPhotoKey()));case 16:l=e.sent,n({width:l.width,height:l.height}),e.next=21;break;case 20:t.orgType===W.Sticker||t.orgType===W.Image||t.orgType===W.BackgroundImage||t.orgType===W.Skin?M.a.dispatch(new x.c(function(){var e=o()(r.a.mark(function e(i){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,N.a.from(i.getRepositoryType(),!0).getStickerData(t.props.getPhotoKey());case 4:(a=e.sent)||console.log("not found stickerId",t.props.getPhotoKey()),n({width:a.orgWidth,height:a.orgHeight});case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())):(console.log("undefined type",t.orgType),n());case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(0),i(e.t0);case 26:case"end":return e.stop()}},e,null,[[0,23]])}));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)})},{key:"getResourceType",value:function(){switch(this.orgType){case W.Image:return B.a.IMAGE;case W.Sticker:return B.a.BITMAP;case W.Pixabay:return B.a.PIXABAY;default:return B.a.PHOTO}}},{key:"isLazyHandlerHandlePosition",value:function(e){return!1}},{key:"getDisabledResourcePreviewKey",value:function(){switch(this.orgType){case W.Photo:case W.BackgroundPhoto:return C.a.DISABLED_ORIGIN_USER_RESOURCE;case W.Pixabay:case W.BackgroundPixabay:return C.a.NOT_FOUND_ORIGIN_ITEM;case W.Sticker:case W.Image:case W.BackgroundImage:case W.Skin:default:return C.a.DISABLED_ORIGIN_ITEM}}},{key:"isUnsupportedLicense",value:function(){return F.b.isIclickSticker(this.props.getPhotoKey())}},{key:"isValid",value:function(){return!!E()(g()(t.prototype),"isValid",this).call(this)&&0!==(this.props.getPhotoKey()||"").length}},{key:"addedByUser",value:function(){return this.addedBy===C.c.USER||this.addedBy===C.c.UNKNOWN}},{key:"canChangeToBackground",value:function(){var e=this.orgType,t=this.backgroundState,n=e===W.Skin&&t!==X.NONE,i=[W.Sticker,W.BackgroundImage,W.BackgroundPixabay,W.BackgroundPhoto].includes(e),r=e===W.BackgroundImage&&t===X.BACKGROUND_TO_PHOTO,a=![X.ORIGIN,X.PHOTO_TO_BACKGROUND].includes(t);return(n||!i||r)&&a}},{key:"isBackground",get:function(){var e=this.backgroundState,t=[W.Skin,W.BackgroundImage,W.BackgroundPhoto,W.BackgroundPixabay],n=this.orgType===W.Skin&&e!==X.NONE,i=t.includes(this.orgType)&&e===X.ORIGIN;return e!==X.BACKGROUND_TO_PHOTO&&(n||i||e===X.PHOTO_TO_BACKGROUND)}},{key:"isFrameFixed",get:function(){return this._isFrameFixed},set:function(e){this._isFrameFixed=e}},{key:"isPhotoFixedToFrame",get:function(){return this._isPhotoFixedToFrame},set:function(e){this._isPhotoFixedToFrame=e}},{key:"itemPosition",get:function(){return this.photoPos},set:function(e){this.photoPos=e}}],[{key:"getLimitedNewSize",value:function(e,t,n){var i=Math.max(e,t);if(i>n){var r=n/i;return{limitWidth:Math.round(e*r),limitHeight:Math.round(t*r)}}return{limitWidth:e,limitHeight:t}}}]),t}(C.e);I()(V,"STICKER_DEPLOY_TYPE_UNICORN",16),I()(V,"BIZ_IMG_MAX_SIZE",800),I()(V,"USER_PHOTO_MAX_SIZE",800),I()(V,"VALUE_TO_MULTIPLY",2);var W,z,X,Y=function(e){function t(){var e,n;l()(this,t);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return n=d()(this,(e=g()(t)).call.apply(e,[this].concat(r))),I()(v()(n),"msg","generic photo 테스트용"),n}return T()(t,e),u()(t,[{key:"clone",value:function(){var e=new t(this.tbpeId,this.props.getLeft(),this.props.getTop(),this.props.getRight(),this.props.getBottom(),this.props.getRotate(),this.props.getItemRotate(),z.INDEPENDENT,this.props.isFlipH(),this.props.isFlipV(),this.props.isCanUserSelect(),this.props.isCanUserMove(),this.props.isCanUserResize(),this.props.isCanUserDel());return E()(g()(t.prototype),"clone",this).call(this).copy(e),e.msg=this.msg,this.setCloneItemDefaultAttr(e),e}}]),t}(V);!function(e){e.Photo="photo",e.Pixabay="pixabay",e.Sticker="sticker",e.Skin="skin",e.Image="image",e.BackgroundPixabay="backgroundPixabay",e.BackgroundPhoto="backgroundPhoto",e.BackgroundImage="backgroundImage"}(W||(W={})),function(e){e.INDEPENDENT="INDEPENDENT",e.GRID="GRID",e.IMAGEFRAME="IMAGEFRAME"}(z||(z={})),function(e){e.NONE="none",e.ORIGIN="origin",e.BACKGROUND_TO_PHOTO="background_to_photo",e.PHOTO_TO_BACKGROUND="photo_to_background"}(X||(X={}))},function(e,t,n){"use strict";n.d(t,"e",function(){return T}),n.d(t,"a",function(){return i}),n.d(t,"c",function(){return r}),n.d(t,"d",function(){return a}),n.d(t,"b",function(){return o});var i,r,a,o,s=n(0),l=n.n(s),c=n(1),u=n.n(c),h=n(35),d=n.n(h),p=n(36),v=n.n(p),f=n(37),g=n.n(f),m=n(49),E=n(64),y=n(59),T=function(){function e(t,n,i,r,s){var l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=arguments.length>6?arguments[6]:void 0,u=arguments.length>7?arguments[7]:void 0,h=arguments.length>8?arguments[8]:void 0,p=arguments.length>9?arguments[9]:void 0,v=arguments.length>10?arguments[10]:void 0,f=arguments.length>11?arguments[11]:void 0;d()(this,e),g()(this,"lastRenderStatus",{position:null,contents:{revision:-1}}),g()(this,"groupId",""),g()(this,"select",!1),g()(this,"hover",!1),g()(this,"addedBy",0),g()(this,"keepRatio",!1),g()(this,"priority",0),g()(this,"status",a.NEW),g()(this,"isEditMode",!1),g()(this,"readyLiveEdit",!1),g()(this,"renderLeft",0),g()(this,"renderTop",0),g()(this,"isActiveLiveEdit",!1),g()(this,"isActiveWebGLFilter",!1),g()(this,"resourceLoadStatus",o.DEFAULT),this._tbpeId=t;var m=this.makeProps();m.setPosition(n,i,r,s),m.setRotate(l),m.setFlipH(c),m.setFlipV(u),m.setCanUserSelect(h),m.setCanUserMove(p),m.setCanUserResize(v),m.setCanUserDel(f),this.props=m}var t,n,r,s,c,h,p,f;return v()(e,[{key:"setReady",value:(f=u()(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)})),function(){return f.apply(this,arguments)})},{key:"getCanvasPosData",value:function(e){return{width:Math.ceil(this.props.getWidth()*e),height:Math.ceil(this.props.getHeight()*e),contentleft:0,contenttop:0,offsetX:0,offsetY:0}}},{key:"renderThumbnail",value:(p=u()(l.a.mark(function e(t,n,i,r){var a=this;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=u()(l.a.mark(function e(o,s){var c,u,h,d,p,v,f,g,m,y,T,_;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.save(),e.prev=1,i&&r||(i=t.canvas.width,r=t.canvas.height),!((c=a.getCropPosData(i/n,i/n)).width>0&&c.height>0)){e.next=32;break}if(u=c.width*n,h=c.height*n,d=c.left*n,p=c.top*n,v=E.a.createCanvas(),5e3,f=Math.min(Math.min(u,5e3)/u,Math.min(h,5e3)/h),v.width=u*f,v.height=h*f,!(Math.min(v.width,v.height)<1)){e.next=17;break}return o(),e.abrupt("return");case 17:return a.renderLeft=d*f,a.renderTop=p*f,g=v.getContext("2d"),m=a.props.isFlipV()?a.props.getHeight()*n-h-p:-p,y=a.props.isFlipH()?a.props.getWidth()*n-u-d:-d,g.translate(y*f,m*f),t.save(),e.next=26,a.render(g,n*f);case 26:a.renderLeft=0,a.renderTop=0,t.translate(a.props.getLeft()*n,a.props.getTop()*n),a.props.getRotate()&&(T=a.props.getWidth()/2*n,_=a.props.getHeight()/2*n,t.translate(T,_),t.rotate(Math.round(a.props.getRotate()*Math.PI/180*1e3)/1e3),t.translate(-T,-_)),t.drawImage(v,d,p,u,h),t.restore();case 32:e.next=38;break;case 34:return e.prev=34,e.t0=e.catch(1),s(e.t0),e.abrupt("return");case 38:t.restore(),o();case 40:case"end":return e.stop()}},e,null,[[1,34]])}));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)})),function(e,t,n,i){return p.apply(this,arguments)})},{key:"renderResourceLoadingView",value:(h=u()(l.a.mark(function e(t,n){var i,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.save(),i=t.canvas.width,r=t.canvas.height,t.translate(i/2,r/2),t.scale(this.props.isFlipH()?-1:1,this.props.isFlipV()?-1:1),t.translate(-i/2,-r/2),t.fillStyle="#e3e5e7",t.clearRect(0,0,t.canvas.width,t.canvas.height),t.fillRect(0,0,t.canvas.width,t.canvas.height),t.restore();case 10:case"end":return e.stop()}},e,this)})),function(e,t){return h.apply(this,arguments)})},{key:"renderResourceLoadFailView",value:(c=u()(l.a.mark(function e(t,n){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.getResourceLoadStatus(),e.next=e.t0===o.TEMPORARY_ERROR?3:(e.t0,o.UNAUTHORIZED,6);break;case 3:return e.next=5,this.renderResourceLoadFailTemporaryError(t,n);case 5:return e.abrupt("break",9);case 6:return e.next=8,this.renderResourceLoadFailUnauthorized(t,n);case 8:return e.abrupt("break",9);case 9:case"end":return e.stop()}},e,this)})),function(e,t){return c.apply(this,arguments)})},{key:"getDisabledResourcePreviewKey",value:function(){return i.DISABLED_ORIGIN_ITEM}},{key:"renderResourceLoadFailTemporaryError",value:(s=u()(l.a.mark(function e(t,n){var r,a,o,s,c,u,h,d,p,v;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.save(),r=t.canvas.width,a=t.canvas.height,t.translate(r/2,a/2),t.scale(this.props.isFlipH()?-1:1,this.props.isFlipV()?-1:1),t.translate(-r/2,-a/2),t.fillStyle="#ffffff",t.clearRect(0,0,t.canvas.width,t.canvas.height),t.fillRect(0,0,t.canvas.width,t.canvas.height),o=y.b.getData(i.RESOURCE_FETCH_ERROR),s=this.props.getWidth()*n,c=this.props.getHeight()*n,u=o.width,h=o.height,(o.width>s||o.height>c)&&(d=s,p=c,v=o.width/o.height,u=Math.min(p*v,d),h=Math.min(d/v,p)),t.drawImage(o,s/2-u/2,c/2-h/2,u,h),t.restore();case 17:case"end":return e.stop()}},e,this)})),function(e,t){return s.apply(this,arguments)})},{key:"renderResourceLoadFailUnauthorized",value:(r=u()(l.a.mark(function e(t,n){var r,a,o,s,c,u,h,d,p,v,f;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.save(),r=t.canvas.width,a=t.canvas.height,t.translate(r/2,a/2),t.scale(this.props.isFlipH()?-1:1,this.props.isFlipV()?-1:1),t.translate(-r/2,-a/2),o=this.props.getWidth()*n,s=this.props.getHeight()*n,e.t0=this.getDisabledResourcePreviewKey(),e.next=e.t0===i.DISABLED_ORIGIN_ITEM?11:e.t0===i.DISABLED_ORIGIN_USER_RESOURCE?14:e.t0===i.NOT_FOUND_ORIGIN_ITEM?14:18;break;case 11:return c=y.b.getData(i.DISABLED_ORIGIN_ITEM_BACKGROUND),t.drawImage(c,0,0,o,s),e.abrupt("break",18);case 14:return t.fillStyle="#e3e5e7",t.clearRect(0,0,t.canvas.width,t.canvas.height),t.fillRect(0,0,t.canvas.width,t.canvas.height),e.abrupt("break",18);case 18:u=y.b.getData(this.getDisabledResourcePreviewKey()),h=u.width,d=u.height,(u.width>o||u.height>s)&&(p=o,v=s,f=u.width/u.height,h=Math.min(v*f,p),d=Math.min(p/f,v)),t.drawImage(u,o/2-h/2,s/2-d/2,h,d),t.restore();case 24:case"end":return e.stop()}},e,this)})),function(e,t){return r.apply(this,arguments)})},{key:"getCropPosData",value:function(e,t){var n,i=new m.a(this.props.getLeft(),this.props.getTop(),this.props.getRight(),this.props.getBottom());if(0!==this.props.getRotate()){var r=this.props.getRotate(),a=i.left+i.getWidth()/2,o=i.top+i.getHeight()/2,s=m.b.calcLocationByRotate2(0,0,a,o,-r),l=m.b.calcLocationByRotate2(e,0,a,o,-r),c=m.b.calcLocationByRotate2(e,t,a,o,-r),u=m.b.calcLocationByRotate2(0,t,a,o,-r),h=[s.x,l.x,c.x,u.x],d=[s.y,l.y,c.y,u.y];n=new m.a(Math.min.apply(Math,h),Math.min.apply(Math,d),Math.max.apply(Math,h),Math.max.apply(Math,d))}else n=new m.a(0,0,e,t);var p=this.props.getLeft()>n.left?0:n.left-this.props.getLeft(),v=this.props.getTop()>n.top?0:n.top-this.props.getTop(),f=this.props.getWidth()-p;f=this.props.getRight()<n.right?f:f-(this.props.getRight()-n.right);var g=this.props.getHeight()-v;return{width:f,height:g=this.props.getBottom()<n.bottom?g:g-(this.props.getBottom()-n.bottom),left:p,top:v}}},{key:"getThumbUrl",value:(n=u()(l.a.mark(function e(t,n){var i,r,a,o;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.getWidth()>this.getHeight(),r=i?t/this.getWidth():n/this.getHeight(),(a=E.a.createCanvas()).width=i?t:Math.ceil(this.getWidth()*r),a.height=i?Math.ceil(this.getHeight()*r):n,o=a.getContext("2d"),e.next=8,this.render(o,r);case 8:return e.abrupt("return",a.toDataURL());case 9:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})},{key:"getFillFullThumbUrl",value:(t=u()(l.a.mark(function e(t,n){var i,r,a,o;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.getWidth()>this.getHeight(),r=i?n/this.getHeight():t/this.getWidth(),(a=E.a.createCanvas()).width=t,a.height=n,o=a.getContext("2d"),e.next=8,this.renderThumbnail(o,r);case 8:return e.abrupt("return",a.toDataURL());case 9:case"end":return e.stop()}},e,this)})),function(e,n){return t.apply(this,arguments)})},{key:"getWidth",value:function(){return this.props.getWidth()}},{key:"getHeight",value:function(){return this.props.getHeight()}},{key:"getLTRBCoordinate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new m.a(this.props.getLeft(),this.props.getTop(),this.props.getRight(),this.props.getBottom());if(e&&0!==this.props.getRotate()){var n=this.props,i=n.getRotate(),r=t.left+t.getWidth()/2,a=t.top+t.getHeight()/2,o=m.b.calcLocationByRotate2(t.left,t.top,r,a,i),s=m.b.calcLocationByRotate2(t.right,t.top,r,a,i),l=m.b.calcLocationByRotate2(t.left,t.bottom,r,a,i),c=m.b.calcLocationByRotate2(t.right,t.bottom,r,a,i),u=[o.x,s.x,l.x,c.x],h=[o.y,s.y,l.y,c.y];return new m.a(Math.min.apply(Math,u),Math.min.apply(Math,h),Math.max.apply(Math,u),Math.max.apply(Math,h))}return t}},{key:"getHitRegion",value:function(){return new m.a(this.props.getLeft(),this.props.getTop(),this.props.getRight(),this.props.getBottom())}},{key:"initRotateLTRBCoordinate",value:function(){var e=this.getLTRBCoordinate(),t=e.getRotatedLTRBByPivot(e.getCenterPos(),-this.props.getRotate());this.setLTRBCoordinate(t),this.props.setRotate(0)}},{key:"setLTRBCoordinate",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&arguments[2];this.props.setPosition(e.left,e.top,e.right,e.bottom)}},{key:"scale",value:function(e,t){if(t){var n=this.props.getLeft()+this.props.getWidth()*e,i=this.props.getTop()+this.props.getHeight()*e;this.props.setPosition(this.props.getLeft(),this.props.getTop(),n,i)}else this.props.setPosition(this.props.getLeft()*e,this.props.getTop()*e,this.props.getRight()*e,this.props.getBottom()*e);return this}},{key:"move",value:function(e,t,n){(n&&n.forceMove||this.props.isCanUserMove())&&this.props.move(e,t)}},{key:"flipH",value:function(e){var t=this.props.getRotate();e&&0!==t&&this.props.setRotate(-t),this.props.setFlipH(!this.props.isFlipH())}},{key:"flipV",value:function(e){var t=this.props.getRotate();e&&0!==t&&this.props.setRotate(-t),this.props.setFlipV(!this.props.isFlipV())}},{key:"changeNormalMode",value:function(){}},{key:"canDelete",value:function(){return this.props.isCanUserDel()}},{key:"canPropertyEdit",value:function(){return!0}},{key:"isInRange",value:function(e){var t=this.getHitRegion(),n=0!==this.props.getRotate(),i=e.left===e.right&&e.top===e.bottom;if(n&&!i)return m.b.isCollisionOBB(e,0,t,this.props.getRotate());if(n){var r=m.b.calcLocationByRotate(e.getCenterPos(),t.getCenterPos(),-1*this.props.getRotate());e=new m.a(r.x,r.y,r.x,r.y)}return m.b.isCollisionAABB(e,t)}},{key:"setProps",value:function(e){this.props=e}},{key:"copy",value:function(e){Object.assign(e,this.clone())}},{key:"isLock",value:function(){return!this.props.isCanUserResize()&&!this.props.isCanUserMove()&&!this.props.isCanUserDel()}},{key:"lock",value:function(){this.props.setCanUserResize(!1),this.props.setCanUserMove(!1),this.props.setCanUserDel(!1)}},{key:"unlock",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.props.setCanUserResize(e),this.props.setCanUserMove(t),this.props.setCanUserDel(n)}},{key:"canFlip",value:function(){return!0}},{key:"canRotate",value:function(){return!0}},{key:"recycle",value:function(){this.props=null}},{key:"getStatus",value:function(){return this.status}},{key:"setStatus",value:function(e){this.isChangeableStatus(e)&&(e===a.STABLE?this.status===a.LAZY&&this.props.updateRevision():e===a.LAZY||e!==this.status&&this.props.updateRevision(),this.status=e)}},{key:"isChangeableStatus",value:function(e){switch(this.status){case a.LOADING:switch(e){case a.DELETE:return!0;default:return!1}default:return!0}}},{key:"getResourceLoadStatus",value:function(){return this.resourceLoadStatus}},{key:"setResourceLoadStatus",value:function(e){this.resourceLoadStatus=e,this.status=a.CHANGE,this.props.updateRevision()}},{key:"isResourceLoadFail",value:function(){switch(this.resourceLoadStatus){case o.DEFAULT:case o.COMPLETE:return!1;default:return!0}}},{key:"isUnsupportedLicense",value:function(){return!1}},{key:"getRenderStatus",value:function(){return{position:{styleRevision:this.props.getStyleRevision(),zIndex:this.props.zIndex},contents:{revision:this.props.getRevision()}}}},{key:"isChangeContentsStatus",value:function(e){return e.revision!==this.lastRenderStatus.contents.revision}},{key:"isChangePositionStatus",value:function(e){var t=this.lastRenderStatus.position;return null==t||t.zIndex!==e.zIndex||t.styleRevision!==e.styleRevision}},{key:"isChangableWidth",value:function(){return!0}},{key:"isChangableHeight",value:function(){return!0}},{key:"isValid",value:function(){return this.getWidth()>0&&this.getHeight()>0}},{key:"changeTbpeId",value:function(e){this._tbpeId=e}},{key:"isRequireLiveEdit",value:function(){return!1}},{key:"isReadyLiveEdit",value:function(){return this.readyLiveEdit}},{key:"setReadyLiveEdit",value:function(e){this.readyLiveEdit=!0===e}},{key:"isOnlyOneItem",value:function(){return!1}},{key:"isPhotoItem",value:function(){return!1}},{key:"isRBRound",value:function(){return!1}},{key:"isLazyHandlerHandlePosition",value:function(e){return!1}},{key:"getItemBound",value:function(){return{degree:this.props.getRotate(),centerPos:this.getLTRBCoordinate().getCenterPos(),itemLTRB:this.getLTRBCoordinate(),pureLTRB:this.getLTRBCoordinate()}}},{key:"getItemKey",value:function(){return this.tbpeId}},{key:"setCloneItemDefaultAttr",value:function(e){e.lastRenderEditScale=this.lastRenderEditScale,e.copyKey=this.copyKey,e.groupId=this.groupId,this.getStatus()===a.LOADING&&(e.status=this.status)}},{key:"tbpeId",get:function(){return this._tbpeId}}]),e}();g()(T,"ITEM_CLASS","tbpe_item"),function(e){e.DISABLED_ORIGIN_ITEM="DELETED_ORIGIN_ITEM",e.NOT_FOUND_ORIGIN_ITEM="NOT_FOUND_ORIGIN_ITEM",e.DISABLED_ORIGIN_ITEM_BACKGROUND="DELETED_ORIGIN_ITEM_BACKGROUND",e.DISABLED_ORIGIN_USER_RESOURCE="DISABLED_ORIGIN_USER_RESOURCE",e.RESOURCE_FETCH_ERROR="RESOURCE_FETCH_ERROR"}(i||(i={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.LAYOUT=1]="LAYOUT",e[e.USER=2]="USER",e[e.CALFORM=3]="CALFORM"}(r||(r={})),function(e){e.NEW="new",e.LOADING="loading",e.DELETE="delete",e.STABLE="stable",e.CHANGE="change",e.LAZY="lazy"}(a||(a={})),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.COMPLETE=1]="COMPLETE",e[e.UNAUTHORIZED=2]="UNAUTHORIZED",e[e.TEMPORARY_ERROR=3]="TEMPORARY_ERROR"}(o||(o={}))},function(e,t,n){"use strict";n.d(t,"b",function(){return E}),n.d(t,"a",function(){return i});var i,r=n(0),a=n.n(r),o=n(1),s=n.n(o),l=n(35),c=n.n(l),u=n(36),h=n.n(u),d=n(37),p=n.n(d),v=n(3),f=n(47),g=n(171),m=n(43),E=function(){function e(t){c()(this,e),this.useProxy=t}var t,n;return h()(e,[{key:"getFontPath",value:function(e){var t=v.Base16.encodeBase16(e);return"https://img1.smilecat.com/web1/__TBPE.STIKERS2/"+t.substring(0,2)+"/"+t+".sce"}},{key:"getURL",value:function(e){return this.useProxy&&!f.UnicornApiClient.isInit()?"/res?url="+encodeURIComponent(e):e}},{key:"getStickerData",value:(n=s()(a.a.mark(function e(t){var n,i,r=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(r.length>1&&void 0!==r[1])||r[1],e.next=3,this.getStickerDataList([t],n);case 3:return i=e.sent,e.abrupt("return",v.ArrayUtil.isEmpty(i)?null:i[0]);case 5:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"increaseStickerSearchKeywordCount",value:function(e,t){var n=v.CRM.get(m.a.STICKER_INCREASE_WORD_WEIGHT_API_URL).replace("${stickerId}",e.toString()).replace("${words}",t.join(","));f.UnicornApiRequest.post(this.getURL(n),{traditional:!0,contentType:"application/json"}).catch(function(e){console.warn("increase sticker use count error",e)})}},{key:"getStickerDataList",value:(t=s()(a.a.mark(function t(){var n,i,r,o,s=arguments;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=s.length>0&&void 0!==s[0]?s[0]:[],i=!(s.length>1&&void 0!==s[1])||s[1],0!==n.length){t.next=4;break}return t.abrupt("return",[]);case 4:if(r=v.CRM.get(m.a.TBPE_STICKER_INFO_URL),n.forEach(function(e,t){return[r+="".concat(0===t?"?":"&","sticker_id=").concat(encodeURI(e))]}),!i||!n.every(function(t){return null!=e.STICKER_CACHE.get(t)})){t.next=8;break}return t.abrupt("return",n.map(function(t){return e.STICKER_CACHE.get(t)}));case 8:return t.next=10,f.ApiRequest.get(g.e,this.getURL(r));case 10:return(o=t.sent.data).forEach(function(t){return e.STICKER_CACHE.set(t.id,t)}),t.abrupt("return",o);case 13:case"end":return t.stop()}},t,this)})),function(){return t.apply(this,arguments)})}]),e}();p()(E,"STICKER_CACHE",new Map),function(e){e.UNICORN="UNICORN",e.SMILECAT="SMILECAT",e.BIZHOWS="BIZHOWS"}(i||(i={}))},,function(e,t,n){"use strict";n.d(t,"a",function(){return I}),n.d(t,"b",function(){return C});var i=n(73),r=n.n(i),a=n(0),o=n.n(a),s=n(1),l=n.n(s),c=n(35),u=n.n(c),h=n(36),d=n.n(h),p=n(37),v=n.n(p),f=n(51),g=n(3),m=n(136),E=n(49),y=n(45),T=n(42),_=n(71),I=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g.StringUtil.random();u()(this,e),v()(this,"parent",null),v()(this,"members",[]),v()(this,"selectedItem",null),this.groupId=t,this.makeElement()}var t,n;return d()(e,[{key:"makeElement",value:function(){this.boxElement=document.createElement("div"),this.boxElement.className="tbpe_item_group"}},{key:"getItemType",value:function(){return _.a.GROUP}},{key:"clone",value:function(){var t=new e;return this.members.forEach(function(e){t.addMember(e.clone())}),t}},{key:"render",value:(n=l()(o.a.mark(function e(t,n){var i,r,a,s,l,c;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=!0,r=!1,a=void 0,e.prev=3,s=this.getMembers()[Symbol.iterator]();case 5:if(i=(l=s.next()).done){e.next=12;break}return c=l.value,e.next=9,c.render(t,n);case 9:i=!0,e.next=5;break;case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),r=!0,a=e.t0;case 18:e.prev=18,e.prev=19,i||null==s.return||s.return();case 21:if(e.prev=21,!r){e.next=24;break}throw a;case 24:return e.finish(21);case 25:return e.finish(18);case 26:case"end":return e.stop()}},e,this,[[3,14,18,26],[19,,21,25]])})),function(e,t){return n.apply(this,arguments)})},{key:"renderThumbnail",value:(t=l()(o.a.mark(function e(t,n,i,r){var a=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=l()(o.a.mark(function e(s,l){var c,u,h,d,p,v;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,c=!0,u=!1,h=void 0,e.prev=4,d=a.getMembers()[Symbol.iterator]();case 6:if(c=(p=d.next()).done){e.next=13;break}return v=p.value,e.next=10,v.renderThumbnail(t,n,i,r);case 10:c=!0,e.next=6;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(4),u=!0,h=e.t0;case 19:e.prev=19,e.prev=20,c||null==d.return||d.return();case 22:if(e.prev=22,!u){e.next=25;break}throw h;case 25:return e.finish(22);case 26:return e.finish(19);case 27:e.next=33;break;case 29:return e.prev=29,e.t1=e.catch(0),l(e.t1),e.abrupt("return");case 33:s();case 34:case"end":return e.stop()}},e,null,[[0,29],[4,15,19,27],[20,,22,26]])}));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)})),function(e,n,i,r){return t.apply(this,arguments)})},{key:"getLTRBCoordinate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return m.a.getItemsLTRBCoordinate([this],e)}},{key:"move",value:function(e,t,n){this.getAllSingleMembers().forEach(function(i){i.move(e,t,n)})}},{key:"canDelete",value:function(){var e=this.getAllSingleMembers().every(function(e){return e.canDelete()});return e}},{key:"updateBoxStyle",value:function(){var e=this.getLTRBCoordinate(!0).changeScale(T.a.instance.zoomScale*T.a.instance.pageEditScale);this.boxElement.style.left="".concat(e.left,"px"),this.boxElement.style.top="".concat(e.top,"px"),this.boxElement.style.width="".concat(e.getWidth(),"px"),this.boxElement.style.height="".concat(e.getHeight(),"px");var t=this.getAllSingleMembers(),n=t.some(function(e){return e.select}),i=t.some(function(e){return e.hover});n||!i||this.getRootGroup().getSelectedItem()?this.boxElement.style.display="none":this.boxElement.style.display="block"}},{key:"removeBoxElement",value:function(){this.boxElement&&this.boxElement.parentElement&&this.boxElement.parentElement.removeChild(this.boxElement)}},{key:"getGroupId",value:function(){return this.groupId}},{key:"addMember",value:function(t,n){if(!(this===t||this.members.indexOf(t)>-1)){if(t instanceof f.e){var i=C.getGroup(t.groupId);i&&i.deleteMember(t),t.groupId=this.getGroupId()}t instanceof e&&(t.parent&&t.parent.deleteMember(t),t.parent=this),isNaN(n)?this.members.push(t):this.members.splice(n,0,t)}}},{key:"deleteMember",value:function(t){var n=this.members.indexOf(t);n<0||(t instanceof f.e?t.groupId=null:t instanceof e&&(t.parent=null),this.members.splice(n,1))}},{key:"setSelectedItem",value:function(e){this.selectedItem=e}},{key:"clearSelectedItem",value:function(){this.selectedItem=null}},{key:"getSelectedItem",value:function(){return this.selectedItem}},{key:"getParent",value:function(){return this.parent}},{key:"setParent",value:function(e){this.parent=e}},{key:"getRootGroup",value:function(){for(var e=this;e.parent;)e=e.parent;return e}},{key:"getMembers",value:function(){return this.members}},{key:"getAllSingleMembers",value:function(){var t=[];return this.getMembers().forEach(function(n){n instanceof f.e?t.push(n):n instanceof e&&(t=t.concat(n.getAllSingleMembers()))}),t}},{key:"has",value:function(t){if(this===t)return!0;var n=!0,i=!1,r=void 0;try{for(var a,o=this.getMembers()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(s instanceof e){if(s.has(t))return!0}else if(s===t)return!0}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return!1}},{key:"getCenterPos",value:function(){for(var e=this.getAllSingleMembers(),t=e[0].getLTRBCoordinate(!0),n=t.left,i=t.right,r=t.top,a=t.bottom,o=1;o<e.length;o++)n=(t=e[o].getLTRBCoordinate(!0)).left<n?t.left:n,i=t.right>i?t.right:i,r=t.top<r?t.top:r,a=t.bottom>a?t.bottom:a;return new E.c(n+(i-n)/2,r+(a-r)/2)}},{key:"getItemKey",value:function(){return this.groupId}}]),e}(),C=function(){function e(){u()(this,e)}return d()(e,null,[{key:"getItems",value:function(){var e=[];return T.a.dispatch(new y.c(function(t,n){t&&(e=t.pages[n.renderPageIdx].items)})),e}},{key:"setGroup",value:function(t,n){if(!t.groupId)return null;n=n||e.getItems();var i=this.getGroup(t.groupId,n);return i||(i=new I(t.groupId),n.push(i)),i.addMember(t),i}},{key:"delete",value:function(t,n){n=n||e.getItems();var i=e.getGroup(t,n);if(i){var a=i.getMembers().slice(),o=!0,s=!1,l=void 0;try{for(var c,u=a[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var h=c.value;i.deleteMember(h);var d=i.getParent();d&&(h instanceof f.e?h.groupId=d.getGroupId():h instanceof I&&h.setParent(d))}}catch(e){s=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(s)throw l}}var p,v=n.indexOf(i);if(v>-1)(p=n).splice.apply(p,[v,1].concat(r()(a)))}}},{key:"getGroup",value:function(t,n){n=n||e.getItems();var i=!0,r=!1,a=void 0;try{for(var o,s=n[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var l=o.value;if(l instanceof I){if(l.getGroupId()===t)return l;var c=e.getGroup(t,l.getMembers());if(c)return c}}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return null}},{key:"getRootGroup",value:function(t,n){n=n||e.getItems();var i=t?this.getGroup(t,n):null;return i?i.getRootGroup():null}},{key:"isInGroup",value:function(t){return null!==e.getRootGroup(t.groupId)}},{key:"isSameGroup",value:function(t,n){if(!t||t.length<2)return!1;n=n||e.getItems();var i=this.getRootGroup(t[0].groupId,n);if(!i)return!1;var r=!0,a=!1,o=void 0;try{for(var s,l=t[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var c=s.value,u=this.getRootGroup(c.groupId,n);if(!u||i.getGroupId()!==u.getGroupId())return!1}}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return!0}},{key:"getGroupItemsAddedArray",value:function(t){var n=t.slice();return t.forEach(function(t){var i=e.getRootGroup(t.groupId);if(i){var r=!0,a=!1,o=void 0;try{for(var s,l=i.getAllSingleMembers()[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var c=s.value;-1===n.indexOf(c)&&n.push(c)}}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}}}),n}},{key:"getSortedGroupItemsAddedArray",value:function(e){var t=this.getGroupItemsAddedArray(e),n=[];return T.a.dispatch(new y.c(function(e,i){e.pages[i.renderPageIdx].getAllSingleItems().forEach(function(e){t.indexOf(e)>-1&&n.push(e)})})),n}},{key:"convertSinglesToItems",value:function(t,n){n=n||e.getItems();var i=[];return t.forEach(function(t){var r=e.getRootGroup(t.groupId,n);r&&i.indexOf(r)<0?i.push(r):r||i.push(t)}),i}},{key:"convertItemsToSingles",value:function(e){var t=[];return e.forEach(function(e){e instanceof I?t=t.concat(e.getAllSingleMembers()):e instanceof f.e&&t.push(e)}),t}},{key:"checkValidation",value:function(e){this.checkMemberAlone(e)}},{key:"checkMemberAlone",value:function(e){var t=this;e.getAllSingleItems().forEach(function(e){var n=t.getGroup(e.groupId);if(n){var i=n.getAllSingleMembers();if(i.length<2){t.delete(n.getGroupId());var r=n.getParent();r&&i.forEach(function(e){return r.addMember(e)})}}})}},{key:"parseSingleItemsByGroups",value:function(t,n){var i=[],r=!0,a=!1,o=void 0;try{for(var s,l=t[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var c=s.value;if(c.groupId&&""!==c.groupId){var u=this.getGroup(c.groupId,n);u||(u=new I(c.groupId),n.push(u));var h=u.getMembers().slice();h.reverse();var d=h.find(function(e){return e instanceof f.e||e instanceof I&&e.getAllSingleMembers().length>0}),p=d?u.getMembers().indexOf(d)+1:0;u.addMember(c,p);var v=e.getRootGroup(c.groupId,n);i.indexOf(v)<0&&i.push(v)}else i.push(c)}}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return i}}]),e}()},,function(e,t,n){"use strict";n.d(t,"a",function(){return f});var i=n(35),r=n.n(i),a=n(36),o=n.n(a),s=n(54),l=n(42),c=n(45),u=n(62),h=n(117),d=n(192),p=n(86),v=n(155),f=function(){function e(){r()(this,e)}return o()(e,null,[{key:"setSelectedFlag",value:function(e){l.a.instance.activeItems.indexOf(e)<0&&l.a.instance.activeItems.push(e),e.select=!0}},{key:"resetSelectedFlag",value:function(e,t){l.a.instance.activeItems.indexOf(e)>=0&&l.a.instance.activeItems.splice(l.a.instance.activeItems.indexOf(e),1),e instanceof u.b&&e.isEditMode&&l.a.dispatch(new h.c(e)),e.select=!1,t&&l.a.dispatch(new c.c(function(e,t){e.pages.forEach(function(e){var n=t.pageController.getPageRenderer(e);n&&n.updateHoverLayer()})}))}},{key:"appendSelectedItems",value:function(e){var t=[],n=!0,i=!1,r=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var u=a.value,h=s.b.getRootGroup(u.groupId);if(h&&-1===t.indexOf(h.getGroupId())){var d=h.getSelectedItem();if(d)this.setSelectedFlag(d);else{var p=!0,v=!1,f=void 0;try{for(var g,m=h.getAllSingleMembers()[Symbol.iterator]();!(p=(g=m.next()).done);p=!0){var E=g.value;this.setSelectedFlag(E)}}catch(e){v=!0,f=e}finally{try{p||null==m.return||m.return()}finally{if(v)throw f}}}h.updateBoxStyle(),t.push(h.getGroupId())}else this.setSelectedFlag(u)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}(l.a.dispatch(new c.c(function(e,t,n){if(!l.a.isCropMode()){var i=!0,r=!1,a=void 0;try{for(var o,s=e.pages[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var c=o.value,u=c.getAllSingleItems();if(-1!==u.indexOf(t.activeItems[0])){t.renderPageIdx=c.pageIdx,t.activeItems=u.filter(function(e){return e.select});break}}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}}})),s.b.isSameGroup(l.a.instance.activeItems))&&s.b.getRootGroup(l.a.instance.activeItems[0].groupId).clearSelectedItem();l.a.dispatch(new c.c(function(t,n,i){var r=1===e.length&&e[0].isUnsupportedLicense();i.itemGuideAlertMobile&&i.itemGuideAlertMobile.showUnsupportedLicenseAlert(r)}))}},{key:"appendSelectedItem",value:function(e){var t=s.b.getRootGroup(e.groupId);t&&t.setSelectedItem(e),this.appendSelectedItems([e])}},{key:"selectItems",value:function(e){this.unselectAllItems(e),this.appendSelectedItems(e)}},{key:"selectItem",value:function(e){this.unselectAllItems([e]),this.appendSelectedItem(e)}},{key:"selectfilteredItems",value:function(e,t){var n=e.filter(function(e){return t(e)});this.selectItems(n)}},{key:"selectBackgroundItem",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t?d.a.instance.show():l.a.dispatch(new c.c(function(t,n,i){var r=t.pages[n.renderPageIdx].background.backgroundItem;r&&(e.selectItem(r),i.renderItemTools(t,n),i.leftBar.hideLibrary())},!t))}},{key:"unselectItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e instanceof u.b&&e.editModeParam.isEditMode&&l.a.dispatch(new h.c(e));var n=s.b.getRootGroup(e.groupId);if(n){for(var i=n.getAllSingleMembers(),r=0,a=i.length;r<a;r++)this.resetSelectedFlag(i[r],t&&r===a-1);n.setSelectedItem(null)}else this.resetSelectedFlag(e,t);l.a.dispatch(new c.c(function(t,n,i){i.rightSection&&i.rightSection.printoutFinalConfirm.render(e.tbpeId)})),l.a.dispatch(new p.g(e)),l.a.dispatch(new c.c(function(e,t,n){n.itemGuideAlertMobile&&(n.itemGuideAlertMobile.showUnsupportedLicenseAlert(!1),v.c.hidePusher())}))}},{key:"unselectAllItems",value:function(e){var t=l.a.instance.activeItems.slice();if(e){var n=!0,i=!1,r=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,c=t.indexOf(s);c>=0&&t.splice(c,1)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}}for(var u=0,h=t.length;u<h;u++)this.unselectItem(t[u],u===h-1);l.a.instance.activeItems=[]}},{key:"unselectBackgroundItem",value:function(){var e=this;l.a.dispatch(new c.c(function(t,n){var i=t.pages[n.renderPageIdx].background.backgroundItem;i&&i.select&&e.unselectItem(i,!0)}))}}]),e}()},,,function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return r});var i,r,a=n(0),o=n.n(a),s=n(1),l=n.n(s);!function(e){var t=new Map;function n(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.NONE;return t.get(n+e)}function i(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.NONE;t.set(i+e,n)}function a(){return(a=l()(o.a.mark(function e(t,a){var s,l,u=arguments;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s=u.length>2&&void 0!==u[2]?u[2]:r.NONE,null==n(t,s)){e.next=3;break}return e.abrupt("return",n(t,s));case 3:return e.next=5,c(a);case 5:return l=e.sent,i(t,l,s),e.abrupt("return",l);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function s(){return(s=l()(o.a.mark(function e(t,a){var s,l,c=arguments;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s=c.length>2&&void 0!==c[2]?c[2]:r.NONE,c.length>3&&void 0!==c[3]&&c[3]||null==n(t,s)){e.next=4;break}return e.abrupt("return",n(t,s));case 4:return e.next=6,h(a);case 6:return l=e.sent,i(t,l,s),e.abrupt("return",l);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function c(e){return u.apply(this,arguments)}function u(){return(u=l()(o.a.mark(function e(t){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){var i=new XMLHttpRequest;i.open("GET",t),i.onreadystatechange=function(){i.readyState===XMLHttpRequest.DONE?e(i.responseText):n("loadDataAsync fail: [".concat(t,"] "))},i.onerror=function(){return n("loadDataAsync fail: [".concat(t,"] "))},i.send()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function h(e){return d.apply(this,arguments)}function d(){return(d=l()(o.a.mark(function e(t){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){var i,r=new Image;r.crossOrigin="Anonymous",r.onload=function(){e(r)},r.onerror=function(){n("loadImageAsync fail: [".concat(t,"]"))};var a=((i=(t||"").replace(/^http:\/\//i,"https://")).startsWith("http")||i.startsWith("/"))&&!i.includes("?");r.src=i+(a?"?_":"")}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}e.clear=function(){t.clear()},e.getData=n,e.setData=i,e.deleteData=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.NONE;return t.delete(n+e)},e.hasData=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.NONE;return null!=t.get(n+e)},e.setUrlData=function(e,t){return a.apply(this,arguments)},e.setUrlImage=function(e,t){return s.apply(this,arguments)},e.loadDataAsync=c,e.loadImageAsync=h}(i||(i={})),function(e){e.NONE=""}(r||(r={}))},function(e,t,n){"use strict";(function(e){n.d(t,"c",function(){return N}),n.d(t,"b",function(){return x}),n.d(t,"d",function(){return M}),n.d(t,"a",function(){return D}),n.d(t,"f",function(){return U}),n.d(t,"h",function(){return G}),n.d(t,"g",function(){return F}),n.d(t,"e",function(){return H});var i=n(39),r=n.n(i),a=n(38),o=n.n(a),s=n(44),l=n.n(s),c=n(40),u=n.n(c),h=n(73),d=n.n(h),p=n(0),v=n.n(p),f=n(1),g=n.n(f),m=n(35),E=n.n(m),y=n(36),T=n.n(y),_=n(37),I=n.n(_),C=n(3),S=n(43),w=n(70),k=n(47),R=n(48),L=n(239),O=n(64),A=n(190),b=n(59),P=n(256),N=function(){function t(){E()(this,t)}var n,i,r,a,o,s,l,c,u,h,p,f,m,y,_,I,R;return T()(t,null,[{key:"updateData",value:(R=g()(v.a.mark(function e(t){var n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.isChangedCoreData(),e.t0=this,e.next=4,this.getSvgUpdateData(t);case 4:return e.t1=e.sent,e.next=7,e.t0.update.call(e.t0,e.t1);case 7:return e.abrupt("return",{svgData:t,updateCoreInfo:n});case 8:case"end":return e.stop()}},e,this)})),function(e){return R.apply(this,arguments)})},{key:"linkSticker",value:(I=g()(v.a.mark(function e(t,n,i){var r,a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=C.CRM.get(S.a.SVG_HOST)+"/api/svg/link",a=t.keywordList?t.keywordList.slice():[],t.keywordList=i,e.next=5,k.UnicornApiRequest.post(r,{data:this.getStickerLinkData(t,n),contentType:!1,processData:!1,traditional:!0}).then(function(e){t.keywordList=d()(new Set([].concat(d()(a),d()(i)))),t.stickerLinkList.unshift({stickerId:n,svgMetaIdx:t.idx})}).catch(function(e){throw alert("스티커 ID 가 중복이거나 로그아웃 되었습니다"),t.keywordList=a,Error(e)});case 5:case"end":return e.stop()}},e,this)})),function(e,t,n){return I.apply(this,arguments)})},{key:"unlinkSticker",value:(_=g()(v.a.mark(function e(t,n){var i,r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=C.CRM.get(S.a.SVG_HOST)+"/api/svg/unlink",r=t.stickerLinkList.findIndex(function(e){return e.svgMetaIdx===t.idx&&e.stickerId===n}),e.next=4,k.UnicornApiRequest.post(i,{data:t.stickerLinkList[r]});case 4:r>-1&&t.stickerLinkList.splice(r,1);case 5:case"end":return e.stop()}},e)})),function(e,t){return _.apply(this,arguments)})},{key:"update",value:(y=g()(v.a.mark(function e(t){var n,i,r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=C.CRM.get(S.a.SVG_HOST)+"/api/v1/svg/update",e.next=3,k.UnicornApiRequest.post(n,{data:t,contentType:!1,processData:!1});case 3:return i=e.sent,r=i.data,e.next=7,this.reloadSvgData(r,!0);case 7:return e.abrupt("return",i.data);case 8:case"end":return e.stop()}},e,this)})),function(e){return y.apply(this,arguments)})},{key:"reloadAdminSvgData",value:(m=g()(v.a.mark(function e(){var t,n,i,r,a,o;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=!0,n=!1,i=void 0,e.prev=3,r=this._cacheData[Symbol.iterator]();case 5:if(t=(a=r.next()).done){e.next=14;break}if(!(o=a.value)[1].svg){e.next=9;break}return e.abrupt("continue",11);case 9:return e.next=11,this.getSvgData(o[1].idx,!0,!0);case 11:t=!0,e.next=5;break;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(3),n=!0,i=e.t0;case 20:e.prev=20,e.prev=21,t||null==r.return||r.return();case 23:if(e.prev=23,!n){e.next=26;break}throw i;case 26:return e.finish(23);case 27:return e.finish(20);case 28:case"end":return e.stop()}},e,this,[[3,16,20,28],[21,,23,27]])})),function(){return m.apply(this,arguments)})},{key:"reloadSvgData",value:(f=g()(v.a.mark(function e(t,n){var i;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.parse(t,n);case 2:i=e.sent,this.setCache(i);case 4:case"end":return e.stop()}},e,this)})),function(e,t){return f.apply(this,arguments)})},{key:"setCache",value:function(e){this._cacheData.set(e.key,e)}},{key:"parse",value:(p=g()(v.a.mark(function e(t,n){var i,r,a,o,s,l,c,u,h,d,p,f,g,m,E,y,T,_,I,S,k;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=null,r=!1,e.next=4,$.get(t.svgUrl);case 4:(a=e.sent).getElementsByTagName?i=a.getElementsByTagName("svg").item(0):(o=new DOMParser,s=o.parseFromString(a,"image/svg+xml"),i=s.getElementsByTagName("svg").item(0)),i&&L.a.changeElement(i),(l=new x).isPrivate=r,l.idx=t.idx,l.width=t.width,l.height=t.height,l.minWidth=t.minWidth,l.minHeight=t.minHeight,l.type=F.valueOf(t.type),l.key=t.key,l.status=G.valueOf(t.status),l.svg=i,l.thumbnailUrl=t.thumbnailUrl,t.thumbnailUrl?l.thumb=t.thumbnailUrl:i&&(l.thumb="data:image/svg+xml;base64,"+C.StringUtil.b64EncodeUnicode(i.outerHTML)),l.categoryIdxList=t.categoryIdxList,l.name=t.name||"",l.designer=t.accountInfo,l.license=U.valueOf(t.license),l.keywordList=this.getKeywordList(t.keywordList),l.stickerLinkList=t.stickerLinkList,l.svgMemo=t.svgMemoDto?t.svgMemoDto.memo:"",l.updateDesigner=t.updateAccountInfo,l.createDate=new Date(t.createDate),l.updateDate=new Date(t.updateDate),c=0,u=i?i.childNodes:null,h=0;case 33:if(!(h<t.layerDtoList.length)){e.next=69;break}if(!(d=u?u[c]:null)){e.next=43;break}if(w.a.validateSvgElement(d)){e.next=40;break}return h--,c++,e.abrupt("continue",66);case 40:if(w.a.validateNewSvgElement(d)){e.next=43;break}return c++,e.abrupt("continue",66);case 43:if(p=new M,f=t.layerDtoList[h],p.idx=f.idx,p.layerId=f.layerId,p.width=f.width,p.height=f.height,p.top=f.positionTop,p.left=f.positionLeft,p.extendOffsetX=f.extendOffsetX,p.extendOffsetY=f.extendOffsetY,p.moveOffsetX=f.moveOffsetX,p.moveOffsetY=f.moveOffsetY,p.type=H.valueOf(f.type),d){for(g=i.cloneNode(!0),m=d.cloneNode(!0);g.firstChild;)g.removeChild(g.firstChild);g.appendChild(m),p.svg=g,p.layerSvg=d}if(e.t0=p.type===H.LAYER_PATTERN&&1!==t.layerDtoList.length&&(f.width!==l.width||f.height!==l.height),!e.t0){e.next=62;break}return e.next=61,this.isConvertableNoPattern(l,p);case 61:e.t0=e.sent;case 62:if(!e.t0){e.next=64;break}p.type=H.NO_PATTERN;case 64:l.addLayer(p),c++;case 66:h++,e.next=33;break;case 69:if(!t.colorDtoList){e.next=89;break}for(E=!0,y=!1,T=void 0,e.prev=73,_=t.colorDtoList[Symbol.iterator]();!(E=(I=_.next()).done);E=!0)S=I.value,(k=new D).idx=S.idx,k.color=S.color,k.editable=S.editable,l.addColor(k);e.next=81;break;case 77:e.prev=77,e.t1=e.catch(73),y=!0,T=e.t1;case 81:e.prev=81,e.prev=82,E||null==_.return||_.return();case 84:if(e.prev=84,!y){e.next=87;break}throw T;case 87:return e.finish(84);case 88:return e.finish(81);case 89:return e.abrupt("return",l);case 90:case"end":return e.stop()}},e,this,[[73,77,81,89],[82,,84,88]])})),function(e,t){return p.apply(this,arguments)})},{key:"isConvertableNoPattern",value:(h=g()(v.a.mark(function t(n,i){var r,a,o,s,l,c,u,h,d,p,f,g,m,E,y,T,_;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e.env.IMAGE_PROCESS){t.next=3;break}return t.abrupt("return",!1);case 3:if(r=Math.max(30/Math.min(i.width,i.height),1),(a=O.a.createCanvas()).width=2*i.width*r,a.height=2*i.height*r,o=a.getContext("2d"),0!==a.width&&0!==a.height){t.next=10;break}return t.abrupt("return",!1);case 10:return s=this.scaleToSvgString(i.svg.outerHTML,n.width*r,n.height*r,r,r),t.next=13,A.a.svgStringToImage(s);case 13:return l=t.sent,c=i.extendOffsetX>.001,u=i.extendOffsetY>.001,h=c?2:1,d=u?2:1,p=this.scaleToSvgString(i.svg.outerHTML,n.width*r*h,n.height*r*d,r*h,r*d),t.next=21,A.a.svgStringToImage(p);case 21:if(f=t.sent,o.save(),o.translate(-i.left*r,-i.top*r),o.drawImage(l,0,0),c&&o.drawImage(l,i.width*r,0),u&&o.drawImage(l,0,i.height*r),c&&u&&o.drawImage(l,i.width*r,i.height*r),o.restore(),(g=O.a.createCanvas()).width=2*i.width*r,g.height=2*i.height*r,(m=g.getContext("2d")).save(),m.translate(-i.left*r*h,-i.top*r*d),m.drawImage(f,0,0,f.width,f.height),m.restore(),E=o.getImageData(0,0,a.width,a.height),y=m.getImageData(0,0,g.width,g.height),E.width===y.width&&E.height===y.height){t.next=41;break}return t.abrupt("return",!1);case 41:T=0,_=0;case 43:if(!(_<E.data.length)){t.next=51;break}if(E.data[_]===y.data[_]&&E.data[_+1]===y.data[_+1]&&E.data[_+2]===y.data[_+2]&&E.data[_+3]===y.data[_+3]){t.next=48;break}if(!(++T>E.data.length/4*.0175)){t.next=48;break}return t.abrupt("return",!1);case 48:_+=4,t.next=43;break;case 51:return t.abrupt("return",!0);case 54:return t.prev=54,t.t0=t.catch(0),t.abrupt("return",!1);case 57:case"end":return t.stop()}},t,this,[[0,54]])})),function(e,t){return h.apply(this,arguments)})},{key:"scaleToSvgString",value:function(e,t,n,i,r){return'<svg width="'.concat(t,'px" height="').concat(n,'px"><g transform="scale(').concat(i,", ").concat(r,')">').concat(e,"</g></svg>")}},{key:"getKeywordList",value:function(e){var t=[];if(!e)return t;var n=!0,i=!1,r=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;t.push(s.keyword)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return t}},{key:"getSvgData",value:(u=g()(v.a.mark(function e(t,n){var i,r,a,o,s,l,c,u,h,d=arguments;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(d.length>2&&void 0!==d[2]&&d[2]){e.next=28;break}i=!0,r=!1,a=void 0,e.prev=5,o=this._cacheData.values()[Symbol.iterator]();case 7:if(i=(s=o.next()).done){e.next=14;break}if((l=s.value).idx!==t){e.next=11;break}return e.abrupt("return",l);case 11:i=!0,e.next=7;break;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(5),r=!0,a=e.t0;case 20:e.prev=20,e.prev=21,i||null==o.return||o.return();case 23:if(e.prev=23,!r){e.next=26;break}throw a;case 26:return e.finish(23);case 27:return e.finish(20);case 28:return c=C.CRM.get(S.a.SVG_HOST)+"/api/svg/".concat(t),e.prev=29,e.next=32,k.UnicornApiRequest.get(c);case 32:return u=e.sent,e.next=35,this.parse(u.data,n);case 35:return h=e.sent,this.setCache(h),e.abrupt("return",h);case 40:if(e.prev=40,e.t1=e.catch(29),404!==e.t1.status){e.next=44;break}return e.abrupt("return",null);case 44:throw new Error("SVG 정보 가져오는 중 에러 발생"+e.t1);case 45:case"end":return e.stop()}},e,this,[[5,16,20,28],[21,,23,27],[29,40]])})),function(e,t){return u.apply(this,arguments)})},{key:"getSvgDataByKey",value:(c=g()(v.a.mark(function e(t,n){var i,r,a,o,s,l,c,u;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._cacheData.has(t)){e.next=2;break}return e.abrupt("return",this._cacheData.get(t));case 2:return e.next=4,this.getSvgDataResponse({keyList:[t]},n);case 4:i=e.sent,r=i.svgDataList,a=!0,o=!1,s=void 0,e.prev=9,l=r[Symbol.iterator]();case 11:if(a=(c=l.next()).done){e.next=18;break}if((u=c.value).key!==t){e.next=15;break}return e.abrupt("return",u);case 15:a=!0,e.next=11;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(9),o=!0,s=e.t0;case 24:e.prev=24,e.prev=25,a||null==l.return||l.return();case 27:if(e.prev=27,!o){e.next=30;break}throw s;case 30:return e.finish(27);case 31:return e.finish(24);case 32:return e.abrupt("return",null);case 33:case"end":return e.stop()}},e,this,[[9,20,24,32],[25,,27,31]])})),function(e,t){return c.apply(this,arguments)})},{key:"getSvgStickerLink",value:(l=g()(v.a.mark(function e(t){var n,i;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=C.CRM.get(S.a.SVG_HOST)+"/api/svg/link/".concat(t),e.prev=1,e.next=4,k.UnicornApiRequest.get(n);case 4:return i=e.sent,e.abrupt("return",i.data);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",null);case 11:case"end":return e.stop()}},e,null,[[1,8]])})),function(e){return l.apply(this,arguments)})},{key:"getSvgDataResponse",value:(s=g()(v.a.mark(function e(n,i){var r,a,o,s,l,c,u,h,d,p,f,g,m,E,y,T,_,I,w,R,L,O,A,b,P,N,x,M,D,B,U,G,F,H,V,W;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Array.isArray(n)){e.next=73;break}for(a=(r=n).slice(),o=!0,s=!1,l=void 0,e.prev=6,c=a[Symbol.iterator]();!(o=(u=c.next()).done);o=!0)h=u.value,this._cacheData.has(h)&&r.splice(r.indexOf(h),1);e.next=14;break;case 10:e.prev=10,e.t0=e.catch(6),s=!0,l=e.t0;case 14:e.prev=14,e.prev=15,o||null==c.return||c.return();case 17:if(e.prev=17,!s){e.next=20;break}throw l;case 20:return e.finish(17);case 21:return e.finish(14);case 22:if(!(r.length>0)){e.next=50;break}return e.next=25,$.get(k.UnicornApiClient.getURL(C.CRM.get(S.a.SVG_HOST)+"/api/v1/svg"),$.param({keyList:r},!0));case 25:return d=e.sent,p=d.data,f=p.list,e.next=30,t.parseSvgs(f,i);case 30:for(g=e.sent,m=!0,E=!1,y=void 0,e.prev=34,T=g[Symbol.iterator]();!(m=(_=T.next()).done);m=!0)I=_.value,this.setCache(I);e.next=42;break;case 38:e.prev=38,e.t1=e.catch(34),E=!0,y=e.t1;case 42:e.prev=42,e.prev=43,m||null==T.return||T.return();case 45:if(e.prev=45,!E){e.next=48;break}throw y;case 48:return e.finish(45);case 49:return e.finish(42);case 50:for(w=[],R=!0,L=!1,O=void 0,e.prev=54,A=n[Symbol.iterator]();!(R=(b=A.next()).done);R=!0)P=b.value,w.push(this._cacheData.get(P));e.next=62;break;case 58:e.prev=58,e.t2=e.catch(54),L=!0,O=e.t2;case 62:e.prev=62,e.prev=63,R||null==A.return||A.return();case 65:if(e.prev=65,!L){e.next=68;break}throw O;case 68:return e.finish(65);case 69:return e.finish(62);case 70:return e.abrupt("return",{svgDataList:w});case 73:return e.next=75,$.get(k.UnicornApiClient.getURL(C.CRM.get(S.a.SVG_HOST)+"/api/v1/svg"),$.param(n,!0));case 75:return N=e.sent,x=N.data,M=x.pagination,D=x.list,e.next=81,t.parseSvgs(D,i);case 81:for(B=e.sent,U=!0,G=!1,F=void 0,e.prev=85,H=B[Symbol.iterator]();!(U=(V=H.next()).done);U=!0)W=V.value,this.setCache(W);e.next=93;break;case 89:e.prev=89,e.t3=e.catch(85),G=!0,F=e.t3;case 93:e.prev=93,e.prev=94,U||null==H.return||H.return();case 96:if(e.prev=96,!G){e.next=99;break}throw F;case 99:return e.finish(96);case 100:return e.finish(93);case 101:return e.abrupt("return",{totalPage:M.totalPage,totalRow:M.totalRow,svgDataList:B});case 102:case"end":return e.stop()}},e,this,[[6,10,14,22],[15,,17,21],[34,38,42,50],[43,,45,49],[54,58,62,70],[63,,65,69],[85,89,93,101],[94,,96,100]])})),function(e,t){return s.apply(this,arguments)})},{key:"parseSvgs",value:(o=g()(v.a.mark(function e(n,i){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,r){var a=[],o=!0,s=!1,l=void 0;try{for(var c,u=n[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var h=c.value;a.push(t.parseSvg(h,i))}}catch(e){s=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(s)throw l}}Promise.all(a).then(function(t){e(t.filter(function(e){return null!==e}))}).catch(function(e){r(e)})}));case 1:case"end":return e.stop()}},e)})),function(e,t){return o.apply(this,arguments)})},{key:"parseSvg",value:(a=g()(v.a.mark(function e(n,i){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._cacheData.has(n.key)){e.next=2;break}return e.abrupt("return",this._cacheData.get(n.key));case 2:return e.prev=2,e.next=5,t.parse(n,i);case 5:return e.abrupt("return",e.sent);case 8:e.prev=8,e.t0=e.catch(2),console.error(e.t0),console.error("svg 데이터 파싱 실패 : ".concat(n.idx));case 12:return e.abrupt("return",null);case 13:case"end":return e.stop()}},e,this,[[2,8]])})),function(e,t){return a.apply(this,arguments)})},{key:"getImage",value:(r=g()(v.a.mark(function e(t){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){var i=new Image;i.onload=function(){return e(i)},i.onerror=function(e){return n(e)},i.src=t}));case 1:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)})},{key:"getImageData",value:(i=g()(v.a.mark(function e(t){var n,i;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.b.loadImageAsync(t);case 2:return n=e.sent,(i=O.a.createCanvas()).width=n.width,i.height=n.height,i.getContext("2d").drawImage(n,0,0),e.abrupt("return",i.toDataURL());case 9:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)})},{key:"getSvgUpdateData",value:(n=g()(v.a.mark(function e(t){var n,i,r,a,o,s;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for((n=new FormData).append("idx",String(t.idx)),n.append("type",t.type.value),n.append("status",t.status.value),n.append("width",String(t.width)),n.append("height",String(t.height)),n.append("minWidth",String(t.minWidth)),n.append("minHeight",String(t.minHeight)),n.append("name",t.name),n.append("license",t.license.value),n.append("accountId",String(t.designer.accountId)),this.setKeywordParam(n,t.keywordList),t.svgMemo&&""!==t.svgMemo.trim()&&n.append("svgMemoDto.memo",t.svgMemo.trim()),i=0;i<t.layerList.length;i++)r=t.layerList[i],n.append("layerDtoList[".concat(i,"].layerId"),r.layerId),n.append("layerDtoList[".concat(i,"].idx"),String(r.idx)),n.append("layerDtoList[".concat(i,"].type"),r.type.value),n.append("layerDtoList[".concat(i,"].extendOffsetX"),String(r.extendOffsetX)),n.append("layerDtoList[".concat(i,"].extendOffsetY"),String(r.extendOffsetY)),n.append("layerDtoList[".concat(i,"].moveOffsetX"),String(r.moveOffsetX)),n.append("layerDtoList[".concat(i,"].moveOffsetY"),String(r.moveOffsetY)),n.append("layerDtoList[".concat(i,"].width"),String(r.width)),n.append("layerDtoList[".concat(i,"].height"),String(r.height)),n.append("layerDtoList[".concat(i,"].positionLeft"),String(r.left)),n.append("layerDtoList[".concat(i,"].positionTop"),String(r.top));for(a=0;a<t.colorList.length;a++)o=t.colorList[a],n.append("colorDtoList[".concat(a,"].idx"),String(o.idx)),n.append("colorDtoList[".concat(a,"].color"),o.color),n.append("colorDtoList[".concat(a,"].editable"),String(o.editable));if(!t.thumbnailUrl){e.next=23;break}return e.t0=n,e.next=19,this.getImageData(t.thumbnailUrl);case 19:e.t1=e.sent,e.t0.append.call(e.t0,"thumbnailEncodedB64",e.t1),e.next=31;break;case 23:if(!t.svg){e.next=31;break}return e.t2=n,e.next=27,P.a.makeThumbnail(t);case 27:e.t3=e.sent,e.t2.append.call(e.t2,"thumbnailEncodedB64",e.t3),e.next=31;break;case 31:if(!this.isSecuritableSvg(t)){e.next=48;break}if(!b.b.hasData("".concat(t.key,"_screen"))){e.next=38;break}return e.next=35,this.getImageData(b.b.getData("".concat(t.key,"_screen")).src);case 35:s=e.sent,e.next=45;break;case 38:if(!t.svg){e.next=44;break}return e.next=41,P.a.makeSecurityImageData(t);case 41:s=e.sent,e.next=45;break;case 44:s=null;case 45:s&&"data:,"!==s&&n.append("replacementFileEncodedB64",s),e.next=48;break;case 48:return e.abrupt("return",n);case 49:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"getStickerLinkData",value:function(e,t){var n=new FormData;return n.append("svgMetaIdx",String(e.idx)),n.append("stickerId",t),this.setKeywordParam(n,e.keywordList),n}},{key:"setKeywordParam",value:function(e,t){if(t){var n=0,i=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var l=o.value;e.append("keywordList[".concat(n,"].keyword"),l),n++}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}}}},{key:"isSimilarTo",value:function(e,t,n){return Math.abs(e-t)<=n}},{key:"isDefaultShapeSvg",value:function(e){if(!e.svg)return!1;var t=e.svg.getElementsByTagName("rect").length+e.svg.getElementsByTagName("circle").length+e.svg.getElementsByTagName("ellipse").length+e.svg.getElementsByTagName("polygon").length+e.svg.getElementsByTagName("path").length,n=Math.pow(10,-2);return e.colorList.length<=1&&1===e.layerList.length&&"NO_PATTERN"===e.layerList[0].type.value&&"FIGURE"===e.type.value&&(this.isSimilarTo(e.layerList[0].extendOffsetX,0,n)||this.isSimilarTo(e.layerList[0].extendOffsetX,1,n))&&(this.isSimilarTo(e.layerList[0].extendOffsetY,0,n)||this.isSimilarTo(e.layerList[0].extendOffsetY,1,n))&&this.isSimilarTo(e.layerList[0].moveOffsetX,0,n)&&this.isSimilarTo(e.layerList[0].moveOffsetY,0,n)&&1===t}},{key:"getFillUrlIds",value:function(e){var t=[];if(e.hasAttribute("fill")){var n=e.getAttribute("fill");if(n.includes("url(#")){var i=n.replace("url(#","").replace(")","").trim();t.push(i)}}var r=!0,a=!1,o=void 0;try{for(var s,l=e.childNodes[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var c=s.value;c instanceof SVGElement&&t.push.apply(t,d()(this.getFillUrlIds(c)))}}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return t}},{key:"containsGradient",value:function(e){var t=e.svg,n=[];return n.push.apply(n,d()(t.getElementsByTagName("linearGradient"))),n.push.apply(n,d()(t.getElementsByTagName("radialGradient"))),0!==n.length&&this.getFillUrlIds(t).some(function(e){return n.some(function(t){return t.id.trim()===e})})}},{key:"isOpacityLowerThanOne",value:function(e){if(e.hasAttribute("opacity")){var t=e.getAttribute("opacity");if(t&&Number(t)<1)return!0}if(e.hasAttribute("style")){var n=e.getAttribute("style").split(";"),i=!0,r=!1,a=void 0;try{for(var o,s=n[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var l=o.value.split(":"),c=l[0],u=l[1];if("opacity"===c.toLowerCase()&&Number(u)<1)return!0}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}}var h=!0,d=!1,p=void 0;try{for(var v,f=e.childNodes[Symbol.iterator]();!(h=(v=f.next()).done);h=!0){var g=v.value;if(g instanceof SVGElement)if(this.isOpacityLowerThanOne(g))return!0}}catch(e){d=!0,p=e}finally{try{h||null==f.return||f.return()}finally{if(d)throw p}}return!1}},{key:"containsOpacity",value:function(e){var t=e.svg;return this.isOpacityLowerThanOne(t)}},{key:"containsExtandLayer",value:function(e){return e.layerList.some(function(t){return t.type===H.NO_PATTERN&&(t.extendOffsetX-t.width/e.width>.01||t.extendOffsetY-t.height/e.height>.01)})}},{key:"containsPatternLayer",value:function(e){return e.layerList.some(function(t){return t.type===H.SVG_PATTERN||t.type===H.LAYER_PATTERN&&(t.extendOffsetX-t.width/e.width>.01||t.extendOffsetY-t.height/e.height>.01)})}},{key:"isSecuritableSvg",value:function(e){return!1}}]),t}();I()(N,"_cacheData",new Map);var x=function(){function e(){E()(this,e),I()(this,"_layerList",[]),I()(this,"_categoryIdxList",[]),I()(this,"_colorList",[]),I()(this,"changeCoreData",!1)}return T()(e,[{key:"addLayer",value:function(e){this._layerList.push(e)}},{key:"getLayer",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,a=this._layerList[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;if(e===o.layerId)return o}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return null}},{key:"addCategory",value:function(e){this._categoryIdxList.some(function(t){return t===e})||this._categoryIdxList.push(e)}},{key:"removeCategory",value:function(e){this._categoryIdxList=this._categoryIdxList.filter(function(t){return t!==e})}},{key:"addColor",value:function(e){this._colorList.push(e)}},{key:"getColorEditable",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,a=this._colorList[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;if(e.toLowerCase()===o.color.toLowerCase())return o.editable}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return null}},{key:"isChangedCoreData",value:function(){var e=this.changeCoreData;this.changeCoreData=!1;var t=!1,n=!0,i=!1,r=void 0;try{for(var a,o=this.layerList[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;t=t||s.isChangedCoreData()}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return e||t}},{key:"idx",get:function(){return this._idx},set:function(e){this._idx=e}},{key:"key",get:function(){return this._key},set:function(e){this._key=e}},{key:"width",get:function(){return this._width},set:function(e){this._width=e}},{key:"height",get:function(){return this._height},set:function(e){this._height=e}},{key:"minWidth",get:function(){return this._minWidth},set:function(e){e!==this._minWidth&&(this.changeCoreData=!0),this._minWidth=e}},{key:"minHeight",get:function(){return this._minHeight},set:function(e){e!==this._minHeight&&(this.changeCoreData=!0),this._minHeight=e}},{key:"type",get:function(){return this._type},set:function(e){this._type=e}},{key:"layerList",get:function(){return this._layerList},set:function(e){this._layerList=e.slice()}},{key:"myCollectionIdx",get:function(){return this._myCollectionIdx},set:function(e){this._myCollectionIdx=e}},{key:"svg",get:function(){return this._svg?this._svg.cloneNode(!0):null},set:function(e){this._svg=e}},{key:"thumb",get:function(){return this._thumb},set:function(e){this._thumb=e}},{key:"status",get:function(){return this._status},set:function(e){this._status=e}},{key:"categoryIdxList",get:function(){return this._categoryIdxList},set:function(e){this._categoryIdxList=e}},{key:"colorList",get:function(){return this._colorList},set:function(e){this._colorList=e}},{key:"name",get:function(){return this._name},set:function(e){this._name=e}},{key:"designer",get:function(){return this._designer},set:function(e){this._designer=e}},{key:"license",get:function(){return this._license},set:function(e){this._license=e}},{key:"keywordList",get:function(){return this._keywordList},set:function(e){this._keywordList=e}},{key:"stickerLinkList",get:function(){return this._stickerLinkList},set:function(e){this._stickerLinkList=e}},{key:"svgMemo",get:function(){return this._svgMemo},set:function(e){this._svgMemo=e}},{key:"updateDesigner",get:function(){return this._updateDesigner},set:function(e){this._updateDesigner=e}},{key:"updateDate",get:function(){return this._updateDate},set:function(e){this._updateDate=e}},{key:"createDate",get:function(){return this._createDate},set:function(e){this._createDate=e}},{key:"svgUrl",get:function(){return this._svgUrl},set:function(e){this._svgUrl=e}},{key:"thumbnailUrl",get:function(){return this._thumbnailUrl},set:function(e){this._thumbnailUrl=e}},{key:"isPrivate",get:function(){return this._isPrivate},set:function(e){this._isPrivate=e}}]),e}(),M=function(){function e(){E()(this,e),I()(this,"changeCoreData",!1)}return T()(e,[{key:"isChangedCoreData",value:function(){var e=this.changeCoreData;return this.changeCoreData=!1,e}},{key:"idx",get:function(){return this._idx},set:function(e){this._idx=e}},{key:"layerId",get:function(){return this._layerId},set:function(e){this._layerId=e}},{key:"width",get:function(){return this._width},set:function(e){this._width=e}},{key:"height",get:function(){return this._height},set:function(e){this._height=e}},{key:"left",get:function(){return this._left},set:function(e){this._left=e}},{key:"top",get:function(){return this._top},set:function(e){this._top=e}},{key:"extendOffsetX",get:function(){return this._extendOffsetX},set:function(e){e!==this._extendOffsetX&&(this.changeCoreData=!0),this._extendOffsetX=e}},{key:"extendOffsetY",get:function(){return this._extendOffsetY},set:function(e){e!==this._extendOffsetY&&(this.changeCoreData=!0),this._extendOffsetY=e}},{key:"moveOffsetX",get:function(){return this._moveOffsetX},set:function(e){e!==this._moveOffsetX&&(this.changeCoreData=!0),this._moveOffsetX=e}},{key:"moveOffsetY",get:function(){return this._moveOffsetY},set:function(e){e!==this._moveOffsetY&&(this.changeCoreData=!0),this._moveOffsetY=e}},{key:"type",get:function(){return this._type},set:function(e){e!==this._type&&(this.changeCoreData=!0),this._type=e}},{key:"svg",get:function(){return this._svg?this._svg.cloneNode(!0):null},set:function(e){this._svg=e}},{key:"layerSvg",get:function(){return this._layerSvg},set:function(e){this._layerSvg=e}}]),e}(),D=function(){function e(){E()(this,e)}return T()(e,[{key:"idx",get:function(){return this._idx},set:function(e){this._idx=e}},{key:"color",get:function(){return this._color},set:function(e){this._color=e}},{key:"editable",get:function(){return this._editable},set:function(e){this._editable=e}}]),e}(),B=function(){function e(t,n){E()(this,e),this._text=t,this._value=n}return T()(e,[{key:"text",get:function(){return this._text}},{key:"value",get:function(){return this._value}}]),e}(),U=function(e){function t(e,n,i){var a;return E()(this,t),(a=r()(this,o()(t).call(this,e,n)))._code=i,t.ALL_VALUE.push(l()(a)),a}return u()(t,e),T()(t,[{key:"code",get:function(){return this._code}}],[{key:"values",value:function(){return this.ALL_VALUE}},{key:"valueOf",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,a=this.ALL_VALUE[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;if(o.value===e||o.code===e)return o}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return null}}]),t}(B);I()(U,"ALL_VALUE",[]),I()(U,"UNICORN",new U("유니콘","UNICORN",400)),I()(U,"SMILECAT",new U("스마일캣","SMILECAT",0)),I()(U,"GETTY",new U("게티","GETTY",200)),I()(U,"UTO",new U("유토","UTO",300)),I()(U,"PIXABAY",new U("픽사베이","PIXABAY",500));var G=function(e){function t(e,n){var i;return E()(this,t),i=r()(this,o()(t).call(this,e,n)),t.ALL_VALUE.push(l()(i)),i}return u()(t,e),T()(t,null,[{key:"values",value:function(){return this.ALL_VALUE}},{key:"valueOf",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,a=this.ALL_VALUE[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;if(o.value===e)return o}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return null}}]),t}(B);I()(G,"ALL_VALUE",[]),I()(G,"ACTIVE",new G("공개 (활성)","ACTIVE")),I()(G,"INACTIVE",new G("비공개 (활성)","INACTIVE")),I()(G,"DISABLED",new G("비활성","DISABLED"));var F=function(e){function t(e,n,i){var a;return E()(this,t),(a=r()(this,o()(t).call(this,e,n))).resourceType=i,t.ALL_VALUE.push(l()(a)),a}return u()(t,e),T()(t,[{key:"getResourceType",value:function(){return this.resourceType}}],[{key:"values",value:function(){return this.ALL_VALUE}},{key:"valueOf",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,a=this.ALL_VALUE[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;if(o.value===e)return o}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return null}}]),t}(B);I()(F,"ALL_VALUE",[]),I()(F,"GRAPHIC",new F("일반 그래픽","GRAPHIC",R.a.GRAPHIC)),I()(F,"LINE",new F("선","LINE",R.a.LINE)),I()(F,"FIGURE",new F("도형","FIGURE",R.a.FIGURE)),I()(F,"ILLUST",new F("일러스트","ILLUST",R.a.ILLUST)),I()(F,"BACKGROUND_PATTERN",new F("단색/패턴형 배경","BACKGROUND_PATTERN",R.a.BACKGROUND_PATTERN)),I()(F,"BACKGROUND_IMAGE",new F("이미지형 배경","BACKGROUND_IMAGE",R.a.BACKGROUND_IMAGE));var H=function(e){function t(e,n){var i;return E()(this,t),i=r()(this,o()(t).call(this,e,n)),t.ALL_VALUE.push(l()(i)),i}return u()(t,e),T()(t,null,[{key:"values",value:function(){return this.ALL_VALUE}},{key:"valueOf",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,a=this.ALL_VALUE[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;if(o.value===e)return o}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return null}}]),t}(B);I()(H,"ALL_VALUE",[]),I()(H,"NO_PATTERN",new H("기본","NO_PATTERN")),I()(H,"LAYER_PATTERN",new H("부분 패턴/확장","LAYER_PATTERN")),I()(H,"SVG_PATTERN",new H("전체 패턴/확장","SVG_PATTERN"))}).call(this,n(115))},function(e,t,n){"use strict";var i=n(0),r=n.n(i),a=n(1),o=n.n(a),s=n(35),l=n.n(s),c=n(36),u=n.n(c),h=n(37),d=n.n(h),p=n(52),v=n(42),f=n(45),g=n(78),m=n(3),E=n(43),y=n(262),T=n(294),_=n(263),I=n(111),C=n(261),S=n(50),w=n(60),k=n(106),R=n(128),L=n(64),O=n(88),A=n(101),b=n(172),P=n(137),N=n(47),x=n(176),M=n(265),D=n(12),B=n(141),U=n(203),G=n(266),F=n(48),H=n(71),V=n(142),W=n(204),z=n(119),X=n(297),Y=n(267),K=n(155),Z=n(95),j=n(425),q=n(330),Q=function(){function e(){l()(this,e)}return u()(e,null,[{key:"copyUnicornDesignDataFromUnicornDesignBean",value:function(e,t){e.idx=t.idx,e.title=t.title,e.status=t.status,e.accountId=t.accountId,e.accountName=t.accountName,e.priority=t.priority,e.revisionIdx=t.revisionIdx,e.createDate=t.createDate,e.updateDate=t.updateDate,e.categoryIdx=t.categoryIdx,e.thumbKeyList=t.thumbKeyList.slice(),e.pageList=t.pageList,e.templateType=t.templateType,e.sizeOption=t.sizeOption}}]),e}(),J=function(){function e(){l()(this,e),d()(this,"lastSavedDesignDatas",[]),d()(this,"lastSavedDesignFileDatas",[])}return u()(e,[{key:"setPageList",value:function(e){this.lastSavedDesignFileDatas=[];for(var t=e.length,n=0;n<t;n++){var i=e[n].sheetKey,r=e[n].thumbKey;this.lastSavedDesignFileDatas.push({xmlKey:i,thumbKey:r})}}},{key:"setPageParams",value:function(t){for(var n=0;n<t.length;n++){var i=t[n],r=i.xml,a=i.thumb;e.FILE_KEY_FORMAT.test(r)||e.FILE_KEY_FORMAT.test(a)||(this.lastSavedDesignDatas[n]={xml:r,thumb:a})}}},{key:"optimizePageParams",value:function(e){for(var t=0;t<e.length;t++){var n=e[t],i=this.lastSavedDesignDatas[t],r=this.lastSavedDesignFileDatas[t];i&&r&&(i.xml!==n.xml||i.thumb!==n.thumb||(n.xml=r.xmlKey,n.thumb=r.thumbKey))}}}],[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}}]),e}();d()(J,"FILE_KEY_FORMAT",/^\S{8}-\S{4}-\S{4}-\S{4}-\S{12}$/),n.d(t,"a",function(){return te}),n.d(t,"b",function(){return ne}),n.d(t,"c",function(){return ee});var ee,te=function(){function e(t){l()(this,e),d()(this,"idx",0),d()(this,"title",e.getDefaultTitle()),d()(this,"accountId",0),d()(this,"latestDesignHistoryIdx",0),d()(this,"sharedPrivate",!1),d()(this,"sharedPublic",!1),t&&(this.idx=t.idx||0,this.title=t.title,this.accountId=t.accountId,this.latestDesignHistoryIdx=t.latestDesignHistoryIdx,this.sharedPrivate=t.sharedPrivate,this.sharedPublic=t.sharedPublic)}return u()(e,[{key:"getIdx",value:function(){return this.idx}},{key:"getTitle",value:function(){return this.title}},{key:"setTitle",value:function(e){this.title=e}},{key:"getLatestDesignHistoryIdx",value:function(){return this.latestDesignHistoryIdx}},{key:"getSharedPrivate",value:function(){return this.sharedPrivate}},{key:"setSharedPrivate",value:function(e){this.sharedPrivate=e}},{key:"getSharedPublic",value:function(){return this.sharedPublic}},{key:"setSharedPublic",value:function(e){this.sharedPublic=e}},{key:"isLoaded",value:function(){return this.idx>0}}],[{key:"getDefaultTitle",value:function(){return"제목을 입력해주세요."}}]),e}(),ne=function(){function e(){l()(this,e),d()(this,"designInfo",new te),d()(this,"designEditTime",0),d()(this,"shouldSaveToBizLibrary",!1),d()(this,"saveLoadOption",{copyWithCurrentTask:!0})}var t,n,i,a,s,c,h,ne,ie,re,ae,oe,se,le,ce,ue,he,de,pe;return u()(e,null,[{key:"setDesignInfo",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=["process","r"],r=location.search.substr(1).split("&").some(function(e){return i.includes(e.split("=")[0])}),a=this.instance.designInfo.getIdx()!==t.getIdx()&&!v.a.instance.designProject.isLoaded();if(!1===n&&(a||r)){var o=e.getStartDesignUrl(t.getIdx(),p.a.UNICORN),s=0===location.search.length?"":location.search.substr(1).split("&").map(function(e){return e.split("=")}).filter(function(e){return!i.includes(e[0])}).map(function(e){return e.join("=")}).join("&"),l=o+(s.length>0?"?"+s:"");window.history.replaceState({},null,l)}document.title="".concat(m.StringUtil.nvl(t.getTitle(),"제목을 입력해주세요.")," - 미리캔버스"),this.instance.designInfo=t}},{key:"setExtraOption",value:function(e){this.instance.saveLoadOption=e}},{key:"isTemplate",value:function(e){return e.designRepoType!==p.a.UNICORN||e.isTemplate()}},{key:"setUserDesign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.setDesignInfo(new te({idx:e.idx,title:m.StringUtil.nvl(e.title),accountId:e.accountId,latestDesignHistoryIdx:e.latestDesignHistoryIdx,sharedPrivate:e.sharedPrivate,sharedPublic:e.sharedPublic}),t),v.a.instance.option&&!v.a.instance.launcherOption.isDesignRelatedBizhows()&&v.a.instance.option.initByDesignBean(e)}},{key:"getDesignInfo",value:function(){return this.instance.designInfo}},{key:"initDesignInfo",value:function(){this.instance.designInfo=new te}},{key:"isSaved",value:function(){if(v.a.instance.actionQ.length){var e=v.a.instance.actionQ[v.a.instance.actionQ.length-1];return e&&e[e.length-1].isLastSavedAction}return v.a.instance.isBlankSave}},{key:"isSaving",value:function(){return!0===this.instance.isSaving}},{key:"save",value:(pe=o()(r.a.mark(function t(n){var i=this;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isSaved()||n.isCreateToCart){t.next=2;break}return t.abrupt("return");case 2:if(!e.isSaving()){t.next=4;break}return t.abrupt("return");case 4:return this.instance.autoSaveAction&&this.instance.autoSaveAction.setExecCallBack(!1),t.prev=5,t.abrupt("return",new Promise(function(){var t=o()(r.a.mark(function t(a){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:Y.a.check(K.b.SAVE,o()(r.a.mark(function t(){var s,l,c,u,h,d,p;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.getDesignInfo().getIdx(),t.next=3,i.checkDesignEditable(s);case 3:if(l=t.sent,!n.isCreateToCart){t.next=9;break}return t.next=7,i.create(n);case 7:t.next=29;break;case 9:if(0===s||!l){t.next=27;break}return c=e.getDesignInfo().getLatestDesignHistoryIdx(),t.next=13,i.checkDesignUpdatable(s,c);case 13:if(!(u=t.sent).updatable){t.next=19;break}return t.next=17,i.update(n);case 17:t.next=25;break;case 19:v.a.isCropMode()&&v.a.dispatch(new z.d),h="".concat(u.currentEditor,"님이 <span>").concat(G.a.formattedDate(u.createdDate),"\n                                          </span>에 마지막으로 저장했습니다.")+" 동시 편집할 경우 작업 내역이 저장되지 않을 수 있습니다.",d=null,(p=i.instance.saveLoadOption)&&p.copyWithCurrentTask&&(d=i.renderCopyWithCurrentTask(o()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:v.a.dispatch(new f.c(function(){var e=o()(r.a.mark(function e(t){var a,o,s,l,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.categoryIdx||0,o=n.isAutoSaved||!1,s=i.getCallBackParam(),e.next=5,i.makeSaveParam({meta:t,categoryIdx:a,titleSuffix:m.CRM.get(E.a.HEADER_COPY_DESIGN_NAME_SUFFIX),autoSaved:o});case 5:return l=e.sent,e.next=8,g.a.create({clientParam:s,saveParam:l});case 8:c=e.sent,window.open("/design/".concat(btoa(String(c.idx)).replace(/=/g,"")));case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())),x.a.close();case 2:case"end":return e.stop()}},e)})))),x.a.open({title:"디자인을 저장할 수 없습니다.",subTitle:"",subTitleHTML:h,additionalWrap:d,txtConfirmBtn:"최신 버전 불러오기",confirmAction:function(){var t=o()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.load(s);case 3:t.next=9;break;case 5:return t.prev=5,t.t0=t.catch(0),M.a.open("디자인을 여는 도중 문제가 발생하였습니다","확인",void 0,void 0),t.abrupt("return");case 9:case"end":return t.stop()}},t,null,[[0,5]])}));return function(){return t.apply(this,arguments)}}()});case 25:t.next=29;break;case 27:return t.next=29,i.create(n);case 29:a();case 30:case"end":return t.stop()}},t)})));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 9:return t.prev=9,t.t0=t.catch(5),console.error(t.t0),t.next=14,Object(X.a)(!1);case 14:throw this.setSaveStatus(ee.SAVE_REQUIRE),new Error("디자인 저장 중 실패!");case 16:case"end":return t.stop()}},t,this,[[5,9]])})),function(e){return pe.apply(this,arguments)})},{key:"createToCart",value:(de=o()(r.a.mark(function t(n,i){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=o()(r.a.mark(function t(a){var s,l;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.getDesignInfo().getIdx(),t.next=3,g.a.createToBizhowsCart(s,n);case 3:l=t.sent,i&&i(),v.a.dispatch(new f.c(function(){var e=o()(r.a.mark(function e(t,n,i){var a,o,s,c,u;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=l.original,o=Object.assign({},l.copied),Q.copyUnicornDesignDataFromUnicornDesignBean(o,a),s=300,c=0;case 5:if(!(c<t.pages.length)){e.next=14;break}return e.next=8,q.a.renderThumbnailByMaximumSize(t.pages[c],s);case 8:u=e.sent,o.pageList[c].thumbKey=u,l.copied.pageList[c].thumbKey=u;case 11:c++,e.next=5;break;case 14:i.leftBar.addDesignData(o),i.leftBar.addDesignData(l.copied);case 16:case"end":return e.stop()}},e)}));return function(t,n,i){return e.apply(this,arguments)}}())),a(l.original);case 7:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)})),function(e,t){return de.apply(this,arguments)})},{key:"updateToCart",value:(he=o()(r.a.mark(function t(n,i){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=o()(r.a.mark(function t(a){var o,s;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.getDesignInfo().getIdx(),t.next=3,g.a.updateToBizhowsCart(o,n);case 3:s=t.sent,i&&i(),a(s);case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)})),function(e,t){return he.apply(this,arguments)})},{key:"renderCopyWithCurrentTask",value:function(e){var t=document.createElement("div");t.className="additional_wrap_copy",Object(D.setToolsIcon)(t,D.ToolsIcon.COPY);var n=document.createElement("span");return n.innerText="현재 작업으로 사본 만들기",t.appendChild(n),n.addEventListener("click",function(){e()}),t}},{key:"checkDesignEditable",value:(ue=o()(r.a.mark(function e(t){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t){e.next=2;break}return e.abrupt("return",!1);case 2:return n=m.CRM.get(E.a.DESIGN_CHECK_ACCESSIBILITY).replace("{designIdx}",String(t)),e.prev=3,e.next=6,N.UnicornApiRequest.get(n);case 6:return e.abrupt("return",e.sent.data);case 9:return e.prev=9,e.t0=e.catch(3),e.abrupt("return",!1);case 12:case"end":return e.stop()}},e,null,[[3,9]])})),function(e){return ue.apply(this,arguments)})},{key:"checkDesignUpdatable",value:(ce=o()(r.a.mark(function e(t,n){var i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=m.CRM.get(E.a.DESIGN_CHECK_UPDATABLE).replace("{designIdx}",String(t)).replace("{historyIdx}",String(n)),e.prev=1,e.next=4,N.UnicornApiRequest.get(i);case 4:return e.abrupt("return",e.sent.data);case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",{updatable:!0,currentEditor:"",createdDate:(new Date).getTime()});case 10:case"end":return e.stop()}},e,null,[[1,7]])})),function(e,t){return ce.apply(this,arguments)})},{key:"copyTemplate",value:(le=o()(r.a.mark(function e(t,n){var i,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=I.a.make(t),e.next=3,i.load();case 3:return a=e.sent,e.next=6,this.makePageParamList(a);case 6:return n.pageParamList=e.sent,e.abrupt("return",R.a.create(n));case 8:case"end":return e.stop()}},e,this)})),function(e,t){return le.apply(this,arguments)})},{key:"create",value:(se=o()(r.a.mark(function e(t){var n=this;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,i){var a=t.categoryIdx||0,s=t.title,l=t.isAutoSaved||!1;v.a.dispatch(new f.c(function(){var c=o()(r.a.mark(function o(c,u,h){var d,p,f,E,y,T,_,I;return r.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,d=m.StringUtil.random(15),p=u.actionQ.length?u.actionQ[u.actionQ.length-1]:null,f=p?p[p.length-1]:null,n.startSave(d),E=n.getCallBackParam(),r.next=8,n.makeSaveParam({meta:c,categoryIdx:a,title:s,autoSaved:l});case 8:if(y=r.sent,T={clientParam:E,saveParam:y},!t.isCreateToCart){r.next=16;break}return r.next=13,n.createToCart(T,t.afterSaveCallback);case 13:_=r.sent,r.next=22;break;case 16:return r.next=18,g.a.create(T);case 18:_=r.sent,(I=J.getInstance()).setPageList(_.pageList),I.setPageParams(y.pageParamList);case 22:V.a.setDesignIdx(_?btoa(String(_.idx)).replace(/=/g,""):null),n.setDesignInfo(new te({idx:_.idx,title:_.title,accountId:_.accountId,latestDesignHistoryIdx:_.latestDesignHistoryIdx,sharedPrivate:_.sharedPrivate,sharedPublic:_.sharedPublic})),n.completeSave(f,d),h.renderAppHeader(c,u),v.a.instance.changeDesign=!1,e(),r.next=34;break;case 30:r.prev=30,r.t0=r.catch(0),n.resetSave(),i(r.t0);case 34:case"end":return r.stop()}},o,null,[[0,30]])}));return function(e,t,n){return c.apply(this,arguments)}}()))}));case 1:case"end":return e.stop()}},e)})),function(e){return se.apply(this,arguments)})},{key:"update",value:(oe=o()(r.a.mark(function t(n){var i=this;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,a){var s=v.a.instance.launcherOption;s&&s.isLauncherUpdateMode()||i.isSaveRequire()?v.a.dispatch(new f.c(function(){var s=o()(r.a.mark(function o(s,l,c){var u,h,d,p,f,E,y,T,_;return r.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,u=m.StringUtil.random(15),h=l.actionQ.length?l.actionQ[l.actionQ.length-1]:null,d=h?h[h.length-1]:null,i.startSave(u),p=e.getDesignInfo().getIdx(),f=i.getCallBackParam(),r.next=9,i.makeSaveParam({meta:s,categoryIdx:n.categoryIdx,title:n.title,autoSaved:n.isAutoSaved});case 9:if(E=r.sent,y={clientParam:f,saveParam:E},!n.isUpdateToCart){r.next=17;break}return r.next=14,i.updateToCart(y,n.afterSaveCallback);case 14:T=r.sent,r.next=24;break;case 17:return(_=J.getInstance()).optimizePageParams(E.pageParamList),r.next=21,g.a.update(p,{clientParam:f,saveParam:E});case 21:T=r.sent,_.setPageList(T.pageList),_.setPageParams(E.pageParamList);case 24:e.setDesignInfo(new te({idx:p,title:E.title,accountId:l.user.accountId,latestDesignHistoryIdx:T.latestDesignHistoryIdx,sharedPrivate:i.getDesignInfo().getSharedPrivate(),sharedPublic:i.getDesignInfo().getSharedPublic()})),i.completeSave(d,u),c.renderAppHeader(s,l),l.designProject.isLoaded()&&l.designProject.updateDesignData(T),v.a.instance.changeDesign=!1,v.a.dispatch(new j.a),t(),r.next=37;break;case 33:r.prev=33,r.t0=r.catch(0),i.resetSave(),a(r.t0);case 37:case"end":return r.stop()}},o,null,[[0,33]])}));return function(e,t,n){return s.apply(this,arguments)}}())):t()}));case 1:case"end":return t.stop()}},t)})),function(e){return oe.apply(this,arguments)})},{key:"getTitle",value:function(){return this.getDesignInfo().getTitle()}},{key:"setTitle",value:(ae=o()(r.a.mark(function t(n){var i,a,o,s;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if((i=this.getDesignInfo()).getTitle()!==n){t.next=3;break}return t.abrupt("return");case 3:if(i.setTitle(n),this.setDesignInfo(i),i.isLoaded()&&!this.isSaveRequire()){t.next=10;break}return t.next=8,this.save({categoryIdx:U.a.getSaveCategoryIdx()});case 8:t.next=17;break;case 10:return a=this.getCallBackParam(),o={title:n,createDateOffset:((new Date).getTime()-window.loadedTime)/1e3,repo:e.getDesignRepositoryType(),extraData:void 0,designMode:v.a.instance.launcherOption.getDesignMode()},t.next=14,g.a.update(i.getIdx(),{clientParam:a,saveParam:o});case 14:s=t.sent,window.loadedTime=(new Date).getTime(),v.a.instance.designProject.isLoaded()&&v.a.instance.designProject.updateDesignData(s);case 17:case"end":return t.stop()}},t,this)})),function(e){return ae.apply(this,arguments)})},{key:"getSharedPrivate",value:function(){return this.getDesignInfo().getSharedPrivate()}},{key:"setSharedPrivate",value:function(e){var t=this.getDesignInfo();t.getSharedPrivate()!==e&&(t.setSharedPrivate(e),this.setDesignInfo(t))}},{key:"getSharedPublic",value:function(){return this.getDesignInfo().getSharedPublic()}},{key:"setSharedPublic",value:function(e){var t=this.getDesignInfo();t.getSharedPublic()!==e&&(t.setSharedPublic(e),this.setDesignInfo(t))}},{key:"generateCopyRequestId",value:function(e){var t=Math.floor(1e6*Math.random()),n=(177*e+1579*t)%1e6;return"".concat(m.StringUtil.padStart(t.toString(),6,"0")).concat(m.StringUtil.padStart(n.toString(),6,"0"))}},{key:"getDesignKey",value:function(e){return btoa(String(e)).replace(/=/g,"")}},{key:"openCopyDesignWindow",value:(re=o()(r.a.mark(function t(n){var i,a,o,s,l,c;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n>0!=!1){t.next=2;break}throw Error("디자인 복사 요청 실패 : ".concat(n));case 2:return i=e.generateCopyRequestId(n),t.next=5,Z.a.getSelectedTeamIdx();case 5:return a=t.sent,t.next=8,Z.a.getSelectedTeamScope();case 8:o=t.sent,s=e.getDesignKey(n),l=$.param({teamIdx:a,teamScope:o}),c="/copydesign/".concat(s,"/key/").concat(i,"?").concat(l),window.open(c);case 13:case"end":return t.stop()}},t)})),function(e){return re.apply(this,arguments)})},{key:"resetSave",value:function(){this.instance.currentSaveKey="",this.instance.isSaving=!1,this.setSaveStatus(ee.SAVE_REQUIRE)}},{key:"startSave",value:function(e){this.instance.designEditTime=0,this.instance.currentSaveKey=e,this.instance.isSaving=!0,this.setSaveStatus(ee.SAVE_REQUEST)}},{key:"completeSave",value:function(e,t){this.instance.saveStatus===ee.SAVE_REQUEST&&this.setSaveStatus(ee.SAVE_COMPLETE);var n=v.a.instance;if(n.actionQ.forEach(function(e){e.forEach(function(e){e.isLastSavedAction=!1})}),n.redoQ.forEach(function(e){e.forEach(function(e){e.isLastSavedAction=!1})}),e?(e.isLastSavedAction=!0,n.isBlankSave=!1):n.isBlankSave=!0,this.instance.currentSaveKey===t){this.instance.isSaving=!1;var i=!0,r=!1,a=void 0;try{for(var o,s=this.callBackAfterSaveList[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){(0,o.value)()}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}this.callBackAfterSaveList=[]}}},{key:"saveAuto",value:function(t){var n=this;t.changeDesign()&&this.setSaveStatus(ee.SAVE_REQUIRE),v.a.instance.user.isLogin()&&(this.instance.autoSaveAction?Y.a.check(K.b.SAVE,function(){n.instance.autoSaveAction.setExecCallBack(!0),n.instance.autoSaveAction.resetExecCallBack()},function(){return n.setSaveStatus(ee.SAVE_FAILED)}):this.instance.autoSaveAction=new W.a(e.AUTO_SAVE_TERM,o()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.setSaveStatus(ee.SAVE_REQUIRE),e.prev=1,e.next=4,n.save({categoryIdx:U.a.getSaveCategoryIdx(),isAutoSaved:!0});case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),n.setSaveStatus(ee.SAVE_REQUIRE),console.error(e.t0);case 10:n.instance.autoSaveAction.setExecCallBack(!1);case 11:case"end":return e.stop()}},e,null,[[1,6]])}))))}},{key:"setSaveStatus",value:function(e){this.instance.saveStatus!==e&&(this.instance.saveStatus=e,v.a.dispatch(new f.c(function(e,t,n){n.appHeader.updateDesignSaveStatus()})))}},{key:"getSaveStatus",value:function(){return this.instance.saveStatus}},{key:"isSaveRequire",value:function(){return this.getSaveStatus()===ee.SAVE_REQUIRE}},{key:"getDesignEditTime",value:function(){return this.instance.designEditTime}},{key:"makeSaveParam",value:(ie=o()(r.a.mark(function t(n){var i,a,o,s;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.title?n.title:this.getDesignInfo().getTitle(),n.titleSuffix&&(i="".concat(i).concat(n.titleSuffix)),a=n.categoryIdx,o=JSON.stringify(n.sizeOption?n.sizeOption:v.a.instance.option.size),s={title:i,categoryIdx:a,sizeOption:o,extraData:{version:v.a.instance.version,launcherParam:null!=v.a.instance.launcherOption?v.a.instance.launcherOption.parameter:void 0},designMode:v.a.instance.launcherOption.getDesignMode(),templateTypeId:n.meta.templateType?n.meta.templateType.id:"custom_size",createDateOffset:((new Date).getTime()-window.loadedTime)/1e3,repo:e.getDesignRepositoryType(),autoSaved:n.autoSaved},window.loadedTime=(new Date).getTime(),t.next=8,this.makePageParamList(n.meta);case 8:return s.pageParamList=t.sent,t.abrupt("return",s);case 10:case"end":return t.stop()}},t,this)})),function(e){return ie.apply(this,arguments)})},{key:"makePageParamListCurrentMeta",value:(ne=o()(r.a.mark(function e(){var t=this;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){v.a.dispatch(new f.c(function(){var i=o()(r.a.mark(function i(a){var o;return r.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,t.makePageParamList(a);case 3:o=i.sent,e(o),i.next=10;break;case 7:i.prev=7,i.t0=i.catch(0),n(i.t0);case 10:case"end":return i.stop()}},i,null,[[0,7]])}));return function(e){return i.apply(this,arguments)}}()))}));case 1:case"end":return e.stop()}},e)})),function(){return ne.apply(this,arguments)})},{key:"makePageParamListCheckingExternalImg",value:(h=o()(r.a.mark(function e(){var t=this;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){v.a.dispatch(new f.c(function(){var i=o()(r.a.mark(function i(a){var o,s,l,c,u,h,d,p,v;return r.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:o=new Array,i.prev=1,s=!0,l=!1,c=void 0,i.prev=5,u=a.pages[Symbol.iterator]();case 7:if(s=(h=u.next()).done){i.next=33;break}if(d=h.value,b.a.containPixabayImage(d)){i.next=16;break}return i.t0=o,i.next=13,t.makePageParam(d,a.sheets.version);case 13:return i.t1=i.sent,i.t0.push.call(i.t0,i.t1),i.abrupt("continue",30);case 16:return p=d.getAllSingleItems().filter(function(e){return b.a.isPixabayItem(e)}).map(function(e){return b.a.getKey(e)}),i.next=19,P.d.downloadComplete(p);case 19:if(!i.sent){i.next=27;break}return i.t2=o,i.next=24,t.makePageParam(d,a.sheets.version);case 24:return i.t3=i.sent,i.t2.push.call(i.t2,i.t3),i.abrupt("continue",30);case 27:v=d.pageIdx+1+" 번 페이지의 픽사베이 이미지 다운로드가 아직 완료되지 않아 템플릿에 추가가 불가합니다.",alert(v),n(new Error(v));case 30:s=!0,i.next=7;break;case 33:i.next=39;break;case 35:i.prev=35,i.t4=i.catch(5),l=!0,c=i.t4;case 39:i.prev=39,i.prev=40,s||null==u.return||u.return();case 42:if(i.prev=42,!l){i.next=45;break}throw c;case 45:return i.finish(42);case 46:return i.finish(39);case 47:e(o),i.next=53;break;case 50:i.prev=50,i.t5=i.catch(1),n(i.t5);case 53:0;case 54:case"end":return i.stop()}},i,null,[[1,50],[5,35,39,47],[40,,42,46]])}));return function(e){return i.apply(this,arguments)}}()))}));case 2:case"end":return e.stop()}},e)})),function(){return h.apply(this,arguments)})},{key:"makePageParamList",value:(c=o()(r.a.mark(function e(t){var n,i,a,o,s,l,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=[],i=!0,a=!1,o=void 0,e.prev=4,s=t.pages[Symbol.iterator]();case 6:if(i=(l=s.next()).done){e.next=16;break}return c=l.value,e.t0=n,e.next=11,this.makePageParam(c,t.sheets.version);case 11:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 13:i=!0,e.next=6;break;case 16:e.next=22;break;case 18:e.prev=18,e.t2=e.catch(4),a=!0,o=e.t2;case 22:e.prev=22,e.prev=23,i||null==s.return||s.return();case 25:if(e.prev=25,!a){e.next=28;break}throw o;case 28:return e.finish(25);case 29:return e.finish(22);case 30:return e.abrupt("return",n);case 31:case"end":return e.stop()}},e,this,[[4,18,22,30],[23,,25,29]])})),function(e){return c.apply(this,arguments)})},{key:"makePageParam",value:(s=o()(r.a.mark(function e(t,n){var i,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.makeXml(t,n),e.next=3,this.makeThumb(t);case 3:return a=e.sent,e.abrupt("return",{xml:i,thumb:a,width:parseInt(String(t.sheetSize.width)),height:parseInt(String(t.sheetSize.height)),reference:t.reference});case 5:case"end":return e.stop()}},e,this)})),function(e,t){return s.apply(this,arguments)})},{key:"makeXml",value:function(e,t){var n=new y.a("SHEET"),i=n.root();return i.attr("Version",t),(new T.a).makeXml(e,i),(new XMLSerializer).serializeToString(n.xmldoc)}},{key:"makeThumb",value:(a=o()(r.a.mark(function e(t){var n,i=arguments;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:800,e.abrupt("return",new Promise(function(){var e=o()(r.a.mark(function e(i,a){var o,s,l,c,u,h;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=Math.max(t.sheetSize.width,t.sheetSize.height),s=o>n?n/o:1,l=t.sheetSize.width*s,c=t.sheetSize.height*s,e.prev=4,e.next=7,t.renderThumbnail(l,c,s);case 7:u=e.sent,i(u),e.next=17;break;case 11:e.prev=11,e.t0=e.catch(4),(h=new Image).onload=function(){var e=L.a.createCanvas();e.width=l,e.height=c;var t=e.getContext("2d");t.fillStyle="rgba(158, 158, 158, 1)",t.fillRect(0,0,l,c);var n=Math.min(l,c);t.drawImage(h,(l-n)/2,(c-n)/2,n,n),i(e.toDataURL())},h.onerror=function(e){a(e)},h.src="/resources/image/anonymous_thumb.png";case 17:case"end":return e.stop()}},e,null,[[4,11]])}));return function(t,n){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)})},{key:"load",value:(i=o()(r.a.mark(function e(t,n){var i,a,s,l;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.instance.designEditTime=0,i=!1,_.a.open(m.CRM.get(E.a.TOOLS_POPUP_DESIGN_LOAD_LOADING_MSG),m.CRM.get(E.a.TOOLS_POPUP_DESIGN_LOAD_LOADING_CANCEL),function(){return i=!0}),e.prev=3,a=I.a.make({idx:t,repositoryType:p.a.UNICORN,resourceType:F.a.DESIGN,designProjectIdx:n}),e.next=7,a.load();case 7:if(s=e.sent,!i){e.next=10;break}return e.abrupt("return");case 10:return this.setSaveStatus(ee.DEFAULT),l=a.designBean,v.a.setMetaData(s),this.setUserDesign(l),C.a.clear(),v.a.instance.clearQ(),v.a.dispatch(new f.c(function(){var e=o()(r.a.mark(function e(t,n,i){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i.pageListNavigator.showPageList(!0,!1),i.canvasRenderer.updatePagingManager(),i.canvasRenderer.updateZoomFitAfterRender(),e.next=5,i.renderAll(s,n);case 5:v.a.dispatch(new k.k);case 6:case"end":return e.stop()}},e)}));return function(t,n,i){return e.apply(this,arguments)}}())),e.abrupt("return",s);case 20:e.prev=20,e.t0=e.catch(3),alert(m.CRM.get(E.a.TOOLS_POPUP_DESIGN_SAVE_LOAD_FAIL_MSG)),console.error(e.t0);case 24:return e.prev=24,_.a.close(),e.finish(24);case 27:case"end":return e.stop()}},e,this,[[3,20,24,27]])})),function(e,t){return i.apply(this,arguments)})},{key:"getDesignParam",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];switch(t){case p.a.UNICORN:return{repositoryType:t,idx:parseInt(e),resourceType:n?F.a.TEMPLATE:F.a.DESIGN};case p.a.BIZHOWS:case p.a.SMILECAT:var i={repositoryType:t,pkName:"",copyIdx:0,code1:0,code2:0,code3:0},r=parseInt(e);return isNaN(r)||r<=0?i.pkName=e:i.copyIdx=r,i;default:return null}}},{key:"getPrivateItemCnt",value:(n=o()(r.a.mark(function e(t){var n,i,a,o,s,l,c,u;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=[],i=!0,a=!1,o=void 0,e.prev=4,s=t.getAllSingleItems()[Symbol.iterator]();case 6:if(i=(l=s.next()).done){e.next=25;break}c=l.value,e.t0=c.getItemType(),e.next=e.t0===H.a.SVG_BASIC?11:e.t0===H.a.PHOTO?13:e.t0===H.a.SVG_IMAGE_FRAME?19:22;break;case 11:return n.push(c),e.abrupt("break",22);case 13:e.t1=c.orgType,e.next=e.t1===S.b.Photo?16:e.t1===S.b.BackgroundPhoto?16:18;break;case 16:return n.push(c),e.abrupt("break",18);case 18:return e.abrupt("break",22);case 19:return(u=c).innerPhotoItem.orgType!==S.b.Photo||u.isDefaultImage()||n.push(c),e.abrupt("break",22);case 22:i=!0,e.next=6;break;case 25:e.next=31;break;case 27:e.prev=27,e.t2=e.catch(4),a=!0,o=e.t2;case 31:e.prev=31,e.prev=32,i||null==s.return||s.return();case 34:if(e.prev=34,!a){e.next=37;break}throw o;case 37:return e.finish(34);case 38:return e.finish(31);case 39:return e.abrupt("return",n.length);case 40:case"end":return e.stop()}},e,null,[[4,27,31,39],[32,,34,38]])})),function(e){return n.apply(this,arguments)})},{key:"getInactiveItemCnt",value:(t=o()(r.a.mark(function e(t){var n,i,a,o,s,l,c,u,h,d;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=0,i=[],a=!0,o=!1,s=void 0,e.prev=5,l=t.getAllSingleItems()[Symbol.iterator]();case 7:if(a=(c=l.next()).done){e.next=27;break}u=c.value,e.t0=u.getItemType(),e.next=e.t0===H.a.SVG_GRAPHIC?12:e.t0===H.a.SVG_IMAGE_FRAME?14:e.t0===H.a.PHOTO?18:24;break;case 12:return u.svgData.status===w.h.DISABLED&&n++,e.abrupt("break",24);case 14:return(h=u).svgData.status===O.g.DISABLED&&n++,h.innerPhotoItem.orgType===S.b.Sticker&&i.push(h.innerPhotoItem.props.getPhotoKey()),e.abrupt("break",24);case 18:e.t1=u.orgType,e.next=e.t1===S.b.Sticker?21:e.t1===S.b.Image?21:e.t1===S.b.BackgroundImage?21:23;break;case 21:return i.push(u.props.getPhotoKey()),e.abrupt("break",23);case 23:return e.abrupt("break",24);case 24:a=!0,e.next=7;break;case 27:e.next=33;break;case 29:e.prev=29,e.t2=e.catch(5),o=!0,s=e.t2;case 33:e.prev=33,e.prev=34,a||null==l.return||l.return();case 36:if(e.prev=36,!o){e.next=39;break}throw s;case 39:return e.finish(36);case 40:return e.finish(33);case 41:if(m.ArrayUtil.isEmpty(i)){e.next=47;break}return d=A.a.from(p.a.SMILECAT,!0),e.next=45,d.getStickerDataList(i);case 45:e.sent.forEach(function(e){e.active||n++});case 47:return e.abrupt("return",n);case 48:case"end":return e.stop()}},e,null,[[5,29,33,41],[34,,36,40]])})),function(e){return t.apply(this,arguments)})},{key:"getStartDesignUrl",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p.a.UNICORN,i=e.getDesignKey(t),r=n===p.a.UNICORN?m.CRM.get(E.a.DESIGN_PATH_UNICORN):m.CRM.get(E.a.DESIGN_PATH);return r.replace("{idx}",i).replace("{repositoryType}",n)}},{key:"getDesignAbsUrl",value:function(t){var n=e.getStartDesignUrl(t,p.a.UNICORN);return new URL(n,document.URL).href}},{key:"setCallbackAfterSave",value:function(e){this.callBackAfterSaveList.push(e)}},{key:"getDesignRepositoryType",value:function(){var e=v.a.instance.launcherOption;return e&&e.isDesignRelatedBizhows()?B.d.BIZHOWS:B.d.MIRICANVAS}},{key:"enableSaveToBizDesignLibrary",value:function(){this.instance.shouldSaveToBizLibrary=!0}},{key:"getCallBackParam",value:function(){return v.a.instance.launcherOption.hasOption()?v.a.instance.launcherOption.parameter.callbackParam:""}}]),e}();d()(ne,"instance",new ne),d()(ne,"AUTO_SAVE_TERM",1e4),d()(ne,"callBackAfterSaveList",[]),function(e){e.SAVE_REQUIRE="SAVE_REQUIRE",e.SAVE_REQUEST="SAVE_REQUEST",e.SAVE_COMPLETE="SAVE_COMPLETE",e.SAVE_FAILED="SAVE_FAILED",e.DEFAULT="DEFAULT"}(ee||(ee={}))},function(e,t,n){"use strict";(function(e){n.d(t,"b",function(){return G}),n.d(t,"a",function(){return F});var i=n(0),r=n.n(i),a=n(1),o=n.n(a),s=n(35),l=n.n(s),c=n(36),u=n.n(c),h=n(39),d=n.n(h),p=n(44),v=n.n(p),f=n(38),g=n.n(f),m=n(46),E=n.n(m),y=n(40),T=n.n(y),_=n(37),I=n.n(_),C=n(51),S=n(104),w=n(3),k=n(125),R=n(49),L=n(103),O=n(253),A=n(105),b=n(42),P=n(64),N=n(87),x=n(43),M=n(48),D=n(497),B=n(254),U=n(71),G=function(t){function n(e,t,i,r,a){var o,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u=arguments.length>7&&void 0!==arguments[7]&&arguments[7],h=!(arguments.length>8&&void 0!==arguments[8])||arguments[8],p=!(arguments.length>9&&void 0!==arguments[9])||arguments[9],f=!(arguments.length>10&&void 0!==arguments[10])||arguments[10],m=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];return l()(this,n),o=d()(this,g()(n).call(this,e,t,i,r,a,s,c,u,h,p,f,m)),I()(v()(o),"isMaskImageLoaded",!1),I()(v()(o),"isEditMode",!1),I()(v()(o),"editModeParam",{isEditMode:!1,moveX:0,moveY:0,orgScale:1}),I()(v()(o),"charSpace",0),I()(v()(o),"shadowBlurConstant",3),I()(v()(o),"shadowLengthConstant",1),I()(v()(o),"zoomscale",1),o.renderdata=new O.b,o.props.setChangeRotateSetRevision(!0),o.edit=new B.c(o.props,null,o.renderdata),o}var i,a,s,c,h;return T()(n,t),u()(n,[{key:"makeSVG",value:function(){this.svg||(this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="absolute",this.svgRenderer=new D.a(this.renderdata,this.props,this.svg),this.edit.textSVG=this.svg),this.edit.textSVG||(this.edit.textSVG=this.svg)}},{key:"makeProps",value:function(){var e=this,t=new S.b;return t.onboundchange=function(t){return e.calcPropBound(t)},t}},{key:"getItemBound",value:function(){var e=E()(g()(n.prototype),"getItemBound",this).call(this);if(!this.props.isFillBackground())if(this.props.isActiveCurve()){if(this.props.isCurveCw()){var t=0;this.props.forEachChar(function(e){t=t<e.size?e.size:t}),e.pureLTRB.left-=t,e.pureLTRB.top-=t,e.pureLTRB.right+=t,e.pureLTRB.bottom+=t}}else{var i=this.renderdata.getCalculated(this.props,1),r=i.startX,a=i.top,o=i.pureTextBound,s={leftTopPt:{cx:Math.min.apply(null,r),cy:a},width:o.x2,height:o.y2};e.pureBound=s,e.pureLTRB=new R.a(this.props.getLeft()+s.leftTopPt.cx,this.props.getTop()+s.leftTopPt.cy,this.props.getLeft()+s.leftTopPt.cx+s.width,this.props.getTop()+s.leftTopPt.cy+s.height)}return e}},{key:"getItemType",value:function(){return U.a.TEXT}},{key:"renderThumbnail",value:(h=o()(r.a.mark(function e(t,n){var i=this;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=o()(r.a.mark(function e(a,o){var s,l,c,u,h,d,p,v,f;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.save(),e.prev=1,s=i.getCanvasPosData(n),l=s.width,c=s.height,u=s.contentleft,h=s.contenttop,d=s.offsetX,p=s.offsetY,(v=P.a.createCanvas()).width=l,v.height=c,(f=v.getContext("2d")).translate(Math.round(-u+d),Math.round(-h+p)),t.save(),e.next=11,i.render(f,n);case 11:t.translate(Math.round(i.props.getLeft()*n+u-d),Math.round(i.props.getTop()*n+h-p)),i.props.getRotate()?(t.translate(l/2,c/2),t.rotate(Math.round(i.props.getRotate()*Math.PI/180*1e3)/1e3),t.drawImage(v,-l/2,-c/2,l,c)):t.drawImage(v,0,0),t.restore(),e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(1),o(e.t0),e.abrupt("return");case 20:t.restore(),a();case 22:case"end":return e.stop()}},e,null,[[1,16]])}));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)})),function(e,t){return h.apply(this,arguments)})},{key:"updateSVG",value:(c=o()(r.a.mark(function e(){var t,n,i=this,a=arguments;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]&&a[0],n=a.length>1&&void 0!==a[1]&&a[1],e.abrupt("return",new Promise(function(e,r){for(var a=i.props.getLineLength(),o=[],s=[],l=0;l<a;l++){var c=i.props.getLine(l),u=!0,h=!1,d=void 0;try{for(var p,v=c.chars[Symbol.iterator]();!(u=(p=v.next()).done);u=!0){var f=p.value;k.a.instance.has(f.styles.family)||-1!==o.indexOf(f.styles.family)?k.a.instance.get(f.styles)||s.push(k.a.instance.gett(f.styles)):(o.push(f.styles.family),s.push(k.a.instance.addFamily(f.styles.family)))}}catch(e){h=!0,d=e}finally{try{u||null==v.return||v.return()}finally{if(h)throw d}}}var g=function(){var r=i.getCanvasPosData(1),a=r.width,o=r.height,s=r.offsetX,l=r.offsetY;t&&(a=r.width-2*r.offsetX,o=r.height-2*r.offsetY,s=0,l=0),i.svgRenderer.update(a,o,r.contentleft,r.contenttop,s,l,n),e()};s.length>0?Promise.all(s).then(function(){g()}).catch(function(e){return r(e)}):g()}));case 3:case"end":return e.stop()}},e)})),function(){return c.apply(this,arguments)})},{key:"getCanvasPosData",value:function(e){try{if(!this.polygonData||this.lastRev!==this.props.getRevision()||e!==this.lastposscale){var t=this.renderdata.getCalculated(this.props,e),i=t.maxCharWidth,r=t.pureTextBound,a=this.props.getFontDetailScaleXAcc()/100,o=E()(g()(n.prototype),"getCanvasPosData",this).call(this,e),s=.7,l=0;this.props.forEachChar(function(e){l=l<e.size?e.size:l,s<3.5&&e.shadow.active&&0!==e.shadow.distance?s=3.5:s<1&&e.outline.active&&e.outline.size&&(s=1)});var c,u=i*s;if(c=this.props.isActiveCurve()?l*e:0,this.polygonData={width:o.width+u*e*a+2*c,height:o.height+2*c+u*e,contentleft:0,contenttop:0,offsetX:u/2*e*a+c,offsetY:u/2*e+c},!this.props.isActiveCurve()){var h=r.x2*e+u*e*a;this.polygonData.width=this.polygonData.width>h?this.polygonData.width:h;var d=0;switch(this.props.getTextAlign()){case S.c.RIGHT:d=this.polygonData.width-u*e*a-o.width;break;case S.c.CENTER:d=this.polygonData.width/2-o.width/2}this.polygonData.offsetX=this.polygonData.offsetX>d?this.polygonData.offsetX:d}this.lastRev=this.props.getRevision(),this.lastposscale=e}return this.polygonData}catch(t){return E()(g()(n.prototype),"getCanvasPosData",this).call(this,e)}}},{key:"render",value:(s=o()(r.a.mark(function t(n,i){var a=this;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=o()(r.a.mark(function t(s,l){var c,u,h,d,p,v,f,g,m,E,y,T;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a.edit&&a.edit.setScale(a.lastRenderEditScale),c=a.props.getLineLength(),u=[],h=[],d=0;case 5:if(!(d<c)){t.next=29;break}for(p=a.props.getLine(d),v=!0,f=!1,g=void 0,t.prev=10,m=p.chars[Symbol.iterator]();!(v=(E=m.next()).done);v=!0)y=E.value,k.a.instance.has(y.styles.family)||-1!==u.indexOf(y.styles.family)?k.a.instance.get(y.styles)||h.push(k.a.instance.gett(y.styles)):(u.push(y.styles.family),h.push(k.a.instance.addFamily(y.styles.family)));t.next=18;break;case 14:t.prev=14,t.t0=t.catch(10),f=!0,g=t.t0;case 18:t.prev=18,t.prev=19,v||null==m.return||m.return();case 21:if(t.prev=21,!f){t.next=24;break}throw g;case 24:return t.finish(21);case 25:return t.finish(18);case 26:d++,t.next=5;break;case 29:T=function(){var t=o()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.env.IMAGE_PROCESS){t.next=4;break}return t.abrupt("return",a.renderFromSVG(n,i));case 4:return t.abrupt("return",a.renderDirectly(n,i));case 5:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),h.length>0?Promise.all(h).then(function(){a.props.updateRevision(),T().then(function(){s()}).catch(function(e){return l(e)})}):T().then(function(){s()}).catch(function(e){return l(e)});case 31:case"end":return t.stop()}},t,null,[[10,14,18,26],[19,,21,25]])}));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)})),function(e,t){return s.apply(this,arguments)})},{key:"renderFromSVG",value:(a=o()(r.a.mark(function e(t,n){var i=this;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=o()(r.a.mark(function e(a,o){var s,l,c,u,h,d,p;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s=i.getCanvasPosData(n),l=document.createElementNS("http://www.w3.org/2000/svg","svg"),c=new D.a(i.renderdata,i.props,l),u=1,(h=Math.max(s.width,s.height))>1e4&&(u=1e4/h),c.updateTo(l,s.width*u,s.height*u,s.contentleft*u,s.contenttop*u,s.offsetX*u,s.offsetY*u,n*u,!0,!0,!0),d=(new XMLSerializer).serializeToString(l),p=new Image;try{p.onload=function(){t.drawImage(p,Math.round(-s.offsetX),Math.round(-s.offsetY),Math.round(s.width),Math.round(s.height)),a()},p.onerror=function(e){return o(e)},p.src="data:image/svg+xml;base64,"+w.StringUtil.b64EncodeUnicode(d)}catch(e){o(e)}case 10:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)})),function(e,t){return a.apply(this,arguments)})},{key:"renderDirectly",value:(i=o()(r.a.mark(function e(t,n){var i=this;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,r){i.props.calculated||i.props.recalculatePos();var a=i.props.isUpperCase()?i.props.getText().toUpperCase():i.props.getText(),o=a.length;a&&0!==o||e();var s=Math.floor(i.props.getWidth()*n),l=Math.floor(i.props.getHeight()*n);t.save(),t.scale(n,n),i.props.isFlipH()&&t.translate(s,0),i.props.isFlipV()&&t.translate(0,l),t.scale(i.props.isFlipH()?-1:1,i.props.isFlipV()?-1:1),t.globalAlpha=i.props.getOpacity()/255;var c,u,h=i.props.getFontDetailScaleXAcc()/100,d=P.a.createCanvas(),p=d.getContext("2d");try{i.renderdata.foreach(i.props,n,function(e,n){if(i.props.isActiveCurve()||t.scale(h,1),t.save(),i.props.isFillBackground()){var r=t.globalAlpha;try{var a=L.a.parseColorString(i.props.getBackgroundColor());t.globalAlpha=a.alpha,t.fillStyle=a.rgb,t.fillRect(0,0,i.props.getWidth()/h,i.props.getHeight())}finally{t.globalAlpha=r}}c=i.getMask(t,e.textSize.bound),t.restore()},[function(e,r,a,o,s,l,c,u){if(r.shadow.active){t.save(),p.save();try{var h=1;r.size*A.b<10&&(h=r.size*A.b/10),o=Math.round(o*n*h)/n/h,s=Math.round(s*n*h)/n/h;var v=k.a.instance.getAvailableStyle(r.styles.family);t.translate(o,s);var f=r.size*A.b;p.font=k.a.instance.getFontStr(r.styles,f,a);var g=p.measureText(a).width;d.width=5*g,d.height=4*f,p.translate(2*g,1.5*f),p.font=k.a.instance.getFontStr(r.styles,f,a);var m=r.shadow.distance/200*e.maxCharWidth*n/i.shadowLengthConstant,E=R.b.getPointByDistanceAngle(m,r.shadow.angle-90-i.props.getRotate()),y=r.shadow.color;t.shadowColor=y;var T=r.shadow.spread/10/i.shadowLengthConstant*i.shadowBlurConstant/20*e.maxCharWidth*n/4.5;if(t.beginPath(),t.moveTo(8*-e.maxCharWidth/n,8*-e.maxCharWidth/n),t.lineTo(u.advance+8*e.maxCharWidth/n,8*-e.maxCharWidth/n),t.lineTo(u.advance+8*e.maxCharWidth/n,8*e.maxCharWidth/n),t.lineTo(8*-e.maxCharWidth/n,8*e.maxCharWidth/n),t.clip(),t.shadowBlur=T*h,t.shadowOffsetX=E.cx*i.zoomscale,t.shadowOffsetY=(E.cy+10*e.maxCharWidth)*i.zoomscale,t.globalAlpha=r.shadow.alpha/100*i.props.getOpacity()/255,void 0!==u.angle&&(p.rotate(u.angle),p.translate(-u.trans,0)),!v.italic&&r.styles.italic&&p.transform(1,0,-O.a,1,0,0),r.styles.bold&&!v.bold&&(p.lineWidth=r.size*A.b/36,p.strokeText(a,0,0)),r.outline.active&&r.outline.size>0){p.lineJoin="round";var _=r.outline.color,I=r.outline.size/200*Math.round(e.maxCharWidth);p.strokeStyle=_,p.lineWidth=I,!v.bold&&r.styles.bold&&(p.lineWidth+=r.size*A.b/36),p.lineWidth/=h,p.scale(h,h),p.strokeText(a,0,0)}if(p.fillStyle=r.color,p.scale(h,h),p.fillText(a,0,0),r.styles.strikeout){var C=u.ascend/3;p.beginPath(),p.moveTo(0,-C),p.lineWidth=1*r.size/15,p.lineTo(0+u.advance,-C),p.strokeStyle=p.fillStyle,p.stroke()}if(r.styles.underline){var S=u.descend/2;p.beginPath(),p.moveTo(0,-S),p.lineWidth=1*r.size/15,p.lineTo(0+u.advance,-S),p.strokeStyle=p.fillStyle,p.stroke()}t.strokeStyle="black",t.drawImage(d,2*-g,-1.5*f-10*e.maxCharWidth/(n/i.shadowLengthConstant))}finally{p.restore(),t.restore()}}},function(e,i,r,a,o,s,l,c){if(i.outline.active&&i.outline.size>0){t.save(),p.save();try{var u=1;i.size*A.b<10&&(u=i.size*A.b/10),a=Math.round(a*n*u)/n/u,o=Math.round(o*n*u)/n/u;var h=k.a.instance.getAvailableStyle(i.styles.family);t.translate(a,o);var v=i.size*A.b;p.font=k.a.instance.getFontStr(i.styles,v,r);var f=p.measureText(r).width;d.width=5*f,d.height=4*v,p.translate(2*f,1.5*v),p.font=k.a.instance.getFontStr(i.styles,v,r),void 0!==c.angle&&(p.rotate(c.angle),p.translate(-c.trans,0)),!h.italic&&i.styles.italic&&p.transform(1,0,-O.a,1,0,0),p.lineJoin="round";var g=i.outline.color,m=i.outline.size/200*Math.round(e.maxCharWidth);if(p.strokeStyle=g,p.lineWidth=m,!h.bold&&i.styles.bold&&(p.lineWidth+=i.size*A.b/36),p.lineWidth/=u,p.scale(u,u),i.outline.size>10)for(var E=p.lineWidth,y=1;y<=10;y++)p.lineWidth=y*E/10,p.strokeText(r,0,0);else p.strokeText(r,0,0);t.strokeStyle="black",t.drawImage(d,2*-f,-1.5*v)}finally{p.restore(),t.restore()}}},function(e,r,a,o,s,l,h,v){var f=1;!i.isEditMode&&r.size*A.b<10&&(f=r.size*A.b/10),o=Math.round(o*n*f)/n/f,s=Math.round(s*n*f)/n/f,t.font=k.a.instance.getFontStr(r.styles,r.size*A.b,a);var g=L.a.parseColorString(r.color);switch(t.globalAlpha=g.alpha,r.filltype){case S.a.GRADATION:t.fillStyle=u,t.strokeStyle=u;break;case S.a.MASK:t.fillStyle=c;break;default:t.fillStyle=g.rgb,t.strokeStyle=g.rgb}a=i.props.isUpperCase()?a.toUpperCase():a,t.save(),p.save();var m=o,E=s;void 0!==v.angle&&(t.translate(o,s),t.rotate(v.angle),t.translate(-v.trans,0),t.translate(-v.beforex,-v.beforey),m=v.beforex,E=v.beforey);var y=k.a.instance.getAvailableStyle(r.styles.family);if(r.styles.italic&&!y.italic||r.styles.bold&&!y.bold)if(1===t.globalAlpha)r.styles.italic&&!y.italic&&(t.translate(m,E),t.transform(1,0,-O.a,1,0,0),t.translate(-m,-E)),t.scale(f,f),t.fillText(a,m/f,E/f),r.styles.bold&&!y.bold&&(t.lineWidth=r.size*A.b/36,t.strokeText(a,m/f,E/f));else{var T=r.size*A.b;p.font=k.a.instance.getFontStr(r.styles,T,a);var _=p.measureText(a).width,I=n*i.zoomscale;d.width=5*_*I,d.height=4*T*I,p.scale(I,I),p.font=k.a.instance.getFontStr(r.styles,T,a),p.fillStyle=t.fillStyle,p.strokeStyle=t.strokeStyle,p.lineWidth=r.size*A.b/36,p.translate(2*_,1.5*T),p.translate(-m,-E),r.styles.italic&&!y.italic&&(p.translate(m,E),p.transform(1,0,-O.a,1,0,0),p.translate(-m,-E)),p.scale(f,f),r.styles.bold&&!y.bold&&p.strokeText(a,m/f,E/f),p.fillText(a,m/f,E/f),t.drawImage(d,m-2*_,E-1.5*T,5*_,4*T)}else t.scale(f,f),t.fillText(a,m/f,E/f);if(r.styles.strikeout){var C=v.ascend/3;t.beginPath(),t.moveTo(m,E-C),t.lineWidth=1*r.size/15,t.lineTo(m+v.advance,E-C),t.strokeStyle=t.fillStyle,t.stroke()}if(r.styles.underline){var w=v.descend/2;t.beginPath(),t.moveTo(m,E-w),t.lineWidth=1*r.size/15,t.lineTo(m+v.advance,E-w),t.strokeStyle=t.fillStyle,t.stroke()}p.restore(),t.restore()}],[null,null,function(e,n,r,a){u=i.getLinearGrad(t,r,e.startX[a])}])}catch(e){r(e)}t.restore(),e()}));case 1:case"end":return e.stop()}},e)})),function(e,t){return i.apply(this,arguments)})},{key:"getLinearGrad",value:function(e,t,n){var i=Object.assign({},t);i.x1+=n,i.x2+=n;var r=-1*R.b.getRadianByDegree(this.props.getGradientAngle()),a={cx:i.x1,cy:i.y1},o={cx:i.x2,cy:i.y1},s={cx:i.x1,cy:i.y2},l={cx:i.x2,cy:i.y2},c=R.b.centerPoint(a,l);a=R.b.transformation(a,c,-r),o=R.b.transformation(o,c,-r),s=R.b.transformation(s,c,-r),l=R.b.transformation(l,c,-r);var u=Math.min(a.cx,s.cx,o.cx,l.cx),h=Math.min(a.cy,s.cy,o.cy,l.cy),d=Math.max(a.cx,s.cx,o.cx,l.cx),p=Math.max(a.cy,s.cy,o.cy,l.cy);a={cx:u,cy:h},o={cx:d,cy:h},s={cx:u,cy:p},l={cx:d,cy:p};var v=R.b.centerPoint(a,s),f=R.b.centerPoint(o,l);v=R.b.transformation(v,c,r),f=R.b.transformation(f,c,r);var g=e.createLinearGradient(v.cx,v.cy,f.cx,f.cy);return 255===this.props.getGradientAlpha1()&&g.addColorStop(0,this.props.getGradientColor1()),255!==this.props.getGradientAlpha2()||this.props.isGradientNewFormat()||g.addColorStop(1/3,this.props.getGradientColor2()),255!==this.props.getGradientAlpha3()||this.props.isGradientNewFormat()||g.addColorStop(2/3,this.props.getGradientColor3()),255===this.props.getGradientAlpha4()&&g.addColorStop(1,this.props.getGradientColor4()),g}},{key:"getMask",value:function(e,t){var n=this;if(""===this.props.getMaskId())return null;if(this.isMaskImageLoaded)return this.pattern;if(!this.isMaskImageLoaded){var i=new Image;i.src="resources/image/sticker/"+this.props.getMaskId()+".png",i.onload=function(){var r=P.a.createCanvas();r.width=t.x2,r.height=t.y2,r.getContext("2d").drawImage(i,t.x1,t.y1,t.x2-t.x1,t.y2-t.y1),n.pattern=e.createPattern(r,"no-repeat"),n.isMaskImageLoaded=!0}}}},{key:"canFlip",value:function(){return!1}},{key:"scale",value:function(e){E()(g()(n.prototype),"scale",this).call(this,e);var t=this.props.onboundchange;return this.props.onboundchange=null,this.props.forEachChar(function(t){return t.size*=e}),this.props.onboundchange=t,this}},{key:"clone",value:function(){var e=new n(w.StringUtil.random(),this.props.getLeft(),this.props.getTop(),this.props.getRight(),this.props.getBottom(),this.props.getRotate(),this.props.isFlipH(),this.props.isFlipV(),this.props.isCanUserSelect(),this.props.isCanUserMove(),this.props.isCanUserResize(),this.props.isCanUserDel());return e.setProps(this.props.clone()),e.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),e.svg.style.position="absolute",e.svgRenderer=new D.a(e.renderdata,e.props,e.svg),e.charSpace=this.charSpace,this.setCloneItemDefaultAttr(e),e}},{key:"setProps",value:function(e){var t=this;E()(g()(n.prototype),"setProps",this).call(this,e),this.edit.setProps(this.props),this.svgRenderer&&this.svgRenderer.setProps(this.props),this.props.onboundchange=function(e){return t.calcPropBound(e)}}},{key:"getUsedColor",value:function(){var e=new Set,t=this.props.getColors(),n=this.props.isActiveOutlines(),i=this.props.getOutlineColors(),r=this.props.isActiveShadows(),a=this.props.getShadowColors();return t.forEach(function(t,o){t.forEach(function(t,s){e.add(t),n[o][s]&&e.add(i[o][s]),r[o][s]&&e.add(a[o][s])})}),this.props.isFillBackground()&&e.add(this.props.getBackgroundColor()),this.props.isActiveGradient()&&(e.add(this.props.getGradientColor1()),e.add(this.props.getGradientColor2()),e.add(this.props.getGradientColor3()),e.add(this.props.getGradientColor4())),e}},{key:"isEditArea",value:function(e,t){arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.lastRenderEditScale;return!0}},{key:"setLTRBCoordinate",value:function(e,t,i){this.resizeText(e,i),E()(g()(n.prototype),"setLTRBCoordinate",this).call(this,e)}},{key:"resizeText",value:function(e,t){if(!this.props.isActiveCurve()||!n.isResizeHandlerCrossDirection(t))if(n.isResizeHandlerCrossDirection(t)){var i=this.props.getTop(),r=this.props.getBottom();E()(g()(n.prototype),"setLTRBCoordinate",this).call(this,e);var a=this.renderdata.getCalculated(this.props,1).pureTextBound.y2;if(a>e.getHeight())if(t!==N.b.TOP&&t!==N.b.BOTTOM)switch(this.props.getVerticalAlign()){case S.f.TOP:e.bottom=e.top+a;break;case S.f.BOTTOM:e.top=e.bottom-a;break;case S.f.CENTER:var o=e.getHeight()/2+e.top;e.top=o-a/2,e.bottom=o+a/2}else if(e.top!==i&&e.bottom!==r){var s=(e.top+e.bottom)/2;e.top=s-a/2,e.bottom=e.top+a}else t===N.b.TOP?e.top=e.bottom-a:t===N.b.BOTTOM&&(e.bottom=e.top+a);else{var l=e.getHeight()<=this.lastHeight?e.getHeight():this.lastHeight>a?this.lastHeight:a;switch(t){case N.b.LEFT:case N.b.RIGHT:switch(this.props.getVerticalAlign()){case S.f.TOP:e.bottom=e.top+l;break;case S.f.BOTTOM:e.top=e.bottom-l;break;case S.f.CENTER:var c=e.getHeight()/2+e.top;e.top=c-l/2,e.bottom=c+l/2}break;case N.b.TOP:case N.b.BOTTOM:this.lastHeight=e.getHeight()}}}else{var u=this.props.getHeight(),h=this.props.getWidth(),d=e.getHeight()/u,p=e.getWidth()/(h*d)*this.props.getFontDetailScaleXAcc();this.props.forEachChar(function(e){e.size=e.size*d}),this.props.setFontDetailScaleX(p,!1),this.props.isActiveCurve()||(this.lastHeight=e.getHeight())}}},{key:"calcPropBound",value:function(e){try{var t,n=this.renderdata.getCalculated(e,1,e.isLegacy()).textSize,i=n.bound.x2+2;switch(e.getVerticalAlign()){case S.f.TOP:t=n.bound.y2;break;default:t=n.bound.y2-n.bound.y1}if(!this.props.isActiveCurve()&&i>e.getWidth())switch(e.getTextAlign()){case S.c.LEFT:e.setRight(e.getLeft()+i);break;case S.c.RIGHT:e.setLeft(e.getRight()-i);break;case S.c.CENTER:var r=e.getWidth()/2+e.getLeft();e.setLeft(r-i/2),e.setRight(r+i/2)}if(!e.isLegacy()&&void 0!==this.lastHeight&&!this.props.isActiveCurve()){var a=t>this.lastHeight?t:this.lastHeight;if(this.props.getHeight()!==a)switch(e.getVerticalAlign()){case S.f.TOP:e.setBottom(e.getTop()+a);break;case S.f.BOTTOM:e.setTop(e.getBottom()-a);break;case S.f.CENTER:var o=e.getHeight()/2+e.getTop();e.setTop(o-a/2),e.setBottom(o+a/2)}}return this.renderdata.getCalculated(e,1),this.props.setLegacy(!1),!0}catch(e){return!1}}},{key:"getHeaderTitle",value:function(){return x.a.TOOLS_HEADER_TEXT_TITLE}},{key:"isRBRound",value:function(){return this.props.isActiveCurve()}},{key:"getHitRegion",value:function(){if(this.props.isActiveCurve()&&this.props.isCurveCw()){var e=this.renderdata.getCalculated(this.props,this.lastRenderEditScale).lineHeights[0];return new R.a(this.props.getLeft()-e,this.props.getTop()-e,this.props.getRight()+e,this.props.getBottom()+e)}return new R.a(this.props.getLeft(),this.props.getTop(),this.props.getRight(),this.props.getBottom())}},{key:"isTinyHandle",value:function(){return this.props.isActiveCurve()}},{key:"getFooterDistance",value:function(){return this.props.isActiveCurve()&&this.props.isCurveCw()?this.renderdata.getCalculated(this.props,this.lastRenderEditScale).lineHeights[0]*this.lastRenderEditScale*b.a.instance.zoomScale-10:0}},{key:"isLazyHandlerHandlePosition",value:function(e){return e===N.b.TOP_LEFT||e===N.b.TOP_RIGHT||e===N.b.BOTTOM_LEFT||e===N.b.BOTTOM_RIGHT}},{key:"getSmallPlusPos",value:function(){return this.props.isActiveCurve()&&this.renderdata.getCalculated(this.props,this.lastRenderEditScale).lineHeights.length>1?this.props.isCurveCw():void 0}},{key:"getResourceType",value:function(){return M.a.TEXT}},{key:"getEditingTextSelPosList",value:function(){var e=[],t=this.edit.startPos,n=this.edit.endPos;if(t.row===n.row&&0===n.col)return e;function i(t,n,i){for(var r=n;r<i;r++)e.push({row:t,col:r})}for(var r=t.row;r<=n.row;r++){if(r===n.row)i(r,t.row===n.row?t.col:0,n.col);else for(var a=r===t.row?t.col:0;a<this.props.getLine(r).chars.length;a++)e.push({row:r,col:a})}return e}},{key:"text",get:function(){return this.props.getText()},set:function(e){this.props.setText(e)}},{key:"templateText",get:function(){return this.props.templateText},set:function(e){this.props.templateText=e}}],[{key:"isResizeHandlerCrossDirection",value:function(e){switch(e){case N.b.TOP:case N.b.BOTTOM:case N.b.LEFT:case N.b.RIGHT:return!0;default:return!1}}}]),n}(C.e),F=function(e){function t(){return l()(this,t),d()(this,g()(t).apply(this,arguments))}return T()(t,e),t}(G)}).call(this,n(115))},,,,function(e,t,n){"use strict";var i=n(0),r=n.n(i),a=n(1),o=n.n(a),s=n(35),l=n.n(s),c=n(36),u=n.n(c),h=n(39),d=n.n(h),p=n(44),v=n.n(p),f=n(38),g=n.n(f),m=n(46),E=n.n(m),y=n(40),T=n.n(y),_=n(37),I=n.n(_),C=n(82),S=n(3),w=n(43),k=n(50),R=n(49),L=n(70),O=n(59),A=n(64),b=n(87),P=n(114),N=n(190),x=n(71),M=n(42),D=n(74),B=function(e){function t(e,n){var i;return l()(this,t),(i=d()(this,g()(t).call(this,e,n))).item=e,i}return T()(t,e),u()(t,[{key:"initSvgElementAttrs",value:function(){E()(g()(t.prototype),"initSvgElementAttrs",this).call(this),this.svgElement.setAttribute("preserveAspectRatio","none"),this.svgElement.setAttribute("width","100%"),this.svgElement.setAttribute("height","100%")}},{key:"clone",value:function(){var e=new t(this.item,this.originElement.cloneNode(!0)),n=this.imageElement.getAttributeNS(D.a.XLINK,"href");return e.setSvgImage(n),e}},{key:"makeChildElements",value:function(e,n){E()(g()(t.prototype),"makeChildElements",this).call(this,e,n);var i=this.item.getFrameColor();if(i){this.beforePhotoElement=L.a.getImageframeBeforePhotoAreaElement(n,i),this.photoAreaOriginElement=L.a.getImageframePhotoAreaElement(n,i),this.afterPhotoElement=L.a.getImageframeAfterPhotoAreaElement(n,i);var r=L.a.getFirstElementByOriginColor(n,i);if(r){var a="".concat(this.item.tbpeId,"_clip_").concat(S.StringUtil.random(10)),o="".concat(this.item.tbpeId,"_img_").concat(S.StringUtil.random(10));this.imageElement=document.createElementNS(D.a.SVG,"image"),this.imageElement.setAttribute("overflow","visible"),this.imageElement.id=o;var s=document.createElementNS(D.a.SVG,"use"),l=r.parentElement;if(l||(l=L.a.getParentElement(n,r)),l){l.insertBefore(s,r),l.removeChild(r);var c=document.createElementNS(D.a.SVG,"defs"),u=document.createElementNS(D.a.SVG,"clipPath");u.id=a,u.appendChild(r.cloneNode(!0)),c.appendChild(u),c.appendChild(this.imageElement),l.insertBefore(c,s),L.a.makeUnicornSvgElement(this.imageElement,this.item.getUniqueKey()),L.a.makeUnicornSvgElement(s,this.item.getUniqueKey()),L.a.makeUnicornSvgElement(c,this.item.getUniqueKey()),s.setAttribute("clip-path","url(#".concat(u.id,")")),s.setAttributeNS(D.a.XLINK,"href","#".concat(this.imageElement.id))}}}}},{key:"updatePosition",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];E()(g()(t.prototype),"updatePosition",this).call(this,e,n),n&&(this.svgElement.setAttribute("width","".concat(this.item.getWidth()*e,"px")),this.svgElement.setAttribute("height","".concat(this.item.getHeight()*e,"px")))}},{key:"setSvgImage",value:function(e){if(this.imageElement){var t=this.item.getPhotoPosition();this.imageElement.removeAttributeNS(D.a.XLINK,"href"),this.imageElement.removeAttribute("xlink:href"),e&&this.imageElement.setAttributeNS(D.a.XLINK,"href",e),this.imageElement.setAttribute("x","".concat(t.left,"px")),this.imageElement.setAttribute("y","".concat(t.top,"px")),this.imageElement.setAttribute("width","".concat(t.getWidth(),"px")),this.imageElement.setAttribute("height","".concat(t.getHeight(),"px"))}}},{key:"updateColor",value:function(){var e=this;this.item.props.getColorMap().forEach(function(t,n){L.a.setFillColorByOriginColor(e.svgElement,n,t),L.a.setFillColorByOriginColor(e.beforePhotoElement,n,t),L.a.setFillColorByOriginColor(e.afterPhotoElement,n,t)})}},{key:"getScaledSvgElement",value:function(e,t,n,i,r){var a=document.createElementNS(D.a.SVG,"svg");a.setAttribute("width","".concat(i,"px")),a.setAttribute("height","".concat(r,"px"));var o=document.createElementNS(D.a.SVG,"g");return a.appendChild(o),o.setAttribute("transform","scale(".concat(t,", ").concat(n,")")),o.appendChild(e.cloneNode(!0)),a}}]),t}(n(134).a),U=n(252),G=n(124),F=n(96);n.d(t,"b",function(){return V}),n.d(t,"a",function(){return H});var H,V=function(e){function t(e,n,i,r,a,o){var s,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,u=arguments.length>7&&void 0!==arguments[7]&&arguments[7],h=arguments.length>8&&void 0!==arguments[8]&&arguments[8],p=!(arguments.length>9&&void 0!==arguments[9])||arguments[9],f=!(arguments.length>10&&void 0!==arguments[10])||arguments[10],m=!(arguments.length>11&&void 0!==arguments[11])||arguments[11],E=!(arguments.length>12&&void 0!==arguments[12])||arguments[12];l()(this,t),s=d()(this,g()(t).call(this,e,n,i,r,a,o,c,u,h,p,f,m,E)),I()(v()(s),"DROP_IMAGE_PATH","/resources/image/imageframe_basic.png"),I()(v()(s),"DROP_IMAGE_KEY","imageframe_basic_png"),I()(v()(s),"isInit",!1),I()(v()(s),"svgScaleX",1),I()(v()(s),"svgScaleY",1),I()(v()(s),"imageSrcStatus",H.NONE),I()(v()(s),"originPhotoFlipHor",!1),I()(v()(s),"originPhotoFlipVer",!1),s.svgData=n;var y=s.data.svg;return L.a.makeUnicornSvgElement(y,s.svgUniqueKey),s.svgElements=new B(v()(s),y.cloneNode(!0)),s.svgElementForFrameColor=y,s.props.setChangePositionSetRevision(!1),s.innerPhotoItem=new k.e(S.StringUtil.random(),s.photoPosition?s.photoPosition.left:i,s.photoPosition?s.photoPosition.top:r,s.photoPosition?s.photoPosition.right:a,s.photoPosition?s.photoPosition.bottom:o,c,c,k.c.IMAGEFRAME,u,h,p,f,m,E),s.innerPhotoItem.props.setPhotoKey(s.DROP_IMAGE_KEY),s.innerPhotoItem.orgType=k.b.Photo,s.calcScale(),s}var n,i,a,s,c,h;return T()(t,e),u()(t,[{key:"makeProps",value:function(){return new P.b}},{key:"getFrameColor",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this.svgData.colorList[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var a=i.value;if(a.photoInColor)return a.color}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}return null}},{key:"isRequireLiveEdit",value:function(){return!0}},{key:"initFramePosition",value:function(){var e=this.svgElementForFrameColor.cloneNode(!0),t=this.getFrameColor();if(t){var n=L.a.getFirstElementByOriginColor(e,t);if(n.id="".concat(this.tbpeId).concat(S.StringUtil.random(10)),n){var i=this.svgData.maskData;this.photoPosition=new R.a(i.x,i.y,i.width+i.x,i.height+i.y)}}}},{key:"isUnsupportedLicense",value:function(){return G.b.isIclickSticker(this.innerPhotoItem.props.getPhotoKey())}},{key:"changePhoto",value:(h=o()(r.a.mark(function e(t,n,i,a,o){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return U.a.imgOriginSizeFinder.has(this.innerPhotoItem.tbpeId)&&U.a.imgOriginSizeFinder.delete(this.innerPhotoItem.tbpeId),this.lastPhotoRevision=-1,this.innerPhotoItem.orgType=n,this.innerPhotoItem.props.setPhotoKey(t),this.innerPhotoItem.skinRatioId=o,this.originPhotoFlipHor=i,this.originPhotoFlipVer=a,e.next=9,this.resetInnerPhotoItem();case 9:case"end":return e.stop()}},e,this)})),function(e,t,n,i,r){return h.apply(this,arguments)})},{key:"resetInnerPhotoItem",value:(c=o()(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t=this.innerPhotoItem.props).setBrightness(0),t.setSaturation(0),t.setLightness(0),t.setContrast(0),t.setTint(0),t.setColorTone(0),t.setTemperature(0),t.setBlur(0),t.setVignette(0),t.setFlipH(this.originPhotoFlipHor),t.setFlipV(this.originPhotoFlipVer),t.setGradationMaskDepth(0),t.setShadowColor("#000000"),t.setShadowAngle(0),t.setShadowAlpha(255),t.setShadowDistance(0),t.setShadowBlur(0),t.setOpacity(255),t.setPreset(""),this.isInit=!1,e.next=23,this.initPhoto();case 23:case"end":return e.stop()}},e,this)})),function(){return c.apply(this,arguments)})},{key:"initPhoto",value:(s=o()(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isInit){e.next=7;break}return e.next=3,this.loadPhoto();case 3:t=e.sent,this.initSize(t),this.lastPhotoRevision=-1,this.isInit=!0;case 7:case"end":return e.stop()}},e,this)})),function(){return s.apply(this,arguments)})},{key:"loadPhoto",value:(a=o()(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.innerPhotoItem.props.getPhotoKey(),O.b.hasData(t)||t!==this.DROP_IMAGE_KEY){e.next=4;break}return e.next=4,O.b.setUrlImage(t,this.DROP_IMAGE_PATH);case 4:return e.abrupt("return",O.b.getData(t));case 5:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)})},{key:"initSize",value:function(e){var t=this.svgData.width/this.svgData.height,n=e.width/e.height;t===n?(this.imageWidth=this.svgData.width,this.imageHeight=this.svgData.height):t>n?(this.imageWidth=this.svgData.width,this.imageHeight=this.imageWidth/n):(this.imageHeight=this.svgData.height,this.imageWidth=this.imageHeight*n),this.initInnerPhotoPosition()}},{key:"initInnerPhotoPosition",value:function(){var e=this.svgData.width/2-this.imageWidth/2,t=this.svgData.height/2-this.imageHeight/2,n=this.getPhotoPosition(!0);this.innerPhotoItem.setLTRBCoordinate(n);var i=new R.a(e,t,e+this.imageWidth,t+this.imageHeight);this.innerPhotoItem.itemPosition=i,this.innerPhotoItem.scale(this.svgScale),this.innerPhotoItem.move(this.props.getLeft(),this.props.getTop()),this.innerPhotoItem.move((n.getWidth()*this.svgScale*this.svgScaleX-this.innerPhotoItem.getWidth())/2,(n.getHeight()*this.svgScale*this.svgScaleY-this.innerPhotoItem.getHeight())/2),this.innerPhotoItem.props.setRotate(this.props.getRotate())}},{key:"scale",value:function(e){this.getLTRBCoordinate();return E()(g()(t.prototype),"scale",this).call(this,e),this.calcScale(),this.updateInnerPhotoPosition(),this}},{key:"getPhotoPosition",value:function(e){var t=new R.a;return e&&this.props.isFlipH()?(t.left=this.data.width-this.photoPosition.right,t.right=this.data.width-this.photoPosition.left):(t.left=this.photoPosition.left,t.right=this.photoPosition.right),e&&this.props.isFlipV()?(t.top=this.data.height-this.photoPosition.bottom,t.bottom=this.data.height-this.photoPosition.top):(t.top=this.photoPosition.top,t.bottom=this.photoPosition.bottom),t}},{key:"getPhotoPositionByFrameLTRB",value:function(e){var t=this.data.width,n=this.data.height,i=e.getWidth()/t,r=e.getHeight()/n,a=e.left,o=e.top,s=this.getPhotoPosition(!0),l=new R.a;l.left=s.left*i+a,l.top=s.top*r+o,l.right=s.right*i+a,l.bottom=s.bottom*r+o;var c=this.innerPhotoItem.props.getRotate(),u=l.getCenterPos(),h=e.getCenterPos(),d=R.b.calcLocationByRotate(u,h,c).sub(u);return l.move(d.x,d.y),l}},{key:"updateInnerPhotoPosition",value:function(){this.innerPhotoItem.props.setRotate(this.props.getRotate()),this.innerPhotoItem.setLTRBCoordinate(this.getPhotoPositionByFrameLTRB(this.getLTRBCoordinate()))}},{key:"beforeRender",value:(i=o()(r.a.mark(function e(n){var i,a,o,s,l,c,u,h,d,p,v,f,m,y,T,_,I,C,S,w,k;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(E()(g()(t.prototype),"beforeRender",this).call(this,n),!this.isResourceLoadFail()){e.next=3;break}return e.abrupt("return");case 3:if(this.lastPhotoRevision===this.innerPhotoItem.props.getRevision()||!this.innerPhotoItem.props.getPhotoKey()){e.next=43;break}return e.next=6,this.initPhoto();case 6:return i=this.innerPhotoItem,a=i.getImageElement(),o=a.width,s=a.height,l=i.props.getWidth()/i.itemPosition.getWidth(),c=i.props.getHeight()/i.itemPosition.getHeight(),u=o*l,h=s*c,(d=A.a.createCanvas()).width=u,d.height=h,p=d.getContext("2d"),v=this.props.isFlipH()?-1:1,f=this.props.isFlipV()?-1:1,p.save(),p.translate(d.width/2,d.height/2),p.scale(v,f),p.translate(-d.width/2,-d.height/2),e.next=26,i.render(p,1);case 26:p.restore(),m=this.getWidth()*n,y=this.getHeight()*n,T=m/this.svgData.width,_=y/this.svgData.height,I=Math.ceil(this.photoPosition.getWidth()*T),C=Math.ceil(this.photoPosition.getHeight()*_),S=F.a.USER_PHOTO_SIZE/Math.max(I,C),(w=A.a.createCanvas()).width=I*S,w.height=C*S,(k=w.getContext("2d")).drawImage(d,0,0,w.width,w.height),this.src=w.toDataURL(),this.imageData=k.getImageData(0,0,w.width,w.height),this.svgElements.setSvgImage(M.a.isCropMode()?"":this.src),this.imageSrcStatus=H.RESET_SRC_STABLE;case 43:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"render",value:(n=o()(r.a.mark(function e(t,n,i){var a,o,s,l,c,u,h,d,p,v,f,g,m,E,y,T,_,I,C;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isResourceLoadFail()){e.next=3;break}return this.renderResourceLoadFailView(t,n),e.abrupt("return");case 3:return this.svgElements.updateColor(),a=this.getWidth()*n,o=this.getHeight()*n,s=a/2,l=o/2,c=this.props.isFlipH()?-1:1,u=this.props.isFlipV()?-1:1,t.save(),t.globalAlpha=this.props.getOpacity()/255,t.translate(s,l),t.scale(c,u),t.translate(-s,-l),(h=A.a.createCanvas()).width=this.getWidth()*n,h.height=this.getHeight()*n,d=h.getContext("2d"),p=Math.ceil(this.getWidth()*n),v=Math.ceil(this.getHeight()*n),f=a/this.svgData.width,g=o/this.svgData.height,e.next=25,N.a.drawSVG(d,this.svgElements.getScaledSvgElement(this.svgElements.beforePhotoElement,f,g,a,o).outerHTML,0,0,a,o);case 25:return(m=A.a.createCanvas()).width=p,m.height=v,E=m.getContext("2d"),e.next=31,N.a.drawSVG(E,this.svgElements.getScaledSvgElement(this.svgElements.photoAreaOriginElement,f,g,a,o).outerHTML,0,0,a,o);case 31:return E.globalCompositeOperation="source-in",(y=A.a.createCanvas()).width=this.imageData.width,y.height=this.imageData.height,y.getContext("2d").putImageData(this.imageData,0,0),T=this.photoPosition.left*f,_=this.photoPosition.top*g,I=Math.ceil(this.photoPosition.getWidth()*f),C=Math.ceil(this.photoPosition.getHeight()*g),E.drawImage(y,T,_,I,C),d.drawImage(m,0,0),e.next=45,N.a.drawSVG(d,this.svgElements.getScaledSvgElement(this.svgElements.afterPhotoElement,f,g,a,o).outerHTML,0,0,a,o);case 45:t.drawImage(h,0,0,t.canvas.width,t.canvas.height),t.restore();case 47:case"end":return e.stop()}},e,this)})),function(e,t,i){return n.apply(this,arguments)})},{key:"move",value:function(e,n){E()(g()(t.prototype),"move",this).call(this,e,n),this.innerPhotoItem.move(e,n),this.innerPhotoItem.props.updateRevision(!1)}},{key:"flipH",value:function(e){E()(g()(t.prototype),"flipH",this).call(this,e),this.updateInnerPhotoPosition(),this.innerPhotoItem.flipH(!1)}},{key:"flipV",value:function(e){E()(g()(t.prototype),"flipV",this).call(this,e),this.updateInnerPhotoPosition(),this.innerPhotoItem.flipV(!1)}},{key:"setLTRBCoordinate",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0,r=e.getWidth(),a=this.svgData.height/this.svgData.width*r;i===b.b.TOP||i===b.b.TOP_LEFT||i===b.b.TOP_RIGHT?e.top=e.bottom-a:e.bottom=e.top+a,E()(g()(t.prototype),"setLTRBCoordinate",this).call(this,e,n,i),this.updateInnerPhotoPosition(),this.calcScale()}},{key:"clone",value:function(){var e=new t(S.StringUtil.random(),this.svgData,this.props.getLeft(),this.props.getTop(),this.props.getRight(),this.props.getBottom(),this.props.getRotate(),this.props.isFlipH(),this.props.isFlipV(),this.props.isCanUserSelect(),this.props.isCanUserMove(),this.props.isCanUserResize(),this.props.isCanUserDel());return e.photoPosition=this.photoPosition,e.originPhotoFlipHor=this.originPhotoFlipHor,e.originPhotoFlipVer=this.originPhotoFlipVer,e.setProps(this.props.clone()),e.imageWidth=this.imageWidth,e.imageHeight=this.imageHeight,e.lastPhotoRevision=-1,e.isInit=!0,e.innerPhotoItem.props=this.innerPhotoItem.props.clone(),e.innerPhotoItem.orgType=this.innerPhotoItem.orgType,e.innerPhotoItem.setLTRBCoordinate(this.innerPhotoItem.getLTRBCoordinate()),e.innerPhotoItem.itemPosition=this.innerPhotoItem.itemPosition,this.setCloneItemDefaultAttr(e),e}},{key:"getItemType",value:function(){return x.a.SVG_IMAGE_FRAME}},{key:"getHeaderTitle",value:function(){return w.a.TOOLS_HEADER_IMAGEFRAME_TITLE}},{key:"getUsedColor",value:function(){var e=E()(g()(t.prototype),"getUsedColor",this).call(this);return e.has(this.getFrameColor())&&e.delete(this.getFrameColor()),e}},{key:"isChangeContentsStatus",value:function(e){return E()(g()(t.prototype),"isChangeContentsStatus",this).call(this,e)||this.innerPhotoItem.props.getRevision()!==this.lastPhotoRevision}},{key:"getEditableOriginColors",value:function(){var e=E()(g()(t.prototype),"getEditableOriginColors",this).call(this),n=this.getFrameColor();if(n){var i=e.indexOf(n);i>=0&&e.splice(i,1)}return e}},{key:"isDefaultImage",value:function(){return this.innerPhotoItem.props.getPhotoKey()===this.DROP_IMAGE_KEY}},{key:"getImageSrcStatus",value:function(){return this.imageSrcStatus}},{key:"calcScale",value:function(){var e=this.getWidth()/this.data.width,t=this.getHeight()/this.data.height;this.svgScale=Math.min(e,t),this.svgScaleX=e/this.svgScale,this.svgScaleY=t/this.svgScale}},{key:"isChangableWidth",value:function(){return!1}},{key:"isChangableHeight",value:function(){return!1}},{key:"getThumbString",value:function(e){return this.getSvgString(e/this.getWidth())}},{key:"getDisabledResourcePreviewKey",value:function(){return this.isResourceLoadFail()?E()(g()(t.prototype),"getDisabledResourcePreviewKey",this).call(this):this.innerPhotoItem.getDisabledResourcePreviewKey()}},{key:"isValid",value:function(){return E()(g()(t.prototype),"isValid",this).call(this)&&this.photoPosition&&this.photoPosition.getWidth()>0&&this.photoPosition.getHeight()>0}}]),t}(C.a);!function(e){e.NONE="NONE",e.SET_SRC="SET_SRC",e.SET_SRC_STABLE="SET_SRC_STABLE",e.RESET_SRC="RESET_SRC",e.RESET_SRC_STABLE="RESET_SRC_STABLE"}(H||(H={}))},function(e,t,n){"use strict";var i,r,a,o,s,l;n.d(t,"f",function(){return i}),n.d(t,"d",function(){return r}),n.d(t,"c",function(){return a}),n.d(t,"e",function(){return o}),n.d(t,"b",function(){return s}),n.d(t,"a",function(){return l}),function(e){e.NONE="none",e.SAFETY_AREA="safety_area",e.PRINT_AREA="print_area",e.AVOID_AREA="avoid_area",e.FONT="font",e.DPI="dpi",e.OVERFLOW_SAFETY_ZONE="overflow_safety_zone",e.LOW_RES_IMAGE="low_res_image",e.MIN_FONT_SIZE="min_font_size",e.MIN_ELEMENT_SIZE="min_element_size",e.OVERLAP_POST_MANU="overlap_post_manu",e.UNINPUT_TEXT="uninput_text"}(i||(i={})),function(e){e.NO_SELECTION="no_selection",e.PLACARD="placard",e.BANNER="banner",e.REAL_PRINT="real_print",e.NAME_CARD="name_card",e.POSTER="poster",e.FLYER="flyer"}(r||(r={})),function(e){e.NONE="none",e.BAR="bar",e.METAL_RING="metal_ring",e.ROD_SEWING="rod_sewing",e.SURROUND_SEWING="surround_sewing",e.EDGE_ROUNDING="edge_rounding"}(a||(a={})),function(e){e.NONE="none",e.WARNING="warning",e.CAUTION="caution",e.RECOMMEND="recommend",e.HOLD="hold"}(o||(o={})),function(e){e.SELECT="SELECT",e.HOVER="HOVER",e.REMOVE="REMOVE",e.CHANGE_POSITION="CHANGE_POSITION",e.MOVE_OTHER_PAGE="MOVE_OTHER_PAGE"}(s||(s={})),function(e){e.TOTAL="total",e.WARNING="warning",e.CAUTION="caution",e.RECOMMEND="recommend",e.HOLD="hold",e.UNHOLD="unhold"}(l||(l={}))},,function(e,t,n){"use strict";n.d(t,"b",function(){return S}),n.d(t,"g",function(){return w}),n.d(t,"c",function(){return k}),n.d(t,"d",function(){return R}),n.d(t,"e",function(){return L}),n.d(t,"f",function(){return O}),n.d(t,"a",function(){return A});var i=n(46),r=n.n(i),a=n(39),o=n.n(a),s=n(38),l=n.n(s),c=n(44),u=n.n(c),h=n(40),d=n.n(h),p=n(35),v=n.n(p),f=n(36),g=n.n(f),m=n(37),E=n.n(m),y=n(41),T=n(3),_=n(57),I=n(42),C=n(12),S=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";v()(this,e),E()(this,"itemRows",[]),this.typeKey=t,this.clazz=n}return g()(e,[{key:"render",value:function(){var e=document.createElement("div");e.setAttribute("data-type",this.typeKey),e.className="".concat(y.a.ITEM_TOOLS," ").concat(this.clazz);var t=document.createElement("ul");t.className=y.a.TOOLS_CONTENTS_WRAPPER,e.appendChild(t);var n=null,i=null;this.itemRows.forEach(function(e){null==n&&e.scrollMaxHeight>0&&(n=document.createElement("div"),i=new _.a(!1,!0,e.scrollMaxHeight+"px")),n?n.appendChild(e.render()):t.appendChild(e.render())}),n&&i&&t.appendChild(i.render(n));var r=document.createElement("footer");r.className=y.a.TOOLS_FOOTER;var a=document.createElement("button");a.setAttribute("type","button");var o=document.createElement("i");o.innerText="insert_emoticon",a.appendChild(o),r.appendChild(a),a.style.visibility="hidden";var s=document.createElement("input");return s.setAttribute("type","text"),r.appendChild(s),e.appendChild(r),this.wrap=e,this.styleBox=s,e}}]),e}(),w=function(){function e(t){v()(this,e),E()(this,"rendererList",[]),E()(this,"active",!0),E()(this,"isFlex",!1),E()(this,"hasBorderTop",!1),E()(this,"hasBorderBottom",!1),E()(this,"hasMarginTop",!1),E()(this,"hasMarginBottom",!1),E()(this,"customClassList",[]),E()(this,"scrollMaxHeight",0),E()(this,"rowVisible",!0),this.titleKey=t}return g()(e,[{key:"render",value:function(){var e=this.wrap=document.createElement("li");if(e.className=this.getStyleClass(y.a.TOOLS_ROW).toLowerCase(),this.titleKey){var t=document.createElement("label");t.className=y.a.ROW_TITLE,t.appendChild(document.createTextNode(T.CRM.get(this.titleKey)||"")),e.appendChild(t)}return this.rendererList.forEach(function(t){return e.appendChild(t.render())}),this.customStyle&&e.setAttribute("style",this.customStyle),e}},{key:"getStyleClass",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t=t.concat(this.customClassList),this.isFlex&&t.push(y.a.ROW_FLEX),this.hasBorderTop&&t.push(y.a.ROW_BORDER_TOP),this.hasBorderBottom&&t.push(y.a.ROW_BORDER_BOTTOM),this.hasMarginTop&&t.push(y.a.ROW_MARGIN_TOP),this.hasMarginBottom&&t.push(y.a.ROW_MARGIN_BOTTOM),t.join(" ")}},{key:"add",value:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return n.forEach(function(t){return e.rendererList.push(t)}),this}},{key:"addCustomClass",value:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return n.forEach(function(t){return e.customClassList.push(t)}),this}},{key:"removeCustomClass",value:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return n.forEach(function(t){var n=e.customClassList.indexOf(t);-1!==n&&e.customClassList.splice(n,1)}),this}},{key:"setFlex",value:function(){return this.isFlex=!0,this}},{key:"setBorderTop",value:function(){return this.hasBorderTop=!0,this}},{key:"setBorderBottom",value:function(){return this.hasBorderBottom=!0,this}},{key:"setMarginTop",value:function(){return this.hasMarginTop=!0,this}},{key:"setMarginBottom",value:function(){return this.hasMarginBottom=!0,this}},{key:"setScrollStart",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.scrollMaxHeight=e,this}},{key:"addCustomStyle",value:function(e){return this.customStyle=e,this}},{key:"updateUI",value:function(e){this.active=!0===e}}]),e}(),k=function(e){function t(e,n,i,r){var a;return v()(this,t),a=o()(this,l()(t).call(this,e)),E()(u()(a),"rendered",!1),a.titleKey=e,a.listener=n,a.subTitle=i,a.forceVisible=r,a.makeElement(),a}return d()(t,e),g()(t,[{key:"makeElement",value:function(){var e=this;this.element=document.createElement("li"),this.btnPrev=Object(C.setToolsIcon)(this.element,C.ToolsIcon.GREATER_THAN,!0,"left",180);var t="accordionVisible"+T.StringUtil.random(25),n=document.createElement("input");this.accordionVisibleCheckbox=n,n.type="checkbox",n.className=y.a.ACCORDION_VISIBLE,n.id=t,null!=this.forceVisible&&(n.checked=this.forceVisible);var i=this.subTitle?" - "+this.subTitle:"",r=document.createElement("label");if(r.appendChild(document.createTextNode(T.CRM.get(this.titleKey)+i||"")),r.setAttribute("for",t),r.className=y.a.ACCORDION_TITLE,this.element.appendChild(n),this.element.appendChild(r),this.listener){var a="labelUniqueActive"+T.StringUtil.random(27);this.accordionActiveCheckbox=document.createElement("input"),this.accordionActiveCheckbox.className=y.a.ACCORDION_ACTIVE,this.accordionActiveCheckbox.type="checkbox",this.accordionActiveCheckbox.id=a,this.element.appendChild(this.accordionActiveCheckbox),this.accordionActiveCheckbox.addEventListener("change",function(){e.accordionVisibleCheckbox.checked=e.accordionActiveCheckbox.checked,e.listener(e.accordionActiveCheckbox.checked)});var o=document.createElement("label");o.id=t,o.setAttribute("for",a),this.boxOn=Object(C.setToolsIcon)(o,C.ToolsIcon.CHECK),this.element.appendChild(o)}else Object(C.setToolsIcon)(r,C.ToolsIcon.GREATER_THAN,!0);var s=document.createElement("div");s.className=y.a.ACCORDION_LIST;var l=document.createElement("div");l.className=y.a.ACCORDION_CONTENTS_WRAP,this.contestsWrap=l,s.appendChild(l),this.element.appendChild(s)}},{key:"setPrevCallback",value:function(e){this.prevCallback=e}},{key:"render",value:function(){var e=this;return this.rendered=!0,this.prevCallback&&this.btnPrev.addEventListener("click",this.prevCallback),this.element.className=this.getStyleClass(y.a.TOOLS_ACCORDION_ROW),this.accordionVisibleCheckbox.addEventListener("change",function(){e.accordionActiveCheckbox&&(e.accordionActiveCheckbox.checked=e.accordionVisibleCheckbox.checked,e.listener(e.accordionActiveCheckbox.checked))}),this.rendererList.forEach(function(t){return e.contestsWrap.appendChild(t.render())}),this.element}},{key:"updateUI",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.rendered){if(!0===t){var n=!0,i=!1,r=void 0;try{for(var a,o=this.element.children[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;s.style.opacity="0.3",s.style.cursor="default"}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}}else{var l=!0,c=!1,u=void 0;try{for(var h,d=this.element.children[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){var p=h.value;p.style.opacity="",p.style.cursor="pointer"}}catch(e){c=!0,u=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}}if(this.accordionActiveCheckbox&&this.accordionVisibleCheckbox){var v=!0===e;this.accordionActiveCheckbox.checked=v,this.accordionVisibleCheckbox.checked=v}}}},{key:"appendElement",value:function(e){return this.element.appendChild(e),this}}]),t}(w),R=function(e){function t(e,n){var i;return v()(this,t),i=o()(this,l()(t).call(this)),E()(u()(i),"rowMap",new Map),i.accordionRow=new k(e,null,null,!0).setScrollStart(250).addCustomClass(n).setBorderBottom(),i.buttonWrap=document.createElement("div"),i.buttonWrap.className=y.a.TOOLS_SECTION_BUTTONS_WRAP,i}return d()(t,e),g()(t,[{key:"getSectionRowWrap",value:function(e){if(this.rowMap.get(e)){var t=this.rowMap.get(e).rowWrap;return t.style.display="block",t}return null}},{key:"setSectionRowWrap",value:function(e){if(this.rowMap.get(e)){var t=this.rowMap.get(e);t.rowWrap&&!this.accordionRow.contestsWrap.contains(t.rowWrap)&&(this.accordionRow.contestsWrap.appendChild(t.rowWrap),t.rowWrap.style.display=t.rowVisible?"block":"none")}}},{key:"render",value:function(){var e=this;return this.accordionRow.render(),this.accordionRow.contestsWrap.appendChild(this.buttonWrap),this.rowMap.forEach(function(t,n){var i=document.createElement("div");i.classList.add(y.a.ROW_WRAP,n),t.rows.forEach(function(e){i.appendChild(e.render())}),i.style.display=t.rowVisible?"block":"none",e.accordionRow.contestsWrap.appendChild(i),t.rowWrap=i}),this.addEventListener(),this.accordionRow.element}},{key:"updateAccordionUI",value:function(){r()(l()(t.prototype),"updateUI",this).call(this,!0),this.accordionRow.updateUI(!0),this.rowMap.forEach(function(e){e.rowWrap&&(I.a.getEnv().adminMode?e.rowWrap.classList.add(y.a.ADMIN_MODE):e.rowWrap.classList.remove(y.a.ADMIN_MODE))})}},{key:"addEventListener",value:function(){var e=this;$(this.buttonWrap).on("click",".".concat(y.a.TOOLS_SECTION_BUTTON),function(n){$(e.buttonWrap.childNodes).addClass(y.a.DISABLE);var i=n.currentTarget;i.classList.remove(y.a.DISABLE);var r=i.getAttribute(t.SECTION_KEY);e.rowMap.forEach(function(e,t){var n=t===r;e.rowVisible=n,e.rowWrap.style.display=n?"block":"none"})})}},{key:"addSection",value:function(e,n,i,r){var a=0===this.rowMap.size,o=t.makeButton(i,r);o.setAttribute(t.SECTION_KEY,n),a||o.classList.add(y.a.DISABLE),this.rowMap.set(n,{rowVisible:a,rows:e}),this.buttonWrap.appendChild(o)}},{key:"setRowsVisible",value:function(e){this.rowVisible=e}}],[{key:"makeButton",value:function(e,t){var n=document.createElement("button");n.className=y.a.TOOLS_SECTION_BUTTON;var i=document.createElement("span");return i.innerText=T.CRM.get(e),n.appendChild(i),Object(C.setToolsIcon)(n,t),n}}]),t}(w);E()(R,"SECTION_KEY","sectionKey");var L=function(e){function t(e,n){var i;return v()(this,t),(i=o()(this,l()(t).call(this,e))).listener=n,i}return d()(t,e),g()(t,[{key:"setPrevCallback",value:function(e){this.prevCallback=e}},{key:"render",value:function(){var e=this;this.element=document.createElement("li"),this.element.className=this.getStyleClass(y.a.TOOLS_ACCORDION_ROW),this.btnPrev=Object(C.setToolsIcon)(this.element,C.ToolsIcon.GREATER_THAN,!0,"left",180),this.prevCallback&&this.btnPrev.addEventListener("click",this.prevCallback);var t="accordionVisible"+T.StringUtil.random(25),n=document.createElement("input");this.accordionVisibleCheckbox=n,n.type="checkbox",n.className=y.a.ACCORDION_VISIBLE,n.id=t;var i=document.createElement("label");if(i.appendChild(document.createTextNode(T.CRM.get(this.titleKey)||"")),i.setAttribute("for",t),i.className=y.a.ACCORDION_TITLE,this.element.appendChild(n),this.element.appendChild(i),n.addEventListener("change",function(){e.accordionActiveCheckbox&&(e.accordionActiveCheckbox.checked=n.checked,e.listener(e.accordionActiveCheckbox.checked))}),this.listener){var r="labelUniqueActive"+T.StringUtil.random(27);this.accordionActiveCheckbox=document.createElement("input"),this.accordionActiveCheckbox.className=y.a.ACCORDION_ACTIVE,this.accordionActiveCheckbox.type="checkbox",this.accordionActiveCheckbox.id=r,this.element.appendChild(this.accordionActiveCheckbox),this.accordionActiveCheckbox.addEventListener("change",function(){n.checked=e.accordionActiveCheckbox.checked,e.listener(e.accordionActiveCheckbox.checked)});var a=document.createElement("label");a.id=t,a.setAttribute("for",r),this.element.appendChild(a),Object(C.setToolsIcon)(a,C.ToolsIcon.CHECK)}return this.rendererList.forEach(function(t){var n=t.render();e.element.appendChild(n)}),this.element}},{key:"updateUI",value:function(e){if(this.accordionActiveCheckbox&&this.accordionVisibleCheckbox){var t=!0===e;this.accordionActiveCheckbox.checked=t,this.accordionVisibleCheckbox.checked=t}}}]),t}(w),O=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:49,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.01;v()(this,e),E()(this,"rendererList",[]),E()(this,"customClassList",[]),E()(this,"rowVisible",!0),this.widthPercent=t,this.grow=n}return g()(e,[{key:"render",value:function(){var e=this;return this.element=document.createElement("div"),this.element.className=this.getStyleClass(y.a.TOOLS_COLUMN).toLowerCase(),this.widthPercent&&(this.element.style.flexBasis=this.widthPercent+"%"),this.grow&&(this.element.style.flexGrow=""+this.grow),this.rendererList.forEach(function(t){return e.element.appendChild(t.render())}),this.element}},{key:"add",value:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return n.forEach(function(t){return e.rendererList.push(t)}),this}},{key:"addCustomClass",value:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return n.forEach(function(t){return e.customClassList.push(t)}),this}},{key:"getStyleClass",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.concat(this.customClassList).join(" ")}}]),e}(),A=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.createElement("div"),n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];v()(this,e),this.element=t,this.rowVisible=n}return g()(e,[{key:"render",value:function(){return this.element}}]),e}()},,function(e,t,n){"use strict";var i;n.d(t,"a",function(){return i}),function(e){e.SINGLE="ITEM_SINGLE",e.GROUP="ITEM_GROUP",e.TEXT="ITEM_TEXT",e.STICKER="ITEM_STICKER",e.PHOTO="ITEM_PHOTO",e.CALENDAR="ITEM_CALENDAR",e.GRID="ITEM_GRID",e.SVG_BASIC="ITEM_SVG_BASIC",e.SVG_SHAPE="ITEM_SVG_SHAPE",e.SVG_GRAPHIC="ITEM_SVG_GRAPHIC",e.SVG_IMAGE_FRAME="ITEM_SVG_IMAGE_FRAME",e.ITEM_SVG_GRAPHIC_SEC="ITEM_SVG_GRAPHIC_SEC",e.NONE=""}(i||(i={}))},,,function(e,t,n){"use strict";var i;n.d(t,"a",function(){return i}),function(e){e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink"}(i||(i={}))},function(e,t,n){"use strict";var i,r=n(0),a=n.n(r),o=n(1),s=n.n(o),l=n(35),c=n.n(l),u=n(36),h=n.n(u),d=n(39),p=n.n(d),v=n(44),f=n.n(v),g=n(38),m=n.n(g),E=n(46),y=n.n(E),T=n(40),_=n.n(T),I=n(37),C=n.n(I),S=n(51),w=n(116),k=function(){function e(t){c()(this,e),this.gridItem=t}return h()(e,[{key:"mergeCells",value:function(e){this.splitCells(e);var t=this.gridItem.positionTool.getRectCells(e),n=t[0][0],i=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var l=o.value,c=!0,u=!1,h=void 0;try{for(var d,p=l[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){var v=d.value;if(n!==v&&v.innerText){var f=n.textProps.getLineLength()-1,g={row:f,col:n.textProps.getLine(f).chars.length},m=(n.innerText?"\n":"")+v.innerText;n.textProps.insertText(g,m),v.textProps.setText("")}v.merged(e)}}catch(e){u=!0,h=e}finally{try{c||null==p.return||p.return()}finally{if(u)throw h}}}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}n.pushChildCells(t)}},{key:"splitCells",value:function(e){var t=this.gridItem.positionTool.getRectCells(e),n=!0,i=!1,r=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,l=!0,c=!1,u=void 0;try{for(var h,d=s[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){var p=h.value;p.cellType===w.c.MASTER?this.splitCell(p):p.splited()}}catch(e){c=!0,u=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}}},{key:"splitCell",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,a=e.getChildCells()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){r.value!==e&&e.splited()}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}e.clearChildCell(),e.cellType=w.c.NONE}}]),e}(),R=function(){function e(t){c()(this,e),this.gridItem=t,this.mergeTool=new k(t)}return h()(e,[{key:"insertCell",value:function(e,t){var n=new w.b(this.gridItem);this.gridItem.cells[e][t]=n,n.init()}},{key:"deleteCell",value:function(e,t){var n,i=(n="number"==typeof e?this.gridItem.cells[e][t]:e).row,r=n.col;this.gridItem.cells[i][r]=null}},{key:"insertRow",value:function(e){this.gridItem.rows.splice(e,0,new w.d(this.gridItem,w.e.ROW));var t=[];t.length=this.gridItem.col,this.gridItem.cells.splice(e,0,t);for(var n=0;n<this.gridItem.col;n++)this.insertCell(e,n)}},{key:"insertCol",value:function(e){this.gridItem.cols.splice(e,0,new w.d(this.gridItem,w.e.COL));for(var t=0;t<this.gridItem.row;t++)this.gridItem.cells[t].splice(e,0,null),this.insertCell(t,e)}},{key:"insertRowWithStyle",value:function(e,t){for(var n=this.gridItem.rows[e].thickness,i=[],r=0;r<this.gridItem.col;r++)i.push(this.gridItem.cells[e][r]);this.insertRow(t),this.gridItem.rows[t].thickness=n;for(var a=0;a<this.gridItem.col;a++){var o=this.gridItem.cells[t][a],s=i[a];o.assignCellStyle(s),o.assignFontStyle(s),o.assignBorderStyle(s),o.innerText="",o.synchronizeBorder(o.getBorder(w.a.TOP)),o.synchronizeBorder(o.getBorder(w.a.BOTTOM))}}},{key:"insertColWithStyle",value:function(e,t){for(var n=this.gridItem.cols[e].thickness,i=[],r=0;r<this.gridItem.row;r++)i.push(this.gridItem.cells[r][e]);this.insertCol(t),this.gridItem.cols[t].thickness=n;for(var a=0;a<this.gridItem.row;a++){var o=this.gridItem.cells[a][t],s=i[a];o.assignCellStyle(s),o.assignFontStyle(s),o.assignBorderStyle(s),o.synchronizeBorder(o.getBorder(w.a.LEFT)),o.synchronizeBorder(o.getBorder(w.a.RIGHT))}}},{key:"insertRowWithRow",value:function(e,t,n){if(t.length!==this.gridItem.col)throw new Error("Row Delete RollBack Error. DeletedCells Count: ".concat(t.length," Grid's Col: ").concat(this.gridItem.col));this.gridItem.rows.splice(n,0,e),this.gridItem.cells.splice(n,0,t);var i=!0,r=!1,a=void 0;try{for(var o,s=this.gridItem.cells[n][Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var l=o.value;l.synchronizeBorder(l.getBorder(w.a.TOP)),l.synchronizeBorder(l.getBorder(w.a.BOTTOM))}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}}},{key:"insertColWithCol",value:function(e,t,n){if(t.length!==this.gridItem.row)throw new Error("Col Delete RollBack Error. DeletedCells Count: ".concat(t.length," Grid's Row: ").concat(this.gridItem.row));this.gridItem.cols.splice(n,0,e);for(var i=0;i<this.gridItem.row;i++)this.gridItem.cells[i].splice(n,0,t[i]);var r=!0,a=!1,o=void 0;try{for(var s,l=this.gridItem.cells[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var c=s.value[n];c.synchronizeBorder(c.getBorder(w.a.LEFT)),c.synchronizeBorder(c.getBorder(w.a.RIGHT))}}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}}},{key:"deleteRow",value:function(e){var t=this.gridItem.cells[e],n=!0,i=!1,r=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;this.deleteCell(s)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}if(this.gridItem.cells.splice(e,1),this.gridItem.rows.splice(e,1),this.gridItem.rows.length>e){var l=!0,c=!1,u=void 0;try{for(var h,d=this.gridItem.cells[e][Symbol.iterator]();!(l=(h=d.next()).done);l=!0){var p=h.value;p.synchronizeBorder(p.getBorder(w.a.TOP)),p.synchronizeBorder(p.getBorder(w.a.BOTTOM))}}catch(e){c=!0,u=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}}}},{key:"deleteCol",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,a=this.gridItem.cells[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value,s=o[e];this.deleteCell(s),o.splice(e,1)}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}if(this.gridItem.cols.splice(e,1),this.gridItem.cols.length>e){var l=!0,c=!1,u=void 0;try{for(var h,d=this.gridItem.cells[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){var p=h.value[e];p.synchronizeBorder(p.getBorder(w.a.LEFT)),p.synchronizeBorder(p.getBorder(w.a.RIGHT))}}catch(e){c=!0,u=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}}}},{key:"synchronizeCells",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this.gridItem.cells[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var a=i.value,o=!0,s=!1,l=void 0;try{for(var c,u=a[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){c.value.clearChildCell()}}catch(e){s=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(s)throw l}}}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}for(var h=this.gridItem.row-1;h>=0;h--)for(var d=this.gridItem.col-1;d>=0;d--){var p=this.gridItem.cells[h][d];if(p.cellType===w.c.SLAVE)p.masterCell.pushChildCell(p)}var v=!0,f=!1,g=void 0;try{for(var m,E=this.gridItem.cells[Symbol.iterator]();!(v=(m=E.next()).done);v=!0){var y=m.value,T=!0,_=!1,I=void 0;try{for(var C,S=y[Symbol.iterator]();!(T=(C=S.next()).done);T=!0){var k=C.value;k.cellType===w.c.MASTER&&this.mergeTool.mergeCells(k.childCellsPos)}}catch(e){_=!0,I=e}finally{try{T||null==S.return||S.return()}finally{if(_)throw I}}}}catch(e){f=!0,g=e}finally{try{v||null==E.return||E.return()}finally{if(f)throw g}}}}]),e}(),L=n(42),O=function(){function e(t){c()(this,e),this.gridItem=t}return h()(e,[{key:"getCellbyAdjustedOffset",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.gridItem.lastRenderEditScale,i=!0,r=!1,a=void 0;try{for(var o,s=this.gridItem.cells[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var l=o.value,c=!0,u=!1,h=void 0;try{for(var d,p=l[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){var v=d.value;if(v.doHitTest(e,t,n))return v}}catch(e){u=!0,h=e}finally{try{c||null==p.return||p.return()}finally{if(u)throw h}}}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return null}},{key:"validateBoundPos",value:function(e){var t={row:Math.min(e.startPos.row,e.endPos.row),col:Math.min(e.startPos.col,e.endPos.col)},n={row:Math.max(e.startPos.row,e.endPos.row),col:Math.max(e.startPos.col,e.endPos.col)},i={startPos:t,endPos:n},r=this.getRectCells(i),a=!0,o=!1,s=void 0;try{for(var l,c=r[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var u=l.value,h=!0,d=!1,p=void 0;try{for(var v,f=u[Symbol.iterator]();!(h=(v=f.next()).done);h=!0){var g=v.value;g.cellType===w.c.MASTER?(t.row=Math.min(t.row,g.childCellsPos.startPos.row),t.col=Math.min(t.col,g.childCellsPos.startPos.col),n.row=Math.max(n.row,g.childCellsPos.endPos.row),n.col=Math.max(n.col,g.childCellsPos.endPos.col)):g.cellType===w.c.SLAVE&&(t.row=Math.min(t.row,g.masterCell.childCellsPos.startPos.row),t.col=Math.min(t.col,g.masterCell.childCellsPos.startPos.col),n.row=Math.max(n.row,g.masterCell.childCellsPos.endPos.row),n.col=Math.max(n.col,g.masterCell.childCellsPos.endPos.col))}}catch(e){d=!0,p=e}finally{try{h||null==f.return||f.return()}finally{if(d)throw p}}}}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}return this.isCellsPosEqual(i,e)?e:this.validateBoundPos(i)}},{key:"getCellsPos",value:function(e,t,n,i){e-=this.gridItem.props.getLeft()*this.gridItem.lastRenderEditScale,t-=this.gridItem.props.getTop()*this.gridItem.lastRenderEditScale,n-=this.gridItem.props.getLeft()*this.gridItem.lastRenderEditScale,i-=this.gridItem.props.getTop()*this.gridItem.lastRenderEditScale,e>this.gridItem.getGridWidth(this.gridItem.lastRenderEditScale)?e=this.gridItem.getGridWidth(this.gridItem.lastRenderEditScale):e<0&&(e=0),t>this.gridItem.getGridHeight(this.gridItem.lastRenderEditScale)?t=this.gridItem.getGridHeight(this.gridItem.lastRenderEditScale):t<0&&(t=0),n>this.gridItem.getGridWidth(this.gridItem.lastRenderEditScale)?n=this.gridItem.getGridWidth(this.gridItem.lastRenderEditScale):n<0&&(n=0),i>this.gridItem.getGridHeight(this.gridItem.lastRenderEditScale)?i=this.gridItem.getGridHeight(this.gridItem.lastRenderEditScale):i<0&&(i=0);var r=this.getCellbyAdjustedOffset(e,t),a=this.getCellbyAdjustedOffset(n,i);return this.validateBoundPos({startPos:{row:r.row,col:r.col},endPos:{row:a.row,col:a.col}})}},{key:"getCell",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.gridItem.lastRenderEditScale,i=L.a.getRenderPageOffset(e*L.a.instance.zoomScale,t*L.a.instance.zoomScale);return e=i.x/L.a.instance.zoomScale/L.a.instance.pageEditScale-this.gridItem.props.getLeft()*n,t=i.y/L.a.instance.zoomScale/L.a.instance.pageEditScale-this.gridItem.props.getTop()*n,this.getCellbyAdjustedOffset(e,t)}},{key:"setColWidth",value:function(e,t){if(!(e<0)){0===e&&(t=-t);var n=this.gridItem,i=n.cols[Math.max(1,e)-1];t=i.validateDeltaThickness(t),0===e&&n.props.setLeft(n.props.getLeft()-t),i.thickness+=t;var r=n.getWidth()+t;n.aspectRatio=n.getHeight()/r,n.cols.forEach(function(e){e.thicknessRatio=e.thickness/r})}}},{key:"setRowHeight",value:function(e,t){if(!(e<0)){0===e&&(t=-t);var n=this.gridItem,i=n.rows[Math.max(1,e)-1];t=i.validateDeltaThickness(t),0===e&&n.props.setTop(n.props.getTop()-t),i.thickness+=t;var r=n.getHeight()+t;n.aspectRatio=r/n.getWidth(),n.rows.forEach(function(e){e.thicknessRatio=e.thickness/r})}}},{key:"getCellsWidth",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=0,i=e.startPos.col;i<=e.endPos.col;i++)n+=this.gridItem.cols[i].thickness;return n*t}},{key:"getCellsHeight",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=0,i=e.startPos.row;i<=e.endPos.row;i++)n+=this.gridItem.rows[i].thickness;return n*t}},{key:"getCells",value:function(e){var t=[],n=!0,i=!1,r=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,l=this.gridItem.cells[s.row][s.col];t.push(l)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return t}},{key:"getRectCells",value:function(e){for(var t=[],n=e.startPos.row;n<=e.endPos.row;n++){for(var i=[],r=e.startPos.col;r<=e.endPos.col;r++)i.push(this.gridItem.cells[n][r]);t.push(i)}return t}},{key:"arrayOfCellPosToCellsPos",value:function(e){var t=this.gridItem.row,n=this.gridItem.col,i=-1,r=-1,a=!0,o=!1,s=void 0;try{for(var l,c=e[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var u=l.value;t=Math.min(t,u.row),n=Math.min(n,u.col),i=Math.max(i,u.row),r=Math.max(r,u.col)}}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}return{startPos:{row:t,col:n},endPos:{row:i,col:r}}}},{key:"cellsPosToArrayOfCellPos",value:function(e){for(var t=[],n=e.startPos.row;n<=e.endPos.row;n++)for(var i=e.startPos.col;i<=e.endPos.col;i++)t.push({row:n,col:i});return t}},{key:"isCellsPosEqual",value:function(e,t){return e.startPos.row===t.startPos.row&&e.startPos.col===t.startPos.col&&e.endPos.row===t.endPos.row&&e.endPos.col===t.endPos.col}},{key:"isRectSelectedCells",value:function(e){var t=this.gridItem.row,n=this.gridItem.col,i=-1,r=-1,a=!0,o=!1,s=void 0;try{for(var l,c=e[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var u=l.value;t=Math.min(t,u.row),n=Math.min(n,u.col),i=Math.max(i,u.row),r=Math.max(r,u.col)}}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}for(var h=0;h<this.gridItem.row;h++)for(var d=0;d<this.gridItem.col;d++){var p=t<=h&&i>=h&&n<=d&&r>=d;if(this.gridItem.cells[h][d].selected!==p)return!1}return!0}},{key:"getPrevCellPos",value:function(e,t){var n,i,r=e.col,a=e.row;return t?0===a?(i=this.gridItem.row-1,n=0===r?this.gridItem.col-1:r-1):(n=r,i=a-1):0===r?(n=this.gridItem.col-1,i=0===a?this.gridItem.row-1:a-1):(n=r-1,i=a),this.gridItem.cells[i][n].cellType===w.c.SLAVE?this.getPrevCellPos({row:i,col:n},t):{row:i,col:n}}},{key:"getNextCellPos",value:function(e,t){var n,i,r=e.col,a=e.row;return t?a===this.gridItem.row-1?(i=0,n=r===this.gridItem.col-1?0:r+1):(n=r,i=a+1):r===this.gridItem.col-1?(n=0,i=a===this.gridItem.row-1?0:a+1):(n=r+1,i=a),this.gridItem.cells[i][n].cellType===w.c.SLAVE?this.getNextCellPos({row:i,col:n},t):{row:i,col:n}}}]),e}(),A=n(103),b=n(318),P=function(e){function t(){var e,n;c()(this,t);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return n=p()(this,(e=m()(t)).call.apply(e,[this].concat(r))),C()(f()(n),"cellBorderColor","#000000"),C()(f()(n),"cellBorderAlpha",255),C()(f()(n),"cellBorderThickness",1),C()(f()(n),"leftBorder",!1),C()(f()(n),"topBorder",!1),C()(f()(n),"rightBorder",!1),C()(f()(n),"bottomBorder",!1),C()(f()(n),"downDiagonalBorder",!1),C()(f()(n),"upDiagonalBorder",!1),C()(f()(n),"innerCrossBorder",!1),C()(f()(n),"innerVerBorders",!1),C()(f()(n),"innerHorBorders",!1),C()(f()(n),"outerBorders",!1),C()(f()(n),"allBorders",!1),C()(f()(n),"noneBorders",!1),C()(f()(n),"useItemOpacity",!1),C()(f()(n),"border",new b.a(null,null,n.cellBorderThickness)),C()(f()(n),"leftBorderRevision",0),C()(f()(n),"topBorderRevision",0),C()(f()(n),"rightBorderRevision",0),C()(f()(n),"bottomBorderRevision",0),C()(f()(n),"downDiagonalRevision",0),C()(f()(n),"upDiagonalRevision",0),C()(f()(n),"cellBackgroundRevision",0),n}return _()(t,e),h()(t,[{key:"updateBorder",value:function(){this.border.alpha=this.cellBorderAlpha,this.border.color=this.cellBorderColor,this.border.thickness=this.cellBorderThickness,this.updateRevision()}},{key:"getCellBorderColor",value:function(){return this.cellBorderColor}},{key:"setCellBorderColor",value:function(e){this.cellBorderColor!==e&&this.updateRevision(),this.cellBorderColor=e}},{key:"getCellBorderAlpha",value:function(){return this.cellBorderAlpha}},{key:"setCellBorderAlpha",value:function(e){this.cellBorderAlpha!==Number(e)&&this.updateRevision(),this.cellBorderAlpha=Number(e)}},{key:"getCellBorderThickness",value:function(){return this.cellBorderThickness}},{key:"setCellBorderThickness",value:function(e){this.cellBorderThickness!==Number(e)&&this.updateRevision(),this.cellBorderThickness=Number(e)}},{key:"isFillBackground",value:function(){return this.fillBackground}},{key:"setFillBackground",value:function(e){this.fillBackground!==e&&this.updateRevision(),this.fillBackground=!0===e}},{key:"isLeftBorder",value:function(){return this.leftBorder}},{key:"setLeftBorder",value:function(e){this.leftBorder!==e&&this.updateRevision(),this.leftBorder=!0===e}},{key:"isTopBorder",value:function(){return this.topBorder}},{key:"setTopBorder",value:function(e){this.topBorder!==e&&this.updateRevision(),this.topBorder=!0===e}},{key:"isRightBorder",value:function(){return this.rightBorder}},{key:"setRightBorder",value:function(e){this.rightBorder!==e&&this.updateRevision(),this.rightBorder=!0===e}},{key:"isBottomBorder",value:function(){return this.bottomBorder}},{key:"setBottomBorder",value:function(e){this.bottomBorder!==e&&this.updateRevision(),this.bottomBorder=!0===e}},{key:"isDownDiagonalBorder",value:function(){return this.downDiagonalBorder}},{key:"setDownDiagonalBorder",value:function(e){this.downDiagonalBorder!==e&&this.updateRevision(),this.downDiagonalBorder=!0===e}},{key:"isUpDiagonalBorder",value:function(){return this.upDiagonalBorder}},{key:"setUpDiagonalBorder",value:function(e){this.upDiagonalBorder!==e&&this.updateRevision(),this.upDiagonalBorder=!0===e}},{key:"isInnerCrossBorder",value:function(){return this.innerCrossBorder}},{key:"setInnerCrossBorder",value:function(e){this.innerCrossBorder!==e&&this.updateRevision(),this.innerCrossBorder=!0===e}},{key:"isInnerVerBorders",value:function(){return this.innerVerBorders}},{key:"setInnerVerBorders",value:function(e){this.innerVerBorders!==e&&this.updateRevision(),this.innerVerBorders=!0===e}},{key:"isInnerHorBorders",value:function(){return this.innerHorBorders}},{key:"setInnerHorBorders",value:function(e){this.innerHorBorders!==e&&this.updateRevision(),this.innerHorBorders=!0===e}},{key:"isOuterBorders",value:function(){return this.outerBorders}},{key:"setOuterBorders",value:function(e){this.outerBorders!==e&&this.updateRevision(),this.outerBorders=!0===e}},{key:"isAllBorders",value:function(){return this.allBorders}},{key:"setAllBorders",value:function(e){this.allBorders!==e&&this.updateRevision(),this.allBorders=!0===e}},{key:"isNoneBorders",value:function(){return this.noneBorders}},{key:"setNoneBorders",value:function(e){this.noneBorders!==e&&this.updateRevision(),this.noneBorders=!0===e}},{key:"getUseItemOpacity",value:function(){return this.useItemOpacity}},{key:"setUseItemOpacity",value:function(e){this.useItemOpacity=e}},{key:"makeClone",value:function(){return new t}},{key:"clone",value:function(){var e=y()(m()(t.prototype),"clone",this).call(this);return e.border=this.border.clone(),e}},{key:"setOpacity",value:function(e){y()(m()(t.prototype),"setOpacity",this).call(this,e),this.setUseItemOpacity(!0)}}]),t}(A.a),N=n(104),x=n(317),M=n(3),D=n(49),B=n(64),U=n(43),G=n(87),F=n(48),H=n(190),V=n(254),W=n(105),z=n(71);n.d(t,"a",function(){return i}),n.d(t,"b",function(){return X}),function(e){e.GRID="GRID",e.CELL="CELL",e.TEXT="TEXT"}(i||(i={}));var X=function(e){function t(e,n,i,r,a){var o,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u=arguments.length>7&&void 0!==arguments[7]&&arguments[7],h=!(arguments.length>8&&void 0!==arguments[8])||arguments[8],d=!(arguments.length>9&&void 0!==arguments[9])||arguments[9],v=!(arguments.length>10&&void 0!==arguments[10])||arguments[10],g=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];return c()(this,t),o=p()(this,m()(t).call(this,e,n,i,r,a,s,l,u,h,d,v,g)),C()(f()(o),"cells",[]),C()(f()(o),"rows",[]),C()(f()(o),"cols",[]),C()(f()(o),"sizeTool",new R(f()(o))),C()(f()(o),"mergeTool",new k(f()(o))),C()(f()(o),"positionTool",new O(f()(o))),C()(f()(o),"isTextEditMode",!1),C()(f()(o),"selectedRowNo",-1),C()(f()(o),"selectedColNo",-1),C()(f()(o),"borderScaleStandard",800),C()(f()(o),"endEditMode",!1),C()(f()(o),"zoomScale",1),o.textProps=new N.b,o.cellProps=new x.a,o.textedit=new V.c(o.textProps,null),o}var n,i;return _()(t,e),h()(t,[{key:"makeProps",value:function(){return new P}},{key:"getCanvasPosData",value:function(e){var t=this.getWidth()/2*e,n=this.getHeight()/2*e;return{width:this.props.getWidth()*e*2,height:this.props.getHeight()*e*2,contentleft:0,contenttop:0,offsetX:t,offsetY:n}}},{key:"canFlip",value:function(){return!1}},{key:"canRotate",value:function(){return!1}},{key:"existSelectedCell",value:function(){return this.cells.some(function(e){return e.some(function(e){return e.selected})})}},{key:"getItemType",value:function(){return z.a.GRID}},{key:"render",value:(i=s()(a.a.mark(function e(t,n){var i,r,o,s,l,c,u,h,d,p,v,f,g,m,E,y,T,_,I,C,S,w,k,R;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.getCanvasPosData(n),r=i.width,o=i.height,s=i.contentleft,l=i.contenttop,c=i.offsetX,u=i.offsetY,t.save(),h=-s+c,d=-l+u,p=this.renderGridBackground(n,!1),e.next=7,H.a.drawSVG(t,p,0,0,r-2*h,o-2*d);case 7:v=!0,f=!1,g=void 0,e.prev=10,m=this.cells[Symbol.iterator]();case 12:if(v=(E=m.next()).done){e.next=53;break}y=E.value,T=!0,_=!1,I=void 0,e.prev=17,C=y[Symbol.iterator]();case 19:if(T=(S=C.next()).done){e.next=36;break}if(!(w=S.value).visible){e.next=33;break}if((k=w.childTextItem.clone()).props.setOpacity(255),t.save(),k.props.lastRenderEditScale=1/W.b,k.zoomscale=1,w.repositionTextItem(k,1),k.props.updateRevision(),0===k.props.getText().length){e.next=32;break}return e.next=32,k.renderThumbnail(t,n);case 32:t.restore();case 33:T=!0,e.next=19;break;case 36:e.next=42;break;case 38:e.prev=38,e.t0=e.catch(17),_=!0,I=e.t0;case 42:e.prev=42,e.prev=43,T||null==C.return||C.return();case 45:if(e.prev=45,!_){e.next=48;break}throw I;case 48:return e.finish(45);case 49:return e.finish(42);case 50:v=!0,e.next=12;break;case 53:e.next=59;break;case 55:e.prev=55,e.t1=e.catch(10),f=!0,g=e.t1;case 59:e.prev=59,e.prev=60,v||null==m.return||m.return();case 62:if(e.prev=62,!f){e.next=65;break}throw g;case 65:return e.finish(62);case 66:return e.finish(59);case 67:return R=this.renderGridBorder(n,!1,h,d),e.next=70,H.a.drawSVG(t,R,-h,-d,r,o);case 70:t.restore();case 71:case"end":return e.stop()}},e,this,[[10,55,59,67],[17,38,42,50],[43,,45,49],[60,,62,66]])})),function(e,t){return i.apply(this,arguments)})},{key:"renderThumbnail",value:(n=s()(a.a.mark(function e(t,n){var i,r,o,s,l,c,u,h,d,p,v;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.save(),i=this.getCanvasPosData(n),r=i.width,o=i.height,s=i.contentleft,l=i.contenttop,c=i.offsetX,u=i.offsetY,h=1,(d=Math.max(r,o))>H.a.MAX_CANVAS_SIZE&&(h=H.a.MAX_CANVAS_SIZE/d),(p=B.a.createCanvas()).width=r*h,p.height=o*h,(v=p.getContext("2d")).translate(Math.round((-s+c)*h),Math.round((-l+u)*h)),t.save(),e.next=13,this.render(v,n*h);case 13:t.globalAlpha=this.props.getOpacity()/255,t.translate(Math.round(this.props.getLeft()*n+s-c),Math.round(this.props.getTop()*n+l-u)),this.props.getRotate()?(t.translate(r/2,o/2),t.rotate(Math.round(this.props.getRotate()*Math.PI/180*1e3)/1e3),t.drawImage(p,-r/2,-o/2,r,o)):t.drawImage(p,0,0,r,o),t.restore();case 17:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})},{key:"renderGridBackground",value:function(e,t,n,i){var r=this.getWidth()*e,a=this.getHeight()*e,o='<svg shape-rendering="optimizeSpeed" width="100%" height="100%" style="overflow: visible"';t||(o='<svg width="'.concat(r,'px" height="').concat(a,'px" style="overflow: visible"')),o+=' xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1">';var s='<g name="background">',l=!0,c=!1,u=void 0;try{for(var h,d=this.cells[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){var p=h.value,v=!0,f=!1,g=void 0;try{for(var m,E=p[Symbol.iterator]();!(v=(m=E.next()).done);v=!0){var y=m.value;y.visible&&(s+=y.renderBackground())}}catch(e){f=!0,g=e}finally{try{v||null==E.return||E.return()}finally{if(f)throw g}}}}catch(e){c=!0,u=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}return o+=s+"</g>",o+="</svg>",t&&(this.gridBackgroundSvgString=o),o}},{key:"renderGridBorder",value:function(e,t,n,i){var r=this.getWidth()*e,a=this.getHeight()*e,o="";void 0!==n&&void 0!==i&&(o+='<svg width="'.concat(r+2*n,'px" height="').concat(a+2*i,'px" style="overflow: visible"'),o+=' shape-rendering="crispEdges"',o+=' xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1">');var s='<svg width="100%" height="100%" style="overflow: visible"';t||(s='<svg width="'.concat(r,'px" height="').concat(a,'px" style="overflow: visible"'),void 0!==n&&void 0!==i&&(s+=' x="'.concat(n,'px" y="').concat(i,'px"'))),s+=' xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1">';var l='<g name="left">',c='<g name="right">',u='<g name="top">',h='<g name="bottom">',d='<g name="down">',p='<g name="up">',v=!0,f=!1,g=void 0;try{for(var m,E=this.cells[Symbol.iterator]();!(v=(m=E.next()).done);v=!0){var y=m.value,T=!0,_=!1,I=void 0;try{for(var C,S=y[Symbol.iterator]();!(T=(C=S.next()).done);T=!0){var k=C.value;k.visible&&(l+=this.renderBorder(k,w.a.LEFT,e),u+=this.renderBorder(k,w.a.TOP,e),c+=this.renderBorder(k,w.a.RIGHT,e),h+=this.renderBorder(k,w.a.BOTTOM,e),d+=this.renderBorder(k,w.a.UPDIAGONAL,e),p+=this.renderBorder(k,w.a.DOWNDIAGONAL,e))}}catch(e){_=!0,I=e}finally{try{T||null==S.return||S.return()}finally{if(_)throw I}}}}catch(e){f=!0,g=e}finally{try{v||null==E.return||E.return()}finally{if(f)throw g}}return s+=l+"</g>",s+=u+"</g>",s+=c+"</g>",s+=h+"</g>",s+=d+"</g>",s+=p+"</g>",s+="</svg>",void 0!==n&&void 0!==i&&(s="".concat(o).concat(s,"</svg>")),t&&(this.gridBorderSvgString=s),s}},{key:"renderBorder",value:function(e,t,n){return e.getBorder(t).visible?(e.renderBorder(t,n),e.getBorder(t).gridSvgString):""}},{key:"clone",value:function(){var e=new t(M.StringUtil.random(),this.props.getLeft(),this.props.getTop(),this.props.getRight(),this.props.getBottom(),this.props.getRotate(),this.props.isFlipH(),this.props.isFlipV(),this.props.isCanUserSelect(),this.props.isCanUserMove(),this.props.isCanUserResize(),this.props.isCanUserDel());e.init(this.row,this.col,this.aspectRatio),e.setProps(this.props.clone()),this.rows.forEach(function(t,n){e.rows[n].assign(t.clone())}),this.cols.forEach(function(t,n){e.cols[n].assign(t.clone())});for(var n=0;n<this.row;n++)for(var i=0;i<this.col;i++){var r=this.cells[n][i],a=e.cells[n][i];a.assignCellStyle(r),a.assignFontStyle(r),a.assignValue(r),a.visible=r.visible,a.borders.left.assign(r.borders.left),a.borders.top.assign(r.borders.top),a.borders.right.assign(r.borders.right),a.borders.bottom.assign(r.borders.bottom),a.borders.downDiagonal.assign(r.borders.downDiagonal),a.borders.upDiagonal.assign(r.borders.upDiagonal),a.cellProps=r.cellProps.clone(),a.textProps=r.textProps.clone(),a.cellType=r.cellType,r.masterCell&&(a.masterCell=e.cells[r.masterCell.row][r.masterCell.col])}return this.setCloneItemDefaultAttr(e),e.borderScaleStandard=this.borderScaleStandard,e.sizeTool.synchronizeCells(),e}},{key:"getUsedColor",value:function(){var e=new Set;return this.cells.forEach(function(t){t.forEach(function(t){e.add(t.cellProps.getCellBackgroundColor()),e.add(t.textProps.getColor()),t.borders.left.visible&&e.add(t.borders.left.color),t.borders.top.visible&&e.add(t.borders.top.color),t.borders.right.visible&&e.add(t.borders.right.color),t.borders.bottom.visible&&e.add(t.borders.bottom.color),t.borders.downDiagonal.visible&&e.add(t.borders.downDiagonal.color),t.borders.upDiagonal.visible&&e.add(t.borders.upDiagonal.color)})}),e}},{key:"init",value:function(e,t,n){for(var i=0;i<e;i++)this.sizeTool.insertRow(i);for(var r=0;r<t;r++)this.sizeTool.insertCol(r);this.aspectRatio=n||this.getHeight()/this.getWidth()}},{key:"adjustColThickness",value:function(e){var t=!1;if(null==e){var n=!0,i=!1,r=void 0;try{for(var a,o=this.cols[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,l=s.minThickness;s.thickness<l&&(s.thickness=l,t=!0)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}}else{var c=this.cols[e],u=c.minThickness;c.thickness<u&&(c.thickness=u,t=!0)}return t}},{key:"adjustRowThickness",value:function(e){var t=!1;if(null==e){var n=!0,i=!1,r=void 0;try{for(var a,o=this.rows[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,l=s.minThickness;if(s.thickness<l){s.thickness=l,t=!0;var c=s.minThicknessCellPos.slice(),u=!0,h=!1,d=void 0;try{for(var p,v=c[Symbol.iterator]();!(u=(p=v.next()).done);u=!0){var f=p.value;this.cells[f.row][f.col].isResizedByHeightChange=!0}}catch(e){h=!0,d=e}finally{try{u||null==v.return||v.return()}finally{if(h)throw d}}}}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}}else{var g=this.rows[e],m=g.minThickness;if(g.thickness<m){g.thickness=m,t=!0;var E=g.minThicknessCellPos.slice(),y=!0,T=!1,_=void 0;try{for(var I,C=E[Symbol.iterator]();!(y=(I=C.next()).done);y=!0){var S=I.value;this.cells[S.row][S.col].isResizedByHeightChange=!0}}catch(e){T=!0,_=e}finally{try{y||null==C.return||C.return()}finally{if(T)throw _}}}}return t}},{key:"adjustSize",value:function(){this.props.setRight(this.props.getLeft()+this.getGridWidth()),this.props.setBottom(this.props.getTop()+this.getGridHeight()),this.updateThicknessRatio(),this.aspectRatio=this.getHeight()/this.getWidth()}},{key:"scale",value:function(e){var n=!0,i=!1,r=void 0;try{for(var a,o=this.cells[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,l=!0,c=!1,u=void 0;try{for(var h,d=s[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){h.value.childTextItem.scale(e)}}catch(e){c=!0,u=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}var p=!0,v=!1,f=void 0;try{for(var g,E=this.rows[Symbol.iterator]();!(p=(g=E.next()).done);p=!0){g.value.thickness*=e}}catch(e){v=!0,f=e}finally{try{p||null==E.return||E.return()}finally{if(v)throw f}}var T=!0,_=!1,I=void 0;try{for(var C,S=this.cols[Symbol.iterator]();!(T=(C=S.next()).done);T=!0){C.value.thickness*=e}}catch(e){_=!0,I=e}finally{try{T||null==S.return||S.return()}finally{if(_)throw I}}return this.borderScaleStandard*=e,y()(m()(t.prototype),"scale",this).call(this,e),this.adjustSize(),this}},{key:"setLTRBCoordinate",value:function(e,n,i){this.isTextEditMode&&(this.endEditMode=!0);var r=this.getWidth()/this.getHeight(),a=e.getWidth()/e.getHeight(),o=this.getLTRBCoordinate(),s=e.right-e.left,l=e.bottom-e.top,c=!0;if(Math.abs(a-r)<Math.pow(10,-5))switch(i){case G.b.TOP_LEFT:case G.b.TOP_RIGHT:case G.b.BOTTOM_LEFT:case G.b.BOTTOM_RIGHT:var u=l/s;this.aspectRatio>=u?s*=u/this.aspectRatio:l*=this.aspectRatio/u,c=!1;break;default:c=!0}if(i!==G.b.RIGHT){var h=!0,d=!1,p=void 0;try{for(var v,f=this.cells[Symbol.iterator]();!(h=(v=f.next()).done);h=!0){var g=v.value,E=!0,T=!1,_=void 0;try{for(var I,C=g[Symbol.iterator]();!(E=(I=C.next()).done);E=!0){I.value.isResizedByHeightChange=!1}}catch(e){T=!0,_=e}finally{try{E||null==C.return||C.return()}finally{if(T)throw _}}}}catch(e){d=!0,p=e}finally{try{h||null==f.return||f.return()}finally{if(d)throw p}}}for(var S=l,w=0;w<this.row-1;w++){var k=this.rows[w],R=l*(k.thicknessRatio?k.thicknessRatio:k.thickness/o.getHeight());k.thickness=R,S-=R}this.rows[this.row-1].thickness=S;for(var L=s,O=0;O<this.col-1;O++){var A=this.cols[O],b=s*(A.thicknessRatio?A.thicknessRatio:A.thickness/o.getWidth());A.thickness=b,L-=b}this.cols[this.col-1].thickness=L,this.adjustColThickness(),this.adjustRowThickness(),this.adjustSize(),o.left===e.left?e.right=e.left+this.getGridWidth():e.left=e.right-this.getGridWidth(),o.top===e.top?e.bottom=e.top+this.getGridHeight():e.top=e.bottom-this.getGridHeight(),y()(m()(t.prototype),"setLTRBCoordinate",this).call(this,e),this.aspectRatio=c?this.getHeight()/this.getWidth():this.aspectRatio}},{key:"updateThicknessRatio",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this.rows[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){i.value.updateThicknessRatio()}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}var a=!0,o=!1,s=void 0;try{for(var l,c=this.cols[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){l.value.updateThicknessRatio()}}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}}},{key:"getMaxLeftBound",value:function(){var e=0;return this.cells.forEach(function(t){e=Math.max(e,t[0].borders.left.thickness)}),e/2}},{key:"getMaxTopBound",value:function(){var e=this,t=0;return this.cells.forEach(function(n){t=Math.max(t,n[e.col-1].borders.top.thickness)}),t/2}},{key:"getMaxRightBound",value:function(){var e=0;return this.cells[0].forEach(function(t){e=Math.max(e,t.borders.right.thickness)}),e/2}},{key:"getMaxBottomBound",value:function(){var e=0;return this.cells[this.row-1].forEach(function(t){e=Math.max(e,t.borders.bottom.thickness)}),e/2}},{key:"isInRange",value:function(e){var n=8/this.lastRenderEditScale,i=new D.a(e.left-(this.getMaxLeftBound()+n),e.top-(this.getMaxTopBound()+n),e.right+(this.getMaxRightBound()+n),e.bottom+(this.getMaxBottomBound()+n));return y()(m()(t.prototype),"isInRange",this).call(this,i)}},{key:"getGridWidth",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=0,n=!0,i=!1,r=void 0;try{for(var a,o=this.cols[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;t+=s.thickness*e}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return t}},{key:"getGridHeight",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=0,n=!0,i=!1,r=void 0;try{for(var a,o=this.rows[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;t+=s.thickness*e}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return t}},{key:"getCellRow",value:function(e){for(var t=0;t<this.cells.length;t++)if(this.cells[t].indexOf(e)>=0)return t;return-1}},{key:"getCellCol",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,a=this.cells[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value.indexOf(e);if(o>=0)return o}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return-1}},{key:"unselectAllCell",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this.cells[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var a=i.value,o=!0,s=!1,l=void 0;try{for(var c,u=a[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){c.value.selected=!1}}catch(e){s=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(s)throw l}}}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}}},{key:"selectCells",value:function(e){this.unselectAllCell();var t=this.positionTool.getCells(e);if(t.length){var n=!0,i=!1,r=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){a.value.selected=!0}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}this.cellProps=t[0].cellProps,this.textProps=t[0].textProps}}},{key:"getRenderStatus",value:function(){var e=0,t=!0,n=!1,i=void 0;try{for(var r,a=this.cells[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value,s=!0,l=!1,c=void 0;try{for(var u,h=o[Symbol.iterator]();!(s=(u=h.next()).done);s=!0){var d=u.value;e+=d.cellProps.getRevision()+d.textProps.getRevision()}}catch(e){l=!0,c=e}finally{try{s||null==h.return||h.return()}finally{if(l)throw c}}}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return{position:{styleRevision:this.props.getStyleRevision(),zIndex:this.props.zIndex},contents:{revision:this.props.getRevision()+e}}}},{key:"isSameLastEditedCellAndEditingCell",value:function(){return!(!this.lastEditedCell||!this.editingCell)&&this.lastEditedCell===this.editingCell}},{key:"updateLastEditedCell",value:function(){this.editingCell&&(this.lastEditedCell=this.editingCell)}},{key:"isSameTextStyle",value:function(){if(this.isSameLastEditedCellAndEditingCell()&&this.lastTextStyle){var e=this.editingCell.textProps;return this.lastTextStyle.isBold===e.isBold()&&this.lastTextStyle.isItalic===e.isItalic()&&this.lastTextStyle.isUnderline===e.isUnderline()&&this.lastTextStyle.isStrikeout===e.isStrikeout()&&this.lastTextStyle.isUpperCase===e.isUpperCase()}return!1}},{key:"updateLastTextStyle",value:function(){if(this.editingCell){var e=this.editingCell.textProps,t={isBold:e.isBold(),isItalic:e.isItalic(),isUnderline:e.isUnderline(),isStrikeout:e.isStrikeout(),isUpperCase:e.isUpperCase()};this.lastTextStyle=t}}},{key:"getHeaderTitle",value:function(){return U.a.TOOLS_HEADER_GRID_TITLE}},{key:"getResourceType",value:function(){return F.a.GRID}},{key:"isLazyHandlerHandlePosition",value:function(e){return!0}},{key:"getAllTextItemOfCells",value:function(){var e=[];return this.cells.forEach(function(t){t.forEach(function(t){e.push(t.childTextItem)})}),e}},{key:"selectedCells",get:function(){for(var e=[],t=0;t<this.row;t++)for(var n=0;n<this.col;n++){var i=this.cells[t][n];i.selected&&e.push(i)}return e}},{key:"everyCells",get:function(){for(var e=[],t=0;t<this.row;t++)for(var n=0;n<this.col;n++){var i=this.cells[t][n];e.push(i)}return e}},{key:"row",get:function(){return this.rows.length}},{key:"col",get:function(){return this.cols.length}}]),t}(S.e)},,,function(e,t,n){"use strict";n.d(t,"a",function(){return m});var i,r,a=n(0),o=n.n(a),s=n(1),l=n.n(s),c=n(35),u=n.n(c),h=n(36),d=n.n(h),p=n(43),v=n(3),f=n(47),g=n(95);!function(e){e.CREATE="/api/v2/design",e.UPDATE="/api/v2/design/${idx}",e.DELETE="/api/design/${idx}/delete",e.DELETE_PERMANENTLY="/api/design/${idx}/delete-permanently",e.FIND_ONE="/api/design/${idx}",e.MY_LIST="/api/design/my-list"}(i||(i={})),function(e){e.SAVE_CART="/api/v2/bizhows/cart/design"}(r||(r={}));var m=function(){function e(){u()(this,e)}var t,n,a,s,c,h,m,E,y,T;return d()(e,null,[{key:"makeUrl",value:function(e){return v.CRM.get(p.a.DESIGN_REPO_HOST)+e}},{key:"create",value:(T=l()(o.a.mark(function t(n){var r,a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.updateSaveParam(n.saveParam);case 2:return r=e.makeUrl(i.CREATE),t.next=5,f.UnicornApiRequest.post(r,{traditional:!0,data:JSON.stringify(n),contentType:"application/json"});case 5:return a=t.sent,t.abrupt("return",a.data);case 7:case"end":return t.stop()}},t,this)})),function(e){return T.apply(this,arguments)})},{key:"createToBizhowsCart",value:(y=l()(o.a.mark(function t(n,i){var a,s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.updateSaveParam(i.saveParam);case 2:return a=e.makeUrl(r.SAVE_CART),n>0&&(a="".concat(a,"/").concat(n.toString())),t.next=6,f.UnicornApiRequest.post(a,{traditional:!0,data:JSON.stringify(i),contentType:"application/json"});case 6:return s=t.sent,t.abrupt("return",s.data);case 8:case"end":return t.stop()}},t,this)})),function(e,t){return y.apply(this,arguments)})},{key:"update",value:(E=l()(o.a.mark(function t(n,r){var a,s,l;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.saveParam,e.stringifyExtraData(a),s=e.makeUrl(i.UPDATE).replace("${idx}",String(n)),t.next=5,f.UnicornApiRequest.put(s,{traditional:!0,data:JSON.stringify(r),contentType:"application/json"});case 5:return l=t.sent,t.abrupt("return",l.data);case 7:case"end":return t.stop()}},t)})),function(e,t){return E.apply(this,arguments)})},{key:"updateToBizhowsCart",value:(m=l()(o.a.mark(function t(n,i){var a,s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.updateSaveParam(i.saveParam);case 2:return a=e.makeUrl(r.SAVE_CART),a="".concat(a,"/").concat(n.toString()),t.next=6,f.UnicornApiRequest.put(a,{traditional:!0,data:JSON.stringify(i),contentType:"application/json"});case 6:return s=t.sent,t.abrupt("return",s.data);case 8:case"end":return t.stop()}},t,this)})),function(e,t){return m.apply(this,arguments)})},{key:"updateSaveParam",value:(h=l()(o.a.mark(function t(n){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n.teamIdx){t.next=4;break}return t.next=3,g.a.getSelectedTeamIdx();case 3:n.teamIdx=t.sent;case 4:if(n.teamScope){t.next=8;break}return t.next=7,g.a.getSelectedTeamScope();case 7:n.teamScope=t.sent;case 8:e.stringifyExtraData(n);case 9:case"end":return t.stop()}},t)})),function(e){return h.apply(this,arguments)})},{key:"stringifyExtraData",value:function(e){return e.extraData&&(e.extraData=JSON.stringify(e.extraData)),e}},{key:"delete",value:function(t){return new Promise(function(){var n=l()(o.a.mark(function n(r,a){var s;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return s=e.makeUrl(i.DELETE).replace("${idx}",String(t)),n.t0=r,n.next=4,f.UnicornApiRequest.post(s);case 4:n.t1=n.sent,(0,n.t0)(n.t1);case 6:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}())}},{key:"deleteList",value:(c=l()(o.a.mark(function e(t){var n,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.join(","),r=i.DELETE.replace("${idx}",n),e.next=4,f.UnicornApiRequest.post(r);case 4:case"end":return e.stop()}},e)})),function(e){return c.apply(this,arguments)})},{key:"deleteListPermanently",value:(s=l()(o.a.mark(function e(t){var n,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.join(","),r=i.DELETE_PERMANENTLY.replace("${idx}",n),e.next=4,f.UnicornApiRequest.post(r);case 4:case"end":return e.stop()}},e)})),function(e){return s.apply(this,arguments)})},{key:"findOne",value:(a=l()(o.a.mark(function t(n){var r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.makeUrl(i.FIND_ONE).replace("${idx}",String(n)),t.next=3,f.UnicornApiRequest.get(r);case 3:return t.abrupt("return",t.sent.data);case 4:case"end":return t.stop()}},t)})),function(e){return a.apply(this,arguments)})},{key:"getSheetData",value:(n=l()(o.a.mark(function e(t){var n,i,r,a,s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=v.CRM.get(p.a.COMMON_FILE_DOWNLOAD_API).replace("${uuid}",t),i=f.UnicornApiClient.getURL(n),e.next=4,f.ApiRequest.get(f.DefaultApiResponse,i);case 4:return r=e.sent,a=new DOMParser,s=a.parseFromString(r.data,"text/xml"),e.abrupt("return",s);case 8:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)})},{key:"getMyList",value:(t=l()(o.a.mark(function t(n,r){var a,s,l;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=4;break}return t.next=3,g.a.getDefaultSelectedTeamData();case 3:r=t.sent;case 4:return a={},Object.assign(a,n,r),s=e.makeUrl(i.MY_LIST),t.next=9,f.UnicornApiRequest.get("".concat(s,"?").concat($.param(a)));case 9:return l=t.sent,t.abrupt("return",l.data);case 11:case"end":return t.stop()}},t)})),function(e,n){return t.apply(this,arguments)})},{key:"makeThumbUrl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return f.UnicornApiClient.getURL("".concat(v.CRM.get(p.a.IMAGE_PREVIEW_API),"/").concat(e,"/").concat(t))}}]),e}()},,function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n(35),r=n.n(i),a=n(36),o=n.n(a),s=n(37),l=n.n(s),c=n(41),u=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];r()(this,e),l()(this,"active",!0),l()(this,"rowVisible",!0),this.wrap=document.createElement(n),this.wrap.className=c.a.TOOLS_ITEM,i.forEach(function(e){t.wrap.classList.add(e.toString().toLowerCase())})}return o()(e,[{key:"render",value:function(){return this.wrap}},{key:"addClass",value:function(e){return this.wrap.classList.add(e),this}},{key:"setDisplay",value:function(e){!0===e?this.show():this.hide()}},{key:"show",value:function(){this.wrap.style.display=""}},{key:"hide",value:function(){this.wrap.style.display="none"}}]),e}()},,function(e,t,n){"use strict";n.d(t,"a",function(){return A});var i=n(0),r=n.n(i),a=n(1),o=n.n(a),s=n(35),l=n.n(s),c=n(36),u=n.n(c),h=n(39),d=n.n(h),p=n(44),v=n.n(p),f=n(38),g=n.n(f),m=n(46),E=n.n(m),y=n(40),T=n.n(y),_=n(37),I=n.n(_),C=n(51),S=n(190),w=n(70),k=n(316),R=n(49),L=n(64),O=n(223),A=function(e){function t(e,n,i,r,a,o){var s,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,u=arguments.length>7&&void 0!==arguments[7]&&arguments[7],h=arguments.length>8&&void 0!==arguments[8]&&arguments[8],p=!(arguments.length>9&&void 0!==arguments[9])||arguments[9],f=!(arguments.length>10&&void 0!==arguments[10])||arguments[10],m=!(arguments.length>11&&void 0!==arguments[11])||arguments[11],E=!(arguments.length>12&&void 0!==arguments[12])||arguments[12];l()(this,t),s=d()(this,g()(t).call(this,e,i,r,a,o,c,u,h,p,f,m,E)),I()(v()(s),"svgScale",1),I()(v()(s),"shadowBlurConstant",3),s.svgData=n,s.data=n;var y=s.data.svg;s.svgUniqueKey=k.a.getUniquekey(),w.a.makeUnicornSvgElement(y,s.svgUniqueKey);var T=(a-i)/s.data.width,_=(o-r)/s.data.height;return s.svgScale=Math.min(T,_),s.props.setChangeRotateSetRevision(!0),s.initColors(),s}var n,i,a;return T()(t,e),u()(t,[{key:"getUniqueKey",value:function(){return this.svgUniqueKey}},{key:"beforeRender",value:(a=o()(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.updateColor();case 1:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"updateAttribute",value:function(){this.keepRatio=!1}},{key:"getSvgScale",value:function(){return this.svgScale}},{key:"scale",value:function(e){return E()(g()(t.prototype),"scale",this).call(this,e),this.svgScale*=e,this}},{key:"setLTRBCoordinate",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;E()(g()(t.prototype),"setLTRBCoordinate",this).call(this,e,n,i)}},{key:"initColors",value:function(){var e=this.getOriginColors(),t=!0,n=!1,i=void 0;try{for(var r,a=e[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;this.props.setCurrentOriginColor(o),this.props.setColor(o)}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}this.props.initColor()}},{key:"getOriginColors",value:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var r,a=this.data.colorList[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;e.push(o.color)}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return e}},{key:"getEditableOriginColors",value:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var r,a=this.data.colorList[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;if(o.editable){var s=o.color.toLowerCase();4===s.length&&(s=s[0]+s[1]+s[1]+s[2]+s[2]+s[3]+s[3]),e.push(s)}}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return e}},{key:"updateColor",value:function(){this.svgElements.updateColor()}},{key:"render",value:(i=o()(r.a.mark(function e(t,n,i){var a,o,s,l;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isResourceLoadFail()){e.next=3;break}return this.renderResourceLoadFailView(t,n),e.abrupt("return");case 3:return a=t.canvas.width,o=t.canvas.height,i||(i=this.getSvgString(n)),t.save(),(this.props.isFlipH()||this.props.isFlipV())&&(s=this.props.isFlipH()?-1:1,l=this.props.isFlipV()?-1:1,t.translate(a/2,o/2),t.scale(s,l),t.translate(-a/2,-o/2)),e.next=10,S.a.drawSVG(t,i,0,0);case 10:t.restore();case 11:case"end":return e.stop()}},e,this)})),function(e,t,n){return i.apply(this,arguments)})},{key:"renderThumbnail",value:(n=o()(r.a.mark(function e(n,i){var a,o,s,l,c,u,h,d,p,v,f,g,m,E,y,T,_,I,C,S,w,k,O,A;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((a=this.getCropPosData(n.canvas.width,n.canvas.height,i)).width>0&&a.height>0)){e.next=37;break}return o=this.props.getLeft()*i,s=this.props.getTop()*i,l=this.getWidth()*i,c=this.getHeight()*i,u=this.props.isActiveShadow()?5e3/t.VALUE_TO_MULTIPLY:5e3,h=Math.min(Math.min(l,u)/l,Math.min(c,u)/c),l<c&&h*l<1&&(h=1/l),c<l&&h*c<1&&(h=1/c),d=Math.max(Math.ceil(h*l),1),p=Math.max(Math.ceil(h*c),1),v=d/this.getWidth(),f=this.getSvgString(v),(g=L.a.createCanvas()).width=d,g.height=p,m=g.getContext("2d"),this.isNeedFlipWhenRenderThumbnail()&&this.flipCanvas(m),e.next=21,this.beforeRender(i);case 21:return e.next=23,this.render(m,v,f);case 23:n.save(),(E=L.a.createCanvas()).width=Math.ceil(n.canvas.width*h),E.height=Math.ceil(n.canvas.height*h),(y=E.getContext("2d")).save(),y.translate(Math.round(o*h),Math.round(s*h)),this.props.getRotate()&&(T=d/2,_=p/2,y.translate(T,_),y.rotate(R.b.round(this.props.getRotate()*Math.PI/180,4)),y.translate(-T,-_)),this.props.isActiveShadow()&&(I=L.a.createCanvas(),C=this.getShadowCanvasPosData(i*h),I.width=C.width,I.height=C.height,S=I.getContext("2d"),this.renderShadow(S,i*h,g,d,p),w=this.getCanvasPosData(i*h),k=w.width<w.height?w.width:w.height,O=this.props.getShadowDistance()*k/130,A=R.b.getPointByDistanceAngle(O,this.props.getShadowAngle()+90-this.props.getRotate()),y.drawImage(I,-w.width*(t.VALUE_TO_MULTIPLY-1)/2+A.cx,-w.height*(t.VALUE_TO_MULTIPLY-1)/2+A.cy,w.width*t.VALUE_TO_MULTIPLY,w.height*t.VALUE_TO_MULTIPLY)),y.drawImage(g,0,0),y.restore(),this.isNeedOpacityWhenRenderThumbnail()&&(n.globalAlpha=this.props.getOpacity()/255),n.drawImage(E,0,0,n.canvas.width,n.canvas.height),n.restore();case 37:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})},{key:"renderShadow",value:function(e,n,i,r,a){if(this.props.isActiveShadow()){var o=i.width,s=i.height;e.save();try{if(this.props.isActiveShadow()){e.translate(-o,-s);var l=O.a.hex2rgb(this.props.getShadowColor()),c=this.props.getShadowAlpha()/100,u=o<s?o:s;e.shadowColor="rgba(".concat(l.r,", ").concat(l.g,", ").concat(l.b,", ").concat(c,")"),e.shadowOffsetX=o*(t.VALUE_TO_MULTIPLY+1)/2,e.shadowOffsetY=s*(t.VALUE_TO_MULTIPLY+1)/2,e.shadowBlur=this.props.getShadowBlur()*u*this.shadowBlurConstant/600}r&&a?e.drawImage(i,0,0,r,a):e.drawImage(i,0,0)}finally{e.restore()}}}},{key:"getShadowCanvasPosData",value:function(e){var n=this.props.isActiveShadow(),i=this.props.getWidth()*e,r=this.props.getHeight()*e;return{width:Math.ceil(n?i*t.VALUE_TO_MULTIPLY:i),height:Math.ceil(n?r*t.VALUE_TO_MULTIPLY:r),contentleft:0,contenttop:0,offsetX:Math.ceil(n?i*(t.VALUE_TO_MULTIPLY-1)/2:0),offsetY:Math.ceil(n?r*(t.VALUE_TO_MULTIPLY-1)/2:0)}}},{key:"getSvgString",value:function(e){return this.svgElements.getSvgString(e)}},{key:"getUsedColor",value:function(){var e=this,t=new Set;return this.getEditableOriginColors().forEach(function(n){e.props.setCurrentOriginColor(n);var i=e.props.getColor();t.add(i)}),this.props.isActiveShadow()&&t.add(this.props.getShadowColor()),t}},{key:"getColorCount",value:function(e){if(!e)return null;var t=0;return this.props.getColorMap().forEach(function(n){n.substr(0,7).toLowerCase()===e.substr(0,7).toLowerCase()&&t++}),t}},{key:"getOriginColorsByColor",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return null;var i=[],r=n?this.getEditableOriginColors():this.getOriginColors();return r.forEach(function(n){t.props.setCurrentOriginColor(n),t.props.getColor().substr(0,7).toLowerCase()===e.substr(0,7).toLowerCase()&&i.push(n)}),i}},{key:"getResourceType",value:function(){return this.svgData.type.getResourceType()}},{key:"getShadowBlur",value:function(e){var t=this.getCanvasPosData(e),n=t.width<t.height?t.width:t.height;return this.props.getShadowBlur()*n*this.shadowBlurConstant/1265}},{key:"getShadowPosPoint",value:function(e){var t=this.getCanvasPosData(e),n=t.width<t.height?t.width:t.height,i=this.props.getShadowDistance()*n/130;return R.b.getPointByDistanceAngle(i,this.props.getShadowAngle()+90-this.props.getRotate())}},{key:"getCropPosData",value:function(e,n,i){if(!i)return E()(g()(t.prototype),"getCropPosData",this).call(this,e,n);var r=E()(g()(t.prototype),"getCropPosData",this).call(this,e/i,n/i);if(this.props.isActiveShadow()){var a=this.getCanvasPosData(1),o=a.width<a.height?a.width:a.height,s=this.props.getShadowDistance()*o/130,l=R.b.getPointByDistanceAngle(s,this.props.getShadowAngle()+90-this.props.getRotate()),c=this.props.getShadowBlur()*o*this.shadowBlurConstant/600+1;l.cx=l.cx<=0?l.cx-c:l.cx+c,l.cy=l.cy<=0?l.cy-c:l.cy+c;var u=this.props.getWidth(),h=this.props.getHeight();if(l.cx<0)r.left=r.left-c<0?0:r.left-c,r.width=r.width-l.cx+c>u?u:r.width-l.cx+c;else{var d=r.left;r.left=r.left-l.cx<0?0:r.left-l.cx-c,r.width+=d-r.left}if(l.cy<0)r.top=r.top-c<0?0:r.top-c,r.height=r.height-l.cy+c>h?h:r.height-l.cy+c;else{var p=r.top;r.top=r.top-l.cy<0?0:r.top-l.cy-c,r.height+=p-r.top}}return r}},{key:"isLazyHandlerHandlePosition",value:function(e){return!0}},{key:"isNeedFlipWhenRenderThumbnail",value:function(){return!1}},{key:"flipCanvas",value:function(e){var t=this.props.isFlipH()?-1:1,n=this.props.isFlipV()?-1:1,i=e.canvas.width/2,r=e.canvas.height/2;e.translate(i,r),e.scale(t,n),e.translate(-i,-r)}},{key:"isNeedOpacityWhenRenderThumbnail",value:function(){return!1}}]),t}(C.e);I()(A,"VALUE_TO_MULTIPLY",2)},,function(e,t,n){"use strict";n.d(t,"a",function(){return p});var i=n(35),r=n.n(i),a=n(36),o=n.n(a),s=n(67),l=n(42),c=n(41),u=n(49),h=n(45),d=n(12),p=function(){function e(){r()(this,e)}return o()(e,null,[{key:"getPageDOMPosition",value:function(){var e=null;return l.a.dispatch(new h.c(function(t,n){var i=t.pages[0].sheetSize,r=n.zoomScale*n.pageEditScale;e={left:0,top:0,width:i.width*r,height:i.height*r}})),e}},{key:"toggleEdgeRoundingModeToBodyElement",value:function(e){var t=c.a.EDGE_ROUNDING_ON;e?document.body.classList.add(t):document.body.classList.remove(t)}},{key:"getHighLevel",value:function(e,t){return e===t?e:e===s.e.WARNING||t===s.e.WARNING?s.e.WARNING:e===s.e.CAUTION||t===s.e.CAUTION?s.e.WARNING:e===s.e.RECOMMEND||t===s.e.RECOMMEND?s.e.WARNING:s.e.NONE}},{key:"getPageContentElement",value:function(e){return e}},{key:"togglePageContentPrintAreaMode",value:function(t,n){var i=e.getPageContentElement(t);n?i.classList.add(c.a.PRINTOUT_INFO_PRINT_AREA_ON):i.classList.remove(c.a.PRINTOUT_INFO_PRINT_AREA_ON)}},{key:"changeAlertIconCSSbyLevel",value:function(e,t){var n=c.a.PRINTOUT_RESTRICTION_LEVEL_WARNING,i=c.a.PRINTOUT_RESTRICTION_LEVEL_CAUTION,r=c.a.PRINTOUT_RESTRICTION_LEVEL_RECOMMEND,a=c.a.PRINTOUT_RESTRICTION_LEVEL_HOLD;[n,i,r,a].forEach(function(t){e.classList.remove(t)});var o="";switch(t){case s.e.WARNING:o=n;break;case s.e.CAUTION:o=i;break;case s.e.RECOMMEND:o=r;break;case s.e.HOLD:o=a;break;default:console.log("undefined type")}e.classList.add(o)}},{key:"getAlertAbsoluteLTRB",value:function(e,t,n,i,r){var a=n*r,o=e-(a-n)/2,s=i*r,l=t-(s-i)/2,c=o+a,h=l+s;return new u.a(o,l,c,h)}},{key:"fadeInElement",value:function(e){$(e).stop().animate({opacity:1},200)}},{key:"fadeInItem",value:function(t,n){if(t.has(n)){var i=t.get(n);e.fadeInElement(i.element)}}},{key:"fadeOutElement",value:function(e){$(e).stop().css("opacity",0)}},{key:"fadeOutItem",value:function(t,n){if(t.has(n)){var i=t.get(n);e.fadeOutElement(i.element)}}},{key:"fadeOutItems",value:function(t,n){n?n.forEach(function(n){return e.fadeOutItem(t,n)}):t.forEach(function(t){return e.fadeInElement(t.element)})}},{key:"fadeInItems",value:function(t,n){n?n.forEach(function(n){return e.fadeInItem(t,n)}):t.forEach(function(t){return e.fadeOutElement(t.element)})}},{key:"removeFromParents",value:function(e){e&&e.parentElement&&e.parentElement.removeChild(e)}},{key:"removeItemFromMap",value:function(t,n){if(t.has(n)){var i=t.get(n);e.removeFromParents(i.element),t.delete(n)}}},{key:"appendElementsOfMap",value:function(e,t){e.forEach(function(e){e.element.parentElement||t.appendChild(e.element)})}},{key:"setRotatedLTPosition",value:function(e){e.element.style.left="".concat(e.left,"px"),e.element.style.top="".concat(e.top,"px"),e.element.style.width="".concat(e.width,"px"),e.element.style.height="".concat(e.height,"px"),e.element.style.transform="rotateZ(".concat(e.degree,"deg)")}},{key:"setLTPosition",value:function(e){e.element.style.left="".concat(e.left,"px"),e.element.style.top="".concat(e.top,"px"),e.element.style.width="".concat(e.width,"px"),e.element.style.height="".concat(e.height,"px")}},{key:"setLBPosition",value:function(e){e.element.style.left="".concat(e.left,"px"),e.element.style.bottom="".concat(e.bottom,"px"),e.element.style.width="".concat(e.width,"px"),e.element.style.height="".concat(e.height,"px")}},{key:"setRTPosition",value:function(e){e.element.style.right="".concat(e.right,"px"),e.element.style.top="".concat(e.top,"px"),e.element.style.width="".concat(e.width,"px"),e.element.style.height="".concat(e.height,"px")}},{key:"setRBPosition",value:function(e){e.element.style.right="".concat(e.right,"px"),e.element.style.bottom="".concat(e.bottom,"px"),e.element.style.width="".concat(e.width,"px"),e.element.style.height="".concat(e.height,"px")}},{key:"setElementLeftTopByPx",value:function(e,t,n){e.style.left="".concat(t,"px"),e.style.top="".concat(n,"px")}},{key:"setElementSize",value:function(e,t,n){e.style.width="".concat(t,"px"),e.style.height="".concat(n,"px")}},{key:"removeAllChild",value:function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}},{key:"makeDiv",value:function(e){var t=document.createElement("div");return t.className=e,t}},{key:"makeCheckbox",value:function(){var e=document.createElement("input");return e.type="checkbox",e.checked=!1,e}},{key:"makeCheckWrapper",value:function(t,n,i){var r=e.makeDiv("checkbox_wrapper"),a=e.makeHTMLParagraph(n);return t||(t=e.makeCheckbox()),r.addEventListener("click",function(){t.checked=!t.checked,i()}),r.appendChild(t),Object(d.setToolsIcon)(r,d.ToolsIcon.CHECK,!0),r.appendChild(a),r}},{key:"makeButton",value:function(e){var t=document.createElement("button");return t.className=e,t}},{key:"makeInfoBox",value:function(t,n){var i=e.makeDiv("info_box");i.classList.add(t);var r=e.makeHTMLParagraph(n);return i.appendChild(r),i}},{key:"makeHTMLParagraph",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=document.createElement("p");return t?n.innerHTML=e:n.innerText=e,n}},{key:"makeHTMLSpan",value:function(e){var t=document.createElement("span");return t.innerText=e,t}},{key:"makeSuffix",value:function(e,t){var n=document.createElement("p");return n.className=c.a.ITEM_SUFFIX,n.classList.add(t),n.innerText=e,n}},{key:"makeLabel",value:function(e,t){var n=document.createElement("label");return n.className=t,n.innerText=e,n}},{key:"makeTitle",value:function(e){var t=document.createElement("p");return t.classList.add(c.a.TITLE),t.innerText=e,t}},{key:"makeHeader",value:function(t){var n=e.makeDiv(c.a.HEADER),i=e.makeHTMLParagraph(t);return i.className=c.a.TITLE,n.appendChild(i),n}},{key:"makeContour",value:function(){return e.makeDiv(c.a.CONTOUR)}},{key:"setDisable",value:function(e){e.classList.add(c.a.DISABLE)}},{key:"setEnable",value:function(e){e.classList.remove(c.a.DISABLE)}},{key:"setActive",value:function(e){e.classList.add(c.a.ACTIVE)}},{key:"setInactive",value:function(e){e.classList.remove(c.a.ACTIVE)}},{key:"setActivePage",value:function(t,n){t.forEach(function(t){return e.setInactive(t)}),t.has(n)&&e.setActive(t.get(n))}},{key:"makeComboBox",value:function(t,n,i){var r=e.makeDiv("combobox"),a=e.makeTitle(t);r.appendChild(a);var o=e.makeDiv("dropdown_selected_button"),s=e.makeDiv("dropdown_selected_str");return s.id=n,o.appendChild(s),Object(d.setToolsIcon)(o,d.ToolsIcon.GREATER_THAN,!0),r.appendChild(o),i.classList.add(c.a.HIDE),r.appendChild(i),o.addEventListener("click",function(){e.toggleDropdownUIVisible(i)}),i.addEventListener("click",function(){e.hideDropdownUI()}),r}},{key:"toggleDropdownUIVisible",value:function(t){t.classList.contains(c.a.HIDE)?(e.hideDropdownUI(),t.classList.remove(c.a.HIDE)):t.classList.add(c.a.HIDE)}},{key:"toggleElementVisible",value:function(e){e.classList.contains(c.a.HIDE)?e.classList.remove(c.a.HIDE):e.classList.add(c.a.HIDE)}},{key:"toggleElementClass",value:function(e,t){e.classList.contains(t)?e.classList.remove(t):e.classList.add(t)}},{key:"setElementVisible",value:function(e,t){t?e.classList.remove(c.a.HIDE):e.classList.add(c.a.HIDE)}},{key:"hideDropdownUI",value:function(){var e=document.getElementsByClassName("dropdown_list"),t=!0,n=!1,i=void 0;try{for(var r,a=e[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){r.value.classList.add(c.a.HIDE)}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}}},{key:"getInspectionAllResult",value:function(){var e=null;return l.a.dispatch(new h.c(function(t,n,i){i.canvasRenderer.printout&&(e=i.canvasRenderer.printout.inspectionResult.getAllResult())})),e}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var i=n(35),r=n.n(i),a=n(36),o=n.n(a),s=n(41),l=n(12),c=n(42),u=n(45),h=function(){function e(){r()(this,e)}return o()(e,null,[{key:"makeToolboxTopContentsWrapper",value:function(){var e=document.createElement("div");return e.className="mobile_tools_wrapper",e}},{key:"setContentsVisible",value:function(e,t){e&&(t?e.classList.remove(s.a.HIDE):e.classList.add(s.a.HIDE))}},{key:"setContentsDisable",value:function(e,t){e&&(t?e.classList.add(s.a.DISABLE):e.classList.remove(s.a.DISABLE))}},{key:"makeIconContents",value:function(e,t){var n=document.createElement("div");return n.className="icon_contents",n.innerText=e,Object(l.setToolsIcon)(n,t),n}},{key:"makePopupWrapper",value:function(e){var t=document.createElement("div");return t.className="tools_popup_inline_wrapper",t.classList.add(e),t}},{key:"makeLabelContents",value:function(e){var t=document.createElement("div");return t.className="label_contents",t.innerText=e,t}},{key:"makeButtonShowToolsButtonRow",value:function(t,n){var i=e.makeLabelContents(t);return i.addEventListener("click",function(t){t.stopPropagation();var r=i.classList.contains("is_selected");e.toggleActiveMenuAction(n.element,r),e.toggleSelectedMenuAction(i)}),i}},{key:"makeButtonShowToolsAccordionRow",value:function(t,n){var i=e.makeLabelContents(t);return i.addEventListener("click",function(t){t.stopPropagation();var r=i.classList.contains("is_selected");e.toggleActiveMenuAction(n.element,r),e.toggleSelectedMenuAction(i)}),i}},{key:"setEventListener",value:function(t,n,i){t.addEventListener("click",function(r){if(r.stopPropagation(),n){var a=t.classList.contains("is_selected");e.toggleActiveMenuAction(n.wrap,a)}e.toggleSelectedMenuAction(t),i&&i()})}},{key:"makeIconButtonShowToolsRow",value:function(t,n,i){var r=e.makeIconContents("",t);return e.setEventListener(r,n,i),r}},{key:"makeFontShowToolsRow",value:function(t){var n=document.createElement("div");return n.className="font_contents",Object(l.setToolsIcon)(n,l.ToolsIcon.GREATER_THAN,!0,"right",90),e.setEventListener(n,t,null),n}},{key:"makeFontSizeToolsRow",value:function(t){var n=document.createElement("div");return n.className="font_size_contents",Object(l.setToolsIcon)(n,l.ToolsIcon.GREATER_THAN,!0,"right",90),e.setEventListener(n,t,null),n}},{key:"makeButtonShowToolsRow",value:function(t,n,i){var r=e.makeLabelContents(t);return e.setEventListener(r,n,i),r}},{key:"toggleActiveMenuAction",value:function(e,t){e&&e.parentElement&&e.parentElement.childNodes.forEach(function(n){n!==e||t?(n.classList.remove("mobile_active"),n.childNodes.forEach(function(e){e.classList.contains("tools_popup")&&e.classList.add(s.a.HIDE)})):e.classList.add("mobile_active")})}},{key:"setEventColorPopup",value:function(t,n,i){t.addEventListener("click",function(r){if(i.wrap&&c.a.isMobileMode()){for(r.stopPropagation();i.wrap.hasChildNodes();)i.wrap.removeChild(i.wrap.lastChild);n.classList.add("color_picker_row_wrap"),i.wrap.appendChild(n),i&&e.toggleActiveMenuAction(i.wrap,!1),t.classList.remove("is_selected"),e.toggleSelectedMenuAction(t)}})}},{key:"setEventColorTool",value:function(t,n){e.setEventColorPopup(t.wrap,t.getColorPickerPopup(),n)}},{key:"setEventSvgColorTool",value:function(t,n){e.setEventColorPopup(t.wrap,t.getColorPickerPopup(),n)}},{key:"toggleSelectedMenuAction",value:function(e){e.parentElement&&e.parentElement.parentElement&&e.parentElement.parentElement.childNodes.forEach(function(t){t.classList.contains(s.a.HIDE)||t.childNodes.forEach(function(t){t!==e&&t.classList.remove("is_selected")})}),c.a.dispatch(new u.c(function(t,n,i){e.classList.toggle("is_selected"),i.itemToolsRenderer.setToolsExpend(e.classList.contains("is_selected"))}))}}]),e}()},function(e,t,n){"use strict";n.d(t,"b",function(){return I}),n.d(t,"d",function(){return C}),n.d(t,"e",function(){return S}),n.d(t,"c",function(){return w}),n.d(t,"f",function(){return k}),n.d(t,"g",function(){return R}),n.d(t,"a",function(){return L});var i=n(0),r=n.n(i),a=n(1),o=n.n(a),s=n(35),l=n.n(s),c=n(39),u=n.n(c),h=n(38),d=n.n(h),p=n(44),v=n.n(p),f=n(40),g=n.n(f),m=n(37),E=n.n(m),y=n(45),T=n(42),_=n(67),I=function(e){function t(e,n,i){var a;return l()(this,t),a=u()(this,d()(t).call(this)),E()(v()(a),"actionType",y.a.ONE_TIME),E()(v()(a),"doSaveQueue",!1),E()(v()(a),"renderAuto",!1),E()(v()(a),"changeDesign",function(){return!1}),E()(v()(a),"commitAction",function(){var e=o()(r.a.mark(function e(t,n,i){var o,s,l;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=a.oldPageIdx,s=a.newPageIdx,l=a.items,!(o<0||s<0)&&l&&0!==l.length){e.next=5;break}return e.abrupt("return");case 5:return i.canvasRenderer.printout.updateByItems({items:l.slice(),itemStatus:_.b.MOVE_OTHER_PAGE,pageId:t.pages[o].pageId}),e.next=9,new C(l,s).commitAction(t,n,i);case 9:case"end":return e.stop()}},e)}));return function(t,n,i){return e.apply(this,arguments)}}()),E()(v()(a),"rollbackAction",function(){}),E()(v()(a),"recycle",function(){}),a.oldPageIdx=e,a.newPageIdx=n,a.items=i,a}return g()(t,e),t}(y.b),C=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return l()(this,t),n=u()(this,d()(t).call(this)),E()(v()(n),"actionType",y.a.ONE_TIME),E()(v()(n),"doSaveQueue",!1),E()(v()(n),"renderAuto",!0),E()(v()(n),"changeDesign",function(){return!1}),E()(v()(n),"commitAction",function(){var e=o()(r.a.mark(function e(t,i,a){var o,s,l,c,u,h,d,p,v,f,g,m,E,y,T,_,I,C,S,w;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.pageIdx,s=a.canvasRenderer.printout,!(o>=0)){e.next=12;break}return l=t.pages[o],c=l.pageId,u=l.sheetSize,h=l.getAllSingleItems(),d=0===n.items.length?h:n.items.slice(),e.next=10,s.checkRestrictionOfItems({items:d,pageWidth:u.width,pageHeight:u.height,pageId:c,pageItems:h});case 10:e.next=54;break;case 12:if(!(-1===o&&n.items&&n.items.length>0)){e.next=23;break}if(p=!1,!(v=t.pages.find(function(e){var t=!0,n=!1,r=void 0;try{for(var a,o=e.getAllSingleItems()[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){if(a.value.tbpeId===i.activeItems[0].tbpeId){p=!0;break}}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return p}))){e.next=21;break}return f=v.pageId,g=v.sheetSize,m=n.items.slice(),e.next=21,s.checkRestrictionOfItems({items:m,pageWidth:g.width,pageHeight:g.height,pageId:f,pageItems:v.getAllSingleItems()});case 21:e.next=54;break;case 23:s.clearAllAlertGuide(),E=!0,y=!1,T=void 0,e.prev=27,_=t.pages[Symbol.iterator]();case 29:if(E=(I=_.next()).done){e.next=38;break}return C=I.value,S=C.getAllSingleItems(),w=C.sheetSize,e.next=35,s.checkRestrictionOfItems({items:S.slice(),pageWidth:w.width,pageHeight:w.height,pageId:C.pageId,pageItems:S});case 35:E=!0,e.next=29;break;case 38:e.next=44;break;case 40:e.prev=40,e.t0=e.catch(27),y=!0,T=e.t0;case 44:e.prev=44,e.prev=45,E||null==_.return||_.return();case 47:if(e.prev=47,!y){e.next=50;break}throw T;case 50:return e.finish(47);case 51:return e.finish(44);case 52:return e.next=54,a.renderAuto(t,i);case 54:case"end":return e.stop()}},e,null,[[27,40,44,52],[45,,47,51]])}));return function(t,n,i){return e.apply(this,arguments)}}()),E()(v()(n),"rollbackAction",function(){}),E()(v()(n),"recycle",function(){}),n.items=e,n.pageIdx=i,n}return g()(t,e),t}(y.b),S=function(e){function t(){var e;return l()(this,t),e=u()(this,d()(t).call(this)),E()(v()(e),"actionType",y.a.ONE_TIME),E()(v()(e),"doSaveQueue",!1),E()(v()(e),"renderAuto",!1),E()(v()(e),"changeDesign",function(){return!1}),E()(v()(e),"commitAction",function(e,t){t.launcherOption.hasOption()&&!t.launcherOption.output.ignoreWhenPureTemplateLoad&&T.a.dispatch(new C)}),E()(v()(e),"rollbackAction",function(){}),E()(v()(e),"recycle",function(){}),e}return g()(t,e),t}(y.b),w=function(e){function t(e){var n;return l()(this,t),n=u()(this,d()(t).call(this)),E()(v()(n),"actionType",y.a.ONE_TIME),E()(v()(n),"changeDesign",function(){return!1}),E()(v()(n),"commitAction",function(e,t,i){i.canvasRenderer.printout&&(i.canvasRenderer.printout.updateByItems({items:[n.item],itemStatus:_.b.REMOVE}),i.rightSection.printoutFinalConfirm.render(n.item.tbpeId,_.e.NONE))}),E()(v()(n),"rollbackAction",function(){}),E()(v()(n),"recycle",function(){}),n.item=e,n.doSaveQueue=!1,n.renderAuto=!1,n}return g()(t,e),t}(y.b),k=function(e){function t(e){var n;return l()(this,t),n=u()(this,d()(t).call(this)),E()(v()(n),"actionType",y.a.ONE_TIME),E()(v()(n),"changeDesign",function(){return!1}),E()(v()(n),"commitAction",function(e,t,i){var r=n.item;r&&!t.config.showPrintOutGuide&&i.canvasRenderer.printout.updateGuideVisible(!0),i.canvasRenderer.printout.updateByItems({items:[r],itemStatus:_.b.SELECT})}),E()(v()(n),"rollbackAction",function(){}),E()(v()(n),"recycle",function(){}),n.item=e,n.doSaveQueue=!1,n.renderAuto=!1,n}return g()(t,e),t}(y.b),R=function(e){function t(e){var n;return l()(this,t),n=u()(this,d()(t).call(this)),E()(v()(n),"actionType",y.a.ONE_TIME),E()(v()(n),"changeDesign",function(){return!1}),E()(v()(n),"commitAction",function(e,t,n){n.canvasRenderer.printout&&n.canvasRenderer.printout.closeAlertPopup()}),E()(v()(n),"rollbackAction",function(){}),E()(v()(n),"recycle",function(){}),n.item=e,n.doSaveQueue=!1,n.renderAuto=!1,n}return g()(t,e),t}(y.b),L=(y.b,function(e){function t(){var e;return l()(this,t),e=u()(this,d()(t).call(this)),E()(v()(e),"actionType",y.a.ONE_TIME),E()(v()(e),"doSaveQueue",!1),E()(v()(e),"renderAuto",!1),E()(v()(e),"changeDesign",function(){return!1}),E()(v()(e),"commitAction",function(e,t,n){n.canvasRenderer.printout.updateByItems({items:t.activeItems,itemStatus:_.b.CHANGE_POSITION})}),E()(v()(e),"rollbackAction",function(){}),E()(v()(e),"recycle",function(){}),e}return g()(t,e),t}(y.b))},,function(e,t,n){"use strict";(function(e){n.d(t,"c",function(){return L}),n.d(t,"b",function(){return O}),n.d(t,"a",function(){return A}),n.d(t,"e",function(){return b}),n.d(t,"d",function(){return N}),n.d(t,"g",function(){return x}),n.d(t,"f",function(){return M});var i=n(39),r=n.n(i),a=n(38),o=n.n(a),s=n(44),l=n.n(s),c=n(40),u=n.n(c),h=n(139),d=n.n(h),p=n(0),v=n.n(p),f=n(1),g=n.n(f),m=n(35),E=n.n(m),y=n(36),T=n.n(y),_=n(37),I=n.n(_),C=n(3),S=n(43),w=n(47),k=n(48),R=n(419),L=function(){function t(){E()(this,t)}var n,i,r,a,o,s,l,c,u;return T()(t,null,[{key:"init",value:(u=g()(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)})),function(){return u.apply(this,arguments)})},{key:"delete",value:(c=g()(v.a.mark(function e(t){var n,i,r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.svgData.key,e.next=3,this.getImageframeDataByKey(n);case 3:return i=e.sent,r=C.CRM.get(S.a.SVG_HOST)+"/api/image-frame/delete/".concat(i.idx),e.next=7,w.UnicornApiRequest.post(r);case 7:case"end":return e.stop()}},e,this)})),function(e){return c.apply(this,arguments)})},{key:"updateData",value:(l=g()(v.a.mark(function e(t){var n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.isChangedCoreData(),e.next=3,this.update(this.getImageframeUpdateData(t));case 3:return e.abrupt("return",{svgData:t,updateCoreInfo:n});case 4:case"end":return e.stop()}},e,this)})),function(e){return l.apply(this,arguments)})},{key:"update",value:(s=g()(v.a.mark(function e(t){var n,i,r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=C.CRM.get(S.a.SVG_HOST)+"/api/image-frame/update",e.next=3,w.UnicornApiRequest.post(n,{data:t,contentType:!1,processData:!1});case 3:return i=e.sent,r=i.data,e.next=7,this.reloadImageframeData(r);case 7:return e.abrupt("return",i.data);case 8:case"end":return e.stop()}},e,this)})),function(e){return s.apply(this,arguments)})},{key:"reloadImageframeData",value:(o=g()(v.a.mark(function e(t){var n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.parse(t);case 2:n=e.sent,this.setCache(n);case 4:case"end":return e.stop()}},e,this)})),function(e){return o.apply(this,arguments)})},{key:"setCache",value:function(e){this._cacheData.set(e.key,e)}},{key:"parse",value:(a=g()(v.a.mark(function t(n){var i,r,a,o,s,l,c,u,h,d,p,f,g;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$.get(n.imageFrameUrl);case 2:if((i=t.sent).getElementsByTagName?r=i.getElementsByTagName("svg").item(0):(a=(new DOMParser).parseFromString(i,"image/svg+xml"),r=a.getElementsByTagName("svg").item(0)),(o=new O).idx=n.idx,o.type=M.FRAME,o.width=n.width,o.height=n.height,o.minWidth=n.minWidth,o.minHeight=n.minHeight,o.key=n.key,o.status=x.valueOf(n.status),o.svg=r.cloneNode(!0),o.categoryIdxList=n.categoryIdxList,o.name=n.name||"",o.designer=n.accountInfo,o.license=N.valueOf(n.license),o.keywordList=this.getKeywordList(n.keywordList),(s=new b).color=n.imageFrameMaskMetaDto.color,s.x=n.imageFrameMaskMetaDto.x,s.y=n.imageFrameMaskMetaDto.y,s.width=n.imageFrameMaskMetaDto.width,s.height=n.imageFrameMaskMetaDto.height,o.maskData=s,!n.colorDtoList){t.next=46;break}for(c=!0,u=!1,h=void 0,t.prev=30,d=n.colorDtoList[Symbol.iterator]();!(c=(p=d.next()).done);c=!0)f=p.value,(g=new A).idx=f.idx,g.color=f.color,g.editable=f.editable,g.photoInColor=f.photoInColor,f.photoInColor&&!l&&(l=f.color),o.addColor(g);t.next=38;break;case 34:t.prev=34,t.t0=t.catch(30),u=!0,h=t.t0;case 38:t.prev=38,t.prev=39,c||null==d.return||d.return();case 41:if(t.prev=41,!u){t.next=44;break}throw h;case 44:return t.finish(41);case 45:return t.finish(38);case 46:if(e.env.IMAGE_PROCESS){t.next=50;break}return t.next=49,R.a.makeImageframeThumbnail(r,n.width,n.height,l);case 49:o.thumb=t.sent;case 50:return t.abrupt("return",o);case 51:case"end":return t.stop()}},t,this,[[30,34,38,46],[39,,41,45]])})),function(e){return a.apply(this,arguments)})},{key:"getKeywordList",value:function(e){var t=[];if(!e)return t;var n=!0,i=!1,r=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;t.push(s.keyword)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return t}},{key:"getImageframeData",value:(r=g()(v.a.mark(function e(t){var n,i,r,a,o,s,l,c,u,h;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=!0,i=!1,r=void 0,e.prev=3,a=this._cacheData[Symbol.iterator]();case 5:if(n=(o=a.next()).done){e.next=12;break}if(s=d()(o.value,2),s[0],(l=s[1]).idx!==t){e.next=9;break}return e.abrupt("return",l);case 9:n=!0,e.next=5;break;case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),i=!0,r=e.t0;case 18:e.prev=18,e.prev=19,n||null==a.return||a.return();case 21:if(e.prev=21,!i){e.next=24;break}throw r;case 24:return e.finish(21);case 25:return e.finish(18);case 26:return c=C.CRM.get(S.a.SVG_HOST)+"/api/image-frame/".concat(t),e.prev=27,e.next=30,w.UnicornApiRequest.get(c);case 30:return u=e.sent,e.next=33,this.parse(u.data);case 33:return h=e.sent,this.setCache(h),e.abrupt("return",h);case 38:if(e.prev=38,e.t1=e.catch(27),404!==e.t1.status){e.next=42;break}return e.abrupt("return",null);case 42:throw new Error("SVG 정보 가져오는 중 에러 발생"+e.t1);case 43:case"end":return e.stop()}},e,this,[[3,14,18,26],[19,,21,25],[27,38]])})),function(e){return r.apply(this,arguments)})},{key:"getImageframeDataByKey",value:(i=g()(v.a.mark(function e(t){var n,i;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._cacheData.has(t)){e.next=2;break}return e.abrupt("return",this._cacheData.get(t));case 2:return e.next=4,this.getImageframeDataResponse({keyList:[t]});case 4:return n=e.sent,i=n.imageframeDataList[0],this._cacheData.set(i.key,i),e.abrupt("return",i);case 8:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"getImageframeDataResponse",value:(n=g()(v.a.mark(function e(n){var i,r,a,o,s,l,c,u,h,d,p,f;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=C.CRM.get(S.a.SVG_HOST)+"/api/image-frame",e.next=3,$.get(w.UnicornApiClient.getURL(i),$.param(n,!0));case 3:r=e.sent,a=r.data,o=a.pagination,s=a.list,l=[],c=!0,u=!1,h=void 0,e.prev=11,d=s[Symbol.iterator]();case 13:if(c=(p=d.next()).done){e.next=29;break}return f=p.value,e.prev=15,e.t0=l,e.next=19,t.parse(f);case 19:e.t1=e.sent,e.t0.push.call(e.t0,e.t1),e.next=26;break;case 23:e.prev=23,e.t2=e.catch(15),console.error("svg 데이터 파싱 실패 : ".concat(f.idx));case 26:c=!0,e.next=13;break;case 29:e.next=35;break;case 31:e.prev=31,e.t3=e.catch(11),u=!0,h=e.t3;case 35:e.prev=35,e.prev=36,c||null==d.return||d.return();case 38:if(e.prev=38,!u){e.next=41;break}throw h;case 41:return e.finish(38);case 42:return e.finish(35);case 43:return e.abrupt("return",{totalPage:o.totalPage,imageframeDataList:l,totalRow:o.totalRow});case 44:case"end":return e.stop()}},e,null,[[11,31,35,43],[15,23],[36,,38,42]])})),function(e){return n.apply(this,arguments)})},{key:"getImageframeUpdateData",value:function(e){var t=new FormData;t.append("idx",String(e.idx)),t.append("status",e.status.value),t.append("width",String(e.width)),t.append("height",String(e.height)),t.append("minWidth",String(e.minWidth)),t.append("minHeight",String(e.minHeight)),t.append("name",e.name),t.append("license",e.license.value),t.append("accountId",String(e.designer.accountId)),this.setKeywordParam(t,e.keywordList),e.svgMemo&&""!==e.svgMemo.trim()&&t.append("svgMemoDto.memo",e.svgMemo.trim());for(var n=0;n<e.colorList.length;n++){var i=e.colorList[n];t.append("colorDtoList[".concat(n,"].idx"),String(i.idx)),t.append("colorDtoList[".concat(n,"].color"),i.color),t.append("colorDtoList[".concat(n,"].editable"),String(i.editable)),t.append("colorDtoList[".concat(n,"].photoInColor"),String(i.photoInColor))}return t.append("imageFrameMaskMetaDto.width",String(e.maskData.width)),t.append("imageFrameMaskMetaDto.height",String(e.maskData.height)),t.append("imageFrameMaskMetaDto.x",String(e.maskData.x)),t.append("imageFrameMaskMetaDto.y",String(e.maskData.y)),t.append("imageFrameMaskMetaDto.color",String(e.maskData.color)),t}},{key:"setKeywordParam",value:function(e,t){if(t)for(var n=0;n<t.length;n++){var i=t[n];e.append("keywordList[".concat(n,"].keyword"),i)}}}]),t}();I()(L,"_cacheData",new Map);var O=function(){function e(){E()(this,e),I()(this,"_categoryIdxList",[]),I()(this,"_colorList",[]),I()(this,"changeCoreData",!1)}return T()(e,[{key:"addCategory",value:function(e){this._categoryIdxList.some(function(t){return t===e})||this._categoryIdxList.push(e)}},{key:"removeCategory",value:function(e){this._categoryIdxList=this._categoryIdxList.filter(function(t){return t!==e})}},{key:"addColor",value:function(e){this._colorList.push(e)}},{key:"getColorEditable",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,a=this._colorList[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;if(e===o.color)return o.editable}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return null}},{key:"isChangedCoreData",value:function(){var e=this.changeCoreData,t=this.maskData.isChangedCoreData();return this.changeCoreData=!1,e||t}},{key:"idx",get:function(){return this._idx},set:function(e){this._idx=e}},{key:"type",get:function(){return this._type},set:function(e){this._type=e}},{key:"key",get:function(){return this._key},set:function(e){this._key=e}},{key:"width",get:function(){return this._width},set:function(e){this._width=e}},{key:"height",get:function(){return this._height},set:function(e){this._height=e}},{key:"minWidth",get:function(){return this._minWidth},set:function(e){e!==this._minWidth&&(this.changeCoreData=!0),this._minWidth=e}},{key:"minHeight",get:function(){return this._minHeight},set:function(e){e!==this._minHeight&&(this.changeCoreData=!0),this._minHeight=e}},{key:"myCollectionIdx",get:function(){return this._myCollectionIdx},set:function(e){this._myCollectionIdx=e}},{key:"svg",get:function(){return this._svg.cloneNode(!0)},set:function(e){this._svg=e}},{key:"thumb",get:function(){return this._thumb},set:function(e){this._thumb=e}},{key:"status",get:function(){return this._status},set:function(e){this._status=e}},{key:"categoryIdxList",get:function(){return this._categoryIdxList},set:function(e){this._categoryIdxList=e}},{key:"colorList",get:function(){return this._colorList},set:function(e){this._colorList=e}},{key:"name",get:function(){return this._name},set:function(e){this._name=e}},{key:"designer",get:function(){return this._designer},set:function(e){this._designer=e}},{key:"license",get:function(){return this._license},set:function(e){this._license=e}},{key:"keywordList",get:function(){return this._keywordList},set:function(e){this._keywordList=e}},{key:"svgMemo",get:function(){return this._svgMemo},set:function(e){this._svgMemo=e}},{key:"maskData",get:function(){return this._maskData},set:function(e){this._maskData=e}}]),e}(),A=function(){function e(){E()(this,e)}return T()(e,[{key:"idx",get:function(){return this._idx},set:function(e){this._idx=e}},{key:"color",get:function(){return this._color},set:function(e){this._color=e}},{key:"editable",get:function(){return this._editable},set:function(e){this._editable=e}},{key:"photoInColor",get:function(){return this._photoInColor},set:function(e){this._photoInColor=e}}]),e}(),b=function(){function e(){E()(this,e),I()(this,"changeCoreData",!1)}return T()(e,[{key:"isChangedCoreData",value:function(){var e=this.changeCoreData;return this.changeCoreData=!1,e}},{key:"frameIdx",get:function(){return this._frameIdx},set:function(e){this._frameIdx=e}},{key:"x",get:function(){return this._x},set:function(e){this._x=e}},{key:"y",get:function(){return this._y},set:function(e){this._y=e}},{key:"width",get:function(){return this._width},set:function(e){this._width=e}},{key:"height",get:function(){return this._height},set:function(e){this._height=e}},{key:"color",get:function(){return this._color},set:function(e){e!==this._color&&(this.changeCoreData=!0),this._color=e}}]),e}(),P=function(){function e(t,n){E()(this,e),this._text=t,this._value=n}return T()(e,[{key:"text",get:function(){return this._text}},{key:"value",get:function(){return this._value}}]),e}(),N=function(e){function t(e,n){var i;return E()(this,t),i=r()(this,o()(t).call(this,e,n)),t.ALL_VALUE.push(l()(i)),i}return u()(t,e),T()(t,null,[{key:"values",value:function(){return this.ALL_VALUE}},{key:"valueOf",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,a=this.ALL_VALUE[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;if(o.value===e)return o}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return null}}]),t}(P);I()(N,"ALL_VALUE",[]),I()(N,"UNICORN",new N("유니콘","UNICORN")),I()(N,"SMILECAT",new N("스마일캣","SMILECAT")),I()(N,"GETTY",new N("게티","GETTY")),I()(N,"UTO",new N("유토","UTO")),I()(N,"PIXABAY",new N("픽사베이","PIXABAY"));var x=function(e){function t(e,n){var i;return E()(this,t),i=r()(this,o()(t).call(this,e,n)),t.ALL_VALUE.push(l()(i)),i}return u()(t,e),T()(t,null,[{key:"values",value:function(){return this.ALL_VALUE}},{key:"valueOf",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,a=this.ALL_VALUE[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;if(o.value===e)return o}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return null}}]),t}(P);I()(x,"ALL_VALUE",[]),I()(x,"ACTIVE",new x("공개 (활성)","ACTIVE")),I()(x,"INACTIVE",new x("비공개 (활성)","INACTIVE")),I()(x,"DISABLED",new x("비활성","DISABLED"));var M=function(e){function t(e,n,i){var a;return E()(this,t),(a=r()(this,o()(t).call(this,e,n))).resourceType=i,t.ALL_VALUE.push(l()(a)),a}return u()(t,e),T()(t,[{key:"getResourceType",value:function(){return this.resourceType}}],[{key:"values",value:function(){return this.ALL_VALUE}},{key:"valueOf",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,a=this.ALL_VALUE[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;if(o.value===e)return o}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return null}}]),t}(P);I()(M,"ALL_VALUE",[]),I()(M,"FRAME",new M("이미지 프레임","Frame",k.a.FRAME))}).call(this,n(115))},,,,,function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"a",function(){return T}),n.d(t,"b",function(){return _});var i,r,a,o=n(0),s=n.n(o),l=n(1),c=n.n(l),u=n(35),h=n.n(u),d=n(36),p=n.n(d),v=n(37),f=n.n(v),g=n(43),m=n(3),E=n(47),y=n(71);!function(e){e.STYLE="STYLE",e.STYLE_CODE="STYLE_CODE",e.STYLE_IMAGE="STYLE_IMAGE",e.STYLE_IMAGE_FILTER="STYLE_IMAGE_FILTER",e.STYLE_IMAGE_BITMAP_MASK="STYLE_IMAGE_BITMAP_MASK",e.STYLE_IMAGE_STICKER_FRAME="STYLE_IMAGE_STICKER_FRAME",e.STYLE_IMAGE_SOLID_LINE="STYLE_IMAGE_SOLID_LINE",e.STYLE_IMAGE_GRADATION="STYLE_IMAGE_GRADATION",e.STYLE_TEXT="STYLE_TEXT",e.STYLE_TEXT_FONT_FAMILY="STYLE_TEXT_FONT_FAMILY",e.STYLE_TEXT_OUTLINE="STYLE_TEXT_OUTLINE",e.STYLE_TEXT_SHADOW="STYLE_TEXT_SHADOW",e.STYLE_TEXT_GRADATION="STYLE_TEXT_GRADATION"}(i||(i={})),function(e){e.ACITVE="ACTIVE",e.ADMIN="ADMIN"}(r||(r={})),function(e){e.CREATE="/api/template/style",e.LIST="/api/template/style",e.FIND_ONE="/api/template/style/${idx}",e.UPDATE="/api/template/style/${idx}/update",e.DELETE="/api/template/style/${idx}/delete",e.REPLACEABLE_FONT="/api/template/style/replaceable-font/${fontName}"}(a||(a={}));var T=function(){function e(){h()(this,e),f()(this,"replacedFontHistory",new Map)}var t,n,o,l,u,d,v,T,I,C;return p()(e,null,[{key:"makeUrl",value:function(e){return m.CRM.get(g.a.TEMPLATE_STYLE_REPO_HOST)+e}},{key:"create",value:(C=c()(s.a.mark(function t(n){var i,r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.makeUrl(a.CREATE),t.next=3,E.UnicornApiRequest.post(i,{data:n});case 3:return r=t.sent,t.abrupt("return",r.data);case 5:case"end":return t.stop()}},t)})),function(e){return C.apply(this,arguments)})},{key:"update",value:(I=c()(s.a.mark(function t(n,i){var r,o;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.makeUrl(a.UPDATE).replace("${idx}",String(n)),t.next=3,E.UnicornApiRequest.post(r,{data:i});case 3:return o=t.sent,t.abrupt("return",o.data);case 5:case"end":return t.stop()}},t)})),function(e,t){return I.apply(this,arguments)})},{key:"delete",value:(T=c()(s.a.mark(function t(n){var i;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.makeUrl(a.DELETE).replace("${idx}",String(n)),t.next=3,E.UnicornApiRequest.post(i);case 3:case"end":return t.stop()}},t)})),function(e){return T.apply(this,arguments)})},{key:"getList",value:(v=c()(s.a.mark(function t(n){var i,r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.makeUrl(a.LIST),t.next=3,E.UnicornApiRequest.get(i,{data:n,traditional:!0});case 3:return r=t.sent,t.abrupt("return",r.data.list);case 5:case"end":return t.stop()}},t)})),function(e){return v.apply(this,arguments)})},{key:"findOne",value:function(t){return new Promise(function(){var n=c()(s.a.mark(function n(i,r){var o,l;return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,o=e.makeUrl(a.FIND_ONE).replace("${idx}",String(t)),n.next=4,E.UnicornApiRequest.get(o);case 4:l=n.sent,i(l),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),r(n.t0);case 11:case"end":return n.stop()}},n,null,[[0,8]])}));return function(e,t){return n.apply(this,arguments)}}())}},{key:"getReplaceableFontName",value:(d=c()(s.a.mark(function e(t){var n,i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.instance.replacedFontHistory.has(t)){e.next=2;break}return e.abrupt("return",this.instance.replacedFontHistory.get(t));case 2:return e.next=4,this.getReplaceableFont(t);case 4:return n=e.sent,i=n?n.name:null,this.instance.replacedFontHistory.set(t,i),e.abrupt("return",i);case 8:case"end":return e.stop()}},e,this)})),function(e){return d.apply(this,arguments)})},{key:"getReplaceableFont",value:(u=c()(s.a.mark(function t(n){var i,r,o;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.makeUrl(a.REPLACEABLE_FONT).replace("${fontName}",n),t.next=3,E.UnicornApiRequest.get(i);case 3:return r=t.sent,(o=r.data)&&!m.ArrayUtil.isEmpty(o.resourceList)&&_.add(o.name,o.resourceList),t.abrupt("return",o);case 7:case"end":return t.stop()}},t)})),function(e){return u.apply(this,arguments)})},{key:"getStyleMap",value:(l=c()(s.a.mark(function t(n){var i,a,o,l,c=arguments;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=c.length>1&&void 0!==c[1]?c[1]:r.ACITVE,a=n===y.a.PHOTO,o={typeList:a?this.IMAGE_STYLE_TYPE_LIST:this.TEXT_STYLE_TYPE_LIST,hasResource:!0,paging:!1,status:i},t.next=5,e.getList(o);case 5:return l=t.sent,t.abrupt("return",a?e.makeImageStyleTemplateMap(l):e.makeTextStyleTemplateMap(l));case 7:case"end":return t.stop()}},t,this)})),function(e){return l.apply(this,arguments)})},{key:"makeImageStyleTemplateMap",value:function(e){var t={};return e.forEach(function(e){var n=e.type;switch(t[n]||(t[n]=[]),n){case i.STYLE_IMAGE_FILTER:case i.STYLE_IMAGE_BITMAP_MASK:case i.STYLE_IMAGE_STICKER_FRAME:var r={value:String(e.idx),image:e.thumb,name:String(e.name),status:e.status};t[n].push(r);break;default:var a={value:String(e.idx),title:e.name};t[n].push(a)}e.resourceList&&e.resourceList.length>0&&_.add(e.name,e.resourceList)}),t}},{key:"makeTextStyleTemplateMap",value:function(e){var t={};return e.forEach(function(e){var n=e.type;switch(t[n]||(t[n]=[]),n){case i.STYLE_TEXT:t[n].push({value:String(e.idx),image:e.thumb});break;case i.STYLE_TEXT_FONT_FAMILY:t[n].push({value:e.name});break;case i.STYLE_TEXT_GRADATION:var r=e.thumb.split(",");t[n].push({title:e.name,value:String(e.idx),angle:Number(r[0]),first_color:r[1],second_color:r[2]});break;default:t[n].push({value:String(e.idx),title:e.name})}e.resourceList&&e.resourceList.length>0&&_.add(e.name,e.resourceList)}),t}},{key:"loadText",value:(o=c()(s.a.mark(function t(n){var r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getStyleMap(y.a.TEXT);case 2:r=t.sent,n.fontFamilyList=r[i.STYLE_TEXT_FONT_FAMILY]||[],n.textPresetList=r[i.STYLE_TEXT]||[],n.outlinePresetList=[{value:"-1",title:"사용자 스타일"}].concat(r[i.STYLE_TEXT_OUTLINE]||[]),n.shadowPresetList=[{value:"-1",title:"사용자 스타일"}].concat(r[i.STYLE_TEXT_SHADOW]||[]),n.gradationPresetList=r[i.STYLE_TEXT_GRADATION]||[];case 8:case"end":return t.stop()}},t)})),function(e){return o.apply(this,arguments)})},{key:"loadPhoto",value:(n=c()(s.a.mark(function t(n){var a,o;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getStyleMap(y.a.PHOTO);case 2:return a=t.sent,n.filterPresetList=a[i.STYLE_IMAGE_FILTER]||[],n.solidLinePresetList=[{value:"-1",title:"사용자 스타일"}].concat(a[i.STYLE_IMAGE_SOLID_LINE]||[]),n.bitmapMaskList=a[i.STYLE_IMAGE_BITMAP_MASK]||[],n.stickerFrameList=a[i.STYLE_IMAGE_STICKER_FRAME]||[],n.gradationMaskPresetList=[{value:"-1",title:"사용자 스타일"}].concat(a[i.STYLE_IMAGE_GRADATION]||[]),t.next=10,e.getStyleMap(y.a.PHOTO,r.ADMIN);case 10:o=t.sent,n.filterPresetList=(o[i.STYLE_IMAGE_FILTER]||[]).concat(n.filterPresetList);case 12:case"end":return t.stop()}},t)})),function(e){return n.apply(this,arguments)})},{key:"load",value:(t=c()(s.a.mark(function t(){var n;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.instance,t.abrupt("return",Promise.all([e.loadText(n),e.loadPhoto(n)]));case 2:case"end":return t.stop()}},t)})),function(){return t.apply(this,arguments)})}]),e}();f()(T,"instance",new T),f()(T,"IMAGE_STYLE_TYPE_LIST",[i.STYLE_IMAGE,i.STYLE_IMAGE_FILTER,i.STYLE_IMAGE_BITMAP_MASK,i.STYLE_IMAGE_STICKER_FRAME,i.STYLE_IMAGE_SOLID_LINE,i.STYLE_IMAGE_GRADATION]),f()(T,"TEXT_STYLE_TYPE_LIST",[i.STYLE_TEXT,i.STYLE_TEXT_FONT_FAMILY,i.STYLE_TEXT_OUTLINE,i.STYLE_TEXT_SHADOW,i.STYLE_TEXT_GRADATION]);var _=function(){function e(){h()(this,e),f()(this,"map",new Map)}return p()(e,null,[{key:"add",value:function(e,t){this.instance.map.set(e,t)}},{key:"get",value:function(e){return this.instance.map.get(e)}}]),e}();f()(_,"instance",new _)},,,,function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"b",function(){return r}),n.d(t,"a",function(){return E});var i,r,a,o=n(0),s=n.n(o),l=n(1),c=n.n(l),u=n(35),h=n.n(u),d=n(36),p=n.n(d),v=n(43),f=n(3),g=n(47),m=n(171);!function(e){e.MOCKUP="MOCKUP",e.MOCKUP_TEXT="MOCKUP_TEXT",e.MOCKUP_TEXT_STYLE="MOCKUP_TEXT_STYLE",e.MOCKUP_TEXT_SPECIAL="MOCKUP_TEXT_SPECIAL",e.MOCKUP_TEXT_DEFAULT="MOCKUP_TEXT_DEFAULT",e.MOCKUP_GRID="MOCKUP_GRID",e.MOCKUP_TEMPLATE="MOCKUP_TEMPLATE"}(i||(i={})),function(e){e.ACTIVE="ACTIVE",e.DISABLED="DISABLED",e.DELETED="DELETED"}(r||(r={})),function(e){e.CREATE="/api/template/design",e.UPDATE="/api/template/design/${idx}/update",e.UPDATE_SHEET="/api/template/design/${idx}/updateSheet",e.DELETE="/api/template/design/${idx}/delete",e.LIST="/api/template/design",e.SHEET="/api/template/design/${idx}/sheet",e.THUMB="/file/thumbnails/${thumbKey}/400",e.FIND_ONE="/api/template/design/${idx}"}(a||(a={}));var E=function(){function e(){h()(this,e)}var t,n,o,l,u,d;return p()(e,null,[{key:"makeUrl",value:function(e){return f.CRM.get(v.a.TEMPLATE_DESIGN_REPO_HOST)+e}},{key:"create",value:function(t){var n=e.makeUrl(a.CREATE);return g.UnicornApiRequest.post(n,{traditional:!0,data:t})}},{key:"update",value:(d=c()(s.a.mark(function t(n,i){var r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.makeUrl(a.UPDATE).replace("${idx}",String(n)),t.abrupt("return",g.UnicornApiRequest.post(r,{traditional:!0,data:i}));case 2:case"end":return t.stop()}},t)})),function(e,t){return d.apply(this,arguments)})},{key:"updateSheet",value:(u=c()(s.a.mark(function t(n,i){var r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.makeUrl(a.UPDATE_SHEET).replace("${idx}",String(n)),t.abrupt("return",g.UnicornApiRequest.post(r,{data:i}));case 2:case"end":return t.stop()}},t)})),function(e,t){return u.apply(this,arguments)})},{key:"delete",value:function(t){return new Promise(function(){var n=c()(s.a.mark(function n(i,r){var o,l;return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,o=e.makeUrl(a.DELETE).replace("${idx}",String(t)),n.next=4,g.UnicornApiRequest.post(o);case 4:l=n.sent,i(l),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),r(n.t0);case 11:case"end":return n.stop()}},n,null,[[0,8]])}));return function(e,t){return n.apply(this,arguments)}}())}},{key:"getListByType",value:(l=c()(s.a.mark(function t(n){var i;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=g.UnicornApiClient.getURL(e.makeUrl(a.LIST)),t.next=3,g.ApiRequest.get(m.i,i,{data:n,traditional:!0});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t)})),function(e){return l.apply(this,arguments)})},{key:"getSheetData",value:(o=c()(s.a.mark(function t(n){var i,r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.makeUrl(a.SHEET).replace("${idx}",String(n)),t.next=3,g.ApiRequest.getXml(g.UnicornApiClient.getURL(i));case 3:return r=t.sent,t.abrupt("return",r.data);case 5:case"end":return t.stop()}},t)})),function(e){return o.apply(this,arguments)})},{key:"makeThumbUrl",value:function(t){return e.makeUrl(a.THUMB).replace("${thumbKey}",t)}},{key:"findOne",value:(n=c()(s.a.mark(function t(n){var i,r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.makeUrl(a.FIND_ONE).replace("${idx}",String(n)),t.next=3,g.UnicornApiRequest.get(i);case 3:return r=t.sent,t.abrupt("return",r.data);case 5:case"end":return t.stop()}},t)})),function(e){return n.apply(this,arguments)})},{key:"getDefaultText",value:(t=c()(s.a.mark(function t(){var n;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.defaultText){t.next=5;break}return t.next=3,e.getListByType({type:i.MOCKUP_TEXT_DEFAULT,status:r.ACTIVE,pageSize:1,page:1});case 3:n=t.sent,f.ArrayUtil.isEmpty(n.data)||(this.defaultText=n.data[0]);case 5:return t.abrupt("return",this.defaultText);case 6:case"end":return t.stop()}},t,this)})),function(){return t.apply(this,arguments)})}]),e}()},,,function(e,t,n){"use strict";n.d(t,"a",function(){return C});var i,r=n(35),a=n.n(r),o=n(36),s=n.n(o),l=n(39),c=n.n(l),u=n(38),h=n.n(u),d=n(44),p=n.n(d),v=n(40),f=n.n(v),g=n(37),m=n.n(g),E=n(3),y=n(41),T=n(80),_=n(42),I=n(65),C=function(e){function t(e,n,r,o,s){var l,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";a()(this,t),l=c()(this,h()(t).call(this,"div",[y.a.RANGE_ITEM])),m()(p()(l),"lastValidValue",0),m()(p()(l),"rangeInputChangeType",i.NONE),l.listener=e,l.titleKey=n,l.min=r,l.max=o,l.step=s,l.suffix=u;var d=document.createElement("label");d.innerText=E.CRM.get(n)||"";var v=document.createElement("div");v.className=y.a.CUSTOM_RANGE_WRAP;var f=document.createElement("div"),g=document.createElement("div");g.className="".concat(y.a.CUSTOM_RANGE_LINE," ").concat(y.a.CUSTOM_RANGE_BACKGROUND_LINE),f.className="".concat(y.a.CUSTOM_RANGE_LINE," ").concat(y.a.CUSTOM_RANGE_VALUE_LINE),l.range=document.createElement("input"),l.range.type="range",l.range.min=""+r,l.range.max=""+o,l.range.step=""+s,g.appendChild(f),l.bgLine=g,v.appendChild(g),v.appendChild(l.range),l.inputBox=document.createElement("input"),l.inputBox.type="text",l.inputBox.size=3;var T=document.createElement("div");T.appendChild(l.inputBox);var _=document.createElement("h6");return _.className=y.a.ITEM_SUFFIX,_.innerText=u,T.appendChild(_),l.wrap.appendChild(d),l.wrap.appendChild(v),l.wrap.appendChild(T),l.addEventListener(),l.valueSpan=f,l}return f()(t,e),s()(t,[{key:"updateUI",value:function(e){null!=e.active&&(this.active=!0===e.active),this.active?(this.range.removeAttribute("disabled"),this.inputBox.removeAttribute("disabled"),this.wrap.classList.remove(y.a.DISABLE)):(this.range.disabled=!0,this.inputBox.disabled=!0,this.wrap.classList.add(y.a.DISABLE)),this.setValue(e.value,!1)}},{key:"setValue",value:function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=Number(e);if(Number.isNaN(i))this.setValue(this.lastValidValue,!1);else{i=Math.round(i);var r,a=Math.min(1,(i-this.min)/(this.max-this.min)),o=i;1===(a=a<0?0:a)?o=this.max:o<this.min&&(o=this.min),i===t.UNKNOWN_MULTI_VALUE?(a=1,o=this.max,r="?"):r=o.toString(),this.valueSpan.style.transform="scaleX(".concat(a,")"),this.inputBox.value=r,this.range.value=o.toString(),n&&this.listener(o),this.lastValidValue=o}}},{key:"setRangeBgCustomClass",value:function(e){this.bgLine.classList.add(e)}},{key:"addEventListener",value:function(){var e=this,t=_.a.getEnv().browser.isMobile()&&_.a.isIOS(),n=function(t){var n,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t.stopPropagation(),i){if(e.range.disabled)return;var r=8,a=t.touches[0].clientX-$(e.range).offset().left,o=(a-r)/(e.range.offsetWidth-2*r);n=Math.round(o*(e.max-e.min)+e.min),n=Math.max(e.min,Math.min(n,e.max))}else n=Math.round(Number(e.range.value));e.setValue(n)},r=this,a=this.range;function o(e){t?(_.a.instance.mouseAction.mode=I.a.MODE_MOVE_CHANGE_VALUE,n(e,t)):r.rangeInputChangeType=i.MOVE}function s(){_.a.instance.mouseAction.mode=I.a.MODE_NONE,$(a).off("mousemove touchmove",o),$(a).off("mouseup touchend",s)}_.a.instance.env.browser instanceof E.BrowserIE?a.addEventListener("change",n):a.addEventListener("input",function(t){e.rangeInputChangeType===i.DOWN?_.a.instance.mouseAction.mode=I.a.MODE_DOWN_CHANGE_VALUE:_.a.instance.mouseAction.mode=I.a.MODE_MOVE_CHANGE_VALUE,n(t)}),$(a).on("mousedown touchstart",function(r){e.rangeInputChangeType=i.DOWN,$(a).on("mousemove touchmove",o),$(a).on("mouseup touchend",s),t&&(_.a.instance.mouseAction.mode=I.a.MODE_DOWN_CHANGE_VALUE,n(r,t))}),this.inputBox.addEventListener("change",function(t){t.stopPropagation(),e.setValue(e.inputBox.value)}),this.inputBox.addEventListener("keypress",function(t){13===t.keyCode&&e.inputBox.blur()}),this.inputBox.addEventListener("focus",function(){return e.inputBox.select()})}}]),t}(T.a);m()(C,"UNKNOWN_MULTI_VALUE",Number.MIN_VALUE),function(e){e[e.NONE=0]="NONE",e[e.DOWN=1]="DOWN",e[e.MOVE=2]="MOVE"}(i||(i={}))},function(e,t,n){"use strict";var i=n(35),r=n.n(i),a=n(36),o=n.n(a),s=n(52),l=n(39),c=n.n(l),u=n(38),h=n.n(u),d=n(40),p=n.n(d),v=n(3),f=n(43),g=function(e){function t(){return r()(this,t),c()(this,h()(t).apply(this,arguments))}return p()(t,e),o()(t,[{key:"getCommodityInstancePath",value:function(e){var t=v.CRM.get(f.a.BIZ_INSTANCE_PATH).replace("${commodityIdx}",e);return this.getURL(t)}},{key:"getSkinPath",value:function(e,t){var n=v.CRM.get(f.a.BIZ_SKIN_PATH).replace("${skinId}",e.trim()).replace("${ratioId}",t.trim());return this.getURL(n)}},{key:"getSkinListPath",value:function(e){var t=v.CRM.get(f.a.BIZ_SKIN_LIST_PATH).replace("${ratioId}",e.trim());return this.getURL(t)}},{key:"getTemplateMetaPath",value:function(e){var t=v.CRM.get(f.a.BIZ_TEMPLATE_META_PATH).replace("${designName}",e.trim());return this.getURL(t)}},{key:"getThemeMetaPath",value:function(e){var t=v.CRM.get(f.a.BIZ_THEME_META_PATH).replace("${designName}",e.trim());return this.getURL(t)}},{key:"getLayoutListPath",value:function(e,t){var n=v.CRM.get(f.a.BIZ_THEME_META_PATH).replace("${ratioId}",e.trim()).replace("${layoutType}",t.trim());return this.getURL(n)}},{key:"getLayoutPath",value:function(e){var t=v.CRM.get(f.a.BIZ_LAYOUT_PATH).replace("${layoutId}",e.trim());return this.getURL(t)}},{key:"getLayoutThumbnailPath",value:function(e){var t=v.CRM.get(f.a.BIZ_LAYOUT_PATH).replace("${layoutId}",e.trim());return this.getURL(t)}}]),t}(s.b),m=n(226);n.d(t,"a",function(){return E});var E=function(){function e(){r()(this,e)}return o()(e,null,[{key:"from",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];switch(e){case s.a.UNICORN:case s.a.BIZHOWS:return new g(t);case s.a.SMILECAT:return new m.a(t)}return null}}]),e}()},,function(e,t,n){"use strict";n.d(t,"a",function(){return h});var i=n(168),r=n.n(i),a=n(35),o=n.n(a),s=n(36),l=n.n(s),c=n(37),u=n.n(c),h=function(){function e(){o()(this,e),u()(this,"changeRenderProps",!0),u()(this,"changePositionSetRevision",!0),u()(this,"changeStyleProps",!0),u()(this,"changeRotateSetRevision",!1),u()(this,"changeOpacitySetRevision",!0),u()(this,"opacity",255),u()(this,"hyperlink",""),u()(this,"revision",1),u()(this,"styleRevision",1),u()(this,"forcedUpdate",!1)}return l()(e,[{key:"clone",value:function(){var e=this.makeClone();for(var t in this){var n=this[t];e[t]=this.returnEverything(n)}return e}},{key:"returnEverything",value:function(e){if(Array.isArray(e)){var t=[],n=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var l=o.value;t.push(this.returnEverything(l))}}catch(e){i=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return t}return"object"===r()(e)?Object.assign({},e):e}},{key:"getChangeProps",value:function(){return this.changeRenderProps}},{key:"getRevision",value:function(){return this.changeRenderProps&&(this.changeRenderProps=!1,this.revision++),this.revision}},{key:"getStyleRevision",value:function(){return this.changeStyleProps&&(this.changeStyleProps=!1,this.styleRevision++),this.styleRevision}},{key:"isForcedUpdate",value:function(){return this.forcedUpdate}},{key:"setChangePositionSetRevision",value:function(e){this.changePositionSetRevision=!0===e}},{key:"setChangeRotateSetRevision",value:function(e){this.changeRotateSetRevision=!0===e}},{key:"setChangeOpacitySetRevision",value:function(e){this.changeOpacitySetRevision=!0===e}},{key:"setPosition",value:function(e,t,n,i){n-e==this.right-this.left&&i-t==this.bottom-this.top||(this.changePositionSetRevision&&this.updateRevision(),this.updateStyleRevision()),this.left=e,this.top=t,this.right=n,this.bottom=i}},{key:"move",value:function(e,t){this.updateStyleRevision(),this.left+=e,this.right+=e,this.top+=t,this.bottom+=t}},{key:"getLeft",value:function(){return this.left}},{key:"setLeft",value:function(e){this.left!==Number(e)&&(this.changePositionSetRevision&&this.updateRevision(),this.updateStyleRevision()),this.left=Number(e)}},{key:"getTop",value:function(){return this.top}},{key:"setTop",value:function(e){this.top!==Number(e)&&(this.changePositionSetRevision&&this.updateRevision(),this.updateStyleRevision()),this.top=Number(e)}},{key:"getRight",value:function(){return this.right}},{key:"setRight",value:function(e){this.right!==Number(e)&&(this.changePositionSetRevision&&this.updateRevision(),this.updateStyleRevision()),this.right=Number(e)}},{key:"getBottom",value:function(){return this.bottom}},{key:"setBottom",value:function(e){this.bottom!==Number(e)&&(this.changePositionSetRevision&&this.updateRevision(),this.updateStyleRevision()),this.bottom=Number(e)}},{key:"getWidth",value:function(){return this.right-this.left}},{key:"getHeight",value:function(){return this.bottom-this.top}},{key:"getRotate",value:function(){return this.rotate}},{key:"setRotate",value:function(e){this.rotate!==Number(e)&&(this.updateStyleRevision(),this.changeRotateSetRevision&&this.updateRevision()),this.rotate=Number(e)}},{key:"isFlipH",value:function(){return this.flipH}},{key:"setFlipH",value:function(e){this.flipH!==e&&this.updateRevision(),this.flipH=!0===e}},{key:"isFlipV",value:function(){return this.flipV}},{key:"setFlipV",value:function(e){this.flipV!==e&&this.updateRevision(),this.flipV=!0===e}},{key:"getOpacity",value:function(){return this.opacity}},{key:"setOpacity",value:function(e){this.opacity!==Number(e)&&(this.changeOpacitySetRevision&&this.updateRevision(),this.updateStyleRevision()),this.opacity=Number(e)}},{key:"isCanUserSelect",value:function(){return this.canUserSelect}},{key:"setCanUserSelect",value:function(e){this.canUserSelect!==e&&this.updateRevision(),this.canUserSelect=!0===e}},{key:"isCanUserMove",value:function(){return this.canUserMove}},{key:"setCanUserMove",value:function(e){this.canUserMove!==e&&this.updateRevision(),this.canUserMove=!0===e}},{key:"isCanUserResize",value:function(){return this.canUserResize}},{key:"setCanUserResize",value:function(e){this.canUserResize!==e&&this.updateRevision(),this.canUserResize=!0===e}},{key:"isCanUserDel",value:function(){return this.canUserDel}},{key:"setCanUserDel",value:function(e){this.canUserDel!==e&&this.updateRevision(),this.canUserDel=!0===e}},{key:"updateRevision",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.changeRenderProps=e}},{key:"updateStyleRevision",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.changeStyleProps=e}},{key:"clear",value:function(){this.rotate=0,this.opacity=255,this.flipH=!1,this.flipV=!1,this.canUserResize=!0,this.canUserMove=!0,this.canUserDel=!0,this.updateRevision(),this.updateStyleRevision()}},{key:"isCanActiveShadow",value:function(){return!1}}],[{key:"parseColorString",value:function(e){if(0===e)return{rgb:"#000000",alpha:0};if(8===e.length)return{rgb:"#"+e.substr(2),alpha:parseInt(e.substr(0,2),16)};if(9===e.length)return{rgb:e.substr(0,7),alpha:parseInt(e.substr(7,2),16)};switch(e.length){case 6:return{rgb:"#"+e,alpha:255};case 7:return{rgb:e,alpha:255};case 8:return{rgb:"#"+e.substr(2),alpha:parseInt(e.substr(0,2),16)};case 9:return{rgb:e.substr(0,7),alpha:parseInt(e.substr(7,2),16)};default:return{rgb:"#000000",alpha:0}}}},{key:"parseRGBAColorSet",value:function(e){var t=e.alpha.toString(16).toUpperCase();"rgb"===e.rgb.substring(1,3)?e.rgb.replace("rgb(","").replace(")","").replace(")","").split(",").forEach(function(e){Number(e.trim()).toString(16).toUpperCase()}):e.rgb.substring(1);return t+e.rgb.substring(1).toUpperCase()}}]),e}()},function(e,t,n){"use strict";n.d(t,"b",function(){return P}),n.d(t,"e",function(){return i}),n.d(t,"c",function(){return r}),n.d(t,"f",function(){return a}),n.d(t,"d",function(){return o}),n.d(t,"a",function(){return c}),n.d(t,"g",function(){return D});var i,r,a,o,s,l,c,u=n(168),h=n.n(u),d=n(73),p=n.n(d),v=n(35),f=n.n(v),g=n(36),m=n.n(g),E=n(39),y=n.n(E),T=n(44),_=n.n(T),I=n(38),C=n.n(I),S=n(46),w=n.n(S),k=n(40),R=n.n(k),L=n(37),O=n.n(L),A=n(103),b=n(105),P=function(e){function t(){var e;f()(this,t),e=y()(this,C()(t).call(this)),O()(_()(e),"onboundchange",null),O()(_()(e),"calculated",!1),O()(_()(e),"textdata",new Array),O()(_()(e),"fillBackground",!1),O()(_()(e),"backgroundColor",i.RGB),O()(_()(e),"upperCase",!1),O()(_()(e),"verticalAlign",a.TOP),O()(_()(e),"listStyle",l.NONE),O()(_()(e),"curve",{active:!1,cw:!0}),O()(_()(e),"gradient",{active:!1,presetKey:"",angle:i.NUMBER.valueOf(),color1:i.RGB.valueOf(),color2:i.RGB.valueOf(),color3:i.RGB.valueOf(),color4:i.RGB.valueOf(),alpha1:255,alpha2:255,alpha3:255,alpha4:255,isNewFormat:!0}),O()(_()(e),"mask",{active:!1,stickerId:""});var n={align:r.LEFT,lineSpace:i.LINE_SPACE.valueOf(),chars:[]};e.textdata[0]=n;var o=N();return e.textdata[0].chars[0]=o,e}return R()(t,e),m()(t,[{key:"isForcedUpdate",value:function(){var e=w()(C()(t.prototype),"isForcedUpdate",this).call(this);return this.forcedUpdate=!1,e}},{key:"forceUpdate",value:function(){this.forcedUpdate=!0}},{key:"makeClone",value:function(){return new t}},{key:"clone",value:function(){var e=w()(C()(t.prototype),"clone",this).call(this);e.textdata=[];for(var n=0;n<this.textdata.length;n++){for(var i=this.textdata[n],r={align:i.align,chars:[],lineSpace:i.lineSpace},a=0;a<i.chars.length;a++)r.chars[a]=M(i.chars[a]);e.textdata[n]=r}return e}},{key:"getRGBA",value:function(e,t){return"rgba("+parseInt(e.substr(1,2),16)+", "+parseInt(e.substr(3,2),16)+", "+parseInt(e.substr(5,2),16)+", "+t+")"}},{key:"checkEachChar",value:function(e,t,n,i){var r=0,a=this.textdata.length-1;if(n&&i&&(n.col!==i.col||n.row!==i.row)){var o=Object(b.d)(n,i);n=o.firstSel,i=o.lastSel,this.textdata[n.row].chars.length===n.col&&0===i.col?(n=null,i=null):(r=n.row,a=i.row)}else n=null,i=null;try{for(var s=r;s<=a;s++){t&&t(this.textdata[s]);var l=0,c=this.textdata[s].chars.length-1;s===r&&n&&(l=n.col),s===a&&i&&(c=i.col-1);for(var u=l;u<=c;u++)e(this.textdata[s].chars[u])}}catch(e){console.log("여기서 에러남!!"+e)}}},{key:"getCharProp",value:function(e,t,n,i){var r,a=!0;return this.checkEachChar(function(n){a?(r=e(n),a=!1):r!==e(n)&&(r=t)},null,n,i),r}},{key:"setCharProp",value:function(e,t,n,i,r){arguments.length>5&&void 0!==arguments[5]&&arguments[5];var a=!1;this.checkEachChar(function(i){e(i)!==n&&(t(i),a=!0)},null,i,r),a&&this.updateRevision()}},{key:"checkEachLine",value:function(e,t,n){var i=0,r=this.textdata.length-1;if(t&&n){var a=Object(b.d)(t,n);i=a.firstSel.row,r=a.lastSel.row}for(var o=i;o<=r;o++){e(this.textdata[o])}}},{key:"getLineProps",value:function(e,t,n,i){var r,a=!0;return this.checkEachLine(function(n){if(a)r=e(n),a=!1;else if(r!==e(n))return r=t,!1;return!0},n,i),r}},{key:"setLineProp",value:function(e,t,n,i,r){arguments.length>5&&void 0!==arguments[5]&&arguments[5];var a=!1;this.checkEachLine(function(i){return e(i)!==n&&(t(i),a=!0),!0},i,r),a&&this.updateRevision()}},{key:"forEachChar",value:function(e){e&&this.textdata.forEach(function(t){return t.chars.forEach(function(t){return e(t)})})}},{key:"getCharList",value:function(){var e=[];return this.textdata.forEach(function(t){return t.chars.forEach(function(t){return e.push(t)})}),e}},{key:"getCharsOfLines",value:function(){var e=[];return this.textdata.forEach(function(t){return e.push(t.chars)}),e}},{key:"forEachLine",value:function(e){e&&this.textdata.forEach(function(t){return e(t)})}},{key:"recalculatePos",value:function(){this.onboundchange&&(this.calculated=this.onboundchange(this))}},{key:"getLineLength",value:function(){return this.textdata.length}},{key:"getLine",value:function(e){return this.textdata[e]}},{key:"getLineView",value:function(e){var t={line:this.textdata[e],getLength:function(){return this.getText().length},isEmpty:function(){return 0===this.line.chars.length&&""===this.line.chars[0].char},getText:function(){for(var e="",t=0;t<this.line.chars.length;t++)e+=this.line.chars[t].char;return e}};return t}},{key:"getXmlText",value:function(){for(var e="",t=0;t<this.textdata.length;t++)for(var n=0;n<this.textdata[t].chars.length;n++)e+=this.textdata[t].chars[n].char;return e}},{key:"getText",value:function(){for(var e="",t=0;t<this.textdata.length;t++){for(var n=0;n<this.textdata[t].chars.length;n++)e+=this.textdata[t].chars[n].char;t+1<this.textdata.length&&(e+="\n")}return e}},{key:"correctTextdata",value:function(e){for(var t=0;t<this.textdata.length;t++){var n=this.textdata[t];if(0===n.chars.length){var i=M(e);i.char="",n.chars.push(i)}else D(n)||""!==n.chars[n.chars.length-1].char||n.chars.splice(n.chars.length-1)}}},{key:"deleteText",value:function(e,t){if(e.col===t.col&&e.row===t.row)return[];this.updateRevision();var n=Object(b.d)(e,t),i=n.firstSel,r=n.lastSel,a=[];if(i.row===r.row){if(i.col!==r.col){var o=this.textdata[i.row],s={align:o.align,lineSpace:o.lineSpace,chars:[]};s.chars=this.textdata[i.row].chars.splice(i.col,r.col-i.col),a.push(s)}}else{var l,c=this.textdata[i.row];a.push({align:c.align,lineSpace:c.lineSpace,chars:c.chars.splice(i.col)});var u={align:(c=this.textdata[r.row]).align,lineSpace:c.lineSpace,chars:c.chars.splice(0,r.col)},h=this.textdata[r.row].chars;r.row-1-i.row>0&&a.push.apply(a,p()(this.textdata.splice(i.row+1,r.row-1-i.row))),a.push(u),(l=this.textdata[i.row].chars).push.apply(l,p()(h)),this.textdata.splice(i.row+1,1)}var d=M(a[0].chars[0]);return d.char="",this.correctTextdata(d),this.recalculatePos(),a}},{key:"getPosText",value:function(e,t){if(e.col===t.col&&e.row===t.row)return[];for(var n=Object(b.d)(e,t),i=n.firstSel,r=n.lastSel,a=[],o=i.row;o<=r.row;o++){for(var s=this.textdata[o],l={align:s.align,lineSpace:s.lineSpace,chars:[]},c=o===i.row?i.col:0,u=o===r.row?r.col:s.chars.length,h=c;h<u;h++)l.chars.push(M(s.chars[h]));a.push(l)}return a}},{key:"insertText",value:function(e,t){var n,i,r={col:0,row:0};if("string"==typeof t){if(0===t.length)return e;var a,o=(t=t.replace("\r","")).split("\n");a=0===e.col?0:e.col-1,i=this.textdata[e.row].chars[a];var s=this.textdata[e.row];n=[];for(var l=0;l<o.length;l++){var c=x(s);c.chars.splice(0);for(var u=0;u<o[l].length;u++){var h=M(i);o[l][u].charCodeAt(0)>31&&(h.char=o[l][u],c.chars.push(h))}n[l]=c}}else Array.isArray(t)&&(n=t);if(n.length>0){this.updateRevision(),r.row=e.row+n.length-1,1===n.length&&(r.col=e.col);var d,v=0;if(D(n[n.length-1])||(v=n[n.length-1].chars.length),r.col+=v,D(this.textdata[e.row]))D(n[0])||(this.textdata[e.row].chars=n[0].chars);else{var f,g,m=this.textdata[e.row].chars.splice(e.col);if(m.length>0)if(D(n[n.length-1]))n[n.length-1].chars=m;else(f=n[n.length-1].chars).push.apply(f,p()(m));if(!D(n[0]))(g=this.textdata[e.row].chars).splice.apply(g,[e.col,0].concat(p()(n[0].chars)))}if(n.splice(0,1),n.length>0)(d=this.textdata).splice.apply(d,[e.row+1,0].concat(p()(n)));return this.correctTextdata(i),this.recalculatePos(),r}}},{key:"setText",value:function(e){this.getText()!==e&&this.updateRevision();var t=this.textdata[0].chars[0],n=this.textdata[0];if(this.textdata.splice(0),""===e)t.char="",n.chars.splice(0),n.chars.push(t),this.textdata.push(n);else for(var i=e.toString().split("\n"),r=0;r<i.length;r++){var a=x(n);a.chars.splice(0),this.textdata.push(a);for(var o=0;o<i[r].length;o++){var s=M(t);s.char=i[r][o],a.chars.push(s)}}this.correctTextdata(t),this.recalculatePos()}},{key:"getCharValues",value:function(e,t,n){var i,r=[];return this.checkEachChar(function(t){i.push(e(t))},function(e){i=[],r.push(i)},t,n),r}},{key:"getDuplicateValExcludedCharValues",value:function(e,t,n){var i=[];return this.checkEachChar(function(t){var n=e(t);i.indexOf(n)<0&&i.push(n)},null,t,n),i}},{key:"getLineValues",value:function(e,t,n){var i=[];return this.checkEachLine(function(t){i.push(e(t))},t,n),i}},{key:"setCharValues",value:function(e,t,n,i,r){var a,o;Array.isArray(e)?a=function(t,n){return e[t][n]}:(o=e,a=function(){return o});var s=!1,l=-1,c=0;this.checkEachChar(function(e){var i=a(l,c++);i!==t(e)&&(n(e,i),s=!0)},function(){c=0,l++},i,r),s&&this.updateRevision()}},{key:"setLineValues",value:function(e,t,n,i,r){var a;a=Array.isArray(e)?function(t){return e[t]}:function(){return e};var o=!1,s=0;this.checkEachLine(function(e){var i=a(s);i!==t(e)&&(n(e,i),o=!0),s++},i,r),o&&this.updateRevision()}},{key:"getSize",value:function(e,t){var n=this.getCharProp(function(e){return e.size},-1,e,t);return n=n*b.b*this.lastRenderEditScale,Math.round(10*n)/10}},{key:"getSizeStr",value:function(e,t){var n=this.getCharProp(function(e){return e.size},-1,e,t);return-1===n?" ":"".concat(Math.round(n*b.b*this.lastRenderEditScale*10)/10)}},{key:"getSizes",value:function(e,t){var n=this;return this.getCharValues(function(e){return e.size*b.b*n.lastRenderEditScale},e,t)}},{key:"setSize",value:function(e,t,n){var i;if(Array.isArray(e)){var r=JSON.parse(JSON.stringify(e)),a=!0,o=!1,s=void 0;try{for(var l,c=r[Symbol.iterator]();!(a=(l=c.next()).done);a=!0)for(var u=l.value,h=0;h<u.length;h++)u[h]=Number(u[h])/b.b/this.lastRenderEditScale}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}i=r}else i=Number(e)/b.b/this.lastRenderEditScale;this.setCharValues(i,function(e){return e.size},function(e,t){return e.size=t},t,n),this.recalculatePos()}},{key:"getAbsSize",value:function(e,t){return this.getCharProp(function(e){return e.size},-1,e,t)}},{key:"setAbsSize",value:function(e,t,n){var i=Number(e);this.setCharProp(function(e){return e.size},function(e){e.size=i},e,t,n),this.recalculatePos()}},{key:"getColor",value:function(e,t){return this.getCharProp(function(e){return e.color},i.RGB,e,t)}},{key:"getColors",value:function(e,t){return this.getCharValues(function(e){return e.color},e,t)}},{key:"getDuplicateValExcludedColors",value:function(e,t){return this.getDuplicateValExcludedCharValues(function(e){return e.color},e,t)}},{key:"setColor",value:function(e,t,n){this.setCharValues(e,function(e){return e.color},function(e,t){return e.color=t},t,n)}},{key:"isFillBackground",value:function(){return this.fillBackground}},{key:"setFillBackground",value:function(e){this.fillBackground!==e&&this.updateRevision(),this.fillBackground=!0===e,this.fillBackground||(this.backgroundColor="00000000")}},{key:"getBackgroundColor",value:function(){return this.backgroundColor}},{key:"setBackgroundColor",value:function(e){var t=A.a.parseColorString(e);this.fillBackground=t.alpha>0,(this.backgroundColor!==t.rgb||!this.fillBackground&&this.backgroundColor!==e)&&this.updateRevision(),this.backgroundColor=this.fillBackground?t.rgb:e}},{key:"getFamily",value:function(e,t){return this.getCharProp(function(e){return e.styles.family},"",e,t)}},{key:"getFamilys",value:function(e,t){return this.getCharValues(function(e){return e.styles.family},e,t)}},{key:"setFamily",value:function(e,t,n){this.setCharValues(e,function(e){return e.styles.family},function(e,t){return e.styles.family=t},t,n),this.recalculatePos()}},{key:"isBold",value:function(e,t){return this.getCharProp(function(e){return e.styles.bold},!1,e,t)}},{key:"isBolds",value:function(e,t){return this.getCharValues(function(e){return e.styles.bold},e,t)}},{key:"setBold",value:function(e,t,n){var i;if(Array.isArray(e)){i=[];for(var r=0;r<e.length;r++){i[r]=[];for(var a=0;a<e[r].length;a++)i[r][a]=!0===e[r][a]}}else i=!0===e;this.setCharValues(i,function(e){return e.styles.bold},function(e,t){return e.styles.bold=t},t,n),this.recalculatePos()}},{key:"isItalic",value:function(e,t){return this.getCharProp(function(e){return e.styles.italic},!1,e,t)}},{key:"isItalics",value:function(e,t){return this.getCharValues(function(e){return e.styles.italic},e,t)}},{key:"setItalic",value:function(e,t,n){var i;if(Array.isArray(e)){i=[];for(var r=0;r<e.length;r++){i[r]=[];for(var a=0;a<e[r].length;a++)i[r][a]=!0===e[r][a]}}else i=!0===e;this.setCharValues(i,function(e){return e.styles.italic},function(e,t){return e.styles.italic=t},t,n),this.recalculatePos()}},{key:"isStrikeout",value:function(e,t){return this.getCharProp(function(e){return e.styles.strikeout},!1,e,t)}},{key:"isStrikeouts",value:function(e,t){return this.getCharValues(function(e){return e.styles.strikeout},e,t)}},{key:"setStrikeout",value:function(e,t,n){var i;if(Array.isArray(e)){i=[];for(var r=0;r<e.length;r++){i[r]=[];for(var a=0;a<e[r].length;a++)i[r][a]=!0===e[r][a]}}else i=!0===e;this.setCharValues(i,function(e){return e.styles.strikeout},function(e,t){return e.styles.strikeout=t},t,n)}},{key:"isUnderline",value:function(e,t){return this.getCharProp(function(e){return e.styles.underline},!1,e,t)}},{key:"isUnderlines",value:function(e,t){return this.getCharValues(function(e){return e.styles.underline},e,t)}},{key:"setUnderline",value:function(e,t,n){var i;if(Array.isArray(e)){i=[];for(var r=0;r<e.length;r++){i[r]=[];for(var a=0;a<e[r].length;a++)i[r][a]=!0===e[r][a]}}else i=!0===e;this.setCharValues(i,function(e){return e.styles.underline},function(e,t){return e.styles.underline=t},t,n)}},{key:"isUpperCase",value:function(){return this.upperCase}},{key:"setUpperCase",value:function(e){this.upperCase!==e&&this.updateRevision(),this.upperCase=!0===e}},{key:"setFontColor",value:function(e,t,n){var i=A.a.parseColorString(e);this.opacity=i.alpha,this.setCharProp(function(e){return e.color},function(e){e.color=i.rgb},i.rgb,t,n)}},{key:"getTextAlign",value:function(e,t){return this.getLineProps(function(e){return e.align},r.LEFT,e,t)}},{key:"setTextAlign",value:function(e,t,n){return this.setLineProp(function(e){return e.align},function(t){t.align=e},e,t,n)}},{key:"getTextAlignXml",value:function(){switch(this.textdata[0].align){case r.LEFT:return o.LEFT;case r.CENTER:return o.CENTER;case r.RIGHT:return o.RIGHT}throw Error("textAlign : ".concat(this.textdata[0].align))}},{key:"setTextAlignXml",value:function(e){switch(e){case o.LEFT:return void this.setTextAlign(r.LEFT);case o.CENTER:return void this.setTextAlign(r.CENTER);case o.RIGHT:return void this.setTextAlign(r.RIGHT)}}},{key:"getVerticalAlign",value:function(){return this.verticalAlign}},{key:"setVerticalAlign",value:function(e){this.verticalAlign!==e&&this.updateRevision(),this.verticalAlign=e}},{key:"getVerticalAlignXml",value:function(){switch(this.verticalAlign){case a.TOP:return s.TOP;case a.CENTER:return s.CENTER;case a.BOTTOM:return s.BOTTOM}throw Error("verticalAlign : ".concat(this.verticalAlign))}},{key:"setVerticalAlignXml",value:function(e){switch(e){case s.TOP:return void this.setVerticalAlign(a.TOP);case s.CENTER:return void this.setVerticalAlign(a.CENTER);case s.BOTTOM:return void this.setVerticalAlign(a.BOTTOM)}}},{key:"isActiveFontDetail",value:function(e,t){return this.getCharProp(function(e){return e.fontdetail.active},!0,e,t)}},{key:"isActiveOutline",value:function(e,t){return this.getCharProp(function(e){return e.outline.active},!1,e,t)}},{key:"isActiveOutlines",value:function(e,t){return this.getCharValues(function(e){return e.outline.active},e,t)}},{key:"isActiveShadow",value:function(e,t){return this.getCharProp(function(e){return e.shadow.active},!1,e,t)}},{key:"isCanActiveShadow",value:function(){return!0}},{key:"isActiveShadows",value:function(e,t){return this.getCharValues(function(e){return e.shadow.active},e,t)}},{key:"isActiveGradient",value:function(e,t){return this.gradient.active}},{key:"setActiveFontDetail",value:function(e,t,n){this.setCharProp(function(e){return e.fontdetail.active},function(t){t.fontdetail.active=!0===e},!0===e,t,n),this.recalculatePos()}},{key:"setActiveShadow",value:function(e,t,n){this.setCharProp(function(e){return e.shadow.active},function(t){t.shadow.active=!0===e},!0===e,t,n)}},{key:"setActiveOutline",value:function(e,t,n){this.setCharProp(function(e){return e.outline.active},function(t){t.outline.active=!0===e,t.outline.alpha=255},!0===e,t,n)}},{key:"setActiveGradient",value:function(e,t,n){this.setCharProp(function(e){return e.filltype===c.GRADATION},function(e){e.filltype=c.GRADATION},!0===e,t,n),this.gradient.active=!0===e,this.gradient.active||this.setFillType(c.COLOR)}},{key:"getMaskId",value:function(e){return e||this.mask.active?this.mask.stickerId:""}},{key:"setActiveMask",value:function(e,t,n,i){this.mask.active!==e&&this.updateRevision(),this.mask.active=!0===e&&"string"==typeof t,this.mask.active&&(this.mask.stickerId=t)}},{key:"setMaskStickerId",value:function(e){this.mask.stickerId!==e&&this.updateRevision(),this.mask.stickerId=e}},{key:"getFillType",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0;return this.getCharProp(function(e){return e.filltype},c.COLOR,e,t)}},{key:"setFillType",value:function(e,t,n){var i;if(this.updateRevision(),"string"==typeof e)switch(e.toUpperCase()){case c.GRADATION.toString().toUpperCase():i=c.GRADATION;break;case c.COLOR.toString().toUpperCase():i=c.COLOR;break;case c.MASK.toString().toUpperCase():i=c.MASK}else i=e;this.setCharProp(function(e){return e.filltype},function(e){e.filltype=i},i,t,n)}},{key:"getFontDetailTextSpace",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return Math.floor(this.getCharProp(function(t){return e||t.fontdetail.active?t.fontdetail.textSpace:i.TEXT_SPACE},i.TEXT_SPACE,t,n))}},{key:"getFontDetailTextSpaces",value:function(e,t){return this.getCharValues(function(e){return e.fontdetail.textSpace},e,t)}},{key:"setFontDetailTextSpaceXml",value:function(e){var t=Math.round(10*e);this.setCharProp(function(e){return e.fontdetail.textSpace},function(e){e.fontdetail.textSpace=t},t,void 0,void 0,!0)}},{key:"setFontDetailTextSpace",value:function(e,t,n){var i;if(Array.isArray(e)){i=[];for(var r=0;r<e.length;r++){i[r]=[];for(var a=0;a<e[r].length;a++)i[r][a]=Number(e[r][a])}}else i=Number(e);this.setCharValues(i,function(e){return e.fontdetail.textSpace},function(e,t){return e.fontdetail.textSpace=t},t,n),this.recalculatePos()}},{key:"getFontDetailLineSpace",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0;return Math.floor(this.getLineProps(function(e){return e.lineSpace},i.LINE_SPACE,e,t))}},{key:"getFontDetailLineSpaces",value:function(e,t){return this.getLineValues(function(e){return e.lineSpace},e,t)}},{key:"setFontDetailLineSpaceXml",value:function(e){var t=Math.round(e);this.setLineProp(function(e){return e.lineSpace},function(e){e.lineSpace=t},t,null,null,!0)}},{key:"setFontDetailLineSpace",value:function(e,t,n){if(Array.isArray(e))for(var i=0;i<e.length;i++)e[i]=Number(e[i]);else e=Number(e);this.setLineValues(e,function(e){return e.lineSpace},function(e,t){return e.lineSpace=t},t,n),this.recalculatePos()}},{key:"getFontDetailScaleXAcc",value:function(){return this.getCharProp(function(e){return e.fontdetail.active?e.fontdetail.scaleX:i.SCALE_X},i.SCALE_X)}},{key:"getFontDetailScaleX",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return Math.floor(this.getCharProp(function(t){return e||t.fontdetail.active?t.fontdetail.scaleX:i.SCALE_X},i.SCALE_X,t,n))}},{key:"setFontDetailScaleX",value:function(e,t,n,i){if(t){var r=Math.round(100*e);this.setCharProp(function(e){return e.fontdetail.scaleX},function(e){return e.fontdetail.scaleX=r},r,n,i,!0)}else this.setCharProp(function(e){return e.fontdetail.scaleX},function(t){return t.fontdetail.scaleX=Number(e)},Number(e),n,i);this.recalculatePos()}},{key:"isActiveCurve",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.curve.active}},{key:"setActiveCurve",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.updateRevision(),this.curve.active=!0===e,this.curve.active&&!t?this.bottom=this.right-this.left+this.top:this.recalculatePos()}},{key:"isCurveCw",value:function(){return this.curve.cw}},{key:"setCurveCw",value:function(e){this.updateRevision(),this.curve.cw=!0===e}},{key:"getOutlineColor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.getCharProp(function(t){return e||t.outline.active?t.outline.color:i.RGB},i.RGB,t,n)}},{key:"getOutlineColors",value:function(e,t){return this.getCharValues(function(e){return e.outline.color},e,t)}},{key:"getDuplicateValExcludedOutlineColors",value:function(e,t){return this.getDuplicateValExcludedCharValues(function(e){return e.outline.color},e,t)}},{key:"setOutlineColor",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(i){var r=A.a.parseColorString(e);this.setCharValues(e,function(e){return e.outline.color},function(e,t){e.outline.color=r.rgb,e.outline.alpha=r.alpha},t,n)}else this.setCharValues(e,function(e){return e.outline.color},function(e,t){e.outline.color=t},t,n)}},{key:"getOutlineStyleStr",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;return this.getCharProp(function(n){return t||n.outline.active?e.getRGBA(n.outline.color,n.outline.alpha):i.RGBA},i.RGBA,n,r)}},{key:"getOutlineAlpha",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.getCharProp(function(t){return e||t.outline.active?t.outline.alpha:i.NUMBER},i.NUMBER,t,n)}},{key:"getOutlineAlphas",value:function(e,t){return this.getCharValues(function(e){return e.outline.alpha},e,t)}},{key:"setOutlineAlpha",value:function(e,t,n){var i;Array.isArray(e)||(i=Number(e)),this.setCharValues(i,function(e){return e.outline.alpha},function(e,t){e.outline.alpha=t},t,n)}},{key:"getOutlineSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.getCharProp(function(t){return e||t.outline.active?t.outline.size:i.NUMBER},i.NUMBER,t,n)}},{key:"getOutlineSizes",value:function(e,t){return this.getCharValues(function(e){return e.outline.size},e,t)}},{key:"setOutlineSize",value:function(e,t,n){var i;if(Array.isArray(e)){i=[];for(var r=0;r<e.length;r++){i[r]=[];for(var a=0;a<e[r].length;a++)i[r][a]=Number(e[r][a])}}else i=Number(e);this.setCharValues(i,function(e){return e.outline.size},function(e,t){e.outline.size=t},t,n)}},{key:"getOutlinePresetKey",value:function(e,t){return this.getCharProp(function(e){return e.outline.presetKey},"",e,t)}},{key:"setOutlinePresetKey",value:function(e,t,n){this.setCharProp(function(e){return e.outline.presetKey},function(t){t.outline.presetKey=e},e,t,n)}},{key:"getShadowColor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.getCharProp(function(t){return e||t.shadow.active?t.shadow.color:i.RGB},i.RGB,t,n)}},{key:"getShadowColors",value:function(e,t){return this.getCharValues(function(e){return e.shadow.color},e,t)}},{key:"getDuplicateValExcludedShadowColors",value:function(e,t){return this.getDuplicateValExcludedCharValues(function(e){return e.shadow.color},e,t)}},{key:"setShadowColor",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(i){this.updateRevision();var r=A.a.parseColorString(e);this.setCharValues(e,function(e){return e.shadow.color},function(e,t){e.shadow.color=r.rgb,e.shadow.alpha=r.alpha},t,n)}else this.setCharValues(e,function(e){return e.shadow.color},function(e,t){e.shadow.color=t},t,n)}},{key:"getShadowAlpha",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.getCharProp(function(t){return e||t.shadow.active?t.shadow.alpha:i.NUMBER},i.NUMBER,t,n)}},{key:"getShadowAlphas",value:function(e,t){return this.getCharValues(function(e){return e.shadow.alpha},e,t)}},{key:"setShadowAlpha",value:function(e,t,n){Array.isArray(e)||(e=Number(e)),this.setCharValues(e,function(e){return e.shadow.alpha},function(e,t){e.shadow.alpha=t},t,n)}},{key:"getShadowDistance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.getCharProp(function(t){return e||t.shadow.active?t.shadow.distance:i.NUMBER},i.NUMBER,t,n)}},{key:"getShadowDistances",value:function(e,t){return this.getCharValues(function(e){return e.shadow.distance},e,t)}},{key:"setShadowDistance",value:function(e,t,n){Array.isArray(e)||(e=Number(e)),this.setCharValues(e,function(e){return e.shadow.distance},function(e,t){e.shadow.distance=t},t,n)}},{key:"getShadowAngle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=this.getCharProp(function(t){return e||t.shadow.active?t.shadow.angle:i.NUMBER},i.NUMBER,t,n)-180;return r<0&&(r+=360),r}},{key:"getShadowAngles",value:function(e,t){return this.getCharValues(function(e){var t=e.shadow.angle-180;return t<0&&(t+=360),t},e,t)}},{key:"setShadowAngle",value:function(e,t,n){function i(e){var t=e;return(t+=360===t?540:180)>=360&&(t-=360),t}if(Array.isArray(e))for(var r=0;r<e.length;r++)for(var a=0;a<e[r].length;a++)e[r][a]=i(Number(e[r][a]));else e=i(Number(e));this.setCharValues(e,function(e){return e.shadow.angle},function(e,t){e.shadow.angle=t},t,n)}},{key:"getShadowSize",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&arguments[1],arguments.length>2&&arguments[2];return 1}},{key:"getShadowSizes",value:function(e,t){return this.getCharValues(function(e){return e.shadow.size},e,t)}},{key:"setShadowSize",value:function(e,t,n){this.setCharProp(function(e){return e.shadow.size},function(e){e.shadow.size=1},1,t,n)}},{key:"getShadowSpread",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.getCharProp(function(t){return e||t.shadow.active?t.shadow.spread:i.NUMBER},i.NUMBER,t,n)}},{key:"getShadowSpreads",value:function(e,t){return this.getCharValues(function(e){return e.shadow.spread},e,t)}},{key:"setShadowSpread",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=e;Array.isArray(e)||(r=i?10*e:Number(e)),this.setCharValues(r,function(e){return e.shadow.spread},function(e,t){e.shadow.spread=t},t,n)}},{key:"getShadowPresetKey",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0;return this.getCharProp(function(e){return e.shadow.presetKey},"",e,t)}},{key:"getShadowPresetKeys",value:function(e,t){return this.getCharValues(function(e){return e.shadow.presetKey},e,t)}},{key:"setShadowPresetKey",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;this.setCharProp(function(e){return e.shadow.presetKey},function(t){t.shadow.presetKey=e},e,t,n)}},{key:"setGradientNewFormat",value:function(e){this.gradient.isNewFormat=!0===e}},{key:"isGradientNewFormat",value:function(){return this.gradient.isNewFormat}},{key:"getGradientAngle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e||this.gradient.active?this.gradient.angle:i.NUMBER}},{key:"setGradientAngle",value:function(e){this.gradient.angle!==Number(e)&&this.updateRevision(),this.gradient.angle=Number(e)}},{key:"getGradientColor1",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e||this.gradient.active?this.gradient.color1:i.RGB}},{key:"setGradientColor1",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=A.a.parseColorString(e);this.gradient.color1===t.rgb&&this.gradient.alpha1===t.alpha||this.updateRevision(),this.gradient.color1=t.rgb,this.gradient.alpha1=t.alpha,this.gradient.isNewFormat&&(this.gradient.color2=t.rgb,this.gradient.alpha2=t.alpha)}},{key:"getGradientColor2",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e||this.gradient.active?this.gradient.color2:i.RGB}},{key:"setGradientColor2",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=A.a.parseColorString(e);this.gradient.color2===t.rgb&&this.gradient.alpha2===t.alpha||this.updateRevision(),this.gradient.color2=t.rgb,this.gradient.alpha2=t.alpha}},{key:"getGradientColor3",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e||this.gradient.active?this.gradient.color3:i.RGB}},{key:"setGradientColor3",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=A.a.parseColorString(e);this.gradient.color3===t.rgb&&this.gradient.alpha3===t.alpha||this.updateRevision(),this.gradient.color3=t.rgb,this.gradient.alpha3=t.alpha,this.gradient.isNewFormat&&(this.gradient.color4=t.rgb,this.gradient.alpha4=t.alpha)}},{key:"getGradientColor4",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e||this.gradient.active?this.gradient.color4:i.RGB}},{key:"setGradientColor4",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=A.a.parseColorString(e);this.gradient.color4===t.rgb&&this.gradient.alpha4===t.alpha||this.updateRevision(),this.gradient.color4=t.rgb,this.gradient.alpha4=t.alpha}},{key:"getGradientPresetKey",value:function(){return this.gradient.presetKey}},{key:"setGradientPresetKey",value:function(e){this.gradient.presetKey=e}},{key:"getGradientAlpha1",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e||this.gradient.active?this.gradient.alpha1:i.NUMBER}},{key:"getGradientAlpha2",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e||this.gradient.active?this.gradient.alpha2:i.NUMBER}},{key:"getGradientAlpha3",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e||this.gradient.active?this.gradient.alpha3:i.NUMBER}},{key:"getGradientAlpha4",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e||this.gradient.active?this.gradient.alpha4:i.NUMBER}},{key:"isListStyleBullet",value:function(){return this.listStyle===l.BULLET}},{key:"setListStyleBullet",value:function(e){var t=!0===e?l.BULLET:l.NONE;this.listStyle!==t&&this.updateRevision(),this.listStyle=t}},{key:"isListStyleNumber",value:function(){return this.listStyle===l.NUMBER}},{key:"setListStyleNumber",value:function(e){var t=!0===e?l.NUMBER:l.NONE;this.listStyle!==t&&this.updateRevision(),this.listStyle=t}},{key:"setTextData",value:function(e){for(var t=JSON.parse(e.replace(/\n/g,"")),n=[],a=0;a<t.length;a++){var o=t[a],s={align:r.LEFT,lineSpace:0,chars:[]};switch(o.a){case 0:s.align=r.LEFT;break;case 1:s.align=r.CENTER;break;case 2:s.align=r.RIGHT}s.lineSpace=o.s;for(var l=0;l<o.c.length;l++){var u=o.c[l];if(""!==u.yf){var h=N();switch(h.color=u.c,h.size=u.z>0?u.z:i.FONT_SIZE,u.f){case 0:h.filltype=c.COLOR;break;case 1:h.filltype=c.GRADATION;break;case 2:h.filltype=c.MASK}if(h.fontdetail.active=u.da,h.fontdetail.scaleX=u.dx,h.fontdetail.textSpace=u.ds,h.outline.active=u.oa,h.outline.alpha=u.ol,h.outline.color=u.oc,h.outline.presetKey=u.op,h.outline.size=u.oz,h.shadow.active=u.sa,h.shadow.alpha=null!=u.sl?u.sl:255,h.shadow.active?h.shadow.angle=u.sg||i.NUMBER:h.shadow.angle=i.NUMBER,h.shadow.color=u.sc||"#000000",h.shadow.distance=u.sd||0,h.shadow.presetKey=u.sp,h.shadow.size=u.sz||0,h.shadow.spread=u.sr||0,h.styles.bold=u.yb,h.styles.family=u.yf,h.styles.italic=u.yi,h.styles.underline=u.yu,h.styles.strikeout=u.yt,u.t.length>0)for(var d=0;d<u.t.length;d++){var p=M(h);p.char=u.t[d],s.chars.push(p)}else{var v=M(h);v.char="",s.chars.push(v)}}}s.chars.length>0&&n.push(s)}n.length>0&&(this.textdata=n)}},{key:"getTextData",value:function(){for(var e,t,n=[],i=0;i<this.textdata.length;i++){var a={},o=this.textdata[i];switch(o.align){case r.LEFT:a.a=0;break;case r.CENTER:a.a=1;break;case r.RIGHT:a.a=2}a.s=o.lineSpace,a.c=[];for(var s=void 0,l=0;l<o.chars.length;l++){var u=o.chars[l];if("\n"!==u.char)if(0===l||(e=o.chars[l-1],t=u,e.styles.bold!==t.styles.bold||e.styles.italic!==t.styles.italic||e.styles.strikeout!==t.styles.strikeout||e.styles.underline!==t.styles.underline||e.filltype!==t.filltype||e.color!==t.color||e.styles.family!==t.styles.family||e.size!==t.size||e.fontdetail.active!==t.fontdetail.active||e.fontdetail.scaleX!==t.fontdetail.scaleX||e.fontdetail.textSpace!==t.fontdetail.textSpace||e.outline.active!==t.outline.active||e.outline.alpha!==t.outline.alpha||e.outline.color!==t.outline.color||e.outline.size!==t.outline.size||e.shadow.active!==t.shadow.active||e.shadow.alpha!==t.shadow.alpha||e.shadow.angle!==t.shadow.angle||e.shadow.color!==t.shadow.color||e.shadow.distance!==t.shadow.distance||e.shadow.size!==t.shadow.size||e.shadow.spread!==t.shadow.spread)){switch((s={}).t=u.char,s.c=u.color,s.z=u.size,u.filltype){case c.COLOR:s.f=0;break;case c.GRADATION:s.f=1;break;case c.MASK:s.f=2}s.da=u.fontdetail.active,s.dx=u.fontdetail.scaleX,s.ds=u.fontdetail.textSpace,s.oa=u.outline.active,s.ol=u.outline.alpha,s.oc=u.outline.color,s.op=u.outline.presetKey,s.oz=u.outline.size,s.sa=u.shadow.active,s.sl=u.shadow.alpha,s.sg=u.shadow.angle,s.sc=u.shadow.color,s.sd=u.shadow.distance,s.sp=u.shadow.presetKey,s.sz=u.shadow.size,s.sr=u.shadow.spread,s.yb=u.styles.bold,s.yf=u.styles.family,s.yi=u.styles.italic,s.yu=u.styles.underline,s.yt=u.styles.strikeout,a.c.push(s)}else s.t+=u.char}n.push(a)}return JSON.stringify(n)}},{key:"isLegacy",value:function(){return!0===this.legacyMode}},{key:"setLegacy",value:function(e){this.legacyMode=e}},{key:"getLastCharPos",value:function(){return{row:this.textdata.length-1,col:this.textdata[this.textdata.length-1].chars.length}}}]),t}(A.a);function N(){return{char:"",styles:{family:"THE명품고딕R",bold:!1,italic:!1,strikeout:!1,underline:!1},filltype:c.COLOR,color:i.RGB.valueOf(),size:i.FONT_SIZE.valueOf(),fontdetail:{active:!0,textSpace:i.NUMBER.valueOf(),scaleX:i.SCALE_X.valueOf()},outline:{active:!1,presetKey:"",color:i.RGB.valueOf(),size:i.NUMBER.valueOf(),alpha:i.ALPHA.valueOf()},shadow:{active:!1,presetKey:"",color:i.RGB.valueOf(),alpha:i.NUMBER.valueOf(),distance:i.NUMBER.valueOf(),angle:i.NUMBER.valueOf(),size:i.NUMBER.valueOf(),spread:i.NUMBER.valueOf()}}}function x(e){return{lineSpace:e.lineSpace,align:e.align,chars:[]}}function M(e){var t=N(),n=e;for(var i in n){var r=n[i];Array.isArray(r)?t[i]=r.concat([]):"object"===h()(r)?t[i]=Object.assign({},r):t[i]=r}return t}function D(e){return 1===e.chars.length&&""===e.chars[0].char}!function(e){e.RGB="#000000",e[e.NUMBER=0]="NUMBER",e[e.TEXT_SPACE=0]="TEXT_SPACE",e[e.LINE_SPACE=0]="LINE_SPACE",e[e.SCALE_X=100]="SCALE_X",e[e.BEZIER_PERCENT=0]="BEZIER_PERCENT",e[e.ALPHA=255]="ALPHA",e.RGBA="rgba(0, 0, 0, 255)",e[e.FONT_SIZE=6]="FONT_SIZE"}(i||(i={})),function(e){e.LEFT="LEFT",e.CENTER="CENTER",e.RIGHT="RIGHT"}(r||(r={})),function(e){e.TOP="TOP",e.CENTER="CENTER",e.BOTTOM="BOTTOM"}(a||(a={})),function(e){e[e.LEFT=0]="LEFT",e[e.CENTER=2]="CENTER",e[e.RIGHT=1]="RIGHT"}(o||(o={})),function(e){e[e.TOP=0]="TOP",e[e.CENTER=2]="CENTER",e[e.BOTTOM=1]="BOTTOM"}(s||(s={})),function(e){e.NONE="none",e.BULLET="bullet",e.NUMBER="number"}(l||(l={})),function(e){e.GRADATION="Gradient",e.COLOR="Color",e.MASK="Mask"}(c||(c={}))},function(e,t,n){"use strict";function i(e,t){var n,i;return e.row>t.row?(i=e,n=t):e.row<t.row?(n=e,i=t):e.col>t.col?(i=e,n=t):(n=e,i=t),{firstSel:n,lastSel:i}}n.d(t,"d",function(){return i}),n.d(t,"b",function(){return r}),n.d(t,"c",function(){return a}),n.d(t,"a",function(){return o});var r=1.3333;function a(e){return"text_"+(t=e,btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,function(e,t){return String.fromCharCode(parseInt("0x"+t))}))).replace(/\+/g,"_").replace(/\//g,"-").replace(/=/g,"");var t}var o="THE명품고딕R"},,function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"c",function(){return r}),n.d(t,"b",function(){return A});var i,r,a=n(39),o=n.n(a),s=n(38),l=n.n(s),c=n(40),u=n.n(c),h=n(73),d=n.n(h),p=n(0),v=n.n(p),f=n(1),g=n.n(f),m=n(35),E=n.n(m),y=n(36),T=n.n(y),_=n(37),I=n.n(_),C=n(43),S=n(3),w=n(47),k=n(101),R=n(52),L=n(42),O=n(230);!function(e){e[e.IMAGE=3011]="IMAGE",e[e.ILLUST=3012]="ILLUST",e[e.ICON=3013]="ICON",e[e.FIGURE=3014]="FIGURE",e[e.BACKGROUND=14820]="BACKGROUND",e[e.ETC=3015]="ETC"}(i||(i={})),function(e){e[e.SIZE_43=43]="SIZE_43",e[e.SIZE_50=50]="SIZE_50",e[e.SIZE_60=60]="SIZE_60",e[e.SIZE_90=90]="SIZE_90",e[e.SIZE_100=100]="SIZE_100",e[e.SIZE_150=150]="SIZE_150",e[e.SIZE_196=196]="SIZE_196",e[e.SIZE_200=200]="SIZE_200",e[e.SIZE_400=400]="SIZE_400"}(r||(r={}));var A=function(){function e(){E()(this,e)}var t,n,a;return T()(e,null,[{key:"getThumbnail",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.SIZE_400;return"".concat(S.CRM.get(C.a.STICKER_THUMB_HOST),"/").concat(e.substring(0,4),"/").concat(e,"/thumb").concat(t,".png")}},{key:"getList",value:function(e){var t=this,n=[];return e&&0!==e.length?(e.forEach(function(e){n.push({id:e,thumbImgUrl:t.getThumbnail(e)})}),n):n}},{key:"selectOne",value:(a=g()(v.a.mark(function e(t){var n,i,r,a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.cache.has(t)){e.next=2;break}return e.abrupt("return",this.cache.get(t));case 2:return n=S.CRM.get(C.a.STICKER_API_URL).replace("${id}",encodeURIComponent(t)),i=k.a.from(R.a.BIZHOWS,!0).getURL(n),w.UnicornApiClient.isInit()&&(i=w.UnicornApiClient.getURL("")+"/res?url="+encodeURIComponent(n)),e.next=7,w.ApiRequest.get(b,i);case 7:return r=e.sent,null!=(a=r.stickerInfo)&&this.cache.set(t,a),e.abrupt("return",a);case 11:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"insert",value:(n=g()(v.a.mark(function e(t){var n,r,a,o;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(L.a.getEnv().adminMode){e.next=2;break}return e.abrupt("return");case 2:return n={fileKey:t.fileKey,stickerId:t.stickerId,stickerName:t.stickerName,fileName:t.fileName,designerId:t.designerId,licenseCode:t.license.code,deployType:O.a.getBit.apply(O.a,d()(t.deployTypeList)),categoryId:i.ETC,active:t.stickerStatus},r=S.CRM.get(C.a.STICKER_UPLOAD_API_URL),e.next=6,w.UnicornApiRequest.post(r,{data:n});case 6:if(a=e.sent,200===(o=JSON.parse(a.data)).result_code){e.next=10;break}throw Error(o.msg);case 10:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)})},{key:"update",value:(t=g()(v.a.mark(function e(t){var n,i,r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(L.a.getEnv().adminMode){e.next=2;break}return e.abrupt("return");case 2:return n={id:t.stickerId,name:t.stickerName,deployType:String(O.a.getBit.apply(O.a,d()(t.deployTypeList))),active:t.stickerStatus,licenseCode:String(t.license.code),designerId:t.designerId,keywordList:t.keywordList?t.keywordList.join(","):"",categoryList:t.categoryList?t.categoryList.join(","):""},i=S.CRM.get(C.a.STICKER_UPDATE_API_URL),r=k.a.from(R.a.BIZHOWS,!0).getURL(i),e.next=7,w.ApiRequest.post(w.DefaultApiResponse,r,{data:n});case 7:this.cache.delete(t.stickerId);case 8:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})}]),e}();I()(A,"cache",new Map);var b=function(e){function t(){return E()(this,t),o()(this,l()(t).apply(this,arguments))}return u()(t,e),T()(t,[{key:"getErrorMsg",value:function(){return""}},{key:"setData",value:function(e){this._stickerInfo=e.data}},{key:"stickerInfo",get:function(){return this._stickerInfo}}]),t}(w.ApiResponse)},,,function(e,t,n){"use strict";n.d(t,"a",function(){return I});var i=n(35),r=n.n(i),a=n(36),o=n.n(a),s=n(39),l=n.n(s),c=n(38),u=n.n(c),h=n(44),d=n.n(h),p=n(40),v=n.n(p),f=n(37),g=n.n(f),m=n(80),E=n(41),y=n(3),T=n(287),_=n(12),I=function(e){function t(e,n,i){var a,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(r()(this,t),a=l()(this,u()(t).call(this,"div",[E.a.COLOR_PICKER_ITEM])),g()(d()(a),"canNotAppend",!1),a.listener=e,a.icon=n,a.isAccordionItem=null!=i,a.colorControl=new T.a(a.listener,o,s),a.isAccordionItem){var c=document.createElement("label");c.innerText=y.CRM.get(i)||"",a.wrap.appendChild(c)}else{var h=document.createElement("div");Object(_.setToolsIcon)(h,n),a.wrap.appendChild(h)}var p=document.createElement("div");p.className=E.a.VALUE_ELEMENT,a.wrap.appendChild(p),a.valueBoxOuter=p;var v=document.createElement("div");return v.className=E.a.COLOR_ELEMENT,p.appendChild(v),a.valueBoxInner=v,a.addEventListener(),a}return v()(t,e),o()(t,[{key:"updateUI",value:function(e){e.isMultiColor?this.valueBoxInner.classList.add(E.a.MULTI_COLOR):this.valueBoxInner.classList.remove(E.a.MULTI_COLOR);var t,n=e.value;t=8===n.length?"00"===n.substr(6,2)?"":"#"+n.substr(0,6):9===n.length&&"#"===n.substr(0,1)?"00"===n.substr(7,2)?"":n.substr(0,7):n,null!=e.active&&(this.active=!0===e.active),this.valueBoxOuter&&this.valueBoxInner&&(this.valueBoxInner.style.backgroundColor=e.isMultiColor?"rgb(0, 0, 0, 0)":t,this.colorControl.updateUI({value:this.valueBoxInner.style.backgroundColor}),this.valueBoxInner.style.backgroundColor?(this.valueBoxOuter.removeAttribute("data-transparent"),this.valueBoxInner.classList.remove(E.a.TRANSPARENT)):(this.valueBoxOuter.setAttribute("data-transparent","true"),this.valueBoxInner.classList.add(E.a.TRANSPARENT)))}},{key:"getColorPickerPopup",value:function(){return this.colorControl.getPopup()}},{key:"addEventListener",value:function(){var e=this;$(this.valueBoxOuter).on("mousedown touchstart",function(e){return e.stopPropagation()}).on("click",function(t){if(e.active){var n=e.valueBoxInner.style.backgroundColor,i=$(e.valueBoxOuter).offset(),r=i.left+e.valueBoxOuter.offsetWidth/2,a=i.top+e.valueBoxOuter.offsetHeight/2;e.colorControl.openColorControl({value:n,canNotAppend:e.canNotAppend,isMultiColor:"rgba(0, 0, 0, 0)"===n},r,a)}})}},{key:"setColor",value:function(e){this.updateUI({value:e}),this.listener(e)}}]),t}(m.a)},function(e,t,n){"use strict";var i=n(35),r=n.n(i),a=n(36),o=n.n(a),s=n(52),l=n(158),c=n(39),u=n.n(c),h=n(38),d=n.n(h),p=n(40),v=n.n(p),f=n(194),g=n(198),m=n(197),E=n(219),y=n(195),T=n(199),_=n(200),I=n(201),C=n(202),S=function(e){function t(){return r()(this,t),u()(this,d()(t).apply(this,arguments))}return v()(t,e),o()(t,[{key:"getTextParser",value:function(e){return"1.2.0.2"===e?new g.b:new g.c}},{key:"getStickerParser",value:function(e){return new m.a}},{key:"getPhotoParser",value:function(e){return new E.a}},{key:"getCalendarParser",value:function(e){return null}},{key:"getSvgParser",value:function(e){return new y.a}},{key:"getPrivateSvgParser",value:function(e){return new C.a}},{key:"getBasicSvgParser",value:function(e){return new _.a}},{key:"getShapeSvgParser",value:function(e){return new I.a}},{key:"getSvgImageframeParser",value:function(e){return new T.a(this.getPhotoParser(e))}},{key:"getRepositoryType",value:function(){return s.a.BIZHOWS}}]),t}(f.a),w=function(e){function t(){return r()(this,t),u()(this,d()(t).apply(this,arguments))}return v()(t,e),o()(t,[{key:"getTextParser",value:function(e){return"1.2.0.2"===e?new g.b:new g.c}},{key:"getStickerParser",value:function(e){return new m.a}},{key:"getPhotoParser",value:function(e){return new E.a}},{key:"getCalendarParser",value:function(e){return null}},{key:"getSvgParser",value:function(e){return new y.a}},{key:"getPrivateSvgParser",value:function(e){return new C.a}},{key:"getBasicSvgParser",value:function(e){return new _.a}},{key:"getShapeSvgParser",value:function(e){return new I.a}},{key:"getSvgImageframeParser",value:function(e){return new T.a(this.getPhotoParser(e))}},{key:"getRepositoryType",value:function(){return s.a.BIZHOWS}}]),t}(f.a),k=function(e){function t(){return r()(this,t),u()(this,d()(t).apply(this,arguments))}return v()(t,e),o()(t,[{key:"getTextParser",value:function(e){return"1.2.0.2"===e?new g.b:new g.c}},{key:"getStickerParser",value:function(e){return new m.a}},{key:"getPhotoParser",value:function(e){return new E.a}},{key:"getCalendarParser",value:function(e){return null}},{key:"getSvgParser",value:function(e){return new y.a}},{key:"getPrivateSvgParser",value:function(e){return new C.a}},{key:"getBasicSvgParser",value:function(e){return new _.a}},{key:"getShapeSvgParser",value:function(e){return new I.a}},{key:"getSvgImageframeParser",value:function(e){return new T.a(this.getPhotoParser(e))}},{key:"getRepositoryType",value:function(){return s.a.BIZHOWS}}]),t}(f.a),R=n(264),L=function(e){function t(e){return r()(this,t),u()(this,d()(t).call(this,e))}return v()(t,e),o()(t,[{key:"makeMeta",value:function(){var e=this.param.code1,t=this.param.code2,n=this.param.code3;switch(e){case 5e3:return new k(e,t,n);case 7e3:return new w(e,t,n);default:return new S(e,t,n)}}}]),t}(R.a),O=function(e){function t(){return r()(this,t),u()(this,d()(t).apply(this,arguments))}return v()(t,e),o()(t,[{key:"getTextParser",value:function(e){return"1.2.0.2"===e?new g.b:new g.c}},{key:"getStickerParser",value:function(e){return new m.a}},{key:"getPhotoParser",value:function(e){return new E.b}},{key:"getCalendarParser",value:function(e){return null}},{key:"getSvgParser",value:function(e){return new y.a}},{key:"getPrivateSvgParser",value:function(e){return new C.a}},{key:"getBasicSvgParser",value:function(e){return new _.a}},{key:"getShapeSvgParser",value:function(e){return new I.a}},{key:"getSvgImageframeParser",value:function(e){return new T.a(this.getPhotoParser(e))}},{key:"getRepositoryType",value:function(){return s.a.SMILECAT}}]),t}(f.a),A=function(e){function t(e){return r()(this,t),u()(this,d()(t).call(this,e))}return v()(t,e),o()(t,[{key:"makeMeta",value:function(){var e=this.param.code1,t=this.param.code2,n=this.param.code3;switch(e){case 100:case 200:default:return new O(e,t,n)}}}]),t}(R.a),b=n(3),P=n(48);n.d(t,"a",function(){return N});var N=function(){function e(){r()(this,e)}return o()(e,null,[{key:"make",value:function(e){if(null==e)return new l.c({blank:!0,idx:0,repositoryType:s.a.UNICORN,resourceType:P.a.TEMPLATE,width:Number(b.RequestUtil.get(b.RequestParamKey.SHEET_W)),height:Number(b.RequestUtil.get(b.RequestParamKey.SHEET_H)),templateTypeId:b.RequestUtil.get(b.RequestParamKey.TEMPLATE_TYPE_ID)});switch(e.repositoryType){case s.a.UNICORN:if(b.ArrayUtil.isEmpty(e.sheetKeyList)){var t=e;return t.resourceType===P.a.TEMPLATE?new l.c(t):new l.d(t)}return new l.b(e);case s.a.BIZHOWS:return new L(e);case s.a.SMILECAT:return new A(e)}throw new Error("디자인 초기화 실패 'ㅡ' : ".concat(e.repositoryType,", ").concat(e))}}]),e}()},,,function(e,t,n){"use strict";n.d(t,"b",function(){return T}),n.d(t,"a",function(){return i});var i,r=n(35),a=n.n(r),o=n(36),s=n.n(o),l=n(39),c=n.n(l),u=n(44),h=n.n(u),d=n(38),p=n.n(d),v=n(46),f=n.n(v),g=n(40),m=n.n(g),E=n(37),y=n.n(E),T=function(e){function t(){var e,n;a()(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return n=c()(this,(e=p()(t)).call.apply(e,[this].concat(o))),y()(h()(n),"colorMap",new Map),y()(h()(n),"colorRevision",0),y()(h()(n),"thumbRevision",0),y()(h()(n),"isPropsColorInit",!1),y()(h()(n),"shadow",{active:!1,color:i.RGB.valueOf(),angle:i.NUMBER.valueOf(),alpha:i.NUMBER.valueOf(),distance:i.NUMBER.valueOf(),blur:i.NUMBER.valueOf()}),n}return m()(t,e),s()(t,[{key:"getCurrentOriginColor",value:function(){return this.currentOriginColor}},{key:"setCurrentOriginColor",value:function(e){this.currentOriginColor=e.toLowerCase()}},{key:"getColor",value:function(){var e=this.colorMap.get(this.currentOriginColor);return"none"===e&&(e="#00000000"),e}},{key:"setColor",value:function(e){e=9===e.length&&"00"===e.substr(7,2)?"none":e.toLowerCase(),this.colorMap.get(this.currentOriginColor)!==e&&(this.updateThumbRevision(),this.updateRevision(),this.colorRevision++),this.colorMap.set(this.currentOriginColor,e)}},{key:"setPosition",value:function(e,n,i,r){i-e==this.right-this.left&&r-n==this.bottom-this.top||this.updateThumbRevision(),f()(p()(t.prototype),"setPosition",this).call(this,e,n,i,r)}},{key:"setLeft",value:function(e){this.left!==Number(e)&&this.updateThumbRevision(),f()(p()(t.prototype),"setLeft",this).call(this,e)}},{key:"setTop",value:function(e){this.top!==Number(e)&&this.updateThumbRevision(),f()(p()(t.prototype),"setTop",this).call(this,e)}},{key:"setRight",value:function(e){this.right!==Number(e)&&this.updateThumbRevision(),f()(p()(t.prototype),"setRight",this).call(this,e)}},{key:"setBottom",value:function(e){this.bottom!==Number(e)&&this.updateThumbRevision(),f()(p()(t.prototype),"setBottom",this).call(this,e)}},{key:"setOpacity",value:function(e){this.opacity!==Number(e)&&this.updateThumbRevision(),f()(p()(t.prototype),"setOpacity",this).call(this,e)}},{key:"setRotate",value:function(e){this.rotate!==Number(e)&&this.isActiveShadow()&&this.changeRotateSetRevision&&this.updateRevision(),f()(p()(t.prototype),"setRotate",this).call(this,e)}},{key:"setFlipH",value:function(e){this.flipH!==e&&this.updateThumbRevision(),f()(p()(t.prototype),"setFlipH",this).call(this,e)}},{key:"setFlipV",value:function(e){this.flipV!==e&&this.updateThumbRevision(),f()(p()(t.prototype),"setFlipV",this).call(this,e)}},{key:"isActiveShadow",value:function(){return this.shadow.active}},{key:"isCanActiveShadow",value:function(){return!0}},{key:"setActiveShadow",value:function(e){this.shadow.active!==e&&(this.updateRevision(),this.setChangePositionSetRevision(!0===e)),this.shadow.active=!0===e}},{key:"getColorCount",value:function(){return this.colorMap.size}},{key:"getColorMap",value:function(){return this.colorMap}},{key:"getColorRevision",value:function(){return this.colorRevision}},{key:"getShadowColor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e||this.shadow.active?this.shadow.color:i.RGB}},{key:"setShadowColor",value:function(e){this.shadow.color!==e&&this.updateRevision(),this.shadow.color=e}},{key:"getShadowAngle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e||this.shadow.active?this.shadow.angle:i.NUMBER}},{key:"setShadowAngle",value:function(e){this.shadow.angle!==Number(e)&&this.updateRevision(),this.shadow.angle=Number(e)}},{key:"getShadowAlpha",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e||this.shadow.active?this.shadow.alpha:i.NUMBER}},{key:"setShadowAlpha",value:function(e){this.shadow.alpha!==Number(e)&&this.updateRevision(),this.shadow.alpha=Number(e)}},{key:"getShadowDistance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e||this.shadow.active?this.shadow.distance:i.NUMBER}},{key:"setShadowDistance",value:function(e){this.shadow.distance!==Number(e)&&this.updateRevision(),this.shadow.distance=Number(e)}},{key:"getShadowBlur",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e||this.shadow.active?this.shadow.blur:i.NUMBER}},{key:"setShadowBlur",value:function(e){this.shadow.blur!==Number(e)&&this.updateRevision(),this.shadow.blur=Number(e)}},{key:"makeClone",value:function(){return new t}},{key:"clone",value:function(){var e=f()(p()(t.prototype),"clone",this).call(this);return e.colorMap=new Map,this.colorMap.forEach(function(t,n){e.colorMap.set(n,t)}),e}},{key:"getThumbnailRevision",value:function(){return this.changeRenderPropsToUpdateThumb&&(this.changeRenderPropsToUpdateThumb=!1,this.thumbRevision++),this.thumbRevision}},{key:"updateThumbRevision",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.changeRenderPropsToUpdateThumb=!0===e}},{key:"isColorInit",value:function(){return this.isPropsColorInit}},{key:"initColor",value:function(){this.isPropsColorInit=!0}}]),t}(n(103).a);y()(T,"MIN_PATTERN_COUNT_RATIO",1),y()(T,"MAX_PATTERN_COUNT_RATIO",6),function(e){e.RGB="#000000",e[e.NUMBER=0]="NUMBER"}(i||(i={}))},,function(e,t,n){"use strict";n.d(t,"b",function(){return T}),n.d(t,"c",function(){return i}),n.d(t,"a",function(){return _}),n.d(t,"d",function(){return S}),n.d(t,"e",function(){return C});var i,r=n(0),a=n.n(r),o=n(1),s=n.n(o),l=n(35),c=n.n(l),u=n(36),h=n.n(u),d=n(37),p=n.n(d),v=n(49),f=n(62),g=n(104),m=n(317),E=n(318),y=n(105),T=function(){function e(t){c()(this,e),p()(this,"childCells",[this]),p()(this,"selected",!1),p()(this,"cellType",i.NONE),p()(this,"visible",!0),p()(this,"isTextEditMode",!1),this.gridItem=t,this.cellProps=new m.a,this.borders=new I(this)}var t;return h()(e,[{key:"init",value:function(){this.borders.init(),this.initChildTextItem()}},{key:"initChildTextItem",value:function(){this.childTextItem=new f.b("".concat((new Date).getTime(),"-").concat(Math.random()),0,0,0,0),this.childTextItem.props.setAbsSize(13),this.childTextItem.props.setFontDetailScaleX(100,!1),this.childTextItem.props.setTextAlign(g.c.CENTER),this.childTextItem.props.setVerticalAlign(g.f.CENTER),this.childTextItem.props.setFamily("에스코어 드림 4"),this.childTextItem.props.setColor("#000000"),this.childTextItem.props.setBackgroundColor("#00000000"),this.childTextItem.props.setText("")}},{key:"getCellRect",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.borders.left.getLineThickness(e)/2,n=this.borders.top.getLineThickness(e)/2,i=this.getWidth(e)-this.borders.right.getLineThickness(e)/2,r=this.getHeight(e)-this.borders.bottom.getLineThickness(e)/2;return new v.a(t,n,i,r)}},{key:"repositionTextItem",value:function(t,n){t.props.lastRenderEditScale=1/y.b,t.zoomscale=this.gridItem.zoomScale;var i=this.getCellRect(n),r=new v.a(this.getLeft()+i.left+e.CELL_PADDING,this.getTop()+i.top+e.CELL_PADDING,this.getLeft()+i.right-e.CELL_PADDING,this.getTop()+i.bottom-e.CELL_PADDING);t.props.setPosition(r.left,r.top,r.right,r.bottom)}},{key:"renderText",value:(t=s()(a.a.mark(function e(t,n){var i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.childTextItem,e.next=3,i.updateSVG(!0,!0);case 3:case"end":return e.stop()}},e,this)})),function(e,n){return t.apply(this,arguments)})},{key:"renderBackground",value:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0];var e=100/this.gridItem.getWidth(),t=100/this.gridItem.getHeight(),n="#00000000"===this.cellProps.getCellBackgroundColor();return'<rect x="'.concat(this.getLeft()*e,'%" y="').concat(this.getTop()*t,'%" \n            width="').concat(this.getWidth()*e,'%" height="').concat(this.getHeight()*t,'%" \n            fill="').concat(this.cellProps.getCellBackgroundColor(),'" ').concat(n?'opacity="0"':"","/>")}},{key:"renderBorder",value:function(e,t){var n=this.getBorder(e);n&&n.visible&&n.render(t)}},{key:"merged",value:function(e){this.masterCell=this.gridItem.cells[e.startPos.row][e.startPos.col],this.masterCell!==this?(this.visible=!1,this.cellType=i.SLAVE):this.cellType=i.MASTER}},{key:"splited",value:function(){this.cellType=i.NONE,this.visible=!0,this.masterCell=null}},{key:"getBorder",value:function(e){switch(e){case _.LEFT:return this.borders.left;case _.TOP:return this.borders.top;case _.RIGHT:return this.borders.right;case _.BOTTOM:return this.borders.bottom;case _.DOWNDIAGONAL:return this.borders.downDiagonal;case _.UPDIAGONAL:return this.borders.upDiagonal}throw new Error("타입이없는 border가있다... : ".concat(e))}},{key:"synchronizeBorder",value:function(e){var t=e.ownerCell.childCellsPos.startPos,n=e.ownerCell.childCellsPos.endPos;switch(e.type){case _.LEFT:t.col>0&&this.gridItem.cells[t.row][t.col-1].borders.right.assign(e);break;case _.TOP:t.row>0&&this.gridItem.cells[t.row-1][t.col].borders.bottom.assign(e);break;case _.RIGHT:n.col<this.gridItem.col-1&&this.gridItem.cells[n.row][n.col+1].borders.left.assign(e);break;case _.BOTTOM:n.row<this.gridItem.row-1&&this.gridItem.cells[n.row+1][n.col].borders.top.assign(e)}}},{key:"assignValue",value:function(e){this.innerText=e.innerText}},{key:"assignCellStyle",value:function(e){this.cellProps.setCellBackgroundColor(e.cellProps.getCellBackgroundColor())}},{key:"assignFontStyle",value:function(e){this.textProps.setFamily(e.textProps.getFamily()),this.textProps.setAbsSize(e.textProps.getAbsSize()),this.textProps.setColor(e.textProps.getColor()),this.textProps.setTextAlign(e.textProps.getTextAlign()),this.textProps.setVerticalAlign(e.textProps.getVerticalAlign()),this.textProps.setBold(e.textProps.isBold()),this.textProps.setItalic(e.textProps.isItalic()),this.textProps.setUpperCase(e.textProps.isUpperCase()),this.textProps.setFontDetailTextSpaceXml(e.textProps.getFontDetailTextSpace()),this.textProps.setFontDetailLineSpaceXml(e.textProps.getFontDetailLineSpace()),this.textProps.setFontDetailScaleX(e.textProps.getFontDetailScaleX(),!1)}},{key:"assignBorderStyle",value:function(e){this.borders.assign(e.borders)}},{key:"clone",value:function(){var t=new e(this.gridItem);return t.init(),t.cellType=this.cellType,t.childTextItem=this.childTextItem.clone(),t.assignCellStyle(this),t.assignFontStyle(this),t.assignValue(this),t}},{key:"getWidth",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.gridItem.positionTool.getCellsWidth(this.childCellsPos,e)}},{key:"getHeight",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.gridItem.positionTool.getCellsHeight(this.childCellsPos,e)}},{key:"getLeft",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=0,n=0;n<this.col;n++)t+=this.gridItem.cols[n].thickness;return t*e}},{key:"getTop",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=0,n=0;n<this.row;n++)t+=this.gridItem.rows[n].thickness;return t*e}},{key:"doHitTest",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.gridItem.lastRenderEditScale;return e>=this.getLeft(n)&&e<=this.getLeft(n)+this.getWidth(n)&&t>=this.getTop(n)&&t<=this.getTop(n)+this.getHeight(n)}},{key:"pushChildCell",value:function(e){this.childCells.every(function(t){return t!==e})&&this.childCells.push(e)}},{key:"pushChildCells",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,a=e[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;Array.isArray(o)?this.pushChildCells(o):this.pushChildCell(o)}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}}},{key:"clearChildCell",value:function(){this.childCells=[this]}},{key:"getChildCells",value:function(){return this.childCells}},{key:"textProps",get:function(){return this.childTextItem.props},set:function(e){this.childTextItem.props=e}},{key:"innerText",get:function(){return this.childTextItem.props.getText()},set:function(e){this.childTextItem.props.setText(e)}},{key:"row",get:function(){return this.gridItem.getCellRow(this)}},{key:"col",get:function(){return this.gridItem.getCellCol(this)}},{key:"childCellsPos",get:function(){var e={startPos:{row:this.row,col:this.col},endPos:{row:this.row,col:this.col}};return this.childCells.forEach(function(t){t.col>=0&&t.row>=0&&(e.startPos.row=Math.min(e.startPos.row,t.row),e.startPos.col=Math.min(e.startPos.col,t.col),e.endPos.row=Math.max(e.endPos.row,t.row),e.endPos.col=Math.max(e.endPos.col,t.col))}),e}}]),e}();p()(T,"CELL_PADDING",2),function(e){e.NONE="none",e.MASTER="master",e.SLAVE="slave"}(i||(i={}));var _,I=function(){function e(t){c()(this,e),this.ownerCell=t}return h()(e,[{key:"init",value:function(){this.left=new E.a(this.ownerCell,_.LEFT,2),this.top=new E.a(this.ownerCell,_.TOP,2),this.right=new E.a(this.ownerCell,_.RIGHT,2),this.bottom=new E.a(this.ownerCell,_.BOTTOM,2),this.downDiagonal=new E.a(this.ownerCell,_.DOWNDIAGONAL,2),this.downDiagonal.visible=!1,this.upDiagonal=new E.a(this.ownerCell,_.UPDIAGONAL,2),this.upDiagonal.visible=!1}},{key:"assign",value:function(e){this.left.assign(e.left),this.right.assign(e.right),this.top.assign(e.top),this.bottom.assign(e.bottom),this.downDiagonal.assign(e.downDiagonal),this.upDiagonal.assign(e.upDiagonal)}},{key:"clone",value:function(){var t=new e(this.ownerCell);return t.left=this.left.clone(),t.right=this.right.clone(),t.top=this.top.clone(),t.bottom=this.bottom.clone(),t.downDiagonal=this.downDiagonal.clone(),t.upDiagonal=this.upDiagonal.clone(),t}}]),e}();!function(e){e.LEFT="left",e.TOP="top",e.RIGHT="right",e.BOTTOM="bottom",e.DOWNDIAGONAL="downDiagonal",e.UPDIAGONAL="upDiagonal"}(_||(_={}));var C,S=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;c()(this,e),p()(this,"minThicknessCellPos",[]),this.ownerItem=t,this.lineType=n,this.initThickness=i,this.lineThickness=i}return h()(e,[{key:"updateThicknessRatio",value:function(){this.lineType===C.COL?this.lineThicknessRatio=this.thickness/this.ownerItem.getWidth():this.lineThicknessRatio=this.thickness/this.ownerItem.getHeight()}},{key:"validateDeltaThickness",value:function(e){return e<0&&this.lineThickness+e<this.minThickness?Math.min(this.minThickness-this.lineThickness,0):e}},{key:"clone",value:function(){var t=new e(this.ownerItem,this.lineType,this.initThickness);return t.lineThicknessRatio=this.lineThicknessRatio,t.lineThickness=this.lineThickness,t}},{key:"assign",value:function(e){this.lineThickness=e.lineThickness}},{key:"minThickness",get:function(){var e=this,t=2*T.CELL_PADDING,n=[],r=t;if(this.lineType===C.COL){var a=this.ownerItem.cols.indexOf(this),o=!0,s=!1,l=void 0;try{for(var c,u=function(){var r=c.value,o=void 0,s=r[a],l=s.borders.left.getLineThickness(1)/2,u=s.borders.right.getLineThickness(1)/2;if(s.masterCell&&s.masterCell.col!==a&&s.cellType!==i.MASTER?s.masterCell.childTextItem.renderdata.foreach(s.masterCell.childTextItem.props,1,null,[function(e,n,i,r,a,s,c,h){var d=h.advance;o=t+d+l+u}],null):s.childTextItem.props.getText().length>0?s.childTextItem.renderdata.foreach(s.childTextItem.props,1,null,[function(e,n,i,r,a,s,c,h){var d=h.advance;o=t+d+l+u}],null):o=t+l+u,s.masterCell&&s.masterCell.childCellsPos.startPos.col!==s.masterCell.childCellsPos.endPos.col){for(var h=0,d=s.masterCell.childCellsPos.startPos.col;d<=s.masterCell.childCellsPos.endPos.col;d++)d!==a&&(h+=e.ownerItem.cols[d].thickness);o=Math.max(o-h,t+l+u)}n.push(o)},h=this.ownerItem.cells[Symbol.iterator]();!(o=(c=h.next()).done);o=!0)u()}catch(e){s=!0,l=e}finally{try{o||null==h.return||h.return()}finally{if(s)throw l}}for(var d=0,p=n;d<p.length;d++){var v=p[d];r=Math.max(r,v)}this.minThicknessCellPos=[];for(var f=0;f<n.length;f++){n[f]===r&&this.minThicknessCellPos.push({row:f,col:a})}}else{var g=this.ownerItem.rows.indexOf(this),m=this.ownerItem.cells[g],E=!0,y=!1,_=void 0;try{for(var I,S=m[Symbol.iterator]();!(E=(I=S.next()).done);E=!0){var w=I.value,k=void 0,R=w.borders.top.getLineThickness(1)/2,L=w.borders.bottom.getLineThickness(1)/2;if(w.masterCell&&w.masterCell.row!==g&&w.cellType!==i.MASTER){var O=w.masterCell.childTextItem.renderdata.getCalculated(w.masterCell.childTextItem.props,1).pureTextBound.y2;k=t+O+R+L}else if(w.childTextItem.props.getText().length>0){var A=w.childTextItem.renderdata.getCalculated(w.childTextItem.props,1).pureTextBound.y2;k=t+A+R+L}else k=t+R+L;if(w.masterCell&&w.masterCell.childCellsPos.startPos.row!==w.masterCell.childCellsPos.endPos.row){for(var b=0,P=w.masterCell.childCellsPos.startPos.row;P<=w.masterCell.childCellsPos.endPos.row;P++)P!==g&&(b+=this.ownerItem.rows[P].thickness);k=Math.max(k-b,t+R+L)}n.push(k)}}catch(e){y=!0,_=e}finally{try{E||null==S.return||S.return()}finally{if(y)throw _}}for(var N=0,x=n;N<x.length;N++){var M=x[N];r=Math.max(r,M)}this.minThicknessCellPos=[];for(var D=0;D<n.length;D++){n[D]===r&&this.minThicknessCellPos.push({row:g,col:D})}}return r}},{key:"thicknessRatio",get:function(){return this.lineThicknessRatio},set:function(e){this.lineThicknessRatio=e}},{key:"thickness",get:function(){return this.lineThickness},set:function(e){e<this.minThickness&&(e=this.minThickness),this.lineThickness=e;var t=2*T.CELL_PADDING;if(this.lineType===C.COL){var n=this.ownerItem.cols.indexOf(this),i=!0,r=!1,a=void 0;try{for(var o,s=this.ownerItem.cells[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var l=o.value[n],c=l.borders.left.getLineThickness(1)/2,u=l.borders.right.getLineThickness(1)/2;if(l.childTextItem.props.setRight(l.childTextItem.props.getLeft()+this.thickness-(t+c+u)),l.isResizedByHeightChange){var h=l.childTextItem,d=l.borders.top.getLineThickness(1)/2,p=l.borders.bottom.getLineThickness(1)/2,v=h.renderdata.getCalculated(h.props,1).pureTextBound.y2+t+d+p;if(l.getHeight()>v)this.ownerItem.rows[l.row].thickness=v}}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}}else{var f=this.ownerItem.rows.indexOf(this),g=this.ownerItem.cells[f],m=!0,E=!1,y=void 0;try{for(var _,I=g[Symbol.iterator]();!(m=(_=I.next()).done);m=!0){var S=_.value;S.childTextItem.props.setBottom(S.childTextItem.props.getTop()+this.thickness-t)}}catch(e){E=!0,y=e}finally{try{m||null==I.return||I.return()}finally{if(E)throw y}}}}}]),e}();!function(e){e.ROW="ROW",e.COL="COL"}(C||(C={}))},,,,,,,function(e,t,n){"use strict";n.d(t,"b",function(){return f}),n.d(t,"a",function(){return m}),n.d(t,"c",function(){return i});var i,r=n(37),a=n.n(r),o=n(35),s=n.n(o),l=n(36),c=n.n(l),u=n(41),h=n(42),d=n(222),p=n(244),v=n(49),f=function(){function e(){s()(this,e),this.horGuidelineFactory=new g(i.HOR,0),this.verGuidelineFactory=new g(i.VER,0)}return c()(e,[{key:"makeDefaultGuideLine",value:function(){this.horGuidelineFactory.init(),this.horGuidelineFactory.makeGuidelineAuto(),this.verGuidelineFactory.init(),this.verGuidelineFactory.makeGuidelineAuto()}},{key:"getGuidelineFactoryInfo",value:function(e){return e===i.HOR?this.horGuidelineFactory.getGuidelineFactoryInfo():this.verGuidelineFactory.getGuidelineFactoryInfo()}},{key:"getGuidelineFactoryInfos",value:function(){return{Hor:this.horGuidelineFactory.getGuidelineFactoryInfo(),Ver:this.verGuidelineFactory.getGuidelineFactoryInfo()}}},{key:"registGuidelineInfo",value:function(e,t){(e===i.HOR?this.horGuidelineFactory:this.verGuidelineFactory).registGuidelineInfo(t)}},{key:"registGuidelineInfos",value:function(e){this.horGuidelineFactory.init(),this.registGuidelineInfo(i.HOR,e.Hor),this.verGuidelineFactory.init(),this.registGuidelineInfo(i.VER,e.Ver)}},{key:"getSnapTargetDataArray",value:function(){return this.horGuidelineFactory.makeSnapTargetData().concat(this.verGuidelineFactory.makeSnapTargetData())}}]),e}(),g=function(){function e(t,n){s()(this,e),a()(this,"nowPosition",0),a()(this,"plus",!0),a()(this,"guidelines",[]),this.type=t,this.maxPosition=n}return c()(e,[{key:"init",value:function(){this.guidelines=[],this.nowPosition=0,this.plus=!0}},{key:"makeGuideline",value:function(e,t){var n=new m(e,t);return this.guidelines.push(n),n}},{key:"makeGuidelineAuto",value:function(){if(this.nowPosition<=-1*this.maxPosition)return null;var e=this.makeGuideline(this.type,this.nowPosition);return this.setNextPosition(),e}},{key:"setNextPosition",value:function(){for(var e=this;this.guidelines.some(function(t){return t.lastPosition===e.nowPosition});)this.nowPosition=this.getNextPosition()}},{key:"setNowPosition",value:function(e){this.nowPosition=e}},{key:"getNowPosition",value:function(){return this.nowPosition}},{key:"getNextPosition",value:function(){var e=this.nowPosition;return this.plus?(e+=10)>=this.maxPosition&&(this.plus=!1,e=-10):e-=10,e}},{key:"getMaxPosition",value:function(){return this.maxPosition}},{key:"removeLastGuideline",value:function(){var e=this.guidelines.splice(this.guidelines.length-1,1);return e&&e.length?(this.nowPosition=e[0].initPosition,this.plus=this.nowPosition>=0,e[0]):null}},{key:"removeGuideline",value:function(e){return this.nowPosition=e.initPosition,this.guidelines.splice(this.guidelines.indexOf(e),1)[0]}},{key:"getGuidelines",value:function(){return this.guidelines}},{key:"registGuideline",value:function(e,t){var n=this.guidelines.splice(t,this.guidelines.length-t);this.guidelines=this.guidelines.concat(e).concat(n)}},{key:"registGuidelineInfo",value:function(e){this.nowPosition=0===e.guidelines.length?0:e.nowPosition,this.plus=e.plus;var t=[];e.guidelines.forEach(function(e){var n=new m(e.type,e.initPosition);n.setLastPosition(e.lastPosition),t.push(n)}),this.guidelines=t}},{key:"getGuidelineFactoryInfo",value:function(){return{guidelines:this.guidelines.slice(),nowPosition:this.nowPosition,plus:this.plus}}},{key:"setMaxPosition",value:function(e){this.maxPosition=e}},{key:"setGuidelinePosition",value:function(e,t){t>=0&&t>this.maxPosition||t<0&&t<-1*this.maxPosition?h.a.dispatch(new d.e(e,this)):h.a.dispatch(new d.f(this,e,t))}},{key:"makeSnapTargetData",value:function(){var e=this,t=[];return this.guidelines.forEach(function(n){var r=Math.round(e.maxPosition+n.lastPosition),a=e.type===i.HOR?new v.a(0,r,2*e.maxPosition,r,0):new v.a(r,0,r,2*e.maxPosition,0);t.push({ltrb:a,type:p.a.GUIDELINE})}),t}}]),e}(),m=function(){function e(t,n){s()(this,e),this.type=t,this.initPosition=n,this.scale=h.a.instance.zoomScale*h.a.instance.pageEditScale,this.lastPosition=n}return c()(e,[{key:"setLastPosition",value:function(e){this.lastPosition=e}},{key:"setZoomScale",value:function(e){this.scale=e}}]),e}();!function(e){e[e.HOR=u.a.HORIZONTAL]="HOR",e[e.VER=u.a.VERTICAL]="VER"}(i||(i={}))},,,,function(e,t,n){"use strict";function i(){return"".concat((new Date).getTime(),"-").concat(Math.random())}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";n.d(t,"a",function(){return f}),n.d(t,"b",function(){return i});var i,r=n(0),a=n.n(r),o=n(1),s=n.n(o),l=n(35),c=n.n(l),u=n(36),h=n.n(u),d=n(47),p=n(43),v=n(3),f=function(){function e(){c()(this,e)}var t,n,i,r,o,l;return h()(e,null,[{key:"getList",value:(l=s()(a.a.mark(function e(t){var n,i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(v.CRM.get(p.a.TEMPLATE_LIST),"?").concat($.param(t,!0)),e.next=3,d.UnicornApiRequest.get(n);case 3:return(i=e.sent.data).pagination.totalPage<t.page&&(i.list=[]),e.abrupt("return",i);case 6:case"end":return e.stop()}},e)})),function(e){return l.apply(this,arguments)})},{key:"getListAllType",value:(o=s()(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(v.CRM.get(p.a.TEMPLATE_LIST_ALL_TYPE),"?").concat($.param(t,!0)),e.next=3,d.UnicornApiRequest.get(n);case 3:return e.abrupt("return",e.sent.data);case 4:case"end":return e.stop()}},e)})),function(e){return o.apply(this,arguments)})},{key:"findOne",value:(r=s()(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=v.CRM.get(p.a.TEMPLATE_FIND_ONE).replace("${idx}",String(t)),e.next=3,d.UnicornApiRequest.get(n);case 3:return e.abrupt("return",e.sent.data);case 4:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)})},{key:"create",value:(i=s()(a.a.mark(function e(t){var n,i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=v.CRM.get(p.a.TEMPLATE_CREATE),e.next=3,d.UnicornApiRequest.post(n,{traditional:!0,data:JSON.stringify(t),contentType:"application/json"});case 3:return i=e.sent,e.abrupt("return",i.data);case 5:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)})},{key:"update",value:(n=s()(a.a.mark(function e(t,n){var i,r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=v.CRM.get(p.a.TEMPLATE_UPDATE).replace("${idx}",String(t)),e.next=3,d.UnicornApiRequest.post(i,{traditional:!0,data:JSON.stringify(n),contentType:"application/json"});case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}},e)})),function(e,t){return n.apply(this,arguments)})},{key:"delete",value:(t=s()(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=v.CRM.get(p.a.TEMPLATE_DELETE).replace("${idx}",String(t)),e.next=3,d.UnicornApiRequest.post(n);case 3:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})}]),e}();!function(e){e.ACTIVE="ACTIVE",e.INACTIVE="INACTIVE",e.DELETED="DELETED"}(i||(i={}))},,,,,function(e,t,n){"use strict";var i=n(35),r=n.n(i),a=n(36),o=n.n(a),s=n(39),l=n.n(s),c=n(38),u=n.n(c),h=n(44),d=n.n(h),p=n(40),v=n.n(p),f=n(3),g=n(60),m=n(71),E=n(46),y=n.n(E),T=n(134),_=n(70),I=n(382),C=n(74),S=function(){function e(t,n){r()(this,e),this.layerRenderDatas=t,this.item=n;var i=document.createElementNS(C.a.SVG,"path"),a=t[0].svgRenderData.data;if(a.fill&&(i.setAttribute("fill",a.fill),i.setAttribute("origin_fill",a.fill)),a.opacity&&i.setAttribute("opacity","".concat(a.opacity)),a.translate){var o=this.getValuesInBracket(a.translate);this.translate={x:Number(o[0]),y:Number(o[1])}}if(a.scale){var s=this.getValuesInBracket(a.scale);this.scale={x:Number(s[0]),y:Number(s[1])}}if(a.rotate){var l=this.getValuesInBracket(a.rotate);this.rotate={degree:Number(l[0])}}if(a.matrix){var c=this.getValuesInBracket(a.matrix);this.matrix={a:Number(c[0]),b:Number(c[1]),c:Number(c[2]),d:Number(c[3]),e:Number(c[4]),f:Number(c[5])}}_.a.makeUnicornSvgElement(i),this.pathElement=i}return o()(e,[{key:"getValuesInBracket",value:function(e){return e.split("(")[1].replace(")","").split(" ")}},{key:"updateContents",value:function(e){var t="",n=!0,i=!1,r=void 0;try{for(var a,o=this.layerRenderDatas[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,l=s.svgLayer,c=s.svgRenderData,u=l.getRenderBoxTranslate(e),h=u.cx,d=u.cy,p=l.getSvgScale(e,!0),v=p.cx,f=p.cy;t+=c.getPathString(v,f,h-this.viewBoxLeft,d-this.viewBoxTop)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}this.pathElement.setAttribute("d",t);var g=this.item.getSvgScale(),m="";this.translate&&(m+="translate(".concat(this.translate.x*g," ").concat(this.translate.y*g,") ")),this.scale&&(m+="scale(".concat(this.scale.x*g," ").concat(this.scale.y*g,") ")),this.rotate&&(m+="rotate(".concat(this.rotate.degree,") ")),this.matrix&&(m+="matrix(".concat(this.matrix.a," ").concat(this.matrix.b," ").concat(this.matrix.c," ").concat(this.matrix.d," ").concat(this.matrix.e*g," ").concat(this.matrix.f*g,") ")),m&&this.pathElement.setAttribute("transform",m)}},{key:"updatePosition",value:function(e){}},{key:"setViewBoxData",value:function(e,t,n,i){this.viewBoxLeft=e,this.viewBoxTop=t}},{key:"updateColor",value:function(){var e=this.item.props.getColor();e||(e="none")}}]),e}(),w=function(e){function t(e,n){var i;return r()(this,t),(i=l()(this,u()(t).call(this,e,n))).item=e,i}return v()(t,e),o()(t,[{key:"clone",value:function(){return new t(this.item,this.originElement.cloneNode(!0))}},{key:"initSvgElementAttrs",value:function(){y()(u()(t.prototype),"initSvgElementAttrs",this).call(this);var e=this.item.layers;this.layerElements=[];var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=this.svgRenderDatas[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var l=o.value.data.getHashString();n.includes(l)||n.push(l)}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}for(var c=0,h=n;c<h.length;c++){var d=h[c],p=[],v=!0,f=!1,g=void 0;try{for(var m,E=e[Symbol.iterator]();!(v=(m=E.next()).done);v=!0){var T=m.value,_=I.a.makeSvgRenderedDataUnit(T.layerSvgElement),w=!0,k=!1,R=void 0;try{for(var L,O=_[Symbol.iterator]();!(w=(L=O.next()).done);w=!0){var A=L.value;A.data.getHashString()===d&&p.push({svgLayer:T,svgRenderData:A})}}catch(e){k=!0,R=e}finally{try{w||null==O.return||O.return()}finally{if(k)throw R}}}}catch(e){f=!0,g=e}finally{try{v||null==E.return||E.return()}finally{if(f)throw g}}var b=new S(p,this.item);b.setViewBoxData(this.viewLeft,this.viewTop,this.viewWidth,this.viewHeight),this.layerElements.push(b)}for(var P=0,N=Array.from(this.svgElement.getElementsByTagNameNS(C.a.SVG,"path"));P<N.length;P++){var x=N[P];x.parentElement&&x.parentElement.removeChild(x)}this.svgElement.setAttribute("width","100%"),this.svgElement.setAttribute("height","100%");var M=!0,D=!1,B=void 0;try{for(var U,G=this.layerElements[Symbol.iterator]();!(M=(U=G.next()).done);M=!0){var F=U.value;this.svgElement.appendChild(F.pathElement)}}catch(e){D=!0,B=e}finally{try{M||null==G.return||G.return()}finally{if(D)throw B}}}},{key:"updateColor",value:function(){var e=this;y()(u()(t.prototype),"updateColor",this).call(this),this.item.props.getColorMap().forEach(function(t,n){var i=!0,r=!1,a=void 0;try{for(var o,s=e.item.layers[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var l=o.value;_.a.setFillColorByOriginColor(l.element,n,t)}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}});var n=!0,i=!1,r=void 0;try{for(var a,o=this.layerElements[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){a.value.updateColor()}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}}},{key:"updateContents",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.item.getWidth()/this.item.svgData.width,r=this.item.getHeight()/this.item.svgData.height,a=this.viewWidth*e*i,o=this.viewHeight*e*r,s=!0,l=!1,c=void 0;try{for(var h,d=this.layerElements[Symbol.iterator]();!(s=(h=d.next()).done);s=!0){var p=h.value;p.updateContents(e)}}catch(e){l=!0,c=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw c}}this.svgElement.setAttribute("viewBox","0 0 ".concat(a," ").concat(o)),n&&(this.svgElement.setAttribute("width","".concat(this.item.getWidth()*e,"px")),this.svgElement.setAttribute("height","".concat(this.item.getHeight()*e,"px"))),y()(u()(t.prototype),"updateContents",this).call(this,e,n)}},{key:"updatePosition",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=!0,r=!1,a=void 0;try{for(var o,s=this.layerElements[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var l=o.value;l.updatePosition(e)}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}y()(u()(t.prototype),"updatePosition",this).call(this,e,n)}}]),t}(T.a),k=function(e){function t(e,n){var i;return r()(this,t),(i=l()(this,u()(t).call(this,e,n))).item=e,i}return v()(t,e),o()(t,[{key:"initSvgElementAttrs",value:function(){y()(u()(t.prototype),"initSvgElementAttrs",this).call(this),this.svgElement.setAttribute("preserveAspectRatio","none"),this.svgElement.setAttribute("width","100%"),this.svgElement.setAttribute("height","100%")}},{key:"clone",value:function(){return new t(this.item,this.originElement.cloneNode(!0))}},{key:"updateContents",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];y()(u()(t.prototype),"updateContents",this).call(this,e,n),n&&(this.svgElement.setAttribute("width","".concat(this.item.getWidth()*e,"px")),this.svgElement.setAttribute("height","".concat(this.item.getHeight()*e,"px")))}}]),t}(T.a),R=n(255),L=function(){function e(t){r()(this,e),this.svgLayer=t}return o()(e,[{key:"setViewBox",value:function(e,t,n,i){this.viewLeft=e,this.viewTop=t,this.viewWidth=n,this.viewHeight=i}}]),e}(),O=function(e){function t(e){var n;r()(this,t),(n=l()(this,u()(t).call(this,e))).svgLayer=e;var i=f.StringUtil.random(10)+e.layerId,a=f.StringUtil.random(11)+e.layerId,o=document.createElementNS(C.a.SVG,"svg");o.setAttribute("width","100%"),o.setAttribute("height","100%");var s=document.createElementNS(C.a.SVG,"defs");o.appendChild(s);var c=document.createElementNS(C.a.SVG,"pattern");s.appendChild(c),c.setAttribute("id",a),c.setAttribute("x","0"),c.setAttribute("y","0");var h=document.createElementNS(C.a.SVG,"g");c.appendChild(h),h.appendChild(e.layerSvgElement.cloneNode(!0));var d=document.createElementNS(C.a.SVG,"clipPath");s.appendChild(d),d.setAttribute("id",i);var p=document.createElementNS(C.a.SVG,"rect");d.appendChild(p);var v=document.createElementNS(C.a.SVG,"g");o.appendChild(v),v.setAttribute("clip-path","url(#".concat(i,")"));var g=document.createElementNS(C.a.SVG,"rect");return v.appendChild(g),g.setAttribute("fill","url(#".concat(a,")")),n.svgElement=o,n.patternElement=c,n.transformedPatternElement=h,n.clipRectElement=p,n.renderRectElement=g,n}return v()(t,e),o()(t,[{key:"updateContents",value:function(e){var t=this.viewLeft*e*this.svgLayer.scaleCommon,n=this.viewTop*e*this.svgLayer.scaleCommon,i=this.svgLayer.getRenderingCount(e),r=i.cx,a=i.cy,o=this.svgLayer.getRenderBoxTranslate(e),s=o.cx,l=o.cy,c=this.svgLayer.getPatternTranslate(e),u=c.cx,h=c.cy,d=this.svgLayer.getFillRectSize(e),p=d.cx,v=d.cy,f=this.svgLayer.getSvgScale(e,!0),g=f.cx,m=f.cy,E=this.svgLayer.getClipRect(e),y=this.svgLayer.getPatternRatio(),T=Math.pow(10,-4),_=Math.abs(r-1)<T?2:1/r*y,I=Math.abs(a-1)<T?2:1/a*y;this.patternElement.setAttribute("width","".concat(_)),this.patternElement.setAttribute("height","".concat(I)),this.transformedPatternElement.setAttribute("transform","translate(".concat(u*g-t,", ").concat(h*m-n,") scale(").concat(g,", ").concat(m,")")),this.clipRectElement.setAttribute("x","".concat(E.left)),this.clipRectElement.setAttribute("y","".concat(E.top)),this.clipRectElement.setAttribute("width","".concat(E.getWidth())),this.clipRectElement.setAttribute("height","".concat(E.getHeight())),this.renderRectElement.setAttribute("x","".concat(s*g)),this.renderRectElement.setAttribute("y","".concat(l*g)),this.renderRectElement.setAttribute("width","".concat(p*g*r)),this.renderRectElement.setAttribute("height","".concat(v*m*a)),this.svgElement.setAttribute("x","".concat(t)),this.svgElement.setAttribute("y","".concat(n))}},{key:"updatePosition",value:function(e){}},{key:"updateColor",value:function(){}}]),t}(L),A=function(e){function t(e){var n;r()(this,t),(n=l()(this,u()(t).call(this,e))).svgLayer=e;var i=document.createElementNS(C.a.SVG,"g");return i.appendChild(e.layerSvgElement.cloneNode(!0)),n.svgElement=i,n}return v()(t,e),o()(t,[{key:"updateContents",value:function(e){var t=this.svgLayer.getRenderBoxTranslate(e),n=t.cx,i=t.cy,r=this.svgLayer.getSvgScale(e,!0),a=r.cx,o=r.cy;this.svgElement.setAttribute("transform","scale(".concat(a,", ").concat(o,") translate(").concat(n,", ").concat(i,")"))}},{key:"updatePosition",value:function(e){}},{key:"updateColor",value:function(){}}]),t}(L),b=function(e){function t(e,n){var i;return r()(this,t),(i=l()(this,u()(t).call(this,e,n))).item=e,i}return v()(t,e),o()(t,[{key:"clone",value:function(){return new t(this.item,this.originElement.cloneNode(!0))}},{key:"updateContents",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];y()(u()(t.prototype),"updateContents",this).call(this,e,n);var i=this.item.getWidth()/this.item.svgData.width,r=this.item.getHeight()/this.item.svgData.height,a=this.viewLeft*e*this.item.svgScale,o=this.viewTop*e*this.item.svgScale,s=this.viewWidth*e*i,l=this.viewHeight*e*r;this.svgElement.setAttribute("viewBox","".concat(a," ").concat(o," ").concat(s," ").concat(l));var c=!0,h=!1,d=void 0;try{for(var p,v=this.layerSvgElements[Symbol.iterator]();!(c=(p=v.next()).done);c=!0){var f=p.value;f.updateContents(e)}}catch(e){h=!0,d=e}finally{try{c||null==v.return||v.return()}finally{if(h)throw d}}n&&(this.svgElement.setAttribute("width","".concat(this.item.getWidth()*e,"px")),this.svgElement.setAttribute("height","".concat(this.item.getHeight()*e,"px")))}},{key:"initRenderDatas",value:function(){}},{key:"updatePosition",value:function(e){y()(u()(t.prototype),"updatePosition",this).call(this,e);var n=!0,i=!1,r=void 0;try{for(var a,o=this.layerSvgElements[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){a.value.updatePosition(e)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}}},{key:"updateColor",value:function(){var e=this;this.item.props.getColorMap().forEach(function(t,n){var i=!0,r=!1,a=void 0;try{for(var o,s=e.item.layers[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var l=o.value;_.a.setFillColorByOriginColor(l.element,n,t)}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}e.changeColor(n,t)})}},{key:"makeChildElements",value:function(e,n){y()(u()(t.prototype),"makeChildElements",this).call(this,e,n),this.svgElement=document.createElementNS(C.a.SVG,"svg"),this.svgElement.setAttribute("width","100%"),this.svgElement.setAttribute("height","100%"),this.layerSvgElements=[];var i=!0,r=!1,a=void 0;try{for(var o,s=e.layers[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var l=o.value;l instanceof R.a?this.layerSvgElements.push(new O(l)):this.layerSvgElements.push(new A(l))}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}var c=!0,h=!1,d=void 0;try{for(var p,v=this.layerSvgElements[Symbol.iterator]();!(c=(p=v.next()).done);c=!0){var f=p.value;f.setViewBox(this.viewLeft,this.viewTop,this.viewWidth,this.viewHeight),this.svgElement.appendChild(f.svgElement)}}catch(e){h=!0,d=e}finally{try{c||null==v.return||v.return()}finally{if(h)throw d}}}},{key:"initSvgElementAttrs",value:function(){y()(u()(t.prototype),"initSvgElementAttrs",this).call(this)}}]),t}(T.a),P=function(e){function t(e,n){var i;return r()(this,t),(i=l()(this,u()(t).call(this,e,n))).item=e,i}return v()(t,e),o()(t,[{key:"makeChildElements",value:function(e,n){y()(u()(t.prototype),"makeChildElements",this).call(this,e,n);for(var i=this.svgElement.cloneNode(!0),r=document.createElementNS(C.a.SVG,"defs");this.svgElement.firstChild;)this.svgElement.removeChild(this.svgElement.firstChild);this.svgElement.appendChild(r);var a=document.createElementNS(C.a.SVG,"pattern");r.appendChild(a);var o="pattern".concat(f.StringUtil.random(5));a.setAttribute("x","0"),a.setAttribute("y","0"),a.setAttribute("id",o);var s=document.createElementNS(C.a.SVG,"g");a.appendChild(s),s.appendChild(i);var l=document.createElementNS(C.a.SVG,"clipPath");r.appendChild(l);var c="clipPath".concat(f.StringUtil.random(5));l.setAttribute("id",c);var h=document.createElementNS(C.a.SVG,"rect");l.appendChild(h),h.setAttribute("x","0"),h.setAttribute("y","0");var d=document.createElementNS(C.a.SVG,"g");this.svgElement.appendChild(d);var p=document.createElementNS(C.a.SVG,"rect");d.appendChild(p),p.setAttribute("x","0"),p.setAttribute("y","0"),_.a.makeUnicornSvgElement(r,this.item.getUniqueKey()),d.setAttribute("clip-path","url(#".concat(l.id,")")),p.setAttribute("fill","url(#".concat(a.id,")")),this.patternNode=a,this.scaleGroupNode=s,this.clipRectNode=h,this.patternRectNode=p,this.svgElement.removeAttribute("viewBox")}},{key:"initRenderDatas",value:function(){}},{key:"clone",value:function(){return new t(this.item,this.originElement.cloneNode(!0))}},{key:"updateContents",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];y()(u()(t.prototype),"updateContents",this).call(this,e,n);var i=this.item.getWidth()*e,r=this.item.getHeight()*e,a=this.item.layers[0],o=a.getFillRectSize(e),s=o.cx,l=o.cy,c=a.getSvgScale(e,!0),h=c.cx,d=c.cy,p=a.getClipRect(e),v=Math.pow(10,-3),f=s*h/i,g=l*d/r;this.patternNode.setAttribute("width","".concat(Math.abs(f-1)<v?2:f)),this.patternNode.setAttribute("height","".concat(Math.abs(g-1)<v?2:g)),this.scaleGroupNode.setAttribute("transform","scale(".concat(h,", ").concat(d,")")),this.clipRectNode.setAttribute("width","".concat(p.getWidth())),this.clipRectNode.setAttribute("height","".concat(p.getHeight())),this.patternRectNode.setAttribute("width","".concat(p.getWidth())),this.patternRectNode.setAttribute("height","".concat(p.getHeight())),this.svgElement.setAttribute("width","".concat(this.item.getWidth()*e,"px")),this.svgElement.setAttribute("height","".concat(this.item.getHeight()*e,"px")),this.svgElement.setAttribute("viewBox","0 0 ".concat(this.item.getWidth()*e," ").concat(this.item.getHeight()*e))}},{key:"updateColor",value:function(){var e=this;this.item.props.getColorMap().forEach(function(t,n){_.a.setFillColorByOriginColor(e.scaleGroupNode,n,t)})}}]),t}(T.a),N=n(151);n.d(t,"a",function(){return x});var x=function(e){function t(e,n,i,a,o,s){var c,h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,p=arguments.length>7&&void 0!==arguments[7]&&arguments[7],v=arguments.length>8&&void 0!==arguments[8]&&arguments[8],f=!(arguments.length>9&&void 0!==arguments[9])||arguments[9],g=!(arguments.length>10&&void 0!==arguments[10])||arguments[10],m=!(arguments.length>11&&void 0!==arguments[11])||arguments[11],E=!(arguments.length>12&&void 0!==arguments[12])||arguments[12];r()(this,t);var y=(c=l()(this,u()(t).call(this,e,n,i,a,o,s,h,p,v,f,g,m,E))).data.svg;return _.a.makeUnicornSvgElement(y,c.svgUniqueKey),c.isEveryLayerIsSVGPattern()&&c.layers.length>0?c.svgElements=new P(d()(c),y):c.isPatternSVG()||c.isExtendSVG()?c.isPatternSVG()||c.isGradientSVG()?c.svgElements=new b(d()(c),y):c.svgElements=new w(d()(c),y):c.svgElements=new k(d()(c),y),c}return v()(t,e),o()(t,[{key:"getItemType",value:function(){return m.a.SVG_GRAPHIC}},{key:"clone",value:function(){var e=this,n=new t(f.StringUtil.random(),this.svgData,this.props.getLeft(),this.props.getTop(),this.props.getRight(),this.props.getBottom(),this.props.getRotate(),this.props.isFlipH(),this.props.isFlipV(),this.props.isCanUserSelect(),this.props.isCanUserMove(),this.props.isCanUserResize(),this.props.isCanUserDel());return n.setProps(this.props.clone()),n.updateColor(),n.svgScale=this.svgScale,n.layers.forEach(function(t,n){t.assign(e.layers[n])}),n.isBackground=this.isBackground,this.setCloneItemDefaultAttr(n),n}},{key:"isEveryLayerIsSVGPattern",value:function(){return this.data.layerList.every(function(e){return e.type.value===g.e.SVG_PATTERN.value})}},{key:"isGradientSVG",value:function(){var e=this.data.svg,t=e.getElementsByTagNameNS(C.a.SVG,"linearGradient"),n=e.getElementsByTagNameNS(C.a.SVG,"radialGradient");return t.length+n.length>0}}]),t}(N.a)},function(e,t,n){"use strict";var i=n(73),r=n.n(i),a=n(35),o=n.n(a),s=n(36),l=n.n(s),c=n(74),u=n(82),h=n(3),d=function(){function e(t,n){o()(this,e),this.item=t,this.svgShadowElement=document.createElementNS(c.a.SVG,"svg"),this.svgShadowElement.style.position="absolute",this.svgShadowElement.style.left="0px",this.svgShadowElement.style.top="0px",this.svgShadowElement.setAttribute("xmlns",c.a.SVG),this.svgShadowElement.setAttribute("xlink",c.a.XLINK);var i=document.createElementNS(c.a.SVG,"defs");this.svgShadowElement.appendChild(i);var r=document.createElementNS(c.a.SVG,"filter");i.appendChild(r);var a="".concat(t.getUniqueKey(),"filter").concat(h.StringUtil.random());r.setAttribute("id",a),r.setAttribute("x","0px"),r.setAttribute("y","0px"),r.setAttribute("width","400%"),r.setAttribute("height","400%"),this.offsetElement=document.createElementNS(c.a.SVG,"feOffset"),r.appendChild(this.offsetElement),this.offsetElement.setAttribute("result","offOut"),this.offsetElement.setAttribute("in","SourceAlpha"),this.blurElement=document.createElementNS(c.a.SVG,"feGaussianBlur"),r.appendChild(this.blurElement),this.blurElement.setAttribute("result","blurOut"),this.blurElement.setAttribute("in","offOut"),this.floodElement=document.createElementNS(c.a.SVG,"feFlood"),r.appendChild(this.floodElement),this.floodElement.setAttribute("result","colorOut");var s=document.createElementNS(c.a.SVG,"feComposite");r.appendChild(s),s.setAttribute("result","compOut"),s.setAttribute("in","colorOut"),s.setAttribute("in2","blurOut"),s.setAttribute("operator","in"),this.useElement=document.createElementNS(c.a.SVG,"use"),this.useElement.setAttribute("filter","url(#".concat(a,")")),this.useElement.setAttribute("href","#".concat(t.getUniqueKey())),this.svgShadowElement.appendChild(this.useElement),this.offsetElement.setAttribute("dx","".concat(t.svgData.width*(u.a.VALUE_TO_MULTIPLY-1)/2)),this.offsetElement.setAttribute("dy","".concat(t.svgData.height*(u.a.VALUE_TO_MULTIPLY-1)/2))}return l()(e,[{key:"updateContents",value:function(e){this.item.props.isActiveShadow()&&(this.floodElement.setAttribute("flood-color","".concat(this.item.props.getShadowColor())),this.blurElement.setAttribute("stdDeviation","".concat(this.item.getShadowBlur(e))),this.svgShadowElement.style.width="".concat(this.item.getWidth()*e*u.a.VALUE_TO_MULTIPLY,"px"),this.svgShadowElement.style.height="".concat(this.item.getHeight()*e*u.a.VALUE_TO_MULTIPLY,"px"),this.floodElement.setAttribute("flood-opacity","".concat(this.item.props.getShadowAlpha()/100)),this.offsetElement.setAttribute("dx","".concat(this.item.getWidth()*(u.a.VALUE_TO_MULTIPLY-1)/2)),this.offsetElement.setAttribute("dy","".concat(this.item.getHeight()*(u.a.VALUE_TO_MULTIPLY-1)/2)),this.useElement.setAttribute("width","".concat(this.item.getWidth()*e,"px")),this.useElement.setAttribute("height","".concat(this.item.getHeight()*e,"px")))}},{key:"updatePosition",value:function(e){}}]),e}(),p=n(382),v=n(70);n.d(t,"a",function(){return f});var f=function(){function e(t,n){o()(this,e),this.item=t,this.init(t,n)}return l()(e,[{key:"init",value:function(e,t){this.initSvgElement(t),this.initViewBox(t),this.makeChildElements(e,t),this.initRenderDatas(),this.initSvgElementAttrs(),this.initColorMap(),this.svgElement.setAttribute("id","".concat(this.item.getUniqueKey()))}},{key:"initSvgElement",value:function(e){this.originElement=e.cloneNode(!0),this.svgElement=e}},{key:"initViewBox",value:function(e){var t=e.getAttribute("viewBox");if(t){var n=t.split(" ");this.viewLeft=Number(n[0]),this.viewTop=Number(n[1]),this.viewWidth=Number(n[2]),this.viewHeight=Number(n[3])}else this.viewLeft=0,this.viewTop=0,this.viewWidth=this.item.svgData.width,this.viewHeight=this.item.svgData.height}},{key:"makeChildElements",value:function(e,t){this.shadowElements=new d(e,t)}},{key:"initRenderDatas",value:function(){this.svgRenderDatas=p.a.makeSvgRenderedDataUnit(this.svgElement)}},{key:"initSvgElementAttrs",value:function(){this.svgElement.style.display="block",this.svgElement.style.overflow="hidden",this.svgElement.style.position="absolute",this.svgElement.style.left="0px",this.svgElement.style.top="0px"}},{key:"getFillAttrWithOriginFill",value:function(e,t){var n=[];if(e.hasAttribute("origin_fill")&&e.hasAttribute("fill")&&e.getAttribute("origin_fill").toLowerCase()===t){var i=e.attributes.getNamedItem("fill");n.push(i)}var a=!0,o=!1,s=void 0;try{for(var l,c=e.childNodes[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var u=l.value;u instanceof SVGElement&&n.push.apply(n,r()(this.getFillAttrWithOriginFill(u,t)))}}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}return n}},{key:"initColorMap",value:function(){this.svgColorAttrMap=new Map;var e=v.a.getOriginFillColors(this.svgElement),t=!0,n=!1,i=void 0;try{for(var r,a=e[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value,s=this.getFillAttrWithOriginFill(this.svgElement,o.toLowerCase());this.svgColorAttrMap.set(o.toLowerCase(),s)}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}}},{key:"updateContents",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.shadowElements.updateContents(e)}},{key:"updatePosition",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.shadowElements.updatePosition(e);var t=this.item.isUnsupportedLicense()?.5:this.item.props.getOpacity()/255;this.svgElement.setAttribute("opacity","".concat(t))}},{key:"getSvgString",value:function(e){var t=this.clone();return t.updateColor(),t.updateContents(e,!0),t.updatePosition(e,!0),t.svgElement.outerHTML}},{key:"updateColor",value:function(){var e=this;this.item.props.getColorMap().forEach(function(t,n){e.changeColor(n,t)})}},{key:"changeColor",value:function(e,t){var n=this.svgColorAttrMap.get(e.toLowerCase());if(n){t=t.toLowerCase();var i=!0,r=!1,a=void 0;try{for(var o,s=n[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){o.value.value=t}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}}}}]),e}()},,,,,,,,,,,,,,,,function(e,t,n){"use strict";var i,r,a=n(35),o=n.n(a),s=n(36),l=n.n(s),c=n(39),u=n.n(c),h=n(44),d=n.n(h),p=n(38),v=n.n(p),f=n(46),g=n.n(f),m=n(40),E=n.n(m),y=n(37),T=n.n(y),_=n(3),I=n(82),C=n(43),S=n(87),w=n(114),k=n(103),R=function(e){function t(){var e;return o()(this,t),(e=u()(this,v()(t).call(this))).outLineGroup={active:!1,color:r.RGB.valueOf(),size:r.SIZE.valueOf(),alpha:r.ALPHA.valueOf(),lineType:i.SOLID},e}return E()(t,e),l()(t,[{key:"isActiveOutline",value:function(){return this.outLineGroup.active}},{key:"setActiveOutline",value:function(e){this.outLineGroup.active!==e&&this.updateRevision(),this.outLineGroup.active=e}},{key:"getOutlineColor",value:function(){return this.outLineGroup.color}},{key:"setOutlineColor",value:function(e){var t=k.a.parseColorString(e);this.outLineGroup.color!==t.rgb&&this.updateRevision(),this.outLineGroup.color=t.rgb}},{key:"getOutlineSize",value:function(){return this.outLineGroup.size}},{key:"setOutlineSize",value:function(e){this.outLineGroup.size!==e&&this.updateRevision(),this.outLineGroup.size=e}},{key:"getOutlineAlpha",value:function(){return this.outLineGroup.alpha}},{key:"setOutlineAlpha",value:function(e){this.outLineGroup.alpha!==e&&this.updateRevision(),this.outLineGroup.alpha=e}},{key:"getOutlineType",value:function(){return this.outLineGroup.lineType}},{key:"setOutlineType",value:function(e){this.outLineGroup.lineType!==e&&this.updateRevision(),this.outLineGroup.lineType=e}},{key:"makeClone",value:function(){return new t}},{key:"clone",value:function(){return g()(v()(t.prototype),"clone",this).call(this)}}]),t}(w.b);!function(e){e.SOLID="solid",e.DASH="dash"}(i||(i={})),function(e){e.RGB="#000000",e[e.SIZE=1]="SIZE",e[e.ALPHA=255]="ALPHA"}(r||(r={}));var L=n(71),O=n(74),A=n(134),b=n(70),P=function(e){function t(e,n){var i;return o()(this,t),(i=u()(this,v()(t).call(this,e,n))).item=e,i}return E()(t,e),l()(t,[{key:"clone",value:function(){return new t(this.item,this.originElement.cloneNode(!0))}},{key:"getRenderingElement",value:function(e){var t=e.nodeName.toLowerCase();if("rect"===t||"circle"===t||"ellipse"===t||"polygon"===t||"path"===t)return e;var n=!0,i=!1,r=void 0;try{for(var a,o=e.childNodes[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(s instanceof SVGElement){var l=this.getRenderingElement(s);if(void 0!==l)return l}}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}}},{key:"makeChildElements",value:function(e,n){var i=document.createElementNS(O.a.SVG,"defs"),r=document.createElementNS(O.a.SVG,"clipPath"),a="".concat(e.getUniqueKey(),"outlineclippath");i.appendChild(r);var o=this.getRenderingElement(n);if(o){var s=o.cloneNode(!0);s.id&&(s.id="".concat(s,"clip-path")),r.appendChild(s)}var l=document.createElementNS(O.a.SVG,"g");for(l.setAttribute("clip-path","url(#".concat(a,")"));n.firstChild;){var c=n.firstChild;l.appendChild(c)}n.appendChild(i),n.appendChild(l),this.defsElement=i,this.strokeGroupElement=l,this.renderingElement=o,b.a.makeUnicornSvgElement(i,e.getUniqueKey()),r.id=a,g()(v()(t.prototype),"makeChildElements",this).call(this,e,n)}},{key:"updatePosition",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.item.scaleX*e,a=this.item.scaleY*e,o=this.viewLeft*e*this.item.svgScale,s=this.viewTop*e*this.item.svgScale,l=this.viewWidth*e*this.item.scaleX,c=this.viewHeight*e*this.item.scaleY;this.svgElement.setAttribute("viewBox","".concat(o," ").concat(s," ").concat(l," ").concat(c));var u=!0,h=!1,d=void 0;try{for(var p,f=this.svgRenderDatas[Symbol.iterator]();!(u=(p=f.next()).done);u=!0){var m=p.value;m.scale(r,a)}}catch(e){h=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(h)throw d}}var E=1;if(E=this.item.scaleX<this.item.scaleY?this.item.scaleX*e/(this.item.svgData.width/100):this.item.scaleY*e/(this.item.svgData.height/100),this.item.props.isActiveOutline()){var y=this.item.props.getOutlineSize()*E;if(this.strokeGroupElement.setAttribute("stroke",this.item.props.getOutlineColor()),this.strokeGroupElement.setAttribute("stroke-width","".concat(y)),this.item.props.getOutlineType()===i.DASH){var T=y;this.strokeGroupElement.setAttribute("stroke-dasharray","".concat(T,",").concat(T,",").concat(T,",").concat(T,",").concat(T,",").concat(T))}else this.strokeGroupElement.removeAttribute("stroke-dasharray")}else this.strokeGroupElement.setAttribute("stroke","none");this.svgElement.setAttribute("width","".concat(this.item.getWidth()*e,"px")),this.svgElement.setAttribute("height","".concat(this.item.getHeight()*e,"px")),g()(v()(t.prototype),"updatePosition",this).call(this,e,n)}}]),t}(A.a);n.d(t,"a",function(){return N});var N=function(e){function t(e,n,i,r,a,s){var l,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,h=arguments.length>7&&void 0!==arguments[7]&&arguments[7],p=arguments.length>8&&void 0!==arguments[8]&&arguments[8],f=!(arguments.length>9&&void 0!==arguments[9])||arguments[9],g=!(arguments.length>10&&void 0!==arguments[10])||arguments[10],m=!(arguments.length>11&&void 0!==arguments[11])||arguments[11],E=!(arguments.length>12&&void 0!==arguments[12])||arguments[12];o()(this,t),l=u()(this,v()(t).call(this,e,n,i,r,a,s,c,h,p,f,g,m,E)),T()(d()(l),"arrayOfSVGPathUnit",[]),l.svgData=n,l.scaleCommon=1,l.scaleX=(a-i)/l.data.width,l.scaleY=(s-r)/l.data.height,l.props.setChangePositionSetRevision(!1);var y=l.data.svg;return b.a.makeUnicornSvgElement(y,l.svgUniqueKey),l.svgElements=new P(d()(l),y),l}return E()(t,e),l()(t,[{key:"updateScale",value:function(){var e=this.getLTRBCoordinate();this.scaleX=(e.right-e.left)/this.data.width,this.scaleY=(e.bottom-e.top)/this.data.height}},{key:"getNotUpdateRevisionRubberbandHandleList",value:function(){return[]}},{key:"makeProps",value:function(){return new R}},{key:"getItemType",value:function(){return L.a.SVG_SHAPE}},{key:"clone",value:function(){var e=new t(_.StringUtil.random(),this.svgData,this.props.getLeft(),this.props.getTop(),this.props.getRight(),this.props.getBottom(),this.props.getRotate(),this.props.isFlipH(),this.props.isFlipV(),this.props.isCanUserSelect(),this.props.isCanUserMove(),this.props.isCanUserResize(),this.props.isCanUserDel());return e.setProps(this.props.clone()),e.updateColor(),e.svgScale=this.svgScale,e.scaleX=this.scaleX,e.scaleY=this.scaleY,e.scaleCommon=this.scaleCommon,this.setCloneItemDefaultAttr(e),e}},{key:"scale",value:function(e){return g()(v()(t.prototype),"scale",this).call(this,e),this.updateScale(),this}},{key:"setLTRBCoordinate",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;if(i===S.b.TOP_LEFT||i===S.b.TOP_RIGHT||i===S.b.BOTTOM_LEFT||i===S.b.BOTTOM_RIGHT){var r=e.getWidth()/this.getWidth();this.scaleCommon*=r}g()(v()(t.prototype),"setLTRBCoordinate",this).call(this,e,n,i),this.updateScale()}},{key:"getHeaderTitle",value:function(){return C.a.TOOLS_HEADER_FIGURE_SVG_TITLE}},{key:"getUsedColor",value:function(){var e=g()(v()(t.prototype),"getUsedColor",this).call(this);return this.props.isActiveOutline()&&e.add(this.props.getOutlineColor()),e}}]),t}(I.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return S});var i=n(35),r=n.n(i),a=n(36),o=n.n(a),s=n(39),l=n.n(s),c=n(44),u=n.n(c),h=n(38),d=n.n(h),p=n(46),v=n.n(p),f=n(40),g=n.n(f),m=n(37),E=n.n(m),y=n(255),T=n(60),_=n(82),I=n(320),C=n(43),S=function(e){function t(e,n,i,a,o,s){var c,h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,p=arguments.length>7&&void 0!==arguments[7]&&arguments[7],v=arguments.length>8&&void 0!==arguments[8]&&arguments[8],f=!(arguments.length>9&&void 0!==arguments[9])||arguments[9],g=!(arguments.length>10&&void 0!==arguments[10])||arguments[10],m=!(arguments.length>11&&void 0!==arguments[11])||arguments[11],T=!(arguments.length>12&&void 0!==arguments[12])||arguments[12];r()(this,t),c=l()(this,d()(t).call(this,e,n,i,a,o,s,h,p,v,f,g,m,T)),E()(u()(c),"RESIZE_EPSILON",Math.pow(10,-3)),E()(u()(c),"layers",[]),E()(u()(c),"isBackground",!1),c.data.layerList.forEach(function(e){var t=y.b.createSVGLayer(e.type,n,e.layerId,c.svgUniqueKey);c.layers.push(t)});var _=(o-i)/c.data.width,I=(s-a)/c.data.height,C=!0,S=!1,w=void 0;try{for(var k,R=c.layers[Symbol.iterator]();!(C=(k=R.next()).done);C=!0){var L=k.value;L.scale(c.svgScale),L.scaleX=_/c.svgScale,L.scaleY=I/c.svgScale}}catch(e){S=!0,w=e}finally{try{C||null==R.return||R.return()}finally{if(S)throw w}}return c.updateAttribute(),c}return g()(t,e),o()(t,[{key:"updateSvgData",value:function(e){}},{key:"scale",value:function(e){v()(d()(t.prototype),"scale",this).call(this,e);var n=!0,i=!1,r=void 0;try{for(var a,o=this.layers[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){a.value.scale(e)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return this}},{key:"updateAttribute",value:function(){this.keepRatio=this.layers.some(function(e){return e.isKeepRatio()})}},{key:"isPatternSVG",value:function(){return this.data.layerList.some(function(e){return e.type.value!==T.e.NO_PATTERN.value})}},{key:"isExtendSVG",value:function(){return this.layers.some(function(e){return e.isExtend()})}},{key:"makeProps",value:function(){return new I.a}},{key:"initScaleAndLayers",value:function(){var e=this.getWidth()/this.data.width,t=this.getHeight()/this.data.height,n=Math.min(e,t);this.svgScale=n;var i=!0,r=!1,a=void 0;try{for(var o,s=this.layers[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var l=o.value;l.scaleCommon=n,l.scaleX=e/n,l.scaleY=t/n}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}}},{key:"isSkinable",value:function(e){return this.isBackground&&Math.round(this.props.getLeft())<=0&&Math.round(this.props.getTop())<=0&&Math.round(this.props.getRight())>=e.width&&Math.round(this.props.getBottom())>=e.height}},{key:"isBackgroundType",value:function(){return this.svgData.type===T.g.BACKGROUND_PATTERN||this.svgData.type===T.g.BACKGROUND_IMAGE}},{key:"isOnlyOneItem",value:function(){return this.isBackground&&this.isBackgroundType()}},{key:"updatePatternByRatio",value:function(e){this.props.patternCountRatio=e;var t=0;t=e>0?e:this.props.patternCountRatio;var n=this.getLTRBCoordinate(),i=n.right,r=n.bottom;n.right=n.getWidth()*t,this.setLTRBCoordinate(n,null,null),n.bottom=n.getHeight()*t,this.setLTRBCoordinate(n,null,null),n.right=i,n.bottom=r,this.setLTRBCoordinate(n,null,null),this.props.updateStyleRevision()}},{key:"validateBoundLtrb",value:function(e){var t=this.data.minWidth*this.svgScale;if(e.getWidth()<t)if(e.left===this.props.getLeft())e.right=e.left+t;else if(e.right===this.props.getRight())e.left=e.right-t;else{var n=(e.left+e.right)/2;e.left=n-t/2,e.right=e.left+t}var i=this.data.minHeight*this.svgScale;if(e.getHeight()<i)if(e.top===this.props.getTop())e.bottom=e.top+i;else if(e.bottom===this.props.getBottom())e.top=e.bottom-i;else{var r=(e.top+e.bottom)/2;e.top=r-i/2,e.bottom=e.top+i}return e.clone()}},{key:"setLTRBCoordinate",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;if(this.keepRatio){var r=e.getWidth()-this.props.getWidth(),a=e.getHeight()-this.props.getHeight();if(Math.abs(r)>this.RESIZE_EPSILON&&Math.abs(a)>this.RESIZE_EPSILON){var o=e.getWidth()/this.props.getWidth(),s=!0,l=!1,c=void 0;try{for(var u,h=this.layers[Symbol.iterator]();!(s=(u=h.next()).done);s=!0){var p=u.value;p.scale(o)}}catch(e){l=!0,c=e}finally{try{s||null==h.return||h.return()}finally{if(l)throw c}}this.svgScale*=o}else{this.isBackground||(e=this.validateBoundLtrb(e)),r=e.getWidth()-this.props.getWidth(),a=e.getHeight()-this.props.getHeight();var f=!0,g=!1,m=void 0;try{for(var E,y=this.layers[Symbol.iterator]();!(f=(E=y.next()).done);f=!0){var T=E.value;T.resize(r/T.scaleCommon,a/T.scaleCommon)}}catch(e){g=!0,m=e}finally{try{f||null==y.return||y.return()}finally{if(g)throw m}}}}else{var _=e.getWidth()-this.props.getWidth(),I=e.getHeight()-this.props.getHeight(),C=!0,S=!1,w=void 0;try{for(var k,R=this.layers[Symbol.iterator]();!(C=(k=R.next()).done);C=!0){var L=k.value;L.resize(_/L.scaleCommon,I/L.scaleCommon)}}catch(e){S=!0,w=e}finally{try{C||null==R.return||R.return()}finally{if(S)throw w}}}v()(d()(t.prototype),"setLTRBCoordinate",this).call(this,e,n,i)}},{key:"getHeaderTitle",value:function(){switch(this.svgData.type.value){case T.g.GRAPHIC.value:return C.a.TOOLS_HEADER_GRAPHIC_SVG_TITLE;case T.g.LINE.value:return C.a.TOOLS_HEADER_LINE_SVG_TITLE;case T.g.FIGURE.value:return C.a.TOOLS_HEADER_FIGURE_SVG_TITLE;case T.g.ILLUST.value:return C.a.TOOLS_HEADER_ILLUST_SVG_TITLE;case T.g.BACKGROUND_PATTERN.value:return C.a.TOOLS_HEADER_BACKGROUND_PATTERN_SVG_TITLE;case T.g.BACKGROUND_IMAGE.value:return C.a.TOOLS_HEADER_BACKGROUND_IMAGE_SVG_TITLE;default:return null}}},{key:"isChangableWidth",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this.layers[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){if(i.value.isChangableWidth())return!0}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}return!1}},{key:"isChangableHeight",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this.layers[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){if(i.value.isChangableHeight())return!0}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}return!1}}]),t}(_.a)},,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return F}),n.d(t,"d",function(){return H}),n.d(t,"c",function(){return V}),n.d(t,"b",function(){return W});var i=n(44),r=n.n(i),a=n(46),o=n.n(a),s=n(0),l=n.n(s),c=n(1),u=n.n(c),h=n(35),d=n.n(h),p=n(36),v=n.n(p),f=n(39),g=n.n(f),m=n(38),E=n.n(m),y=n(40),T=n.n(y),_=n(37),I=n.n(_),C=n(324),S=n(124),w=n(78),k=n(173),R=n(218),L=n(171),O=n(128),A=n(52),b=n(3),P=n(42),N=n(48),x=n(55),M=n(228),D=n(152),B=n(79),U=n(43),G=n(47),F=function(e){function t(e){var n;return d()(this,t),(n=g()(this,E()(t).call(this,e))).param=e,n}var n,i;return T()(t,e),v()(t,[{key:"makeMeta",value:function(){return new C.a}},{key:"fetchDesignSheetXMLAsync",value:(i=u()(l.a.mark(function e(t,n){var i;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadDesignBean();case 2:return e.next=4,this.getPageSheetDataList();case 4:return i=e.sent,e.next=7,t.parseUnicornDesign(i);case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}},e,this)})),function(e,t){return i.apply(this,arguments)})},{key:"isTemplate",value:function(){return this.param.resourceType===N.a.TEMPLATE}},{key:"getPageThumbnails",value:function(){return this.getThumbKeys().map(function(e){return"".concat(b.CRM.get(U.a.IMAGE_PREVIEW_API),"/").concat(e)})}},{key:"getPageSheetDataList",value:(n=u()(l.a.mark(function e(){var t,n,i,r,a,o,s,c;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n=!0,i=!1,r=void 0,e.prev=4,a=this.getSheetFileUrls()[Symbol.iterator]();case 6:if(n=(o=a.next()).done){e.next=15;break}return s=o.value,e.next=10,G.ApiRequest.getXml(s);case 10:c=e.sent.data,t.push(c);case 12:n=!0,e.next=6;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(4),i=!0,r=e.t0;case 21:e.prev=21,e.prev=22,n||null==a.return||a.return();case 24:if(e.prev=24,!i){e.next=27;break}throw r;case 27:return e.finish(24);case 28:return e.finish(21);case 29:return e.abrupt("return",t);case 30:case"end":return e.stop()}},e,this,[[4,17,21,29],[22,,24,28]])})),function(){return n.apply(this,arguments)})}],[{key:"getMaxSheetSize",value:function(e){return e?x.d.DEV_MAX_SHEET_SIZE:x.d.MAX_SHEET_SIZE}}]),t}(S.b);I()(F,"MIN_SHEET_SIZE",32),I()(F,"DEFAULT_SHEET_SIZE",1080);var H=function(e){function t(e){var n;return d()(this,t),(n=g()(this,E()(t).call(this,e))).param=e,n}var n,i;return T()(t,e),v()(t,[{key:"loadDesignBean",value:(i=u()(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.param.designProjectIdx>0)){e.next=7;break}return e.next=3,M.a.findDesign(this.param.designProjectIdx,this.param.idx);case 3:t=e.sent,this.designBean=new L.h({data:t}),e.next=10;break;case 7:return e.next=9,w.a.findOne(this.param.idx);case 9:this.designBean=e.sent;case 10:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)})},{key:"getSheetFileUrls",value:function(){if(!this.designBean)throw new Error("designBean이 로드되지 않고 호출됨");return this.designBean.pageList.map(function(e){return e.sheetUrl})}},{key:"getThumbKeys",value:function(){if(!this.designBean)throw new Error("designBean이 로드되지 않고 호출됨");return this.designBean.pageList.map(function(e){return e.thumbKey})}},{key:"fetchDesignSheetXMLAsync",value:(n=u()(l.a.mark(function e(n,i){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o()(E()(t.prototype),"fetchDesignSheetXMLAsync",this).call(this,n,i);case 2:return n.templateType=this.designBean.templateType,e.abrupt("return",n);case 4:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})},{key:"setDesignOtherData",value:function(e){var t=this;this.designBean&&(e.templateType=this.designBean.templateType,e.pages.forEach(function(e,n){e.reference=t.designBean.pageList[n].designPageReference}))}}]),t}(F),V=function(e){function t(e){var n;return d()(this,t),(n=g()(this,E()(t).call(this,e))).param=e,n}var n,i;return T()(t,e),v()(t,[{key:"loadDesignBean",value:(i=u()(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.findOne(this.param.idx);case 2:this.templateBean=e.sent;case 3:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)})},{key:"getSheetFileUrls",value:function(){if(this.param.blank)return[""];if(!this.templateBean)throw new Error("templateBean이 로드되지 않고 호출됨");return this.templateBean.pageList.map(function(e){return e.sheetUrl})}},{key:"getThumbKeys",value:function(){if(this.param.blank)return[""];if(!this.templateBean)throw new Error("templateBean이 로드되지 않고 호출됨");return this.templateBean.pageList.map(function(e){return e.thumbKey})}},{key:"fetchDesignSheetXMLAsync",value:(n=u()(l.a.mark(function e(n,i){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==this.param.blank){e.next=5;break}return this.setBlank(n),e.abrupt("return",n);case 5:return e.next=7,o()(E()(t.prototype),"fetchDesignSheetXMLAsync",this).call(this,n,i);case 7:return this.changeSheetSize(n),t.setTemplateType(n,this.param.templateTypeId),e.abrupt("return",n);case 10:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})},{key:"changeSheetSize",value:function(e){if(B.a.isValidSize(this.param.width)&&B.a.isValidSize(this.param.height)){var n=t.checkSheetSize({width:this.param.width,height:this.param.height});e.changeSheetSize(n,D.a.FIT)}}},{key:"setDesignOtherData",value:function(e){var t=this;this.templateBean&&this.templateBean.idx>0&&e.pages.forEach(function(e,n){e.reference={templateRepositoryType:A.a.UNICORN,templateKey:String(t.templateBean.idx),templatePageNo:n}})}},{key:"setBlank",value:function(e){var n=t.checkSheetSize({width:this.param.width,height:this.param.height});return t.setBlank(e,n,this.param.templateTypeId)}}],[{key:"setBlank",value:function(e,t,n){var i=new k.a(0);return i.sheetSize=t,e.pages=[i],e.sheets=R.a.blank(),this.setTemplateType(e,n),e}},{key:"setTemplateType",value:function(e,t){b.StringUtil.isEmpty(t)||(e.templateType={id:t})}},{key:"checkSheetSize",value:function(e){return{width:this.checkSheetSizeWH(e.width),height:this.checkSheetSizeWH(e.height)}}},{key:"checkSheetSizeWH",value:function(e){return B.a.isValidSize(e)?(e=Math.min(e,this.getMaxSheetSize(P.a.getEnv().devMode)),e=Math.max(e,this.MIN_SHEET_SIZE)):e=F.DEFAULT_SHEET_SIZE,e}}]),t}(F),W=function(e){function t(e){var n;return d()(this,t),n=g()(this,E()(t).call(this,e)),I()(r()(n),"pageThumbnails",[]),n.param=e,n}var n;return T()(t,e),v()(t,[{key:"makeMeta",value:function(){return new C.a}},{key:"fetchDesignSheetXMLAsync",value:(n=u()(l.a.mark(function e(t,n){var i,r,a,o,s,c,u,h;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=[],r=!0,a=!1,o=void 0,e.prev=4,s=this.param.sheetKeyList[Symbol.iterator]();case 6:if(r=(c=s.next()).done){e.next=15;break}return u=c.value,e.next=10,w.a.getSheetData(u);case 10:h=e.sent,i.push(h);case 12:r=!0,e.next=6;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(4),a=!0,o=e.t0;case 21:e.prev=21,e.prev=22,r||null==s.return||s.return();case 24:if(e.prev=24,!a){e.next=27;break}throw o;case 27:return e.finish(24);case 28:return e.finish(21);case 29:return e.next=31,t.parseUnicornDesign(i);case 31:return e.abrupt("return",t);case 32:case"end":return e.stop()}},e,this,[[4,17,21,29],[22,,24,28]])})),function(e,t){return n.apply(this,arguments)})},{key:"getPageThumbnails",value:function(){return this.pageThumbnails}},{key:"setPageThumbnails",value:function(e){this.pageThumbnails=e}}]),t}(S.b)},,,function(e,t,n){"use strict";n.d(t,"a",function(){return g});var i=n(35),r=n.n(i),a=n(36),o=n.n(a),s=n(39),l=n.n(s),c=n(38),u=n.n(c),h=n(40),d=n.n(h),p=n(12),v=n(41),f=n(3),g=function(e){function t(e,n,i){var a;return r()(this,t),(a=l()(this,u()(t).call(this,e))).titleKey=e,a.showListener=n,a.applyListener=i,a}return d()(t,e),o()(t,[{key:"render",value:function(){var e=this;this.element=document.createElement("li"),this.element.className=this.getStyleClass(v.a.TOOLS_ACCORDION_ROW),this.element.classList.add("tools_effect_row"),this.btnShow=Object(p.setToolsIcon)(this.element,p.ToolsIcon.GREATER_THAN),this.showListener&&this.element.addEventListener("click",function(t){t.stopPropagation(),e.showListener()});var t="accordionVisible"+f.StringUtil.random(25),n=document.createElement("label");if(n.appendChild(document.createTextNode(f.CRM.get(this.titleKey))),n.setAttribute("for",t),n.className=v.a.ACCORDION_TITLE,this.element.appendChild(n),this.applyListener){var i="labelUniqueActive"+f.StringUtil.random(27);this.accordionActiveCheckbox=document.createElement("input"),this.accordionActiveCheckbox.className=v.a.ACCORDION_ACTIVE,this.accordionActiveCheckbox.type="checkbox",this.accordionActiveCheckbox.id=i,this.element.appendChild(this.accordionActiveCheckbox);var r=document.createElement("label");r.id=t,r.setAttribute("for",i),r.addEventListener("click",function(t){t.stopPropagation(),t.preventDefault(),e.accordionActiveCheckbox.checked=!e.accordionActiveCheckbox.checked,e.applyListener(e.accordionActiveCheckbox.checked)}),this.boxOn=Object(p.setToolsIcon)(r,p.ToolsIcon.CHECK),this.element.appendChild(r)}else Object(p.setToolsIcon)(n,p.ToolsIcon.GREATER_THAN,!0);return this.element}},{key:"setVisible",value:function(e){this.element&&(e?this.element.classList.remove(v.a.HIDE):this.element.classList.add(v.a.HIDE))}},{key:"updateUI",value:function(e){this.element&&this.accordionActiveCheckbox&&(this.accordionActiveCheckbox.checked=e)}}]),t}(n(69).g)},,,function(e,t,n){"use strict";var i,r=n(0),a=n.n(r),o=n(1),s=n.n(o),l=n(35),c=n.n(l),u=n(36),h=n.n(u),d=n(173),p=n(52),v=n(51),f=n(39),g=n.n(f),m=n(38),E=n.n(m),y=n(40),T=n.n(y),_=n(37),I=n.n(_),C=n(101),S=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];c()(this,e),I()(this,"items",[]),this.disableCompleteCallback=n,this.resourceRepository=C.a.from(t,Boolean(!1))}var t,n,i;return h()(e,[{key:"addItem",value:function(e){this.items.push(e)}},{key:"success",value:(i=s()(a.a.mark(function e(t){var n,i,r,o,s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n=!0,i=!1,r=void 0,e.prev=3,o=t[Symbol.iterator]();!(n=(s=o.next()).done);n=!0)s.value.setResourceLoadStatus(v.b.COMPLETE);e.next=11;break;case 7:e.prev=7,e.t0=e.catch(3),i=!0,r=e.t0;case 11:e.prev=11,e.prev=12,n||null==o.return||o.return();case 14:if(e.prev=14,!i){e.next=17;break}throw r;case 17:return e.finish(14);case 18:return e.finish(11);case 19:this.complete(t);case 20:case"end":return e.stop()}},e,this,[[3,7,11,19],[12,,14,18]])})),function(e){return i.apply(this,arguments)})},{key:"fail",value:(n=s()(a.a.mark(function e(t,n){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.forEach(function(e){e.setResourceLoadStatus(n)}),this.complete(t);case 2:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})},{key:"complete",value:(t=s()(a.a.mark(function e(t){var n,i,r,o,s,l;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.disableCompleteCallback){e.next=2;break}return e.abrupt("return");case 2:n=!0,i=!1,r=void 0,e.prev=5,o=t[Symbol.iterator]();case 7:if(n=(s=o.next()).done){e.next=20;break}return l=s.value,e.prev=9,e.next=12,le.renderItem(l);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(9),console.error(e.t0);case 17:n=!0,e.next=7;break;case 20:e.next=26;break;case 22:e.prev=22,e.t1=e.catch(5),i=!0,r=e.t1;case 26:e.prev=26,e.prev=27,n||null==o.return||o.return();case 29:if(e.prev=29,!i){e.next=32;break}throw r;case 32:return e.finish(29);case 33:return e.finish(26);case 34:case"end":return e.stop()}},e,this,[[5,22,26,34],[9,14],[27,,29,33]])})),function(e){return t.apply(this,arguments)})}]),e}(),w=n(59),k=function(e){function t(){return c()(this,t),g()(this,E()(t).apply(this,arguments))}var n;return T()(t,e),h()(t,[{key:"load",value:(n=s()(a.a.mark(function e(){var t=this;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){try{!function(){0===t.items.length&&e();var n=t.items.length,i=!0,r=!1,a=void 0;try{for(var o,s=function(){var i=o.value,r=i.props.getPhotoKey(),a=t.resourceRepository.getSkinPath(r,i.skinRatioId);w.b.setUrlImage(r,a).then(function(){t.success([i])}).catch(function(e){console.error(e),t.fail([i],v.b.TEMPORARY_ERROR)}).finally(function(){0==--n&&e()})},l=t.items[Symbol.iterator]();!(i=(o=l.next()).done);i=!0)s()}catch(e){r=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(r)throw a}}}()}catch(e){t.fail(t.items,v.b.TEMPORARY_ERROR),n(e)}}));case 1:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)})}]),t}(S),R=n(73),L=n.n(R),O=n(44),A=n.n(O),b=n(46),P=n.n(b),N=function(e){function t(){var e,n;c()(this,t);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return n=g()(this,(e=E()(t)).call.apply(e,[this].concat(r))),I()(A()(n),"itemMap",new Map),n}return T()(t,e),h()(t,[{key:"addItem",value:function(e){P()(E()(t.prototype),"addItem",this).call(this,e);var n=e.props.getPhotoKey();this.itemMap.has(n)||this.itemMap.set(n,[]),this.itemMap.get(n).push(e)}}]),t}(S),x=function(e){function t(){return c()(this,t),g()(this,E()(t).apply(this,arguments))}var n;return T()(t,e),h()(t,[{key:"load",value:(n=s()(a.a.mark(function e(){var t=this;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=s()(a.a.mark(function e(n,i){var r,o,s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,0===t.itemMap.size&&n(),e.next=4,t.resourceRepository.getStickerDataList(L()(t.itemMap.keys()));case 4:r=e.sent,o=new Map,r.forEach(function(e){return o.set(e.id,e)}),s=t.itemMap.size,t.itemMap.forEach(function(e,i){var r=o.get(i);if(!r||!r.active)return t.fail(e,v.b.UNAUTHORIZED),void(0==--s&&n());w.b.setUrlImage(r.id,r.thumb800url).then(function(){t.success(e)}).catch(function(n){console.error(n),t.fail(e,v.b.TEMPORARY_ERROR)}).finally(function(){0==--s&&n()})}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),t.fail(t.items,v.b.TEMPORARY_ERROR),i(e.t0);case 15:case"end":return e.stop()}},e,null,[[0,11]])}));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)})}]),t}(N),M=n(96),D=n(3),B=n(43),U=n(47),G=n(193),F=n(139),H=n.n(F),V=function(e){function t(){return c()(this,t),g()(this,E()(t).apply(this,arguments))}var n;return T()(t,e),h()(t,[{key:"load",value:(n=s()(a.a.mark(function e(){var t=this;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){try{!function(){0===t.itemMap.size&&e();var n=t.itemMap.size,i=!0,r=!1,o=void 0;try{for(var l,c=function(){var i=H()(l.value,2),r=i[0],o=i[1];w.b.setUrlImage(r,M.a.getPhotoUrlWithPhotoKey(r,Boolean(!1))).then(function(){t.success(o)}).catch(function(){var e=s()(a.a.mark(function e(n){var i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.error(n),e.next=3,t.getFailType(r);case 3:i=e.sent,t.fail(o,i);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).finally(function(){0==--n&&e()})},u=t.itemMap.entries()[Symbol.iterator]();!(i=(l=u.next()).done);i=!0)c()}catch(e){r=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(r)throw o}}}()}catch(e){t.fail(t.items,v.b.TEMPORARY_ERROR),n(e)}}));case 1:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)})}]),t}(N),W=n(95),z=function(e){function t(){return c()(this,t),g()(this,E()(t).apply(this,arguments))}var n;return T()(t,e),h()(t,[{key:"getFailType",value:(n=s()(a.a.mark(function e(t){var n,i,r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=D.CRM.get(B.a.USER_RESOURCES_FILE_INFO).replace("${key}",M.a.getFileKey(t)),e.next=4,W.a.getDefaultSelectedTeamData();case 4:return i=e.sent,e.next=7,U.UnicornApiRequest.get("".concat(n,"?").concat($.param(i)));case 7:if(!(r=e.sent).data||r.data.status!==G.b.PERMANENTLY_INACTIVE){e.next=12;break}return e.abrupt("return",v.b.UNAUTHORIZED);case 12:return e.abrupt("return",v.b.TEMPORARY_ERROR);case 13:e.next=18;break;case 15:return e.prev=15,e.t0=e.catch(0),e.abrupt("return",v.b.TEMPORARY_ERROR);case 18:case"end":return e.stop()}},e,null,[[0,15]])})),function(e){return n.apply(this,arguments)})}]),t}(V),X=n(50),Y=n(137),K=function(e){function t(){return c()(this,t),g()(this,E()(t).apply(this,arguments))}var n;return T()(t,e),h()(t,[{key:"getFailType",value:(n=s()(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y.d.downloadStatus(t);case 3:if((n=e.sent).data&&n.data.status!==Y.a.FAIL){e.next=8;break}return e.abrupt("return",v.b.UNAUTHORIZED);case 8:return e.abrupt("return",v.b.TEMPORARY_ERROR);case 9:e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",v.b.UNAUTHORIZED);case 15:case"end":return e.stop()}},e,null,[[0,11]])})),function(e){return n.apply(this,arguments)})}]),t}(V),Z=n(88);!function(e){e.STICKER="STICKER",e.SKIN="SKIN",e.USER_IMAGE="USER_IMAGE",e.PIXABAY="PIXABAY"}(i||(i={}));var j=function(e){function t(e){var n;return c()(this,t),n=g()(this,E()(t).call(this,e)),I()(A()(n),"itemGroupMap",new Map),n.repositoryType=e,n}var n;return T()(t,e),h()(t,[{key:"addItem",value:function(e){P()(E()(t.prototype),"addItem",this).call(this,e);var n,r=e.innerPhotoItem;if(r.isRepoStickerDB())n=i.STICKER;else if(r.orgType===X.b.Skin)n=i.SKIN;else if(r.addedByUser())switch(r.orgType){case X.b.Photo:case X.b.BackgroundPhoto:n=i.USER_IMAGE;break;case X.b.Pixabay:case X.b.BackgroundPixabay:n=i.PIXABAY}this.itemGroupMap.has(n)||this.itemGroupMap.set(n,new Map);var a=r.props.getPhotoKey();this.itemGroupMap.get(n).has(a)||this.itemGroupMap.get(n).set(a,[]),this.itemGroupMap.get(n).get(a).push(e)}},{key:"load",value:(n=s()(a.a.mark(function e(){var t=this;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=s()(a.a.mark(function e(n,i){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{!function(){0===t.itemGroupMap.size&&n();var e=0;t.itemGroupMap.forEach(function(t){return e+=t.size});var i=!0,r=!1,a=void 0;try{for(var o,s=t.itemGroupMap.entries()[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var l=H()(o.value,2),c=l[0],u=l[1],h=!0,d=!1,p=void 0;try{for(var f,g=function(){var i=f.value,r=[],a=[];if(i.forEach(function(e){e.svgData.status!==Z.g.DISABLED?r.push(e):a.push(e)}),t.fail(a,v.b.UNAUTHORIZED),D.ArrayUtil.isEmpty(r))return 0==--e&&n(),"continue";var o=t.createResourceLoader(c);o.addItem(r[0].innerPhotoItem),o.load().then(function(){r[0].innerPhotoItem.isResourceLoadFail()?t.fail(r,r[0].innerPhotoItem.getResourceLoadStatus()):t.success(r)}).catch(function(e){console.error(e),t.fail(r,v.b.TEMPORARY_ERROR)}).finally(function(){0==--e&&n()})},m=u.values()[Symbol.iterator]();!(h=(f=m.next()).done);h=!0)g()}catch(e){d=!0,p=e}finally{try{h||null==m.return||m.return()}finally{if(d)throw p}}}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}}()}catch(e){t.fail(t.items,v.b.TEMPORARY_ERROR),i(e)}case 1:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)})},{key:"createResourceLoader",value:function(e){switch(e){case i.STICKER:return new x(this.repositoryType,!1);case i.SKIN:return new k(this.repositoryType,!1);case i.USER_IMAGE:return new z(this.repositoryType,!1);case i.PIXABAY:return new K(this.repositoryType,!1)}}}]),t}(S),q=n(125),Q=function(e){function t(){var e,n;c()(this,t);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return n=g()(this,(e=E()(t)).call.apply(e,[this].concat(r))),I()(A()(n),"itemsMap",new Map),I()(A()(n),"downloadFontCntMap",new Map),n}var n,i;return T()(t,e),h()(t,[{key:"addItem",value:function(e){var n=this;P()(E()(t.prototype),"addItem",this).call(this,e);for(var i=[],r=e.props.getLineLength(),a=0;a<r;a++){e.props.getLine(a).chars.forEach(function(e){-1===i.indexOf(e.styles.family)&&i.push(e.styles.family)})}this.downloadFontCntMap.set(e.tbpeId,i.length),i.forEach(function(t){n.itemsMap.has(t)||n.itemsMap.set(t,[]),n.itemsMap.get(t).push(e)})}},{key:"load",value:(i=s()(a.a.mark(function e(){var t=this;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=s()(a.a.mark(function e(n,i){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{!function(){0===t.itemsMap.size&&n();var e=t.itemsMap.size,i=!0,r=!1,a=void 0;try{for(var o,s=function(){var i=H()(o.value,2),r=i[0],a=i[1];q.a.instance.addFamily(r).then(function(){}).catch(function(e){console.error("요소를 구성하기 위해 필요한 폰트를 불러오지 못했습니다.",r,e)}).finally(function(){t.fontLoadComplete(r,a).catch(function(e){return console.error(e)}),0==--e&&n()})},l=t.itemsMap.entries()[Symbol.iterator]();!(i=(o=l.next()).done);i=!0)s()}catch(e){r=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(r)throw a}}}()}catch(e){t.success(t.items),i(e)}case 1:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)})),function(){return i.apply(this,arguments)})},{key:"fontLoadComplete",value:(n=s()(a.a.mark(function e(t,n){var i,r=this;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=[],n.forEach(function(e){var t=r.downloadFontCntMap.get(e.tbpeId);0!==t&&(r.downloadFontCntMap.set(e.tbpeId,--t),0===t&&(i.push(e),e.props.isLegacy()&&e.props.recalculatePos()))}),e.next=4,this.success(i);case 4:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})}]),t}(S),J=n(66),ee=n(62),te=n(42),ne=n(60),ie=function(e){function t(){return c()(this,t),g()(this,E()(t).apply(this,arguments))}var n;return T()(t,e),h()(t,[{key:"load",value:(n=s()(a.a.mark(function e(){var t,n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n=[],this.items.forEach(function(e){e.svgData.status!==ne.h.DISABLED?t.push(e):n.push(e)}),this.success(t),this.fail(n,v.b.UNAUTHORIZED);case 5:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})}]),t}(S),re=n(82),ae=n(45),oe=n(75),se=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return c()(this,t),(n=g()(this,E()(t).call(this,e,i))).textLoader=new Q(e),n}var n;return T()(t,e),h()(t,[{key:"addItem",value:function(e){var n=this;P()(E()(t.prototype),"addItem",this).call(this,e),e.cells.forEach(function(e){e.forEach(function(e){n.textLoader.addItem(e.childTextItem)})})}},{key:"load",value:(n=s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.textLoader.load();case 2:this.success(this.items);case 3:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})}]),t}(S);n.d(t,"a",function(){return le});var le=function(){function e(){c()(this,e)}var t,n,i,r,o,l;return h()(e,null,[{key:"loadDesignMetaResource",value:(l=s()(a.a.mark(function e(t){var n,i,r,o,s,l;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=!0,i=!1,r=void 0,e.prev=3,o=t.pages[Symbol.iterator]();case 5:if(n=(s=o.next()).done){e.next=14;break}return l=s.value,e.next=9,this.loadPageResource(l,t.getRepositoryType());case 9:return e.next=11,this.renderPage(l);case 11:n=!0,e.next=5;break;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(3),i=!0,r=e.t0;case 20:e.prev=20,e.prev=21,n||null==o.return||o.return();case 23:if(e.prev=23,!i){e.next=26;break}throw r;case 26:return e.finish(23);case 27:return e.finish(20);case 28:return e.next=30,this.renderOther();case 30:case"end":return e.stop()}},e,this,[[3,16,20,28],[21,,23,27]])})),function(e){return l.apply(this,arguments)})},{key:"loadPageResource",value:(o=s()(a.a.mark(function e(t){var n,i,r=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:p.a.UNICORN,i=t.getAllSingleItems(),e.prev=2,e.next=5,this.loadItemResource(i,n);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("필요한 리소스를 모두 로드하지 못했습니다.",e.t0);case 10:t.setStatus(d.b.DEFAULT);case 11:case"end":return e.stop()}},e,this,[[2,7]])})),function(e){return o.apply(this,arguments)})},{key:"loadItemResource",value:(r=s()(a.a.mark(function t(n){var i,r,o,s,l,c,u,h,d,f,g,m,E,y,T,_=arguments;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i=_.length>1&&void 0!==_[1]?_[1]:p.a.UNICORN,r=new k(i),o=new x(i),s=new z(i),l=new j(i),c=new Q(i),u=new ie(i),h=new K(i),d=new se(i),f=!0,g=!1,m=void 0,t.prev=12,E=n[Symbol.iterator]();case 14:if(f=(y=E.next()).done){t.next=59;break}if(T=y.value,!0,!(T instanceof X.e)){t.next=36;break}if(!T.isRepoStickerDB()){t.next=22;break}o.addItem(T),t.next=34;break;case 22:if(T.orgType!==X.b.Skin){t.next=26;break}r.addItem(T),t.next=34;break;case 26:if(!T.addedByUser()){t.next=34;break}t.t0=T.orgType,t.next=t.t0===X.b.Photo?30:t.t0===X.b.BackgroundPhoto?30:t.t0===X.b.Pixabay?32:t.t0===X.b.BackgroundPixabay?32:34;break;case 30:return s.addItem(T),t.abrupt("break",34);case 32:return h.addItem(T),t.abrupt("break",34);case 34:t.next=56;break;case 36:if(!(T instanceof J.b)){t.next=40;break}l.addItem(T),t.next=56;break;case 40:if(!(T instanceof ee.b)){t.next=44;break}c.addItem(T),t.next=56;break;case 44:if(!(T instanceof oe.b)){t.next=48;break}d.addItem(T),t.next=56;break;case 48:if(!(T instanceof re.a)){t.next=52;break}u.addItem(T),t.next=56;break;case 52:return T.setResourceLoadStatus(v.b.COMPLETE),t.next=55,e.renderItem(T);case 55:!1;case 56:f=!0,t.next=14;break;case 59:t.next=65;break;case 61:t.prev=61,t.t1=t.catch(12),g=!0,m=t.t1;case 65:t.prev=65,t.prev=66,f||null==E.return||E.return();case 68:if(t.prev=68,!g){t.next=71;break}throw m;case 71:return t.finish(68);case 72:return t.finish(65);case 73:return t.abrupt("return",Promise.all([r,o,s,l,c,u,h,d].map(function(e){return e.load()})));case 74:case"end":return t.stop()}},t,null,[[12,61,65,73],[66,,68,72]])})),function(e){return r.apply(this,arguments)})},{key:"renderPage",value:(i=s()(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!te.a.instance.pageController){e.next=5;break}if(!(n=te.a.instance.pageController.getPageRenderer(t))){e.next=5;break}return e.next=5,n.render();case 5:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)})},{key:"renderItem",value:(n=s()(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){try{if(te.a.instance.pageController){var i=te.a.instance.pageController.getItemRenderer(t);i&&setTimeout(s()(a.a.mark(function n(){return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.renderAutoAsync(t.lastRenderEditScale);case 2:e();case 3:case"end":return n.stop()}},n)})),0)}}catch(e){n(e)}}));case 1:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)})},{key:"renderOther",value:(t=s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:te.a.instance.renderer&&te.a.dispatch(new ae.c(function(){var e=s()(a.a.mark(function e(t,n,i){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.renderAppHeader(t,n);case 2:return e.next=4,i.renderLayer(t,n);case 4:case"end":return e.stop()}},e)}));return function(t,n,i){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)})}]),e}()},,function(e,t,n){"use strict";var i=n(0),r=n.n(i),a=n(1),o=n.n(a),s=n(35),l=n.n(s),c=n(36),u=n.n(c),h=n(39),d=n.n(h),p=n(38),v=n.n(p),f=n(44),g=n.n(f),m=n(40),E=n.n(m),y=n(37),T=n.n(y),_=n(71),I=n(64),C=n(3),S=n(59),w=n(256),k=n(134),R=function(e){function t(){return l()(this,t),d()(this,v()(t).apply(this,arguments))}return E()(t,e),u()(t,[{key:"clone",value:function(){return new t(this.item,null)}},{key:"init",value:function(e,t){var n=e.svgData.svg;n&&(this.svgElement=n)}},{key:"makeChildElements",value:function(e,t){}},{key:"initRenderDatas",value:function(){}},{key:"initSvgElementAttrs",value:function(){}},{key:"updateContents",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]}},{key:"updatePosition",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]}},{key:"getSvgString",value:function(e){return""}},{key:"updateColor",value:function(){}},{key:"changeColor",value:function(e,t){}}]),t}(k.a),L=n(60),O=n(151),A=n(46),b=n.n(A),P=function(e){function t(){return l()(this,t),d()(this,v()(t).apply(this,arguments))}return E()(t,e),u()(t,[{key:"setActiveShadow",value:function(e){var n=this.changePositionSetRevision;b()(v()(t.prototype),"setActiveShadow",this).call(this,e),this.setChangePositionSetRevision(n)}}]),t}(n(320).a),N=n(255),x=n(49),M=n(74),D=n(70),B=function(e){function t(e,n){var i;return l()(this,t),(i=d()(this,v()(t).call(this,e,n))).item=e,i}return E()(t,e),u()(t,[{key:"initSvgElement",value:function(e){this.originElement=null,this.svgElement=document.createElementNS(M.a.SVG,"svg")}},{key:"initViewBox",value:function(e){this.viewLeft=0,this.viewTop=0,this.viewWidth=this.item.svgData.width,this.viewHeight=this.item.svgData.height}},{key:"makeChildElements",value:function(e,t){var n=document.createElementNS(M.a.SVG,"defs");this.svgElement.appendChild(n);var i=document.createElementNS(M.a.SVG,"pattern");n.appendChild(i);var r="pattern".concat(C.StringUtil.random(5));i.setAttribute("x","0"),i.setAttribute("y","0"),i.setAttribute("id",r);var a=document.createElementNS(M.a.SVG,"g");i.appendChild(a);var o=document.createElementNS(M.a.SVG,"image");a.appendChild(o);var s=document.createElementNS(M.a.SVG,"clipPath");n.appendChild(s);var l="clipPath".concat(C.StringUtil.random(5));s.setAttribute("id",l);var c=document.createElementNS(M.a.SVG,"rect");s.appendChild(c),c.setAttribute("x","0"),c.setAttribute("y","0");var u=document.createElementNS(M.a.SVG,"g");this.svgElement.appendChild(u);var h=document.createElementNS(M.a.SVG,"rect");u.appendChild(h),h.setAttribute("x","0"),h.setAttribute("y","0"),D.a.makeUnicornSvgElement(n,this.item.getUniqueKey()),u.setAttribute("clip-path","url(#".concat(s.id,")")),h.setAttribute("fill","url(#".concat(i.id,")")),this.patternNode=i,this.scaleGroupNode=a,this.clipRectNode=c,this.patternRectNode=h,this.imagePatternNode=o,this.svgElement.removeAttribute("viewBox")}},{key:"updatePosition",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=this.item.imageDataSize,n=this.item.getWidth()*e,i=this.item.getHeight()*e,r=this.item.layers[0],a=r.getFillRectSize(e),o=a.cx,s=a.cy,l=r.getSvgScale(e,!0),c=l.cx,u=l.cy,h=r.getClipRect(e),d=Math.pow(10,-3),p=o*c/n,v=s*u/i,f=Math.abs(p-1)<d?2:p,g=Math.abs(v-1)<d?2:v;this.patternNode.setAttribute("width","".concat(f)),this.patternNode.setAttribute("height","".concat(g));var m=2===f?this.item.getWidth()/t.width:this.item.getWidth()*f/t.width,E=2===g?this.item.getHeight()/t.height:this.item.getHeight()*g/t.height;this.scaleGroupNode.setAttribute("transform","scale(".concat(m,", ").concat(E,")")),this.clipRectNode.setAttribute("width","".concat(h.getWidth())),this.clipRectNode.setAttribute("height","".concat(h.getHeight())),this.patternRectNode.setAttribute("width","".concat(h.getWidth())),this.patternRectNode.setAttribute("height","".concat(h.getHeight())),this.svgElement.setAttribute("width","".concat(this.item.getWidth()*e,"px")),this.svgElement.setAttribute("height","".concat(this.item.getHeight()*e,"px")),this.svgElement.setAttribute("viewBox","0 0 ".concat(this.item.getWidth()*e," ").concat(this.item.getHeight()*e)),this.imagePatternNode.setAttribute("width","".concat(t.width,"px")),this.imagePatternNode.setAttribute("height","".concat(t.height,"px")),this.svgElement.setAttribute("opacity","".concat(this.item.props.getOpacity()/255))}},{key:"initRenderDatas",value:function(){}},{key:"clone",value:function(){return new t(this.item,null)}},{key:"updateContents",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]}},{key:"updateColor",value:function(){var e=this;this.item.props.getColorMap().forEach(function(t,n){D.a.setFillColorByOriginColor(e.scaleGroupNode,n,t)})}},{key:"setImageSrc",value:function(e){this.imagePatternNode.setAttributeNS(M.a.XLINK,"href",e)}}]),t}(k.a),U=n(82),G=n(42);n.d(t,"a",function(){return F});var F=function(e){function t(e,n,i,r,a,o){var s,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,u=arguments.length>7&&void 0!==arguments[7]&&arguments[7],h=arguments.length>8&&void 0!==arguments[8]&&arguments[8],p=!(arguments.length>9&&void 0!==arguments[9])||arguments[9],f=!(arguments.length>10&&void 0!==arguments[10])||arguments[10],m=!(arguments.length>11&&void 0!==arguments[11])||arguments[11],E=!(arguments.length>12&&void 0!==arguments[12])||arguments[12];l()(this,t),s=d()(this,v()(t).call(this,e,n,i,r,a,o,c,u,h,p,f,m,E)),T()(g()(s),"imageDataSize",{width:0,height:0}),s.updateAttribute(),s.isBackgroundType()?s.svgElements=new B(g()(s),null):s.svgElements=new R(g()(s),null),s.isSVGPattern()&&!s.isBackgroundType()||s.props.setChangePositionSetRevision(!1),s.props.setChangeRotateSetRevision(!1),s.props.setChangeOpacitySetRevision(!1);var y=s.data.width,_=s.data.height,I=800/Math.max(y,_);return s.imageDataSize.width=Math.round(y*I),s.imageDataSize.height=Math.round(_*I),s}var n,i,a;return E()(t,e),u()(t,[{key:"updateSvgData",value:function(e){var t=this;this.svgData.layerList=e.layerList,this.svgData.svg=e.svg,this.layers=[],this.data.layerList.forEach(function(n){var i=N.b.createSVGLayer(n.type,e,n.layerId,t.svgUniqueKey);t.layers.push(i)});var n=this.props.getWidth()/this.data.width,i=this.props.getHeight()/this.data.height,r=!0,a=!1,o=void 0;try{for(var s,l=this.layers[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var c=s.value;c.scale(this.svgScale),c.scaleX=n/this.svgScale,c.scaleY=i/this.svgScale}}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}this.updateAttribute(),this.svgElements=new R(this,null)}},{key:"clone",value:function(){var e=this,n=new t(C.StringUtil.random(),this.svgData,this.props.getLeft(),this.props.getTop(),this.props.getRight(),this.props.getBottom(),this.props.getRotate(),this.props.isFlipH(),this.props.isFlipV(),this.props.isCanUserSelect(),this.props.isCanUserMove(),this.props.isCanUserResize(),this.props.isCanUserDel());return n.setProps(this.props.clone()),n.updateColor(),n.svgScale=this.svgScale,n.layers.forEach(function(t,n){t.assign(e.layers[n])}),n.isBackground=this.isBackground,this.setCloneItemDefaultAttr(n),n}},{key:"renderOneUnit",value:(a=o()(r.a.mark(function e(t,n){var i,a,o,s,l,c,u,h,d,p,v,f,g,m,E,y,T,_,C;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.imageDataSize.width,a=this.imageDataSize.height,o=t.canvas.width/i,s=t.canvas.height/a,this.images){e.next=25;break}l=w.a.calcMatricsSize(this.data.colorList.length),c=[],u=S.b.getData("".concat(this.svgData.key,"_screen")),h=0;case 9:if(!(h<this.data.colorList.length)){e.next=24;break}return(d=I.a.createCanvas()).width=i,d.height=a,p=d.getContext("2d"),v=Math.floor(h/l.col),f=h%l.col,p.drawImage(u,Math.round(-f*i),Math.round(-v*a)),e.next=19,w.a.canvasToImage(d);case 19:g=e.sent,c.push(g);case 21:h++,e.next=9;break;case 24:this.images=c;case 25:for(t.save(),t.scale(o,s),t.imageSmoothingEnabled=!1,m=0;m<this.data.colorList.length;m++)E=this.data.colorList[m].color,this.props.setCurrentOriginColor(E),y=this.props.getColor(),T=this.images[m],(_=I.a.createCanvas()).width=i,_.height=a,(C=_.getContext("2d")).drawImage(T,0,0),C.globalCompositeOperation="source-in",C.fillStyle=y,C.fillRect(0,0,i,a),t.drawImage(_,0,0);t.restore();case 30:case"end":return e.stop()}},e,this)})),function(e,t){return a.apply(this,arguments)})},{key:"isSVGPattern",value:function(){return this.data.layerList.every(function(e){return e.type.value===L.e.SVG_PATTERN.value})}},{key:"render",value:(i=o()(r.a.mark(function e(t,n,i,a){var o,s,l,c,u,h,d,p,v,f,g,m,E,y,T,_,C,S,w,k,R,L,O;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.isBackgroundType()&&!a?(o=1,s=1):this.isSVGPattern()&&this.layers[0]?(l=this.layers[0].scaleX,c=this.layers[0].scaleY,o=Math.abs(l-1)<1e-4?1:l,s=Math.abs(c-1)<1e-4?1:c):(o=1,s=1),u=Math.ceil(o),h=Math.ceil(s),d=this.imageDataSize.width,p=this.imageDataSize.height,(v=I.a.createCanvas()).width=d,v.height=p,f=v.getContext("2d"),e.next=11,this.renderOneUnit(f,n);case 11:if(1===u&&1===h)g=this.layers[0].scaleX,m=this.layers[0].scaleY,this.isSVGPattern()?(g=Math.min(g,1),m=Math.min(m,1)):(g=1,m=1),t.drawImage(v,0,0,t.canvas.width/g,t.canvas.height/m);else{for(E=u*d,y=h*p,T=1,G.a.isIOS()&&(T=Math.min(4096/Math.max(E,y),1)),_=d*T,C=p*T,(S=I.a.createCanvas()).width=u*d*T,S.height=h*p*T,w=S.getContext("2d"),k=0;k<u;k++)for(R=0;R<h;R++)L=k*_,O=R*C,w.drawImage(v,L,O,_,C);t.drawImage(S,0,0,o*d*T,s*p*T,0,0,t.canvas.width,t.canvas.height)}case 12:case"end":return e.stop()}},e,this)})),function(e,t,n,r){return i.apply(this,arguments)})},{key:"getItemType",value:function(){return _.a.ITEM_SVG_GRAPHIC_SEC}},{key:"makeProps",value:function(){return new P}},{key:"isNeedFlipWhenRenderThumbnail",value:function(){return!0}},{key:"isNeedOpacityWhenRenderThumbnail",value:function(){return!0}},{key:"isLazyHandlerHandlePosition",value:function(e){return!1}},{key:"renderThumbnail",value:(n=o()(r.a.mark(function e(t,n){var i,a,o,s,l,c,u,h,d,p,v,f,g,m,E,y,T,_,C,S,w,k,R;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((i=this.getCropPosData(t.canvas.width,t.canvas.height,n)).width>0&&i.height>0)){e.next=36;break}return a=this.props.getLeft()*n,o=this.props.getTop()*n,s=this.getWidth()*n,l=this.getHeight()*n,c=this.props.isActiveShadow()?5e3/U.a.VALUE_TO_MULTIPLY:5e3,u=Math.min(Math.min(s,c)/s,Math.min(l,c)/l),s<l&&u*s<1&&(u=1/s),l<s&&u*l<1&&(u=1/l),h=Math.max(u*s,1),d=Math.max(u*l,1),p=this.getSvgString(n*u),(v=I.a.createCanvas()).width=h,v.height=d,f=v.getContext("2d"),this.isNeedFlipWhenRenderThumbnail()&&this.flipCanvas(f),e.next=20,this.beforeRender(n);case 20:return e.next=22,this.render(f,n*u,p,!0);case 22:t.save(),(g=I.a.createCanvas()).width=t.canvas.width*u,g.height=t.canvas.height*u,(m=g.getContext("2d")).save(),m.translate(a*u,o*u),this.props.getRotate()&&(E=h/2,y=d/2,m.translate(E,y),m.rotate(x.b.round(this.props.getRotate()*Math.PI/180,4)),m.translate(-E,-y)),this.props.isActiveShadow()&&(T=I.a.createCanvas(),_=this.getShadowCanvasPosData(n*u),T.width=_.width,T.height=_.height,C=T.getContext("2d"),this.renderShadow(C,n*u,v,h,d),S=this.getCanvasPosData(n*u),w=S.width<S.height?S.width:S.height,k=this.props.getShadowDistance()*w/130,R=x.b.getPointByDistanceAngle(k,this.props.getShadowAngle()+90-this.props.getRotate()),m.drawImage(T,-S.width*(U.a.VALUE_TO_MULTIPLY-1)/2+R.cx,-S.height*(U.a.VALUE_TO_MULTIPLY-1)/2+R.cy,S.width*U.a.VALUE_TO_MULTIPLY,S.height*U.a.VALUE_TO_MULTIPLY)),m.drawImage(v,0,0,h,d),m.restore(),this.isNeedOpacityWhenRenderThumbnail()&&(t.globalAlpha=this.props.getOpacity()/255),t.drawImage(g,0,0,t.canvas.width,t.canvas.height),t.restore();case 36:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})}]),t}(O.a)},function(e,t,n){"use strict";var i=n(35),r=n.n(i),a=n(36),o=n.n(a),s=n(39),l=n.n(s),c=n(44),u=n.n(c),h=n(38),d=n.n(h),p=n(46),v=n.n(p),f=n(40),g=n.n(f),m=n(51),E=n(3),y=n(82),T=n(43),_=n(114),I=n(71),C=function(e){function t(e,n){var i;return r()(this,t),(i=l()(this,d()(t).call(this,e,n))).item=e,i}return g()(t,e),o()(t,[{key:"initSvgElementAttrs",value:function(){v()(d()(t.prototype),"initSvgElementAttrs",this).call(this),this.svgElement.setAttribute("preserveAspectRatio","none"),this.svgElement.setAttribute("width","100%"),this.svgElement.setAttribute("height","100%")}},{key:"clone",value:function(){return new t(this.item,this.originElement.cloneNode(!0))}},{key:"updateContents",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];v()(d()(t.prototype),"updateContents",this).call(this,e,n),n&&(this.svgElement.setAttribute("width","".concat(this.item.getWidth()*e,"px")),this.svgElement.setAttribute("height","".concat(this.item.getHeight()*e,"px")))}}]),t}(n(134).a),S=n(70);n.d(t,"a",function(){return w});var w=function(e){function t(e,n,i,a,o,s){var c,h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,p=arguments.length>7&&void 0!==arguments[7]&&arguments[7],v=arguments.length>8&&void 0!==arguments[8]&&arguments[8],f=!(arguments.length>9&&void 0!==arguments[9])||arguments[9],g=!(arguments.length>10&&void 0!==arguments[10])||arguments[10],m=!(arguments.length>11&&void 0!==arguments[11])||arguments[11],E=!(arguments.length>12&&void 0!==arguments[12])||arguments[12];r()(this,t),(c=l()(this,d()(t).call(this,e,n,i,a,o,s,h,p,v,f,g,m,E))).svgData=n,c.scaleX=(o-i)/c.data.width,c.scaleY=(s-a)/c.data.height,c.props.setChangePositionSetRevision(!1);var y=c.data.svg;return S.a.makeUnicornSvgElement(y,c.svgUniqueKey),c.svgElements=new C(u()(c),y),c}return g()(t,e),o()(t,[{key:"makeProps",value:function(){return new _.b}},{key:"getItemType",value:function(){return I.a.SVG_BASIC}},{key:"clone",value:function(){var e=new t(E.StringUtil.random(),this.svgData,this.props.getLeft(),this.props.getTop(),this.props.getRight(),this.props.getBottom(),this.props.getRotate(),this.props.isFlipH(),this.props.isFlipV(),this.props.isCanUserSelect(),this.props.isCanUserMove(),this.props.isCanUserResize(),this.props.isCanUserDel());return e.setProps(this.props.clone()),e.updateColor(),e.svgScale=this.svgScale,this.setCloneItemDefaultAttr(e),e}},{key:"scale",value:function(e){return v()(d()(t.prototype),"scale",this).call(this,e),this.scaleX*=e,this.scaleY*=e,this}},{key:"setLTRBCoordinate",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;v()(d()(t.prototype),"setLTRBCoordinate",this).call(this,e,n,i),this.scaleX=(e.right-e.left)/this.data.width,this.scaleY=(e.bottom-e.top)/this.data.height}},{key:"getHeaderTitle",value:function(){return T.a.TOOLS_HEADER_SVG_TITLE}},{key:"getDisabledResourcePreviewKey",value:function(){return m.a.DISABLED_ORIGIN_USER_RESOURCE}}]),t}(y.a)},,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return C}),n.d(t,"b",function(){return i});var i,r=n(0),a=n.n(r),o=n(1),s=n.n(o),l=n(35),c=n.n(l),u=n(36),h=n.n(u),d=n(37),p=n.n(d),v=n(51),f=n(49),g=n(319),m=n(3),E=n(42),y=n(54),T=n(64),_=n(152),I=n(136),C=function(){function e(t){c()(this,e),p()(this,"items",[]),p()(this,"sheetSize",{}),p()(this,"status",i.DEFAULT),this.pageIdx=t,this.background=new g.a(this),this.pageId="tbpePage".concat(99*t).concat((new Date).getTime()).concat(m.StringUtil.random(10))}var t;return h()(e,[{key:"getAllSingleItems",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.items;return I.a.getAllSingleItems(e)}},{key:"renderThumbnail",value:(t=s()(a.a.mark(function e(t,n,i){var r,o,s,l,c,u,h,d,p,v,f,g=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=g.length>3&&void 0!==g[3]&&g[3],o=g.length>4&&void 0!==g[4]&&g[4],(s=T.a.createCanvas()).width=t,s.height=n,l=s.getContext("2d"),r&&this.background.isWhiteColor()?l.fillStyle="rgba(0,0,0,0)":l.fillStyle=this.background.color,l.fillRect(0,0,t,n),c=!0,u=!1,h=void 0,e.prev=11,d=this.items[Symbol.iterator]();case 13:if(c=(p=d.next()).done){e.next=20;break}return v=p.value,e.next=17,v.renderThumbnail(l,i);case 17:c=!0,e.next=13;break;case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(11),u=!0,h=e.t0;case 26:e.prev=26,e.prev=27,c||null==d.return||d.return();case 29:if(e.prev=29,!u){e.next=32;break}throw h;case 32:return e.finish(29);case 33:return e.finish(26);case 34:return f=o?"image/jpeg":"",e.abrupt("return",s.toDataURL(f));case 36:case"end":return e.stop()}},e,this,[[11,22,26,34],[27,,29,33]])})),function(e,n,i){return t.apply(this,arguments)})},{key:"addItem",value:function(e,t){var n=[];if(e instanceof v.e?n.push(e):e instanceof y.a&&(n=n.concat(e.getAllSingleMembers())),this.getAllSingleItems().forEach(function(e){n.forEach(function(t){e.tbpeId===t.tbpeId&&t.changeTbpeId((new Date).getTime()+"_"+m.StringUtil.random(10))})}),e instanceof v.e?e.setStatus(v.d.NEW):e instanceof y.a&&e.getAllSingleMembers().forEach(function(e){e.setStatus(v.d.NEW)}),null==t)this.items.push(e);else{var i=this.items.splice(0,t);this.setItems(i.concat([e]).concat(this.items),!0)}}},{key:"removeItem",value:function(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.items.length-1;n>=0;n--){var i=this.items[n];if(e===i){this.items.splice(n,1);var r=[];return e instanceof v.e?r.push(e):e instanceof y.a&&(r=r.concat(e.getAllSingleMembers())),r.forEach(function(e){t&&e.setStatus(v.d.DELETE);for(var n=0,i=E.a.instance.activeItems.length;n<i;n++)if(E.a.instance.activeItems[n].tbpeId===e.tbpeId){E.a.instance.activeItems.splice(n,1);break}}),n}}throw new Error("페이지에 없는아이템 삭제하려고함!!")}},{key:"setItems",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.items.splice(0),r=this.getAllSingleItems(i);r.forEach(function(e){e.getStatus()===v.d.STABLE&&e.setStatus(v.d.CHANGE)});var a=this.getAllSingleItems(e);a.forEach(function(e){e.getStatus()===v.d.CHANGE?e.setStatus(v.d.STABLE):e.setStatus(v.d.NEW)}),r.forEach(function(e){if(e.getStatus()===v.d.STABLE)if(n);else{var r=y.b.getRootGroup(e.groupId,i);r&&t.items.indexOf(r)<0?t.items.push(r):r||t.items.push(e)}else e.getStatus()===v.d.LOADING||e.setStatus(v.d.DELETE)}),a.forEach(function(i){if(n||i.getStatus()===v.d.NEW){var r=y.b.getRootGroup(i.groupId,e);r&&t.items.indexOf(r)<0?t.items.push(r):r||t.items.push(i)}})}},{key:"isItemInRange",value:function(e,t,n,i,r){var a=(t<i?t:i)/this.editScale,o=(t<i?i:t)/this.editScale,s=(n<r?n:r)/this.editScale,l=(n<r?r:n)/this.editScale;return e.isInRange(new f.a(a,s,o,l))}},{key:"setSkin",value:function(e){this.background.setSkin(e)}},{key:"getSkinId",value:function(){return this.background.getSkinId()}},{key:"setSheetSizeWithItemScaled",value:function(e){var t=this.getValidLTRB();this.sheetSize=e;var n=e.width/t.getWidth(),i=e.height/t.getHeight(),r=Math.min(n,i);t.changeScale(r)}},{key:"getValidLTRB",value:function(){var e=this.sheetSize.width,t=this.sheetSize.height,n=0,i=0;return this.getAllSingleItems().forEach(function(r){var a=r.getLTRBCoordinate().getRotatedLTRB(r.props.getRotate());e=e>a.left?a.left:e,t=t>a.top?a.top:t,n=n<a.right?a.right:n,i=i<a.bottom?a.bottom:i}),new f.a(e>0?e:0,t>0?t:0,n<this.sheetSize.width?n:this.sheetSize.width,i<this.sheetSize.height?i:this.sheetSize.height)}},{key:"clone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pageIdx,n=new e(t);return n.title=this.title,n.editScale=this.editScale,n.layoutId=this.layoutId,n.ratioId=this.ratioId,n.sheetSize.width=this.sheetSize.width,n.sheetSize.height=this.sheetSize.height,n.status=this.status,n.thumbnailPath=this.thumbnailPath,this.guidelineManager?n.guidelineFactoryInfos=this.guidelineManager.getGuidelineFactoryInfos():n.guidelineFactoryInfos=this.guidelineFactoryInfos,n.templateName=this.templateName,n.setItems(this.items.map(function(e){return e.clone()}),!0),n.background.color=this.background.color,n.reference=this.reference,n}},{key:"changeSheetSize",value:function(e,t){if(this.sheetSize.width!==e.width||this.sheetSize.height!==e.height){var n=Object.assign({},this.sheetSize);this.background.changeSize(e),this.sheetSize=e,t&&this.arrangeItems(t,n)}}},{key:"arrangeItems",value:function(t,n){var i=new f.c(n.width,n.height),r=new f.c(this.sheetSize.width,this.sheetSize.height),a=e.getScale(i,r,t);i.mult(a);var o=r.x/2-i.x/2,s=r.y/2-i.y/2,l=!0,c=!1,u=void 0;try{for(var h,d=this.getAllSingleItems()[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){var p=h.value;p.isOnlyOneItem()||(p.scale(a),p.move(o,s,{forceMove:!0}))}}catch(e){c=!0,u=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}}},{key:"isStatusLoading",value:function(){return this.status===i.LOADING||this.status===i.LOADING_WITH_COVER}},{key:"getStatus",value:function(){return this.status}},{key:"setStatus",value:function(e){this.status=e}}],[{key:"getScale",value:function(e,t,n){var i=t.x/e.x,r=t.y/e.y;switch(n){case _.a.FILL:return Math.max(i,r);case _.a.FIT:return Math.min(i,r);case _.a.ORIGINAL:return 1}}}]),e}();!function(e){e.DEFAULT="stable",e.LOADING="loading",e.LOADING_WITH_COVER="loading_with_cover"}(i||(i={}))},,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return _});var i=n(35),r=n.n(i),a=n(36),o=n.n(a),s=n(39),l=n.n(s),c=n(38),u=n.n(c),h=n(44),d=n.n(h),p=n(40),v=n.n(p),f=n(37),g=n.n(f),m=n(80),E=n(41),y=n(3),T=n(12),_=function(e){function t(e,n,i,a){var o;if(r()(this,t),o=l()(this,u()(t).call(this,"div",[E.a.TOGGLE_ITEM])),g()(d()(o),"preventDefault",!1),o.listener=e,o.trueDataSet=n,o.falseDataSet=i,o.titleLabel=a,o.element=document.createElement("label"),o.inputElement=document.createElement("input"),o.inputElement.type="checkbox",o.element.appendChild(o.inputElement),o.trueDataSet.element=Object(T.setToolsIcon)(o.element,n.icon),o.falseDataSet&&(o.falseDataSet.element=Object(T.setToolsIcon)(o.element,i.icon)),n.titleKey&&(n.titleString=y.CRM.get(n.titleKey)||""),n.titleString){var s=document.createElement("h6");s.className=E.a.TOOLS_ITEM_TITLE,s.innerText=n.titleString,o.element.appendChild(s),o.titleElement=s,i&&(i.titleKey?i.titleString=y.CRM.get(i.titleKey)||"":i.titleString=n.titleString)}if(o.wrap.appendChild(o.element),a&&!y.StringUtil.isEmpty(a)){var c=document.createElement("div");c.className="title_label",c.innerText=a,o.wrap.appendChild(c),o.addClickEventListener()}else o.addChangeEventListener();return o}return v()(t,e),o()(t,[{key:"updateUI",value:function(e){if(e&&(this.inputElement.checked=e.isSelected,e.isSelected?this.element.classList.add(E.a.ACTIVE):this.element.classList.remove(E.a.ACTIVE)),null!=e.active&&(this.active=!0===e.active),this.preventDefault&&(this.inputElement.checked=!1),null!=this.falseDataSet){var t=this.inputElement.checked?this.trueDataSet:this.falseDataSet;this.inputElement.checked?(this.trueDataSet.element.style.display="",this.falseDataSet.element.style.display="none"):(this.trueDataSet.element.style.display="none",this.falseDataSet.element.style.display=""),this.titleElement&&(this.titleElement.innerText=t.titleString)}this.inputElement.checked?this.wrap.classList.add(E.a.ACTIVE):this.wrap.classList.remove(E.a.ACTIVE),this.active?this.wrap.classList.remove(E.a.DISABLE):this.wrap.classList.add(E.a.DISABLE)}},{key:"addClickEventListener",value:function(){var e=this;this.wrap.addEventListener("click",function(t){t.stopPropagation(),e.active&&(e.listener(e.inputElement.checked),e.preventDefault&&(e.inputElement.checked=!1))}),this.inputElement.addEventListener("click",function(e){e.stopPropagation()})}},{key:"addChangeEventListener",value:function(){var e=this;this.inputElement.addEventListener("change",function(t){t.stopPropagation(),e.active&&(e.listener(e.inputElement.checked),e.preventDefault&&(e.inputElement.checked=!1))})}},{key:"setPreventDefault",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.preventDefault=!0===e,this}},{key:"enabled",get:function(){return!this.inputElement.disabled},set:function(e){e?this.element.classList.remove(E.a.DISABLE):this.element.classList.add(E.a.DISABLE),this.inputElement.disabled=!e}}]),t}(m.a)},function(e,t,n){"use strict";n.d(t,"e",function(){return a}),n.d(t,"b",function(){return o}),n.d(t,"d",function(){return s}),n.d(t,"f",function(){return l}),n.d(t,"g",function(){return c}),n.d(t,"i",function(){return u}),n.d(t,"c",function(){return h}),n.d(t,"h",function(){return d}),n.d(t,"a",function(){return p}),n.d(t,"j",function(){return v}),n.d(t,"v",function(){return f}),n.d(t,"x",function(){return g}),n.d(t,"w",function(){return m}),n.d(t,"y",function(){return E}),n.d(t,"k",function(){return y}),n.d(t,"l",function(){return T}),n.d(t,"z",function(){return _}),n.d(t,"A",function(){return I}),n.d(t,"m",function(){return C}),n.d(t,"o",function(){return S}),n.d(t,"n",function(){return w}),n.d(t,"p",function(){return k}),n.d(t,"t",function(){return R}),n.d(t,"r",function(){return L}),n.d(t,"q",function(){return O}),n.d(t,"u",function(){return A}),n.d(t,"s",function(){return b});var i=n(45),r=n(12),a=(i.a.IMAGE_SOLID_LINE_ACTIVE,{name:"intensity",actionType:i.a.IMAGE_FILTER_INTENSITY,timeout:3e3}),o={name:"brightness",actionType:i.a.IMAGE_FILTER_BRIGHTNESS,timeout:3e3},s={name:"contrast",actionType:i.a.IMAGE_FILTER_CONTRAST,timeout:3e3},l={name:"lightness",actionType:i.a.IMAGE_FILTER_LIGHTNESS,timeout:3e3},c={name:"saturation",actionType:i.a.IMAGE_FILTER_SATURATION,timeout:3e3},u={name:"tint",actionType:i.a.IMAGE_FILTER_TINT,timeout:3e3},h={name:"colorTone",actionType:i.a.IMAGE_FILTER_COLOR_TONE,timeout:3e3},d={name:"temperature",actionType:i.a.IMAGE_FILTER_TEMPERATURE,timeout:3e3},p={name:"blur",actionType:i.a.IMAGE_FILTER_BLUR,timeout:3e3},v={name:"vignette",actionType:i.a.IMAGE_FILTER_VIGNETTE,timeout:3e3},f={groupName:"solidLine",name:"active",actionType:i.a.IMAGE_SOLID_LINE_ACTIVE},g={groupName:"solidLine",name:"color",actionType:i.a.IMAGE_SOLID_LINE_COLOR,icon:r.ToolsIcon.FORMAT_COLOR_FILL,timeout:3e3},m={groupName:"solidLine",name:"alpha",actionType:i.a.IMAGE_SOLID_LINE_ALPHA},E={groupName:"solidLine",name:"thickness",actionType:i.a.IMAGE_SOLID_LINE_THICKNESS},y={groupName:"bitmapMask",name:"active",actionType:i.a.IMAGE_BITMAP_MASK_ACTIVE},T={groupName:"bitmapMask",name:"bitmapId",actionType:i.a.IMAGE_BITMAP_MASK_ITEM},_={groupName:"stickerFrame",name:"active",actionType:i.a.IMAGE_STICKER_FRAME_ACTIVE},I={groupName:"stickerFrame",name:"stickerId",actionType:i.a.IMAGE_STICKER_FRAME_ITEM},C={groupName:"gradationMask",name:"active",actionType:i.a.IMAGE_GRADATION_ACTIVE},S={groupName:"gradationMask",name:"direction",actionType:i.a.IMAGE_GRADATION_DIRECTION},w={groupName:"gradationMask",name:"depth",actionType:i.a.IMAGE_GRADATION_DEPTH,timeout:3e3},k={groupName:"shadow",name:"active",actionType:i.a.IMAGE_SHADOW_ACTIVE},R={groupName:"shadow",name:"color",actionType:i.a.IMAGE_SHADOW_COLOR,timeout:3e3},L={groupName:"shadow",name:"angle",actionType:i.a.IMAGE_SHADOW_ANGLE,timeout:3e3},O={groupName:"shadow",name:"alpha",actionType:i.a.IMAGE_SHADOW_ALPHA,timeout:3e3},A={groupName:"shadow",name:"distance",actionType:i.a.IMAGE_SHADOW_DISTANCE,timeout:3e3},b={groupName:"shadow",name:"blur",actionType:i.a.IMAGE_SHADOW_BLUR,timeout:3e3}},function(e,t,n){"use strict";n.d(t,"c",function(){return S}),n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r});var i,r,a,o,s=n(35),l=n.n(s),c=n(36),u=n.n(c),h=n(39),d=n.n(h),p=n(44),v=n.n(p),f=n(38),g=n.n(f),m=n(46),E=n.n(m),y=n(40),T=n.n(y),_=n(37),I=n.n(_),C=n(103),S=function(e){function t(){var e;return l()(this,t),e=d()(this,g()(t).call(this)),I()(v()(e),"changeImage",!0),I()(v()(e),"preset",""),I()(v()(e),"photoKey",""),I()(v()(e),"intensity",0),I()(v()(e),"brightness",0),I()(v()(e),"contrast",0),I()(v()(e),"lightness",0),I()(v()(e),"saturation",0),I()(v()(e),"tint",0),I()(v()(e),"colorTone",0),I()(v()(e),"temperature",0),I()(v()(e),"blur",0),I()(v()(e),"vignette",0),I()(v()(e),"solidLine",{active:!1,color:r.RGB.valueOf(),alpha:r.NUMBER.valueOf(),thickness:r.NUMBER.valueOf()}),I()(v()(e),"bitmapMask",{active:!1,bitmapId:""}),I()(v()(e),"stickerFrame",{active:!1,stickerId:""}),I()(v()(e),"gradationMask",{active:!1,direction:i.NONE,depth:r.NUMBER.valueOf()}),I()(v()(e),"shadow",{active:!1,color:r.RGB.valueOf(),angle:r.NUMBER.valueOf(),alpha:r.NUMBER.valueOf(),distance:r.NUMBER.valueOf(),blur:r.NUMBER.valueOf()}),e.setDefault(),e}return T()(t,e),u()(t,[{key:"setDefault",value:function(){this.setGradationMaskDirection("T"),this.setGradationMaskDepth(65)}},{key:"getChangeImage",value:function(){return this.changeImage}},{key:"setChangeImage",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.changeImage=e}},{key:"getPreset",value:function(){return this.preset}},{key:"setPreset",value:function(e){this.preset!==e&&this.updateRevision(),this.preset=e}},{key:"getPhotoKey",value:function(){return this.photoKey}},{key:"setPhotoKey",value:function(e){this.photoKey!==e&&(this.updateRevision(),this.setChangeImage()),this.photoKey=e}},{key:"getItemRotate",value:function(){return this.itemRotate}},{key:"setItemRotate",value:function(e){this.itemRotate!==Number(e)&&this.updateRevision(),this.itemRotate=Number(e)}},{key:"getColorEffect",value:function(){return this.colorEffect}},{key:"setColorEffect",value:function(e){this.colorEffect!==e&&this.updateRevision(),this.colorEffect=e}},{key:"getIntensity",value:function(){return this.intensity}},{key:"setIntensity",value:function(e){this.intensity!==Number(e)&&this.updateRevision(),this.intensity=Number(e)}},{key:"getBrightness",value:function(){return this.brightness}},{key:"setBrightness",value:function(e){this.brightness!==Number(e)&&this.updateRevision(),this.brightness=Number(e)}},{key:"getContrast",value:function(){return this.contrast}},{key:"setContrast",value:function(e){this.contrast!==Number(e)&&this.updateRevision(),this.contrast=Number(e)}},{key:"getLightness",value:function(){return this.lightness}},{key:"setLightness",value:function(e){this.lightness!==Number(e)&&this.updateRevision(),this.lightness=Number(e)}},{key:"getSaturation",value:function(){return this.saturation}},{key:"setSaturation",value:function(e){this.saturation!==Number(e)&&this.updateRevision(),this.saturation=Number(e)}},{key:"getTint",value:function(){return this.tint}},{key:"setTint",value:function(e){this.tint!==Number(e)&&this.updateRevision(),this.tint=Number(e)}},{key:"getColorTone",value:function(){return this.colorTone}},{key:"setColorTone",value:function(e){this.colorTone!==Number(e)&&this.updateRevision(),this.colorTone=Number(e)}},{key:"getTemperature",value:function(){return this.temperature}},{key:"setTemperature",value:function(e){this.temperature!==Number(e)&&this.updateRevision(),this.temperature=Number(e)}},{key:"getBlur",value:function(){return this.blur}},{key:"setBlur",value:function(e){this.blur!==Number(e)&&this.updateRevision(),this.blur=Number(e)}},{key:"getVignette",value:function(){return this.vignette}},{key:"setVignette",value:function(e){this.vignette!==Number(e)&&this.updateRevision(),this.vignette=Number(e)}},{key:"isFilterValuesAllDefault",value:function(){return 0===this.brightness&&0===this.contrast&&0===this.lightness&&0===this.saturation&&0===this.blur&&0===this.vignette&&0===this.colorTone&&0===this.temperature}},{key:"isActiveSolidLine",value:function(){return this.solidLine.active}},{key:"isActiveBitmapMask",value:function(){return this.bitmapMask.active}},{key:"isActiveStickerFrame",value:function(){return this.stickerFrame.active}},{key:"isActiveGradationMask",value:function(){return this.gradationMask.active}},{key:"isActiveShadow",value:function(){return this.shadow.active}},{key:"isCanActiveShadow",value:function(){return!0}},{key:"setGroupActiveOff",value:function(e){this.updateRevision(),!0===e&&(this.solidLine.active=!1,this.bitmapMask.active=!1,this.gradationMask.active=!1,this.stickerFrame.active=!1)}},{key:"setActiveSolidLine",value:function(e){this.setGroupActiveOff(e),this.solidLine.active=!0===e}},{key:"setActiveBitmapMask",value:function(e){this.setGroupActiveOff(e),this.bitmapMask.active=!0===e}},{key:"setActiveStickerFrame",value:function(e){this.setGroupActiveOff(e),this.stickerFrame.active=!0===e}},{key:"setActiveGradationMask",value:function(e){this.setGroupActiveOff(e),this.gradationMask.active=!0===e}},{key:"setActiveShadow",value:function(e){this.shadow.active!==e&&this.updateRevision(),this.shadow.active=!0===e}},{key:"getSolidLineColor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e||this.solidLine.active?this.solidLine.color:r.RGB}},{key:"setSolidLineColor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t){this.updateRevision();var n=C.a.parseColorString(e);this.solidLine.color=n.rgb,this.solidLine.alpha=n.alpha}else this.solidLine.color!==e&&this.updateRevision(),this.solidLine.color=e}},{key:"getSolidLineThickness",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e||this.solidLine.active?this.solidLine.thickness:r.NUMBER}},{key:"setSolidLineThickness",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.solidLine.thickness!==Number(e)&&this.updateRevision(),this.solidLine.thickness=Number(e)}},{key:"getSolidLineAlpha",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e||this.solidLine.active?this.solidLine.alpha:r.NUMBER}},{key:"setSolidLineAlpha",value:function(e){this.solidLine.alpha!==Number(e)&&this.updateRevision(),this.solidLine.alpha=Number(e)}},{key:"getBitmapMaskBitmapId",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e||this.bitmapMask.active?this.bitmapMask.bitmapId:""}},{key:"setBitmapMaskBitmapId",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.bitmapMask.bitmapId!==e&&this.updateRevision(),this.bitmapMask.bitmapId=e}},{key:"getStickerFrameStickerId",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e||this.stickerFrame.active?this.stickerFrame.stickerId:""}},{key:"setStickerFrameStickerId",value:function(e){this.stickerFrame.stickerId!==e&&this.updateRevision(),this.stickerFrame.stickerId=e}},{key:"getGradationMaskDirection",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e||this.gradationMask.active?this.gradationMask.direction:""}},{key:"setGradationMaskDirection",value:function(e){this.gradationMask.direction!==e&&this.updateRevision(),this.gradationMask.direction=e}},{key:"getGradationMaskDepth",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e||this.gradationMask.active?this.gradationMask.depth:r.NUMBER}},{key:"setGradationMaskDepth",value:function(e){this.gradationMask.depth!==Number(e)&&this.updateRevision(),this.gradationMask.depth=Number(e)}},{key:"getShadowColor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e||this.shadow.active?this.shadow.color:r.RGB}},{key:"setShadowColor",value:function(e){this.shadow.color!==e&&this.updateRevision(),this.shadow.color=e}},{key:"getShadowAngle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e||this.shadow.active?this.shadow.angle:r.NUMBER}},{key:"setShadowAngle",value:function(e){this.shadow.angle!==Number(e)&&this.updateRevision(),this.shadow.angle=Number(e)}},{key:"getShadowAlpha",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e||this.shadow.active?this.shadow.alpha:r.NUMBER}},{key:"setShadowAlpha",value:function(e){this.shadow.alpha!==Number(e)&&this.updateRevision(),this.shadow.alpha=Number(e)}},{key:"getShadowDistance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e||this.shadow.active?this.shadow.distance:r.NUMBER}},{key:"setShadowDistance",value:function(e){this.shadow.distance!==Number(e)&&this.updateRevision(),this.shadow.distance=Number(e)}},{key:"getShadowBlur",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e||this.shadow.active?this.shadow.blur:r.NUMBER}},{key:"setShadowBlur",value:function(e){this.shadow.blur!==Number(e)&&this.updateRevision(),this.shadow.blur=Number(e)}},{key:"setFramePhotoType",value:function(e){switch(this.updateRevision(),e){case o.SOLID_LINE:return void(this.solidLine.active=!0);case o.BITMAP_MASK:return void(this.bitmapMask.active=!0);case o.GRADATION:return void(this.gradationMask.active=!0);case o.STICKER_FRAME:return void(this.stickerFrame.active=!0);case o.SHADOW:return void(this.shadow.active=!0)}}},{key:"getFramePhotoType",value:function(){return this.solidLine.active?o.SOLID_LINE:this.bitmapMask.active?o.BITMAP_MASK:this.gradationMask.active?o.GRADATION:this.stickerFrame.active?o.STICKER_FRAME:this.shadow.active?o.SHADOW:o.NONE}},{key:"makeClone",value:function(){return new t}},{key:"setBitmapMaskPresetKey",value:function(e){this.bitmapMask.presetKey=e}},{key:"getBitmapMaskPresetKey",value:function(){return this.bitmapMask.presetKey}},{key:"setStickerFramePresetKey",value:function(e){this.stickerFrame.presetKey=e}},{key:"getStickerFramePresetKey",value:function(){return this.stickerFrame.presetKey}},{key:"setSolidLinePresetKey",value:function(e){this.solidLine.presetKey=e}},{key:"getSolidLinePresetKey",value:function(){return this.solidLine.presetKey}},{key:"setGradationMaskPresetKey",value:function(e){this.gradationMask.presetKey=e}},{key:"getGradationMaskPresetKey",value:function(){return this.gradationMask.presetKey}},{key:"setShadowPresetKey",value:function(e){this.shadow.presetKey=e}},{key:"getShadowPresetKey",value:function(){return this.shadow.presetKey}},{key:"clear",value:function(){E()(g()(t.prototype),"clear",this).call(this),this.itemRotate=0,this.preset="",this.intensity=0,this.brightness=0,this.contrast=0,this.lightness=0,this.saturation=0,this.blur=0,this.vignette=0,this.temperature=0,this.colorTone=0,this.solidLine.active=!1,this.solidLine.alpha=255,this.solidLine.color="",this.solidLine.thickness=1,this.bitmapMask.active=!1,this.bitmapMask.bitmapId="",this.gradationMask.active=!1,this.gradationMask.depth=1,this.gradationMask.direction=i.L,this.shadow.active=!1,this.shadow.color="#000000",this.shadow.angle=0,this.shadow.alpha=255,this.shadow.distance=0,this.shadow.blur=0,this.updateRevision()}}]),t}(C.a);!function(e){e.NONE="",e.L="L",e.R="R",e.T="T",e.B="B"}(i||(i={})),function(e){e.RGB="#000000",e[e.NUMBER=0]="NUMBER"}(r||(r={})),function(e){e.COLOR="color",e.GRAY="gray",e.NONE="none"}(a||(a={})),function(e){e.NONE="none",e.SOLID_LINE="solid_line",e.BITMAP_MASK="bitmap_mask",e.GRADATION="gradation",e.STICKER_FRAME="sticker",e.SHADOW="shadow"}(o||(o={}))},,,,function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n(35),r=n.n(i),a=n(36),o=n.n(a),s=n(50),l=n(151),c=function(){function e(){r()(this,e)}return o()(e,null,[{key:"isItemSkinable",value:function(e,t){return(e instanceof s.e||e instanceof l.a)&&e.isSkinable(t)}}]),e}()},,,function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return b});var i=n(73),r=n.n(i),a=n(0),o=n.n(a),s=n(1),l=n.n(s),c=n(35),u=n.n(c),h=n(36),d=n.n(h),p=n(37),v=n.n(p),f=n(173),g=n(218),m=n(262),E=n(294),y=n(496),T=n(422),_=n(3),I=n(54),C=n(47),S=n(264),w=n(60),k=n(41),R=n(42),L=n(123),O=n(325),A=n(423),b=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;u()(this,t),v()(this,"pages",[]),this.code1=e,this.code2=n,this.code3=i}var n,i,a,s,c,h,p,b,P,N,x,M,D;return d()(t,[{key:"parseCopyXML",value:(D=l()(o.a.mark(function e(t){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=g.a.parseCopyXML(t),this.sheets=n,e.next=4,this.parseCopyPages(n);case 4:return this.pages=e.sent,e.abrupt("return",this);case 6:case"end":return e.stop()}},e,this)})),function(e){return D.apply(this,arguments)})},{key:"parseCopyPages",value:(M=l()(o.a.mark(function e(t){var n,i,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],!Array.isArray(t.xml[0].PAGE)){e.next=15;break}i=0,r=t.xml[0].PAGE.length;case 4:if(!(i<r)){e.next=13;break}return e.t0=n,e.next=8,this.parsePage(i,t.xml[0].PAGE[i]);case 8:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 10:i++,e.next=4;break;case 13:e.next=20;break;case 15:return e.t2=n,e.next=18,this.parsePage(0,t.xml[0].PAGE);case 18:e.t3=e.sent,e.t2.push.call(e.t2,e.t3);case 20:return e.abrupt("return",n);case 21:case"end":return e.stop()}},e,this)})),function(e){return M.apply(this,arguments)})},{key:"parseNewXML",value:(x=l()(o.a.mark(function e(t){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.sheets=g.a.parseNewXML(t.map(function(e){return e.layout})),this.sheets.version="1.4.0.1",e.next=4,this.parseNewPages(t);case 4:return this.pages=e.sent,e.abrupt("return",this);case 6:case"end":return e.stop()}},e,this)})),function(e){return x.apply(this,arguments)})},{key:"parseNewPages",value:(N=l()(o.a.mark(function e(t){var n,i,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=[],i=0,r=t.length;case 2:if(!(i<r)){e.next=11;break}return e.t0=n,e.next=6,this.parseNewPage(i,t[i]);case 6:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 8:i++,e.next=2;break;case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}},e,this)})),function(e){return N.apply(this,arguments)})},{key:"parseNewPage",value:(P=l()(o.a.mark(function e(t,n){var i,r,a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=g.a.parseNewXML([n.layout]),e.next=3,this.parsePage(t,i.xml[0]);case 3:return(r=e.sent).ratioId=n.ratioId,n.skinId&&((a=r.background.createNewPhotoBackgroundItem(n.skinId)).skinRatioId=n.ratioId,r.setSkin(a)),e.abrupt("return",r);case 7:case"end":return e.stop()}},e,this)})),function(e,t){return P.apply(this,arguments)})},{key:"parseNewThemeXML",value:(b=l()(o.a.mark(function e(t,n){var i,r,a,s,l,c,u,h;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.sheets=g.a.blank(),i=0,r=t.length;case 2:if(!(i<r)){e.next=31;break}if(a=t[i],s=void 0,l=void 0,!(a.commIdx>0)){e.next=18;break}return e.t0=g.a,e.next=10,S.a.getCopySheetXml(a.commIdx,n);case 10:return e.t1=e.sent,c=e.t0.parseCopyXML.call(e.t0,e.t1),s=c.xml[0],e.next=15,this.parsePage(i,s.PAGE);case 15:l=e.sent,e.next=26;break;case 18:return e.next=20,C.ApiRequest.getXml(n.getURL(a.layoutUrl));case 20:return u=e.sent,h=g.a.parseNewXML([u.data]),s=h.xml[0],e.next=25,this.parseNewPage(i,{layout:u.data,skinId:a.skinId,ratioId:a.ratioId});case 25:l=e.sent;case 26:this.sheets.xml.push(s),this.pages.push(l);case 28:i++,e.next=2;break;case 31:return e.abrupt("return",this);case 32:case"end":return e.stop()}},e,this)})),function(e,t){return b.apply(this,arguments)})},{key:"parseUnicornDesign",value:(p=l()(o.a.mark(function e(t){var n,i,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=this.sheets=g.a.parseUnicornXML(t),i=0;case 2:if(!(i<n.xml.length)){e.next=10;break}return e.next=5,this.parsePage(i,n.xml[i]);case 5:r=e.sent,this.pages.push(r);case 7:i++,e.next=2;break;case 10:return e.abrupt("return",this);case 11:case"end":return e.stop()}},e,this)})),function(e){return p.apply(this,arguments)})},{key:"parsePage",value:(h=l()(o.a.mark(function e(n,i){var a,s,l,c,u,h,d,p,v,g,m,E,y,T,_,C,S=arguments;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=!(S.length>2&&void 0!==S[2])||S[2],l=S.length>3&&void 0!==S[3]?S[3]:"",c=new f.a(n),u=i.SHEET,h=i.TEMPLATE,u&&u.SHEETSIZE?(c.sheetSize.width=u.SHEETSIZE["@cx"],c.sheetSize.height=u.SHEETSIZE["@cy"]):(c.sheetSize.width=h["@Width"],c.sheetSize.height=h["@Height"]),d=[],u&&(c.ratioId=u["@RatioId"],(p=u["@SkinId"])&&((v=c.background.createNewPhotoBackgroundItem(p)).skinRatioId=c.ratioId,c.setSkin(v)),c.templateName=u["@TemplateName"],c.layoutId=u["@LayoutId"],c.title=u["@PageTitle"],(g=u.BACKGROUND)&&(g.PureSkinSize&&(c.background.pureSkinSize.width=u.BACKGROUND.PureSkinSize["@cx"],c.background.pureSkinSize.height=u.BACKGROUND.PureSkinSize["@cy"]),g.CropRect&&(m=u.BACKGROUND.CropRect["@Left"],E=u.BACKGROUND.CropRect["@Top"],y=u.BACKGROUND.CropRect["@Right"],T=u.BACKGROUND.CropRect["@Bottom"],c.background.setCropLTRB(m,E,y,T)),c.background.layerName=g["@LayerName"]||"",c.background.color=g["@Color"]||"#ffffff"),t.parseGuidelines(c,u.GUIDELINES),d=new O.a(l).parse(u.GROUP)),e.next=10,this.parseItems(u,h,s);case 10:return(_=e.sent).forEach(function(e){e.groupId&&""!==e.groupId&&(e.groupId="".concat(l).concat(e.groupId))}),C=I.b.parseSingleItemsByGroups(_,d),(a=c.items).push.apply(a,r()(C)),A.a.correctFromPage(c),I.b.checkValidation(c),e.abrupt("return",c);case 17:case"end":return e.stop()}},e,this)})),function(e,t){return h.apply(this,arguments)})},{key:"parseItems",value:(c=l()(o.a.mark(function n(i,a){var s,l,c,u,h,d,p,v,f,g,m,E,y,I=arguments;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return s=!(I.length>2&&void 0!==I[2])||I[2],n.next=3,t.getNeededSvgKeyList(i,R.a.instance.env.adminMode||!!e.env.IMAGE_PROCESS);case 3:return l=this.getStickerParser(this.sheets.version),c=this.getPhotoParser(this.sheets.version),u=this.getTextParser(this.sheets.version),h=this.getBasicSvgParser(this.sheets.version),d=this.getShapeSvgParser(this.sheets.version),p=new T.a(u),v=this.getSvgImageframeParser(this.sheets.version),f=[],(g=[]).push(this.makeParseData(l,i,a,"STICKER")),g.push(this.makeParseData(c,i,a,"PHOTO")),n.t0=g.push,n.t1=g,n.t2=r.a,n.next=19,this.makeParseDataSvgGraphic(i,a);case 19:n.t3=n.sent,n.t4=(0,n.t2)(n.t3),n.t0.apply.call(n.t0,n.t1,n.t4),g.push(this.makeParseData(h,i,a,"BASICSVG")),g.push(this.makeParseData(d,i,a,"SHAPESVG")),g.push(this.makeParseData(u,i,a,"TEXT")),g.push(this.makeParseData(p,i,a,"GRID")),g.push(this.makeParseData(v,i,a,"SVGIMAGEFRAME")),m=0,E=g;case 28:if(!(m<E.length)){n.next=40;break}if(!(y=E[m]).sheetNode){n.next=35;break}return n.next=33,t.pushSheetItems(f,y.parser,y.sheetNode,y.templateNode,s);case 33:n.next=37;break;case 35:return n.next=37,t.pushTemplateItems(f,y.parser,y.templateNode,s);case 37:m++,n.next=28;break;case 40:return _.ArrayUtil.stableSort(f,function(e,t){return e.priority-t.priority}),n.abrupt("return",f);case 42:case"end":return n.stop()}},n,this)})),function(e,t){return c.apply(this,arguments)})},{key:"makeParseData",value:function(e,t,n,i){return{parser:e,sheetNode:null!=t?t[i]:null,templateNode:null!=n?n[i]:null}}},{key:"makeParseDataSvgGraphic",value:(s=l()(o.a.mark(function t(n,i){var a,s,l,c,u,h,d,p,v,f,g,m,E,y,T;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("SVG","SVG_PRIVATE",s=null,n&&n.SVG?s=n.SVG:i&&(s=i.SVG),l=null,n&&n.SVG_PRIVATE?l=n.SVG_PRIVATE:i&&(l=i.SVG_PRIVATE),s||(s=[]),l||(l=[]),Array.isArray(s)||(s=[s]),Array.isArray(l)||(l=[l]),(a=s).push.apply(a,r()(l)),0!==s.length){t.next=13;break}return t.abrupt("return",[]);case 13:c=this.getSvgParser(this.sheets.version),u=this.getPrivateSvgParser(this.sheets.version),h=this.getShapeSvgParser(this.sheets.version),d=[],p=!0,v=!1,f=void 0,t.prev=20,g=s[Symbol.iterator]();case 22:if(p=(m=g.next()).done){t.next=32;break}return E=m.value,y=E["@SvgKey"],t.next=27,w.c.getSvgDataByKey(y,R.a.instance.env.adminMode||!!e.env.IMAGE_PROCESS);case 27:T=t.sent,w.c.isDefaultShapeSvg(T)?d.push({parser:h,sheetNode:E,templateNode:E.TEMPLATE}):T.isPrivate&&!e.env.IMAGE_PROCESS?d.push({parser:u,sheetNode:E,templateNode:E.TEMPLATE}):d.push({parser:c,sheetNode:E,templateNode:E.TEMPLATE});case 29:p=!0,t.next=22;break;case 32:t.next=38;break;case 34:t.prev=34,t.t0=t.catch(20),v=!0,f=t.t0;case 38:t.prev=38,t.prev=39,p||null==g.return||g.return();case 41:if(t.prev=41,!v){t.next=44;break}throw f;case 44:return t.finish(41);case 45:return t.finish(38);case 46:return t.abrupt("return",d);case 47:case"end":return t.stop()}},t,this,[[20,34,38,46],[39,,41,45]])})),function(e,t){return s.apply(this,arguments)})},{key:"makeXml",value:function(){var e=new m.a("SMILECAT-TBPE-SHEETS"),t=e.root(),n=new y.a,i=new E.a;return n.makeXml(this.sheets,t),this.pages.forEach(function(e){i.makeXml(e,t.elem("PAGE").elem("SHEET"))}),this.saveData=e.xmldoc,(new XMLSerializer).serializeToString(e.xmldoc)}},{key:"download",value:function(e,t,n){var i=new Blob([e],{type:n});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(i,t);else{var r=document.createElement("a"),a=URL.createObjectURL(i);r.href=a,r.download=t,document.body.appendChild(r),r.click(),setTimeout(function(){document.body.removeChild(r),window.URL.revokeObjectURL(a)},0)}}},{key:"addPages",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.pages.length,n=this.pages.splice(t);this.pages=this.pages.concat(e).concat(n),this.pages.forEach(function(e,t){e.pageIdx=t})}},{key:"replacePage",value:function(e,t){this.pages[t]=e,e.pageIdx=t}},{key:"addRenderPageClass",value:function(){for(var e=0;e<this.pages.length;e++)e===R.a.instance.renderPageIdx?R.a.instance.pageController.getPageRenderer(this.pages[e]).element.classList.add(k.a.RENDER_PAGE):R.a.instance.pageController.getPageRenderer(this.pages[e]).element.classList.remove(k.a.RENDER_PAGE)}},{key:"changeSheetSize",value:function(e,t){this.pages.forEach(function(n){return n.changeSheetSize(e,t)})}}],[{key:"getNeededSvgKeyList",value:(a=l()(o.a.mark(function e(t,n){var i,r,a,s,l,c,u,h,d,p,v,f,g,m,E,y,T,_,I,C,S,k,R,L,O;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(i=t&&t.SVG||[],r=t&&t.SHAPESVG||[],a=t&&t.SVG_PRIVATE||[],Array.isArray(i)||(i=[i]),Array.isArray(r)||(r=[r]),Array.isArray(a)||(a=[a]),s=[],l=!0,c=!1,u=void 0,e.prev=10,h=i[Symbol.iterator]();!(l=(d=h.next()).done);l=!0)p=d.value,v=p["@SvgKey"],s.indexOf(v)<0&&s.push(v);e.next=18;break;case 14:e.prev=14,e.t0=e.catch(10),c=!0,u=e.t0;case 18:e.prev=18,e.prev=19,l||null==h.return||h.return();case 21:if(e.prev=21,!c){e.next=24;break}throw u;case 24:return e.finish(21);case 25:return e.finish(18);case 26:for(f=!0,g=!1,m=void 0,e.prev=29,E=r[Symbol.iterator]();!(f=(y=E.next()).done);f=!0)T=y.value,_=T["@SvgKey"],s.indexOf(_)<0&&s.push(_);e.next=37;break;case 33:e.prev=33,e.t1=e.catch(29),g=!0,m=e.t1;case 37:e.prev=37,e.prev=38,f||null==E.return||E.return();case 40:if(e.prev=40,!g){e.next=43;break}throw m;case 43:return e.finish(40);case 44:return e.finish(37);case 45:for(I=!0,C=!1,S=void 0,e.prev=48,k=a[Symbol.iterator]();!(I=(R=k.next()).done);I=!0)L=R.value,O=L["@SvgKey"],s.indexOf(O)<0&&s.push(O);e.next=56;break;case 52:e.prev=52,e.t2=e.catch(48),C=!0,S=e.t2;case 56:e.prev=56,e.prev=57,I||null==k.return||k.return();case 59:if(e.prev=59,!C){e.next=62;break}throw S;case 62:return e.finish(59);case 63:return e.finish(56);case 64:return e.next=66,w.c.getSvgDataResponse(s,n);case 66:case"end":return e.stop()}},e,null,[[10,14,18,26],[19,,21,25],[29,33,37,45],[38,,40,44],[48,52,56,64],[57,,59,63]])})),function(e,t){return a.apply(this,arguments)})},{key:"pushSheetItems",value:(i=l()(o.a.mark(function e(t,n,i,r,a){var s,l,c,u,h;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n||!i){e.next=18;break}if(!Array.isArray(i)){e.next=14;break}s=0,l=i.length;case 3:if(!(s<l)){e.next=12;break}return c=i[s],e.next=7,n.parse(c,null!=r?r[s]:c.TEMPLATE);case 7:u=e.sent,a&&!u.isValid()||t.push(u);case 9:s++,e.next=3;break;case 12:e.next=18;break;case 14:return e.next=16,n.parse(i,null!=r?r:i.TEMPLATE);case 16:h=e.sent,a&&!h.isValid()||t.push(h);case 18:case"end":return e.stop()}},e)})),function(e,t,n,r,a){return i.apply(this,arguments)})},{key:"pushTemplateItems",value:(n=l()(o.a.mark(function e(t,n,i,r){var a,s,l,c,u,h,d,p;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n||!i){e.next=36;break}if(!Array.isArray(i)){e.next=32;break}a=!0,s=!1,l=void 0,e.prev=5,c=i[Symbol.iterator]();case 7:if(a=(u=c.next()).done){e.next=16;break}return h=u.value,e.next=11,n.parse(null,h);case 11:d=e.sent,r&&!d.isValid()||t.push(d);case 13:a=!0,e.next=7;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(5),s=!0,l=e.t0;case 22:e.prev=22,e.prev=23,a||null==c.return||c.return();case 25:if(e.prev=25,!s){e.next=28;break}throw l;case 28:return e.finish(25);case 29:return e.finish(22);case 30:e.next=36;break;case 32:return e.next=34,n.parse(null,i);case 34:p=e.sent,r&&!p.isValid()||t.push(p);case 36:case"end":return e.stop()}},e,null,[[5,18,22,30],[23,,25,29]])})),function(e,t,i,r){return n.apply(this,arguments)})},{key:"parseGuidelines",value:function(e,n){if(n){var i=t.parseGuidelineGroup(n.HORIZONTAL,L.c.HOR),r=t.parseGuidelineGroup(n.VERTICAL,L.c.VER);e.guidelineFactoryInfos={Hor:i,Ver:r}}}},{key:"parseGuidelineGroup",value:function(e,t){var n=[],i=e["@NowPosition"],r=e["@Plus"],a=e.GUIDELINE;if(Array.isArray(a)){var o=!0,s=!1,l=void 0;try{for(var c,u=a[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var h=c.value;n.push(this.getGuideline(t,h))}}catch(e){s=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(s)throw l}}}else a&&n.push(this.getGuideline(t,a));return{guidelines:n,nowPosition:i,plus:r}}},{key:"getGuideline",value:function(e,t){var n=new L.a(e,t["@InitPosition"]);return n.setLastPosition(t["@LastPosition"]),n}}]),t}()}).call(this,n(115))},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return m});var i=n(0),r=n.n(i),a=n(1),o=n.n(a),s=n(35),l=n.n(s),c=n(36),u=n.n(c),h=n(60),d=n(70),p=n(133),v=n(196),f=n(127),g=n(42),m=function(){function t(){l()(this,t)}var n;return u()(t,[{key:"createNewItem",value:function(e,n,i,r,a,o){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]&&arguments[8],u=!(arguments.length>9&&void 0!==arguments[9])||arguments[9],h=!(arguments.length>10&&void 0!==arguments[10])||arguments[10],d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11],v=!(arguments.length>12&&void 0!==arguments[12])||arguments[12];return t.createGenericItem(p.a,e,n,i,r,a,o,s,l,c,u,h,d,v)}},{key:"parse",value:(n=o()(r.a.mark(function t(n,i){var a,o,s,l,c,u,d,p,m,E,y,T,_;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=40;break}return o=n["@SvgKey"],t.next=4,h.c.getSvgDataByKey(o,g.a.instance.env.adminMode||!!e.env.IMAGE_PROCESS);case 4:if(s=t.sent,(a=this.createNewItem(Object(f.a)(),s,n.Position["@Left"],n.Position["@Top"],n.Position["@Right"],n.Position["@Bottom"],-n["@Rotate"],-1===n["@FlipH"],-1===n["@FlipV"],-1===i["@CanUserSelect"],-1===i["@CanUserMove"],-1===i["@CanUserResize"],-1===i["@CanUserDel"])).copyKey=n["@copyKey"]?n["@copyKey"]:"",a.groupId=n["@GroupId"]?n["@GroupId"]:"",a.layerName=n["@LayerName"]?n["@LayerName"]:"",a.priority=n["@Priority"]?n["@Priority"]:0,n["@Opacity"]?a.props.setOpacity(n["@Opacity"]):a.props.setOpacity(null!=n["@SvgOpacity"]?n["@SvgOpacity"]:255),a.isBackground=n["@IsBackground"]||!1,a.props.patternCountRatio=n["@PatternCountRatio"]||1,this.parseAllSvgLayer(n,a),!n.fillColorMap){t.next=37;break}for(l=n.fillColorMap.fillColor,c=[],Array.isArray(l)?c=l:void 0!==l&&(c=[l]),u=!0,d=!1,p=void 0,t.prev=21,m=c[Symbol.iterator]();!(u=(E=m.next()).done);u=!0)y=E.value,T=y["@originColor"],_=y["@color"],a.props.setCurrentOriginColor(T),a.props.setColor(_);t.next=29;break;case 25:t.prev=25,t.t0=t.catch(21),d=!0,p=t.t0;case 29:t.prev=29,t.prev=30,u||null==m.return||m.return();case 32:if(t.prev=32,!d){t.next=35;break}throw p;case 35:return t.finish(32);case 36:return t.finish(29);case 37:n.Shadow&&(a.props.setActiveShadow(n.Shadow["@IsShadow"]||!1),a.props.setShadowColor(n.Shadow["@Color"]||"#000000"),a.props.setShadowAngle(n.Shadow["@Angle"]||0),a.props.setShadowAlpha(null!=n.Shadow["@Alpha"]?n.Shadow["@Alpha"]:255),a.props.setShadowDistance(n.Shadow["@Distance"]||0),a.props.setShadowBlur(n.Shadow["@Blur"]||0)),t.next=40;break;case 40:return a.updateColor(),v.a.parseOldIntegerLTRBSvgItem(a),t.abrupt("return",a);case 43:case"end":return t.stop()}},t,this,[[21,25,29,37],[30,,32,36]])})),function(e,t){return n.apply(this,arguments)})},{key:"parseAllSvgLayer",value:function(e,t){var n=this;t.layers.forEach(function(t,i){var r;r=Array.isArray(e.SvgLayer)?e.SvgLayer[i]:e.SvgLayer,n.parseSvgLayer(r,t),n.parseColor(e,r,t)})}},{key:"getValidNumberValue",value:function(e,t){return!e||isNaN(e)?t:e}},{key:"parseSvgLayer",value:function(e,t){t.layerId=e["@layerId"],t.left=this.getValidNumberValue(e["@left"],t.left),t.top=this.getValidNumberValue(e["@top"],t.top),t.scaleX=Math.abs(this.getValidNumberValue(e["@scaleX"],t.scaleX)),t.scaleY=Math.abs(this.getValidNumberValue(e["@scaleY"],t.scaleY)),t.scaleCommon=this.getValidNumberValue(e["@scaleCommon"],t.scaleCommon),t.savedData.left=e["@layerLeft"],t.savedData.top=e["@layerTop"],t.savedData.width=e["@layerWidth"],t.savedData.height=e["@layerHeight"],t.savedData.moveOffsetX=e["@moveOffsetX"],t.savedData.moveOffsetY=e["@moveOffsetY"],t.savedData.extendOffsetX=e["@extendOffsetX"],t.savedData.extendOffsetY=e["@extendOffsetY"],t.savedData.type=e["@type"],this.calibrateSvgLayerPositionByType(t)}},{key:"parseColor",value:function(e,t,n){if(void 0!==t["@fillColor"]){var i=d.a.getOriginFillColors(n.element);n.setColorByOriginColor(i[0],t["@fillColor"])}else{var r=e.fillColorMap.fillColor,a=[];Array.isArray(r)?a=r:void 0!==r&&(a=[r]);var o=!0,s=!1,l=void 0;try{for(var c,u=a[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var h=c.value,p=h["@originColor"],v=h["@color"];n.setColorByOriginColor(p,v)}}catch(e){s=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(s)throw l}}}}},{key:"calibrateSvgLayerPositionByType",value:function(e){if(e.svgLayer.type.value!==e.savedData.type){var t=(e.scaleX-1)*e.svgLayer.left*e.svgLayer.extendOffsetX,n=(e.scaleY-1)*e.svgLayer.top*e.svgLayer.extendOffsetY,i=Math.pow(10,-3);if(e.svgLayer.type.value===h.e.NO_PATTERN.value){var r=e.svgLayer.width*(e.scaleX-1),a=e.svgLayer.height*(e.scaleY-1),o=e.savedData.type===h.e.LAYER_PATTERN.value,s=0===e.left||e.left-r<i,l=0===e.top||e.top-a<i,c=e.svgLayer.extendOffsetX>0,u=e.svgLayer.extendOffsetY>0;c&&(o||s)&&(e.left-=t/e.svgLayer.extendOffsetX),u&&(o||l)&&(e.top-=n/e.svgLayer.extendOffsetY)}else e.svgLayer.type.value===h.e.LAYER_PATTERN.value&&(t+e.left<i&&(e.left=0),n+e.top<i&&(e.top=0))}}}],[{key:"createGenericItem",value:function(e,t,n,i,r,a,o){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]&&arguments[8],c=arguments.length>9&&void 0!==arguments[9]&&arguments[9],u=!(arguments.length>10&&void 0!==arguments[10])||arguments[10],h=!(arguments.length>11&&void 0!==arguments[11])||arguments[11],d=!(arguments.length>12&&void 0!==arguments[12])||arguments[12],p=!(arguments.length>13&&void 0!==arguments[13])||arguments[13];return new e(t,n,i,r,a,o,s,l,c,u,h,d,p)}}]),t}()}).call(this,n(115))},,function(e,t,n){"use strict";n.d(t,"a",function(){return w});var i=n(39),r=n.n(i),a=n(38),o=n.n(a),s=n(44),l=n.n(s),c=n(40),u=n.n(c),h=n(37),d=n.n(h),p=n(0),v=n.n(p),f=n(1),g=n.n(f),m=n(35),E=n.n(m),y=n(36),T=n.n(y),_=n(51),I=n(50),C=n(3),S=n(127),w=function(){function e(){E()(this,e)}var t;return T()(e,[{key:"createNewItem",value:function(t,n,i,r,a,o,s){var l=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]&&arguments[8],u=!(arguments.length>9&&void 0!==arguments[9])||arguments[9],h=!(arguments.length>10&&void 0!==arguments[10])||arguments[10],d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11],p=!(arguments.length>12&&void 0!==arguments[12])||arguments[12];return e.createGenericItem(I.e,t,n,i,r,a,o,o,s,l,c,u,h,d,p)}},{key:"parse",value:(t=g()(v.a.mark(function e(t,n){var i;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t?((i=this.createNewItem(Object(S.a)(),t.Position["@Left"],t.Position["@Top"],t.Position["@Right"],t.Position["@Bottom"],-t["@Rotate"],t["@BelongsTo"]||I.c.INDEPENDENT,-1===t["@FlipH"],-1===t["@FlipV"],-1===n["@CanUserSelect"],-1===n["@CanUserMove"],-1===n["@CanUserResize"],-1===n["@CanUserDel"])).priority=t["@Priority"]?t["@Priority"]:0,i.props.setPhotoKey(t["@StickerId"]),i.copyKey=t["@copyKey"]?t["@copyKey"]:"",i.groupId=t["@GroupId"]?t["@GroupId"]:"",i.layerName=t["@LayerName"]?t["@LayerName"]:"",i.props.setOpacity(null!=t["@Opacity"]?t["@Opacity"]:255),i.props.setBrightness(t["@Brightness"]||0),i.props.setSaturation(t["@Saturation"]||0),i.props.setLightness(t["@Lightness"]||0),i.props.setFlipH(-1===t["@FlipH"]),i.props.setFlipV(-1===t["@FlipV"]),i.props.setContrast(t["@Contrast"]||0),i.props.setTint(t["@Tint"]||0),i.props.setColorTone(t["@ColorTone"]||0),i.props.setTemperature(t["@Temperature"]||0),i.props.setBlur(t["@Blur"]||0),i.props.setVignette(t["@Vignette"]||0),i.addedBy=t["@AddedBy"],i.props.setPhotoKey(t["@StickerId"]),i.orgType=n["@OriginType"]||I.b.Sticker):((i=this.createNewItem("sticker".concat((new Date).getTime()).concat(C.StringUtil.random()),n.Position["@Left"],n.Position["@Top"],n.Position["@Right"],n.Position["@Bottom"],-n["@Rotate"],n["@BelongsTo"]||I.c.INDEPENDENT,-1===n["@FlipH"],-1===n["@FlipV"],-1===n["@CanUserSelect"],-1===n["@CanUserMove"],-1===n["@CanUserResize"],-1===n["@CanUserDel"])).props.setPhotoKey(n["@StickerId"]),i.props.setOpacity(null!=n["@Opacity"]?n["@Opacity"]:255),i.props.setBrightness(n["@Brightness"]||0),i.props.setLightness(n["@Lightness"]||0),i.props.setSaturation(n["@Saturation"]||0),i.props.setContrast(n["@Contrast"]||0),i.props.setTint(n["@Tint"]||0),i.props.setColorTone(n["@ColorTone"]||0),i.props.setTemperature(n["@Temperature"]||0),i.props.setBlur(n["@Blur"]||0),i.props.setVignette(n["@Vignette"]||0),i.props.setFlipH(-1===n["@FlipH"]),i.props.setFlipV(-1===n["@FlipV"]),i.addedBy=_.c.LAYOUT,i.props.setPhotoKey(n["@StickerId"]),i.orgType=n["@OriginType"]||I.b.Sticker),e.abrupt("return",i);case 2:case"end":return e.stop()}},e,this)})),function(e,n){return t.apply(this,arguments)})}],[{key:"createGenericItem",value:function(e,t,n,i,r,a,o,s,l,c,u,h,d,p,v){return new e(t,n,i,r,a,o,s,l,c,u,h,d,p,v)}}]),e}();I.e},function(e,t,n){"use strict";n.d(t,"a",function(){return S}),n.d(t,"c",function(){return w}),n.d(t,"b",function(){return k});var i=n(39),r=n.n(i),a=n(38),o=n.n(a),s=n(46),l=n.n(s),c=n(40),u=n.n(c),h=n(0),d=n.n(h),p=n(1),v=n.n(p),f=n(35),g=n.n(f),m=n(36),E=n.n(m),y=n(62),T=n(51),_=n(3),I=n(104),C=n(127),S=function(){function e(){g()(this,e)}var t;return E()(e,[{key:"createNewItem",value:function(t,n,i,r,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],l=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=!(arguments.length>8&&void 0!==arguments[8])||arguments[8],u=!(arguments.length>9&&void 0!==arguments[9])||arguments[9],h=!(arguments.length>10&&void 0!==arguments[10])||arguments[10],d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];return e.createGenericItem(y.b,t,n,i,r,a,o,s,l,c,u,h,d)}},{key:"parse",value:(t=v()(d.a.mark(function t(n,i){var r,a,o,s,l,c,u,h,p,v,f,g,m,E,y,S,w,k,R,L,O;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n?((r=this.createNewItem(Object(C.a)(),n.Position["@Left"],n.Position["@Top"],n.Position["@Right"],n.Position["@Bottom"],-n["@Rotate"],-1===n["@FlipH"],-1===n["@FlipV"],-1===i["@CanUserSelect"],-1===i["@CanUserMove"],-1===i["@CanUserResize"],-1===i["@CanUserDel"])).priority=n["@Priority"]?n["@Priority"]:0,a=r.props,o=a.onboundchange,a.onboundchange=null,r.copyKey=n["@copyKey"]?n["@copyKey"]:"",r.groupId=n["@GroupId"]?n["@GroupId"]:"",r.layerName=n["@LayerName"]?n["@LayerName"]:"",a.setOpacity(null!=n["@Opacity"]?n["@Opacity"]:255),a.setUpperCase(n["@UpperCase"]||!1),a.setBackgroundColor(n["@BackgroundColor"]),a.setFillBackground(n["@FillBackground"]),a.setVerticalAlignXml(n["@VAlignment"]),n.Curve?(a.setActiveCurve(n.Curve["@IsCurved"],!0),a.setCurveCw(n.Curve["@Clockwise"])):0!==(s=Number(n.Effect["@BezierPercent"]))&&(l=s*a.getWidth(),a.setActiveCurve(!0,!0),a.setCurveCw(l>0),c=2*l,a.setTextAlignXml(I.d.CENTER),l>0?(u=a.getBottom()+c,a.setTop(a.getBottom()),a.setBottom(u)):(a.setTop(a.getBottom()+c),(h=a.getRotate()+180)>=360&&(h-=360),a.setRotate(h))),e.setGradientColor(a,n.Effect.Fill.Gradient),(p=n.TextData)?(a.setTextData(p),n["@NewVersion"]||(v=a.getShadowAngles(),f=a.getRotate(),v.forEach(function(e,t){e.forEach(function(e,n){v[t][n]+=f})}),a.setShadowAngle(v),4.5,(g=a.getShadowSpreads()).forEach(function(e,t){e.forEach(function(e,n){g[t][n]=e>100/4.5?100:4.5*e})}),a.setShadowSpread(g))):(a.setText(n.Text||""),a.setFontColor(n.Font["@Color"]),a.setFamily(n.Font["@Family"]),a.setAbsSize(n.Font["@Size"]),a.setBold(n.Font.Style["@Bold"]),a.setItalic(n.Font.Style["@Italic"]),a.setStrikeout(n.Font.Style["@Strikeout"]),a.setUnderline(n.Font.Style["@Underline"]),a.setTextAlignXml(n["@Alignment"]),a.setFontDetailLineSpaceXml(n.Font["@LineSpace"]),a.setFontDetailTextSpaceXml(n.Effect["@TextSpace"]),a.setFontDetailScaleX(n.Effect["@ScaleX"],!0),a.setActiveOutline(n.Effect.Outline["@DoOutline"]),a.setOutlineColor(n.Effect.Outline["@Color"],null,null,!0),a.setOutlineSize(n.Effect.Outline["@Size"]),a.setActiveShadow(n.Effect.Shadow["@DoShadow"]),a.setShadowColor(n.Effect.Shadow["@Color"],null,null,!0),a.setShadowDistance(n.Effect.Shadow["@Distance"]),(m=n.Effect.Shadow["@Angle"])&&!n["@NewVersion"]&&(m+=a.getRotate()),a.setShadowAngle(m),a.setShadowSize(n.Effect.Shadow["@Size"]),(E=n.Effect.Shadow["@Spread"])&&!n["@NewVersion"]&&(100/4.5,E=E>100/4.5?100:E*(100/4.5)),a.setShadowSpread(E,null,null,!0),a.setFillType(n.Effect.Fill["@Type"])),a.onboundchange=o):(r=this.createNewItem("text".concat((new Date).getTime()).concat(_.StringUtil.random()),i.Position["@Left"],i.Position["@Top"],i.Position["@Right"],i.Position["@Bottom"],-i["@Rotate"],-1===i["@FlipH"],-1===i["@FlipV"],-1===i["@CanUserSelect"],-1===i["@CanUserMove"],-1===i["@CanUserResize"],-1===i["@CanUserDel"]),y=r.props,S=y.onboundchange,y.onboundchange=null,y.setText(i.Text||""),y.setOpacity(null!=i["@Opacity"]?i["@Opacity"]:255),y.setBackgroundColor(i["@BackgroundColor"]),y.setFillBackground(i["@FillBackground"]),y.setVerticalAlignXml(i["@VAlignment"]),e.setGradientColor(y,i.Effect.Fill.Gradient),i.Textdata?(y.setTextData(i.Textdata),i["@NewVersion"]||(w=y.getShadowAngles(),k=y.getRotate(),w.forEach(function(e,t){e.forEach(function(e,n){w[t][n]=w[t][n]+k})}),y.setShadowAngle(w),4.5,(R=y.getShadowSpreads()).forEach(function(e,t){e.forEach(function(e,n){R[t][n]=e>100/4.5?100:4.5*e})}),y.setShadowSpread(R))):(y.setFontColor(i.Font["@Color"]),y.setFamily(i.Font["@Family"]),y.setAbsSize(i.Font["@Size"]),y.setBold(i.Font.Style["@Bold"]),y.setItalic(i.Font.Style["@Italic"]),y.setStrikeout(i.Font.Style["@Strikeout"]),y.setUnderline(i.Font.Style["@Underline"]),y.setTextAlignXml(i["@Alignment"]),y.setFontDetailLineSpaceXml(i.Font["@LineSpace"]),y.setFontDetailTextSpace(i.Effect["@TextSpace"]),y.setFontDetailScaleX(i.Effect["@ScaleX"],!0),i.Effect.Outline&&(y.setActiveOutline(i.Effect.Outline["@DoOutline"]),y.setOutlineColor(i.Effect.Outline["@Color"],null,null,!0),y.setOutlineSize(i.Effect.Outline["@Size"])),i.Effect.Shadow&&(y.setActiveShadow(i.Effect.Shadow["@DoShadow"]),y.setShadowColor(i.Effect.Shadow["@Color"],null,null,!0),y.setShadowDistance(i.Effect.Shadow["@Distance"]),(L=i.Effect.Shadow["@Angle"])&&!i["@NewVersion"]&&(L+=y.getRotate()),y.setShadowAngle(L),y.setShadowSize(i.Effect.Shadow["@Size"]),(O=i.Effect.Shadow["@Spread"])&&!i["@NewVersion"]&&(100/4.5,O=O>100/4.5?100:O*(100/4.5)),y.setShadowSpread(O,null,null,!0)),y.setFillType(i.Effect.Fill["@Type"])),r.addedBy=T.c.LAYOUT,y.onboundchange=S),r.props.getFamily().toUpperCase().indexOf("CODE3X")>-1&&r.props.setText("12345-5432"),t.abrupt("return",r);case 3:case"end":return t.stop()}},t,this)})),function(e,n){return t.apply(this,arguments)})}],[{key:"createGenericItem",value:function(e,t,n,i,r,a){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8&&void 0!==arguments[8]&&arguments[8],c=!(arguments.length>9&&void 0!==arguments[9])||arguments[9],u=!(arguments.length>10&&void 0!==arguments[10])||arguments[10],h=!(arguments.length>11&&void 0!==arguments[11])||arguments[11],d=!(arguments.length>12&&void 0!==arguments[12])||arguments[12];return new e(t,n,i,r,a,o,s,l,c,u,h,d)}},{key:"setGradientColor",value:function(e,t){if(t){e.setActiveGradient(!0),e.setFillType(I.a.GRADATION);var n=t.Color1,i=t.Color2,r=t.Color3,a=t.Color4;n===i&&r===a?e.setGradientNewFormat(!0):(e.setGradientNewFormat(!1),e.setGradientColor2(i,!0),e.setGradientColor4(a,!0)),e.setGradientColor1(n,!0),e.setGradientColor3(r,!0),e.setGradientAngle(t["@Angle"])}else{e.setActiveGradient(!1),e.setGradientAngle(45),e.setGradientNewFormat(!0);var o=(s=parseInt(Math.random()*R.length),R[s]);e.setGradientColor1(o.x,!0),e.setGradientColor3(o.y,!0)}var s}}]),e}(),w=function(e){function t(){return g()(this,t),r()(this,o()(t).apply(this,arguments))}var n;return u()(t,e),E()(t,[{key:"parse",value:(n=v()(d.a.mark(function e(n,i){var r;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l()(o()(t.prototype),"parse",this).call(this,n,i);case 2:return(r=e.sent).props.setLegacy(!0),null==r.props.getFillType()&&r.props.setFillType(I.a.COLOR),e.abrupt("return",r);case 6:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})}]),t}(S),k=function(e){function t(){return g()(this,t),r()(this,o()(t).apply(this,arguments))}var n;return u()(t,e),E()(t,[{key:"parse",value:(n=v()(d.a.mark(function e(n,i){var r;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l()(o()(t.prototype),"parse",this).call(this,n,i);case 2:return(r=e.sent).props.setLegacy(!0),r.props.forEachChar(function(e){return e.fontdetail.textSpace*=10}),r.props.setRotate(-r.props.getRotate()),null==r.props.getFillType()&&r.props.setFillType(I.a.COLOR),e.abrupt("return",r);case 8:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})}]),t}(S),R=[{x:"#ff9a9e",y:"#fad0c4"},{x:"#ffecd2",y:"#fcb69f"},{x:"#ff9a9e",y:"#fecfef"},{x:"#a1c4fd",y:"#c2e9fb"},{x:"#cfd9df",y:"#e2ebf0"},{x:"#fdfbfb",y:"#ebedee"},{x:"#f5f7fa",y:"#c3cfe2"},{x:"#fdfcfb",y:"#e2d1c3"},{x:"#89f7fe",y:"#66a6ff"},{x:"#48c6ef",y:"#f5efef"},{x:"#a3bded",y:"#6991c7"},{x:"#13547a",y:"#80d0c7"},{x:"#93a5cf",y:"#ff7eb3"},{x:"#B7F8DB",y:"#50A7C2"}]},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var i=n(0),r=n.n(i),a=n(1),o=n.n(a),s=n(35),l=n.n(s),c=n(36),u=n.n(c),h=n(66),d=n(88),p=n(196),v=n(127),f=function(){function e(t){l()(this,e),this.photoParser=t}var t;return u()(e,[{key:"createNewItem",value:function(t,n,i,r,a,o){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]&&arguments[8],u=!(arguments.length>9&&void 0!==arguments[9])||arguments[9],d=!(arguments.length>10&&void 0!==arguments[10])||arguments[10],p=!(arguments.length>11&&void 0!==arguments[11])||arguments[11],v=!(arguments.length>12&&void 0!==arguments[12])||arguments[12];return e.createGenericItem(h.b,t,n,i,r,a,o,s,l,c,u,d,p,v)}},{key:"parse",value:(t=o()(r.a.mark(function e(t,n){var i,a,o,s,l,c,u,h,f,g,m,E,y,T,_,I,C,S,w,k,R;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=75;break}return a=t["@SvgKey"],e.next=4,d.c.getImageframeDataByKey(a);case 4:return o=e.sent,(i=this.createNewItem(Object(v.a)(),o,t.Position["@Left"],t.Position["@Top"],t.Position["@Right"],t.Position["@Bottom"],-t["@Rotate"],-1===t["@FlipH"],-1===t["@FlipV"],-1===n["@CanUserSelect"],-1===n["@CanUserMove"],-1===n["@CanUserResize"],-1===n["@CanUserDel"])).initFramePosition(),e.next=9,i.initPhoto();case 9:for(i.copyKey=t["@copyKey"]?t["@copyKey"]:"",i.groupId=t["@GroupId"]?t["@GroupId"]:"",i.layerName=t["@LayerName"]?t["@LayerName"]:"",i.priority=t["@Priority"]?t["@Priority"]:0,i.props.setOpacity(t["@Opacity"]),i.originPhotoFlipHor=t["@OriginFlipHor"]||!1,i.originPhotoFlipVer=t["@OriginFlipHor"]||!1,s=t.fillColorMap.fillColor,l=[],Array.isArray(s)?l=s:void 0!==s&&(l=[s]),c=!0,u=!1,h=void 0,e.prev=22,f=l[Symbol.iterator]();!(c=(g=f.next()).done);c=!0)m=g.value,E=m["@originColor"],y=m["@color"],i.props.setCurrentOriginColor(E),i.props.setColor(y);e.next=30;break;case 26:e.prev=26,e.t0=e.catch(22),u=!0,h=e.t0;case 30:e.prev=30,e.prev=31,c||null==f.return||f.return();case 33:if(e.prev=33,!u){e.next=36;break}throw h;case 36:return e.finish(33);case 37:return e.finish(30);case 38:if(t.Shadow&&(i.props.setActiveShadow(t.Shadow["@IsShadow"]||!1),i.props.setShadowColor(t.Shadow["@Color"]||"#000000"),i.props.setShadowAngle(t.Shadow["@Angle"]||0),i.props.setShadowAlpha(null!=t.Shadow["@Alpha"]?t.Shadow["@Alpha"]:255),i.props.setShadowDistance(t.Shadow["@Distance"]||0),i.props.setShadowBlur(t.Shadow["@Blur"]||0)),!(T=t.PHOTO)){e.next=73;break}_=!0,I=!1,C=void 0,e.prev=44,S=(Array.isArray(T)?T:[T])[Symbol.iterator]();case 46:if(_=(w=S.next()).done){e.next=59;break}return k=w.value,e.next=50,this.photoParser.parse(k,k.TEMPLATE);case 50:R=e.sent,i.innerPhotoItem.props=R.props.clone(),i.innerPhotoItem.orgType=R.orgType,i.innerPhotoItem.skinRatioId=R.skinRatioId,i.innerPhotoItem.setLTRBCoordinate(R.getLTRBCoordinate()),i.innerPhotoItem.itemPosition=R.itemPosition.clone();case 56:_=!0,e.next=46;break;case 59:e.next=65;break;case 61:e.prev=61,e.t1=e.catch(44),I=!0,C=e.t1;case 65:e.prev=65,e.prev=66,_||null==S.return||S.return();case 68:if(e.prev=68,!I){e.next=71;break}throw C;case 71:return e.finish(68);case 72:return e.finish(65);case 73:e.next=75;break;case 75:return i.updateColor(),p.a.parseOldIntegerLTRBSvgItem(i),e.abrupt("return",i);case 78:case"end":return e.stop()}},e,this,[[22,26,30,38],[31,,33,37],[44,61,65,73],[66,,68,72]])})),function(e,n){return t.apply(this,arguments)})}],[{key:"createGenericItem",value:function(e,t,n,i,r,a,o){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]&&arguments[8],c=arguments.length>9&&void 0!==arguments[9]&&arguments[9],u=!(arguments.length>10&&void 0!==arguments[10])||arguments[10],h=!(arguments.length>11&&void 0!==arguments[11])||arguments[11],d=!(arguments.length>12&&void 0!==arguments[12])||arguments[12],p=!(arguments.length>13&&void 0!==arguments[13])||arguments[13];return new e(t,n,i,r,a,o,s,l,c,u,h,d,p)}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var i=n(0),r=n.n(i),a=n(1),o=n.n(a),s=n(35),l=n.n(s),c=n(36),u=n.n(c),h=n(167),d=n(175),p=n(196),v=n(127),f=function(){function e(){l()(this,e)}var t;return u()(e,[{key:"createNewItem",value:function(t,n,i,r,a,o){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]&&arguments[8],u=!(arguments.length>9&&void 0!==arguments[9])||arguments[9],d=!(arguments.length>10&&void 0!==arguments[10])||arguments[10],p=!(arguments.length>11&&void 0!==arguments[11])||arguments[11],v=!(arguments.length>12&&void 0!==arguments[12])||arguments[12];return e.createGenericItem(h.a,t,n,i,r,a,o,s,l,c,u,d,p,v)}},{key:"parse",value:(t=o()(r.a.mark(function e(t,n){var i,a,o,s,l,c,u,h,f,g,m,E,y;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=36;break}return a=t["@SvgKey"],e.next=4,d.a.makeSvgDataFromFileKey(a);case 4:for(o=e.sent,(i=this.createNewItem(Object(v.a)(),o,t.Position["@Left"],t.Position["@Top"],t.Position["@Right"],t.Position["@Bottom"],-t["@Rotate"],-1===t["@FlipH"],-1===t["@FlipV"],-1===n["@CanUserSelect"],-1===n["@CanUserMove"],-1===n["@CanUserResize"],-1===n["@CanUserDel"])).copyKey=t["@copyKey"]?t["@copyKey"]:"",i.groupId=t["@GroupId"]?t["@GroupId"]:"",i.priority=t["@Priority"]?t["@Priority"]:0,i.props.setOpacity(t["@Opacity"]),s=t.fillColorMap.fillColor,l=[],Array.isArray(s)?l=s:void 0!==s&&(l=[s]),c=!0,u=!1,h=void 0,e.prev=16,f=l[Symbol.iterator]();!(c=(g=f.next()).done);c=!0)m=g.value,E=m["@originColor"],y=m["@color"],i.props.setCurrentOriginColor(E),i.props.setColor(y);e.next=24;break;case 20:e.prev=20,e.t0=e.catch(16),u=!0,h=e.t0;case 24:e.prev=24,e.prev=25,c||null==f.return||f.return();case 27:if(e.prev=27,!u){e.next=30;break}throw h;case 30:return e.finish(27);case 31:return e.finish(24);case 32:t.Shadow&&(i.props.setActiveShadow(t.Shadow["@IsShadow"]||!1),i.props.setShadowColor(t.Shadow["@Color"]||"#000000"),i.props.setShadowAngle(t.Shadow["@Angle"]||0),i.props.setShadowAlpha(null!=t.Shadow["@Alpha"]?t.Shadow["@Alpha"]:255),i.props.setShadowDistance(t.Shadow["@Distance"]||0),i.props.setShadowBlur(t.Shadow["@Blur"]||0)),i.layerName=t["@LayerName"]?t["@LayerName"]:"",e.next=36;break;case 36:return i.updateColor(),p.a.parseOldIntegerLTRBSvgItem(i),e.abrupt("return",i);case 39:case"end":return e.stop()}},e,this,[[16,20,24,32],[25,,27,31]])})),function(e,n){return t.apply(this,arguments)})}],[{key:"createGenericItem",value:function(e,t,n,i,r,a,o){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]&&arguments[8],c=arguments.length>9&&void 0!==arguments[9]&&arguments[9],u=!(arguments.length>10&&void 0!==arguments[10])||arguments[10],h=!(arguments.length>11&&void 0!==arguments[11])||arguments[11],d=!(arguments.length>12&&void 0!==arguments[12])||arguments[12],p=!(arguments.length>13&&void 0!==arguments[13])||arguments[13];return new e(t,n,i,r,a,o,s,l,c,u,h,d,p)}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return m});var i=n(0),r=n.n(i),a=n(1),o=n.n(a),s=n(35),l=n.n(s),c=n(36),u=n.n(c),h=n(51),d=n(60),p=n(150),v=n(196),f=n(127),g=n(42),m=function(){function e(){l()(this,e)}var t;return u()(e,[{key:"createNewItem",value:function(t,n,i,r,a,o){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]&&arguments[8],u=!(arguments.length>9&&void 0!==arguments[9])||arguments[9],h=!(arguments.length>10&&void 0!==arguments[10])||arguments[10],d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11],v=!(arguments.length>12&&void 0!==arguments[12])||arguments[12];return e.createGenericItem(p.a,t,n,i,r,a,o,s,l,c,u,h,d,v)}},{key:"parse",value:(t=o()(r.a.mark(function e(t,n){var i,a,o,s,l,c,u,p,m,E,y,T,_,I,C,S,w,k,R,L,O,A,b,P,N,x,M,D,B,U,G,F,H;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=60;break}return a=t["@SvgKey"],e.next=4,d.c.getSvgDataByKey(a,!0);case 4:if(o=e.sent,(i=this.createNewItem(Object(f.a)(),o,t.Position["@Left"],t.Position["@Top"],t.Position["@Right"],t.Position["@Bottom"],-t["@Rotate"],-1===t["@FlipH"],-1===t["@FlipV"],-1===n["@CanUserSelect"],-1===n["@CanUserMove"],-1===n["@CanUserResize"],-1===n["@CanUserDel"])).copyKey=t["@copyKey"]?t["@copyKey"]:"",i.groupId=t["@GroupId"]?t["@GroupId"]:"",i.layerName=t["@LayerName"]?t["@LayerName"]:"",i.priority=t["@Priority"]?t["@Priority"]:0,t["@Opacity"]?i.props.setOpacity(t["@Opacity"]):i.props.setOpacity(null!=t["@SvgOpacity"]?t["@SvgOpacity"]:255),t.Outline&&(i.props.setActiveOutline(t.Outline["@DoOutline"]),i.props.setOutlineColor(t.Outline["@Color"]),i.props.setOutlineSize(t.Outline["@Size"]),i.props.setOutlineType(t.Outline["@Type"])),!t.fillColorMap){e.next=54;break}for(s=t.fillColorMap.fillColor,l=[],Array.isArray(s)?l=s:void 0!==s&&(l=[s]),c=!0,u=!1,p=void 0,e.prev=19,m=l[Symbol.iterator]();!(c=(E=m.next()).done);c=!0)y=E.value,T=y["@originColor"],_=y["@color"],i.props.setCurrentOriginColor(T),i.props.setColor(_);e.next=27;break;case 23:e.prev=23,e.t0=e.catch(19),u=!0,p=e.t0;case 27:e.prev=27,e.prev=28,c||null==m.return||m.return();case 30:if(e.prev=30,!u){e.next=33;break}throw p;case 33:return e.finish(30);case 34:return e.finish(27);case 35:for(I=!0,C=!1,S=void 0,e.prev=38,w=l[Symbol.iterator]();!(I=(k=w.next()).done);I=!0)R=k.value,L=R["@originColor"],O=R["@color"],i.props.setCurrentOriginColor(L),i.props.setColor(O);e.next=46;break;case 42:e.prev=42,e.t1=e.catch(38),C=!0,S=e.t1;case 46:e.prev=46,e.prev=47,I||null==w.return||w.return();case 49:if(e.prev=49,!C){e.next=52;break}throw S;case 52:return e.finish(49);case 53:return e.finish(46);case 54:t.Shadow&&(i.props.setActiveShadow(t.Shadow["@IsShadow"]||!1),i.props.setShadowColor(t.Shadow["@Color"]||"#000000"),i.props.setShadowAngle(t.Shadow["@Angle"]||0),i.props.setShadowAlpha(null!=t.Shadow["@Alpha"]?t.Shadow["@Alpha"]:255),i.props.setShadowDistance(t.Shadow["@Distance"]||0),i.props.setShadowBlur(t.Shadow["@Blur"]||0)),i.scaleX=t["@ScaleX"]||i.scaleX,i.scaleY=t["@ScaleY"]||i.scaleY,i.scaleCommon=t["@ScaleCommon"]||i.scaleCommon,e.next=95;break;case 60:return A=n["@SvgKey"],e.next=63,d.c.getSvgDataByKey(A,g.a.instance.env.adminMode);case 63:if(b=e.sent,i=this.createNewItem(Object(f.a)(),b,n.Position["@Left"],n.Position["@Top"],n.Position["@Right"],n.Position["@Bottom"],-n["@Rotate"],-1===n["@FlipH"],-1===n["@FlipV"],-1===n["@CanUserSelect"],-1===n["@CanUserMove"],-1===n["@CanUserResize"],-1===n["@CanUserDel"]),n["@Opacity"]?i.props.setOpacity(n["@Opacity"]):i.props.setOpacity(null!=n["@SvgOpacity"]?n["@SvgOpacity"]:255),n.Outline&&(i.props.setActiveOutline(n.Outline["@DoOutline"]),i.props.setOutlineColor(n.Outline["@Color"]),i.props.setOutlineSize(n.Outline["@Size"]),i.props.setOutlineType(n.Outline["@Type"])),i.addedBy=h.c.LAYOUT,!n.fillColorMap){e.next=91;break}for(P=n.fillColorMap.fillColor,N=[],Array.isArray(P)?N=P:void 0!==P&&(N=[P]),x=!0,M=!1,D=void 0,e.prev=75,B=N[Symbol.iterator]();!(x=(U=B.next()).done);x=!0)G=U.value,F=G["@originColor"],H=G["@color"],i.props.setCurrentOriginColor(F),i.props.setColor(H);e.next=83;break;case 79:e.prev=79,e.t2=e.catch(75),M=!0,D=e.t2;case 83:e.prev=83,e.prev=84,x||null==B.return||B.return();case 86:if(e.prev=86,!M){e.next=89;break}throw D;case 89:return e.finish(86);case 90:return e.finish(83);case 91:n.Shadow&&(i.props.setActiveShadow(n.Shadow["@IsShadow"]||!1),i.props.setShadowColor(n.Shadow["@Color"]||"#000000"),i.props.setShadowAngle(n.Shadow["@Angle"]||0),i.props.setShadowAlpha(null!=n.Shadow["@Alpha"]?n.Shadow["@Alpha"]:255),i.props.setShadowDistance(n.Shadow["@Distance"]||0),i.props.setShadowBlur(n.Shadow["@Blur"]||0)),i.scaleX=n["@ScaleX"]||i.scaleX,i.scaleY=n["@ScaleY"]||i.scaleY,i.scaleCommon=n["@ScaleCommon"]||i.scaleCommon;case 95:return i.updateColor(),v.a.parseOldIntegerLTRBSvgItem(i),e.abrupt("return",i);case 98:case"end":return e.stop()}},e,this,[[19,23,27,35],[28,,30,34],[38,42,46,54],[47,,49,53],[75,79,83,91],[84,,86,90]])})),function(e,n){return t.apply(this,arguments)})}],[{key:"createGenericItem",value:function(e,t,n,i,r,a,o){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]&&arguments[8],c=arguments.length>9&&void 0!==arguments[9]&&arguments[9],u=!(arguments.length>10&&void 0!==arguments[10])||arguments[10],h=!(arguments.length>11&&void 0!==arguments[11])||arguments[11],d=!(arguments.length>12&&void 0!==arguments[12])||arguments[12],p=!(arguments.length>13&&void 0!==arguments[13])||arguments[13];return new e(t,n,i,r,a,o,s,l,c,u,h,d,p)}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return m});var i=n(0),r=n.n(i),a=n(1),o=n.n(a),s=n(35),l=n.n(s),c=n(36),u=n.n(c),h=n(60),d=n(70),p=n(196),v=n(127),f=n(42),g=n(166),m=function(){function e(){l()(this,e)}var t;return u()(e,[{key:"createNewItem",value:function(t,n,i,r,a,o){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]&&arguments[8],u=!(arguments.length>9&&void 0!==arguments[9])||arguments[9],h=!(arguments.length>10&&void 0!==arguments[10])||arguments[10],d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11],p=!(arguments.length>12&&void 0!==arguments[12])||arguments[12];return e.createGenericItem(g.a,t,n,i,r,a,o,s,l,c,u,h,d,p)}},{key:"parse",value:(t=o()(r.a.mark(function e(t,n){var i,a,o,s,l,c,u,d,g,m,E,y,T;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=40;break}return a=t["@SvgKey"],e.next=4,h.c.getSvgDataByKey(a,f.a.instance.env.adminMode);case 4:if(o=e.sent,(i=this.createNewItem(Object(v.a)(),o,t.Position["@Left"],t.Position["@Top"],t.Position["@Right"],t.Position["@Bottom"],-t["@Rotate"],-1===t["@FlipH"],-1===t["@FlipV"],-1===n["@CanUserSelect"],-1===n["@CanUserMove"],-1===n["@CanUserResize"],-1===n["@CanUserDel"])).copyKey=t["@copyKey"]?t["@copyKey"]:"",i.groupId=t["@GroupId"]?t["@GroupId"]:"",i.layerName=t["@LayerName"]?t["@LayerName"]:"",i.priority=t["@Priority"]?t["@Priority"]:0,t["@Opacity"]?i.props.setOpacity(t["@Opacity"]):i.props.setOpacity(null!=t["@SvgOpacity"]?t["@SvgOpacity"]:255),i.isBackground=t["@IsBackground"]||!1,i.props.patternCountRatio=t["@PatternCountRatio"]||1,this.parseAllSvgLayer(t,i),!t.fillColorMap){e.next=37;break}for(s=t.fillColorMap.fillColor,l=[],Array.isArray(s)?l=s:void 0!==s&&(l=[s]),c=!0,u=!1,d=void 0,e.prev=21,g=l[Symbol.iterator]();!(c=(m=g.next()).done);c=!0)E=m.value,y=E["@originColor"],T=E["@color"],i.props.setCurrentOriginColor(y),i.props.setColor(T);e.next=29;break;case 25:e.prev=25,e.t0=e.catch(21),u=!0,d=e.t0;case 29:e.prev=29,e.prev=30,c||null==g.return||g.return();case 32:if(e.prev=32,!u){e.next=35;break}throw d;case 35:return e.finish(32);case 36:return e.finish(29);case 37:t.Shadow&&(i.props.setActiveShadow(t.Shadow["@IsShadow"]||!1),i.props.setShadowColor(t.Shadow["@Color"]||"#000000"),i.props.setShadowAngle(t.Shadow["@Angle"]||0),i.props.setShadowAlpha(null!=t.Shadow["@Alpha"]?t.Shadow["@Alpha"]:255),i.props.setShadowDistance(t.Shadow["@Distance"]||0),i.props.setShadowBlur(t.Shadow["@Blur"]||0)),e.next=40;break;case 40:return i.updateColor(),p.a.parseOldIntegerLTRBSvgItem(i),e.abrupt("return",i);case 43:case"end":return e.stop()}},e,this,[[21,25,29,37],[30,,32,36]])})),function(e,n){return t.apply(this,arguments)})},{key:"parseAllSvgLayer",value:function(e,t){var n=this;t.layers.forEach(function(t,i){var r;(r=Array.isArray(e.SvgLayer)?e.SvgLayer[i]:e.SvgLayer)&&n.parseSvgLayer(r,t)})}},{key:"getValidNumberValue",value:function(e,t){return!e||isNaN(e)?t:e}},{key:"parseSvgLayer",value:function(e,t){t.layerId=e["@layerId"],t.left=this.getValidNumberValue(e["@left"],t.left),t.top=this.getValidNumberValue(e["@top"],t.top),t.scaleX=this.getValidNumberValue(e["@scaleX"],t.scaleX),t.scaleY=this.getValidNumberValue(e["@scaleY"],t.scaleY),t.scaleCommon=this.getValidNumberValue(e["@scaleCommon"],t.scaleCommon),t.savedData.left=e["@layerLeft"],t.savedData.top=e["@layerTop"],t.savedData.width=e["@layerWidth"],t.savedData.height=e["@layerHeight"],t.savedData.moveOffsetX=e["@moveOffsetX"],t.savedData.moveOffsetY=e["@moveOffsetY"],t.savedData.extendOffsetX=e["@extendOffsetX"],t.savedData.extendOffsetY=e["@extendOffsetY"],t.savedData.type=e["@type"],this.calibrateSvgLayerPositionByType(t)}},{key:"parseColor",value:function(e,t,n){if(void 0!==t["@fillColor"]){var i=d.a.getOriginFillColors(n.element);n.setColorByOriginColor(i[0],t["@fillColor"])}else{var r=e.fillColorMap.fillColor,a=[];Array.isArray(r)?a=r:void 0!==r&&(a=[r]);var o=!0,s=!1,l=void 0;try{for(var c,u=a[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var h=c.value,p=h["@originColor"],v=h["@color"];n.setColorByOriginColor(p,v)}}catch(e){s=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(s)throw l}}}}},{key:"calibrateSvgLayerPositionByType",value:function(e){if(e.svgLayer.type.value!==e.savedData.type){var t=(e.scaleX-1)*e.svgLayer.left*e.svgLayer.extendOffsetX,n=(e.scaleY-1)*e.svgLayer.top*e.svgLayer.extendOffsetY,i=Math.pow(10,-3);if(e.svgLayer.type.value===h.e.NO_PATTERN.value){var r=e.svgLayer.width*(e.scaleX-1),a=e.svgLayer.height*(e.scaleY-1),o=e.savedData.type===h.e.LAYER_PATTERN.value,s=0===e.left||e.left-r<i,l=0===e.top||e.top-a<i,c=e.svgLayer.extendOffsetX>0,u=e.svgLayer.extendOffsetY>0;c&&(o||s)&&(e.left-=t/e.svgLayer.extendOffsetX),u&&(o||l)&&(e.top-=n/e.svgLayer.extendOffsetY)}else e.svgLayer.type.value===h.e.LAYER_PATTERN.value&&(t+e.left<i&&(e.left=0),n+e.top<i&&(e.top=0))}}}],[{key:"createGenericItem",value:function(e,t,n,i,r,a,o){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]&&arguments[8],c=arguments.length>9&&void 0!==arguments[9]&&arguments[9],u=!(arguments.length>10&&void 0!==arguments[10])||arguments[10],h=!(arguments.length>11&&void 0!==arguments[11])||arguments[11],d=!(arguments.length>12&&void 0!==arguments[12])||arguments[12],p=!(arguments.length>13&&void 0!==arguments[13])||arguments[13];return new e(t,n,i,r,a,o,s,l,c,u,h,d,p)}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n(35),r=n.n(i),a=n(36),o=n.n(a),s=n(3),l=function(){function e(){r()(this,e)}return o()(e,null,[{key:"getSaveCategoryIdx",value:function(){try{var e=s.RequestUtil.get(s.RequestParamKey.CATEGORY_IDX);return e?Number(e):0}catch(e){return 0}}}]),e}()},,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return h});var i=n(35),r=n.n(i),a=n(36),o=n.n(a),s=n(67),l=n(42),c=n(45),u=n(55),h=function(){function e(){r()(this,e)}return o()(e,null,[{key:"getSizeOption",value:function(){var e={width:1080,height:1080,unit:u.b.PX,dpi:96};return l.a.instance.option&&l.a.instance.option.size&&(e=l.a.instance.option.size),l.a.instance.option&&l.a.instance.option.size||l.a.dispatch(new c.c(function(t){l.a.instance.option.initSizeByMeta(t),e=l.a.instance.option.size})),e}},{key:"getPrintoutOption",value:function(){var e={productType:s.d.NO_SELECTION,optionType:s.c.NONE,margin:{safety:0}};return l.a.instance.option&&(e=l.a.instance.option.printoutOption),e}},{key:"isWebTemplate",value:function(){return e.getSizeOption().unit===u.b.PX}}]),e}()},,,,function(e,t,n){"use strict";n.d(t,"e",function(){return a}),n.d(t,"f",function(){return o}),n.d(t,"d",function(){return s}),n.d(t,"b",function(){return l}),n.d(t,"a",function(){return c}),n.d(t,"H",function(){return u}),n.d(t,"c",function(){return h}),n.d(t,"D",function(){return d}),n.d(t,"F",function(){return p}),n.d(t,"E",function(){return v}),n.d(t,"G",function(){return f}),n.d(t,"j",function(){return g}),n.d(t,"m",function(){return m}),n.d(t,"k",function(){return E}),n.d(t,"l",function(){return y}),n.d(t,"g",function(){return T}),n.d(t,"i",function(){return _}),n.d(t,"h",function(){return I}),n.d(t,"t",function(){return C}),n.d(t,"u",function(){return S}),n.d(t,"v",function(){return w}),n.d(t,"w",function(){return k}),n.d(t,"z",function(){return R}),n.d(t,"x",function(){return L}),n.d(t,"y",function(){return O}),n.d(t,"A",function(){return A}),n.d(t,"C",function(){return b}),n.d(t,"B",function(){return P}),n.d(t,"n",function(){return N}),n.d(t,"o",function(){return x}),n.d(t,"p",function(){return M}),n.d(t,"q",function(){return D}),n.d(t,"r",function(){return B}),n.d(t,"s",function(){return U});var i=n(12),r=n(45),a={name:"family",actionType:r.a.TEXT_FONT_FAMILY,icon:i.ToolsIcon.UPPER_CASE},o={name:"size",actionType:r.a.TEXT_FONT_SIZE},s={name:"color",actionType:r.a.TEXT_FONT_COLOR,icon:i.ToolsIcon.PENCIL,timeout:3e3},l={name:"backgroundColor",actionType:r.a.TEXT_BACKGROUND_COLOR,icon:i.ToolsIcon.FORMAT_COLOR_FILL,timeout:3e3},c={name:"textAlign",actionType:r.a.TEXT_ALIGN},u={name:"verticalAlign",actionType:r.a.TEXT_VERTICAL_ALIGN},h={name:"bold",actionType:r.a.TEXT_BOLD,icon:i.ToolsIcon.FORMAT_BOLD},d={name:"italic",actionType:r.a.TEXT_ITALIC,icon:i.ToolsIcon.FORMAT_ITALIC},p={name:"underline",actionType:r.a.TEXT_UNDERLINE,icon:i.ToolsIcon.FORMAT_UNDERLINE},v={name:"strikeout",actionType:r.a.TEXT_STROKE,icon:i.ToolsIcon.STROKE},f={name:"upperCase",actionType:r.a.TEXT_UPPERCASE,icon:i.ToolsIcon.UPPER_CASE},g=(r.a.TEXT_GROUP_LIST_STYLE_BULLET,i.ToolsIcon.FORMAT_LIST_BULLET,r.a.TEXT_GROUP_LIST_STYLE_NUMBER,i.ToolsIcon.FORMAT_LIST_NUMBER,{groupName:"fontDetail",name:"active",actionType:r.a.TEXT_GROUP_FONT_DETAIL_ACTIVE}),m={groupName:"fontDetail",name:"textSpace",actionType:r.a.TEXT_SPACE,timeout:3e3},E={groupName:"fontDetail",name:"lineSpace",actionType:r.a.TEXT_LINE_SPACE,timeout:3e3},y={groupName:"fontDetail",name:"scaleX",actionType:r.a.TEXT_SCALE_X,timeout:3e3},T={groupName:"curve",name:"active",actionType:r.a.TEXT_GROUP_CURVE_ACTIVE},_={groupName:"curve",name:"cw",actionType:r.a.TEXT_GROUP_CURVE_CW,icon:i.ToolsIcon.CURVE_TEXT_IN},I={groupName:"curve",name:"cw",actionType:r.a.TEXT_GROUP_CURVE_CW,icon:i.ToolsIcon.CURVE_TEXT_OUT},C={groupName:"outline",name:"active",actionType:r.a.TEXT_OUTLINE_ACTIVE},S={groupName:"outline",name:"color",actionType:r.a.TEXT_OUTLINE_COLOR,timeout:3e3},w={groupName:"outline",name:"size",actionType:r.a.TEXT_OUTLINE_SIZE,timeout:3e3},k={groupName:"shadow",name:"active",actionType:r.a.TEXT_SHADOW_ACTIVE},R={groupName:"shadow",name:"color",actionType:r.a.TEXT_SHADOW_COLOR,timeout:3e3},L={groupName:"shadow",name:"alpha",actionType:r.a.TEXT_SHADOW_ALPHA,timeout:3e3},O={groupName:"shadow",name:"angle",actionType:r.a.TEXT_SHADOW_ANGLE,timeout:3e3},A={groupName:"shadow",name:"distance",actionType:r.a.TEXT_SHADOW_DISTANCE,timeout:3e3},b={groupName:"shadow",name:"spread",actionType:r.a.TEXT_SHADOW_SPREAD,timeout:3e3},P={groupName:"shadow",name:"size",actionType:r.a.TEXT_SHADOW_SIZE,timeout:3e3},N={groupName:"gradient",name:"active",actionType:r.a.TEXT_GRADIENT_ACTIVE,timeout:3e3},x=(r.a.TEXT_GRADIENT_TYPE,{groupName:"gradient",name:"angle",actionType:r.a.TEXT_GRADIENT_ANGLE,timeout:3e3}),M={groupName:"gradient",name:"color1",actionType:r.a.TEXT_GRADIENT_COLOR1,timeout:3e3,icon:i.ToolsIcon.FORMAT_COLOR_FILL},D={groupName:"gradient",name:"color2",actionType:r.a.TEXT_GRADIENT_COLOR2,timeout:3e3,icon:i.ToolsIcon.FORMAT_COLOR_FILL},B={groupName:"gradient",name:"color3",actionType:r.a.TEXT_GRADIENT_COLOR3,timeout:3e3,icon:i.ToolsIcon.FORMAT_COLOR_FILL},U={groupName:"gradient",name:"color4",actionType:r.a.TEXT_GRADIENT_COLOR4,timeout:3e3,icon:i.ToolsIcon.FORMAT_COLOR_FILL}},,,function(e,t,n){"use strict";n.d(t,"a",function(){return _});var i=n(35),r=n.n(i),a=n(36),o=n.n(a),s=n(39),l=n.n(s),c=n(38),u=n.n(c),h=n(44),d=n.n(h),p=n(40),v=n.n(p),f=n(37),g=n.n(f),m=n(80),E=n(41),y=n(3),T=n(287),_=function(e){function t(e,n){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;r()(this,t),i=l()(this,u()(t).call(this,"div",[E.a.SVG_COLOR_PICKER_ITEM])),g()(d()(i),"listener",function(e){}),g()(d()(i),"isVisible",!1),g()(d()(i),"selectedIndex",-1),g()(d()(i),"canNotAppend",!1),i.colorListener=e,i.onStartChangeColor=o,i.onFinishChangeColor=s,i.colorControl=new T.a(e,a,!0,o,s),i.colorControl.callback=function(){return i.callbackCloseColorPickerPopup()};var c=document.createElement("label");c.innerText=y.CRM.get(n)||"",i.wrap.appendChild(c);var h=document.createElement("div");return h.className=E.a.VALUE_ELEMENT,i.wrap.appendChild(h),i.valueElement=h,i.addEventListener(),i}return v()(t,e),o()(t,[{key:"getColorPickerPopup",value:function(){return this.colorControl.getPopup()}},{key:"updateUI",value:function(e){var t=this;null!=e.active&&(this.active=!0===e.active);var n=function(e){if(e.shiftKey){var n=prompt("format : #rgb, rgb... ex)#ff7362, 4285f4");if(n){var i=6===n.length?"#"+n:n;t.setColor(i.toUpperCase())}}},i=document.createDocumentFragment(),r=-1,a=this;e.colorMap.forEach(function(o,s){r++;var l,c=document.createElement("button");c.className=E.a.COLOR_ELEMENT,c.setAttribute("data-color-link-idx",""+s),c.setAttribute("data-color",o),l=o?8===o.length?"00"===o.substr(6,2)?"":"#"+o.substr(0,6):9===o.length&&"#"===o.substr(0,1)?"00"===o.substr(7,2)?"":o.substr(0,7):o:o,c.style.background=l,t.colorControl.updateUI({value:c.style.background,hideTransparent:e.hideTransparent,hideChangeSameColors:e.hideChangeSameColors});var u=document.createElement("div");u.className=E.a.COLOR_BUTTON,a.selectedIndex>-1&&a.selectedIndex===r&&u.classList.add(E.a.ACTIVE),u.appendChild(c),u.addEventListener("dblclick",n),i.appendChild(u),c.style.backgroundColor?u.removeAttribute("data-transparent"):u.setAttribute("data-transparent","true")}),this.valueElement.innerHTML="",this.valueElement.appendChild(i),this.lastRenderParam=e}},{key:"callbackCloseColorPickerPopup",value:function(){this.selectedIndex=-1,this.valueElement&&this.valueElement.childNodes.forEach(function(e){return e.classList.remove(E.a.ACTIVE)})}},{key:"addEventListener",value:function(){var e=this;$(this.wrap).on("mouseup",".".concat(E.a.COLOR_BUTTON),function(t){var n=this;if(e.active){var i=e.colorControl.toHexString($(this.children[0]).data("colorLinkIdx")).substr(0,7).toLowerCase();e.colorControl.setOriginColor(i);var r=e.lastRenderParam.colorMap.get(i),a=$(this).offset().left+this.offsetWidth/2,o=$(this).offset().top+this.offsetHeight/2;e.colorControl.openColorControl({value:r,hideTransparent:e.lastRenderParam.hideTransparent,canNotAppend:e.canNotAppend},a,o),e.lastSelectOriginColor=i,e.valueElement.childNodes.forEach(function(t,i){t===n&&(e.selectedIndex=i)}),this.parentElement&&(this.parentElement.childNodes.forEach(function(e){e.classList.remove(E.a.ACTIVE)}),this.classList.add(E.a.ACTIVE))}return!1})}},{key:"setColor",value:function(e){this.colorListener(this.lastSelectOriginColor,e)}},{key:"setOriginColor",value:function(e){this.colorControl.setOriginColor(e)}}]),t}(m.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"e",function(){return a}),n.d(t,"c",function(){return o}),n.d(t,"b",function(){return s}),n.d(t,"f",function(){return l}),n.d(t,"d",function(){return c});var i=n(45),r=(i.a.SVG_LAYER_SELECT,i.a.SVG_LAYER_COLOR,{groupName:"shadow",name:"active",actionType:i.a.SVG_SHADOW_ACTIVE}),a={groupName:"shadow",name:"color",actionType:i.a.SVG_SHADOW_COLOR,timeout:3e3},o={groupName:"shadow",name:"angle",actionType:i.a.SVG_SHADOW_ANGLE,timeout:3e3},s={groupName:"shadow",name:"alpha",actionType:i.a.SVG_SHADOW_ALPHA,timeout:3e3},l={groupName:"shadow",name:"distance",actionType:i.a.SVG_SHADOW_DISTANCE,timeout:3e3},c={groupName:"shadow",name:"blur",actionType:i.a.SVG_SHADOW_BLUR,timeout:3e3}},function(e,t,n){"use strict";var i=n(35),r=n.n(i),a=n(36),o=n.n(a),s=n(225),l=n(37),c=n.n(l),u=function(){function e(){r()(this,e),c()(this,"ver",0),c()(this,"c1",0),c()(this,"c2",0),c()(this,"c3",0),c()(this,"cs",0),c()(this,"cc",0),c()(this,"name",""),c()(this,"qnty",0),c()(this,"oid",0),c()(this,"oname",0),c()(this,"optSizeW",0),c()(this,"optSizeH",0),c()(this,"bypassData","")}return o()(e,[{key:"toString",value:function(){var e="";return e+="ver=".concat(this.ver,";"),e+="c1=".concat(this.c1,";"),e+="c2=".concat(this.c2,";"),e+="c3=".concat(this.c3,";"),e+="cs=".concat(this.cs,";"),e+="cc=".concat(this.cc,";"),e+="name=".concat(this.name,";"),e+="qnty=".concat(this.qnty,";"),e+="oid=".concat(this.oid,";"),e+="oname=".concat(this.oname,";"),e+="opt_size_w=".concat(this.optSizeW,";"),e+="opt_size_h=".concat(this.optSizeH,";"),e+="bypass_data=".concat(this.bypassData)}},{key:"fromString",value:function(e){var t=new Map;e.split(";").forEach(function(e){var n=e.split("=");t.set(n[0],n[1])}),this.ver=t.get("ver"),this.c1=t.get("c1"),this.c2=t.get("c2"),this.c3=t.get("c3"),this.cs=t.get("cs"),this.cc=t.get("cc"),this.name=t.get("name"),this.qnty=t.get("qnty"),this.oid=t.get("oid"),this.oname=t.get("oname"),this.optSizeW=t.get("opt_size_w"),this.optSizeH=t.get("opt_size_h"),this.bypassData=t.get("bypass_data")}}]),e}(),h=function(){function e(){r()(this,e),c()(this,"isAvailable",!1),c()(this,"sewingLength",0),c()(this,"metalringLength",0),c()(this,"stickLength",0),c()(this,"stickSurround",!1)}return o()(e,[{key:"loadFromXml",value:function(e){this.isAvailable=e["@is_available"],this.sewingLength=e["@sewing_length"],this.metalringLength=e["@metalring_length"],this.stickLength=e["@stick_length"],this.stickSurround=e["@stick_surround"]}}]),e}(),d=function(){function e(){r()(this,e),c()(this,"finishType",new h),c()(this,"finishTypeNodeName","FINISH-TYPE"),c()(this,"name",""),c()(this,"width",0),c()(this,"height",0),c()(this,"mindpi",0),c()(this,"outputType",0),c()(this,"printSize",0),c()(this,"borderType",0),c()(this,"paperType",0),c()(this,"leftMargin",0),c()(this,"topMargin",0),c()(this,"rightMargin",0),c()(this,"bottomMargin",0),c()(this,"postProcType",0),c()(this,"centerMargin",0),c()(this,"marginType",0),c()(this,"isDynamicWidth",!1),c()(this,"isCustomSize",!1),c()(this,"customWidth",0),c()(this,"customHeight",0),c()(this,"extraData",""),c()(this,"filterData",""),c()(this,"minimumFontHeight",0)}return o()(e,[{key:"toString",value:function(){var e="";return e+="name=".concat(this.name,";"),e+="width=".concat(this.width,";"),e+="height=".concat(this.height,";"),e+="minDpi=".concat(this.mindpi,";"),e+="output_type=".concat(this.outputType,";"),e+="print_size=".concat(this.printSize,";"),e+="border_type=".concat(this.borderType,";"),e+="paper_type=".concat(this.paperType,";"),e+="left_margin=".concat(this.leftMargin,";"),e+="top_margin=".concat(this.topMargin,";"),e+="right_margin=".concat(this.rightMargin,";"),e+="bottom_margin=".concat(this.bottomMargin,";"),e+="postm_proc_type=".concat(this.postProcType,";"),e+="center_margin=".concat(this.centerMargin,";"),e+="margin_type=".concat(this.marginType,";"),e+="is_dynamic_width=".concat(this.isDynamicWidth,";"),e+="is_custom_size=".concat(this.isCustomSize,";"),e+="custom_width=".concat(this.customWidth,";"),e+="custom_height=".concat(this.customHeight,";"),e+="extra_data=".concat(this.extraData,";"),e+="filter_data=".concat(this.filterData,";"),e+="minimum_font_height=".concat(this.minimumFontHeight)}},{key:"fromString",value:function(e){var t=new Map;e.split(";").forEach(function(e){var n=e.split("=");t.set(n[0],n[1])}),this.name=t.get("name"),this.width=t.get("width"),this.height=t.get("height"),this.mindpi=t.get("minDpi"),this.outputType=t.get("output_type"),this.printSize=t.get("print_size"),this.borderType=t.get("border_type"),this.paperType=t.get("paper_type"),this.leftMargin=t.get("left_margin"),this.topMargin=t.get("top_margin"),this.rightMargin=t.get("right_margin"),this.bottomMargin=t.get("bottom_margin"),this.postProcType=t.get("post_proc_type"),this.centerMargin=t.get("center_margin"),this.marginType=t.get("margin_type"),this.isDynamicWidth=t.get("is_dynamic_width"),this.isCustomSize=t.get("is_custom_size"),this.customWidth=t.get("custom_width"),this.customHeight=t.get("custom_height"),this.extraData=t.get("extra_data"),this.filterData=t.get("filter_data")}},{key:"loadFromXml",value:function(e){this.name=e["@name"],this.width=e["@width"],this.height=e["@height"],this.mindpi=e["@minDpi"],this.outputType=e["@output_type"],this.printSize=e["@print_size"],this.borderType=e["@border_type"],this.paperType=e["@paper_type"],this.leftMargin=e["@left_margin"],this.topMargin=e["@top_margin"],this.rightMargin=e["@right_margin"],this.bottomMargin=e["@bottom_margin"],this.postProcType=e["@post_proc_type"],this.centerMargin=e["@center_margin"],this.marginType=e["@margin_type"],this.isDynamicWidth=e["@is_dynamic_width"],this.isCustomSize=e["@is_custom_size"],this.customWidth=e["@custom_width"],this.customHeight=e["@custom_height"],this.extraData=e["@extra_data"],this.filterData=e["@filter_data"],e[this.finishTypeNodeName]&&e[this.finishTypeNodeName][this.finishTypeNodeName]&&this.finishType.loadFromXml(e[this.finishTypeNodeName][this.finishTypeNodeName])}}]),e}(),p=function(){function e(){r()(this,e),c()(this,"tn",""),c()(this,"startY",0),c()(this,"startM",0),c()(this,"startD",0),c()(this,"dayCount",0),c()(this,"incValue",0)}return o()(e,[{key:"toString",value:function(){var e="";return e+="tn=".concat(this.tn,";"),e+="start_y=".concat(this.startY,";"),e+="start_m=".concat(this.startM,";"),e+="start_d=".concat(this.startD,";"),e+="daycount=".concat(this.dayCount,";"),e+="incvalue=".concat(this.incValue)}},{key:"fromString",value:function(e){var t=new Map;e.split(";").forEach(function(e){var n=e.split("=");t.set(n[0],n[1])}),this.tn=t.get("tn"),this.startY=t.get("start_y"),this.startM=t.get("start_m"),this.startD=t.get("start_d"),this.dayCount=t.get("daycount"),this.incValue=t.get("incvalue")}}]),e}();n.d(t,"a",function(){return v});var v=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"unknown",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new Map;r()(this,e),this.xml=t;var s=t[0]||{};this.version=n,this.programVersion=i,this.copyCommIdx=a,this.commodityAttrs=o,this.commodity=new u,s.COMMODITY&&this.commodity.fromString(s.COMMODITY),this.output=new d,void 0!==s.OUTPUT2?this.output.loadFromXml(s.OUTPUT2):s.OUTPUT&&this.output.fromString(s.OUTPUT),this.param=new p,s.PARAM&&this.param.fromString(s.PARAM)}return o()(e,null,[{key:"parseCopyXML",value:function(t){var n=s.a.build(t)["SMILECAT-TBPE-SHEETS"],i=new Map;return n.COMMODITY.split(";").forEach(function(e){var t=e.split("=");i.set(t[0],t[1])}),new e([n],n["@Version"],n["@ProgramVersion"],n["@CopyCommIdx"],i)}},{key:"parseNewXML",value:function(t){var n=t.map(function(e){return s.a.build(e).SMILECAT});return new e(n,n[0]["@Version"])}},{key:"parseUnicornXML",value:function(t){var n=t.map(function(e){return s.a.build(e)});return new e(n,n[0]["@Version"])}},{key:"blank",value:function(){return new e([],"1","1")}}]),e}()},function(e,t,n){"use strict";var i=n(39),r=n.n(i),a=n(38),o=n.n(a),s=n(40),l=n.n(s),c=n(0),u=n.n(c),h=n(1),d=n.n(h),p=n(35),v=n.n(p),f=n(36),g=n.n(f),m=n(50),E=n(51),y=n(127),T=function(){function e(){v()(this,e)}return g()(e,null,[{key:"getConvertedOrgTypeFromDeprecated",value:function(e){return e===m.b.BackgroundPhoto?m.b.Photo:e===m.b.BackgroundPixabay?m.b.Pixabay:e}}]),e}();n.d(t,"a",function(){return _}),n.d(t,"b",function(){return I});var _=function(){function e(){v()(this,e)}var t;return g()(e,[{key:"createNewItem",value:function(t,n,i,r,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=arguments.length>7?arguments[7]:void 0,c=arguments.length>8&&void 0!==arguments[8]&&arguments[8],u=arguments.length>9&&void 0!==arguments[9]&&arguments[9],h=!(arguments.length>10&&void 0!==arguments[10])||arguments[10],d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11],p=!(arguments.length>12&&void 0!==arguments[12])||arguments[12],v=!(arguments.length>13&&void 0!==arguments[13])||arguments[13];return e.createGenericItem(m.e,t,n,i,r,a,o,s,l,c,u,h,d,p,v)}},{key:"parse",value:(t=d()(u.a.mark(function e(t,n){var i,r,a,o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t?(r=t.FramePosition,i=this.createNewItem(Object(y.a)(),r["@Left"],r["@Top"],r["@Right"],r["@Bottom"],-t["@FrameRotate"],-t["@Rotate"],t["@BelongsTo"]||m.c.INDEPENDENT,-1===t["@FlipH"],-1===t["@FlipV"],-1===n["@CanUserSelect"],-1===n["@CanUserMove"],-1===n["@CanUserResize"],-1===n["@CanUserDel"]),a=t.Position,i.itemPosition.left=a["@Left"],i.itemPosition.top=a["@Top"],i.itemPosition.right=a["@Right"],i.itemPosition.bottom=a["@Bottom"],i.priority=t["@Priority"]?t["@Priority"]:0,i.copyKey=t["@copyKey"]?t["@copyKey"]:"",i.groupId=t["@GroupId"]?t["@GroupId"]:"",i.layerName=t["@LayerName"]?t["@LayerName"]:"",i.props.setPhotoKey(t["@PhotoKey"]||""),i.props.setOpacity(null!=t["@Opacity"]?t["@Opacity"]:255),i.props.setColorEffect(t["@ColorEffect"]),i.props.setBrightness(t["@Bright"]||0),i.props.setContrast(t["@Contrast"]||0),i.props.setBlur(t["@Blur"]||0),i.props.setVignette(t["@Vignette"]||0),i.props.setTint(t["@Hue"]||0),i.props.setColorTone(t["@ColorTone"]||0),i.props.setTemperature(t["@Temperature"]||0),i.props.setSaturation(t["@Saturation"]||0),i.props.setLightness(t["@Lightness"]||0),i.props.setFramePhotoType(t["@FpType"]),i.props.setSolidLineColor(t["@FpColor"],!0),i.props.setSolidLineThickness(t["@FpThickness"],!0),i.props.setBitmapMaskBitmapId(t["@FpBMid"],!0),t.StickerFrame&&i.props.setStickerFrameStickerId(t.StickerFrame["@StickerId"]),i.props.setGradationMaskDirection(t["@FpGRdirection"]),i.props.setGradationMaskDepth(t["@FpGRdepth"]),i.isGradationMasked=-1===t["@isGradationMask"],i.props.setActiveShadow(t["@IsShadow"]||!1),i.props.setShadowColor(t["@FpShadowColor"]||"#000000"),i.props.setShadowAngle(t["@FpShadowAngle"]||0),i.props.setShadowAlpha(null!=t["@FpShadowAlpha"]?t["@FpShadowAlpha"]:255),i.props.setShadowDistance(t["@FpShadowDistance"]||0),i.props.setShadowBlur(t["@FpShadowBlur"]||0),i.addedBy=t["@AddedBy"],i.orgType=T.getConvertedOrgTypeFromDeprecated(t["@OriginType"])||m.b.Photo,i.skinRatioId=t["@SkinRatioId"]||"",i.photoCrop.isCropped=t["@IsCropped"]||!1,i.backgroundState=t["@BackgroundState"]||m.a.NONE):(o=n.Position,(i=this.createNewItem(Object(y.a)(),o["@Left"],o["@Top"],o["@Right"],o["@Bottom"],-n["@FrameRotate"],-n["@Rotate"],n["@BelongsTo"]||m.c.INDEPENDENT,!1,!1,-1===n["@CanUserSelect"],-1===n["@CanUserMove"],-1===n["@CanUserResize"],-1===n["@CanUserDel"])).itemPosition.left=o["@Left"],i.itemPosition.top=o["@Top"],i.itemPosition.right=o["@Right"],i.itemPosition.bottom=o["@Bottom"],i.props.setPhotoKey(n["@PhotoKey"]||""),i.props.setOpacity(null!=n["@Opacity"]?n["@Opacity"]:255),i.props.setColorEffect(n["@ColorEffect"]),i.props.setBrightness(n["@Bright"]||0),i.props.setContrast(n["@Contrast"]||0),i.props.setTint(n["@Hue"]||0),i.props.setColorTone(n["@ColorTone"]||0),i.props.setTemperature(n["@Temperature"]||0),i.props.setBlur(n["@Blur"]||0),i.props.setVignette(n["@Vignette"]||0),i.props.setSaturation(n["@Saturation"]||0),i.props.setLightness(n["@Lightness"]||0),i.props.setFramePhotoType(n["@FpType"]),i.props.setSolidLineColor(n["@FpColor"],!0),i.props.setSolidLineThickness(n["@FpThickness"],!0),i.props.setBitmapMaskBitmapId(n["@FpBMid"],!0),n.StickerFrame&&i.props.setStickerFrameStickerId(n.StickerFrame["@StickerId"]),i.props.setGradationMaskDepth(n["@FpGRdepth"]),i.props.setGradationMaskDirection(n["@FpGRdirection"]),i.isGradationMasked=-1===n["@IsGradationMask"],i.props.setActiveShadow(n["@IsShadow"]||!1),i.props.setShadowColor(n["@FpShadowColor"]||"#000000"),i.props.setShadowAngle(n["@FpShadowAngle"]||0),i.props.setShadowAlpha(null!=n["@FpShadowAlpha"]?n["@FpShadowAlpha"]:255),i.props.setShadowDistance(n["@FpShadowDistance"]||0),i.props.setShadowBlur(n["@FpShadowBlur"]||0),i.addedBy=E.c.LAYOUT,i.orgType=T.getConvertedOrgTypeFromDeprecated(n["@OriginType"])||m.b.Photo,i.skinRatioId=n["@SkinRatioId"]||"",i.photoCrop.isCropped=n["@IsCropped"]||!1,i.backgroundState=n["@BackgroundState"]||m.a.NONE),e.abrupt("return",i);case 2:case"end":return e.stop()}},e,this)})),function(e,n){return t.apply(this,arguments)})}],[{key:"createGenericItem",value:function(e,t,n,i,r,a,o,s,l,c,u,h,d,p,v){return new e(t,n,i,r,a,o,s,l,c,u,h,d,p,v)}}]),e}(),I=function(e){function t(){return v()(this,t),r()(this,o()(t).apply(this,arguments))}return l()(t,e),g()(t,[{key:"createNewItem",value:function(e,t,n,i,r){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7?arguments[7]:void 0,l=arguments.length>8&&void 0!==arguments[8]&&arguments[8],c=arguments.length>9&&void 0!==arguments[9]&&arguments[9],u=!(arguments.length>10&&void 0!==arguments[10])||arguments[10],h=!(arguments.length>11&&void 0!==arguments[11])||arguments[11],d=!(arguments.length>12&&void 0!==arguments[12])||arguments[12],p=!(arguments.length>13&&void 0!==arguments[13])||arguments[13];return _.createGenericItem(m.d,e,t,n,i,r,a,o,s,l,c,u,h,d,p)}}]),t}(_)},function(e,t,n){"use strict";var i=n(39),r=n.n(i),a=n(38),o=n.n(a),s=n(46),l=n.n(s),c=n(40),u=n.n(c),h=n(0),d=n.n(h),p=n(1),v=n.n(p),f=n(35),g=n.n(f),m=n(36),E=n.n(m),y=n(51),T=n(69),_=n(43),I=n(42),C=n(216),S=n(132),w=n(37),k=n.n(w),R=n(41),L=(n(119),n(3)),O=(n(135),n(50),n(12)),A=function(){function e(){g()(this,e),k()(this,"rowVisible",!0)}return E()(e,[{key:"render",value:function(){var e=document.createElement("button");return e.addEventListener("mouseenter",function(){e.classList.add("hover")}),e.addEventListener("mouseleave",function(){e.classList.remove("hover")}),this.btnElem=e,this.onclick&&(e.onclick=this.onclick),e}},{key:"setOnClick",value:function(e){this.btnElem&&(this.btnElem.onclick=e),this.onclick=e}},{key:"getElement",value:function(){return this.btnElem}}]),e}(),b=n(167),P=n(110),N=n(100),x=n(109),M=n(217),D=n(114),B=n(175),U=n(48),G=n(130),F=n(205),H=n(60),V=n(52),W=n(332),z=n(88),X=n(85),Y=n(161);n.d(t,"b",function(){return K}),n.d(t,"a",function(){return q});var K=function(){function e(){var t=this;g()(this,e);var n=new T.g;n.addCustomClass(R.a.SVG_ADMIN_VIEW),this.registUserSvgBtnTool=new Z,this.registUserSvgBtnTool.setOnClick(v()(d.a.mark(function e(){var n,i,r,a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.registUserSvgBtnTool.getElement().classList.contains("disabled")){e.next=3;break}return e.abrupt("return");case 3:return t.disableRegistButtons(),e.prev=4,e.next=7,B.a.getSvgFile(t.currentItem.svgData.key);case 7:return n=e.sent,e.next=10,G.a.uploadSvg(n,"".concat(t.currentItem.svgData.key,".svg"));case 10:return i=e.sent,r=F.a.createInstance(U.a.FIGURE,V.a.UNICORN),e.next=14,H.c.getSvgDataByKey(r.getKey(i),I.a.instance.env.adminMode);case 14:a=e.sent,I.a.dispatch(new S.d(t.currentItem,a)),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(4),alert(e.t0);case 21:return e.prev=21,t.enableRegistButtons(),e.finish(21);case 24:case"end":return e.stop()}},e,null,[[4,18,21,24]])}))),n.add(this.registUserSvgBtnTool);var i=new T.g;i.addCustomClass(R.a.SVG_ADMIN_VIEW),this.registImageframeBtnTool=new j,this.registImageframeBtnTool.setOnClick(v()(d.a.mark(function e(){var n,i,r,a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.registImageframeBtnTool.getElement().classList.contains("disabled")){e.next=3;break}return e.abrupt("return");case 3:return t.disableRegistButtons(),e.prev=4,e.next=7,W.a.getImageframeFile(t.currentItem.svgData.key);case 7:return n=e.sent,e.next=10,G.a.uploadImageframe(n,"".concat(t.currentItem.svgData.key,".svg"));case 10:return i=e.sent,r=F.a.createInstance(U.a.FIGURE,V.a.UNICORN),e.next=14,z.c.getImageframeDataByKey(r.getKey(i));case 14:a=e.sent,I.a.dispatch(new S.c(t.currentItem,a)),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(4),alert(e.t0);case 21:return e.prev=21,t.enableRegistButtons(),e.finish(21);case 24:case"end":return e.stop()}},e,null,[[4,18,21,24]])}))),i.add(this.registImageframeBtnTool),this.registSvgWarnRow=new T.g,this.registSvgWran=new q,this.registSvgWarnRow.add(this.registSvgWran);var r=(new T.g).setBorderBottom();this.svgColorPickerTool=new C.a(function(e,n){return I.a.dispatch(new S.f(e,n,t.currentItem))},_.a.TOOLS_SVG_COLOR,!0,function(){return t.onStartChangeColor()},function(){return t.onFinishChangeColor()}),r.add(this.svgColorPickerTool),this.colorPickerRow=(new T.g).addCustomClass(R.a.COLOR_PICKER_ROW);var a=new T.c(_.a.TOOLS_TEXT_ROW_SHADOW,function(e){return t.shadowCheckedEvent(e)}).setFlex().setBorderBottom();this.shadowColor=new P.a(function(e){t.shadowCheckedEvent(!0,e)},O.ToolsIcon.PENCIL,_.a.TOOLS_SHADOW_COLOR,!1,!0).addClass(R.a.ACCORDION_ROW_COLOR),this.shadowAngle=new N.a(function(n){e.useSvgBasicEffectMapper([t.currentItem],M.c,n)},_.a.TOOLS_SHADOW_ANGLE,0,360,1,"°"),this.shadowAlpha=new N.a(function(n){e.useSvgBasicEffectMapper([t.currentItem],M.b,n)},_.a.TOOLS_SHADOW_ALPHA,0,100,1,"%"),this.shadowDistance=new N.a(function(n){e.useSvgBasicEffectMapper([t.currentItem],M.f,n)},_.a.TOOLS_SHADOW_DISTANCE,0,100,1),this.shadowBlur=new N.a(function(n){e.useSvgBasicEffectMapper([t.currentItem],M.d,n)},_.a.TOOLS_SHADOW_SPREAD,0,100,1),a.addCustomClass(R.a.EFFECT_TOOLS),a.setPrevCallback(function(){return t.effectMenu.click()}),a.appendElement(this.shadowColor.render()).add(this.shadowAngle,this.shadowAlpha,this.shadowDistance,this.shadowBlur),this.svgColorRow=r,this.accordionShadow=a,this.registUserSvgBtnToolRow=n,this.registImageframeBtnToolRow=i,this.makeSvgEffectRow()}return E()(e,[{key:"disableRegistButtons",value:function(){this.registUserSvgBtnTool.getElement().classList.add("disabled"),this.registImageframeBtnTool.getElement().classList.add("disabled")}},{key:"enableRegistButtons",value:function(){this.registUserSvgBtnTool.getElement().classList.remove("disabled"),this.registImageframeBtnTool.getElement().classList.remove("disabled")}},{key:"makeSvgEffectRow",value:function(){var e=this;this.svgEffecRow=(new T.g).addCustomClass(R.a.ACCORDION_EFFECT_ROW),this.shadowMenu=new Y.a(_.a.TOOLS_TEXT_ROW_SHADOW,function(){return e.showShadowMenu.click()},function(t){return e.shadowCheckedEvent(t)}),this.svgEffecRow.add(this.shadowMenu)}},{key:"shadowCheckedEvent",value:function(t,n){var i=this;I.a.groupingAction(function(){!0===t&&i.isDefaultColor(i.currentItem.props.getShadowColor(!0))&&i.isDefaultSize(i.currentItem.props.getShadowAngle(!0))&&i.isDefaultSize(i.currentItem.props.getShadowDistance(!0))&&i.isDefaultSize(i.currentItem.props.getShadowBlur(!0))&&(e.useSvgBasicEffectMapper([i.currentItem],M.c,315,!1),e.useSvgBasicEffectMapper([i.currentItem],M.b,50,!1),e.useSvgBasicEffectMapper([i.currentItem],M.f,12,!1),e.useSvgBasicEffectMapper([i.currentItem],M.d,8,!1)),e.useSvgBasicEffectMapper([i.currentItem],M.a,t),n&&e.useSvgBasicEffectMapper([i.currentItem],M.e,n)})}},{key:"makeMobileToolbox",value:function(){return this.toolTopContents=X.a.makeToolboxTopContentsWrapper(),this.toolTopContents.appendChild(this.svgColorPickerTool.wrap),X.a.setEventSvgColorTool(this.svgColorPickerTool,this.colorPickerRow),this.effectMenu=X.a.makeButtonShowToolsRow("효과",this.svgEffecRow),this.toolTopContents.appendChild(this.effectMenu),this.showShadowMenu=X.a.makeButtonShowToolsAccordionRow("그림자",this.accordionShadow),this.showShadowMenu.classList.add(R.a.HIDE),this.toolTopContents.appendChild(this.showShadowMenu),this.toolTopContents}},{key:"updateUI",value:function(e,t){t&&this.registSvgWran.updateUI(e);var n=new Map,i=!0,r=!1,a=void 0;try{for(var o,s=this.currentItem.getEditableOriginColors()[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var l=o.value;this.currentItem.props.setCurrentOriginColor(l),n.set(l,this.currentItem.props.getColor())}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}this.svgColorPickerTool.updateUI({colorMap:n}),this.accordionShadow.updateUI(e.props.isActiveShadow()),this.shadowColor.updateUI({value:e.props.getShadowColor(!0),active:!0}),this.shadowAngle.updateUI({value:e.props.getShadowAngle(!0),active:e.props.isActiveShadow()}),this.shadowAlpha.updateUI({value:e.props.getShadowAlpha(!0),active:e.props.isActiveShadow()}),this.shadowDistance.updateUI({value:e.props.getShadowDistance(!0),active:e.props.isActiveShadow()}),this.shadowBlur.updateUI({value:e.props.getShadowBlur(!0),active:e.props.isActiveShadow()}),this.shadowMenu.updateUI(e.props.isActiveShadow())}},{key:"onStartChangeColor",value:function(){this.currentItem.setStatus(y.d.LAZY)}},{key:"onFinishChangeColor",value:function(){this.currentItem&&this.currentItem.setStatus(y.d.CHANGE)}},{key:"isDefaultColor",value:function(e){return e===D.a.RGB}},{key:"isDefaultSize",value:function(e){return e===D.a.NUMBER}},{key:"makeToolboxRowContents",value:function(){return[{row:this.registUserSvgBtnToolRow,priority:301,viewType:0},{row:this.registImageframeBtnToolRow,priority:302,viewType:0},{row:this.registSvgWarnRow,priority:303,viewType:0},{row:this.svgColorRow,priority:600,viewType:0},{row:this.accordionShadow,priority:800,viewType:0},{row:this.svgEffecRow,priority:810,viewType:0},{row:this.colorPickerRow,priority:820,viewType:0}]}},{key:"updateToolboxRowContents",value:function(e,t){var n=t.renderedItem&&t.renderedItem instanceof b.a,i=I.a.getEnv().adminMode&&t.isAdminEditView;I.a.isMobileMode()?(this.toolTopContents.insertBefore(this.svgColorPickerTool.wrap,this.effectMenu),this.svgColorPickerTool.canNotAppend=!0):(this.svgColorRow.wrap.appendChild(this.svgColorPickerTool.wrap),this.svgColorPickerTool.canNotAppend=!1);var r=n&&t.renderedItem.getEditableOriginColors().length>0&&!i;this.svgColorRow.rowVisible=r,this.accordionShadow.rowVisible=n&&!t.isAdminEditView,this.registUserSvgBtnToolRow.rowVisible=n&&i,this.registImageframeBtnToolRow.rowVisible=n&&i&&t.renderedItem.getOriginColors().length>0,this.registSvgWarnRow.rowVisible=n&&i,this.svgEffecRow.rowVisible=n&&!i&&I.a.isMobileMode(),this.colorPickerRow.rowVisible=n&&!i&&I.a.isMobileMode();var a=n&&!t.isAdminEditView&&!t.renderedItem.isLock();return X.a.setContentsVisible(this.toolTopContents,a),X.a.setContentsVisible(this.colorMenu,r),n?(this.currentItem=t.renderedItem,this.updateUI(this.currentItem,t.isAdminEditView)):this.currentItem=null,!0}}],[{key:"useSvgBasicEffectMapper",value:function(e,t,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];I.a.dispatch(new x.b(e,e,t.actionType,t.groupName,t.name,n,i,t.timeout))}}]),e}(),Z=function(e){function t(){return g()(this,t),r()(this,o()(t).apply(this,arguments))}return u()(t,e),E()(t,[{key:"render",value:function(){l()(o()(t.prototype),"render",this).call(this);var e=this.getElement();return e.className=R.a.SVG_ADMIN_VIEW_BUTTON,e.innerText=L.CRM.get(_.a.TOOLS_REGIST_USER_SVG),e}}]),t}(A),j=function(e){function t(){return g()(this,t),r()(this,o()(t).apply(this,arguments))}return u()(t,e),E()(t,[{key:"render",value:function(){l()(o()(t.prototype),"render",this).call(this);var e=this.getElement();return e.className=R.a.SVG_ADMIN_VIEW_BUTTON,e.innerText=L.CRM.get(_.a.TOOLS_REGIST_USER_IMAGE_FRAME),e}}]),t}(A),q=function(e){function t(){g()(this,t);var e=document.createElement("div");return e.className=R.a.REGIST_SVG_WARN,r()(this,o()(t).call(this,e))}var n;return u()(t,e),E()(t,[{key:"updateUI",value:(n=v()(d.a.mark(function e(t){var n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.a.getSvgSize(t);case 2:(n=e.sent)>10?(this.element.innerText="SVG 용량이 너무 큽니다. (".concat(n,"KB)\n권장크기 : 10KB 이하"),this.element.style.display="block"):this.element.style.display="none";case 4:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})}]),t}(T.a)},,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return I});var i=n(0),r=n.n(i),a=n(1),o=n.n(a),s=n(35),l=n.n(s),c=n(36),u=n.n(c),h=n(39),d=n.n(h),p=n(38),v=n.n(p),f=n(40),g=n.n(f),m=n(52),E=n(3),y=n(43),T=n(47),_=n(171),I=function(e){function t(){return l()(this,t),d()(this,v()(t).apply(this,arguments))}var n,i;return g()(t,e),u()(t,[{key:"getCommodityInstancePath",value:function(e){var t=E.CRM.get(y.a.SC_INSTANCE_PATH).replace("${commodityIdx}",e);return this.getURL(t)}},{key:"getSkinPath",value:function(e,t,n){var i=E.CRM.get(y.a.SC_SKIN_PATH).replace("${skinId}",e).replace("${ratioId}",t);return this.getURL(i)}},{key:"getSkinListPath",value:function(e){var t=E.CRM.get(y.a.SC_SKIN_LIST_PATH).replace("${ratioId}",e);return this.getURL(t)}},{key:"getTemplateMetaPath",value:function(e){var t=E.CRM.get(y.a.SC_TEMPLATE_META_PATH).replace("${designName}",e);return this.getURL(t)}},{key:"getThemeMetaPath",value:function(e){var t=E.CRM.get(y.a.SC_THEME_META_PATH).replace("${designName}",e);return this.getURL(t)}},{key:"getLayoutListPath",value:function(e,t){var n=E.CRM.get(y.a.SC_THEME_META_PATH).replace("${ratioId}",e).replace("${layoutType}",t);return this.getURL(n)}},{key:"getLayoutPath",value:function(e){var t=E.CRM.get(y.a.SC_LAYOUT_PATH).replace("${layoutId}",e);return this.getURL(t)}},{key:"getLayoutThumbnailPath",value:function(e){var t=E.CRM.get(y.a.SC_LAYOUT_PATH).replace("${layoutId}",e);return this.getURL(t)}}],[{key:"getExternalStickerList",value:(i=o()(r.a.mark(function e(t){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(E.CRM.get(y.a.STICKER_EXTERNAL_LIST_URL),"?").concat($.param(t,!0)),e.next=4,T.ApiRequest.get(_.d,n);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)})},{key:"requestExternalStickerDownload",value:(n=o()(r.a.mark(function e(t){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=E.CRM.get(y.a.STICKER_EXTERNAL_DOWNLOAD_REQ_URL),e.next=3,T.UnicornApiRequest.post(n,{data:t,traditional:!0});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)})}]),t}(m.b)},,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n(35),r=n.n(i),a=n(36),o=n.n(a),s=n(67),l=function(){function e(){r()(this,e)}return o()(e,null,[{key:"parseData",value:function(t){var n=e.finder=new Map;t.forEach(function(e){return n.set(e.type,e.level)})}},{key:"getByRestrictionType",value:function(t){return e.finder.has(t)?e.finder.get(t):s.e.NONE}},{key:"getFinder",value:function(){return e.finder}}]),e}()},,,,function(e,t,n){"use strict";var i=n(0),r=n.n(i),a=n(1),o=n.n(a),s=n(35),l=n.n(s),c=n(36),u=n.n(c),h=n(37),d=n.n(h),p=function(){function e(){l()(this,e)}var t,n,i;return u()(e,null,[{key:"getProductOptionMeta",value:(i=o()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[{productType:"no_selection",optionType:"none",margin:{safety:.3},unit:"cm"},{productType:"placard",optionType:"none",margin:{safety:1},unit:"cm"},{productType:"placard",optionType:"bar",margin:{safety:1},unit:"cm"},{productType:"placard",optionType:"metal_ring",margin:{safety:1},unit:"cm"},{productType:"placard",optionType:"rod_sewing",margin:{safety:1},unit:"cm"},{productType:"banner",optionType:"none",margin:{safety:1},unit:"cm"},{productType:"banner",optionType:"metal_ring",margin:{safety:1},unit:"cm"},{productType:"real_print",optionType:"none",margin:{safety:1},unit:"cm"},{productType:"name_card",optionType:"none",margin:{safety:.4},unit:"cm"},{productType:"name_card",optionType:"edge_rounding",margin:{safety:.4},unit:"cm"},{productType:"poster",optionType:"none",margin:{safety:.3},unit:"cm"},{productType:"flyer",optionType:"none",margin:{safety:.3},unit:"cm"}]);case 1:case"end":return e.stop()}},e)})),function(){return i.apply(this,arguments)})},{key:"getAvoidMeta",value:(n=o()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[{optionType:"bar",isHorizontal:!0,rollAreaSizeLorT:3,rollAreaSizeRorB:3,sewingDistanceLorT:8,sewingDistanceRorB:8},{optionType:"metal_ring",isHorizontal:!0,ringRadius:2.5,ringDistance:2.5,ringAddL:0,ringAddT:0,ringAddR:0,ringAddB:0},{optionType:"rod_sewing",isHorizontal:!0,rollAreaSizeLorT:1,rollAreaSizeRorB:1,sewingDistanceLorT:14,sewingDistanceRorB:14},{optionType:"surround_sewing",rollAreaSizeAll:3},{optionType:"edge_rounding",roundingRadius:.5,roundingApplyLT:!0,roundingApplyLB:!0,roundingApplyRT:!0,roundingApplyRB:!0}]);case 1:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)})},{key:"getRestrictionDetailMeta",value:(t=o()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[{type:"overflow_safety_zone",level:"warning"},{type:"low_res_image",level:"caution"},{type:"min_font_size",level:"caution",minSize:17},{type:"min_element_size",level:"caution",minSize:.35},{type:"overlap_post_manu",level:"caution"},{type:"uninput_text",level:"recommend"}]);case 1:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)})}]),e}(),v=n(67),f=n(42),g=n(55),m=n(79),E=function(){function e(){l()(this,e)}return u()(e,null,[{key:"getDPIBySize",value:function(e,t,n){var i=Math.max(e,t),r=m.a.changeUnit(i,n,g.b.CM,96);return r<100?300:r<300?150:r<500?100:m.a.getDpi(r,2e4,n)}},{key:"getChangedDigitByUnit",value:function(e,t){switch(t){case g.b.CM:return Number(e.toFixed(1));case g.b.IN:return Number(e.toFixed(2));default:return Math.round(e)}}}]),e}(),y=n(358),T=n(236),_=function(){function e(){l()(this,e)}return u()(e,null,[{key:"parseData",value:function(t){e.metaSets=t,T.a.parseData(e.metaSets)}},{key:"getMinFontSize",value:function(){return e.metaSets.find(function(e){return e.type===v.f.MIN_FONT_SIZE}).minSize}},{key:"getMinElementSize",value:function(){return e.metaSets.find(function(e){return e.type===v.f.MIN_ELEMENT_SIZE}).minSize}}]),e}();d()(_,"metaSets",[]);var I=function(){function e(){l()(this,e)}return u()(e,null,[{key:"parseData",value:function(t){e.metaSets=t}},{key:"getCopiedMarginByProductOption",value:function(t,n){var i=e.metaSets.find(function(e){return e.productType===t&&e.optionType===n});return i?Object.assign({},i.margin):{safety:0}}},{key:"getDefaultMargin",value:function(){return{safety:0}}}]),e}();d()(I,"metaSets",[]);var C=n(209),S=function(){function e(){l()(this,e)}return u()(e,null,[{key:"getCheckedUnit",value:function(e){var t=e?e.toUpperCase():"";switch(t){case g.b.IN:case g.b.CM:case g.b.MM:return t;default:return g.b.PX}}},{key:"getCheckedProductType",value:function(e){var t=e?e.toLowerCase():"";switch(t){case v.d.PLACARD:case v.d.BANNER:case v.d.REAL_PRINT:case v.d.NAME_CARD:case v.d.POSTER:case v.d.FLYER:return t;default:return v.d.NO_SELECTION}}},{key:"getCheckedOptionType",value:function(e){var t=e?e.toLowerCase():"";switch(t){case v.c.BAR:case v.c.METAL_RING:case v.c.ROD_SEWING:case v.c.SURROUND_SEWING:case v.c.EDGE_ROUNDING:return t;default:return v.c.NONE}}},{key:"isValidMargin",value:function(e){return!!e&&e.safety>=0}}]),e}(),w=n(39),k=n.n(w),R=n(38),L=n.n(R),O=n(44),A=n.n(O),b=n(40),P=n.n(b),N=n(45),x=function(e){function t(e){var n;return l()(this,t),n=k()(this,L()(t).call(this)),d()(A()(n),"actionType",N.a.ONE_TIME),d()(A()(n),"changeDesign",function(){return!1}),d()(A()(n),"commitAction",function(e,t,i){i.canvasRenderer.printout&&i.canvasRenderer.printout.setMetaReference({restrictionLevelFinder:n.reference.restrictionLevelFinder})}),d()(A()(n),"rollbackAction",function(){}),d()(A()(n),"recycle",function(){}),n.reference=e,n.doSaveQueue=!1,n.renderAuto=!1,n}return P()(t,e),t}(N.b);n.d(t,"a",function(){return M});var M=function(){function e(){l()(this,e)}var t;return u()(e,null,[{key:"init",value:(t=o()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=I,e.next=3,p.getProductOptionMeta();case 3:return e.t1=e.sent,e.t0.parseData.call(e.t0,e.t1),e.t2=y.a,e.next=8,p.getAvoidMeta();case 8:return e.t3=e.sent,e.t2.parseData.call(e.t2,e.t3),e.t4=_,e.next=13,p.getRestrictionDetailMeta();case 13:e.t5=e.sent,e.t4.parseData.call(e.t4,e.t5),f.a.dispatch(new x({restrictionLevelFinder:T.a.getFinder()}));case 16:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)})},{key:"getPrintoutOptionByMeta",value:function(t){var n,i=S.getCheckedProductType(t.productId),r=S.getCheckedOptionType(t.optionId),a=t.unit?S.getCheckedUnit(t.unit):e.DEFAULT_UNIT;return i===v.d.NO_SELECTION&&a===g.b.PX?(n=e.getWebTypeMargin(),r=v.c.NONE):n=e.getPrintTypeMargin({productType:i,optionType:r,margin:t.margin},a),{productType:i,optionType:r,margin:n}}},{key:"getOutputInfo",value:function(){var e=C.a.getSizeOption(),t=e.unit,n=Math.round(e.dpi);return{workSize:{width:e.width,height:e.height},unit:t,dpi:n}}},{key:"getConvertedInitMarginByCmToUnit",value:function(t,n){var i=I.getCopiedMarginByProductOption(t.productType,t.optionType);return i.safety=m.a.changeUnit(i.safety,e.DEFAULT_UNIT,n),i}},{key:"getWebTypeMargin",value:function(){return I.getDefaultMargin()}},{key:"getPrintTypeMargin",value:function(t,n){return S.isValidMargin(t.margin)?t.margin:e.getConvertedInitMarginByCmToUnit({productType:t.productType,optionType:t.optionType},n)}},{key:"getPrintDPI",value:function(){var e=C.a.getSizeOption();return E.getDPIBySize(e.width,e.height,e.unit)}},{key:"getPrintWorkSize",value:function(){var t=e.getOutputInfo(),n=C.a.getSizeOption();return{width:E.getChangedDigitByUnit(t.workSize.width,n.unit),height:E.getChangedDigitByUnit(t.workSize.height,n.unit)}}}]),e}();d()(M,"DEFAULT_UNIT",g.b.CM)},function(e,t,n){"use strict";var i=n(35),r=n.n(i),a=n(36),o=n.n(a),s=n(37),l=n.n(s),c=n(69),u=n(380),h=n(185),d=n(110),p=n(100),v=n(43),f=n(41),g=n(62),m=n(42),E=n(104),y=n(213),T=n(109),_=n(288),I=n(287),C=n(3),S=n(480),w=n(93),k=function(){function e(t,n){r()(this,e),l()(this,"rowVisible",!0),l()(this,"active",!0),this.gradationPresetPopup=new S.a("GradationPresetPopup",w.a.instance.gradationPresetList,n),this.wrap=document.createElement("div"),this.wrap.className="".concat(f.a.TOOLS_ITEM," ").concat(f.a.GRADATION_COLOR_PICKER_ITEM);var i=document.createElement("label");i.innerText=C.CRM.get(t),this.wrap.appendChild(i);var a=document.createElement("div");a.className=f.a.GRADATION_VALUE_LINE,this.wrap.appendChild(a),this.colorLine=document.createElement("div"),this.colorLine.className=f.a.GRADATION_COLOR_LINE,this.wrap.appendChild(this.colorLine);for(var o=arguments.length,s=new Array(o>2?o-2:0),c=2;c<o;c++)s[c-2]=arguments[c];this.gradationItemList=s.map(function(e){var t=document.createElement("div");t.classList.add(f.a.GRADATION_COLOR_VALUE),t.classList.add(f.a.VALUE_ELEMENT),a.appendChild(t);var n=document.createElement("span");return n.className=f.a.COLOR_ELEMENT,t.appendChild(n),{listener:e,element:t}});var u=document.createElement("div");u.classList.add(f.a.GRADATION_COLOR_VIEW_BOX),u.classList.add(f.a.VALUE_ELEMENT),this.colorViewBoxOuter=u,this.colorViewBox=document.createElement("div"),this.colorViewBox.className=f.a.COLOR_ELEMENT,u.appendChild(this.colorViewBox),this.colorControl=new I.a(null,!0,!1),this.gradationItemList.forEach(function(e){e.element.addEventListener("dblclick",function(t){if(t.shiftKey){var n=prompt("format : #rgb, rgb... ex)#ff7362, 4285f4");if(n){var i=6===n.length?"#"+n:n;e.listener(i.toUpperCase())}}})}),this.addEventListener()}return o()(e,[{key:"render",value:function(){return this.wrap}},{key:"updateUI",value:function(e){var t=this;null!=e.active&&(this.active=!0===e.active);var n=["".concat(90-e.rotate,"deg")];e.valueList.forEach(function(e,i){var r=t.gradationItemList[i].element.children[0];255===e.alpha?(n.push(e.rgb),r.style.backgroundColor=e.rgb):r.style.backgroundColor="transparent",t.colorControl.updateUI({value:r.style.backgroundColor})}),this.active?this.wrap.classList.remove(f.a.DISABLE):this.wrap.classList.add(f.a.DISABLE);var i="",r="";switch(n.length){case 0:case 1:i="transparent";break;case 2:n.push(n[1]);default:e.isNewFormat&&5===n.length&&n[1]===n[2]&&n[4]===n[3]&&n.splice(2,2),i="linear-gradient(".concat(n.join(","),")"),n[0]="90deg",r="linear-gradient(".concat(n.join(","),")")}this.colorLine.style.background=r,this.colorViewBox.style.background=i,this.colorViewBox.style.backgroundOrigin="border-box",e.isNewFormat?(this.gradationItemList[1].element.style.display="none",this.gradationItemList[3].element.style.display="none"):(this.gradationItemList[1].element.style.display="",this.gradationItemList[3].element.style.display="")}},{key:"addEventListener",value:function(){var e=this;this.gradationItemList.forEach(function(t){t.element.addEventListener("mouseup",function(n){if(2!==n.button&&e.active){e.colorControl.listener=t.listener;var i=t.element.getElementsByTagName("span")[0].style.backgroundColor,r=$(t.element).offset().left+t.element.offsetWidth/2,a=$(t.element).offset().top+t.element.offsetHeight/2;return e.colorControl.openColorControl({value:i},r,a),n.preventDefault(),n.stopPropagation(),!1}})}),this.colorViewBoxOuter.addEventListener("click",function(t){e.gradationPresetPopup.open({left:t.pageX,top:t.pageY})})}}]),e}(),R=n(300),L=n(72),O=n(143),A=n(112),b=n(161),P=n(12),N=n(368),x=n(71),M=n(85),D=n(369);n.d(t,"a",function(){return B});var B=function(){function e(){r()(this,e),this.makeRow123(),this.makeAccordionRow1(),this.makeColorRow(),this.makeAccordionOutlineRow(),this.makeAccordionShadowRow(),this.makeAccordionGradient(),this.makeAccordionCurveRow(),this.makeTextSizeRow(),this.makeTextEffectRow()}return o()(e,[{key:"makeRow123",value:function(){var t=this;this.fontFamily=new u.a(function(n,i){t.currentItems.some(function(e){return e.props.getFamily()!==n})&&e.useTextItemsCharPropMapper(y.e,n,t.currentItems,!0,!1,i)},u.b.FAMILY,w.a.instance.fontFamilyList,!1,"","100%",{class:"font_family",height:49},!0,v.a.TOOLS_TOOLTIP_FONTFAMILY_RECOMMEND_LIST_TITLE,!0).setEditable(function(e){var n=!0,i=!1,r=void 0;try{for(var a,o=w.a.instance.fontFamilyList[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){if(a.value.value===e)return e}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return t.fontFamily.selectedValue},!1,!1);this.fontSize=new u.a(function(n){e.useTextItemsCharPropMapper(y.f,n,t.currentItems)},u.b.FONTSIZE,[{value:"7"},{value:"8"},{value:"9"},{value:"10"},{value:"11"},{value:"12"},{value:"14"},{value:"18"},{value:"24"},{value:"30"},{value:"36"},{value:"48"},{value:"60"},{value:"72"},{value:"96"},{value:"104"},{value:"120"},{value:"144"}],!0,"","102px").setEditable(function(n){var i=parseFloat(n);return isNaN(i)?t.fontSize.selectedValue:(i=Math.round(10*i)/10,i=Math.min(i,e.MAX_FONT_SIZE),i=Math.max(i,e.MIN_FONT_SIZE),String(i))},!0,!0).setComparator(function(e,t){return Number(e.value)-Number(t.value)}),L.a.createTooltip(this.fontSize.wrap,L.b.T,{title:{name:v.a.TOOLS_TOOLTIP_FONTSIZE_TITLE}}),this.textBold=new h.a(function(n){e.useTextItemsCharPropMapper(y.c,n,t.currentItems)},{icon:y.c.icon}),L.a.createTooltip(this.textBold.wrap,L.b.T,{title:{name:v.a.TOOLS_TOOLTIP_BOLD_TITLE,shortcut:v.a.TOOLS_TOOLTIP_BOLD_SHORTCUT}}),this.italic=new h.a(function(n){e.useTextItemsCharPropMapper(y.D,n,t.currentItems)},{icon:y.D.icon}),L.a.createTooltip(this.italic.wrap,L.b.T,{title:{name:v.a.TOOLS_TOOLTIP_ITALIC_TITLE,shortcut:v.a.TOOLS_TOOLTIP_ITALIC_SHORTCUT}}),this.textUpperCase=new h.a(function(n){e.useTextItemsPropMapper(y.G,n,t.currentItems)},{icon:y.G.icon}),L.a.createTooltip(this.textUpperCase.wrap,L.b.TL,{title:{name:v.a.TOOLS_TOOLTIP_UPPERCASE_TITLE,shortcut:v.a.TOOLS_TOOLTIP_UPPERCASE_SHORTCUT}}),this.textUnderline=new h.a(function(n){e.useTextItemsCharPropMapper(y.F,n,t.currentItems)},{icon:y.F.icon}),L.a.createTooltip(this.textUnderline.wrap,L.b.T,{title:{name:v.a.TOOLS_TOOLTIP_UNDERLINE_TITLE,shortcut:v.a.TOOLS_TOOLTIP_UNDERLINE_SHORTCUT}}),this.textStroke=new h.a(function(n){e.useTextItemsCharPropMapper(y.E,n,t.currentItems)},{icon:y.E.icon}),L.a.createTooltip(this.textStroke.wrap,L.b.TL,{title:{name:v.a.TOOLS_TOOLTIP_STROKE_TITLE,shortcut:v.a.TOOLS_TOOLTIP_STROKE_SHORTCUT}}),this.textAlign=new _.a(function(n){e.useTextItemsPropMapper(y.a,n,t.currentItems)},[{value:E.c.LEFT.toString(),icon:P.ToolsIcon.FORMAT_ALIGN_LEFT},{value:E.c.CENTER.toString(),icon:P.ToolsIcon.FORMAT_ALIGN_CENTER},{value:E.c.RIGHT.toString(),icon:P.ToolsIcon.FORMAT_ALIGN_RIGHT}]),L.a.createTooltip(this.textAlign.wrap.children[0],L.b.TR,{title:{name:v.a.TOOLS_TOOLTIP_ALIGNLEFT_TITLE}}),L.a.createTooltip(this.textAlign.wrap.children[1],L.b.TR,{title:{name:v.a.TOOLS_TOOLTIP_ALIGNCENTER_TITLE}}),L.a.createTooltip(this.textAlign.wrap.children[2],L.b.T,{title:{name:v.a.TOOLS_TOOLTIP_ALIGNRIGHT_TITLE}}),this.textVerticalAlign=new _.a(function(n){e.useTextItemsPropMapper(y.H,n,t.currentItems)},[{value:E.f.TOP.toString(),icon:P.ToolsIcon.VERTICAL_ALIGN_TOP},{value:E.f.CENTER.toString(),icon:P.ToolsIcon.VERTICAL_ALIGN_CENTER},{value:E.f.BOTTOM.toString(),icon:P.ToolsIcon.VERTICAL_ALIGN_BOTTOM}]),L.a.createTooltip(this.textVerticalAlign.wrap.children[0],L.b.TL,{title:{name:v.a.TOOLS_TOOLTIP_ALIGNTOP_TITLE}}),L.a.createTooltip(this.textVerticalAlign.wrap.children[1],L.b.TL,{title:{name:v.a.TOOLS_TOOLTIP_ALIGNMIDDLE_TITLE}}),L.a.createTooltip(this.textVerticalAlign.wrap.children[2],L.b.TL,{title:{name:v.a.TOOLS_TOOLTIP_ALIGNBOTTOM_TITLE}});var n=(new c.g).setFlex().addCustomClass(f.a.ROW_FONT_SIZE).setMarginTop(),i=(new c.g).addCustomClass(f.a.ROW_FONT_DETAIL),r=(new c.g).addCustomClass(f.a.ROW_TEXT_ALIGN).setBorderBottom(),a=new c.f(100),o=new c.f,s=(new c.f).addCustomClass(f.a.COL_TEXT_COLOR),l=new c.f,d=new c.f;a.add(this.fontFamily),o.add(this.fontSize),s.add(this.textBold,this.italic,this.textUnderline,this.textStroke,this.textUpperCase),l.add(this.textAlign),d.add(this.textVerticalAlign),n.add(a),i.add(o,s),r.add(l,d),this.fontFamilyRow=n,this.fontEtcRow=i,this.textAlignRow=r}},{key:"makeTextEffectRow",value:function(){var e=this;this.textEffecRow=(new c.g).addCustomClass(f.a.ACCORDION_EFFECT_ROW),this.outlineMenu=new b.a(v.a.TOOLS_TEXT_ROW_OUTLINE,function(){return e.showOutlineMenu.click()},function(t){return e.outlineCheckedEvent(t)}),this.shadowMenu=new b.a(v.a.TOOLS_TEXT_ROW_SHADOW,function(){return e.showShadowMenu.click()},function(t){return e.shadowCheckedEvent(t)}),this.gradationMenu=new b.a(v.a.TOOLS_TEXT_ROW_GRADIENT,function(){return e.showGradationMenu.click()},function(t){return e.gradientCheckedEvent(t)}),this.curveMenu=new b.a(v.a.TOOLS_TEXT_ROW_CURVE,function(){return e.showCurveMenu.click()},function(t){return e.curveCheckedEvent(t)}),this.textEffecRow.add(this.outlineMenu,this.shadowMenu,this.gradationMenu,this.curveMenu)}},{key:"makeTextSizeRow",value:function(){var t=this,n=this.fontSizeRow=new c.g;this.fontSizeRange=new p.a(function(n){e.useTextItemsCharPropMapper(y.f,n,t.currentItems)},v.a.TOOLS_TEXT_FONT_SIZE,1,999,1),n.add(this.fontSizeRange)}},{key:"makeMobileToolbox",value:function(){this.toolTopContents=M.a.makeToolboxTopContentsWrapper();var e=M.a.makeFontShowToolsRow(this.fontFamilyRow);this.selectedFont=document.createElement("div"),e.appendChild(this.selectedFont),this.toolTopContents.appendChild(e);var t=M.a.makeFontSizeToolsRow(this.fontSizeRow);return this.selectedFontSize=document.createElement("div"),t.appendChild(this.selectedFontSize),this.toolTopContents.appendChild(t),this.toolTopContents.appendChild(this.fontColor.wrap),M.a.setEventColorTool(this.fontColor,this.colorPickerRow),this.afterColorMenu=M.a.makeButtonShowToolsRow("글자 정렬",this.textAlignRow),this.toolTopContents.appendChild(this.afterColorMenu),this.toolTopContents.appendChild(M.a.makeButtonShowToolsRow("스타일",this.fontEtcRow)),this.toolTopContents.appendChild(M.a.makeButtonShowToolsAccordionRow("글자 조정",this.accordionFontDefault)),this.effectMenu=M.a.makeButtonShowToolsRow("효과",this.textEffecRow),this.toolTopContents.appendChild(this.effectMenu),this.showOutlineMenu=M.a.makeButtonShowToolsAccordionRow("외곽선",this.accordionOutline),this.showOutlineMenu.classList.add(f.a.HIDE),this.toolTopContents.appendChild(this.showOutlineMenu),this.showShadowMenu=M.a.makeButtonShowToolsAccordionRow("그림자",this.accordionGroupShadow),this.showShadowMenu.classList.add(f.a.HIDE),this.toolTopContents.appendChild(this.showShadowMenu),this.showGradationMenu=M.a.makeButtonShowToolsAccordionRow("그라데이션",this.accordionGroupGradient),this.showGradationMenu.classList.add(f.a.HIDE),this.toolTopContents.appendChild(this.showGradationMenu),this.showCurveMenu=M.a.makeButtonShowToolsButtonRow("곡선",this.curveRow),this.showCurveMenu.classList.add(f.a.HIDE),this.toolTopContents.appendChild(this.showCurveMenu),this.toolTopContents.appendChild(M.a.makeButtonShowToolsRow("배경색",this.fontColorRow)),this.toolTopContents}},{key:"makeColorRow",value:function(){var t=this,n=(new c.g).addCustomClass(f.a.ROW_TEXT_COLOR);this.fontColor=new d.a(function(n){e.useTextItemsCharPropMapper(y.d,n,t.currentItems)},y.d.icon,v.a.TOOLS_TEXT_ROW_FONT_COLOR,!1,!0),L.a.createTooltip(this.fontColor.wrap,L.b.TL,{title:{name:v.a.TOOLS_TOOLTIP_FONTCOLOR_TITLE}});this.backgroundColor=new d.a(function(n){e.useTextItemsPropMapper(y.b,n,t.currentItems)},y.b.icon,v.a.TOOLS_TEXT_ROW_FONT_BGCOLOR,!0,!0),L.a.createTooltip(this.backgroundColor.wrap,L.b.TL,{title:{name:v.a.TOOLS_TOOLTIP_FONTBOXCOLOR_TITLE}}),n.add(this.fontColor,this.backgroundColor),this.fontColorRow=n,this.colorPickerRow=(new c.g).addCustomClass(f.a.COLOR_PICKER_ROW)}},{key:"makeAccordionRow1",value:function(){var t=this,n=new c.c(v.a.TOOLS_TEXT_ROW_FONT_DEFAULT,null).setScrollStart(250).setFlex().setBorderTop().addCustomClass(f.a.ROW_TEXT_DEFAULT,f.a.HIDDEN_LABEL);this.textSpace=new p.a(function(n){e.useTextItemsCharPropMapper(y.m,n,t.currentItems)},v.a.TOOLS_TEXT_LETTER_SPACING,-50,200,1),this.lineSpace=new p.a(function(n){e.useTextItemsCharPropMapper(y.k,n,t.currentItems,!0,!0)},v.a.TOOLS_TEXT_LINE_HEIGHT,-50,100,1),this.scaleX=new p.a(function(n){e.useTextItemsPropMapper(y.l,n,t.currentItems)},v.a.TOOLS_TEXT_FONT_STRETCH,50,200,1,"%"),n.add(this.textSpace),n.add(this.lineSpace),n.add(this.scaleX),this.accordionFontDefault=n}},{key:"outlineCheckedEvent",value:function(t,n){var i=this;m.a.groupingAction(function(){i.currentItems.forEach(function(i){e.useTextItemPropMapper(y.t,t,[i]),!0===t&&(!i.isEditMode||i.edit.endPos.col===i.edit.startPos.col&&i.edit.endPos.row===i.edit.startPos.row?U(i.props.getOutlineColors())&&G(i.props.getOutlineSizes())&&e.useTextItemPropMapper(y.v,20,[i]):e.useTextItemCharPropMapper(y.v,20,i),n&&e.useTextItemCharPropMapper(y.u,n,i))})})}},{key:"shadowCheckedEvent",value:function(t,n){var i=this;m.a.groupingAction(function(){i.currentItems.forEach(function(i){e.useTextItemPropMapper(y.w,t,[i]),!i.isEditMode||i.edit.endPos.col===i.edit.startPos.col&&i.edit.endPos.row===i.edit.startPos.row?!0===t&&U(i.props.getShadowColors())&&D.a.isShadowAngleDefault(i.props)&&G(i.props.getShadowDistances())&&G(i.props.getShadowSpreads())&&(e.useTextItemPropMapper(y.y,315,[i]),e.useTextItemPropMapper(y.x,50,[i]),e.useTextItemPropMapper(y.A,12,[i]),e.useTextItemPropMapper(y.C,8,[i])):(e.useTextItemPropMapper(y.y,315,[i]),e.useTextItemPropMapper(y.x,50,[i]),e.useTextItemCharPropMapper(y.A,12,i),e.useTextItemCharPropMapper(y.C,8,i)),n&&e.useTextItemCharPropMapper(y.z,n,i)})})}},{key:"gradientCheckedEvent",value:function(t){e.useTextItemsPropMapper(y.n,t,this.currentItems)}},{key:"curveCheckedEvent",value:function(t){e.useTextItemsPropMapper(y.g,t,this.currentItems)}},{key:"makeAccordionOutlineRow",value:function(){var t=this,n=new c.c(v.a.TOOLS_TEXT_ROW_OUTLINE,function(e){return t.outlineCheckedEvent(e)}).setFlex().setBorderTop();this.outlineColor=new d.a(function(e){t.outlineCheckedEvent(!0,e)},P.ToolsIcon.PENCIL,v.a.TOOLS_OUTLINE_COLOR).addClass(f.a.ACCORDION_ROW_COLOR),this.outlineSize=new p.a(function(n){e.useTextItemsCharPropMapper(y.v,n,t.currentItems)},v.a.TOOLS_OUTLINE_SIZE,0,100,1),n.addCustomClass(f.a.EFFECT_TOOLS),n.setPrevCallback(function(){return t.effectMenu.click()}),n.appendElement(this.outlineColor.render()).add(this.outlineSize),this.accordionOutline=n}},{key:"makeAccordionShadowRow",value:function(){var t=this,n=new c.c(v.a.TOOLS_TEXT_ROW_SHADOW,function(e){return t.shadowCheckedEvent(e)}).setFlex().setBorderTop().setBorderBottom();this.shadowColor=new d.a(function(e){t.shadowCheckedEvent(!0,e)},P.ToolsIcon.PENCIL,v.a.TOOLS_SHADOW_COLOR).addClass(f.a.ACCORDION_ROW_COLOR),this.shadowAngle=new p.a(function(n){e.useTextItemsCharPropMapper(y.y,n,t.currentItems)},v.a.TOOLS_SHADOW_ANGLE,0,360,1,"°"),this.shadowAlpha=new p.a(function(n){e.useTextItemsCharPropMapper(y.x,n,t.currentItems)},v.a.TOOLS_SHADOW_ALPHA,0,100,1,"%"),this.shadowDistance=new p.a(function(n){e.useTextItemsCharPropMapper(y.A,n,t.currentItems)},v.a.TOOLS_SHADOW_DISTANCE,0,100,1),this.shadowSpread=new p.a(function(n){e.useTextItemsCharPropMapper(y.C,n,t.currentItems)},v.a.TOOLS_SHADOW_SPREAD,0,100,1),n.addCustomClass(f.a.EFFECT_TOOLS),n.appendElement(this.shadowColor.render()).add(this.shadowAngle,this.shadowAlpha,this.shadowDistance,this.shadowSpread),n.setPrevCallback(function(){return t.effectMenu.click()}),this.accordionGroupShadow=n}},{key:"makeAccordionGradient",value:function(){var t=this,n=new c.c(v.a.TOOLS_TEXT_ROW_GRADIENT,function(e){return t.gradientCheckedEvent(e)}).setFlex().setBorderBottom();this.gradientAngle=new p.a(function(n){e.useTextItemsPropMapper(y.o,n,t.currentItems)},v.a.TOOLS_GRADIENT_ANGLE,0,360,1,"°"),this.gradationColor=new k(v.a.TOOLS_GRADIENT_COLOR,function(t){return e.applyPreset(t)},function(n){e.useTextItemsPropMapper(y.p,n,t.currentItems)},function(n){e.useTextItemsPropMapper(y.q,n,t.currentItems)},function(n){e.useTextItemsPropMapper(y.r,n,t.currentItems)},function(n){e.useTextItemsPropMapper(y.s,n,t.currentItems)}),n.addCustomClass(f.a.EFFECT_TOOLS),n.appendElement(this.gradationColor.colorViewBoxOuter).add(this.gradationColor,this.gradientAngle),n.setPrevCallback(function(){return t.effectMenu.click()}),this.accordionGroupGradient=n}},{key:"makeAccordionCurveRow",value:function(){var t=this,n=new c.e(v.a.TOOLS_TEXT_ROW_CURVE,function(e){return t.curveCheckedEvent(e)}).setFlex().setBorderBottom();this.curveRow=n;var i=new h.a(function(n){e.useTextItemsPropMapper(y.i,n,t.currentItems)},{icon:y.i.icon}).addClass(f.a.TOGGLE_BUTTON_FIRST);this.curveCW=i,L.a.createTooltip(this.curveCW.wrap,L.b.B,{title:{name:v.a.TOOLS_TOOLTIP_CURVE_CLOCKWISE_TITLE}}),this.curveCW.wrap.classList.add("tools_item_curve");var r=new h.a(function(n){e.useTextItemsPropMapper(y.h,!n,t.currentItems)},{icon:y.h.icon}).addClass(f.a.TOGGLE_BUTTON_SECOND);this.curveCCW=r,L.a.createTooltip(this.curveCCW.wrap,L.b.B,{title:{name:v.a.TOOLS_TOOLTOP_CURVE_COUNTERCLOCKWISE_TITLE}}),this.curveCCW.wrap.classList.add("tools_item_curve"),n.addCustomClass(f.a.EFFECT_TOOLS),n.add(i),n.add(r),n.setPrevCallback(function(){return t.effectMenu.click()})}},{key:"updateUI",value:function(e){var t=this.currentItem,n=e.length>1,i=null,r=null;t.edit&&t.edit.visible&&(i={col:t.edit.startPos.col,row:t.edit.startPos.row},r={col:t.edit.endPos.col,row:t.edit.endPos.row},i.col===r.col&&i.row===r.row&&(0===i.col?r.col+=1:i.col-=1));var a=N.a.getUsedFontFamilyList();this.fontFamily.updateUI({value:t.props.getFamily(i,r),itemX:"1"===O.a.getConfigValue(A.a.UNICORN_THEME)?-14:387,recommendItemList:a.map(function(e){return{value:e}})});var o=t.props.getSizeStr(i,r);Number.isNaN(Number(o))||(this.fontSize.updateUI({value:o}),this.selectedFontSize.innerText=o),this.selectedFont.innerText=t.props.getFamily(i,r),this.fontSizeRange.updateUI({value:t.props.getSize(i,r)}),this.textBold.updateUI({isSelected:t.props.isBold(i,r)}),this.italic.updateUI({isSelected:t.props.isItalic(i,r)}),this.textUnderline.updateUI({isSelected:t.props.isUnderline(i,r)}),this.textStroke.updateUI({isSelected:t.props.isStrikeout(i,r)}),this.textUpperCase.updateUI({isSelected:t.props.isUpperCase()});var s=!1;if(n){var l=t.props.getDuplicateValExcludedColors()[0].toLowerCase(),c=!0,u=!1,h=void 0;try{for(var d,p=e[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){var v=d.value.props.getDuplicateValExcludedColors();if(v.length>1||l!==v[0].toLowerCase()){s=!0;break}}}catch(e){u=!0,h=e}finally{try{c||null==p.return||p.return()}finally{if(u)throw h}}}else s=t.props.getDuplicateValExcludedColors(i,r).length>1;if(this.fontColor.updateUI({value:t.props.getColor(i,r),isMultiColor:s}),s=!1,n){var g=t.props.getBackgroundColor().toLowerCase(),m=!0,E=!1,y=void 0;try{for(var T,_=e[Symbol.iterator]();!(m=(T=_.next()).done);m=!0){if(g!==T.value.props.getBackgroundColor().toLowerCase()){s=!0;break}}}catch(e){E=!0,y=e}finally{try{m||null==_.return||_.return()}finally{if(E)throw y}}}if(this.backgroundColor.updateUI({value:t.props.getBackgroundColor(),isMultiColor:s}),this.textAlign.updateUI({value:t.props.getTextAlign().toString()}),this.textVerticalAlign.updateUI({value:t.props.getVerticalAlign().toString(),active:!t.props.isActiveCurve()}),this.accordionFontDefault.updateUI(t.props.isActiveFontDetail()),this.textSpace.updateUI({value:t.props.getFontDetailTextSpace(!0,i,r),active:t.props.isActiveFontDetail()}),this.lineSpace.updateUI({value:t.props.getFontDetailLineSpace(!0,i,r),active:t.props.isActiveFontDetail()&&!t.props.isActiveCurve()}),this.scaleX.updateUI({value:t.props.getFontDetailScaleX(!0),active:t.props.isActiveFontDetail()&&!t.props.isActiveCurve()}),this.accordionOutline.updateUI(t.props.isActiveOutline()),s=!1,n){var I=t.props.getDuplicateValExcludedOutlineColors()[0].toLowerCase(),C=!0,S=!1,w=void 0;try{for(var k,R=e[Symbol.iterator]();!(C=(k=R.next()).done);C=!0){var L=k.value.props.getDuplicateValExcludedOutlineColors();if(L.length>1||I!==L[0].toLowerCase()){s=!0;break}}}catch(e){S=!0,w=e}finally{try{C||null==R.return||R.return()}finally{if(S)throw w}}}else s=t.props.getDuplicateValExcludedOutlineColors(i,r).length>1;if(this.outlineColor.updateUI({value:t.props.getOutlineColor(!0,i,r),active:!0,isMultiColor:s}),this.outlineSize.updateUI({value:t.props.getOutlineSize(!0,i,r),active:t.props.isActiveOutline()}),this.accordionGroupShadow.updateUI(t.props.isActiveShadow()),s=!1,n){var b=t.props.getDuplicateValExcludedShadowColors()[0].toLowerCase(),P=!0,x=!1,M=void 0;try{for(var D,B=e[Symbol.iterator]();!(P=(D=B.next()).done);P=!0){var U=D.value.props.getDuplicateValExcludedShadowColors();if(U.length>1||b!==U[0].toLowerCase()){s=!0;break}}}catch(e){x=!0,M=e}finally{try{P||null==B.return||B.return()}finally{if(x)throw M}}}else s=t.props.getDuplicateValExcludedShadowColors(i,r).length>1;this.shadowColor.updateUI({value:t.props.getShadowColor(!0,i,r),active:!0,isMultiColor:s}),this.shadowAlpha.updateUI({value:t.props.getShadowAlpha(!0,i,r),active:t.props.isActiveShadow()}),this.shadowAngle.updateUI({value:t.props.getShadowAngle(!0,i,r),active:t.props.isActiveShadow()}),this.shadowDistance.updateUI({value:t.props.getShadowDistance(!0,i,r),active:t.props.isActiveShadow()}),this.shadowSpread.updateUI({value:t.props.getShadowSpread(!0,i,r),active:t.props.isActiveShadow()}),this.accordionGroupGradient.updateUI(t.props.isActiveGradient()),this.gradientAngle.updateUI({value:t.props.getGradientAngle(!0),active:t.props.isActiveGradient()}),this.gradationColor.updateUI({active:t.props.isActiveGradient(),isNewFormat:t.props.isGradientNewFormat(),rotate:t.props.getGradientAngle(!0),valueList:[{rgb:t.props.getGradientColor1(!0),alpha:t.props.getGradientAlpha1(!0)},{rgb:t.props.getGradientColor2(!0),alpha:t.props.getGradientAlpha2(!0)},{rgb:t.props.getGradientColor3(!0),alpha:t.props.getGradientAlpha3(!0)},{rgb:t.props.getGradientColor4(!0),alpha:t.props.getGradientAlpha4(!0)}]}),this.curveRow.updateUI(t.props.isActiveCurve()),this.curveCW.updateUI({active:t.props.isActiveCurve(),isSelected:!1}),this.curveCCW.updateUI({active:t.props.isActiveCurve(),isSelected:!1}),t.props.isCurveCw()?(this.curveCW.wrap.classList.add(f.a.HIDE),this.curveCCW.wrap.classList.remove(f.a.HIDE)):(this.curveCW.wrap.classList.remove(f.a.HIDE),this.curveCCW.wrap.classList.add(f.a.HIDE)),this.curveMenu.updateUI(t.props.isActiveCurve()),this.gradationMenu.updateUI(t.props.isActiveGradient()),this.outlineMenu.updateUI(t.props.isActiveOutline()),this.shadowMenu.updateUI(t.props.isActiveShadow())}},{key:"makeToolboxRowContents",value:function(){return[{row:this.fontFamilyRow,priority:200,viewType:0},{row:this.fontEtcRow,priority:210,viewType:0},{row:this.textAlignRow,priority:220,viewType:0},{row:this.fontColorRow,priority:530,viewType:0},{row:this.accordionFontDefault,priority:535,viewType:0},{row:this.accordionOutline,priority:540,viewType:0},{row:this.accordionGroupShadow,priority:550,viewType:0},{row:this.accordionGroupGradient,priority:560,viewType:0},{row:this.curveRow,priority:570,viewType:0},{row:this.fontSizeRow,priority:580,viewType:0},{row:this.textEffecRow,priority:590,viewType:0},{row:this.colorPickerRow,priority:600,viewType:0}]}},{key:"updateToolboxRowContents",value:function(e,t){var n=e.filter(function(e){return e instanceof g.b}),i=e.every(function(e){return e instanceof g.b}),r=n.length>1,a=i&&e.some(function(e){return e instanceof g.b&&e.props.isActiveCurve()}),o=i&&!t.isAdminEditView;m.a.isMobileMode()?(this.toolTopContents.insertBefore(this.fontColor.wrap,this.afterColorMenu),this.fontColor.canNotAppend=!0):(this.fontColorRow.wrap.insertBefore(this.fontColor.wrap,this.backgroundColor.wrap),this.fontColor.canNotAppend=!1),this.fontSizeRow.rowVisible=o&&m.a.isMobileMode(),this.textEffecRow.rowVisible=o&&m.a.isMobileMode(),this.colorPickerRow.rowVisible=o&&m.a.isMobileMode(),this.fontFamilyRow.rowVisible=o,this.fontEtcRow.rowVisible=o,this.textAlignRow.rowVisible=o,this.fontColorRow.rowVisible=o,this.accordionFontDefault.rowVisible=o,this.curveRow.rowVisible=o,this.accordionOutline.rowVisible=o,this.accordionGroupShadow.rowVisible=o,this.accordionGroupGradient.rowVisible=o&&!(r&&a),this.curveRow.rowVisible=o&&!r;var s=o&&e[0]&&!e[0].isLock();return M.a.setContentsVisible(this.toolTopContents,s),this.curveMenu.element&&M.a.setContentsVisible(this.curveMenu.element,!r),i?(this.currentItems=e.filter(function(e){return e instanceof g.b}),this.currentItem=this.currentItems[0],this.updateUI(this.currentItems)):(this.currentItem=null,this.currentItems=null),!0}},{key:"changeFontSizeListByDpi",value:function(e){var t=this.fontSize.menuList.slice();t.forEach(function(t){var n=Number(t.value),i=Math.round(n*e);t.value=i.toString()}),this.fontSize.updateUI({itemList:t,value:""})}}],[{key:"makeStyleTemplateXmlDoc",value:function(e){return null}},{key:"setStyleTemplateNode",value:function(e,t,n,i){return i&&e.attr(t.name,n),this}},{key:"useTextItemsPropMapper",value:function(t,n,i){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];e.useTextItemPropMapper(t,n,i,r)}},{key:"useTextItemPropMapper",value:function(e,t,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];m.a.dispatch(new T.e(e.actionType,e.groupName,e.name,t,i,e.timeout,!0,n));var r=!0,a=!1,o=void 0;try{for(var s,l=n[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var c=s.value;if(c.isEditMode){var u=m.a.instance.pageController.getItemRenderer(c);u.elements.editElement.focus()}}}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}}},{key:"useTextItemsCharPropMapper",value:function(t,n,i){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6?arguments[6]:void 0;m.a.groupingAction(function(){var l=!0,c=!1,u=void 0;try{for(var h,d=i[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){var p=h.value;if(e.useTextItemCharPropMapper(t,n,p,r,a,s),p.isEditMode&&!o)m.a.instance.pageController.getItemRenderer(p).elements.editElement.focus()}}catch(e){c=!0,u=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}})}},{key:"useTextItemCharPropMapper",value:function(e,t,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5?arguments[5]:void 0,o={row:n.edit.startPos.row,col:n.edit.startPos.col},s={row:n.edit.endPos.row,col:n.edit.endPos.col};n.isEditMode&&(o.col!==s.col||o.row!==s.row||r)?m.a.dispatch(new T.c(e.actionType,e.groupName,e.name,t,i,e.timeout,!0,o,s,n,a)):m.a.dispatch(new T.c(e.actionType,e.groupName,e.name,t,i,e.timeout,!0,null,null,n,a))}},{key:"applyPreset",value:function(e,t){m.a.dispatch(new R.a(e,x.a.TEXT,t))}},{key:"applyPresetParam",value:function(e,t,n){var i=t.edit.startPos,r=t.edit.endPos;!t.isEditMode||i.col===r.col&&i.row===r.row?this.applyPreset(e,n):m.a.dispatch(new R.a(e,x.a.TEXT,n,i,r))}}]),e}();function U(e){var t=!0,n=!1,i=void 0;try{for(var r,a=e[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value,s=!0,l=!1,c=void 0;try{for(var u,h=o[Symbol.iterator]();!(s=(u=h.next()).done);s=!0){if("#000000"!==u.value)return!1}}catch(e){l=!0,c=e}finally{try{s||null==h.return||h.return()}finally{if(l)throw c}}}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return!0}function G(e){var t=!0,n=!1,i=void 0;try{for(var r,a=e[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value,s=!0,l=!1,c=void 0;try{for(var u,h=o[Symbol.iterator]();!(s=(u=h.next()).done);s=!0){if(0!==u.value)return!1}}catch(e){l=!0,c=e}finally{try{s||null==h.return||h.return()}finally{if(l)throw c}}}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return!0}l()(B,"MAX_FONT_SIZE",999),l()(B,"MIN_FONT_SIZE",1)},,,,function(e,t,n){"use strict";n.d(t,"a",function(){return h}),n.d(t,"b",function(){return i});var i,r=n(35),a=n.n(r),o=n(36),s=n.n(o),l=n(37),c=n.n(l),u=n(49),h=function(){function e(t,n){a()(this,e),c()(this,"isCropped",!1),c()(this,"minPaddingSize",26),c()(this,"areaDivRect",{}),c()(this,"cloneDivRect",{}),c()(this,"boxDivRect",{}),c()(this,"imgPositionV",new u.c(0,0)),this.setAreaDivRect(0,0,t,n),this.setBoxDivRect(0,0,t,n),this.initBox(),this.resizeDirection=i.NONE}return s()(e,[{key:"isResizeSelected",value:function(){return this.resizeDirection!==i.NONE}},{key:"setAreaDivRect",value:function(e,t,n,i){this.areaDivRect.left=e,this.areaDivRect.top=t,this.areaDivRect.right=e+n,this.areaDivRect.bottom=t+i,this.areaDivRect.width=n,this.areaDivRect.height=i}},{key:"initPhotoCloneBox",value:function(e,t,n,i){this.cloneDivRect.left=e,this.cloneDivRect.top=t,this.cloneDivRect.width=n,this.cloneDivRect.height=i}},{key:"increasePhotoCloneBoxPosition",value:function(e,t){this.cloneDivRect.left+=e,this.cloneDivRect.top+=t}},{key:"updatePhotoCloneBoxSize",value:function(e,t){this.cloneDivRect.width=e,this.cloneDivRect.height=t}},{key:"getPhotoCloneBoxRect",value:function(e){return new u.a(this.cloneDivRect.left,this.cloneDivRect.top,this.cloneDivRect.left+this.cloneDivRect.width,this.cloneDivRect.top+this.cloneDivRect.height,e)}},{key:"getBoxRect",value:function(e){return new u.a(this.boxDivRect.left,this.boxDivRect.top,this.boxDivRect.left+this.boxDivRect.width,this.boxDivRect.top+this.boxDivRect.height,e)}},{key:"setBoxDivRect",value:function(e,t,n,i){this.boxDivRect.left=e,this.boxDivRect.top=t,this.boxDivRect.right=e+n,this.boxDivRect.bottom=t+i,this.boxDivRect.width=n,this.boxDivRect.height=i}},{key:"getBoxDivRect",value:function(){return{left:this.boxDivRect.left,top:this.boxDivRect.top,right:this.boxDivRect.left+this.boxDivRect.width,bottom:this.boxDivRect.top+this.boxDivRect.height,width:this.boxDivRect.width,height:this.boxDivRect.height}}},{key:"initBox",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.areaDivRect.width,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.areaDivRect.height;this.boxDivRect.left=e,this.boxDivRect.top=t,this.boxDivRect.right=e+n,this.boxDivRect.bottom=t+i,this.boxDivRect.width=n,this.boxDivRect.height=i}},{key:"initBoxSize",value:function(e,t){var n=e/4,i=t/4,r=e/2,a=t/2;this.initBox(n,i,r,a)}},{key:"initBoxFullSize",value:function(e,t){this.initBox(0,0,e,t)}},{key:"updateBoxVisible",value:function(e,t){e<2*this.minPaddingSize||t<2*this.minPaddingSize?this.initBoxFullSize(e,t):this.initBoxSize(e,t)}},{key:"applyBoxPosition",value:function(){this.boxDivRect.left=-this.imgPositionV.x,this.boxDivRect.top=-this.imgPositionV.y,this.boxDivRect.right=-this.imgPositionV.x,this.boxDivRect.bottom=-this.imgPositionV.y,this.isCropped=!0}},{key:"resize",value:function(e,t,n){var r=u.b.getRotatedVectorByPoint(new u.c(0,0),new u.c(e.x,e.y),u.b.getRadianByDegree(-t)),a=r.x,o=r.y,s=n.left,l=n.top,c=n.right,h=n.bottom,d=this.getBoxRect(t),p=d.left+this.minPaddingSize,v=d.top+this.minPaddingSize,f=d.right-this.minPaddingSize,g=d.bottom-this.minPaddingSize,m=d.left+a,E=d.top+o,y=d.right+a,T=d.bottom+o;switch(this.resizeDirection){case i.LT:E<l&&(o+=l-E),E>g&&(o+=g-E),m<s&&(a+=s-m),m>f&&(a+=f-m),this.boxDivRect.left+=a,this.boxDivRect.top+=o,this.boxDivRect.right+=a,this.boxDivRect.bottom+=o,this.boxDivRect.width-=a,this.boxDivRect.height-=o;break;case i.RT:E<l&&(o+=l-E),E>g&&(o+=g-E),y<p&&(a+=p-y),y>c&&(a+=c-y),this.boxDivRect.top+=o,this.boxDivRect.bottom+=o,this.boxDivRect.width+=a,this.boxDivRect.height-=o;break;case i.RB:T<v&&(o+=v-T),T>h&&(o+=h-T),y<p&&(a+=p-y),y>c&&(a+=c-y),this.boxDivRect.width+=a,this.boxDivRect.height+=o;break;case i.LB:T<v&&(o+=v-T),T>h&&(o+=h-T),m<s&&(a+=s-m),m>f&&(a+=f-m),this.boxDivRect.left+=a,this.boxDivRect.right+=a,this.boxDivRect.width-=a,this.boxDivRect.height+=o;break;default:return}}},{key:"initResizeDirection",value:function(){this.resizeDirection=i.NONE}},{key:"setResizeDirection",value:function(e){this.resizeDirection=e}}]),e}();!function(e){e.NONE="none",e.LT="lt",e.RT="rt",e.RB="rb",e.LB="lb"}(i||(i={}))},,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return f});var i=n(0),r=n.n(i),a=n(1),o=n.n(a),s=n(35),l=n.n(s),c=n(36),u=n.n(c),h=n(37),d=n.n(h),p=n(50),v=n(66),f=function(){function e(){l()(this,e)}var t;return u()(e,null,[{key:"getImageOriginSizeFinderAddedItems",value:(t=o()(r.a.mark(function t(n){var i,a,o,s,l,c,u,h,d,f;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i=!0,a=!1,o=void 0,t.prev=3,s=n[Symbol.iterator]();case 5:if(i=(l=s.next()).done){t.next=38;break}if(!((c=l.value)instanceof p.e)){t.next=22;break}if(u=c.tbpeId,e.imgOriginSizeFinder.has(u)){t.next=20;break}return t.prev=10,t.next=13,c.getImgOriginalSize();case 13:h=t.sent,e.imgOriginSizeFinder.set(u,{width:h.width,height:h.height}),t.next=20;break;case 17:throw t.prev=17,t.t0=t.catch(10),t.t0;case 20:t.next=35;break;case 22:if(!(c instanceof v.b)||c.isDefaultImage()){t.next=35;break}if(d=c.innerPhotoItem.tbpeId,e.imgOriginSizeFinder.has(d)){t.next=35;break}return t.prev=25,t.next=28,c.innerPhotoItem.getImgOriginalSize();case 28:f=t.sent,e.imgOriginSizeFinder.set(d,{width:f.width,height:f.height}),t.next=35;break;case 32:throw t.prev=32,t.t1=t.catch(25),t.t1;case 35:i=!0,t.next=5;break;case 38:t.next=44;break;case 40:t.prev=40,t.t2=t.catch(3),a=!0,o=t.t2;case 44:t.prev=44,t.prev=45,i||null==s.return||s.return();case 47:if(t.prev=47,!a){t.next=50;break}throw o;case 50:return t.finish(47);case 51:return t.finish(44);case 52:return t.abrupt("return",e.imgOriginSizeFinder);case 53:case"end":return t.stop()}},t,null,[[3,40,44,52],[10,17],[25,32],[45,,47,51]])})),function(e){return t.apply(this,arguments)})}]),e}();d()(f,"WARNING_ICON_SIZE",24),d()(f,"imgOriginSizeFinder",new Map)},function(e,t,n){"use strict";n.d(t,"a",function(){return d}),n.d(t,"b",function(){return p});var i=n(35),r=n.n(i),a=n(36),o=n.n(a),s=n(37),l=n.n(s),c=n(104),u=n(125),h=n(105),d=.21,p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];r()(this,e),l()(this,"lastCurveData",{width:0,height:0,curveWidth:0,dir:!1}),this.lastrevision=t?NaN:-1}return o()(e,[{key:"getGlyph",value:function(e,t){var n=u.a.instance.getDefault();return e.has(t)?e.getGlyph(t):n.has(t)?n.getGlyph(t):n.getDefault()}},{key:"isDefaultGlyph",value:function(e,t){var n=u.a.instance.getDefault();return!e.has(t)&&!n.has(t)}},{key:"calculate",value:function(e,t){var n,i,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=e.isUpperCase()?function(e){return e.toUpperCase()}:function(e){return e},o=2e3,s=0,l=0,d=0;e.isActiveCurve()&&(this.lastCurveData.width===e.getWidth()&&this.lastCurveData.height===e.getHeight()&&this.data&&this.data.curve&&this.lastCurveData.dir===e.isCurveCw()?(n=this.data.curve,i=this.lastCurveData.curveWidth):(n=T(0,e.getRight()-e.getLeft(),0,e.getBottom()-e.getTop(),o,e.isCurveCw()),i=n[o-1].curve.cDist,this.lastCurveData.curveWidth=i,this.lastCurveData.width=e.getWidth(),this.lastCurveData.height=e.getHeight(),this.lastCurveData.dir=e.isCurveCw()));for(var p=i||e.getWidth(),v=e.getFontDetailScaleXAcc()/100,f=e.getLineLength(),g=[],m=[],E=[],y=[],_=0,I=0,C=0,S=[],w=[],k=[],R=0;R<f;R++){var L=e.getLine(R);g[R]={lineheight:0,maxwidth:0};var O=0,A=0,b=!0,P=!1,N=void 0;try{for(var x,M=L.chars[Symbol.iterator]();!(b=(x=M.next()).done);b=!0){var D=x.value,B=u.a.instance.get(t(D.styles),D.char);if(!B)throw new Error("폰트가 정상적으로 로드되지 않았습니다:"+D.styles.family);var U=B.ascender-B.descender,G=D.size*h.b/B.unitsPerEm,F=U*G;F>C&&(C=F),g[R].lineheight<F&&(g[R].lineheight=F,m[R]=F,E[R]=F,g[R].heightFont=B,g[R].fsc=G);var H=B.ascender*G;O<H&&(O=H);var V=-B.descender*G;A<V&&(A=V);var W=B.xMax-B.xMin;g[R].maxwidth<W&&(g[R].maxwidth=W,g[R].widthFont=B),I<W*G&&(I=W*G),y[R]={asc:O,desc:A}}}catch(e){P=!0,N=e}finally{try{b||null==M.return||M.return()}finally{if(P)throw N}}}function z(t){return i?0:e.getLine(t).lineSpace}_=m[0];for(var X=0;X<f;X++){var Y=C*z(X)/100;m[X]+=Y,y[X].gap=Y,0!==X&&(_+=m[X])}if(r)for(var K=0;K<f;K++)S.push(e.getLine(K));else{for(var Z=m.splice(0),j=y.splice(0),q=[],$=E.splice(0),Q=0;Q<f;Q++){var J=e.getLine(Q),ee={align:J.align,chars:[],lineSpace:J.lineSpace};w[Q]=[];var te=S.push(ee)-1;m[te]=Z[Q],y[te]=j[Q],q[te]=g[Q],k[te]=[],E[te]=$[Q];for(var ne=0,ie=0;ie<J.chars.length;ie++){var re=J.chars[ie];if(""!==re.char){var ae=u.a.instance.get(re.styles,re.char);if(!ae)throw new Error("폰트가 정상적으로 로드되지 않았습니다:"+re.styles.family);var oe=re.size*h.b/ae.unitsPerEm,se=Math.round(g[Q].maxwidth*oe)/20*re.fontdetail.textSpace/10,le=this.getGlyph(ae,a(J.chars[ie].char));if((ne+=le.advanceWidth*oe*v)-p>.1&&ee.chars.length>0){var ce=ee.chars.length;k[te][ce]={row:Q,col:ie},ee={align:J.align,chars:[],lineSpace:J.lineSpace},m[te=S.push(ee)-1]=Z[Q],y[te]=j[Q],q[te]=g[Q],k[te]=[],_+=Z[Q],ne=le.advanceWidth*oe*v,E[te]=$[Q]}ie!==J.chars.length-1&&(ne+=se*v)}var ue=ee.chars.push(re)-1;w[Q][ie]={row:te,col:ue},k[te][ue]={row:Q,col:ie}}w[Q][J.chars.length]={row:te,col:ee.chars.length},k[te][ee.chars.length]={row:Q,col:J.chars.length}}g=q}if(l=(g[0].heightFont.ascender+g[0].heightFont.lineGap)*g[0].fsc,s=(g[0].heightFont.ascender+g[0].heightFont.lineGap)*g[0].fsc,d=g[0].heightFont.lineGap*g[0].fsc,!e.isActiveCurve())switch(e.getVerticalAlign()){case c.f.CENTER:s=(e.getHeight()-_)/2+(g[0].heightFont.ascender+g[0].heightFont.lineGap)*g[0].fsc,d=(e.getHeight()-_)/2+g[0].heightFont.lineGap*g[0].fsc;break;case c.f.BOTTOM:s=e.getHeight()-_+(g[0].heightFont.ascender+g[0].heightFont.lineGap)*g[0].fsc,d=e.getHeight()-_}for(var he=[],de=[],pe={x1:Number.MAX_SAFE_INTEGER,x2:Number.MIN_SAFE_INTEGER,y1:Number.MAX_SAFE_INTEGER,y2:Number.MIN_SAFE_INTEGER},ve={x1:Number.MAX_SAFE_INTEGER,x2:Number.MIN_SAFE_INTEGER,y1:Number.MAX_SAFE_INTEGER,y2:Number.MIN_SAFE_INTEGER},fe=0,ge=0;ge<S.length;ge++){de[ge]={chars:[],bound:{x1:0,x2:0,y1:0,y2:0},visx2:0};var me=S[ge];if(Object(c.g)(me)){var Ee=me.chars[0],ye=u.a.instance.get(Ee.styles,Ee.char);if(!ye)throw new Error("폰트가 정상적으로 로드되지 않았습니다:"+Ee.styles.family);var Te=Ee.size*h.b/ye.unitsPerEm,_e=this.getGlyph(ye," ");de[ge].chars.push({bound:{x1:0,x2:0,y1:0,y2:m[ge]},spacing:0});var Ie=_e.advanceWidth*Te;ge>0&&(fe+=y[ge-1].desc+y[ge].asc+y[ge-1].gap),de[ge].bound={x1:0,x2:0,y1:0,y2:m[ge]},de[ge].visx2=Ie/2,de[ge].bound.y1+=fe,de[ge].bound.y2+=fe,pe.x1=pe.x1>de[ge].bound.x1?de[ge].bound.x1:pe.x1,pe.x2=pe.x2<Ie?Ie:pe.x2,pe.y1=pe.y1>de[ge].bound.y1?de[ge].bound.y1:pe.y1,pe.y2=pe.y2<de[ge].bound.y2?de[ge].bound.y2:pe.y2,ve.x1=pe.x1>de[ge].bound.x1?de[ge].bound.x1:pe.x1,ve.x2=pe.x2<Ie?Ie:pe.x2,ve.y1=pe.y1>de[ge].bound.y1?de[ge].bound.y1:pe.y1,ve.y2=pe.y2<de[ge].bound.y2?de[ge].bound.y2:pe.y2}else{de[ge].bound=null;for(var Ce=0;Ce<me.chars.length;Ce++){var Se=me.chars[Ce],we=u.a.instance.get(Se.styles,Se.char);if(!we)throw new Error("폰트가 정상적으로 로드되지 않았습니다:"+Se.styles.family);var ke=Se.size*h.b/we.unitsPerEm,Re=Math.round(g[ge].maxwidth*ke)/20*Se.fontdetail.textSpace/10,Le=this.getGlyph(we,a(me.chars[Ce].char)),Oe=(Le.advanceWidth*ke+Re)*v;null===de[ge].bound?de[ge].bound={x1:Le.x1*ke,x2:Oe,y1:Le.y1*ke,y2:Le.y2*ke}:(de[ge].bound.x2+=Oe,de[ge].bound.y2=de[ge].bound.y2<Le.y2*ke?Le.y2*ke:de[ge].bound.y2,de[ge].bound.y1=de[ge].bound.y1>Le.y1*ke?Le.y1*ke:de[ge].bound.y1),de[ge].chars[Ce]={bound:{x1:de[ge].bound.x2-Oe,x2:de[ge].bound.x2,y1:Le.y1*ke,y2:Le.y2*ke},spacing:Re}}var Ae=me.chars[me.chars.length-1],be=u.a.instance.get(Ae.styles,Ae.char);if(!be)throw new Error("폰트가 정상적으로 로드되지 않았습니다:"+Ae.styles.family);var Pe=Ae.size*h.b/be.unitsPerEm,Ne=Math.round(g[ge].maxwidth*Pe)/20*Ae.fontdetail.textSpace/10;de[ge].bound.x2=de[ge].bound.x2-Ne;var xe=this.getGlyph(be," ");de[ge].visx2=de[ge].bound.x2+Pe*xe.advanceWidth/2,ge>0&&(fe+=y[ge-1].desc+y[ge].asc+y[ge-1].gap);var Me=de[ge].bound.y1+l+fe,De=de[ge].bound.y2+l+fe;ve.x1=ve.x1>de[ge].bound.x1?de[ge].bound.x1:ve.x1,ve.x2=ve.x2<de[ge].bound.x2?de[ge].bound.x2:ve.x2,ve.y1=ve.y1>Me?Me:ve.y1,ve.y2=ve.y2<De?De:ve.y2,de[ge].bound.y1+=s+fe,de[ge].bound.y2+=s+fe,pe.x1=pe.x1>de[ge].bound.x1?de[ge].bound.x1:pe.x1,pe.x2=pe.x2<de[ge].bound.x2?de[ge].bound.x2:pe.x2,pe.y1=pe.y1>de[ge].bound.y1?de[ge].bound.y1:pe.y1,pe.y2=pe.y2<de[ge].bound.y2?de[ge].bound.y2:pe.y2}switch(e.getTextAlign()){case c.c.LEFT:he[ge]=0;break;case c.c.CENTER:he[ge]=(p-de[ge].bound.x2)/2/v;break;case c.c.RIGHT:he[ge]=(p-de[ge].bound.x2)/v}}return{startX:he,startY:s,maxCharWidth:I,padSize:I,reverselinemap:k,linemap:w,linedata:S,lineHeights:m,top:d,lineStarts:y,pureTextBound:ve,textSize:{lineSize:de,bound:pe},textHeights:E,curve:n}}},{key:"getCalculated",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return i?this.calculate(e,function(e){var t=Object.assign({},e);return t.family=h.a,t}):((this.lastrevision!==e.getRevision()||n)&&(this.data=this.calculate(e,function(e){return e},n),isNaN(this.lastrevision)||(this.lastrevision=e.getRevision())),this.data)}},{key:"getPos",value:function(e,t,n,i,r,a){var o,s;n-=e.getLeft(),i-=e.getTop(),r-=e.getLeft(),a-=e.getTop();var l=this.getCalculated(e,t),u=l.textSize,h=l.lineHeights,d=l.startX,p=l.top,v=l.linedata,f=l.reverselinemap,g=l.curve,m=u,E=!1,y=!1,T=0;if(e.isActiveCurve()){var _=function(e,t){var n=Math.atan2(e,t)-Math.PI/2;return n<-Math.PI&&(n=2*Math.PI-Math.abs(n)),n},I=(e.getRight()-e.getLeft())/2,C=(e.getBottom()-e.getTop())/2,S=_(C-i,n-I),w=_(C-a,r-I),k=0;switch(e.getTextAlign()){case c.c.LEFT:k=d[0];break;case c.c.CENTER:k=(g[1999].curve.cDist-(u.bound.x2-u.bound.x1))/2;break;case c.c.RIGHT:k=g[1999].curve.cDist-(u.bound.x2-u.bound.x1)}for(var R=[],L=0,O=0;O<u.lineSize[0].chars.length;O++){for(var A=u.lineSize[0].chars[O].bound,b=k+A.x1+(A.x2-A.x1)/2,P=L;P<2e3;P++)if(g[P].curve.cDist>=b){L=P;break}R[O]=_(C-g[L].bezier.point.y,g[L].bezier.point.x-I)}var N=function(e){if(R[R.length-1]>=e)return{col:R.length,row:0};for(var t=0;t<R.length;t++)if(R[t]<e)return{col:t,row:0}},x=function(e){if(R[R.length-1]<=e)return{col:R.length,row:0};for(var t=0;t<R.length;t++)if(R[t]>e)return{col:t,row:0}};return e.isCurveCw()?{start:N(S),end:N(w)}:{start:x(S),end:x(w)}}for(var M=e.getFontDetailScaleXAcc()/100,D=0;D<m.lineSize.length;D++){D>0&&(T+=h[D-1]);var B=T+p,U=T+h[D]+p;if((0===D&&U>=i||D===m.lineSize.length-1&&B<i||B<=i&&U>i)&&(o=D,E=!0),r&&a&&(0===D&&U>=a||D===m.lineSize.length-1&&B<a||B<=a&&U>a)&&(s=D,y=!0),E&&y)break}if(n===r&&i===a){for(var G,F=0;F<m.lineSize[o].chars.length;F++){var H=Object.assign({},m.lineSize[o].chars[F].bound);if(H.x1+=d[o]*M,H.x2+=d[o]*M,0===F&&H.x2>=n||F===m.lineSize[o].chars.length-1&&H.x1<n||H.x1<n&&H.x2>=n){G=n>(H.x2-H.x1)/2+H.x1?F+1:F;break}}if(""===v[o].chars[0].char&&(G=0),f.length>0){var V=f[o][G],W=f[s][G];o=V.row,G=V.col,s=W.row}return{start:{row:o,col:G},end:{row:s,col:G}}}if(s===o){for(var z,X,Y=!1,K=!1,Z=0;Z<m.lineSize[o].chars.length;Z++){var j=Object.assign({},m.lineSize[o].chars[Z].bound);if(j.x1+=d[o]*M,j.x2+=d[o]*M,(0===Z&&j.x2>=n||Z===m.lineSize[o].chars.length-1&&j.x1<n||j.x1<n&&j.x2>=n)&&(z=n>(j.x2-j.x1)/2+j.x1?Z+1:Z,Y=!0),(0===Z&&j.x2>=r||Z===m.lineSize[o].chars.length-1&&j.x1<r||j.x1<r&&j.x2>=r)&&(X=r>(j.x2-j.x1)/2+j.x1?Z+1:Z,K=!0),Y&&K)break}if(""===v[o].chars[0].char&&(z=0,X=0),f.length>0){var q=f[o][z],$=f[s][X];o=q.row,z=q.col,s=$.row,X=$.col}return{start:{row:o,col:z},end:{row:s,col:X}}}for(var Q,J,ee=0;ee<m.lineSize[o].chars.length;ee++){var te=Object.assign({},m.lineSize[o].chars[ee].bound);if(te.x1+=d[o]*M,te.x2+=d[o]*M,0===ee&&te.x2>=n||ee===m.lineSize[o].chars.length-1&&te.x1<n||ee>0&&ee<m.lineSize[o].chars.length-1&&te.x1<n&&te.x2>=n){Q=n>(te.x2-te.x1)/2+te.x1?ee+1:ee;break}}for(var ne=0;ne<m.lineSize[s].chars.length;ne++){var ie=Object.assign({},m.lineSize[s].chars[ne].bound);if(ie.x1+=d[s]*M,ie.x2+=d[s]*M,0===ne&&ie.x2>=r||ne===m.lineSize[s].chars.length-1&&ie.x1<r||ne>0&&ne<m.lineSize[s].chars.length-1&&ie.x1<r&&ie.x2>=r){J=r>(ie.x2-ie.x1)/2+ie.x1?ne+1:ne;break}}if(""===v[o].chars[0].char&&(Q=0),""===v[s].chars[0].char&&(J=0),f.length>0){var re=f[o][Q],ae=f[s][J];o=re.row,Q=re.col,s=ae.row,J=ae.col}return{start:{row:o,col:Q},end:{row:s,col:J}}}},{key:"getSelectedArea",value:function(e,t,n,i){var r,a,o,s,l,u,d,p,v=Object(h.d)(n,i),f=v.firstSel,g=v.lastSel,m=this.getCalculated(e,t,!1),E=m.textSize,y=m.lineHeights,T=m.textHeights,_=m.startX,I=m.top,C=m.linemap,S=m.startY,w=m.curve,k=[];k[0]=0;var R=e.getFontDetailScaleXAcc()/100;C.length>0?(d=C[f.row][f.col],p=C[g.row][g.col],d.row<p.row&&0===p.col&&(p={col:(p=C[g.row][g.col-1]).col+1,row:p.row})):(d=f,p=g);var L=[];if(e.isActiveCurve()){if(0===d.row||0===p.row){for(var O=1;O<y.length;O++)k[O]=y[O-1]+k[O-1];var A=0;switch(e.getTextAlign()){case c.c.LEFT:A=_[p.row];break;case c.c.CENTER:A=(w[1999].curve.cDist-(E.lineSize[p.row].bound.x2-E.lineSize[p.row].bound.x1))/2;break;case c.c.RIGHT:A=w[1999].curve.cDist-(E.lineSize[p.row].bound.x2-E.lineSize[p.row].bound.x1)}if(d.row===p.row&&d.col===p.col){var b=0;if(0===d.row){for(var P,N,x=((P=p.col===E.lineSize[0].chars.length?E.lineSize[0].chars[p.col-1].bound:E.lineSize[0].chars[p.col].bound).x2-P.x1)/2,M=A+P.x1+x,D=b;D<2e3;D++)if(w[D].curve.cDist>=M){b=D;break}N=p.col===E.lineSize[p.row].chars.length?-(P.x2-P.x1)/2:(P.x2-P.x1)/2,L.push({top:w[b].bezier.point.y-S,left:w[b].bezier.point.x,width:0,height:T[p.row],angle:w[b].curve.rad,y:S,trs:N})}}else{var B=p.col;p.row!==d.row&&(B=E.lineSize[0].chars.length);for(var U=0,G=d.col;G<B;G++){for(var F=E.lineSize[0].chars[G].bound,H=A+F.x1+(F.x2-F.x1)/2,V=U;V<2e3;V++)if(w[V].curve.cDist>=H){U=V;break}L.push({top:w[U].bezier.point.y-S,left:w[U].bezier.point.x,width:F.x2-F.x1,height:T[p.row],angle:w[U].curve.rad,y:S,trs:(F.x2-F.x1)/2})}}}}else{for(var W=1;W<y.length;W++)k[W]=y[W-1]+k[W-1];if(l=d.col===E.lineSize[d.row].chars.length?E.lineSize[d.row].chars[d.col-1].bound.x2:E.lineSize[d.row].chars[d.col].bound.x1,l+=_[d.row]*R,u=p.col===E.lineSize[p.row].chars.length?E.lineSize[p.row].chars[p.col-1].bound.x2:E.lineSize[p.row].chars[p.col].bound.x1,u+=_[p.row]*R,r=d.row,a=l,s=u,(o=p.row)===r){var z={top:k[r]+I,left:a,width:0,height:T[r],angle:0,y:S,trs:0};s!==a&&(z.width=Math.abs(s-a)),L.push(z)}else for(var X=r;X<=o;X++){var Y=E.lineSize[X],K=_[X]*R;X===r?L.push({top:k[X]+I,left:a,width:Y.visx2-a+_[X]*R,height:T[X],angle:0,y:0,trs:0}):X===o?L.push({top:k[X]+I,left:K,width:s-_[X]*R,height:T[X],angle:0,y:0,trs:0}):L.push({top:k[X]+I,left:_[X]*R,width:Y.visx2-Y.bound.x1,height:T[X],angle:0,y:0,trs:0})}}return L}},{key:"foreach",value:function(t,n,i,r,a){var o,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],l=2e3,d=this.getCalculated(t,n,!1,s),p=d.startX,v=d.startY,f=d.textSize,g=d.lineStarts,m=d.linedata,E=t.isUpperCase()?function(e){return e.toUpperCase()}:function(e){return e};i&&i(d,p);for(var y=t.isActiveCurve()?1:m.length,T=0;T<r.length;T++)for(var _=v,I=0;I<y;I++){var C=p[I],S=m[I];if(I>0&&(_+=g[I-1].desc+g[I].asc+g[I-1].gap),!Object(c.g)(S))if(a&&a[T]&&a[T](d,S,f.lineSize[I].bound,I),t.isActiveCurve()){o=d.curve;var w=0,k=0;switch(t.getTextAlign()){case c.c.LEFT:k=C;break;case c.c.CENTER:k=(o[l-1].curve.cDist-(f.lineSize[0].bound.x2-f.lineSize[0].bound.x1))/2;break;case c.c.RIGHT:k=o[l-1].curve.cDist-(f.lineSize[0].bound.x2-f.lineSize[0].bound.x1)}for(var R=0;R<S.chars.length;R++){var L=u.a.instance.get(S.chars[R].styles,S.chars[R].char);if(!L)throw new Error("폰트가 정상적으로 로드되지 않았습니다:"+S.chars[R].styles.family);for(var O=this.getGlyph(L,E(S.chars[R].char)),A=this.isDefaultGlyph(L,E(S.chars[R].char))?e.defaultChar:E(S.chars[R].char),b=S.chars[R].size*h.b/L.unitsPerEm,P=O.advanceWidth*b+f.lineSize[I].chars[R].spacing,N=L.ascender*b,x=L.descender*b,M=f.lineSize[0].chars[R].bound,D=k+M.x1+(M.x2-M.x1)/2,B=w;B<l;B++)if(o[B].curve.cDist>=D){w=B;break}var U=(M.x2-M.x1)/2;r[T]&&r[T](d,S.chars[R],A,o[w].bezier.point.x,o[w].bezier.point.y,I,R,{advance:P,ascend:N,descend:x,angle:o[w].curve.rad,trans:U,beforex:C+M.x1,beforey:_})}}else for(var G=0;G<S.chars.length;G++){var F=u.a.instance.get(S.chars[G].styles,E(S.chars[G].char));if(!F)throw new Error("폰트가 정상적으로 로드되지 않았습니다:"+S.chars[G].styles.family);var H=this.getGlyph(F,E(S.chars[G].char)),V=this.isDefaultGlyph(F,E(S.chars[G].char))?e.defaultChar:E(S.chars[G].char),W=S.chars[G].size*h.b/F.unitsPerEm,z=H.advanceWidth*W+f.lineSize[I].chars[G].spacing,X=F.ascender*W,Y=F.descender*W;r[T]&&r[T](d,S.chars[G],V,C,_,I,G,{advance:z,ascend:X,descend:Y}),C+=z}}}},{key:"defaultForEach",value:function(e,t){var n=t.textBaseline;t.textBaseline="top";for(var i,r=[],a=0,o=function(e){if(e){var n="";e.styles.bold&&(n+="bold "),e.styles.italic&&(n+="italic "),t.font="".concat(n," ").concat(e.size,"px san-serif")}},s=0;s<e.getLineLength();s++){for(var l=e.getLine(s),u=0,h=0;h<l.chars.length;h++){var d=l.chars[s];d&&(d.size>r[s]&&(r[s]=d.size),o(d),u+=t.measureText(d.char).width)}a<u&&(a=u)}i=Math.max.apply(Math,r);var p=0,v=0;switch(e.getTextAlign()){case c.c.LEFT:p=0;break;case c.c.CENTER:p=(e.getWidth()-a)/2;break;case c.c.RIGHT:p=e.getWidth()-a}switch(e.getVerticalAlign()){case c.f.TOP:v=0;break;case c.f.CENTER:v=(e.getHeight()-i)/2;break;case c.f.BOTTOM:v=e.getHeight()-i}for(var f=0;f<e.getLineLength();f++){for(var g=e.getLine(f),m=p,E=v,y=0;y<g.chars.length;y++){var T=g.chars[y];t.fillText(T.char,m,E),m+=t.measureText(T.char).width}E+=r[f]}t.textBaseline=n}}]),e}();function v(e,t,n,i){var r=4*-(i-n)/3;return{sx:n,sy:e,c1x:n-r,c1y:e,c2x:n-r,c2y:t,ex:n,ey:t}}l()(p,"defaultChar","");var f=function e(t,n,i,a,o,s,l,c){r()(this,e),this.startX=t,this.startY=n,this.control1X=i,this.control1Y=a,this.control2X=o,this.control2Y=s,this.endX=l,this.endY=c},g=function e(t,n,i){r()(this,e),this.b1=t,this.b2=n,this.rad=Math.atan(t.point.mY/t.point.mX),t.point.mX<0&&(this.rad+=Math.PI),this.dist=Math.sqrt((n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y)),this.curve={rad:this.rad,dist:this.dist,cDist:i+this.dist}},m=function e(t,n,i,a,o,s,l){r()(this,e),this.x=(1-t)*(1-t)*n+2*(1-t)*t*a+t*t*s,this.y=(1-t)*(1-t)*i+2*(1-t)*t*o+t*t*l},E=function e(t,n,i,a,o,s,l,c,u){r()(this,e),this.mx=3*(1-t)*(1-t)*(a-n)+6*(1-t)*t*(s-a)+3*t*t*(c-s),this.my=3*(1-t)*(1-t)*(o-i)+6*(1-t)*t*(l-o)+3*t*t*(u-l)},y=function e(t,n,i,a,o,s,l,c,u){r()(this,e),this.bezier1=new m(t,n,i,a,o,s,l),this.bezier2=new m(t,a,o,s,l,c,u),this.x=(1-t)*this.bezier1.x+t*this.bezier2.x,this.y=(1-t)*this.bezier1.y+t*this.bezier2.y,this.slope=new E(t,n,i,a,o,s,l,c,u),this.point={t:t,x:this.x,y:this.y,mX:this.slope.mx,mY:this.slope.my}};function T(e,t,n,i,r,a){var o,s=[],l=0,c=e+(t-e)/2;o=a?[v(i,n,c,e),v(n,i,c,t)]:[v(n,i,c,e),v(i,n,c,t)];for(var u=0;u<o.length;u++)for(var h=o[u],d=r/o.length,p=new f(h.sx,h.sy,h.c1x,h.c1y,h.c2x,h.c2y,h.ex,h.ey),m=0;m<d;m++){var E=new y(m/d,p.startX,p.startY,p.control1X,p.control1Y,p.control2X,p.control2Y,p.endX,p.endY),T=new y((m+1)/d,p.startX,p.startY,p.control1X,p.control1Y,p.control2X,p.control2Y,p.endX,p.endY),_=new g(E,T,l);l+=_.curve.dist,s.push({bezier:E,curve:_.curve})}return s}},function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"c",function(){return p}),n.d(t,"b",function(){return d}),n.d(t,"d",function(){return v});var i,r=n(35),a=n.n(r),o=n(36),s=n.n(o),l=n(37),c=n.n(l),u=n(253),h=n(45);!function(e){e[e.ON=0]="ON",e[e.OFF=1]="OFF",e[e.BLINKING=2]="BLINKING"}(i||(i={}));var d,p=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;a()(this,e),c()(this,"oninsert",null),c()(this,"onreplace",null),c()(this,"ondelete",null),c()(this,"oncut",null),c()(this,"onpaste",null),c()(this,"oncaretchange",null),c()(this,"customWidth",0),c()(this,"incomposition",d.NONE),c()(this,"lastkey",""),this.props=t,this.textSVG=n,this.renderdata=i,this.blinkon=!0,this.on=!1,this.startPos={row:0,col:0},this.endPos={row:0,col:0},this.renderdata||(this.renderdata=new u.b(!0))}return s()(e,[{key:"setProps",value:function(e){this.startPos.row=0,this.startPos.col=0,this.endPos.col=0,this.endPos.row=0,this.props=e}},{key:"isStartEndSame",value:function(){return this.startPos.col===this.endPos.col&&this.startPos.row===this.endPos.row}},{key:"setScale",value:function(e){this.lastScale=e}},{key:"isCtrlKey",value:function(e){return navigator.platform.match("Mac")?e.metaKey:e.ctrlKey}},{key:"visible",set:function(e){this.on=e},get:function(){return this.on}}]),e}();c()(p,"UNSUPPORTED_CHAR_LIST",[0,1,2,3,4,5,6,7,8,9,11,12,14,15,16,18,19,20,21,22,23,24,25,26,27,28,29,30,31]),function(e){e[e.STARTED=0]="STARTED",e[e.UPDATING=1]="UPDATING",e[e.ENDED=2]="ENDED",e[e.NONE=3]="NONE"}(d||(d={}));var v=function e(){a()(this,e),c()(this,"doSaveQueue",!1),c()(this,"isActionGroupEquals",function(){return!1}),c()(this,"actionType",h.a.TEXT_CHANGE),c()(this,"concat",function(e){return!1}),c()(this,"changeDesign",function(){return!1}),c()(this,"isLastSavedAction",!1),c()(this,"commit",function(e,t,n){n.renderItemTools(e,t)}),c()(this,"rollback",function(){}),c()(this,"recycle",function(){})}},function(e,t,n){"use strict";n.d(t,"a",function(){return I}),n.d(t,"b",function(){return w});var i=n(44),r=n.n(i),a=n(39),o=n.n(a),s=n(38),l=n.n(s),c=n(40),u=n.n(c),h=n(35),d=n.n(h),p=n(36),v=n.n(p),f=n(37),g=n.n(f),m=n(60),E=n(49),y=n(70),T=function(){function e(t,n,i){d()(this,e),g()(this,"SVG_NOT_FILL","none"),g()(this,"SVG_ATTRIBUTE_FILL","fill"),g()(this,"SVG_ATTRIBUTE_ORIGIN_FILL","origin_fill"),g()(this,"SVG_SCALE_CEIL_VALUE",1e3),g()(this,"left",0),g()(this,"top",0),g()(this,"scaleCommon",1),g()(this,"scaleX",1),g()(this,"scaleY",1),this.svgData=t,this.layerId=n,this.svgWidth=t.width,this.svgHeight=t.height,this.svgLayer=t.getLayer(n),this.svgLayer.svg&&(this.element=this.svgLayer.svg,this.element.style.position="absolute",this.layerSvgElement=this.svgLayer.layerSvg.cloneNode(!0),y.a.makeUnicornSvgElement(this.element,i),y.a.makeUnicornSvgElement(this.layerSvgElement,i)),this.savedData={type:void 0,left:void 0,top:void 0,width:void 0,height:void 0,extendOffsetX:void 0,extendOffsetY:void 0,moveOffsetX:void 0,moveOffsetY:void 0}}return v()(e,[{key:"getColorByOriginColor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.element,n=t.attributes.getNamedItem(this.SVG_ATTRIBUTE_FILL),i=t.attributes.getNamedItem(this.SVG_ATTRIBUTE_ORIGIN_FILL);if(i&&i.value.toLowerCase()===e.toLowerCase()&&n&&n.value.toLowerCase()!==this.SVG_NOT_FILL)return String(n.value);var r=!0,a=!1,o=void 0;try{for(var s,l=t.childNodes[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var c=s.value;if(c.attributes){var u=this.getColorByOriginColor(e,c);if(u&&u!==this.SVG_NOT_FILL)return u}}}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return null}},{key:"setColorByOriginColor",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.element,i=n.attributes.getNamedItem(this.SVG_ATTRIBUTE_FILL),r=n.attributes.getNamedItem(this.SVG_ATTRIBUTE_ORIGIN_FILL);r&&r.value.toLowerCase()===e.toLowerCase()&&i&&i.value.toLowerCase()!==this.SVG_NOT_FILL&&n.setAttribute(this.SVG_ATTRIBUTE_FILL,t);var a=!0,o=!1,s=void 0;try{for(var l,c=n.childNodes[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var u=l.value;u.attributes&&this.setColorByOriginColor(e,t,u)}}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}}},{key:"move",value:function(e,t){this.left+=this.svgLayer.moveOffsetX*e,this.top+=this.svgLayer.moveOffsetY*t}},{key:"scale",value:function(e){this.scaleCommon*=e}},{key:"assign",value:function(e){this.svgLayer=e.svgLayer,this.left=e.left,this.top=e.top,this.scaleX=e.scaleX,this.scaleY=e.scaleY,this.scaleCommon=e.scaleCommon}},{key:"isChangableWidth",value:function(){return this.svgLayer.extendOffsetX>0}},{key:"isChangableHeight",value:function(){return this.svgLayer.extendOffsetY>0}},{key:"isKeepRatio",value:function(){return this.svgLayer.type!==m.e.NO_PATTERN||0===this.svgLayer.extendOffsetX&&0===this.svgLayer.extendOffsetY}},{key:"isExtend",value:function(){return this.svgLayer.type===m.e.NO_PATTERN&&this.svgLayer.extendOffsetX-this.svgLayer.width/this.svgData.width>.01||this.svgLayer.extendOffsetY-this.svgLayer.height/this.svgData.height>.01}},{key:"isPattern",value:function(){return this.svgLayer.type!==m.e.NO_PATTERN}}]),e}(),_=function(e){function t(e,n,i){return d()(this,t),o()(this,l()(t).call(this,e,n,i))}return u()(t,e),v()(t,[{key:"resize",value:function(e,t){var n=this.svgLayer.extendOffsetX*e/this.svgLayer.width;this.scaleX+=n,this.left-=n*this.svgLayer.left;var i=this.svgLayer.extendOffsetY*t/this.svgLayer.height;this.scaleY+=i,this.top-=i*this.svgLayer.top,this.move(e,t)}},{key:"getRenderBoxTranslate",value:function(e){return{cx:this.left/this.scaleX,cy:this.top/this.scaleY}}},{key:"getSvgScale",value:function(e,t){var n=t?this.scaleCommon:1;return{cx:this.scaleX*n*e,cy:this.scaleY*n*e}}},{key:"getRenderingCount",value:function(e){return{cx:1,cy:1}}},{key:"getClipRect",value:function(e){return null}},{key:"getFillRectSize",value:function(e){return{cx:this.svgData.width,cy:this.svgData.height}}}]),t}(T),I=function(e){function t(){var e,n;d()(this,t);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=o()(this,(e=l()(t)).call.apply(e,[this].concat(a))),g()(r()(n),"epsilon",Math.pow(10,-3)),n}return u()(t,e),v()(t,[{key:"getSvgScale",value:function(e,t){var n=t?this.scaleCommon:1;return{cx:n*e*this.svgWidth/this.svgWidth,cy:n*e*this.svgHeight/this.svgHeight}}},{key:"getRenderingCount",value:function(e){var t=this.getFillRectSize(e);return{cx:Math.abs(this.scaleX-1)<this.epsilon?1:Math.max(1,Math.ceil(t.cx*this.scaleX/Math.floor(t.cx))),cy:Math.abs(this.scaleY-1)<this.epsilon?1:Math.max(1,Math.ceil(t.cy*this.scaleY/Math.floor(t.cy)))}}}]),t}(T),C=function(e){function t(e,n,i){return d()(this,t),o()(this,l()(t).call(this,e,n,i))}return u()(t,e),v()(t,[{key:"getRenderBoxTranslate",value:function(e){return{cx:0,cy:0}}},{key:"getPatternTranslate",value:function(e){return{cx:0,cy:0}}}]),v()(t,[{key:"resize",value:function(e,t){this.scaleX+=e/this.svgWidth,this.scaleY+=t/this.svgHeight,this.move(e,t)}},{key:"getClipRect",value:function(e){return new E.a(0,0,this.svgWidth*this.scaleCommon*this.scaleX*e,this.svgHeight*this.scaleCommon*this.scaleY*e)}},{key:"getFillRectSize",value:function(e){return{cx:this.svgWidth,cy:this.svgHeight}}},{key:"getPatternRatio",value:function(){return t.SVG_PATTERN_RATIO}}]),t}(I);g()(C,"SVG_PATTERN_RATIO",1);var S=function(e){function t(e,n,i){return d()(this,t),o()(this,l()(t).call(this,e,n,i))}return u()(t,e),v()(t,[{key:"getRenderBoxTranslate",value:function(e){return{cx:this.svgLayer.left+this.left,cy:this.svgLayer.top+this.top}}},{key:"getPatternTranslate",value:function(e){return{cx:-this.svgLayer.left,cy:-this.svgLayer.top}}}]),v()(t,[{key:"resize",value:function(e,t){this.scaleX+=this.svgLayer.extendOffsetX*e/this.svgLayer.width,this.scaleY+=this.svgLayer.extendOffsetY*t/this.svgLayer.height,this.move(e,t)}},{key:"getClipRect",value:function(e){var t=this.scaleCommon*e,n=(this.left+this.svgLayer.left)*t,i=(this.top+this.svgLayer.top)*t,r=this.svgLayer.width*t,a=this.svgLayer.height*t,o=r*this.scaleX,s=a*this.scaleY;return new E.a(n,i,n+o,i+s)}},{key:"getFillRectSize",value:function(e){return{cx:this.svgLayer.width,cy:this.svgLayer.height}}},{key:"getPatternRatio",value:function(){return t.LAYER_PATTERN_RATIO}}]),t}(I);g()(S,"LAYER_PATTERN_RATIO",1);var w=function(){function e(){d()(this,e)}return v()(e,null,[{key:"createSVGLayer",value:function(e,t,n,i){switch(e){case m.e.NO_PATTERN:return new _(t,n,i);case m.e.SVG_PATTERN:return new C(t,n,i);case m.e.LAYER_PATTERN:return new S(t,n,i);default:throw new Error("undefined svgType. type: ".concat(e))}}}]),e}()},,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return C});var i=n(0),r=n.n(i),a=n(1),o=n.n(a),s=n(35),l=n.n(s),c=n(36),u=n.n(c),h=n(39),d=n.n(h),p=n(38),v=n.n(p),f=n(40),g=n.n(f),m=n(124),E=n(52),y=n(101),T=n(47),_=n(171),I=n(189),C=function(e){function t(e){var n;return l()(this,t),(n=d()(this,v()(t).call(this,e))).param=e,e.cmdtIdx&&(e.copyIdx=e.cmdtIdx),n}var n,i,a,s,c,h;return g()(t,e),u()(t,[{key:"getDesignRepo",value:function(){return y.a.from(this.param.repositoryType,!0)}},{key:"fetchDesignSheetXMLAsync",value:(h=o()(r.a.mark(function e(t,n){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.param.copyIdx>0)){e.next=4;break}return e.abrupt("return",this.fetchCopySheetData(t,n));case 4:return e.abrupt("return",this.fetchNewSheetData(t,n));case 5:case"end":return e.stop()}},e,this)})),function(e,t){return h.apply(this,arguments)})},{key:"fetchCopySheetData",value:(c=o()(r.a.mark(function e(n,i){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=n,e.next=4,t.getCopySheetXml(this.param.copyIdx,this.getDesignRepo());case 4:return e.t1=e.sent,e.next=7,e.t0.parseCopyXML.call(e.t0,e.t1);case 7:return e.abrupt("return",e.sent);case 10:if(e.prev=10,e.t2=e.catch(0),!(e.t2 instanceof T.UnicornError)){e.next=17;break}throw e.t2.gaData="".concat(this.param.copyIdx),e.t2;case 17:throw new T.UnicornError(I.a.COPY_SHEETS,"".concat(this.param.copyIdx));case 18:case"end":return e.stop()}},e,this,[[0,10]])})),function(e,t){return c.apply(this,arguments)})},{key:"fetchNewSheetData",value:(s=o()(r.a.mark(function e(t,n){var i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.param.repositoryType===E.a.BIZHOWS){e.next=2;break}throw Error("스마일캣 뉴모드 시트는 나중에 정리후 추가.");case 2:if(i=this.param.pkName.indexOf("THEME")>-1,e.prev=3,!i){e.next=10;break}return e.next=7,this.fetchThemeNewSheetsData(t,n);case 7:return e.abrupt("return",e.sent);case 10:return e.next=12,this.fetchTemplateNewSheetsData(t,n);case 12:return e.abrupt("return",e.sent);case 13:e.next=19;break;case 15:throw e.prev=15,e.t0=e.catch(3),e.t0.gaData=this.param.pkName,e.t0;case 19:case"end":return e.stop()}},e,this,[[3,15]])})),function(e,t){return s.apply(this,arguments)})},{key:"fetchThemeNewSheetsData",value:(a=o()(r.a.mark(function e(t,n){var i,a,o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=this.getDesignRepo(),a=i.getThemeMetaPath(this.param.pkName),e.next=5,T.ApiRequest.get(_.g,a);case 5:return o=e.sent,e.next=8,t.parseNewThemeXML(o.dataList,this.getDesignRepo());case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(0),new T.UnicornError(I.a.NEW_THEME_SHEETS);case 14:case"end":return e.stop()}},e,this,[[0,11]])})),function(e,t){return a.apply(this,arguments)})},{key:"fetchTemplateNewSheetsData",value:(i=o()(r.a.mark(function e(n,i){var a,o,s,l,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=this.getDesignRepo(),o=a.getTemplateMetaPath(this.param.pkName),e.next=5,T.ApiRequest.get(_.f,o);case 5:return s=e.sent,l=t.isLogoDesign(s.layoutTypeId,s.ratioId)?null:s.skinId,e.next=9,T.ApiRequest.getXml(a.getURL(s.layoutUrl));case 9:return c=e.sent,e.next=12,n.parseNewXML([{layout:c.data,skinId:l,ratioId:s.ratioId}]);case 12:return e.abrupt("return",e.sent);case 15:throw e.prev=15,e.t0=e.catch(0),new T.UnicornError(I.a.NEW_TEMPLATE_SHEETS);case 18:case"end":return e.stop()}},e,this,[[0,15]])})),function(e,t){return i.apply(this,arguments)})},{key:"getPageThumbnails",value:function(){return this.param.thumbnailPaths?this.param.thumbnailPaths:[]}},{key:"setDesignOtherData",value:function(e){var t=this;e.pages.forEach(function(e,n){e.reference={templateRepositoryType:t.designRepoType,templateKey:t.param.copyIdx>0?String(t.param.copyIdx):t.param.pkName,templatePageNo:n}})}}],[{key:"getCopySheetXml",value:(n=o()(r.a.mark(function e(t,n){var i,a,o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.getCommodityInstancePath(t),e.next=3,T.ApiRequest.get(_.c,i);case 3:return a=e.sent,e.next=6,T.ApiRequest.getXml(n.getURL(a.copySheetUrl));case 6:return o=e.sent,e.abrupt("return",o.data);case 8:case"end":return e.stop()}},e)})),function(e,t){return n.apply(this,arguments)})},{key:"isLogoDesign",value:function(e,t){return"LOGO"===e&&"1X1"===t}}]),t}(m.b)},,function(e,t,n){"use strict";n.d(t,"a",function(){return b});var i=n(73),r=n.n(i),a=n(0),o=n.n(a),s=n(1),l=n.n(s),c=n(35),u=n.n(c),h=n(36),d=n.n(h),p=n(37),v=n.n(p),f=n(41),g=n(43),m=n(3),E=n(57),y=n(47),T=n(265),_=n(176),I=n(61),C=n(95),S=n(12),w=n(42),k=n(174),R=n(86),L=n(120);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(n,!0).forEach(function(t){v()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var b=function(){function e(){u()(this,e),v()(this,"scrollLock",!1),v()(this,"state",{designIdx:0,history:[],currentPage:1,maximumPage:1})}var t,n,i,a;return d()(e,[{key:"setState",value:function(e,t){if(e){this.state=e;var n=!t;n&&(this.selectedHistory=null,t=this.state.history,this.updateButtons()),this.updateList(t,n)}}},{key:"updateList",value:function(e,t){var n=this;t&&(this.historyLogContainer.innerHTML=""),e.forEach(function(e){var t=n.renderRow(e);n.historyLogContainer.appendChild(t)})}},{key:"fetchNewList",value:(a=l()(o.a.mark(function t(){var n,i,r,a=arguments;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.length>0&&void 0!==a[0]?a[0]:0,i=e.PAGE_SIZE,r=m.CRM.get(g.a.DESIGN_HISTORY_LOG).replace("{designIdx}","".concat(this.state.designIdx||n,"?pageSize=").concat(i)),t.next=5,y.UnicornApiRequest.get(r);case 5:return t.abrupt("return",t.sent.data);case 6:case"end":return t.stop()}},t,this)})),function(){return a.apply(this,arguments)})},{key:"appendList",value:(i=l()(o.a.mark(function t(){var n,i,r,a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this.state.currentPage>=this.state.maximumPage)){t.next=2;break}return t.abrupt("return",{list:[],pagination:null});case 2:return n=e.PAGE_SIZE,i=this.state.currentPage+1,r=m.CRM.get(g.a.DESIGN_HISTORY_LOG).replace("{designIdx}","".concat(this.state.designIdx,"?page=").concat(i,"&pageSize=").concat(n,"&blockSize=").concat(n)),t.next=7,y.UnicornApiRequest.get(r);case 7:return a=t.sent.data,this.scrollLock=!1,t.abrupt("return",a);case 10:case"end":return t.stop()}},t,this)})),function(){return i.apply(this,arguments)})},{key:"render",value:function(e){if(!this.layer){this.layer=this.renderLayer();var t=L.a.getImageElementWithReplaceableThumbnail();e.appendChild(t),this.previewViewer=e,this.previewViewerFrame=t}return this.layer}},{key:"renderLayer",value:function(){var e=this,t=document.createElement("div");return t.id="designHistoryLayer",t.className=f.a.DESIGN_HISTORY_LAYER,t.appendChild(this.renderHeader()),t.appendChild(this.renderBody()),t.appendChild(this.renderFooter()),t.addEventListener("mouseleave",function(t){t.stopPropagation(),e.previewViewerFrame.style.visibility="hidden"}),t}},{key:"renderFooter",value:function(){var t=this,n=document.createElement("div");n.className=f.a.DESIGN_HISTORY_FOOTER;var i=this.btnCopy=document.createElement("button");i.className="button_copy",i.innerText="사본 만들기",i.addEventListener("click",l()(o.a.mark(function e(){var n,i,r,a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.selectedHistory,i=m.CRM.get(g.a.DESIGN_HISTORY_COPY_REVISION).replace("{designIdx}",String(t.state.designIdx)).replace("{revisionIdx}",String(n.designHistoryIdx)),e.prev=2,e.next=5,C.a.getDefaultSelectedTeamData();case 5:return r=e.sent,e.next=8,y.UnicornApiRequest.post(i,{data:r});case 8:a=e.sent.data,window.open("/design/".concat(btoa(String(a.idx)).replace(/=/g,""))),e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(2),T.a.open("권한이 없습니다.","확인",void 0,void 0),e.abrupt("return");case 16:case"end":return e.stop()}},e,null,[[2,12]])})));var r=this.btnRevert=document.createElement("button");return r.className="button_revert",r.innerText="작업 되돌리기",r.addEventListener("click",l()(o.a.mark(function n(){var i,r;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:i=t.selectedHistory,r=m.CRM.get(g.a.DESIGN_HISTORY_OVERWRITE_REVISION).replace("{designIdx}",String(t.state.designIdx)).replace("{revisionIdx}",String(i.designHistoryIdx)),_.a.open({title:"선택한 작업을 불러오시겠습니까?",subTitle:"",subTitleHTML:"현재 작업중인 문서가 ".concat(i.username,"님이 <span>").concat(e.formattedDate(i.createdDate),"\n                    </span>에 작업한 내용으로 변경됩니다."),txtConfirmBtn:"불러오기",confirmAction:function(){var e=l()(o.a.mark(function e(){var t;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.UnicornApiRequest.post(r,{contentType:"application/json"});case 3:return t=e.sent.data,e.next=6,I.b.load(t.idx);case 6:w.a.dispatch(new R.d),$("#btnDesignHistory").toggleClass("active"),e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(0),T.a.open("권한이 없습니다.","확인",void 0,void 0),e.abrupt("return");case 14:case"end":return e.stop()}},e,null,[[0,10]])}));return function(){return e.apply(this,arguments)}}()});case 3:case"end":return n.stop()}},n)}))),n.appendChild(r),this.showHistoryCopyButton&&n.appendChild(i),n}},{key:"renderHeader",value:function(){var t=document.createElement("div");t.className=f.a.DESIGN_HISTORY_HEADER;var n=document.createElement("h1");return n.innerText=m.CRM.get(g.a.DESIGN_HISTORY_HEADER),t.appendChild(n),e.btnClear=Object(S.setToolsIcon)(t,S.ToolsIcon.CLOSE,!0),t}},{key:"renderBody",value:function(){var e=this,t=new E.a(!1,!0,"399px");this.scrollElement=t;var n=t.contents;$(n).on("scroll",l()(o.a.mark(function t(){var i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n.scrollHeight-$(n).height()<n.scrollTop+1)){t.next=7;break}if(e.scrollLock||!(e.state.currentPage<e.state.maximumPage)){t.next=7;break}return e.scrollLock=!0,t.next=5,e.appendList();case 5:i=t.sent,e.setState(A({},e.state,{history:[].concat(r()(e.state.history),r()(i.list)),currentPage:e.state.currentPage+1}),i.list);case 7:case"end":return t.stop()}},t)})));var i=this.historyLogContainer=document.createElement("div");return i.className=f.a.DESIGN_HISTORY_LOG_CONTAINER,this.scrollElement.contents.appendChild(i),t.element}},{key:"renderRow",value:function(t){var n=this,i=document.createElement("div");i.className=f.a.DESIGN_HISTORY_ROW;var r=document.createElement("div");r.className=f.a.DESIGN_HISTORY_USER_PROFILE;var a=document.createElement("div");a.className=f.a.DESIGN_HISTORY_USER_PHOTO,Object(S.setToolsIcon)(a,S.ToolsIcon.USER_PROFILE);var o=document.createElement("div");o.className=f.a.DESIGN_HISTORY_USER_NAME,o.innerText="".concat(t.username),r.appendChild(a),r.appendChild(o);var s=document.createElement("div");s.className=f.a.DESIGN_HISTORY_DESIGN_LOG;var l=document.createElement("div");l.className=f.a.DESIGN_HISTORY_BOX,t.autoSaved||Object(S.setToolsIcon)(l,S.ToolsIcon.USER_CHECK);var c=document.createElement("span");return c.innerText=e.formattedDate(t.createdDate),l.appendChild(c),s.appendChild(l),w.a.getEnv().browser.isMobile()||i.addEventListener("mouseenter",function(e){n.setPreviewThumbnail(t)}),i.addEventListener("click",function(e){w.a.getEnv().browser.isMobile()&&n.setPreviewThumbnail(t),n.toggleHistory(i,t)}),i.addEventListener("mouseleave",function(e){e.stopPropagation(),n.previewViewerFrame.style.visibility="hidden"}),i.appendChild(r),i.appendChild(s),i}},{key:"setPreviewThumbnail",value:function(e){}},{key:"toggleHistory",value:function(e,t){this.selectedHistory!==t?(this.selectedHistory=t,e.parentElement.childNodes.forEach(function(e){return e.classList.remove(f.a.ACTIVE)}),e.classList.add(f.a.ACTIVE)):(this.selectedHistory=null,e.classList.remove(f.a.ACTIVE)),this.updateButtons()}},{key:"updateButtons",value:function(){this.selectedHistory?(this.btnCopy.classList.add(f.a.ACTIVE),this.btnRevert.classList.add(f.a.ACTIVE)):(this.btnCopy.classList.remove(f.a.ACTIVE),this.btnRevert.classList.remove(f.a.ACTIVE))}}],[{key:"addCloseEventListener",value:function(t){e.btnClear&&e.btnClear.addEventListener("click",function(e){k.a.scrollOn(),t.classList.remove(f.a.ACTIVE),e.stopPropagation()})}},{key:"render",value:function(t,n){return e.instance.showHistoryCopyButton=n,e.instance.render(t)}},{key:"setDesignIdx",value:(n=l()(o.a.mark(function t(n){var i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.instance.fetchNewList(n);case 2:i=t.sent,e.instance.setState(A({},e.instance.state,{designIdx:n,history:i.list,currentPage:1,maximumPage:i.pagination.totalPage}));case 4:case"end":return t.stop()}},t)})),function(e){return n.apply(this,arguments)})},{key:"formattedDate",value:function(e){var t=new Date(e),n=String(t.getFullYear()),i=String(t.getMonth()).length>1?"".concat(t.getMonth()+1):"0".concat(t.getMonth()+1),r=String(t.getDate()).length>1?"".concat(t.getDate()):"0".concat(t.getDate()),a=String(t.getHours()).length>1?"".concat(t.getHours()):"0".concat(t.getHours()),o=String(t.getMinutes()).length>1?"".concat(t.getMinutes()):"0".concat(t.getMinutes());return"".concat(n,".").concat(i,".").concat(r," ").concat(a,":").concat(o)}},{key:"formattedDateWithSecond",value:function(e){var t=new Date(e),n=String(t.getSeconds()).length>1?"".concat(t.getSeconds()):"0".concat(t.getSeconds()),i=this.formattedDate(e);return"".concat(i,":").concat(n)}},{key:"getHistoryLogList",value:(t=l()(o.a.mark(function e(t){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.instance.fetchNewList(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})}]),e}();v()(b,"instance",new b),v()(b,"PAGE_SIZE",10)},,,function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n(35),r=n.n(i),a=n(36),o=n.n(a),s=n(37),l=n.n(s),c=n(41),u=function(){function e(){r()(this,e),l()(this,"attachedElement",null),this.layerRoot=document.createElement("div"),this.layerRoot.className=c.a.SCREEN_LAYER,this.addAllEventListeners()}return o()(e,[{key:"addAllEventListeners",value:function(){$(this.layerRoot).on("click",function(t){if(t.preventDefault(),e.instance.isDddotInfoLayer){var n=$(".".concat(c.a.DDDOT_INFO_LAYER));if(n.length&&n[0].contains(t.target))return}e.close()})}},{key:"attach",value:function(t,n,i){if(null===this.attachedElement){this.attachedElement=t,this.attachedElement.classList.add(c.a.HIDDEN),this.layerRoot.appendChild(this.attachedElement),document.body.appendChild(this.layerRoot);var r=e.calculatePos(t,n,i);t.style.top="".concat(r.top,"px"),t.style.left="".concat(r.left,"px"),this.attachedElement.classList.remove(c.a.HIDDEN)}}},{key:"detach",value:function(){null!==this.attachedElement&&(this.layerRoot.removeChild(this.attachedElement),this.attachedElement=null),this.layerRoot.parentNode&&this.layerRoot.parentNode.removeChild(this.layerRoot)}}],[{key:"open",value:function(t,n,i,r){e.instance.attach(t,n,i),e.instance.isDddotInfoLayer=r}},{key:"close",value:function(){e.instance.detach()}},{key:"calculatePos",value:function(e,t,n){return{top:$(window).height()<e.offsetHeight+n.top+$(t).height()?n.top-e.offsetHeight:n.top,left:n.left+$(t).width()+10}}}]),e}();l()(u,"instance",new u)},,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n(35),r=n.n(i),a=n(36),o=n.n(a),s=function(){function e(){r()(this,e)}return o()(e,null,[{key:"getItemIdList",value:function(e){var t=[];return e.forEach(function(e){t.push(e.tbpeId)}),t}},{key:"getNoEditItemIdList",value:function(e){var t=[];return e.forEach(function(e){e.isEditMode||t.push(e.tbpeId)}),t}}]),e}()},,,function(e,t,n){"use strict";n.d(t,"a",function(){return V});var i,r,a=n(0),o=n.n(a),s=n(1),l=n.n(s),c=n(35),u=n.n(c),h=n(39),d=n.n(h),p=n(38),v=n.n(p),f=n(44),g=n.n(f),m=n(36),E=n.n(m),y=n(40),T=n.n(y),_=n(37),I=n.n(_),C=n(80),S=n(41),w=n(3),k=n(42),R=n(45),L=n(133),O=n(82),A=n(49),b=n(327),P=n(64),N=n(12),x=n(108),M=n(89),D=n(475),B=n(62),U=n(65),G=n(150),F=n(50),H=n(75),V=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return u()(this,t),n=d()(this,v()(t).call(this,"div",[S.a.COLOR_CONTROL_ITEM])),I()(g()(n),"moveColorSpectrumSelector",!1),I()(g()(n),"moveColorBarSelector",!1),I()(g()(n),"usedColors",new Set),I()(g()(n),"sameColorSetInfos",[]),I()(g()(n),"numOfSelectedColors",0),I()(g()(n),"backupColorSetInfos",[]),I()(g()(n),"isContinuousSameColorChange",!1),I()(g()(n),"spoidDownHandler",function(e){e.stopPropagation(),n.endSpoidMode(n.spoidColor)}),I()(g()(n),"keyDownHandler",function(e){27===e.keyCode&&(k.a.isSpoidMode()?n.endSpoidMode():n.colorControlPopup.parentElement&&n.closeColorControl())}),I()(g()(n),"resizeHandler",function(){k.a.getEnv().browser.isMobile()?(k.a.isMobileMode()?n.appendHexAreaTo(n.headerRight):n.appendHexAreaTo(n.statusRight),n.currMode===i.DIRECT_MODE&&n.initColorSelectAreaUI()):n.closeColorControl()}),I()(g()(n),"mouseDownHandler",function(e){k.a.isSpoidMode()&&(e.stopPropagation(),n.endSpoidMode())}),I()(g()(n),"colorBarDownHandler",function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t&&e.preventDefault(),n.onStartChangeColor&&n.onStartChangeColor();var i=t?e.touches[0]:e;n.setColorBarPoint(i),n.moveColorBarSelector=!0}),I()(g()(n),"colorSpectrumDownHandler",function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t&&e.preventDefault(),n.onStartChangeColor&&n.onStartChangeColor();var i=t?e.touches[0]:e;n.setColorSpectrumPoint(i),n.moveColorSpectrumSelector=!0}),I()(g()(n),"colorSelectorsMoveHandler",function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=t?e.touches[0]:e;n.moveColorBarSelector&&n.setColorBarPoint(i),n.moveColorSpectrumSelector&&n.setColorSpectrumPoint(i)}),I()(g()(n),"colorSelectorsUpHandler",function(){n.moveColorSpectrumSelector=!1,n.moveColorBarSelector=!1,n.onFinishChangeColor&&n.onFinishChangeColor()}),n.listener=e,n.useTransparent=r,n.useChangeSameColors=a,n.onStartChangeColor=o,n.onFinishChangeColor=s,n.wrap.tabIndex=-1,n.makeColorContainer(),n.addEventListener(),n}var n;return T()(t,e),E()(t,[{key:"getPopup",value:function(){return this.colorControlPopup}}]),E()(t,[{key:"appendHexAreaTo",value:function(e){if(e){this.hexArea||(this.hexArea=this.makeHexArea());var t=this.hexArea.parentElement;if(t){if(t===e)return;t.removeChild(this.hexArea)}e.appendChild(this.hexArea)}}},{key:"makePaletteSet",value:function(e){var t=this;if(!e)return null;var n=document.createElement("div");if(n.classList.add(S.a.PALETTE_SET),e.name){var a=document.createElement("div");a.classList.add(S.a.PALETTE_HEADER),n.appendChild(a);var o=document.createElement("div");if(o.classList.add(S.a.PALETTE_NAME),o.innerText=e.name,a.appendChild(o),e.idx&&(e.canAddColor||e.canDeleteColor))Object(N.setToolsIcon)(a,N.ToolsIcon.GREATER_THAN,!0).addEventListener("click",function(){t.selectedPaletteSet=n,t.selectedPaletteIdx=e.idx,t.setCustomMode()})}if(e.containsTransparent){var s=document.createElement("div");s.classList.add(S.a.PALETTE,S.a.TRANSPARENT_PALETTE),n.appendChild(s);var l=document.createElement("div");l.classList.add(S.a.COLOR_CHIP,S.a.TRANSPARENT_CHIP),s.appendChild(l);var c=document.createElement("div");c.classList.add(S.a.TRANSPARENT_TEXT),c.innerText=r.TRANSPARENT,s.appendChild(c);var u=document.createElement("div");u.classList.add(S.a.TRANSPARENT_AREA),s.appendChild(u),$([l,u]).on("click",function(){t.setColor("#00000000")})}var h=document.createElement("div");if(h.classList.add(S.a.PALETTE),n.appendChild(h),e.canAddColor){var d=document.createElement("div");d.classList.add(S.a.COLOR_CHIP,S.a.ADD_COLOR),h.appendChild(d),Object(N.setToolsIcon)(d,N.ToolsIcon.ADD),d.addEventListener("click",function(){if(t.currMode!==i.EDIT_MODE&&(t.setDirectMode(),t.initColorSelectAreaUI(),t.prevMode===i.CUSTOM_MODE&&(t.currColor&&t.isTransparent(t.currColor)||!t.currColor&&t.prevColor&&t.isTransparent(t.prevColor)))){t.updateColorDisplayUI("#000000FF"),t.updateHexAreaUI({value:"#000000FF"})}})}return e.colors.forEach(function(n){var r=document.createElement("div");r.classList.add(S.a.COLOR_CHIP),r.setAttribute("style","background-color:"+n.substr(0,7)),r.addEventListener("click",function(){t.currMode===i.EDIT_MODE?(r.classList.contains(S.a.ACTIVE)?(r.classList.remove(S.a.ACTIVE),t.numOfSelectedColors-=1):(r.classList.add(S.a.ACTIVE),t.numOfSelectedColors+=1),t.txtNumberToDelete.innerText="".concat(t.numOfSelectedColors),t.numOfSelectedColors<=0?t.wrap.classList.remove(S.a.ACTIVE):t.wrap.classList.add(S.a.ACTIVE)):t.setColor(n)}),h.appendChild(r),e.canDeleteColor&&Object(N.setToolsIcon)(r,N.ToolsIcon.CHECK)}),n}},{key:"makeHeader",value:function(){this.header=document.createElement("div"),this.header.classList.add(S.a.COLOR_CONTROL_HEADER),this.wrap.appendChild(this.header);var e=document.createElement("span");this.header.appendChild(e),this.headerRight=document.createElement("span"),this.header.appendChild(this.headerRight),this.txtTitle=document.createElement("span"),this.txtTitle.classList.add(S.a.COLOR_CONTROL_TITLE),e.appendChild(this.txtTitle),k.a.isMobileMode()&&(this.hexArea=this.makeHexArea(),this.headerRight.appendChild(this.hexArea)),this.txtNumberToDelete=document.createElement("span"),this.txtNumberToDelete.classList.add(S.a.COLOR_CONTROL_NUMBER_TO_DELTE),this.headerRight.appendChild(this.txtNumberToDelete),this.txtQuantityToDelete=document.createElement("span"),this.txtQuantityToDelete.classList.add(S.a.COLOR_CONTROL_QUANTITY_TO_DELETE),this.headerRight.appendChild(this.txtQuantityToDelete),this.btnBack=Object(N.setToolsIcon)(e,N.ToolsIcon.GREATER_THAN),this.btnBack.classList.add(S.a.COLOR_CONTROL_BACK),this.btnMore=Object(N.setToolsIcon)(this.headerRight,N.ToolsIcon.MORE_VERT),this.btnMore.classList.add(S.a.COLOR_CONTROL_MORE),this.btnClose=Object(N.setToolsIcon)(this.headerRight,N.ToolsIcon.CLOSE),this.btnClose.classList.add(S.a.COLOR_CONTROL_CLOSE)}},{key:"makeBody",value:function(){this.body=document.createElement("div"),this.body.classList.add(S.a.COLOR_CONTROL_BODY),this.wrap.appendChild(this.body);var e=this.makeScrollElement();this.body.appendChild(e);var n=e.getElementsByClassName(S.a.SCROLL_CONTENT)[0];this.paletteWrapper=document.createElement("div"),this.paletteWrapper.classList.add(S.a.PALETTE_WRAPPER),n.appendChild(this.paletteWrapper),this.usedColorsArea=document.createElement("div"),this.usedColorsArea.classList.add(S.a.USED_COLORS_AREA),this.paletteWrapper.appendChild(this.usedColorsArea),this.basicPaletteArea=document.createElement("div"),this.basicPaletteArea.classList.add(S.a.BASIC_PALETTE_AREA),this.paletteWrapper.appendChild(this.basicPaletteArea);var i=this.makePaletteSet({name:r.BASIC_PALETTE,containsTransparent:this.useTransparent,colors:t.BASE_COLOR_CHART});this.basicPaletteArea.appendChild(i),this.userPaletteArea=document.createElement("div"),this.userPaletteArea.classList.add(S.a.USER_PALETTE_AREA),this.paletteWrapper.appendChild(this.userPaletteArea),this.pickerWrapper=document.createElement("div"),this.pickerWrapper.classList.add(S.a.PICKER_WRAPPER),n.appendChild(this.pickerWrapper),this.colorSelectArea=this.makeColorSelectArea(),this.pickerWrapper.appendChild(this.colorSelectArea),this.userPaletteWrapper=document.createElement("div"),this.userPaletteWrapper.classList.add(S.a.USER_PALETTE_WRAPPER),n.appendChild(this.userPaletteWrapper)}},{key:"makeFooter",value:function(){var e=this;this.footer=document.createElement("div"),this.footer.classList.add(S.a.COLOR_CONTROL_FOOTER),this.wrap.appendChild(this.footer);var n=this.makeColorStatus();this.footer.appendChild(n);var i=document.createElement("div");i.classList.add(S.a.DELETE_COLOR_BUTTONS),this.footer.appendChild(i);var a=document.createElement("span");a.classList.add(S.a.CANCEL_TO_DELETE),a.innerText=r.CANCEL,i.appendChild(a),a.addEventListener("click",function(){Array.from(e.selectedPaletteSet.getElementsByClassName(S.a.COLOR_CHIP)).forEach(function(e){e.classList.remove(S.a.ACTIVE)}),e.numOfSelectedColors=0,e.wrap.classList.remove(S.a.ACTIVE),e.setCustomMode()});var o=document.createElement("span");o.classList.add(S.a.COMPLETE_TO_DELETE),o.innerText=r.COMPLETE,i.appendChild(o),o.addEventListener("click",function(){if(!(e.numOfSelectedColors<=0)){var n=[];Array.from(e.userPaletteWrapper.getElementsByClassName(S.a.COLOR_CHIP)).forEach(function(t){if(t.classList.contains(S.a.ACTIVE)){var i=e.toHexString(t.style.backgroundColor).substr(0,7);n.push(i)}}),b.a.removeColors({idx:e.selectedPaletteIdx,colors:n}).then(function(){e.updateSelectedUserPalette()}).catch(function(){alert(t.ERROR_MSG)}),e.numOfSelectedColors=0,e.wrap.classList.remove(S.a.ACTIVE),e.setCustomMode()}})}},{key:"setDefaultMode",value:function(){this.prevMode=this.currMode,this.currMode=i.DEFAULT_MODE,this.wrap.classList.add(S.a.DEFAULT_MODE),this.wrap.classList.remove(S.a.DIRECT_MODE),this.wrap.classList.remove(S.a.CUSTOM_MODE),this.wrap.classList.remove(S.a.EDIT_MODE),this.txtTitle.innerText=r.COLOR}},{key:"setDirectMode",value:function(){this.prevMode=this.currMode,this.currMode=i.DIRECT_MODE,this.wrap.classList.remove(S.a.DEFAULT_MODE),this.wrap.classList.add(S.a.DIRECT_MODE),this.wrap.classList.remove(S.a.CUSTOM_MODE),this.wrap.classList.remove(S.a.EDIT_MODE),this.txtTitle.innerText=r.SET_DIRECTLY}},{key:"setCustomMode",value:function(){this.selectedPaletteSet.classList.add(S.a.ACTIVE);var e=this.selectedPaletteSet.getElementsByClassName(S.a.PALETTE_NAME)[0].innerText;this.txtTitle.innerText=e,this.prevMode=this.currMode,this.currMode=i.CUSTOM_MODE,this.wrap.classList.remove(S.a.DEFAULT_MODE),this.wrap.classList.remove(S.a.DIRECT_MODE),this.wrap.classList.add(S.a.CUSTOM_MODE),this.wrap.classList.remove(S.a.EDIT_MODE),this.updateUserPaletteWrapperUI()}},{key:"setEditMode",value:function(){this.prevMode=this.currMode,this.currMode=i.EDIT_MODE,this.wrap.classList.remove(S.a.DEFAULT_MODE),this.wrap.classList.remove(S.a.DIRECT_MODE),this.wrap.classList.remove(S.a.CUSTOM_MODE),this.wrap.classList.add(S.a.EDIT_MODE),this.txtTitle.innerText=r.SELECT_COLORS_TO_DELETE,this.txtNumberToDelete.innerText="".concat(this.numOfSelectedColors),this.txtQuantityToDelete.innerText=r.QUANTITY}},{key:"makeColorContainer",value:function(){this.colorControlPopup=document.createElement("div"),this.colorControlPopup.classList.add(S.a.COLOR_CONTROL_POPUP),this.makeHeader(),this.makeBody(),this.makeFooter()}},{key:"isTransparent",value:function(e){return!e||9===e.length&&"00"===e.substr(e.length-2,2)}},{key:"toHexString",value:function(e){if(void 0===e)return null;if("#"===e.substr(0,1))return 9===e.length?e.toUpperCase():7===e.length?"".concat(e,"FF").toUpperCase():4===e.length?"".concat(e[0]).concat(e[1]).concat(e[1]).concat(e[2]).concat(e[2]).concat(e[3]).concat(e[3],"FF").toUpperCase():null;if("rgba"===e.substr(0,4)){var t=/(.*?)rgba\((\d+), (\d+), (\d+), (\d+)\)/.exec(e),n=parseInt(t[2]),i=parseInt(t[3]),r=parseInt(t[4]),a=255*parseInt(t[5])|r<<8|i<<16|n<<24;return t[1]+"#".concat(w.StringUtil.padStart(a.toString(16),8,"0").toUpperCase())}if("rgb"===e.substr(0,3)){var o=/(.*?)rgb\((\d+), (\d+), (\d+)\)/.exec(e),s=parseInt(o[2]),l=parseInt(o[3]),c=parseInt(o[4])|l<<8|s<<16;return o[1]+"#".concat(w.StringUtil.padStart(c.toString(16),6,"0").toUpperCase(),"FF")}return 8===e.length?"#".concat(e):6===e.length?"#".concat(e,"FF"):0===e.length||"transparent"===e||"none"===e?"#00000000":null}},{key:"setColorToSpectrumRGB",value:function(){var e=this.getSelectedRGB();this.setColor("rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")"))}},{key:"setColorSpectrumPoint",value:function(e){var t=this.colorSpectrumSelector.offsetWidth/2,n=this.colorSpectrum.offsetWidth;n?n+=2-2*t:n=240;var r,a,o=this.colorSpectrum.offsetHeight;if(o?o+=2-2*t:o=184,e?((r=e.clientX-this.colorSpectrumLeft-t)<0?r=0:r>n&&(r=n),(a=e.clientY-this.colorSpectrumTop-t)<0?a=0:a>o&&(a=o)):(r=n,a=0),this.colorSpectrumXRatio=r/n,this.colorSpectrumYRatio=a/o,this.colorSpectrumSelector.style.left="".concat((r+this.colorSpectrum.offsetLeft).toString(),"px"),this.colorSpectrumSelector.style.top="".concat((a+this.colorSpectrum.offsetTop).toString(),"px"),e)if(this.prevMode===i.DEFAULT_MODE)this.setColorToSpectrumRGB();else{var s=this.getSelectedRGB(),l=this.toHexString("rgb(".concat(s.r,", ").concat(s.g,", ").concat(s.b,")"));this.updateColorDisplayUI(l),this.updateHexAreaUI({value:l})}}},{key:"updateColorBarPoint",value:function(e){var t,n=[(t={r:e.r,g:e.g,b:e.b}).r,t.g,t.b].sort(function(e,t){return e-t}),i=-1;n[2]-n[0]>0&&(i=Math.round(255*(n[1]-n[0])/(n[2]-n[0]))),t.r=t.r===n[2]?255:t.r===n[0]?0:i,t.g=i>=0&&t.g===n[2]?255:t.g===n[0]?0:i,t.b=i>=0&&t.b===n[2]?255:t.b===n[0]?0:i;var r=this.findColorBarPoint(t);this.colorBarSelector.style.left="".concat((r+this.colorBar.offsetLeft).toString(),"px"),this.colorBarSelector.style.top="".concat(this.colorBar.offsetTop.toString(),"px"),this.updateColorSpectrumUI(t.r,t.g,t.b),this.colorBarColor={r:t.r,g:t.g,b:t.b}}},{key:"updateColorSpectrumPoint",value:function(e){var t=this.colorSpectrumSelector.offsetWidth/2,n=this.colorSpectrum.offsetWidth-2*t+2,i=this.colorSpectrum.offsetHeight-2*t+2,r=Math.max(e.r,e.g,e.b),a=Math.min(e.r,e.g,e.b),o=A.b.getValidNumber(n-(0===r?0:a/r)*n,0,n),s=A.b.getValidNumber(i-r/255*i,0,i);this.colorSpectrumXRatio=o/n,this.colorSpectrumYRatio=s/i,this.colorSpectrumSelector.style.left="".concat((o+this.colorSpectrum.offsetLeft).toString(),"px"),this.colorSpectrumSelector.style.top="".concat((s+this.colorSpectrum.offsetTop).toString(),"px")}},{key:"findColorBarPoint",value:function(e){var t,n,i=this.colorBarSelector.offsetWidth/2,r=this.colorBar.offsetWidth-2*i,a=r/6;255===e.r?e.g<e.b?(t=5,n=255-e.b):(t=0,n=e.g):255===e.g?e.r<e.b?(t=2,n=e.b):(t=1,n=255-e.r):255===e.b?e.r<e.g?(t=3,n=255-e.g):(t=4,n=e.r):(t=0,n=0);var o=t*a+n/255*a;return A.b.getValidNumber(o,0,r)}},{key:"setColorBarPoint",value:function(e){var n,r=this.colorBarSelector.offsetWidth/2,a=this.colorBar.offsetWidth;a?a-=2*r:a=240,e?(n=e.clientX-this.colorBarLeft-r)<0?n=0:n>a&&(n=a):n=0;var o=a/6,s=Math.floor(n/o),l=n/o-s,c=t.COLOR_BAR_POINTS[s%6].r+Math.round((t.COLOR_BAR_POINTS[(s+1)%6].r-t.COLOR_BAR_POINTS[s%6].r)*l),u=t.COLOR_BAR_POINTS[s%6].g+Math.round((t.COLOR_BAR_POINTS[(s+1)%6].g-t.COLOR_BAR_POINTS[s%6].g)*l),h=t.COLOR_BAR_POINTS[s%6].b+Math.round((t.COLOR_BAR_POINTS[(s+1)%6].b-t.COLOR_BAR_POINTS[s%6].b)*l);if(this.colorBarSelector.style.left="".concat((n+this.colorBar.offsetLeft).toString(),"px"),this.colorBarSelector.style.top="".concat(this.colorBar.offsetTop.toString(),"px"),this.updateColorSpectrumUI(c,u,h),this.colorBarColor={r:c,g:u,b:h},e)if(this.prevMode===i.DEFAULT_MODE)this.setColorToSpectrumRGB();else{var d=this.getSelectedRGB(),p=this.toHexString("rgb(".concat(d.r,", ").concat(d.g,", ").concat(d.b,")"));this.updateColorDisplayUI(p),this.updateHexAreaUI({value:p})}}},{key:"getSelectedRGB",value:function(){return isNaN(this.colorSpectrumXRatio)&&(this.colorSpectrumXRatio=0),isNaN(this.colorSpectrumYRatio)&&(this.colorSpectrumYRatio=0),{r:Math.round((255+(this.colorBarColor.r-255)*this.colorSpectrumXRatio)*(1-this.colorSpectrumYRatio)),g:Math.round((255+(this.colorBarColor.g-255)*this.colorSpectrumXRatio)*(1-this.colorSpectrumYRatio)),b:Math.round((255+(this.colorBarColor.b-255)*this.colorSpectrumXRatio)*(1-this.colorSpectrumYRatio))}}},{key:"makeScrollElement",value:function(){var e=this,t=document.createElement("div");t.classList.add(S.a.SCROLL_WRAP),this.scrollContent=document.createElement("div"),this.scrollContent.classList.add(S.a.SCROLL_CONTENT),t.appendChild(this.scrollContent);var n=document.createElement("div");n.classList.add(S.a.SCROLL_BAR_WRAP),t.appendChild(n),this.scrollBar=document.createElement("div"),this.scrollBar.classList.add(S.a.SCROLL_BAR),n.appendChild(this.scrollBar),this.scrollContent.addEventListener("scroll",function(){var t=e.scrollContent.clientHeight/e.scrollContent.scrollHeight,n=e.scrollContent.clientHeight*(1-t),i=e.scrollContent.scrollTop/(e.scrollContent.scrollHeight-e.scrollContent.clientHeight);e.scrollBar.style.transform="translateY(".concat(n*i,"px)")});var i=0,r=function(t){var n=t.clientY-i;i=t.clientY,e.moveScrollY(n)},a=function e(){document.removeEventListener("mouseup",e),document.removeEventListener("mousemove",r)};return this.scrollBar.addEventListener("mousedown",function(e){document.addEventListener("mouseup",a),document.addEventListener("mousemove",r),i=e.clientY}),t}},{key:"initColorSelectAreaUI",value:function(){var e=this.colorBar.width,n=this.colorBar.height,i=this.colorBar.getContext("2d"),r=i.createLinearGradient(0,0,e,0);r.addColorStop(0,"#ff0000"),r.addColorStop(.166,"#ffff00"),r.addColorStop(.333,"#00ff00"),r.addColorStop(.5,"#00ffff"),r.addColorStop(.666,"#0000ff"),r.addColorStop(.834,"#ff00ff"),r.addColorStop(1,"#ff0000"),i.fillStyle=r,i.fillRect(0,0,e,n),this.colorBarLeft=$(this.colorBar).offset().left;var a=$(this.colorSpectrum).offset();this.colorSpectrumLeft=a.left,this.colorSpectrumTop=a.top,this.currColor&&t.hexToRgb(this.currColor)?this.updateColorSelectAreaUI(this.currColor,!0):this.prevColor&&t.hexToRgb(this.prevColor)?this.updateColorSelectAreaUI(this.prevColor,!0):(this.setColorBarPoint(),this.setColorSpectrumPoint())}},{key:"addEventListenerColorControlUI",value:function(){var e=this.colorSpectrum,t=this.colorSpectrumSelector,n=this.colorBar,i=this.colorBarSelector,r="mousemove touchmove",a="mouseup touchend";$([e,t]).on("mousedown touchstart",function(n){!function(n){k.a.instance.mouseAction.mode=U.a.MODE_DOWN_CHANGE_VALUE,o.colorSpectrumDownHandler(n,"touchstart"===n.type),$([e,t]).on(r,s),$([e,t]).on(a,c),$(t).on(a,o.colorSelectorsUpHandler),$(document.body).on(a,c)}(n)}),$([n,i]).on("mousedown touchstart",function(e){!function(e){k.a.instance.mouseAction.mode=U.a.MODE_DOWN_CHANGE_VALUE,o.colorBarDownHandler(e,"touchstart"===e.type),$([n,i]).on(r,l),$([n,i]).on(a,c),$(i).on(a,o.colorSelectorsUpHandler),$(document.body).on(a,c)}(e)});var o=this;function s(e){k.a.instance.mouseAction.mode=U.a.MODE_MOVE_CHANGE_VALUE,o.colorSpectrumDownHandler(e,"touchmove"===e.type)}function l(e){k.a.instance.mouseAction.mode=U.a.MODE_MOVE_CHANGE_VALUE,o.colorBarDownHandler(e,"touchmove"===e.type)}function c(){k.a.instance.mouseAction.mode=U.a.MODE_NONE,$([e,t,n,i]).off("mousemove touchmove mouseup touchend"),$(document.body).off(a,c)}}},{key:"makeColorSelectArea",value:function(){this.moveColorSpectrumSelector=!1,this.moveColorBarSelector=!1;var e=document.createElement("div"),t=this.colorSpectrum=document.createElement("div");t.classList.add(S.a.COLOR_SPECTRUM),e.appendChild(t);var n=document.createElement("div");n.classList.add(S.a.WHITE_SPECTRUM),this.colorSpectrum.appendChild(n);var i=document.createElement("div");i.classList.add(S.a.BLACK_SPECTRUM),n.appendChild(i);var r=document.createElement("div");r.classList.add(S.a.BORDER_SPECTRUM),i.appendChild(r);var a=this.colorSpectrumSelector=document.createElement("div");a.classList.add(S.a.COLOR_SELECTOR),a.classList.add(S.a.COLOR_SPECTRUM_SELECTOR),e.appendChild(a);var o=this.colorBar=document.createElement("canvas");o.classList.add(S.a.COLOR_BAR),e.appendChild(o);var s=this.colorBarSelector=document.createElement("div");return s.classList.add(S.a.COLOR_SELECTOR),s.classList.add(S.a.COLOR_BAR_SELECTOR),e.appendChild(s),this.addEventListenerColorControlUI(),e}},{key:"makeColorStatus",value:function(){var e=this,t=document.createElement("div");return t.classList.add(S.a.COLOR_STATUS),this.colorDisplay=document.createElement("span"),this.colorDisplay.classList.add(S.a.COLOR_DISPLAY),t.appendChild(this.colorDisplay),this.prevColorChip=document.createElement("span"),this.prevColorChip.classList.add(S.a.COLOR_CHIP),this.colorDisplay.appendChild(this.prevColorChip),this.prevColorChip.addEventListener("click",function(){var t=e.toHexString(e.prevColorChip.style.backgroundColor);e.prevMode===i.CUSTOM_MODE&&e.currMode===i.DIRECT_MODE?e.isTransparent(t)||(e.updateColorSelectAreaUI(t),e.updateColorDisplayUI(t),e.updateHexAreaUI({value:t})):e.setColor(t)}),this.statusRight=document.createElement("span"),t.appendChild(this.statusRight),k.a.getEnv().browser.isMobile()||(this.spoidMode=Object(N.setToolsIcon)(this.statusRight,N.ToolsIcon.EYEDROPPER,!0)),k.a.isMobileMode()||(this.hexArea=this.makeHexArea(),this.statusRight.appendChild(this.hexArea)),t}},{key:"makeHexArea",value:function(){var e=this,n=document.createElement("span");return n.classList.add(S.a.HEX_AREA),this.hexChip=document.createElement("span"),this.hexChip.classList.add(S.a.COLOR_CHIP),n.appendChild(this.hexChip),this.hexInput=document.createElement("input"),this.hexInput.type="text",this.hexInput.classList.add(S.a.HEX_INPUT),n.appendChild(this.hexInput),this.hexInput.addEventListener("keypress",function(t){var n=e.hexInput.value.length;if(13===t.keyCode&&n>1&&n<8){var r=e.hexInput.value,a=r[1];if(4===n&&a===r[2]&&a===r[3])r=r+a+a+a;else for(var o=0;o<7-n;o++)r+="0";var s=r.toUpperCase();e.prevMode!==i.CUSTOM_MODE||e.currMode!==i.DIRECT_MODE?e.setColor(s):(e.updateHexAreaUI({value:r}),e.updateColorSelectAreaUI(s),e.updateColorDisplayUI(s)),e.hexInput.value=s,e.hexInput.blur()}}),this.hexInput.addEventListener("input",function(){var n="#",r=/[0-9a-f]/i,a=!0,o=!1,s=void 0;try{for(var l,c=e.hexInput.value[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var u=l.value;if(r.test(u)?n+=u:t.KEY_MAP.has(u)&&(n+=t.KEY_MAP.get(u)),7===n.length){(n=n.toUpperCase())!==e.currColor&&(e.prevMode!==i.CUSTOM_MODE||e.currMode!==i.DIRECT_MODE?e.setColor(n):(e.updateHexAreaUI({value:n}),e.updateColorSelectAreaUI(n),e.updateColorDisplayUI(n)));break}}}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}e.hexInput.value=n}),n}},{key:"openPaletteMenu",value:function(){var e=this;if(!this.paletteMenu){this.paletteMenu=document.createElement("div"),this.paletteMenu.classList.add(S.a.PALETTE_MENU),this.btnMore.appendChild(this.paletteMenu),this.paletteMenu.addEventListener("click",function(e){e.stopPropagation()});var n=document.createElement("div");n.className="palette_menu_wrap",this.paletteMenu.appendChild(n);var a=document.createElement("div");n.appendChild(a);var o=document.createElement("div");a.appendChild(o),Object(N.setToolsIcon)(o,N.ToolsIcon.ADD);var s=document.createElement("span");s.innerText=r.ADD_COLOR,o.appendChild(s),o.addEventListener("click",function(){if(e.closePaletteMenu(),e.setDirectMode(),e.initColorSelectAreaUI(),e.prevMode===i.CUSTOM_MODE&&(e.currColor&&e.isTransparent(e.currColor)||!e.currColor&&e.prevColor&&e.isTransparent(e.prevColor))){e.updateColorDisplayUI("#000000FF"),e.updateHexAreaUI({value:"#000000FF"})}});var l=document.createElement("div");a.appendChild(l),Object(N.setToolsIcon)(l,N.ToolsIcon.BAR);var c=document.createElement("span");c.innerText=r.DELETE_COLOR,l.appendChild(c),l.addEventListener("click",function(){e.closePaletteMenu(),e.setEditMode()});var u=document.createElement("div");n.appendChild(u);var h=document.createElement("div");u.appendChild(h),Object(N.setToolsIcon)(h,N.ToolsIcon.PENCIL);var d=document.createElement("span");d.innerText=r.EDIT_PALETTE_NAME,h.appendChild(d),h.addEventListener("click",function(){e.closePaletteMenu(),e.openPalettePopup(function(n){b.a.updatePaletteName({idx:n.idx,name:n.value}).then(function(){e.closePalettePopup(),e.updateSelectedUserPalette()}).catch(function(){e.closePalettePopup(),alert(t.ERROR_MSG)})},r.TO_EDIT_PALETTE_NAME,e.selectedPaletteIdx,r.CONFIRM,null,e.txtTitle.innerText)});var p=document.createElement("div");u.appendChild(p),Object(N.setToolsIcon)(p,N.ToolsIcon.DELETE);var v=document.createElement("span");v.innerText=r.DELETE_PALETTE,p.appendChild(v),p.addEventListener("click",function(){e.closePaletteMenu(),e.openPalettePopup(function(n){b.a.deletePalette({idx:n.idx}).then(function(){e.closePalettePopup(),e.selectedPaletteSet.parentElement.removeChild(e.selectedPaletteSet),e.selectedPaletteSet=null,e.selectedPaletteIdx=null,e.setDefaultMode()}).catch(function(){e.closePalettePopup(),alert(t.ERROR_MSG)})},r.TO_DELETE_PALETTE,e.selectedPaletteIdx,r.DELETE,S.a.PALETTE_POPUP_DELETE,null,r.ASK_AGAIN_BEFORE_DELETE)})}this.btnMore.classList.add(S.a.ACTIVE)}},{key:"closePaletteMenu",value:function(){this.btnMore&&this.btnMore.classList.remove(S.a.ACTIVE)}},{key:"updateSelectedUserPalette",value:function(){if(this.selectedPaletteIdx&&this.selectedPaletteSet){var e,t=b.a.getPalette(this.selectedPaletteIdx);this.currMode===i.DEFAULT_MODE?(e=this.makePaletteSet({name:t.name,idx:t.idx,colors:t.colors,canAddColor:!0,canDeleteColor:!0}),this.selectedPaletteSet.after(e),this.selectedPaletteSet.parentElement.removeChild(this.selectedPaletteSet),this.selectedPaletteSet=e):this.currMode===i.CUSTOM_MODE&&(this.selectedPaletteSet.classList.add(S.a.ACTIVE),this.txtTitle.innerText=t.name,this.updateUserPaletteWrapperUI())}}},{key:"updateColorSelectAreaUI",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=t.hexToRgb(e);(n||0!==this.colorSpectrumSelector.offsetWidth&&!this.isSameSelectedColor(i))&&(this.updateColorBarPoint(i),this.updateColorSpectrumPoint(i))}},{key:"isSameSelectedColor",value:function(e){if(this.colorBarColor){var t=this.getSelectedRGB();return t.r===e.r&&t.g===e.g&&t.b===e.b}return!1}},{key:"updateColorSpectrumUI",value:function(e,t,n){this.colorSpectrum.style.background="rgb(".concat(e,", ").concat(t,", ").concat(n,")")}},{key:"addToUsedColors",value:function(e){var t=this;e.forEach(function(e){var n=t.toHexString(e);t.isTransparent(n)||t.usedColors.add(n)})}},{key:"updateScrollBarUI",value:function(){var e=this.scrollContent.clientHeight/this.scrollContent.scrollHeight;this.scrollBar.style.height="".concat(1===e?0:100*e,"%")}},{key:"openPalettePopup",value:function(e,t,n,i,a,o,s){var l,c,u,h,d=this,p=this.palettePopup=document.createElement("div");p.classList.add(S.a.PALETTE_POPUP),this.palettePopup.addEventListener("keydown",function(e){e.stopPropagation()}),(l=document.createElement("div")).classList.add(S.a.PALETTE_POPUP_LAYER),p.appendChild(l),c=Object(N.setToolsIcon)(l,N.ToolsIcon.CLOSE,!0),l.appendChild(c),c.addEventListener("click",function(){return d.closePalettePopup()}),(u=document.createElement("div")).classList.add(S.a.PALETTE_POPUP_TITLE),l.appendChild(u),u.innerText=t;var v=l.getElementsByClassName("paletteInputEmpty")[0];null!=o?v||((v=document.createElement("div")).classList.add("paletteInputEmpty"),l.appendChild(v),v.innerText=r.INPUT_NAME):v&&v.parentElement.removeChild(v);var f=l.getElementsByClassName(S.a.PALETTE_POPUP_INPUT)[0];null!=o?(f||((f=document.createElement("input")).type="text",f.classList.add(S.a.PALETTE_POPUP_INPUT),v?l.insertBefore(f,v):l.appendChild(f),f.addEventListener("keyup",function(){0===f.value.trim().length?(f.classList.add("accentInput"),v.classList.remove("hidden")):(f.classList.remove("accentInput"),v.classList.add("hidden"))})),f.value=o,f.classList.remove("accentInput"),v.classList.add("hidden")):f&&f.parentElement.removeChild(f);var g=l.getElementsByClassName(S.a.PALETTE_POPUP_DESCRIPTION)[0];null!=s?(g||((g=document.createElement("div")).classList.add(S.a.PALETTE_POPUP_DESCRIPTION),l.appendChild(g)),g.innerText=s):g&&g.parentElement.removeChild(g);var m=document.createElement("button");m.classList.add(S.a.PALETTE_POPUP_CANCEL),m.innerText=r.CANCEL,l.appendChild(m),m.addEventListener("click",function(){return d.closePalettePopup()}),(h=document.createElement("button")).classList.add(S.a.PALETTE_POPUP_CONFIRM),a&&h.classList.add(a),h.innerText=i,l.appendChild(h),h.onclick=function(t){var i=l.getElementsByClassName(S.a.PALETTE_POPUP_INPUT)[0];if(i)if(k.a.getEnv().browser.isMobile()||d.focus(i),i.value.trim().length>0)e({e:t,value:i.value.trim(),idx:n});else{var r=l.getElementsByClassName("paletteInputEmpty")[0];i.classList.add("accentInput"),r&&r.classList.remove("hidden"),t.stopPropagation(),t.preventDefault()}else e({e:t,idx:n})},document.body.appendChild(this.palettePopup),f&&(this.focus(f),f.select())}},{key:"closePalettePopup",value:function(){this.palettePopup&&this.palettePopup.parentElement&&(this.palettePopup.parentElement.removeChild(this.palettePopup),this.palettePopup=null)}},{key:"initUsedColors",value:function(){var e=this;k.a.dispatch(new R.c(function(){var t=l()(o.a.mark(function t(n){var i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i=e.lastParam&&e.lastParam.isMultiColor,e.usedColors.clear(),n.pages.forEach(function(t){var n=t.background;if(n&&!(n.backgroundItem instanceof L.a)&&n.color){var r=new Set;r.add(n.color),e.addToUsedColors(r)}var a=!0,o=!1,s=void 0;try{for(var l,c=t.getAllSingleItems()[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var u=l.value;e.addToUsedColors(u.getUsedColor()),i||(u instanceof O.a?e.setSameSvgColorSetInfo(u):u instanceof B.b?e.setSameTextColorSetInfo(u):u instanceof F.e?e.setSamePhotoColorSetInfo(u):H.b)}}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()))}},{key:"isSameOutlineColor",value:function(e){var t=!1;if(e instanceof G.a&&e.props.isActiveOutline()){var n=e.props.getOutlineColor();this.prevColor.substring(0,7).toLowerCase()===n.toLowerCase()&&(t=!0)}return t}},{key:"isSameShadowColor",value:function(e){var t=!1;if((e instanceof O.a||e instanceof F.e)&&e.props.isActiveShadow()){var n=e.props.getShadowColor();this.prevColor.substring(0,7).toLowerCase()===n.toLowerCase()&&(t=!0)}return t}},{key:"setSameSvgColorSetInfo",value:function(e){if(!(e instanceof L.a&&e.isBackgroundType())){var t=e.getOriginColorsByColor(this.prevColor,!0),n=this.isSameOutlineColor(e),i=this.isSameShadowColor(e),r=(t?t.length:0)+(n?1:0)+(i?1:0);(e.select&&r>1||!e.select&&r>0)&&this.sameColorSetInfos.push({item:e,originColors:t,isSameOutlineColor:n,isSameShadowColor:i})}}},{key:"setSameTextColorSetInfo",value:function(e){var t=[],n=this.prevColor,i=n.length>7?n.substr(0,7):n;e.select||this.isTransparent(n)||e.props.getCharsOfLines().forEach(function(e,n){e.forEach(function(e,r){e.color===i&&t.push({row:n,col:r})})});var r=t.length>0,a=e.props.getBackgroundColor();a.includes("#")||(a="#".concat(a));var o=!1;if(o=n.length===a.length?this.prevColor.toLowerCase()===a.toLowerCase():i.toLowerCase()===a.toLowerCase(),!e.select&&(r||o)){var s={item:e,targetSelPosList:t,isSameFontColor:r,isSameBgColor:o};this.sameColorSetInfos.push(s)}}},{key:"setSamePhotoColorSetInfo",value:function(e){if(!e.select){var t=this.isSameShadowColor(e);t&&this.sameColorSetInfos.push({item:e,isSameShadowColor:t})}}},{key:"initUsedColorsUI",value:function(){var e=this;this.initUsedColors(),this.usedColorsArea.innerHTML="";var t=this.makePaletteSet({colors:Array.from(this.usedColors),canAddColor:!0});this.usedColorsArea.appendChild(t);var n=t.getElementsByClassName(S.a.ADD_COLOR)[0];this.newColorChip=document.createElement("div"),this.newColorChip.classList.add(S.a.COLOR_CHIP,S.a.HIDDEN_CHIP),this.newColorChip.addEventListener("click",function(){e.setColor(e.newColorChip.style.backgroundColor)}),n.after(this.newColorChip)}},{key:"updateUsedColorsUI",value:function(){this.currColor&&(this.usedColors.has(this.currColor)||this.isTransparent(this.currColor)?(this.newColorChip.classList.add(S.a.COLOR_CHIP,S.a.HIDDEN_CHIP),this.newColorChip.removeAttribute("style")):(this.newColorChip.classList.remove(S.a.HIDDEN_CHIP),this.newColorChip.setAttribute("style","background-color:"+this.currColor.substr(0,7))))}},{key:"initUserPalettesUI",value:function(){var e=this;if(this.userPaletteArea.innerHTML="",k.a.instance.user.isLogin()){var t=b.a.getPaletteList({}).list;!t||t.length<=0||t.forEach(function(t){var n=e.makePaletteSet({name:t.name,idx:t.idx,colors:t.colors,canAddColor:!0,canDeleteColor:!0});e.userPaletteArea.appendChild(n)})}}},{key:"initBtnAddNewPaletteUI",value:function(){var e=this;this.btnAddNewPalette||(this.btnAddNewPalette=document.createElement("button"),this.btnAddNewPalette.classList.add(S.a.ADD_NEW_PALETTE),this.btnAddNewPalette.innerText=r.ADD_NEW_PALETTE,Object(N.setToolsIcon)(this.btnAddNewPalette,N.ToolsIcon.PALETTE),this.btnAddNewPalette.addEventListener("click",function(){k.a.instance.user.isLogin()?e.openPalettePopup(function(n){b.a.addPalette({name:n.value}).then(function(t){e.closePalettePopup();var n=b.a.getPalette(t),i=e.makePaletteSet({name:n.name,idx:n.idx,colors:n.colors,canAddColor:!0,canDeleteColor:!0});e.userPaletteArea.prepend(i),e.selectedPaletteSet=i,e.selectedPaletteIdx=t,e.setCustomMode()}).catch(function(){e.closePalettePopup(),alert(t.ERROR_MSG)})},r.TO_ADD_NEW_PALETTE,-1,r.CONFIRM,null,""):x.a.openLoginPopup(M.a.SETTING,function(){e.closeColorControl()})})),this.btnAddNewPalette.parentElement!==this.paletteWrapper&&this.paletteWrapper.appendChild(this.btnAddNewPalette)}},{key:"updateUserPaletteWrapperUI",value:function(){this.userPaletteWrapper.innerHTML="";var e=b.a.getPalette(this.selectedPaletteIdx),t=this.makePaletteSet({colors:e.colors,canAddColor:!0,canDeleteColor:!0});this.userPaletteWrapper.appendChild(t)}},{key:"initColorDisplayUI",value:function(e){var t;e?this.prevColorChip.classList.add(S.a.MULTI_COLOR):(this.prevColorChip.classList.remove(S.a.MULTI_COLOR),this.isTransparent(this.prevColor)?(t=this.prevColor,this.prevColorChip.classList.add(S.a.TRANSPARENT_CHIP)):(t=this.prevColor.substr(0,7),this.prevColorChip.innerHTML="",this.prevColorChip.classList.remove(S.a.TRANSPARENT_CHIP))),this.prevColorChip.setAttribute("style","background-color:"+t),this.changeToRight&&this.changeToRight.parentElement&&(this.changeToRight.parentElement.removeChild(this.changeToRight),this.changeToRight=null),this.currColorChip&&this.currColorChip.parentElement&&(this.currColorChip.parentElement.removeChild(this.currColorChip),this.currColorChip=null)}},{key:"updateColorDisplayUI",value:function(e){var t,n=this;if(!e&&!this.currColor)return this.changeToRight&&this.changeToRight.parentElement&&this.changeToRight.parentElement.removeChild(this.changeToRight),void(this.currColorChip&&this.currColorChip.parentElement&&this.currColorChip.parentElement.removeChild(this.currColorChip));this.changeToRight||(this.changeToRight=document.createElement("span"),Object(N.setToolsIcon)(this.changeToRight,N.ToolsIcon.GREATER_THAN),this.changeToRight.classList.add(S.a.CHANGE_TO_RIGHT)),this.colorDisplay.appendChild(this.changeToRight),this.currColorChip||(this.currColorChip=document.createElement("span"),this.currColorChip.classList.add(S.a.COLOR_CHIP),this.currColorChip.addEventListener("click",function(){n.prevMode===i.CUSTOM_MODE&&n.currMode===i.DIRECT_MODE||n.setColor(n.currColorChip.style.backgroundColor)})),e=e||this.currColor,this.isTransparent(e)?(t=e,this.currColorChip.classList.add(S.a.TRANSPARENT_CHIP)):(t=e.substr(0,7),this.currColorChip.innerHTML="",this.currColorChip.classList.remove(S.a.TRANSPARENT_CHIP)),this.currColorChip.setAttribute("style","background-color:"+t),this.colorDisplay.appendChild(this.currColorChip)}},{key:"updateHexAreaUI",value:function(e){if(e){var t=this.toHexString(this.hexChip.style.backgroundColor),n=this.toHexString(this.hexInput.value),i=this.toHexString(e.value);t!==i&&(this.isTransparent(i)?(this.hexChip.classList.add(S.a.TRANSPARENT_CHIP),this.hexChip.style.background=""):(this.hexChip.classList.remove(S.a.TRANSPARENT_CHIP),this.hexChip.style.background=i.substr(0,7))),n!==i&&(this.isTransparent(i)?this.hexInput.value="":this.hexInput.value=i.substr(0,7)),k.a.getEnv().browser.isMobile()||this.focus(this.hexInput)}}},{key:"makeSpoidElement",value:function(){var e=document.createElement("div");e.classList.add(S.a.SPOID);var t=P.a.createCanvas();t.width=128,t.height=128,t.classList.add(S.a.MAGNIFIER),e.appendChild(t);var n=document.createElement("div");n.classList.add(S.a.RECT),e.appendChild(n);var i=document.createElement("div");i.classList.add(S.a.SPOID_COLOR_INFO),e.appendChild(i);var r=document.createElement("span");r.classList.add(S.a.SPOID_COLOR),i.appendChild(r);var a=document.createElement("span");return a.classList.add(S.a.SPOID_COLOR_CODE),i.appendChild(a),e}},{key:"changeToSpoidMode",value:(n=l()(o.a.mark(function e(n){var i,r,a,s,l,c,u,h,d,p,v,f,g,m,E,y,T=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(i=document.createElement("div")).classList.add(S.a.PAGE_SPOID),r=k.a.instance.pageController.getPageRenderer(n).element,a=k.a.instance.pageController.getPageRenderer(n).contents,r.appendChild(i),i.style.top="".concat(a.offsetTop,"px"),i.style.left="".concat(a.offsetLeft,"px"),i.style.width=a.style.width,i.style.height=a.style.height,s=k.a.instance,l=s.zoomScale,c=n.editScale,u=n.sheetSize.width*c,h=n.sheetSize.height*c,(d=P.a.createCanvas()).width=u*l,d.height=h*l,d.classList.add(S.a.SPOID_CANVAS),p=d.getContext("2d"),(v=new Image).onload=function(){p.drawImage(v,0,0,d.width,d.height)},e.next=23,n.renderThumbnail(u,h,c);case 23:f=e.sent,v.src=f,i.appendChild(d),g=t.spoidElement.getElementsByClassName(S.a.MAGNIFIER)[0],m=g.getContext("2d"),E=function e(r){if(k.a.isSpoidMode()){var a=t.spoidElement.getElementsByClassName(S.a.SPOID_COLOR)[0],o=t.spoidElement.getElementsByClassName(S.a.SPOID_COLOR_CODE)[0],l=Math.round(r.offsetX),c=Math.round(r.offsetY),u=p.getImageData(l,c,1,1).data;T.spoidColor=T.toHexString("rgb(".concat(u[0],", ").concat(u[1],", ").concat(u[2],")")),m.clearRect(0,0,g.width,g.height);var h=l-7.5,v=c-7.5,f=g.width/16,E=g.height/16,_=Math.max(h,0),I=Math.max(v,0),C=Math.min(d.width-h,16),w=Math.min(d.height-v,16),R=-Math.min(h,0)*f,L=-Math.min(v,0)*E,O=C*f,A=w*E;m.drawImage(d,_,I,C,w,R,L,O,A);var b=T.spoidColor.substr(0,7);a.style.background=b,o.innerText=b,0===s.pageController.getPageRenderer(n).element.getElementsByClassName(S.a.MAGNIFIER).length&&(t.spoidElement.removeEventListener("mousemove",e),t.spoidElement.addEventListener("mousemove",e),t.spoidElement.removeEventListener("mouseleave",y),t.spoidElement.addEventListener("mouseleave",y),t.spoidElement.removeEventListener("mousedown",T.spoidDownHandler),t.spoidElement.addEventListener("mousedown",T.spoidDownHandler),i.appendChild(t.spoidElement)),t.spoidElement.style.left="".concat(r.offsetX-g.width/2,"px"),t.spoidElement.style.top="".concat(r.offsetY-g.height/2,"px"),(l<0||l>=d.width||c<0||c>=d.height)&&t.spoidElement.parentElement&&(t.spoidElement.removeEventListener("mousemove",e),t.spoidElement.removeEventListener("mousedown",T.spoidDownHandler),i.removeChild(t.spoidElement))}},y=function(e){var n=$(d).offset(),i=e.pageX-Math.round(n.left),r=e.pageY-Math.round(n.top);(i<0||i>=d.width||r<0||r>=d.height)&&t.spoidElement.parentElement&&(t.spoidElement.removeEventListener("mousemove",E),t.spoidElement.removeEventListener("mousedown",T.spoidDownHandler),t.spoidElement.parentElement.removeChild(t.spoidElement))},d.addEventListener("mouseenter",E),d.addEventListener("mousemove",E),d.addEventListener("mouseleave",y),d.addEventListener("mousedown",this.spoidDownHandler);case 34:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"startSpoidMode",value:function(){var e=this;k.a.dispatch(new R.c(function(){var n=l()(o.a.mark(function n(i,r,a){var s,l,c,u,h,d,p;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!k.a.isSpoidMode()){n.next=2;break}return n.abrupt("return");case 2:for(k.a.setSpoidMode(),t.spoidPageIdx=r.renderPageIdx,e.colorControlPopup.parentElement&&e.colorControlPopup.parentElement.removeChild(e.colorControlPopup),a.renderHandler(i,r),a.canvasRenderer.scrollElement.getScrollY(),t.spoidElement||(t.spoidElement=e.makeSpoidElement()),s=t.spoidElement.getElementsByClassName(S.a.MAGNIFIER)[0],s.getContext("2d").imageSmoothingEnabled=!1,t.eventListeners=[],l=!0,c=!1,u=void 0,n.prev=15,h=function(){var n=p.value,i=function t(){e.changeToSpoidMode(n),r.pageController.getPageRenderer(n).contents.removeEventListener("mouseenter",t)};t.eventListeners.push(i),r.pageController.getPageRenderer(n).contents.addEventListener("mouseenter",i)},d=i.pages[Symbol.iterator]();!(l=(p=d.next()).done);l=!0)h();n.next=24;break;case 20:n.prev=20,n.t0=n.catch(15),c=!0,u=n.t0;case 24:n.prev=24,n.prev=25,l||null==d.return||d.return();case 27:if(n.prev=27,!c){n.next=30;break}throw u;case 30:return n.finish(27);case 31:return n.finish(24);case 32:case"end":return n.stop()}},n,null,[[15,20,24,32],[25,,27,31]])}));return function(e,t,i){return n.apply(this,arguments)}}()))}},{key:"endSpoidMode",value:function(e){var n=this;k.a.dispatch(new R.c(function(){var i=l()(o.a.mark(function i(r,a,s){var l,c,u,h,d,p,v,f;return o.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(k.a.isSpoidMode()){i.next=2;break}return i.abrupt("return");case 2:for(k.a.setDefaultMode(),a.renderPageIdx=t.spoidPageIdx,a.renderer.canvasRenderer.updateScrollCenterOfCurrentPage(),n.colorControlPopup.parentElement||document.body.appendChild(n.colorControlPopup),s.renderHandler(r,a),l=!0,c=!1,u=void 0,i.prev=10,h=r.pages[Symbol.iterator]();!(l=(d=h.next()).done);l=!0)p=d.value,(v=a.pageController.getPageRenderer(p).element.getElementsByClassName(S.a.PAGE_SPOID)[0])&&((f=v.getElementsByClassName(S.a.SPOID_CANVAS)[0])&&f.parentElement.removeChild(f),v.parentElement.removeChild(v)),a.pageController.getPageRenderer(p).contents.removeEventListener("mouseenter",t.eventListeners.splice(0,1)[0]);i.next=18;break;case 14:i.prev=14,i.t0=i.catch(10),c=!0,u=i.t0;case 18:i.prev=18,i.prev=19,l||null==h.return||h.return();case 21:if(i.prev=21,!c){i.next=24;break}throw u;case 24:return i.finish(21);case 25:return i.finish(18);case 26:if(t.spoidElement&&t.spoidElement.parentElement&&(t.spoidElement.removeEventListener("mousedown",n.spoidDownHandler),t.spoidElement.parentElement.removeChild(t.spoidElement)),!e){i.next=31;break}n.setColor(e),i.next=33;break;case 31:return i.next=33,a.renderer.canvasRenderer.renderAuto(r,a);case 33:n.focus(n.wrap);case 34:case"end":return i.stop()}},i,null,[[10,14,18,26],[19,,21,25]])}));return function(e,t,n){return i.apply(this,arguments)}}()))}},{key:"focus",value:function(e){e.focus({preventScroll:!0})}},{key:"changeColor",value:function(e){e=this.toHexString(e);var t=this.isTransparent(e)?e:e.substr(0,7);if(2===this.listener.length){var n=this.originColor.substr(0,7);("Netscape"===navigator.appName&&-1!==navigator.userAgent.search("Trident")||-1!==navigator.userAgent.indexOf("MSIE"))&&(n=n.toLowerCase()),this.listener(n,t)}else this.listener(t)}},{key:"changeAllSameColors",value:function(e,t){var n=this,i=this.toHexString(e),r=this.toHexString(t),a=this.isTransparent(i)?i:i.substr(0,7),o=this.isTransparent(r)?r:r.substr(0,7);this.isContinuousSameColorChange?k.a.groupingAction(function(){k.a.dispatch(new D.a(n.sameColorSetInfos,a,o)),n.changeColor(n.currColor)}):(k.a.dispatch(new D.a(this.sameColorSetInfos,a,o)),this.isContinuousSameColorChange=!0)}},{key:"updateChangeSameColorsUI",value:function(e){var t=this;if(this.useChangeSameColors&&e&&!e.hideChangeSameColors&&this.sameColorSetInfos.length>0&&this.currColor&&!this.changeSameColors){this.changeSameColors=document.createElement("span"),this.changeSameColors.classList.add(S.a.CHANGE_SAME_COLORS),this.footer.appendChild(this.changeSameColors);var n=document.createElement("span");Object(N.setToolsIcon)(n,N.ToolsIcon.CHECK),n.classList.add(S.a.CHANGE_SAME_COLORS_CHECK),this.changeSameColors.appendChild(n);var i=document.createElement("span");i.classList.add(S.a.CHANGE_SAME_COLORS_TEXT),i.classList.add(S.a.CHANGE_SAME_COLORS_CONTENT),i.innerText=r.CHANGE_ALL_SAME_COLORS,this.changeSameColors.appendChild(i),$(this.changeSameColors).on("click",function(){t.changeSameColors&&(t.changeSameColors.classList.contains(S.a.ACTIVE)?(t.changeSameColors.classList.remove(S.a.ACTIVE),t.changeAllSameColors(t.currColorChip.style.backgroundColor,t.prevColorChip.style.backgroundColor),t.isContinuousSameColorChange=!1):(t.changeSameColors.classList.add(S.a.ACTIVE),t.changeAllSameColors(t.prevColorChip.style.backgroundColor,t.currColorChip.style.backgroundColor)))})}}},{key:"setColorControlLocation",value:function(e,t){var n=this.wrap.offsetWidth,i=this.wrap.offsetHeight,r=$(window).width(),a=$(window).height(),o=Math.max(20,e);o+n>r&&(o=r-n);var s=t+20;s+i>a&&(s=(s=t-20-i)>=60?s:60),this.wrap.style.left="".concat(o,"px"),this.wrap.style.top="".concat(s,"px")}},{key:"moveScrollY",value:function(e){return this.scrollContent.scrollTop+=this.scrollContent.scrollHeight/this.scrollContent.clientHeight*e,this}},{key:"setOriginColor",value:function(e){this.originColor=this.toHexString(e)}},{key:"openColorControl",value:function(e,t,n){var i=this;this.setDefaultMode(),this.prevColor=this.toHexString(e.value),this.colorControlPopup.appendChild(this.wrap),e.canNotAppend||document.body.appendChild(this.colorControlPopup),this.initUserPalettesUI(),this.initBtnAddNewPaletteUI(),this.initColorDisplayUI(e.isMultiColor),this.updateUI(e),this.initUsedColorsUI(),this.setColorControlLocation(t,n),window.addEventListener("keydown",this.keyDownHandler),window.addEventListener("resize",this.resizeHandler),document.addEventListener("mousedown",this.mouseDownHandler),document.body.addEventListener("mousemove",this.colorSelectorsMoveHandler),document.body.addEventListener("touchmove",function(e){return i.colorSelectorsMoveHandler(e,!0)}),document.body.addEventListener("mouseup",this.colorSelectorsUpHandler),document.body.addEventListener("touchend",this.colorSelectorsUpHandler)}},{key:"closeColorControl",value:function(){this.callback&&this.callback(),this.endSpoidMode();var e=this.colorControlPopup;e.parentElement&&e.parentElement.removeChild(e),this.closePaletteMenu(),this.prevColor=null,this.currColor=null,this.selectedPaletteSet=null,this.selectedPaletteIdx=null,this.numOfSelectedColors=0,this.wrap.classList.remove(S.a.ACTIVE),this.sameColorSetInfos=[],this.backupColorSetInfos=[],this.changeSameColors&&this.changeSameColors.parentElement&&this.changeSameColors.parentElement.removeChild(this.changeSameColors),this.changeSameColors=null,this.isContinuousSameColorChange=!1,window.removeEventListener("keydown",this.keyDownHandler),window.removeEventListener("resize",this.resizeHandler),document.removeEventListener("mousedown",this.mouseDownHandler),document.body.removeEventListener("mousemove",this.colorSelectorsMoveHandler),document.body.removeEventListener("touchmove",this.colorSelectorsMoveHandler),document.body.removeEventListener("mouseup",this.colorSelectorsUpHandler),document.body.removeEventListener("touchend",this.colorSelectorsUpHandler)}},{key:"updateUI",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.lastParam;if(!(!this.prevColor||this.currColor&&e&&this.toHexString(e.value)!==this.currColor)){this.useTransparent&&this.paletteTransparentContent&&this.directSetTransparentContent&&(e&&e.hideTransparent?(this.paletteTransparentContent.classList.remove(S.a.ACTIVE),this.directSetTransparentContent.classList.remove(S.a.ACTIVE)):(this.paletteTransparentContent.classList.add(S.a.ACTIVE),this.directSetTransparentContent.classList.add(S.a.ACTIVE))),(this.prevColor!==this.currColor||this.newColorChip)&&this.updateUsedColorsUI();var t=this.currColor?this.currColor:this.prevColor;this.updateColorSelectAreaUI(t),this.updateColorDisplayUI(),this.updateChangeSameColorsUI(e),this.updateHexAreaUI(e),this.lastParam=e}}},{key:"addEventListener",value:function(){var e=this;this.btnClose.addEventListener("click",function(){e.closeColorControl()}),$(this.colorControlPopup).on("mousedown",function(t){e.wrap.contains(t.target)||e.closeColorControl()}),this.btnBack.addEventListener("click",function(){if(e.prevMode===i.DEFAULT_MODE||e.currMode===i.CUSTOM_MODE)e.setDefaultMode(),e.updateSelectedUserPalette(),e.selectedPaletteSet&&(e.selectedPaletteSet.classList.remove(S.a.ACTIVE),e.selectedPaletteSet=null,e.selectedPaletteIdx=null);else if(e.prevMode===i.CUSTOM_MODE){var n=e.selectedPaletteIdx,r=e.toHexString(e.hexChip.style.backgroundColor).substr(0,7);b.a.addColor({idx:n,color:r}).then(function(){e.updateSelectedUserPalette()}).catch(function(){alert(t.ERROR_MSG)}),e.setCustomMode(),e.updateColorDisplayUI();var a=e.currColor?e.currColor:e.prevColor;e.updateHexAreaUI({value:a})}}),this.btnMore.addEventListener("click",function(t){t.stopPropagation(),e.btnMore.classList.contains(S.a.ACTIVE)?e.closePaletteMenu():e.openPaletteMenu()}),this.spoidMode&&this.spoidMode.addEventListener("click",function(){e.startSpoidMode()}),this.wrap.addEventListener("keydown",function(e){e.stopPropagation()}),this.wrap.addEventListener("click",function(t){e.closePaletteMenu()})}},{key:"setColor",value:function(e){var t=this,n=this.toHexString(e);if(this.currColor&&this.currColor===n)this.updateColorDisplayUI();else{var i=this.currColor;this.currColor=n,this.isTransparent(n)?this.sameColorSetInfos.forEach(function(e){e.item instanceof B.b&&e.isSameFontColor&&t.backupColorSetInfos.push(e)}):this.backupColorSetInfos.length&&(this.backupColorSetInfos=[]);var r=this.changeSameColors;r&&(0===this.sameColorSetInfos.length?r.classList.add(S.a.HIDE):r.classList.remove(S.a.HIDE)),this.changeSameColors&&this.changeSameColors.parentElement&&this.changeSameColors.classList.contains(S.a.ACTIVE)?this.changeAllSameColors(i,this.currColor):this.changeColor(this.currColor)}}}],[{key:"hexToRgb",value:function(e){if(!e||e.length<7)return null;var t=e.substring(0,7),n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}:null}}]),t}(C.a);I()(V,"ERROR_MSG","오류가 발생했습니다"),I()(V,"BASE_COLOR_CHART",["#000000FF","#595959FF","#787878FF","#9E9E9EFF","#C2C2C2FF","#EEEEEEFF","#FFFFFFFF","#FECCBEFF","#FEEBB6FF","#DDECCAFF","#B8E6E1FF","#B8E9FFFF","#CCD2F0FF","#E0BFE6FF","#FD8A69FF","#FFCD4AFF","#AFD485FF","#82CBC4FF","#58CCFFFF","#9FA9D8FF","#B96BC6FF","#FC5230FF","#FD9F28FF","#7DB249FF","#2FA599FF","#18A8F1FF","#5D6DBEFF","#9A30AEFF","#D94925FF","#FD6F22FF","#568A35FF","#12887AFF","#1187CFFF","#3A4CA8FF","#692498FF"]),I()(V,"COLOR_BAR_POINTS",[{r:255,g:0,b:0},{r:255,g:255,b:0},{r:0,g:255,b:0},{r:0,g:255,b:255},{r:0,g:0,b:255},{r:255,g:0,b:255}]),I()(V,"KEY_MAP",new Map([["ㅁ","a"],["ㅠ","b"],["ㅊ","c"],["ㅇ","d"],["ㄷ","e"],["ㄹ","f"]])),I()(V,"eventListeners",[]),function(e){e[e.DEFAULT_MODE=0]="DEFAULT_MODE",e[e.DIRECT_MODE=1]="DIRECT_MODE",e[e.CUSTOM_MODE=2]="CUSTOM_MODE",e[e.EDIT_MODE=3]="EDIT_MODE"}(i||(i={})),function(e){e.COLOR="색상",e.TRANSPARENT="투명",e.BASIC_PALETTE="기본 팔레트",e.SET_DIRECTLY="직접 지정",e.ADD_NEW_PALETTE="새 팔레트 추가",e.TO_ADD_NEW_PALETTE="새 팔레트 추가하기",e.EDIT_PALETTE_NAME="팔레트 이름 수정",e.TO_EDIT_PALETTE_NAME="팔레트 이름 수정하기",e.DELETE_PALETTE="팔레트 삭제",e.TO_DELETE_PALETTE="팔레트 삭제하기",e.ADD_COLOR="색상 추가",e.DELETE_COLOR="색상 제거",e.CHANGE_ALL_SAME_COLORS="같은 색상 모두 변경",e.INPUT_NAME="이름을 입력해주세요.",e.SELECT_COLORS_TO_DELETE="삭제할 색상을 선택하세요.",e.ASK_AGAIN_BEFORE_DELETE="삭제한 팔레트는 다시 복구할 수 없습니다. 정말 삭제하시겠습니까?",e.CONFIRM="확인",e.DELETE="삭제",e.COMPLETE="완료",e.CANCEL="취소",e.QUANTITY="개"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"a",function(){return m});var i=n(35),r=n.n(i),a=n(36),o=n.n(a),s=n(39),l=n.n(s),c=n(38),u=n.n(c),h=n(40),d=n.n(h),p=n(80),v=n(41),f=n(3),g=n(12),m=function(e){function t(e,n){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(r()(this,t),(i=l()(this,u()(t).call(this,"div",[v.a.RADIO_ITEM]))).listener=e,i.itemList=n,null!=o){var s=document.createElement("label");s.innerText=f.CRM.get(o)||"",i.wrap.appendChild(s)}var c="radio"+f.StringUtil.random(20);return n.forEach(function(e,t){var n=document.createElement("label");n.setAttribute("data-key",e.value);var r=document.createElement("input");r.name=c,r.type="radio",r.value=e.value,t===a&&(r.checked=!0),Object(g.setToolsIcon)(n,e.icon),n.insertBefore(r,n.childNodes.item(0)),i.wrap.appendChild(n),e.element=r}),i.addEventListener(),i}return d()(t,e),o()(t,[{key:"updateUI",value:function(e){this.selectedItem=e.value;var t=this.itemList.find(function(t){return t.value===e.value});if(t?t.element.checked=!0:this.itemList.forEach(function(e){return e.element.checked=!1}),!0===e.active||void 0===e.active){this.wrap.classList.remove(v.a.DISABLE);var n=!0,i=!1,r=void 0;try{for(var a,o=this.wrap.children[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){a.value.classList.remove(v.a.DISABLE)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}this.itemList.forEach(function(e){e.element.disabled=!1,e.element.classList.remove(v.a.DISABLE),e.element.classList.add(v.a.ENABLE)})}else{this.wrap.classList.add(v.a.DISABLE);var s=!0,l=!1,c=void 0;try{for(var u,h=this.wrap.children[Symbol.iterator]();!(s=(u=h.next()).done);s=!0){u.value.classList.add(v.a.DISABLE)}}catch(e){l=!0,c=e}finally{try{s||null==h.return||h.return()}finally{if(l)throw c}}this.itemList.forEach(function(e){e.element.disabled=!0,e.element.checked=!1,e.element.classList.add(v.a.DISABLE),e.element.classList.remove(v.a.ENABLE)})}}},{key:"addEventListener",value:function(){var e=this,t=function(t){e.listener(t.target.value),t.stopPropagation()};this.itemList.forEach(function(e){e.element.addEventListener("change",t)})}}]),t}(p.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return E});var i=n(0),r=n.n(i),a=n(1),o=n.n(a),s=n(35),l=n.n(s),c=n(36),u=n.n(c),h=n(37),d=n.n(h),p=n(55),v=n(3),f=n(43),g=n(47),m=n(79),E=function(){function e(){l()(this,e),d()(this,"listMap",new Map)}var t,n,i,a;return u()(e,null,[{key:"getTemplateTypeList",value:(a=o()(r.a.mark(function e(t){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.instance.listMap.get(t),!v.ArrayUtil.isEmpty(n)){e.next=6;break}return e.next=4,this.requestList(t);case 4:n=e.sent,this.instance.listMap.set(t,n);case 6:return e.abrupt("return",n.slice());case 7:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"requestList",value:(i=o()(r.a.mark(function e(t){var n,i,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=$.param({openType:t}),i="".concat(v.CRM.get(f.a.TEMPLATE_TYPE_URL),"?").concat(n),e.next=5,g.UnicornApiRequest.get(i);case 5:return a=e.sent,e.abrupt("return",a.data.list);case 9:return e.prev=9,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",[]);case 13:case"end":return e.stop()}},e,null,[[0,9]])})),function(e){return i.apply(this,arguments)})},{key:"findTemplateTypeByOpenType",value:(n=o()(r.a.mark(function e(t,n){var i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,this.getTemplateTypeList(n);case 4:return i=e.sent,e.abrupt("return",this.findTemplateType(t,i));case 6:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})},{key:"findTemplateType",value:function(e,t){if(!e)return null;var n=btoa(e.id),i=t.concat(p.d.ALL_TYPE).find(function(t){return t.id===e.id||t.id===n});return!i&&e.width>0&&e.height>0&&(i=this.findTemplateTypeApproximate(t,e)),i}},{key:"findTemplateTypeApproximate",value:function(e,t){var n=e.filter(function(e){return"logo"!==e.id}).sort(function(e,t){var n=e.height/e.width,i=t.height/t.width;return n===i?t.width-e.width:i-n}),i=Math.atan2(t.height,t.width),r=Math.PI,a=[],o=!0,s=!1,l=void 0;try{for(var c,u=n[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var h=c.value,d=m.a.getPixel(h.height,p.d.DEFAULT_DPI,h.unit),v=m.a.getPixel(h.width,p.d.DEFAULT_DPI,h.unit),f=Math.abs(Math.atan2(d,v)-i);if(f===r)a.push(h);else{if(!(f<r))break;a=[h],r=f}}}catch(e){s=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(s)throw l}}for(var g=null,E=0,y=a;E<y.length;E++){var T=y[E];if(g){var _=Math.abs(T.width-t.width),I=Math.abs(g.width-t.width);if(_<I)g=T;else if(_>I)break}else g=T}return g}},{key:"getTemplateTypeFromRequestParam",value:(t=o()(r.a.mark(function e(t){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n={id:v.RequestUtil.get(v.RequestParamKey.TEMPLATE_TYPE_ID),width:Number(v.RequestUtil.get(v.RequestParamKey.SHEET_W)),height:Number(v.RequestUtil.get(v.RequestParamKey.SHEET_H))}).width>0&&n.height>0)&&v.StringUtil.isEmpty(n.id)){e.next=7;break}return e.next=4,this.findTemplateTypeByOpenType(n,t);case 4:return e.abrupt("return",e.sent);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})}]),e}();d()(E,"instance",new E)},function(e,t,n){"use strict";n.d(t,"b",function(){return _}),n.d(t,"a",function(){return i});var i,r=n(35),a=n.n(r),o=n(36),s=n.n(o),l=n(39),c=n.n(l),u=n(38),h=n.n(u),d=n(44),p=n.n(d),v=n(40),f=n.n(v),g=n(37),m=n.n(g),E=n(63),y=n(84),T=n(41),_=function(e){function t(){var e,n;a()(this,t);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return n=c()(this,(e=h()(t)).call.apply(e,[this].concat(r))),m()(p()(n),"id","printoutFinalConfirm"),n}return f()(t,e),s()(t,[{key:"initPopupType",value:function(e){switch(e){case i.NEW_CART:this.title.innerText="편집중인 디자인을 장바구니에 추가하였습니다.",this.subTitle.innerHTML="편집을 계속하거나 <span>장바구니</span>로 이동하여 상품을 확인하세요.",this.btnMove.innerText="장바구니로 이동하기";break;case i.NEW_COLLECTION:this.title.innerText="보관함 저장을 완료하였습니다.",this.subTitle.innerHTML="편집을 계속하거나 <span>나의 디자인함</span>으로 이동하여 상품을 확인해주세요.",this.btnMove.innerText="확인";break;case i.UPDATE:this.title.innerText="디자인 수정을 완료하였습니다.",this.subTitle.innerHTML="비즈하우스로 이동합니다.",this.btnMove.innerText="확인"}this.type=e}},{key:"makeElement",value:function(e){var t=this;this.contents=y.a.makeDiv("printout_final_confirm_popup"),this.makeBtnClose=!1,this.title=y.a.makeDiv("title"),this.subTitle=y.a.makeDiv("sub_title");var n=this.btnContinue=y.a.makeDiv("button_continue");n.innerText="계속 편집하기",n.addEventListener("click",function(){t.close(),e&&e()}),this.btnMove=y.a.makeDiv("button_move"),this.btnMove.addEventListener("click",function(){t.close(),t.redirectUrl&&t.type!==i.NEW_COLLECTION&&(document.location.href=t.redirectUrl)}),this.contents.appendChild(this.title),this.contents.appendChild(this.subTitle),this.contents.appendChild(n),this.contents.appendChild(this.btnMove)}},{key:"getContents",value:function(){return this.contents}},{key:"getId",value:function(){return this.id}},{key:"isPreventBackgroundCloseEvent",value:function(){return!0}},{key:"updateUI",value:function(){this.updateContinueButton()}},{key:"updateContinueButton",value:function(){this.type===i.UPDATE?this.btnContinue.classList.add(T.a.HIDE):this.btnContinue.classList.remove(T.a.HIDE)}}],[{key:"show",value:function(e,n){var i=t.instance;i.contents||i.makeElement(n),i.type!==e&&i.initPopupType(e),i.open()}},{key:"setRedirectUrl",value:function(e){t.instance.redirectUrl=e}}]),t}(E.a);m()(_,"instance",new _),function(e){e.NEW_CART="new_cart",e.NEW_COLLECTION="new_collection",e.UPDATE="update",e.UPDATE_CART="update_cart",e.UPDATE_COLLECTION="update_collection"}(i||(i={}))},,function(e,t,n){"use strict";n.d(t,"a",function(){return v});var i=n(0),r=n.n(i),a=n(1),o=n.n(a),s=n(35),l=n.n(s),c=n(36),u=n.n(c),h=n(47),d=n(3),p=n(43),v=function(){function e(){l()(this,e)}var t,n;return u()(e,null,[{key:"getListResponse",value:(n=o()(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.cache){e.next=5;break}return e.next=3,h.UnicornApiRequest.get(d.CRM.get(p.a.BIZHOWS_ADMIN_USER));case 3:t=e.sent,this.cache=t.data;case 5:return e.abrupt("return",this.cache);case 6:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"getList",value:(t=o()(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getListResponse();case 2:return t=e.sent,e.abrupt("return",t.list);case 4:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})}]),e}()},,function(e,t,n){"use strict";var i=n(35),r=n.n(i),a=n(36),o=n.n(a),s=n(39),l=n.n(s),c=n(38),u=n.n(c),h=n(46),d=n.n(h),p=n(40),v=n.n(p),f=function(){function e(){r()(this,e)}return o()(e,[{key:"makeXml",value:function(e,t){t.attr("Rotate",-e.props.getRotate()).attr("Opacity",e.props.getOpacity()).attr("FlipH",e.props.isFlipH()?-1:0).attr("FlipV",e.props.isFlipV()?-1:0).attr("AddedBy",e.addedBy).attr("TbpeId",e.tbpeId).attr("GroupId",e.groupId).attr("copyKey",e.copyKey).attr("LayerName",e.layerName).attr("Priority",e.priority).elem("Position").attr("Left",e.props.getLeft()).attr("Top",e.props.getTop()).attr("Right",e.props.getRight()).attr("Bottom",e.props.getBottom()).close().elem("TEMPLATE").attr("CanUserSelect",e.props.isCanUserSelect()?-1:0).attr("CanUserMove",e.props.isCanUserMove()?-1:0).attr("CanUserResize",e.props.isCanUserResize()?-1:0).attr("CanUserDel",e.props.isCanUserDel()?-1:0).close()}}]),e}(),g=function(e){function t(){return r()(this,t),l()(this,u()(t).apply(this,arguments))}return v()(t,e),o()(t,[{key:"makeXml",value:function(e,n){d()(u()(t.prototype),"makeXml",this).call(this,e,n),n.attr("StickerId",e.props.getPhotoKey()).attr("Filename","").attr("Filename4Edit","").attr("IsBackground","").attr("FileSize4Edit","").attr("IsSingleColor","").attr("StickerColor","").attr("Hue",e.props.getTint()).attr("ColorTone",e.props.getColorTone()).attr("Temperature",e.props.getTemperature()).attr("HueType",1).attr("BelongsTo",e.belongsTo).attr("Brightness",e.props.getBrightness()).attr("Lightness",e.props.getLightness()).attr("Saturation",e.props.getSaturation()).attr("KeepRatio",e.keepRatio?-1:0).attr("Contrast",e.props.getContrast()).attr("Tint",e.props.getTint()).attr("Blur",e.props.getBlur()).attr("Vignette",e.props.getVignette()).attr("OriginType",e.orgType)}}]),t}(f),m=n(62),E=n(103),y=function(e){function t(){return r()(this,t),l()(this,u()(t).apply(this,arguments))}return v()(t,e),o()(t,[{key:"makeXml",value:function(e,n){d()(u()(t.prototype),"makeXml",this).call(this,e,n);var i=e.props;n.attr("NewVersion",!0).elem("Text").text(i.getText()).close().elem("TextData").text(i.getTextData()).close().attr("BackgroundColor",i.getBackgroundColor()).attr("FillBackground",i.isFillBackground()).attr("Alignment",i.getTextAlignXml()).attr("VAlignment",i.getVerticalAlignXml()).attr("UpperCase",i.isUpperCase()).elem("Font").attr("Color",E.a.parseRGBAColorSet({rgb:i.getColor(),alpha:i.getOpacity()})).attr("Family",i.getFamily()).attr("Size",i.getAbsSize()).attr("LineSpace",i.getFontDetailLineSpace()).elem("Style").attr("Bold",i.isBold()).attr("Italic",i.isItalic()).attr("Strikeout",i.isStrikeout()).attr("Underline",i.isUnderline()).close().close().elem("Curve").attr("IsCurved",i.isActiveCurve()).attr("Clockwise",i.isCurveCw()).close();var r=n.elem("Effect");r.attr("TextSpace",i.getFontDetailTextSpace()/10).attr("ScaleX",i.getFontDetailScaleXAcc()/100).elem("Outline").attr("DoOutline",i.isActiveOutline()).attr("Color",E.a.parseRGBAColorSet({rgb:i.getOutlineColor(),alpha:i.getOutlineAlpha()})).attr("Size",i.getOutlineSize()).close().elem("Shadow").attr("DoShadow",i.isActiveOutline()).attr("Color",E.a.parseRGBAColorSet({rgb:i.getShadowColor(),alpha:i.getShadowAlpha()})).attr("Distance",i.getShadowDistance()).attr("Angle",i.getShadowAngle()).attr("Spread",i.getShadowSpread()/10).close();var a=r.elem("Fill");if(a.attr("Type",i.getFillType()),i.isActiveGradient()&&a.elem("Gradient").attr("Angle",i.getGradientAngle()).elem("Color1").text(E.a.parseRGBAColorSet({rgb:i.getGradientColor1(),alpha:255})).close().elem("Color2").text(E.a.parseRGBAColorSet({rgb:i.getGradientColor2(),alpha:255})).close().elem("Color3").text(E.a.parseRGBAColorSet({rgb:i.getGradientColor3(),alpha:255})).close().elem("Color4").text(E.a.parseRGBAColorSet({rgb:i.getGradientColor4(),alpha:255})).close().close(),e instanceof m.a){var o=e;n.attr("NameCardBool",o.namecardAttr.namecardBool?-1:0).attr("NameCardType",o.namecardAttr.namecardType).attr("NameCardGlobal",o.namecardAttr.namecardGlobal?-1:0).attr("NameCardOrder",o.namecardAttr.namecardOrder)}}}]),t}(f),T=function(){function e(){r()(this,e)}return o()(e,[{key:"makeXml",value:function(e,t){t.attr("ColorEffect",e.getColorEffect()).attr("Bright",e.getBrightness()).attr("Contrast",e.getContrast()).attr("Blur",e.getBlur()).attr("Vignette",e.getVignette()).attr("Hue",e.getTint()).attr("ColorTone",e.getColorTone()).attr("Temperature",e.getTemperature()).attr("Saturation",e.getSaturation()).attr("Lightness",e.getLightness()).attr("FpType",e.getFramePhotoType()).attr("FpColor",E.a.parseRGBAColorSet({rgb:e.getSolidLineColor(),alpha:e.getSolidLineAlpha()})).attr("FpThickness",e.getSolidLineThickness()).attr("FpBMid",e.getBitmapMaskBitmapId()).attr("ColorEffect",e.getColorEffect()).elem("StickerFrame").attr("StickerId",e.getStickerFrameStickerId()).close().attr("FpGRdirection",e.getGradationMaskDirection()).attr("FpGRdepth",e.getGradationMaskDepth()).attr("FpShadowColor",e.getShadowColor(!0)).attr("FpShadowAngle",e.getShadowAngle(!0)).attr("FpShadowAlpha",e.getShadowAlpha(!0)).attr("FpShadowDistance",e.getShadowDistance(!0)).attr("FpShadowBlur",e.getShadowBlur(!0))}}]),e}(),_=function(e){function t(){return r()(this,t),l()(this,u()(t).apply(this,arguments))}return v()(t,e),o()(t,[{key:"makeXml",value:function(e,n){d()(u()(t.prototype),"makeXml",this).call(this,e,n),n.get("Position").attr("Left",e.itemPosition.left).attr("Top",e.itemPosition.top).attr("Right",e.itemPosition.right).attr("Bottom",e.itemPosition.bottom).close().elem("FramePosition").attr("Left",e.props.getLeft()).attr("Top",e.props.getTop()).attr("Right",e.props.getRight()).attr("Bottom",e.props.getBottom()).close().attr("FrameRotate",-e.props.getRotate()).attr("BelongsTo",e.belongsTo).attr("Rotate",-e.props.getItemRotate()).attr("PhotoKey",e.props.getPhotoKey()).attr("IsGradationMask",e.isGradationMasked?-1:0).attr("IsShadow",e.props.isActiveShadow()).attr("OriginType",e.orgType).attr("BackgroundState",e.backgroundState).attr("SkinRatioId",e.skinRatioId).attr("IsCropped",e.photoCrop.isCropped),(new T).makeXml(e.props,n)}}]),t}(f),I=function(){function e(){r()(this,e)}return o()(e,[{key:"makeXml",value:function(e,t){t.elem("BACKGROUND").elem("PureSkinSize").attr("cx",e.pureSkinSize.width).attr("cy",e.pureSkinSize.height).close().elem("CropRect").attr("Left",e.cropRect.left).attr("Top",e.cropRect.top).attr("Right",e.cropRect.right).attr("Bottom",e.cropRect.bottom).close().attr("Color",e.color).attr("LayerName",e.layerName).close()}}]),e}(),C=n(116),S=function(e){function t(){return r()(this,t),l()(this,u()(t).apply(this,arguments))}return v()(t,e),o()(t,[{key:"makeXml",value:function(e,n){d()(u()(t.prototype),"makeXml",this).call(this,e,n),n.attr("NewGrid",!0).attr("AspectRatio",e.aspectRatio).attr("borderScaleStandard",e.borderScaleStandard),e.cols.forEach(function(e,t){n.elem("COL").attr("No",t+1).attr("Ratio",e.thicknessRatio).attr("Width",e.thickness).close()}),e.rows.forEach(function(e,t){n.elem("ROW").attr("No",t+1).attr("Ratio",e.thicknessRatio).attr("Width",e.thickness).close()});var i=new y,r=new w;e.cells.forEach(function(e,t){e.forEach(function(e,a){var o=n.elem("CELL");o.attr("Row",t+1).attr("Col",a+1).attr("BGColor",e.cellProps.getCellBackgroundColor()).attr("CellType",e.cellType).close(),r.makeXml(e.borders.left,o.elem("CellOutLineLeft")),r.makeXml(e.borders.top,o.elem("CellOutLineTop")),r.makeXml(e.borders.right,o.elem("CellOutLineRight")),r.makeXml(e.borders.bottom,o.elem("CellOutLineBottom")),r.makeXml(e.borders.downDiagonal,o.elem("CellOutLineDLTRB")),r.makeXml(e.borders.upDiagonal,o.elem("CellOutLineDLBRT")),e.cellType===C.c.SLAVE?o.attr("MasterCellRowNo",e.masterCell.row).attr("MasterCellColNo",e.masterCell.col):e.cellType===C.c.MASTER&&o.attr("ChildCellRowNo",e.childCellsPos.endPos.row).attr("ChildCellColNo",e.childCellsPos.endPos.col),i.makeXml(e.childTextItem,o.elem("CHILDTEXT"))})})}}]),t}(f),w=function(){function e(){r()(this,e)}return o()(e,[{key:"makeXml",value:function(e,t){t.attr("Visible",e.visible).attr("Width",e.thickness).attr("Color",e.color)}}]),e}(),k=n(54),R=function(e){function t(){return r()(this,t),l()(this,u()(t).apply(this,arguments))}return v()(t,e),o()(t,[{key:"makeXml",value:function(e,n){d()(u()(t.prototype),"makeXml",this).call(this,e,n),n.attr("SvgKey",e.svgData.key);var i=n.elem("fillColorMap"),r=e.getOriginColors(),a=!0,o=!1,s=void 0;try{for(var l,c=r[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var h=l.value;e.props.setCurrentOriginColor(h),i.elem("fillColor").attr("originColor",h).attr("color",e.props.getColor())}}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}n.elem("Shadow").attr("IsShadow",e.props.isActiveShadow()).attr("Color",e.props.getShadowColor(!0)).attr("Angle",e.props.getShadowAngle(!0)).attr("Alpha",e.props.getShadowAlpha(!0)).attr("Distance",e.props.getShadowDistance(!0)).attr("Blur",e.props.getShadowBlur(!0))}}]),t}(f),L=function(e){function t(){return r()(this,t),l()(this,u()(t).apply(this,arguments))}return v()(t,e),o()(t,[{key:"makeXml",value:function(e,n){(d()(u()(t.prototype),"makeXml",this).call(this,e,n),n.attr("OriginFlipHor",e.originPhotoFlipHor).attr("OriginFlipVer",e.originPhotoFlipVer),e.innerPhotoItem)&&(new _).makeXml(e.innerPhotoItem,n.elem("PHOTO"))}}]),t}(R),O=function(e){function t(){return r()(this,t),l()(this,u()(t).apply(this,arguments))}return v()(t,e),o()(t,[{key:"makeXml",value:function(e,n){d()(u()(t.prototype),"makeXml",this).call(this,e,n)}}]),t}(R),A=function(e){function t(){return r()(this,t),l()(this,u()(t).apply(this,arguments))}return v()(t,e),o()(t,[{key:"makeXml",value:function(e,n){d()(u()(t.prototype),"makeXml",this).call(this,e,n),n.attr("IsBackground",e.isBackground).attr("PatternCountRatio",e.props.patternCountRatio).close();var i=!0,r=!1,a=void 0;try{for(var o,s=e.layers[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var l=o.value;n.elem("SvgLayer").attr("layerId",l.layerId).attr("left",l.left).attr("top",l.top).attr("scaleX",l.scaleX).attr("scaleY",l.scaleY).attr("scaleCommon",l.scaleCommon).attr("layerLeft",l.svgLayer.left).attr("layerTop",l.svgLayer.top).attr("layerWidth",l.svgLayer.width).attr("layerHeight",l.svgLayer.height).attr("moveOffsetX",l.svgLayer.moveOffsetX).attr("moveOffsetY",l.svgLayer.moveOffsetY).attr("extendOffsetX",l.svgLayer.extendOffsetX).attr("extendOffsetY",l.svgLayer.extendOffsetY).attr("type",l.svgLayer.type.value).close()}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}}}]),t}(R),b=function(e){function t(){return r()(this,t),l()(this,u()(t).apply(this,arguments))}return v()(t,e),o()(t,[{key:"makeXml",value:function(e,n){d()(u()(t.prototype),"makeXml",this).call(this,e,n);var i=e.props;n.elem("Outline").attr("DoOutline",i.isActiveOutline()).attr("Color",E.a.parseRGBAColorSet({rgb:i.getOutlineColor(),alpha:i.getOutlineAlpha()})).attr("Size",i.getOutlineSize()).attr("Type",i.getOutlineType()).close().attr("ScaleX",e.scaleX).attr("ScaleY",e.scaleY).attr("ScaleCommon",e.scaleCommon)}}]),t}(R),P=n(123),N=function(){function e(){r()(this,e)}return o()(e,[{key:"makeXml",value:function(e,t){var n=t.elem("GUIDELINES");this.makeGuidelineGroupXml("HORIZONTAL",e.getGuidelineFactoryInfo(P.c.HOR),n),this.makeGuidelineGroupXml("VERTICAL",e.getGuidelineFactoryInfo(P.c.VER),n),n.close()}},{key:"makeGuidelineGroupXml",value:function(t,n,i){var r=i.elem(t);r.attr("NowPosition",n.nowPosition),r.attr("Plus",n.plus),n.guidelines.forEach(function(t){e.makeGuidelineXml(t,r)}),r.close()}}],[{key:"makeGuidelineXml",value:function(e,t){var n=t.elem("GUIDELINE");n.attr("InitPosition",e.initPosition),n.attr("LastPosition",e.lastPosition),n.close()}}]),e}(),x=n(71),M=function(e){function t(){return r()(this,t),l()(this,u()(t).apply(this,arguments))}return v()(t,e),o()(t,[{key:"makeXml",value:function(e,n){d()(u()(t.prototype),"makeXml",this).call(this,e,n),n.attr("IsBackground",e.isBackground).attr("PatternCountRatio",e.props.patternCountRatio).close();var i=!0,r=!1,a=void 0;try{for(var o,s=e.layers[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var l=o.value;n.elem("SvgLayer").attr("layerId",l.layerId).attr("left",l.left).attr("top",l.top).attr("scaleX",l.scaleX).attr("scaleY",l.scaleY).attr("scaleCommon",l.scaleCommon).attr("layerLeft",l.svgLayer.left).attr("layerTop",l.svgLayer.top).attr("layerWidth",l.svgLayer.width).attr("layerHeight",l.svgLayer.height).attr("moveOffsetX",l.svgLayer.moveOffsetX).attr("moveOffsetY",l.svgLayer.moveOffsetY).attr("extendOffsetX",l.svgLayer.extendOffsetX).attr("extendOffsetY",l.svgLayer.extendOffsetY).attr("type",l.svgLayer.type.value).close()}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}}}]),t}(R);n.d(t,"a",function(){return D});var D=function(){function e(){r()(this,e)}return o()(e,[{key:"makeXml",value:function(t,n){(n.attr("RatioId",t.ratioId).attr("TemplateName",t.templateName).attr("LayoutId",t.layoutId).attr("PageTitle",t.title).attr("IsFreeStyle",!0).attr("Page",t.pageIdx+1).elem("SHEETSIZE").attr("cx",t.sheetSize.width).attr("cy",t.sheetSize.height).close().elem("TEMPLATE").attr("Width",t.sheetSize.width).attr("Height",t.sheetSize.height).close(),(new I).makeXml(t.background,n),t.guidelineManager)&&(new N).makeXml(t.guidelineManager,n);var i=t.getAllSingleItems().slice(),r=t.items.slice();e.makeItemsXml(i,n),e.makeGroupsXml(r,n)}}],[{key:"makeItemsXml",value:function(e,t){var n=new g,i=new y,r=new _,a=new S,o=new A,s=new M,l=new b,c=new O,u=new L;e.forEach(function(e,h){switch(e.priority=h,e.getItemType()){case x.a.TEXT:i.makeXml(e,t.elem("TEXT"));break;case x.a.PHOTO:var d=e;d.isStickerable()?n.makeXml(d,t.elem("STICKER")):r.makeXml(d,t.elem("PHOTO"));break;case x.a.GRID:a.makeXml(e,t.elem("GRID"));break;case x.a.ITEM_SVG_GRAPHIC_SEC:s.makeXml(e,t.elem("SVG_PRIVATE"));break;case x.a.SVG_GRAPHIC:o.makeXml(e,t.elem("SVG"));break;case x.a.SVG_BASIC:c.makeXml(e,t.elem("BASICSVG"));break;case x.a.SVG_SHAPE:l.makeXml(e,t.elem("SHAPESVG"));break;case x.a.SVG_IMAGE_FRAME:u.makeXml(e,t.elem("SVGIMAGEFRAME"))}})}},{key:"makeGroupsXml",value:function(e,t){var n=this,i=new Map;e.forEach(function(e){e instanceof k.a&&i.set(e.getGroupId(),e)}),i.forEach(function(e){n.makeGroupXml(e,t.elem("GROUP"))})}},{key:"makeGroupXml",value:function(e,t){var n=this;t.attr("Id",e.getGroupId()),t.attr("LayerName",e.layerName),e.getMembers().forEach(function(e){e instanceof k.a&&n.makeGroupXml(e,t.elem("GROUP"))})}}]),e}()},,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return m});var i=n(35),r=n.n(i),a=n(36),o=n.n(a),s=n(39),l=n.n(s),c=n(38),u=n.n(c),h=n(44),d=n.n(h),p=n(40),v=n.n(p),f=n(37),g=n.n(f),m=function(e){function t(){var e,n;r()(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=l()(this,(e=u()(t)).call.apply(e,[this].concat(a))),g()(d()(n),"cellBackgroundColor","#ffffff"),g()(d()(n),"cellBackgroundRevision",0),n}return v()(t,e),o()(t,[{key:"getCellBackgroundColor",value:function(){return this.cellBackgroundColor}},{key:"setCellBackgroundColor",value:function(e){this.cellBackgroundColor!==e&&(this.updateRevision(),this.cellBackgroundRevision++),this.cellBackgroundColor=e}},{key:"makeClone",value:function(){return new t}}]),t}(n(103).a)},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n(35),r=n.n(i),a=n(36),o=n.n(a),s=n(37),l=n.n(s),c=n(116),u=function(){function e(t,n,i){r()(this,e),l()(this,"borderVisible",!0),l()(this,"borderThickness",100),l()(this,"borderColor","#000000"),l()(this,"borderAlpha",255),l()(this,"borderRevision",0),this.ownerCell=t,this.type=n,this.initThickness=i,this.borderThickness=i}return o()(e,[{key:"render",value:function(e){if(this.borderThickness<=0)this.gridSvgString="";else{var t=100/(this.ownerCell.gridItem.getWidth()*e),n=100/(this.ownerCell.gridItem.getHeight()*e),i=this.ownerCell.getWidth(e),r=this.ownerCell.getHeight(e),a=this.ownerCell.getLeft(e),o=this.ownerCell.getTop(e),s=a+i,l=o+r,u=Math.sqrt(i*i+r*r),h=Math.max(1,this.getLineThickness(e));switch(this.type){case c.a.LEFT:this.gridSvgString='<rect \n                    x="'.concat((a-h/2)*t,'%" \n                    y="').concat((o-h/2)*n,'%" \n                    width="').concat(h,'px" height="').concat((r+h)*n,'%" \n                    fill="').concat(this.color,'" />');break;case c.a.TOP:this.gridSvgString='<rect \n                    x="'.concat((a-h/2)*t,'%" \n                    y="').concat((o-h/2)*n,'%" \n                    width="').concat((i+h)*t,'%" height="').concat(h,'px" \n                    fill="').concat(this.color,'" />');break;case c.a.RIGHT:this.gridSvgString='<rect \n                    x="'.concat((s-h/2)*t,'%" \n                    y="').concat((o-h/2)*n,'%" \n                    width="').concat(h,'px" height="').concat((r+h)*n,'%" \n                    fill="').concat(this.color,'" />');break;case c.a.BOTTOM:this.gridSvgString='<rect \n                    x="'.concat((a-h/2)*t,'%" \n                    y="').concat((l-h/2)*n,'%" \n                    width="').concat((i+h)*t,'%" height="').concat(h,'px" \n                    fill="').concat(this.color,'" />');break;case c.a.DOWNDIAGONAL:this.gridSvgString='<rect \n                    x="'.concat(a*t,'%" y="').concat((o-h/2)*n,'%" \n                    width="').concat(u*t,'%" height="').concat(h,'px" \n                    transform="rotate(').concat(180*Math.atan(r/i)/Math.PI,", ").concat(a,", ").concat(o,')" fill="').concat(this.color,'" />');break;case c.a.UPDIAGONAL:this.gridSvgString='<rect \n                    x="'.concat(a*t,'%" y="').concat((o-h/2+r)*n,'%" \n                    width="').concat(u*t,'%" height="').concat(h,'px" \n                    transform="rotate(').concat(180*-Math.atan(r/i)/Math.PI,", ").concat(a,", ").concat(o+r,')" fill="').concat(this.color,'" />');break;default:this.gridSvgString=""}}}},{key:"getLineThickness",value:function(e){return this.thickness*e/2*this.ownerCell.gridItem.borderScaleStandard/800}},{key:"assign",value:function(e){this.borderColor=e.color,this.borderAlpha=e.alpha,this.borderThickness=e.thickness,this.borderVisible=e.visible,this.updateRevesion()}},{key:"clone",value:function(){var t=new e(this.ownerCell,this.type,this.initThickness);return t.thickness=this.thickness,t.visible=this.visible,t.color=this.color,t.alpha=this.alpha,t}},{key:"updateRevesion",value:function(){this.borderRevision++}},{key:"visible",get:function(){return this.borderVisible},set:function(e){this.borderVisible!==e&&(this.borderVisible=e,this.updateRevesion())}},{key:"thickness",get:function(){return this.borderThickness},set:function(e){this.borderThickness!==e&&(this.borderThickness=e)}},{key:"color",get:function(){return this.borderColor},set:function(e){this.borderColor!==e&&(this.borderColor=e,this.updateRevesion())}},{key:"alpha",get:function(){return this.borderAlpha},set:function(e){this.borderAlpha!==e&&(this.borderAlpha=e,this.updateRevesion())}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return y});var i=n(35),r=n.n(i),a=n(36),o=n.n(a),s=n(37),l=n.n(s),c=n(50),u=n(49),h=n(191),d=n(3),p=n(133),v=n(59),f=n(257),g=n(166),m=n(151),E=n(258),y=function(){function e(t){r()(this,e),l()(this,"pureSkinSize",{}),l()(this,"_cropRect",new u.a(0,0,0,0)),l()(this,"defaultBackgroundItem",null),l()(this,"bgColor",e.DEFAULT_COLOR),this.page=t,this.defaultBackgroundItem=this.createNewPhotoBackgroundItem("ts_1010")}return o()(e,[{key:"createNewPhotoBackgroundItem",value:function(e,t){var n,i=Math.ceil(this.page.sheetSize.width),r=Math.ceil(this.page.sheetSize.height);if(t){(n=t.clone()).initRotateLTRBCoordinate(),n.initCropAndOriginSizeRollback();var a=v.b.getData(n.props.getPhotoKey()),o=f.a.getCenterFixRect(i,r,a.width,a.height);n.setLTRBCoordinate(o),n.backgroundState=c.a.PHOTO_TO_BACKGROUND}else{var s="".concat((new Date).getTime(),"-").concat(d.StringUtil.random());(n=new c.e(s,0,0,i,r)).props.setPhotoKey(e),n.orgType=c.b.Skin,n.backgroundState=c.a.ORIGIN}return n.skinRatioId=this.page.ratioId,n}},{key:"createNewSvgBackgroundItem",value:function(e,t){var n,i=this.page.sheetSize,r=i.width,a=i.height,o=r>a?a:r;(n=E.a.isPrivateSvgItem(e)?new g.a("".concat((new Date).getTime(),"-").concat(Math.random()),e,-1,-1,Math.ceil(o)+1,Math.ceil(o)+1):new p.a("".concat((new Date).getTime(),"-").concat(Math.random()),e,-1,-1,Math.ceil(o)+1,Math.ceil(o)+1)).isBackground=!0;var s=new u.a(-1,-1,i.width+1,i.height+1);if(n.setLTRBCoordinate(s,!1,null),t&&1===n.layers.length){var l=n.getOriginColors()[0];n.props.setCurrentOriginColor(l),n.props.setColor(t)}return n}},{key:"existBackgroundItem",value:function(){return this.page.items.length>0&&null!==this.getBackgroundItem()}},{key:"getBackgroundItem",value:function(){var e=null,t=!0,n=!1,i=void 0;try{for(var r,a=this.page.items[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;if(h.a.isItemSkinable(o,this.page.sheetSize)){e=o;break}}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return e}},{key:"removeBackground",value:function(){this.page.removeItem(this.backgroundItem)}},{key:"changeToPhotoSkin",value:function(e){this.existBackgroundItem()&&this.removeBackground(),this.page.addItem(e,0)}},{key:"changeToSvgSkin",value:function(e){this.existBackgroundItem()&&this.removeBackground(),this.page.addItem(e,0)}},{key:"getSkinId",value:function(){return this.existBackgroundItem()?this.backgroundItem.props.getPhotoKey():this.defaultBackgroundItem.props.getPhotoKey()}},{key:"setSkin",value:function(e){e?e instanceof c.e?this.changeToPhotoSkin(e):this.changeToSvgSkin(e):this.removeBackground()}},{key:"isSkinItem",value:function(e){return e===this.getBackgroundItem()}},{key:"isWhiteColor",value:function(){return this.color.toLowerCase()===e.DEFAULT_COLOR||"#fff"===this.color.toLowerCase()}},{key:"changeSize",value:function(t){var n=this.backgroundItem;n&&(n instanceof c.e?e.changeSizePhoto(n,t,this.page.sheetSize):n instanceof m.a&&e.changeSizeSvg(n,t))}},{key:"setCropLTRB",value:function(e,t,n,i){e||t||n||i?this._cropRect.setLTRB(new u.a(e,t,n,i)):(this.changeSize(this.page.sheetSize),this.backgroundItem instanceof c.e&&this._cropRect.setLTRB(this.backgroundItem.getLTRBCoordinate()))}},{key:"getItemKey",value:function(){return"skin-".concat(this.defaultBackgroundItem.tbpeId)}},{key:"cropRect",get:function(){return this._cropRect}},{key:"backgroundItem",get:function(){return this.getBackgroundItem()}},{key:"color",set:function(e){e&&(this.bgColor=e)},get:function(){return this.bgColor}}],[{key:"changeSizePhoto",value:function(e,t,n){var i=e,r=new u.a(0,0,t.width,t.height),a=f.a.getResizeBackgroundRectByNewPageSize(n,t,i.itemPosition.clone());e.setLTRBCoordinate(r),e.itemPosition=a,e.photoCrop.isCropped=!0}},{key:"changeSizeSvg",value:function(e,t){var n=new u.a(0,0,t.width,t.height);e.setLTRBCoordinate(n),e.initScaleAndLayers(),e.updatePatternByRatio(e.props.patternCountRatio)}}]),e}();l()(y,"DEFAULT_COLOR","#ffffff")},function(e,t,n){"use strict";n.d(t,"a",function(){return y});var i=n(35),r=n.n(i),a=n(36),o=n.n(a),s=n(39),l=n.n(s),c=n(44),u=n.n(c),h=n(38),d=n.n(h),p=n(46),v=n.n(p),f=n(40),g=n.n(f),m=n(37),E=n.n(m),y=function(e){function t(){var e,n;r()(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=l()(this,(e=d()(t)).call.apply(e,[this].concat(a))),E()(u()(n),"patternCountRatio",1),n}return g()(t,e),o()(t,[{key:"clone",value:function(){var e=v()(d()(t.prototype),"clone",this).call(this);return e.patternCountRatio=this.patternCountRatio,e}}]),t}(n(114).b)},,function(e,t,n){"use strict";n.d(t,"a",function(){return w});var i=n(0),r=n.n(i),a=n(1),o=n.n(a),s=n(37),l=n.n(s),c=n(35),u=n.n(c),h=n(36),d=n.n(h),p=n(39),v=n.n(p),f=n(38),g=n.n(f),m=n(40),E=n.n(m),y=n(43),T=n(3),_=n(47),I=n(101),C=n(52),S=function(e){function t(){return u()(this,t),v()(this,g()(t).apply(this,arguments))}return E()(t,e),d()(t,[{key:"getErrorMsg",value:function(){return""}},{key:"setData",value:function(e){this._backgroundInfo=e.data}},{key:"backgroundInfo",get:function(){return this._backgroundInfo}}]),t}(_.ApiResponse),w=function(){function e(){u()(this,e)}var t,n,i;return d()(e,null,[{key:"getData",value:(i=o()(r.a.mark(function e(t){var n,i,a,o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.cache.has(t)){e.next=2;break}return e.abrupt("return",this.cache.get(t));case 2:return n=T.CRM.get(y.a.STICKER_BACKGROUND_INFO_API_URL).replace("${stickerId}",t),i=I.a.from(C.a.BIZHOWS,!0).getURL(n),e.prev=4,e.next=7,_.ApiRequest.get(S,i);case 7:return a=e.sent,o=a.backgroundInfo,this.cache.set(t,o),e.abrupt("return",o);case 13:return e.prev=13,e.t0=e.catch(4),e.abrupt("return",null);case 16:case"end":return e.stop()}},e,this,[[4,13]])})),function(e){return i.apply(this,arguments)})},{key:"update",value:(n=o()(r.a.mark(function e(t){var n,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=T.CRM.get(y.a.STICKER_BACKGROUND_INFO_UPDATE_API_URL),i=I.a.from(C.a.BIZHOWS,!0).getURL(n),e.next=4,_.ApiRequest.post(_.DefaultApiResponse,i,{data:t});case 4:this.cache.delete(t.stickerId);case 5:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"delete",value:(t=o()(r.a.mark(function e(t){var n,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=T.CRM.get(y.a.STICKER_BACKGROUND_INFO_DELETE_API_URL),i=I.a.from(C.a.BIZHOWS,!0).getURL(n),e.next=4,_.ApiRequest.post(_.DefaultApiResponse,i,{data:{stickerId:t}});case 4:this.cache.set(t,null);case 5:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})}]),e}();l()(w,"cache",new Map)},,function(e,t,n){"use strict";n.d(t,"a",function(){return C});var i=n(35),r=n.n(i),a=n(36),o=n.n(a),s=n(39),l=n.n(s),c=n(38),u=n.n(c),h=n(40),d=n.n(h),p=n(194),v=n(219),f=n(195),g=n(197),m=n(198),E=n(52),y=n(199),T=n(200),_=n(201),I=n(202),C=function(e){function t(){return r()(this,t),l()(this,u()(t).apply(this,arguments))}return d()(t,e),o()(t,[{key:"getTextParser",value:function(e){return new m.a}},{key:"getStickerParser",value:function(e){return new g.a}},{key:"getPhotoParser",value:function(e){return new v.a}},{key:"getCalendarParser",value:function(e){return null}},{key:"getSvgParser",value:function(e){return new f.a}},{key:"getPrivateSvgParser",value:function(e){return new I.a}},{key:"getBasicSvgParser",value:function(e){return new T.a}},{key:"getShapeSvgParser",value:function(e){return new _.a}},{key:"getSvgImageframeParser",value:function(e){return new y.a(this.getPhotoParser(e))}},{key:"getRepositoryType",value:function(){return E.a.UNICORN}}]),t}(p.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n(35),r=n.n(i),a=n(36),o=n.n(a),s=n(54),l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";r()(this,e),this.tbpeGroupIdPrefix=t}return o()(e,[{key:"parse",value:function(e){return this.parseRecursive(e)}},{key:"parseRecursive",value:function(e){var t=this,n=[];if(!e)return n;if(Array.isArray(e))e.forEach(function(e){n=n.concat(t.parseRecursive(e))});else{var i=this.tbpeGroupIdPrefix+e["@Id"],r=new s.a(i);r.layerName=e["@LayerName"]||"",this.parseRecursive(e.GROUP).forEach(function(e){r.addMember(e)}),n.push(r)}return n}}]),e}()},,function(e,t,n){"use strict";n.d(t,"a",function(){return E});var i=n(0),r=n.n(i),a=n(1),o=n.n(a),s=n(35),l=n.n(s),c=n(36),u=n.n(c),h=n(37),d=n.n(h),p=n(47),v=n(3),f=n(43),g=n(42),m=function(){function e(){l()(this,e)}var t,n,i,a,s;return u()(e,null,[{key:"addPalette",value:(s=o()(r.a.mark(function t(n){var i,a,o;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=v.CRM.get(f.a.SVG_HOST)+"/api/user-palette/",a={name:n.name},t.next=4,p.UnicornApiRequest.post(i,{data:JSON.stringify(a),contentType:e.CONTENTS_TYPE});case 4:return o=t.sent,this.setCacheData(o.data),this.setCacheOrder(o.data),t.abrupt("return",o.data.idx);case 8:case"end":return t.stop()}},t,this)})),function(e){return s.apply(this,arguments)})},{key:"loadPaletteData",value:(a=o()(r.a.mark(function e(t){var n,i,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._cacheData.clear(),this._cacheOrder.clear(),n=v.CRM.get(f.a.SVG_HOST)+"/api/user-palette/",e.next=5,p.UnicornApiRequest.get(n);case 5:return i=e.sent,a=i.data,this.setCacheDatas(a),this.setCacheOrders(a),e.abrupt("return",a);case 10:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"getPaletteList",value:function(e){var t=this,n=[];this._cacheOrder.forEach(function(e,i){n.push({palette:t._cacheData.get(i),order:e})});var i=[].concat(n).sort(function(e,t){return e.order>t.order?1:-1}),r=[],a=!0,o=!1,s=void 0;try{for(var l,c=i[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var u=l.value;r.push(u.palette)}}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}return{list:r}}},{key:"updatePalette",value:(i=o()(r.a.mark(function t(n){var i,a,o;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:return n.colors.forEach(function(e){if(0!==e.indexOf("#"))throw new Error("잘못된 컬러가 포함되어있습니다.\n\n                palette idx: ".concat(n.idx,"\n\n                palette name: ").concat(n.name,"\n\n                color: ").concat(e,"\n\n                whole colors: ").concat(n.colors))}),i=v.CRM.get(f.a.SVG_HOST)+"/api/user-palette/".concat(n.idx),a={name:n.name,colors:0===n.colors.length?null:n.colors},t.next=7,p.UnicornApiRequest.put(i,{data:JSON.stringify(a),contentType:e.CONTENTS_TYPE});case 7:(o=this.getPalette(n.idx)).name=n.name,o.colors=n.colors,this.setCacheData(o);case 11:case"end":return t.stop()}},t,this)})),function(e){return i.apply(this,arguments)})},{key:"deletePalette",value:(n=o()(r.a.mark(function e(t){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=v.CRM.get(f.a.SVG_HOST)+"/api/user-palette/".concat(t.idx),this._cacheData.delete(t.idx),this._cacheOrder.delete(t.idx),e.next=5,p.UnicornApiRequest.delete(n);case 5:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"arrangePalette",value:(t=o()(r.a.mark(function t(n){var i,a=this;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=v.CRM.get(f.a.SVG_HOST)+"/api/user-palette/arrange",t.next=3,p.UnicornApiRequest.put(i,{data:JSON.stringify(n.idxOrderList),contentType:e.CONTENTS_TYPE});case 3:n.idxOrderList.forEach(function(e,t){a.setCacheOrder(a._cacheData.get(e),t)});case 4:case"end":return t.stop()}},t)})),function(e){return t.apply(this,arguments)})},{key:"setCacheDatas",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,a=e.list[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;this.setCacheData(o)}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}}},{key:"setCacheData",value:function(e){void 0!==e.colors&&null!==e.colors||(e.colors=[]),this._cacheData.set(e.idx,e)}},{key:"setCacheOrders",value:function(e){var t=this;e.list.forEach(function(e,n){t.setCacheOrder(e,n)})}},{key:"setCacheOrder",value:function(e,t){void 0===t&&(t=Number.MAX_SAFE_INTEGER,this._cacheOrder.forEach(function(e){t=Math.min(t,e)}),t--),this._cacheOrder.set(e.idx,t)}},{key:"getPalette",value:function(e){return this._cacheData.get(e)}},{key:"getPaletteCount",value:function(){return this._cacheData.size}}]),e}();d()(m,"_cacheData",new Map),d()(m,"_cacheOrder",new Map),d()(m,"CONTENTS_TYPE","application/json");var E=function(){function e(){l()(this,e)}var t,n,i,a,s,c,h,d;return u()(e,null,[{key:"loadPaletteData",value:(d=o()(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!g.a.instance.user.isLogin()){e.next=2;break}return e.abrupt("return",m.loadPaletteData(t));case 2:return e.abrupt("return",null);case 3:case"end":return e.stop()}},e)})),function(e){return d.apply(this,arguments)})},{key:"addPalette",value:(h=o()(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.addPalette(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),function(e){return h.apply(this,arguments)})},{key:"getPaletteList",value:function(e){return g.a.instance.user.isLogin()?m.getPaletteList(e):{list:[]}}},{key:"getPalette",value:function(e){return m.getPalette(e)}},{key:"updatePaletteName",value:(c=o()(r.a.mark(function e(t){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={idx:t.idx,name:t.name,colors:m.getPalette(t.idx).colors},e.next=3,m.updatePalette(n).catch(function(e){console.error(e),alert("팔레트 이름 수정에 실패하였습니다. 잠시 후 다시 시도해주세요.")});case 3:case"end":return e.stop()}},e)})),function(e){return c.apply(this,arguments)})},{key:"updatePaletteColors",value:(s=o()(r.a.mark(function e(t){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={idx:t.idx,name:m.getPalette(t.idx).name,colors:t.colors},e.next=3,m.updatePalette(n).catch(function(e){console.error(e),alert("팔레트 색상 변경에 실패하였습니다. 잠시 후 다시 시도해주세요.")});case 3:case"end":return e.stop()}},e)})),function(e){return s.apply(this,arguments)})},{key:"deletePalette",value:(a=o()(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.deletePalette(t);case 2:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)})},{key:"arrangePalette",value:(i=o()(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.arrangePalette(t);case 2:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)})},{key:"addColor",value:(n=o()(r.a.mark(function e(t){var n,i,a,o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=m.getPalette(t.idx),i=n.colors.slice(),(a=i.indexOf(t.color))<0?i.splice(0,0,t.color):(i.splice(a,1),i.splice(0,0,t.color)),o={idx:t.idx,name:n.name,colors:i},e.next=7,m.updatePalette(o).catch(function(e){console.error(e),alert("팔레트 색상 추가에 실패하였습니다. 잠시 후 다시 시도해주세요.")});case 7:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)})},{key:"removeColors",value:(t=o()(r.a.mark(function e(t){var n,i,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=m.getPalette(t.idx),i=n.colors.slice(),t.colors.forEach(function(e){var t=i.indexOf(e);t>=0&&i.splice(t,1)}),a={idx:t.idx,name:n.name,colors:i},e.next=6,m.updatePalette(a).catch(function(e){console.error(e),alert("팔레트 색상 삭제에 실패하였습니다. 잠시 후 다시 시도해주세요.")});case 6:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})}]),e}();d()(E,"MAX_PALETTE_COUNT",20)},,function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i,r=n(39),a=n.n(r),o=n(38),s=n.n(o),l=n(40),c=n.n(l),u=n(139),h=n.n(u),d=n(0),p=n.n(d),v=n(1),f=n.n(v),g=n(35),m=n.n(g),E=n(36),y=n.n(E),T=n(97),_=n(3),I=n(43),C=n(52),S=n(48),w=n(60),k=(n(329),n(205)),R=n(156),L=n(107),O=n(88),A=n(42),b=n(47);(i||(i={})).create=function(e,t){switch(e){case S.a.MOCKUP:case S.a.GRID:case S.a.TEXT:return new N(t);case S.a.PHOTO:return new B(t);case S.a.BITMAP:case S.a.IMAGE:case S.a.BACKGROUND_IMAGE:return new x(t);case S.a.TEMPLATE:return new M(t);case S.a.DESIGN:return new D;case S.a.GRAPHIC:case S.a.LINE:case S.a.FIGURE:case S.a.ILLUST:case S.a.BACKGROUND_PATTERN:return new U(t);case S.a.TEMPLATE_STYLE:return new F(t);case S.a.FRAME:return new G(t)}return console.log("can not find my collection api client. resourceType : ".concat(e,", repositoryType : ").concat(t)),null};var P=function(){function e(t){m()(this,e),this.repositoryType=t}var t,n;return y()(e,[{key:"isExternalRequest",value:function(){return!1}}]),y()(e,[{key:"request",value:(n=f()(p.a.mark(function e(t){var n,i;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.url){e.next=17;break}if(n="".concat(this.url,"?").concat($.param(this.getParam(t),!0)),!this.isExternalRequest()){e.next=8;break}return e.next=5,b.ApiRequest.getDefault(n);case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,b.UnicornApiRequest.get(n);case 10:e.t0=e.sent;case 11:return i=e.t0,e.next=14,this.getList(i);case 14:return e.abrupt("return",e.sent);case 17:return e.next=19,this.getList(t);case 19:return e.abrupt("return",e.sent);case 20:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})}],[{key:"toNumberList",value:function(e){var t=[],n=!0,i=!1,r=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,l=Number(s);if(isNaN(l))throw new Error("key is NaN. - "+s);t.push(l)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return t}},{key:"requestThumbnails",value:(t=f()(p.a.mark(function e(t){var n,r,a,o,s,l,c,u,d,v,f,g,m,E,y,T,_,I,C,S,w,R;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=this.getParamMapGroupByKey(t),r=[],a=!0,o=!1,s=void 0,e.prev=5,l=n[Symbol.iterator]();case 7:if(a=(c=l.next()).done){e.next=39;break}return u=h()(c.value,2),d=u[0],v=u[1],f=this.getResourceKey(d),g=this.getRepositoryType(d),m=f.resourceType,E=i.create(m,g),y=k.a.createInstance(m,g),e.next=16,E.request(v);case 16:for(T=e.sent,_=!0,I=!1,C=void 0,e.prev=20,S=T[Symbol.iterator]();!(_=(w=S.next()).done);_=!0)R=w.value,r.push(y.getThumb(R,1920));e.next=28;break;case 24:e.prev=24,e.t0=e.catch(20),I=!0,C=e.t0;case 28:e.prev=28,e.prev=29,_||null==S.return||S.return();case 31:if(e.prev=31,!I){e.next=34;break}throw C;case 34:return e.finish(31);case 35:return e.finish(28);case 36:a=!0,e.next=7;break;case 39:e.next=45;break;case 41:e.prev=41,e.t1=e.catch(5),o=!0,s=e.t1;case 45:e.prev=45,e.prev=46,a||null==l.return||l.return();case 48:if(e.prev=48,!o){e.next=51;break}throw s;case 51:return e.finish(48);case 52:return e.finish(45);case 53:return e.abrupt("return",r);case 54:case"end":return e.stop()}},e,this,[[5,41,45,53],[20,24,28,36],[29,,31,35],[46,,48,52]])})),function(e){return t.apply(this,arguments)})},{key:"getParamMapGroupByKey",value:function(e){var t=new Map,n=!0,i=!1,r=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,l=this.getKey(s),c=t.get(l);c||(c=[]),c.push(s.referenceKey),t.set(l,c)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return t}},{key:"getKey",value:function(e){return R.a.getResourceKey(e.resourceType,e.repositoryType)}},{key:"getResourceKey",value:function(e){return R.a.parseResourceKey(e)}},{key:"getRepositoryType",value:function(e){return this.getResourceKey(e).key}}]),e}(),N=function(e){function t(e){return m()(this,t),a()(this,s()(t).call(this,e))}var n;return c()(t,e),y()(t,[{key:"getParam",value:function(e){var t={statusList:[T.b.ACTIVE],paging:!1};return Object.assign(t,{idxList:P.toNumberList(e)}),t}},{key:"getList",value:(n=f()(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.data.list);case 1:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)})},{key:"url",get:function(){return _.CRM.get(I.a.TYPE_FILTER_MOCK_URL)}}]),t}(P),x=function(e){function t(e){return m()(this,t),a()(this,s()(t).call(this,e))}var n;return c()(t,e),y()(t,[{key:"isExternalRequest",value:function(){return!0}},{key:"getParam",value:function(e){return{}}},{key:"getList",value:(n=f()(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",L.b.getList(t));case 1:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)})},{key:"url",get:function(){return null}}]),t}(P),M=function(e){function t(e){return m()(this,t),a()(this,s()(t).call(this,e))}var n;return c()(t,e),y()(t,[{key:"isExternalRequest",value:function(){return this.repositoryType!==C.a.UNICORN}},{key:"getParam",value:function(e){var t={idxList:P.toNumberList(e)};switch(this.repositoryType){case C.a.BIZHOWS:return Object.assign(t,{cmd:"get_design_list_by_idxes"}),t;case C.a.UNICORN:return t;default:throw Error("잘못된 repository type : ".concat(this.repositoryType))}}},{key:"getList",value:(n=f()(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.isExternalRequest()?t.data.data:t.data);case 1:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"url",get:function(){switch(this.repositoryType){case C.a.BIZHOWS:return _.CRM.get(I.a.TYPE_FILTER_BIZ_TEMPLATE_URL);case C.a.UNICORN:return _.CRM.get(I.a.TYPE_FILTER_TEMPLATE_URL);default:throw Error("잘못된 repository type : ".concat(this.repositoryType))}}}]),t}(P),D=function(e){function t(){return m()(this,t),a()(this,s()(t).call(this,C.a.UNICORN))}var n;return c()(t,e),y()(t,[{key:"getParam",value:function(e){return{idxList:P.toNumberList(e)}}},{key:"getList",value:(n=f()(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.data);case 1:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)})},{key:"url",get:function(){return _.CRM.get(I.a.TYPE_FILTER_DESIGN_URL)}}]),t}(P),B=function(e){function t(e){return m()(this,t),a()(this,s()(t).call(this,e))}var n;return c()(t,e),y()(t,[{key:"getParam",value:function(e){return{idxList:e}}},{key:"getList",value:(n=f()(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.data);case 1:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)})},{key:"url",get:function(){return _.CRM.get(I.a.TYPE_FILTER_PHOTO_URL)}}]),t}(P),U=function(e){function t(e){return m()(this,t),a()(this,s()(t).call(this,e))}var n;return c()(t,e),y()(t,[{key:"getParam",value:function(e){return{}}},{key:"getList",value:(n=f()(p.a.mark(function e(t){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.c.getSvgDataResponse({keyList:t,pageSize:30},A.a.instance.user.isAdmin());case 2:return n=e.sent,e.abrupt("return",n.svgDataList);case 4:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)})},{key:"url",get:function(){return null}}]),t}(P),G=function(e){function t(e){return m()(this,t),a()(this,s()(t).call(this,e))}var n;return c()(t,e),y()(t,[{key:"getParam",value:function(e){return{}}},{key:"getList",value:(n=f()(p.a.mark(function e(t){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.c.getImageframeDataResponse({keyList:t,pageSize:30});case 2:return n=e.sent,e.abrupt("return",n.imageframeDataList);case 4:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)})},{key:"url",get:function(){return null}}]),t}(P),F=function(e){function t(e){return m()(this,t),a()(this,s()(t).call(this,e))}var n;return c()(t,e),y()(t,[{key:"getParam",value:function(e){return{idxList:e}}},{key:"getList",value:(n=f()(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.data.list);case 1:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)})},{key:"url",get:function(){return _.CRM.get(I.a.TEMPLATE_STYLE_REPO_HOST)+"/api/template/style"}}]),t}(P)},,function(e,t,n){"use strict";n.d(t,"a",function(){return p});var i=n(35),r=n.n(i),a=n(36),o=n.n(a),s=n(262),l=n(42),c=n(49),u=n(294),h=n(136),d=n(54),p=function(){function e(){r()(this,e)}return o()(e,null,[{key:"makeCopyXml",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.a.instance.activeItems;return this.makeXml(e,!1,t)}},{key:"makeMockXml",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.a.instance.activeItems;return this.makeXml(e,!0,t)}},{key:"makeXml",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.a.instance.activeItems,i=h.a.getItemsLTRBCoordinate(n),r=new c.c(i.left,i.top),a=[],o=d.b.convertSinglesToItems(n);o.forEach(function(e){var n=e.clone();t&&n.move(-r.x,-r.y),a.push(n)});var p=parseInt(String(i.getWidth())),v=parseInt(String(i.getHeight())),f=new s.a("SHEET"),g=f.root();g.attr("Version",e).elem("SHEETSIZE").attr("cx",p).attr("cy",v).close();var m=h.a.getAllSingleItems(a);return u.a.makeItemsXml(m,g),u.a.makeGroupsXml(a,g),f.xmldoc}}]),e}()},,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n(35),r=n.n(i),a=n(36),o=n.n(a),s=n(37),l=n.n(s),c=n(67),u=function(){function e(){r()(this,e)}return o()(e,null,[{key:"parseData",value:function(t){e.metaSets=t}},{key:"getBarMeta",value:function(){var t=e.metaSets.find(function(e){return e.optionType===c.c.BAR});return{isHorizontal:t.isHorizontal,rollAreaSizeLorT:t.rollAreaSizeLorT,rollAreaSizeRorB:t.rollAreaSizeRorB,sewingDistanceLorT:t.sewingDistanceLorT,sewingDistanceRorB:t.sewingDistanceRorB,sewingAreaSize:e.SEWING_AREA_SIZE_CM}}},{key:"getMetalRingMeta",value:function(){var t=e.metaSets.find(function(e){return e.optionType===c.c.METAL_RING});return{isHorizontal:t.isHorizontal,radius:t.ringRadius,distance:t.ringDistance,addL:t.ringAddL,addT:t.ringAddT,addR:t.ringAddB,addB:t.ringAddB}}},{key:"getRodSewingMeta",value:function(){var t=e.metaSets.find(function(e){return e.optionType===c.c.ROD_SEWING});return{isHorizontal:t.isHorizontal,rollAreaSizeLorT:t.rollAreaSizeLorT,rollAreaSizeRorB:t.rollAreaSizeRorB,sewingDistanceLorT:t.sewingDistanceLorT,sewingDistanceRorB:t.sewingDistanceRorB,sewingAreaSize:e.SEWING_AREA_SIZE_CM}}},{key:"getSurroundSewingMeta",value:function(){return{rollAreaSizeAll:e.metaSets.find(function(e){return e.optionType===c.c.SURROUND_SEWING}).rollAreaSizeAll}}},{key:"getEdgeRoundingMeta",value:function(){var t=e.metaSets.find(function(e){return e.optionType===c.c.EDGE_ROUNDING});return{radius:t.roundingRadius,roundingApplyLT:t.roundingApplyLT,roundingApplyLB:t.roundingApplyLB,roundingApplyRT:t.roundingApplyRT,roundingApplyRB:t.roundingApplyRB}}}]),e}();l()(u,"SEWING_AREA_SIZE_CM",1),l()(u,"metaSets",[])},,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return v});var i,r=n(35),a=n.n(r),o=n(36),s=n.n(o),l=n(37),c=n.n(l),u=n(3),h=n(123),d=n(42);!function(e){e.ENVELOPE_BIG="envelope_big",e.ENVELOPE_SMALL="envelope_small",e.ENVELOPE_JACKET="envelope_jacket",e.ENVELOPE_TICKET="envelope_ticket",e.YOUTUBE_COVER="youtube_cover",e.LEAFLET="leaflet",e.LEAFLET_2_STAGES="leaflet_2_stages",e.LEAFLET_3_STAGES="leaflet_3_stages",e.TICKET_PERFORATION_HOR="ticket_perforation_hor",e.TICKET_PERFORATION_VER="ticket_perforation_ver"}(i||(i={}));var p=function(){function e(){a()(this,e),c()(this,"map",new Map),this.map.set(i.ENVELOPE_BIG,e.ENVELOPE_BIG),this.map.set(i.ENVELOPE_SMALL,e.ENVELOPE_SMALL),this.map.set(i.ENVELOPE_JACKET,e.ENVELOPE_JACKET),this.map.set(i.ENVELOPE_TICKET,e.ENVELOPE_TICKET),this.map.set(i.YOUTUBE_COVER,e.YOUTUBE_COVER),this.map.set(i.LEAFLET,e.LEAFLET_2_STAGES),this.map.set(i.LEAFLET_2_STAGES,e.LEAFLET_2_STAGES),this.map.set(i.LEAFLET_3_STAGES,e.LEAFLET_3_STAGES),this.map.set(i.TICKET_PERFORATION_HOR,e.TICKET_PERFORATION_HOR),this.map.set(i.TICKET_PERFORATION_VER,e.TICKET_PERFORATION_VER)}return s()(e,[{key:"find",value:function(e){return this.map.get(e)}}]),e}();c()(p,"ENVELOPE_BIG",{horLinePosList:[],verLinePosList:[-555]}),c()(p,"ENVELOPE_SMALL",{horLinePosList:[],verLinePosList:[-367]}),c()(p,"ENVELOPE_JACKET",{horLinePosList:[-115],verLinePosList:[]}),c()(p,"ENVELOPE_TICKET",{horLinePosList:[-89],verLinePosList:[]}),c()(p,"YOUTUBE_COVER",{horLinePosList:[-212,212],verLinePosList:[-773,773]}),c()(p,"LEAFLET_2_STAGES",{horLinePosList:[],verLinePosList:[0]}),c()(p,"LEAFLET_3_STAGES",{horLinePosList:[],verLinePosList:[-171,155]}),c()(p,"TICKET_PERFORATION_HOR",{horLinePosList:[],verLinePosList:[-140,140]}),c()(p,"TICKET_PERFORATION_VER",{horLinePosList:[-140,140],verLinePosList:[]});var v=function(){function e(){a()(this,e)}return s()(e,null,[{key:"applyPresetToMeta",value:function(e){var t=this;if(e.templateType&&!u.StringUtil.isEmpty(e.templateType.id)){var n=this.preset.find(e.templateType.id);n&&(d.a.instance.renderer.canvasRenderer.syncPageRenderers(e.pages),e.pages.forEach(function(e){t.applyPresetToPage(e,n)}))}}},{key:"applyPresetToPage",value:function(e,t){if(t){var n=d.a.instance.pageController.getPageRenderer(e);n&&n.guidelineRenderer&&(n.guidelineRenderer.clear(),t.horLinePosList.forEach(function(e){n.guidelineRenderer.appendGuideline(h.c.HOR,e)}),t.verLinePosList.forEach(function(e){n.guidelineRenderer.appendGuideline(h.c.VER,e)}))}}}]),e}();c()(v,"preset",new p)},function(e,t,n){"use strict";var i;n.d(t,"a",function(){return i}),function(e){e.CONTENTS="contents",e.DROPDOWN_LIST="dropdown_list",e.DROPDOWN_ITEM="dropdown_item",e.ACCORDION_CONTENTS="accordion_contents",e.MARGIN_INFO_POPUP="marginInfoPopup",e.MARGIN_INFO_PAGE="margin_info_page",e.MARGIN_IMAGE_WRAPPER="image_wrapper",e.MARGIN_TEXT_WRAPPER="text_wrapper",e.MARGIN_NAVIGATOR_ICON="dot_icon",e.MARGIN_NEXT_BUTTON="next_button",e.MARGIN_PREV_BUTTON="prev_button",e.SHOW_GUIDE_POPUP="showPrintoutGuidePopup",e.SELECTED_PRODUCT="selected_product",e.SELECTED_OPTION="selected_option",e.MARGIN_WRAPPER="margin_wrapper",e.SAFETY_MARGIN_INPUT="printout_safety_margin_size_input",e.OPTION_DROPDOWN_LIST="option_dropdown_list",e.PRINTOUT_OPTION_BODY_MARGIN_INPUT="body_margin_input",e.PRINTOUT_OPTION_BODY_APPLY="body_apply",e.PRINTOUT_OPTION_BODY_APPLY_BUTTON="body_apply_button",e.PRINTOUT_OPTION_BODY_SAFETY_MARGIN_TEXT="body_safety_margin_text",e.PRINTOUT_OPTION_BODY_SAFETY_MARGIN_SUFFIX="body_safety_margin_suffix",e.LEFT_FLOATING_BUTTON="left_floating_button",e.LEFT_FLOATING_MENU_SHOW_PRINTOUT_OPTION="left_floating_menu_show_printout_option",e.PRINTOUT_TOOL_WRAPPER="printout_tool_wrapper",e.SHOW_PRINTOUT_FACTOR_REVIEW_POPUP="show_printout_factor_review_popup",e.SHOW_PRINTOUT_GUIDE_ICON="show_printout_guide_icon",e.PRINTOUT_SHOW_GUIDE_ON="show_guide_on",e.FACTOR_REVIEW_POPUP="printoutFactorReviewPopup",e.DOWNLOAD_REVIEW_POPUP="printoutDownloadReviewPopup",e.BODY_TAB_WRAPPER="body_tab_wrapper",e.BODY_LIST_WRAPPER="body_list_wrapper",e.ALERT_LIST_WRAPPER="alert_list_wrapper",e.ACCORDION_COUNT_ICON="accordion_count_icon",e.ACCORDION_LIST_ITEM="accordion_list_item",e.ITEM_HOLD_BTN="item_ignore_btn",e.PDF_ICON="pdf_icon",e.ICON_CAUTION="icon_caution",e.MODIFY_BUTTON="modify_button",e.IGNORE_BUTTON="ignore_button",e.ICON_WRAPPER="icon_wrapper",e.WARNING_ICON_SMALL="warning_icon_s",e.CAUTION_ICON_SMALL="coution_icon_s",e.DOWNLOAD_ICON="download_icon",e.ALERT_INFO_WRAPPER="alerts_info_wrapper",e.WARNING_ICON="warning_icon",e.CAUTION_ICON="coution_icon",e.RECOMMEND_ICON="recommend_icon",e.NEED_TO_FIX_WRAPPER="need_to_fix_wrapper",e.ALERT_COUNT_BOX="alert_count_box",e.ALERT_COUNT="alert_count",e.ALERT_TYPE="alert_type",e.FOOTER_CONTENTS="footer_contents"}(i||(i={}))},function(e,t,n){"use strict";var i;n.d(t,"a",function(){return i}),function(e){e.PRINTOUT_INFO="printout_info",e.PRINTOUT_INFO_CONTENTS="contents",e.PRINTOUT_INFO_PRINT_AREA="print_area",e.PRINTOUT_INFO_RESTRICTIONS="restriction_contents",e.PRINTOUT_INFO_STATICS="statics",e.PRINTOUT_INFO_DYNAMICS="dynamics",e.PRINTOUT_INFO_ALERT_WARNING="warning_alert",e.PRINTOUT_LAYER="printout_layer",e.SEWING_GUIDE_WRAPPER="restriction_sewing_container",e.VERTICAL_PAGE_GUIDE_WRAPPER="vertical_page_guide_wrapper",e.HORIZONTAL_PAGE_GUIDE_WRAPPER="horizontal_page_guide_wrapper",e.SEWING_ICON="restriction_sewing_icon",e.SEWING_LINE_GUIDE="sewing_line_guide",e.SHADOW_LINE_GUIDE_A="shadow_line_A",e.SHADOW_LINE_GUIDE_B="shadow_line_B",e.DOTTED_LINE_GUIDE_A="dotted_line_A",e.DOTTED_LINE_GUIDE_B="dotted_line_B",e.SEWING_HIGHLIGHT_GUIDE="sewing_highlight_guide",e.HIGHLIGHT_GUIDE_A="highlight_A",e.HIGHLIGHT_GUIDE_B="highlight_B",e.METALRING_GUIDE_WRAPPER="restriction_metalring_container",e.METALRING_AREA="restriction_metalring_area",e.LEFT_TOP="lt_ring",e.LEFT_BOTTOM="lb_ring",e.RIGHT_TOP="rt_ring",e.RIGHT_BOTTOM="rb_ring",e.ROLL_GUIDE_WRAPPER="restriction_roll_container",e.ROLL_GUIDE_AREA="restriction_roll_area",e.LEFT="left",e.RIGHT="right",e.TOP="top",e.BOTTOM="bottom",e.HIGHLIGHT_GUIDE_WRAPPER="highlight_wrapper",e.HIGHLIGHT_PURE_GUIDE_WRAPPER="highlight_pure_wrapper",e.HIGHLIGHT_BOUNDING_AREA="pure_item_bounding_area",e.HIGHLIGHT_LEFT="highlight_left",e.HIGHLIGHT_TOP="highlight_top",e.HIGHLIGHT_RIGHT="highlight_right",e.HIGHLIGHT_BOTTOM="highlight_bottom",e.MARGIN_INFO_WRAPPER="margin_info_wrapper",e.SAFETY_ICON="safety_icon",e.SHOW_MARGIN_INFO_BUTTON="show_margin_info_popup_btn"}(i||(i={}))},,,function(e,t,n){"use strict";n.d(t,"a",function(){return h});var i=n(35),r=n.n(i),a=n(36),o=n.n(a),s=n(42),l=n(45),c=n(62),u=n(75),h=function(){function e(){r()(this,e)}return o()(e,null,[{key:"getUsedFontFamilyList",value:function(){var e=new Set;return this.getTextItemOfAllPage().forEach(function(t){t.props.getCharList().forEach(function(t){return e.add(t.styles.family)})}),Array.from(e)}},{key:"getTextItemOfAllPage",value:function(){var e=[];return s.a.dispatch(new l.c(function(t){t.pages.forEach(function(t){t.getAllSingleItems().forEach(function(t){t instanceof u.b?e=e.concat(t.getAllTextItemOfCells()):t instanceof c.b&&e.push(t)})})})),e}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n(35),r=n.n(i),a=n(36),o=n.n(a),s=n(104),l=function(){function e(){r()(this,e)}return o()(e,null,[{key:"isShadowAngleDefault",value:function(e){return!e.getCharList().some(function(e){return e.shadow.angle!==s.e.NUMBER})}},{key:"isSameCharactersColor",value:function(e){var t=e.getCharList(),n=t[0].color;return!t.some(function(e){return e.color!==n})}},{key:"existSameCharacterColor",value:function(e,t){var n=t.length>7?t.substr(0,7):t;return e.getCharList().some(function(e){return e.color===n})}}]),e}()},,,,,,,function(e,t,n){"use strict";var i=n(73),r=n.n(i),a=n(35),o=n.n(a),s=n(36),l=n.n(s),c=n(37),u=n.n(c),h=n(75),d=n(69),p=n(100),v=n(43),f=n(42),g=n(45),m=(g.a.GRID_CELL_FONT_COLOR,{name:"cellBackgroundColor",actionType:g.a.GRID_CELL_BACKGROUND,timeout:3e3}),E=(g.a.GRID_CELL_BACKGROUND_ALPHA,g.a.GRID_CELL_FONT_COLOR,{name:"cellBorderColor",actionType:g.a.GRID_CELL_BORDER_COLOR}),y=(g.a.GRID_CELL_BORDER_ALPHA,{name:"cellBorderThickness",actionType:g.a.GRID_CELL_BORDER_THICKNESS}),T=(g.a.GRID_CELL_TEXT_SIZE,g.a.GRID_CELL_TEXT_SCALEX,g.a.GRID_INSERT_COL_LEFT,g.a.GRID_INSERT_ROW_TOP,g.a.GRID_INSERT_COL_RIGHT,g.a.GRID_INSERT_ROW_BOTTOM,g.a.GRID_DELETE_COL,g.a.GRID_DELETE_ROW,{name:"leftBorder",actionType:g.a.GRID_CELL_BORDER}),_={name:"rightBorder",actionType:g.a.GRID_CELL_BORDER},I={name:"topBorder",actionType:g.a.GRID_CELL_BORDER},C={name:"bottomBorder",actionType:g.a.GRID_CELL_BORDER},S={name:"downDiagonalBorder",actionType:g.a.GRID_CELL_BORDER},w={name:"innerHorBorders",actionType:g.a.GRID_CELL_BORDER},k={name:"innerVerBorders",actionType:g.a.GRID_CELL_BORDER},R={name:"innerCrossBorder",actionType:g.a.GRID_CELL_BORDER},L={name:"outerBorders",actionType:g.a.GRID_CELL_BORDER},O={name:"allBorders",actionType:g.a.GRID_CELL_BORDER},A={name:"noneBorders",actionType:g.a.GRID_CELL_BORDER},b={name:"upDiagonalBorder",actionType:g.a.GRID_CELL_BORDER},P=(g.a.GRID_MERGE_CELLS,g.a.GRID_SPLIT_CELLS,g.a.GRID_CELLS_WIDTH_EQUAL,g.a.GRID_CELLS_HEIGHT_EQUAL,n(213)),N=n(110),x=n(499),M=n(185),D=n(288),B=n(380),U=n(104),G=n(41),F=n(482),H=n(483),V=n(370),W=n(93),z=n(72),X=n(109),Y=n(116),K=n(143),Z=n(112),j=n(12),q=n(368),$=n(85);n.d(t,"a",function(){return Q});var Q=function(){function e(){o()(this,e),this.makeAccordionCellBackground(),this.makeFontDefaultRows(),this.makeAccordionFontDetail(),this.makeFontColorRow(),this.makeCellManagementRow(),this.makeCellBorderRow(),this.makeTextSizeRow()}return l()(e,[{key:"makeMobileToolbox",value:function(){this.toolTopContents=$.a.makeToolboxTopContentsWrapper(),this.toolTopContents.appendChild($.a.makeButtonShowToolsRow("셀 편집",this.cellToolsRow)),this.toolTopContents.appendChild($.a.makeButtonShowToolsRow("셀 배경",this.accordionCellBackground)),this.toolTopContents.appendChild($.a.makeButtonShowToolsRow("셀 테두리",this.accordionCellBorder));var e=$.a.makeFontShowToolsRow(this.fontFamilyRow);this.selectedFont=document.createElement("div"),e.appendChild(this.selectedFont),this.toolTopContents.appendChild(e);var t=$.a.makeFontSizeToolsRow(this.fontSizeRow);return this.selectedFontSize=document.createElement("div"),t.appendChild(this.selectedFontSize),this.toolTopContents.appendChild(t),this.toolTopContents.appendChild(this.fontColor.wrap),$.a.setEventColorTool(this.fontColor,this.colorPickerRow),this.afterColorMenu=$.a.makeButtonShowToolsRow("글자 정렬",this.textAlignRow),this.toolTopContents.appendChild(this.afterColorMenu),this.toolTopContents.appendChild($.a.makeButtonShowToolsRow("스타일",this.fontEtcRow)),this.toolTopContents.appendChild($.a.makeButtonShowToolsAccordionRow("글자 조정",this.accordionFontDetail)),this.toolTopContents}},{key:"changeFontSizeListByDpi",value:function(e){var t=this.fontSize.menuList.slice();t.forEach(function(t){var n=Number(t.value),i=Math.round(n*e);t.value=i.toString()}),this.fontSize.updateUI({itemList:t,value:""})}},{key:"makeTextSizeRow",value:function(){var t=this,n=this.fontSizeRow=new d.g;this.fontSizeRange=new p.a(function(n){e.useTextItemCharPropMapper(P.f,n,t.currentItem)},v.a.TOOLS_TEXT_FONT_SIZE,1,999,1),n.add(this.fontSizeRange)}},{key:"makeAccordionCellBackground",value:function(){var t=(new d.g).addCustomClass(G.a.ROW_GRID_COLOR);this.cellBackgroundColor=new N.a(function(t){return e.useCellPropMapper(m,t,!0)},P.b.icon,v.a.TOOLS_GRID_CELL_BACKGROUND,!0).addClass(G.a.ACCORDION_ROW_COLOR),t.add(this.cellBackgroundColor),this.accordionCellBackground=t}},{key:"makeFontDefaultRows",value:function(){var t=this;this.fontFamily=new B.a(function(n){var i=t.currentItem.positionTool.getCells(t.currentItem.selectedCells);0===i.length&&i.push.apply(i,r()(t.currentItem.positionTool.getCells(t.currentItem.everyCells))),i.some(function(e){return e.childTextItem.props.getFamily()!==n})&&e.useTextItemCharPropMapper(P.e,n,t.currentItem)},B.b.FAMILY,W.a.instance.fontFamilyList,!1,"","100%",{class:"font_family",height:49},!0,v.a.TOOLS_TOOLTIP_FONTFAMILY_RECOMMEND_LIST_TITLE,!0).setEditable(function(e){var n=!0,i=!1,r=void 0;try{for(var a,o=W.a.instance.fontFamilyList[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){if(a.value.value===e)return e}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return t.fontFamily.selectedValue},!1,!1);this.fontSize=new B.a(function(n){e.useTextItemCharPropMapper(P.f,n,t.currentItem)},B.b.FONTSIZE,[{value:"7"},{value:"8"},{value:"9"},{value:"10"},{value:"11"},{value:"12"},{value:"14"},{value:"18"},{value:"24"},{value:"30"},{value:"36"},{value:"48"},{value:"60"},{value:"72"},{value:"96"},{value:"104"},{value:"120"},{value:"144"}],!0,"","102px").setEditable(function(n){var i=parseFloat(n);return isNaN(i)?t.fontSize.selectedValue:(i=Math.round(10*i)/10,i=Math.min(i,e.MAX_FONT_SIZE),i=Math.max(i,e.MIN_FONT_SIZE),String(i))},!0,!0).setComparator(function(e,t){return Number(e.value)-Number(t.value)}),z.a.createTooltip(this.fontSize.wrap,z.b.T,{title:{name:v.a.TOOLS_TOOLTIP_FONTSIZE_TITLE}}),this.textBold=new M.a(function(n){e.useTextItemCharPropMapper(P.c,n,t.currentItem)},{icon:P.c.icon}),z.a.createTooltip(this.textBold.wrap,z.b.TR,{title:{name:v.a.TOOLS_TOOLTIP_BOLD_TITLE,shortcut:v.a.TOOLS_TOOLTIP_BOLD_SHORTCUT}}),this.textItalic=new M.a(function(n){e.useTextItemCharPropMapper(P.D,n,t.currentItem)},{icon:P.D.icon}),z.a.createTooltip(this.textItalic.wrap,z.b.T,{title:{name:v.a.TOOLS_TOOLTIP_ITALIC_TITLE,shortcut:v.a.TOOLS_TOOLTIP_ITALIC_SHORTCUT}}),this.textUnderline=new M.a(function(n){e.useTextItemCharPropMapper(P.F,n,t.currentItem)},{icon:P.F.icon}),z.a.createTooltip(this.textUnderline.wrap,z.b.T,{title:{name:v.a.TOOLS_TOOLTIP_UNDERLINE_TITLE,shortcut:v.a.TOOLS_TOOLTIP_UNDERLINE_SHORTCUT}}),this.textStroke=new M.a(function(n){e.useTextItemCharPropMapper(P.E,n,t.currentItem)},{icon:P.E.icon}),z.a.createTooltip(this.textStroke.wrap,z.b.T,{title:{name:v.a.TOOLS_TOOLTIP_STROKE_TITLE,shortcut:v.a.TOOLS_TOOLTIP_STROKE_SHORTCUT}}),this.textUpperCase=new M.a(function(t){return e.useTextPropMapper(P.G,t)},{icon:P.G.icon}),z.a.createTooltip(this.textUpperCase.wrap,z.b.T,{title:{name:v.a.TOOLS_TOOLTIP_UPPERCASE_TITLE,shortcut:v.a.TOOLS_TOOLTIP_UPPERCASE_SHORTCUT}}),this.textAlign=new D.a(function(t){e.useTextPropMapper(P.a,t)},[{value:U.c.LEFT.toString(),icon:j.ToolsIcon.FORMAT_ALIGN_LEFT},{value:U.c.CENTER.toString(),icon:j.ToolsIcon.FORMAT_ALIGN_CENTER},{value:U.c.RIGHT.toString(),icon:j.ToolsIcon.FORMAT_ALIGN_RIGHT}]),z.a.createTooltip(this.textAlign.wrap.children[0],z.b.TR,{title:{name:v.a.TOOLS_TOOLTIP_ALIGNLEFT_TITLE}}),z.a.createTooltip(this.textAlign.wrap.children[1],z.b.TR,{title:{name:v.a.TOOLS_TOOLTIP_ALIGNCENTER_TITLE}}),z.a.createTooltip(this.textAlign.wrap.children[2],z.b.T,{title:{name:v.a.TOOLS_TOOLTIP_ALIGNRIGHT_TITLE}}),this.textVerticalAlign=new D.a(function(t){return e.useTextPropMapper(P.H,t)},[{value:U.f.TOP.toString(),icon:j.ToolsIcon.VERTICAL_ALIGN_TOP},{value:U.f.CENTER.toString(),icon:j.ToolsIcon.VERTICAL_ALIGN_CENTER},{value:U.f.BOTTOM.toString(),icon:j.ToolsIcon.VERTICAL_ALIGN_BOTTOM}]),z.a.createTooltip(this.textVerticalAlign.wrap.children[0],z.b.TL,{title:{name:v.a.TOOLS_TOOLTIP_ALIGNTOP_TITLE}}),z.a.createTooltip(this.textVerticalAlign.wrap.children[1],z.b.TL,{title:{name:v.a.TOOLS_TOOLTIP_ALIGNMIDDLE_TITLE}}),z.a.createTooltip(this.textVerticalAlign.wrap.children[2],z.b.TL,{title:{name:v.a.TOOLS_TOOLTIP_ALIGNBOTTOM_TITLE}});var n=(new d.g).setFlex().addCustomClass(G.a.ROW_FONT_SIZE).setMarginTop(),i=(new d.g).addCustomClass(G.a.ROW_FONT_DETAIL),a=(new d.g).addCustomClass(G.a.ROW_TEXT_ALIGN).setBorderBottom(),o=new d.f(100),s=new d.f,l=(new d.f).addCustomClass(G.a.COL_TEXT_COLOR),c=new d.f,u=new d.f;o.add(this.fontFamily),s.add(this.fontSize),l.add(this.textBold,this.textItalic,this.textUnderline,this.textStroke,this.textUpperCase),c.add(this.textAlign),u.add(this.textVerticalAlign),n.add(o),i.add(s,l),a.add(c,u),this.fontFamilyRow=n,this.fontEtcRow=i,this.textAlignRow=a}},{key:"makeAccordionFontDetail",value:function(){var t=this,n=new d.c(v.a.TOOLS_TEXT_ROW_FONT_DEFAULT,null).setScrollStart(250).setFlex().setBorderBottom().addCustomClass(G.a.ROW_TEXT_DEFAULT,G.a.HIDDEN_LABEL);this.textSpace=new p.a(function(n){e.useTextItemCharPropMapper(P.m,n,t.currentItem)},v.a.TOOLS_TEXT_LETTER_SPACING,-50,200,1),this.lineSpace=new p.a(function(n){e.useTextItemCharPropMapper(P.k,n,t.currentItem)},v.a.TOOLS_TEXT_LINE_HEIGHT,-50,100,1),this.scaleX=new p.a(function(t){e.useTextPropMapper(P.l,t)},v.a.TOOLS_TEXT_FONT_STRETCH,50,200,1,"%"),n.add(this.textSpace),n.add(this.lineSpace),n.add(this.scaleX),this.accordionFontDetail=n}},{key:"makeFontColorRow",value:function(){var t=this,n=(new d.g).setBorderBottom().addCustomClass(G.a.ROW_TEXT_COLOR);this.fontColor=new N.a(function(n){e.useTextItemCharPropMapper(P.d,n,t.currentItem)},P.d.icon,v.a.TOOLS_TEXT_ROW_FONT_COLOR).addClass(G.a.FONT_COLOR),n.add(this.fontColor),this.fontColorRow=n,this.colorPickerRow=(new d.g).addCustomClass(G.a.COLOR_PICKER_ROW)}},{key:"makeCellManagementRow",value:function(){var t=this;this.removeRow=new M.a(function(){return f.a.dispatch(new V.b(t.currentItem))},{icon:j.ToolsIcon.REMOVE_ROW},null,"행 삭제").setPreventDefault(),e.appendTooltip(this.removeRow.wrap,z.b.T,{title:{name:v.a.TOOLS_GRID_TOOLTIP_REMOVEROW_TITLE}}),this.removeColumn=new M.a(function(){return f.a.dispatch(new V.a(t.currentItem))},{icon:j.ToolsIcon.REMOVE_COLUMN},null,"열 삭제").setPreventDefault(),e.appendTooltip(this.removeColumn.wrap,z.b.T,{title:{name:v.a.TOOLS_GRID_TOOLTIP_REMOVECOLUMN_TITLE}}),this.cellConcat=new M.a(function(){return f.a.dispatch(new H.a(t.currentItem))},{icon:j.ToolsIcon.CELL_CONCAT},null,"셀 합치기").setPreventDefault(),e.appendTooltip(this.cellConcat.wrap,z.b.T,{title:{name:v.a.TOOLS_GRID_TOOLTIP_CELLCONCAT_TITLE}}),this.cellSplit=new M.a(function(){return f.a.dispatch(new H.b(t.currentItem))},{icon:j.ToolsIcon.CELL_SPLIT},null,"셀 나누기").setPreventDefault(),e.appendTooltip(this.cellSplit.wrap,z.b.T,{title:{name:v.a.TOOLS_GRID_TOOLTIP_CELLSPLIT_TITLE}}),this.cellDistributeVertical=new M.a(function(){return f.a.dispatch(new F.a(t.currentItem))},{icon:j.ToolsIcon.CELL_HEIGHT_EQUAL},null,"행 간격 균등").setPreventDefault(),e.appendTooltip(this.cellDistributeVertical.wrap,z.b.T,{title:{name:v.a.TOOLS_GRID_TOOLTIP_CELLDISTRIBUTEVERTICAL_TITLE}}),this.cellDistributeHorizon=new M.a(function(){return f.a.dispatch(new F.b(t.currentItem))},{icon:j.ToolsIcon.CELL_WIDTH_EQUAL},null,"열 간격 균등").setPreventDefault(),e.appendTooltip(this.cellDistributeHorizon.wrap,z.b.T,{title:{name:v.a.TOOLS_GRID_TOOLTIP_CELLDISTRIBUTEHORIZON_TITLE}});var n=(new d.g).addCustomClass(G.a.ROW_CELL_MANAGEMENT).setBorderBottom(),i=(new d.f).addCustomClass(G.a.GRID_MANAGER_COL,G.a.GRID_FIRST_COL),r=(new d.f).addCustomClass(G.a.GRID_MANAGER_COL,G.a.GRID_SECOND_COL),a=(new d.f).addCustomClass(G.a.GRID_MANAGER_COL,G.a.GRID_LAST_COL),o=(new d.f).addCustomClass(G.a.LINE,G.a.GRID_FIRST_LINE),s=(new d.f).addCustomClass(G.a.LINE,G.a.GRID_SECOND_LINE);i.add(this.cellConcat),i.add(this.cellSplit),r.add(this.cellDistributeVertical),r.add(this.cellDistributeHorizon),a.add(this.removeRow),a.add(this.removeColumn),n.add(i,o,r,s,a),this.cellToolsRow=n}},{key:"makeCellBorderRow",value:function(){var t=(new d.g).addCustomClass(G.a.ROW_GRID_COLOR).setBorderTop().setBorderBottom().addCustomStyle("padding-bottom: 15px");this.cellBorderColor=new N.a(function(t){return e.useGridPropMapper(E,t)},P.b.icon,v.a.TOOLS_GRID_CELL_BORDER),this.cellBorderThickness=new p.a(function(t){return e.useGridPropMapper(y,t)},v.a.TOOLS_GRID_CELL_BORDER_THICKNESS,1,20,1),t.add(this.cellBorderColor),t.add(this.cellBorderThickness),this.noneBorders=new M.a(function(t){return e.useGridPropMapper(A,!0)},{icon:j.ToolsIcon.CELL_BORDER_NONE}),e.appendTooltip(this.noneBorders.wrap,z.b.T,{title:{name:v.a.TOOLS_GRID_TOOLTIP_NONEBORDERS_TITLE}}),this.allBorders=new M.a(function(t){return e.useGridPropMapper(O,!0)},{icon:j.ToolsIcon.CELL_BORDER_ALL}),e.appendTooltip(this.allBorders.wrap,z.b.T,{title:{name:v.a.TOOLS_GRID_TOOLTIP_ALLBORDERS_TITLE}}),this.outerBorders=new M.a(function(t){return e.useGridPropMapper(L,!0)},{icon:j.ToolsIcon.CELL_BORDER_OUTER}),e.appendTooltip(this.outerBorders.wrap,z.b.T,{title:{name:v.a.TOOLS_GRID_TOOLTIP_OUTERBORDERS_TITLE}}),this.crossBorders=new M.a(function(t){return e.useGridPropMapper(R,!0)},{icon:j.ToolsIcon.CELL_BORDER_CROSS}),z.a.createTooltip(this.crossBorders.wrap,z.b.T,{title:{name:v.a.TOOLS_GRID_TOOLTIP_INNERBORDER_TITLE}}),this.downDiagonalBorder=new M.a(function(t){return e.useGridPropMapper(S,!0)},{icon:j.ToolsIcon.CELL_BORDER_DOWN_DIAGONAL}),e.appendTooltip(this.downDiagonalBorder.wrap,z.b.T,{title:{name:v.a.TOOLS_GRID_TOOLTIP_DOWNDIAGONALBORDERS_TITLE}}),this.upDiagonalBorder=new M.a(function(t){return e.useGridPropMapper(b,!0)},{icon:j.ToolsIcon.CELL_BORDER_UP_DIAGONAL}),e.appendTooltip(this.upDiagonalBorder.wrap,z.b.T,{title:{name:v.a.TOOLS_GRID_TOOLTIP_UPDIAGONALBORDER_TITLE}}),this.topBorder=new M.a(function(t){return e.useGridPropMapper(I,!0)},{icon:j.ToolsIcon.CELL_BORDER_TOP}),e.appendTooltip(this.topBorder.wrap,z.b.T,{title:{name:v.a.TOOLS_GRID_TOOLTIP_TOPBORDER_TITLE}}),this.bottomBorder=new M.a(function(t){return e.useGridPropMapper(C,!0)},{icon:j.ToolsIcon.CELL_BORDER_BOTTOM}),e.appendTooltip(this.bottomBorder.wrap,z.b.T,{title:{name:v.a.TOOLS_GRID_TOOLTIP_BOTTOMBORDER_TITLE}}),this.leftBorder=new M.a(function(t){return e.useGridPropMapper(T,!0)},{icon:j.ToolsIcon.CELL_BORDER_LEFT}),e.appendTooltip(this.leftBorder.wrap,z.b.T,{title:{name:v.a.TOOLS_GRID_TOOLTIP_LEFTBORDER_TITLE}}),this.rightBorder=new M.a(function(t){return e.useGridPropMapper(_,!0)},{icon:j.ToolsIcon.CELL_BORDER_RIGHT}),e.appendTooltip(this.rightBorder.wrap,z.b.T,{title:{name:v.a.TOOLS_GRID_TOOLTIP_RIGHTBORDER_TITLE}}),this.innerHorBorders=new M.a(function(t){return e.useGridPropMapper(w,!0)},{icon:j.ToolsIcon.CELL_BORDER_INNER_HOR}),e.appendTooltip(this.innerHorBorders.wrap,z.b.T,{title:{name:v.a.TOOLS_GRID_TOOLTIP_INNERHORBORDERS_TITLE}}),this.innerVerBorders=new M.a(function(t){return e.useGridPropMapper(k,!0)},{icon:j.ToolsIcon.CELL_BORDER_INNER_VER}),e.appendTooltip(this.innerVerBorders.wrap,z.b.T,{title:{name:v.a.TOOLS_GRID_TOOLTIP_INNERVERBORDERS_TITLE}});var n=(new d.g).setFlex().addCustomClass(G.a.ROW_CELL_BORDER),i=(new d.g).setFlex().addCustomClass(G.a.ROW_CELL_BORDER);n.add(this.noneBorders),n.add(this.allBorders),n.add(this.outerBorders),n.add(this.crossBorders),n.add(this.downDiagonalBorder),n.add(this.upDiagonalBorder),i.add(this.topBorder),i.add(this.bottomBorder),i.add(this.leftBorder),i.add(this.rightBorder),i.add(this.innerHorBorders),i.add(this.innerVerBorders),t.add(n),t.add(i),this.accordionCellBorder=t}},{key:"updateUI",value:function(e){var t,n=e.selectedCells;t=n.length>0?n[0]:{row:0,col:0};var i=e.cells[t.row][t.col];this.cellBackgroundColor.updateUI({value:i.cellProps.getCellBackgroundColor(),active:!0}),this.cellBorderColor.updateUI({value:e.props.getCellBorderColor(),active:!0}),this.cellBorderThickness.updateUI({value:e.props.getCellBorderThickness(),active:!0});var r=q.a.getUsedFontFamilyList(),a=e.cells[t.row][t.col].textProps;this.fontFamily.updateUI({value:a.getFamily(),itemX:"1"===K.a.getConfigValue(Z.a.UNICORN_THEME)?-14:387,recommendItemList:r.map(function(e){return{value:e}})}),this.selectedFontSize.innerText=i.textProps.getSizeStr(),this.selectedFont.innerText=i.textProps.getFamily(),this.fontFamily.updateUI({value:i.textProps.getFamily()}),this.fontSize.updateUI({value:i.textProps.getSizeStr()}),this.fontSizeRange.updateUI({value:i.textProps.getSize()}),this.textBold.updateUI({isSelected:i.textProps.isBold()}),this.textItalic.updateUI({isSelected:i.textProps.isItalic()}),this.textUnderline.updateUI({isSelected:i.textProps.isUnderline()}),this.textStroke.updateUI({isSelected:i.textProps.isStrikeout()}),this.textUpperCase.updateUI({isSelected:i.textProps.isUpperCase()}),this.fontColor.updateUI({value:i.textProps.getColor()}),this.textAlign.updateUI({value:i.textProps.getTextAlign().toString()}),this.textVerticalAlign.updateUI({value:i.textProps.getVerticalAlign().toString()}),this.accordionFontDetail.updateUI(i.textProps.isActiveFontDetail()),this.textSpace.updateUI({value:i.textProps.getFontDetailTextSpace(!0),active:i.textProps.isActiveFontDetail()}),this.lineSpace.updateUI({value:i.textProps.getFontDetailLineSpace(!0),active:i.textProps.isActiveFontDetail()}),this.scaleX.updateUI({value:i.textProps.getFontDetailScaleX(!0),active:i.textProps.isActiveFontDetail()}),this.accordionCellBorder.updateUI(!0);var o=n.length>1&&e.positionTool.isRectSelectedCells(n)&&!e.positionTool.isCellsPosEqual(e.positionTool.arrayOfCellPosToCellsPos(n),e.cells[n[0].row][n[0].col].childCellsPos);this.updateUIToggleButton(this.cellConcat,o);var s=n.length>0&&e.positionTool.getCells(n).some(function(e){return e.childCellsPos.endPos.row!==e.row||e.childCellsPos.endPos.col!==e.col});this.updateUIToggleButton(this.cellSplit,s);var l=n.length>0,c=!1,u=!0,h=!1,d=void 0;try{for(var p,v=n[Symbol.iterator]();!(u=(p=v.next()).done);u=!0){for(var f=p.value.row,g=0;g<e.cols.length;g++){var m=e.cells[f][g];if(m.cellType===Y.c.MASTER&&!m.selected){c=!0;break}}if(c)break}}catch(e){h=!0,d=e}finally{try{u||null==v.return||v.return()}finally{if(h)throw d}}this.updateUIToggleButton(this.removeRow,l&&!c);var E=n.length>0,y=!1,T=!0,_=!1,I=void 0;try{for(var C,S=n[Symbol.iterator]();!(T=(C=S.next()).done);T=!0){for(var w=C.value.col,k=0;k<e.rows.length;k++){var R=e.cells[k][w];if(R.cellType===Y.c.MASTER&&!R.selected){y=!0;break}}if(y)break}}catch(e){_=!0,I=e}finally{try{T||null==S.return||S.return()}finally{if(_)throw I}}this.updateUIToggleButton(this.removeColumn,E&&!y);var L=e.positionTool.isRectSelectedCells(n);this.updateUIToggleButton(this.outerBorders,L),this.updateUIToggleButton(this.crossBorders,L),this.updateUIToggleButton(this.topBorder,L),this.updateUIToggleButton(this.leftBorder,L),this.updateUIToggleButton(this.bottomBorder,L),this.updateUIToggleButton(this.rightBorder,L),this.updateUIToggleButton(this.innerHorBorders,L),this.updateUIToggleButton(this.innerVerBorders,L)}},{key:"updateUIToggleButton",value:function(e,t){e.updateUI({active:t,isSelected:!1}),t?e.wrap.classList.remove("inactive"):e.wrap.classList.add("inactive")}},{key:"makeToolboxRowContents",value:function(){return[{row:this.cellToolsRow,priority:490,viewType:0},{row:this.accordionCellBackground,priority:530,viewType:0},{row:this.accordionCellBorder,priority:540,viewType:0},{row:this.fontFamilyRow,priority:550,viewType:0},{row:this.fontEtcRow,priority:560,viewType:0},{row:this.textAlignRow,priority:570,viewType:0},{row:this.fontColorRow,priority:580,viewType:0},{row:this.accordionFontDetail,priority:590,viewType:0},{row:this.fontSizeRow,priority:600,viewType:0},{row:this.colorPickerRow,priority:610,viewType:0}]}},{key:"updateToolboxRowContents",value:function(e,t){var n=t.renderedItem&&t.renderedItem instanceof h.b;this.accordionCellBackground.rowVisible=n&&!t.isAdminEditView,this.accordionCellBorder.rowVisible=n&&!t.isAdminEditView,this.cellToolsRow.rowVisible=n&&!t.isAdminEditView,this.fontFamilyRow.rowVisible=n&&!t.isAdminEditView,this.fontEtcRow.rowVisible=n&&!t.isAdminEditView,this.fontSizeRow.rowVisible=n&&!t.isAdminEditView&&f.a.isMobileMode(),this.colorPickerRow.rowVisible=n&&!t.isAdminEditView&&f.a.isMobileMode(),this.textAlignRow.rowVisible=n&&!t.isAdminEditView,this.accordionFontDetail.rowVisible=n&&!t.isAdminEditView,this.fontColorRow.rowVisible=n&&!t.isAdminEditView&&!f.a.isMobileMode(),f.a.isMobileMode()?(this.toolTopContents.insertBefore(this.fontColor.wrap,this.afterColorMenu),this.fontColor.canNotAppend=!0):(this.fontColorRow.wrap.appendChild(this.fontColor.wrap),this.fontColor.canNotAppend=!1);var i=n&&!t.isAdminEditView&&!t.renderedItem.isLock();return $.a.setContentsVisible(this.toolTopContents,i),n?(this.currentItem=t.renderedItem,this.updateUI(this.currentItem)):this.currentItem=null,!0}}],[{key:"useGridPropMapper",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];f.a.dispatch(new x.a(h.a.GRID,e.actionType,e.groupName,e.name,t,n,e.timeout,!1))}},{key:"useCellPropMapper",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];f.a.dispatch(new x.a(h.a.CELL,e.actionType,e.groupName,e.name,t,n,e.timeout))}},{key:"useTextPropMapper",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];f.a.dispatch(new x.a(h.a.TEXT,e.actionType,e.groupName,e.name,t,n,e.timeout,i))}},{key:"useTextItemCharPropMapper",value:function(e,t,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5?arguments[5]:void 0;if(n.isTextEditMode){var s={row:n.textedit.startPos.row,col:n.textedit.startPos.col},l={row:n.textedit.endPos.row,col:n.textedit.endPos.col};n.isTextEditMode&&(s.col!==l.col||s.row!==l.row||a)?f.a.dispatch(new X.a(n,e.actionType,e.groupName,e.name,t,i,e.timeout,!0,s,l,n.editingCell.childTextItem,o)):f.a.dispatch(new X.a(n,e.actionType,e.groupName,e.name,t,i,e.timeout,!0,null,null,n.editingCell.childTextItem,o))}else{var c=n.positionTool.getCells(n.selectedCells);0===c.length&&c.push.apply(c,r()(n.positionTool.getCells(n.everyCells))),f.a.groupingAction(function(){var r=!0,a=!1,s=void 0;try{for(var l,u=c[Symbol.iterator]();!(r=(l=u.next()).done);r=!0){var h=l.value;f.a.dispatch(new X.a(n,e.actionType,e.groupName,e.name,t,i,e.timeout,!1,null,null,h.childTextItem,o))}}catch(e){a=!0,s=e}finally{try{r||null==u.return||u.return()}finally{if(a)throw s}}})}}},{key:"appendTooltip",value:function(e,t,n){z.a.createTooltip(e,t,n),z.a.createTooltip(e,t,n,null,{atDisable:!0})}}]),e}();u()(Q,"MAX_FONT_SIZE",300),u()(Q,"MIN_FONT_SIZE",1)},,,,function(e,t,n){"use strict";var i=n(0),r=n.n(i),a=n(1),o=n.n(a),s=n(35),l=n.n(s),c=n(36),u=n.n(c),h=n(37),d=n.n(h),p=n(41),v=n(3),f=n(57),g=n(204),m=n(12),E=function(){function e(){l()(this,e)}return u()(e,null,[{key:"isInvalidNumberSymbolKeyDown",value:function(e,t){var n="e"===e.toLowerCase()||"-"===e||"+"===e,i="."===e&&t.includes(".");return n||i}},{key:"isInvalidNumberEnter",value:function(e){return Number.isNaN(Number(e))||!e.toString().trim()}}]),e}(),y=n(42),T=n(102);n.d(t,"a",function(){return I}),n.d(t,"b",function(){return _});var _,I=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0,c=arguments.length>7&&void 0!==arguments[7]&&arguments[7],u=arguments.length>8?arguments[8]:void 0,h=arguments.length>9?arguments[9]:void 0;l()(this,e),d()(this,"isStyleTemplateProp",!1),d()(this,"selecting",-1),d()(this,"rowVisible",!0),d()(this,"comparator",null),d()(this,"searchMode",!1),d()(this,"isChangedFontListOrder",!1),this.listener=t,this.type=n,this.menuList=i,this.selectedValue=a,this.filtered=c,this.recommendListTitle=u,this.addNewValueWhenUpdateUI=h,this.wrap=document.createElement("div"),this.wrap.className="".concat(p.a.TOOLS_ITEM," ").concat(p.a.SELECT_ITEM),o&&(this.wrap.style.width=o),this.makeMenuLayer(),this.input=document.createElement("input"),this.input.type=r?"number":"text",this.input.readOnly=!0,this.setMenuList(this.menuList),r||(this.input.placeholder="폰트 검색",Object(m.setToolsIcon)(this.wrap,m.ToolsIcon.ZOOM,!0)),this.wrap.appendChild(this.input),this.inputCaret=Object(m.setToolsIcon)(this.wrap,m.ToolsIcon.CARET,!0),s&&(this.itemx=s.x||0,this.customCss=s.class,this.itemHeight=s.height),this.addEventListener()}return u()(e,[{key:"makeMenuLayer",value:function(){var e=this.menuLayer=document.createElement("div");e.className=p.a.MENU_LAYER,this.menuListScrollElem=new f.a(!1,!0,"100%");var t=this.menuListWrap=document.createElement("div");t.className=p.a.LIST_WRAP;var n=document.createElement("div");if(n.className=p.a.RECOMMEND_LIST,this.recommendListTitle){var i=document.createElement("p");i.innerText=v.CRM.get(this.recommendListTitle),n.appendChild(i)}this.recommendUl=document.createElement("ul"),n.appendChild(this.recommendUl),t.appendChild(n),this.ul=document.createElement("ul"),t.appendChild(this.ul),e.appendChild(this.menuListScrollElem.render(t)),this.wrap.appendChild(e)}},{key:"render",value:function(){var e=this,t=document.createElement("input");return t.type="checkbox",t.className=p.a.STYLE_TEMPLATE_SELECTOR,t.checked=this.isStyleTemplateProp,t.addEventListener("change",function(){return e.isStyleTemplateProp=t.checked}),this.wrap.appendChild(t),this.wrap}},{key:"updateUI",value:function(e){var t=this.selectedValue,n=e.value.toString().trim(),i=null!=n;this.selectedValue=i?e.value.toString():this.selectedValue,e.itemX&&(this.itemx=e.itemX);var r=$(this.ul).children(":visible").eq(this.selecting)[0];if(y.a.isMobileMode()?this.wrap.parentElement&&this.wrap.parentElement.parentElement&&!this.wrap.parentElement.parentElement.classList.contains("mobile_active")&&(this.input.value=""):t===this.selectedValue&&this.isMenuLayerOpened()&&r?(this.selectedLi=r,this.selectedLi.classList.add(p.a.SELECTED_VALUE)):(this.selecting=this.getSelectedLiIdx(),this.setMenuLayer(!1)),this.setMenuList(e.itemList?e.itemList:this.menuList),this.setRecommendList(e.recommendItemList),this.lastFontRecommendList=e.recommendItemList,this.setScrollRel(),i){var a=e.value.toString();this.lastInput=a,y.a.isMobileMode()||(this.input.value=a)}}},{key:"addEventListener",value:function(){var t=this,n="click.".concat(v.StringUtil.random());T.a.isMobileDevice()?($([this.wrap]).on("click",function(e){e.stopPropagation(),$(document.body).off(n).trigger("click"),t.isChangedFontListOrder&&(t.resetFontList(),t.isChangedFontListOrder=!1),t.toggleMenuLayer(),t.isMenuLayerOpened()&&$(document.body).on(n,function(){t.setMenuLayer(!1)})}),$([this.wrap,this.input]).on("dblclick",function(e){e.stopPropagation(),t.input.readOnly=!1,t.input.select(),t.input.focus(),t.isMenuLayerOpened()?$(document.body).on(n,function(){t.setMenuLayer(!1)}):t.toggleMenuLayer()}),$(this.input).on("blur",function(){t.input.readOnly=!0})):$([this.wrap]).on("click",function(e){e.stopPropagation(),t.input.focus(),$(document.body).off(n).trigger("click"),t.isChangedFontListOrder&&(t.resetFontList(),t.isChangedFontListOrder=!1),t.toggleMenuLayer(),t.isMenuLayerOpened()&&$(document.body).on(n,function(){t.setMenuLayer(!1)})}),$(this.menuListWrap).on("click","li",function(n){var i=n.currentTarget;t.select(i.getAttribute(e.LI_TAG_VALUE_ATTR_NAME))}),this.filtered&&$(this.input).on("keyup",function(){var e=t.input.value;t.lastInput!==e&&(t.lastInput=e,e?t.sortFontListByKeyword():t.resetFontList(),t.setMenuLayerHeightAuto(),t.input.focus(),t.selecting=-1)}),this.menuLayer.addEventListener("click",function(e){return e.stopPropagation()})}},{key:"resetFontList",value:function(){this.searchMode=!1,this.setMenuList(this.menuList),this.setRecommendList(this.lastFontRecommendList),this.selecting=this.getSelectedLiIdx()}},{key:"sortFontListByKeyword",value:function(){var t=this,n=[],i=[],r=this.input.value.toLowerCase(),a=!0,o=!1,s=void 0;try{for(var l,c=this.ul.children[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var u=l.value,h=u.getAttribute(e.LI_TAG_VALUE_ATTR_NAME).toLowerCase();if(h.includes(r)){var d=u;d.classList.remove(p.a.HIDE),0===h.indexOf(r)?n.push(d):i.push(d)}else u.classList.add(p.a.HIDE);u.classList.remove(p.a.SELECTED_VALUE)}}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}i.reverse(),i.forEach(function(e){return t.ul.insertBefore(e,t.ul.children.item(0))}),n.reverse(),n.forEach(function(e){return t.ul.insertBefore(e,t.ul.children.item(0))}),this.searchMode=this.lastInput.length>0,this.selecting=-1,this.setRecommendListVisible(!this.searchMode),this.setMenuLayer(!0),this.isChangedFontListOrder=!0}},{key:"setMenuLayerHeightAuto",value:function(){this.menuLayer.style.height="".concat(this.menuListWrap.scrollHeight,"px"),this.menuListScrollElem.updateScrollbar()}},{key:"toggleMenuLayer",value:function(){this.setMenuLayer(!this.isMenuLayerOpened())}},{key:"setMenuLayer",value:function(e){e||y.a.isMobileMode()?(this.menuLayer.classList.add(p.a.ACTIVE),this.setMenuLayerHeightAuto()):this.menuLayer.classList.remove(p.a.ACTIVE)}},{key:"isMenuLayerOpened",value:function(){return this.menuLayer.classList.contains(p.a.ACTIVE)}},{key:"getSelectedLiIdx",value:function(){for(var t=this.searchMode?$(this.ul).children(":visible"):this.ul.children,n=0;n<t.length;n++){if(t[n].getAttribute(e.LI_TAG_VALUE_ATTR_NAME)===this.selectedValue)return n}return-1}},{key:"setEditable",value:function(t,n,i){var a=this;return this.input.readOnly=T.a.isMobileDevice(),$(this.input).on("focus",function(){a.isMenuLayerOpened()||(a.selectedValueBeforeOpenMenuLayer=a.selectedValue),a.input.select()}).on("keydown",function(r){if(r.stopPropagation(),i&&E.isInvalidNumberSymbolKeyDown(r.key,a.input.value))return!1;switch(r.key.toUpperCase()){case"ESCAPE":if(r.stopPropagation(),r.preventDefault(),!a.isMenuLayerOpened())break;var o=a.selectedValueBeforeOpenMenuLayer;o!==a.input.value.toString()&&(a.select(o||a.selectedValue),a.setMenuLayer(!1)),a.onSelectListItem&&a.onSelectListItem.setExecCallBack(!1);break;case"ENTER":r.stopPropagation(),r.preventDefault();var s=a.input.value;if(i&&(a.input.value="",a.input.value=s,E.isInvalidNumberEnter(s)))return void(a.input.value="");if(!n&&a.searchMode){var l=a.selecting<0?0:a.selecting,c=$(a.ul).children(":visible").eq(l)[0];if(c){a.selecting=l,a.selectedValue=c.getAttribute(e.LI_TAG_VALUE_ATTR_NAME),a.select(t(a.selectedValue)),a.onSelectListItem&&a.onSelectListItem.setExecCallBack(!1),a.selectedValueBeforeOpenMenuLayer=a.selectedValue;break}a.input.value=a.selectedValue}a.searchMode=!1,a.selecting=a.getSelectedLiIdx(),a.setMenuList(a.menuList),i?a.select(t(s)):a.select(t(a.selectedValue)),a.onSelectListItem&&a.onSelectListItem.setExecCallBack(!1);break;case"ARROWUP":case"UP":r.stopPropagation(),r.preventDefault();var u=-1!==a.selecting?a.selecting:$(a.ul).children(":visible").length;if(u<1)break;var h=$(a.ul).children(":visible").eq(u)[0],d=$(a.ul).children(":visible").eq(u-1)[0];h&&h.classList.remove(p.a.SELECTED_VALUE),a.selecting=u-1,d.classList.add(p.a.SELECTED_VALUE),a.selectedValue=d.getAttribute(e.LI_TAG_VALUE_ATTR_NAME),a.setScrollRel(d),a.onSelectListItem&&a.onSelectListItem.resetExecCallBack();break;case"ARROWDOWN":case"DOWN":r.stopPropagation(),r.preventDefault();var v=a.selecting;if(v>=$(a.ul).children(":visible").length-1)break;var f=$(a.ul).children(":visible").eq(v)[0],g=$(a.ul).children(":visible").eq(v+1)[0];f.classList.remove(p.a.SELECTED_VALUE),a.selecting=v+1,g.classList.add(p.a.SELECTED_VALUE),a.selectedValue=g.getAttribute(e.LI_TAG_VALUE_ATTR_NAME),a.setScrollRel(g),a.onSelectListItem&&a.onSelectListItem.resetExecCallBack();break;default:a.isMenuLayerOpened()||a.setMenuLayer(!0)}}).on("keyup",function(n){n.stopPropagation();var s=a.input.value;if(i){if(Number.isNaN(Number(s))||s.includes("e"))return void(a.input.value=a.selectedValue.toString());if(!s.trim()||Number(s)<0)return void(a.input.value="")}switch(n.key.toUpperCase()){case"ARROWUP":case"UP":case"ARROWDOWN":case"DOWN":n.stopPropagation(),n.preventDefault(),a.onSelectListItem&&a.onSelectListItem.setExecCallBack(!1),a.onSelectListItem=new g.a(e.VALUE_CHANGE_DURATION,function(){var e=o()(r.a.mark(function e(n){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.selectedValue&&""!==a.selectedValue&&n.getExecCallBack()&&a.select(t(a.selectedValue),!0);case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}}).on("focusout",function(){a.searchMode&&(a.searchMode=!1,a.selecting=a.getSelectedLiIdx()),a.input.value!==a.selectedValue&&(a.input.value=a.selectedValue)}),this}},{key:"setComparator",value:function(e){return this.comparator=e,this}},{key:"select",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=!0,r=!1,a=void 0;try{for(var o,s=this.ul.children[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var l=o.value;l.classList.remove(p.a.SELECTED_VALUE),l.getAttribute(e.LI_TAG_VALUE_ATTR_NAME)===t&&(this.selectedLi=l,this.selectedLi.classList.add(p.a.SELECTED_VALUE))}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}this.lastInput=t,this.selectedValue=t,y.a.isMobileMode()||(this.input.value=t),this.listener&&this.listener(t,n),n&&this.input.focus(),this.setMenuLayer(!!n)}},{key:"setMenuList",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!this.searchMode){this.ul.innerHTML="",this.selectedLi=null;var i=!1,r=document.createDocumentFragment(),a=Boolean(this.customCss);if(n.forEach(function(n,o){var s=e.makeLi(n,t.selectedValue,a);s.style.backgroundPositionY="".concat(-1*t.itemHeight*o+5,"px"),s.style.backgroundPositionX="".concat(-1*t.itemx,"px"),"text"===t.input.type&&y.a.isMobileMode()&&Object(m.setToolsIcon)(s,m.ToolsIcon.CHECK),a&&s.classList.add(t.customCss),t.selectedValue===n.value&&(i=!0,t.selectedLi=s),r.appendChild(s)}),this.ul.appendChild(r),this.addNewValueWhenUpdateUI&&this.selectedValue&&!i){var o={value:this.selectedValue},s=0;if(n=[o].concat(n),this.comparator){n.sort(this.comparator);for(var l=0,c=n.length;l<c;l++)if(n[l]===o){s=l;break}}this.selectedLi=e.makeLi(o,this.selectedValue),this.ul.insertBefore(this.selectedLi,this.ul.children.item(s))}this.menuList=n}}},{key:"setRecommendList",value:function(t){var n=this;if(t&&!this.searchMode&&(this.recommendUl.innerHTML="",this.recommendUl.parentElement.classList.remove(p.a.ACTIVE),!v.ArrayUtil.isEmpty(t))){this.recommendUl.parentElement.classList.add(p.a.ACTIVE);var i=document.createDocumentFragment();t.forEach(function(t){var r=n.menuList.findIndex(function(e){return e.value===t.value});if(!(r<0)){var a=e.makeLi(t,null,!0);a.style.backgroundPositionY="".concat(-1*n.itemHeight*r+5,"px"),a.style.backgroundPositionX="".concat(-1*n.itemx,"px"),v.StringUtil.isEmpty(n.customCss)||a.classList.add(n.customCss),i.appendChild(a)}}),this.recommendUl.appendChild(i)}}},{key:"setRecommendListVisible",value:function(e){e?this.recommendUl.parentElement.classList.add(p.a.ACTIVE):this.recommendUl.parentElement.classList.remove(p.a.ACTIVE)}},{key:"setScrollRel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectedLi;if(e){var t=300;this.menuListScrollElem.getScrollY()>e.offsetTop?this.menuListScrollElem.setScrollY(e.offsetTop):e.offsetTop+e.offsetHeight>this.menuListScrollElem.getScrollY()+t&&this.menuListScrollElem.setScrollY(e.offsetTop+e.offsetHeight-t)}}},{key:"setMenuListScroll",value:function(){this.menuListScrollElem.setScrollY(0)}}],[{key:"makeLi",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=document.createElement("li");return n===t.value&&r.classList.add(p.a.SELECTED_VALUE),r.setAttribute(e.LI_TAG_VALUE_ATTR_NAME,t.value),i||(r.innerText=t.label?t.label:t.value),r}}]),e}();d()(I,"LI_TAG_VALUE_ATTR_NAME","data-value"),d()(I,"VALUE_CHANGE_DURATION",500),function(e){e.FAMILY="FAMILY",e.FONTSIZE="FONTSIZE"}(_||(_={}))},function(e,t,n){"use strict";var i,r,a,o=n(35),s=n.n(o),l=n(36),c=n.n(l),u=n(364);!function(e){e.PRINT_AREA="print_area_info",e.SAFETY_AREA="safety_area_info"}(i||(i={})),function(e){e[e.next=0]="next",e[e.prev=1]="prev"}(r||(r={})),function(e){e.SAFETY="safety"}(a||(a={}));var h=n(3),d=n(43),p=n(67),v=n(84),f=n(41);n.d(t,"a",function(){return g});var g=function(){function e(){s()(this,e)}return c()(e,null,[{key:"getMarginInfoPageParams",value:function(){var e=[];return e.push({idx:0,type:i.PRINT_AREA,title:h.CRM.get(d.a.PRINTOUT_POPUP_PRINT_AREA_INFO_TITLE),contents:h.CRM.get(d.a.PRINTOUT_POPUP_PRINT_AREA_INFO_CONTENTS)}),e.push({idx:2,type:i.SAFETY_AREA,title:h.CRM.get(d.a.PRINTOUT_POPUP_SAFETY_AREA_INFO_TITLE),contents:h.CRM.get(d.a.PRINTOUT_POPUP_SAFETY_AREA_INFO_CONTENTS)}),e}},{key:"getButtonClassName",value:function(e){var t;switch(e){case r.next:t=u.a.MARGIN_NEXT_BUTTON;break;case r.prev:t=u.a.MARGIN_PREV_BUTTON;break;default:t=""}return t}},{key:"getButtonInnerText",value:function(e){var t;switch(e){case r.next:t=h.CRM.get(d.a.PRINTOUT_POPUP_NEXT_BUTTON);break;case r.prev:t=h.CRM.get(d.a.PRINTOUT_POPUP_PREV_BUTTON);break;default:t=""}return t}},{key:"updateOptionListMap",value:function(e,t){if(t)switch(t.clear(),e){case p.d.PLACARD:t.set(p.c.NONE,h.CRM.get(d.a.TOOLS_POPUP_PRINTOUT_OPTION_TYPE_PLACARD_DEFAULT)),t.set(p.c.BAR,h.CRM.get(d.a.TOOLS_POPUP_PRINTOUT_OPTION_TYPE_PLACARD_BAR)),t.set(p.c.METAL_RING,h.CRM.get(d.a.TOOLS_POPUP_PRINTOUT_OPTION_TYPE_PLACARD_METAL_RING)),t.set(p.c.ROD_SEWING,h.CRM.get(d.a.TOOLS_POPUP_PRINTOUT_OPTION_TYPE_PLACARD_ROD_SEWING));break;case p.d.BANNER:t.set(p.c.NONE,h.CRM.get(d.a.TOOLS_POPUP_PRINTOUT_OPTION_TYPE_BANNER_DEFAULT)),t.set(p.c.METAL_RING,h.CRM.get(d.a.TOOLS_POPUP_PRINTOUT_OPTION_TYPE_BANNER_METAL_RING));break;case p.d.NAME_CARD:t.set(p.c.NONE,h.CRM.get(d.a.TOOLS_POPUP_PRINTOUT_OPTION_TYPE_NAMECARD_DEFAULT)),t.set(p.c.EDGE_ROUNDING,h.CRM.get(d.a.TOOLS_POPUP_PRINTOUT_OPTION_TYPE_NAMECARD_EDGE_ROUNDING));break;default:t.set(p.c.NONE,h.CRM.get(d.a.TOOLS_POPUP_PRINTOUT_OPTION_TYPE_NONE))}}},{key:"isIncludeDot",value:function(e){return e.indexOf(".")>-1}},{key:"initProductList",value:function(e){e&&(e.clear(),e.set(p.d.NO_SELECTION,h.CRM.get(d.a.TOOLS_POPUP_PRINTOUT_OPTION_COMMODITY_NONE)),e.set(p.d.PLACARD,h.CRM.get(d.a.TOOLS_POPUP_PRINTOUT_OPTION_COMMODITY_PLACARD)),e.set(p.d.BANNER,h.CRM.get(d.a.TOOLS_POPUP_PRINTOUT_OPTION_COMMODITY_BANNER)),e.set(p.d.REAL_PRINT,h.CRM.get(d.a.TOOLS_POPUP_PRINTOUT_OPTION_COMMODITY_REAL_PRINT)),e.set(p.d.NAME_CARD,h.CRM.get(d.a.TOOLS_POPUP_PRINTOUT_OPTION_COMMODITY_NAMECARD)),e.set(p.d.POSTER,h.CRM.get(d.a.TOOLS_POPUP_PRINTOUT_OPTION_COMMODITY_POSTER)),e.set(p.d.FLYER,h.CRM.get(d.a.TOOLS_POPUP_PRINTOUT_OPTION_COMMODITY_FLYERS)))}},{key:"makeContentsWhenNoFactor",value:function(){var e=v.a.makeDiv(u.a.ALERT_LIST_WRAPPER),t=v.a.makeDiv(f.a.ACCORDION_TITLE),n=h.CRM.get(d.a.TOOLS_POPUP_PRINTOUT_FACTOR_REVIEW_NO_FACTOR);t.appendChild(v.a.makeHTMLParagraph(n));var i=v.a.makeDiv(u.a.ACCORDION_COUNT_ICON);return i.innerText="0",t.appendChild(i),e.appendChild(t),e.appendChild(v.a.makeContour()),v.a.setActive(e),e}},{key:"setActiveAlertType",value:function(e,t){t.has(e)&&!t.get(e).tab.classList.contains(f.a.ACTIVE)&&(t.forEach(function(e){v.a.setInactive(e.tab),v.a.setInactive(e.contents)}),e===p.a.TOTAL?(v.a.setActive(t.get(e).tab),t.forEach(function(e){return v.a.setActive(e.contents)})):(v.a.setActive(t.get(e).tab),v.a.setActive(t.get(e).contents)))}},{key:"initAlertElementMap",value:function(t){t.set(p.a.TOTAL,e.makeAlertElement(p.a.TOTAL,t)),t.set(p.a.WARNING,e.makeAlertElement(p.a.WARNING,t)),t.set(p.a.CAUTION,e.makeAlertElement(p.a.CAUTION,t)),t.set(p.a.RECOMMEND,e.makeAlertElement(p.a.RECOMMEND,t))}},{key:"makeAlertElement",value:function(t,n){var i=v.a.makeHTMLParagraph("");return i.addEventListener("click",function(i){return e.setActiveAlertType(t,n)}),{tab:i,contents:v.a.makeDiv(u.a.ALERT_LIST_WRAPPER),info:{name:t,count:0,canHold:!1,rstInfoList:[]}}}},{key:"getFactorReviewTabStr",value:function(t){var n=e.getAlertTypeToStr(t),i=e.getAlertTypeCount(t,!0).toString();return"".concat(n," ").concat(i)}},{key:"getAlertTypeToStr",value:function(e){var t="";switch(e){case p.a.TOTAL:t="전체";break;case p.a.WARNING:t="경고";break;case p.a.CAUTION:t="주의";break;case p.a.RECOMMEND:t="권장";break;case p.a.HOLD:t="보류"}return t}},{key:"getAlertTypeCount",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=v.a.getInspectionAllResult();return i?e.getAlertTypeCountOfResultData(t,i,n):0}},{key:"getAlertTypeCountOfResultData",value:function(t,n){var i,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=0;switch(t){case p.a.TOTAL:a=r?n.unHoldCount:n.totalCount;break;case p.a.WARNING:i=n.warningInfo;break;case p.a.CAUTION:i=n.cautionInfo;break;case p.a.RECOMMEND:i=n.recommendInfo;break;case p.a.HOLD:a=n.holdCount}return i?r?e.getAlertTypeUnHoldCount(i):i.count:a}},{key:"getAlertTypeUnHoldCount",value:function(t){var n=0;return t.rstInfoList.forEach(function(t){n+=e.getRestrictionTypeUnHoldCount(t)}),n}},{key:"getAlertCount",value:function(e,t){var n=0;switch(e){case p.a.TOTAL:n=t.unHold;break;case p.a.WARNING:n=t.warning;break;case p.a.CAUTION:n=t.caution;break;case p.a.RECOMMEND:n=t.recommend;break;case p.a.HOLD:n=t.hold;break;case p.a.UNHOLD:n=t.unHold}return n}},{key:"getRestrictionTypeUnHoldCount",value:function(e){var t=e.itemIdListWithHolding.size;return e.itemIdListWithHolding.forEach(function(e){t=e?t-1:t}),t}},{key:"getAlertIcon",value:function(e){var t=document.createElement("div");return t.className="alert_icon",t.classList.add(e),t}},{key:"makeAlertCountIcon",value:function(t){var n=v.a.makeDiv(u.a.ACCORDION_COUNT_ICON);return n.innerText=e.getRestrictionTypeUnHoldCount(t.info).toString(),n}},{key:"makeAccordionTitle",value:function(t,n){var i=v.a.makeDiv(f.a.ACCORDION_TITLE);return i.appendChild(e.getAlertIcon(n)),i.appendChild(v.a.makeHTMLParagraph(t.info.name)),i}},{key:"updateCountIcon",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=parseInt(e.innerText),i=t?n+1:n<1?0:n-1;e.innerText=i.toString()}}]),e}()},,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n(35),r=n.n(i),a=n(36),o=n.n(a),s=n(123),l=function(){function e(t){r()(this,e),this.canvasRenderer=t}return o()(e,[{key:"getPageRenderer",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,a=this.canvasRenderer.pageRenderers[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;if(o.page===e)return o}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return null}},{key:"getGuidelineRenderer",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,a=this.canvasRenderer.pageRenderers[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value,l=e.type===s.c.HOR?o.guidelineRenderer.horGuidelineRenderers:o.guidelineRenderer.verGuidelineRenderers,c=!0,u=!1,h=void 0;try{for(var d,p=l[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){var v=d.value;if(v.guideline===e)return v}}catch(e){u=!0,h=e}finally{try{c||null==p.return||p.return()}finally{if(u)throw h}}}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return null}},{key:"getItemRenderer",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,a=this.canvasRenderer.pageRenderers[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;if(!o)return null;var s=!0,l=!1,c=void 0;try{for(var u,h=o.itemRenderers[Symbol.iterator]();!(s=(u=h.next()).done);s=!0){var d=u.value.getMatchedRenderer(e);if(d)return d}}catch(e){l=!0,c=e}finally{try{s||null==h.return||h.return()}finally{if(l)throw c}}}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return null}}]),e}()},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n(35),r=n.n(i),a=n(36),o=n.n(a),s=function(){function e(){r()(this,e)}return o()(e,null,[{key:"updateConflictedRect",value:function(e,t,n,i){var r=e.left-t.left,a=e.top-t.top,o=n.left+r;Math.round(o)>Math.round(i.left)&&(r+=i.left-o);var s=n.top+a;Math.round(s)>Math.round(i.top)&&(a+=i.top-s),e.left=t.left+r,e.top=t.top+a;var l=e.right-t.right,c=e.bottom-t.bottom,u=n.right+l;Math.round(u)<Math.round(i.right)&&(l+=i.right-u);var h=n.bottom+c;return Math.round(h)<Math.round(i.bottom)&&(c+=i.bottom-h),e.right=t.right+l,e.bottom=t.bottom+c,e.clone()}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return g});var i,r=n(0),a=n.n(r),o=n(1),s=n.n(o),l=n(35),c=n.n(l),u=n(36),h=n.n(u),d=n(37),p=n.n(d),v=n(43),f=n(3),g=function(){function e(t,n,i){c()(this,e),p()(this,"currentPage",1),p()(this,"thumbList",[]),this.meta=t,this.store=n,this.renderer=i,this.totalPage=t.pages.length,this.buildLayerPopup()}var t;return h()(e,[{key:"buildLayerPopup",value:function(){this.bakeThumbnails(),this.nodeRoot=this.createLayer(),this.nodeRoot.appendChild(this.createLayerPopup()),this.addAllEventListeners()}},{key:"addAllEventListeners",value:function(){var e=this;$(this.nodeRoot).on("click",function(t){t.preventDefault(),e.closeLayerPopup()}).on("click",".contents_wrap",function(e){e.stopPropagation()}).on("click",".btn_close",function(){e.closeLayerPopup()}).on("click","#is_prev_image",function(t){t.stopPropagation(),--e.currentPage<1&&(e.currentPage=e.totalPage),$("#is_current_image").text(e.getCurrentPageInfoString()),e.renderCurrentPageThumbnail()}).on("click","#is_next_image",function(t){t.stopPropagation(),++e.currentPage>e.totalPage&&(e.currentPage=1),$("#is_current_image").text(e.getCurrentPageInfoString()),e.renderCurrentPageThumbnail()}).on("click",".pd_btn",function(e){e.stopPropagation()})}},{key:"open",value:function(){document.body.appendChild(this.nodeRoot)}},{key:"closeDownloadSettingPopup",value:function(){this.contentsWrap.removeChild(this.popupWindow)}},{key:"closeLayerPopup",value:function(){document.body.removeChild(this.nodeRoot)}},{key:"renderCurrentPageThumbnail",value:function(){var e=this.thumbList[this.currentPage-1],t=$("#download_preview_img");t.css("top",0),t.css("left",0),t.attr("src",e),t.load(e,function(){var e=$("#is_image_box"),n=e.height(),i=e.width(),r=t.height(),a=t.width();a>r?t.css("top","".concat(Math.floor((n-r)/2),"px")):a<r&&t.css("left","".concat(Math.floor((i-a)/2),"px"))})}},{key:"bakeThumbnails",value:(t=s()(a.a.mark(function e(){var t,n,i,r,o,s,l,c,u,h,d;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=264,n=!0,i=!1,r=void 0,e.prev=4,o=this.meta.pages[Symbol.iterator]();case 6:if(n=(s=o.next()).done){e.next=20;break}return l=s.value,c=l.sheetSize.height/l.sheetSize.width,u=void 0,h=void 0,d=void 0,c>1?(h=Math.min(t,l.sheetSize.height),u=h/c,d=h/l.sheetSize.height):(u=Math.min(t,l.sheetSize.width),h=u*c,d=u/l.sheetSize.width),!0,e.t0=this.thumbList,e.next=15,l.renderThumbnail(u,h,d,!0);case 15:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 17:n=!0,e.next=6;break;case 20:e.next=26;break;case 22:e.prev=22,e.t2=e.catch(4),i=!0,r=e.t2;case 26:e.prev=26,e.prev=27,n||null==o.return||o.return();case 29:if(e.prev=29,!i){e.next=32;break}throw r;case 32:return e.finish(29);case 33:return e.finish(26);case 34:this.renderCurrentPageThumbnail();case 35:case"end":return e.stop()}},e,this,[[4,22,26,34],[27,,29,33]])})),function(){return t.apply(this,arguments)})},{key:"createLayer",value:function(){var e=document.createElement("div");return e.className="download_layer_popup",e}},{key:"createLayerPopup",value:function(){var e=document.createElement("div");e.className="contents_wrap";var t=document.createElement("i");return t.classList.add("btn_close","icon_close"),e.appendChild(t),e.appendChild(this.createPopupWindow()),this.contentsWrap=e,e}},{key:"createPopupWindow",value:function(){var e=document.createElement("div");e.className="download_setting",e.id="download_setting";var t=document.createElement("div");return t.className="title_box",t.innerText=f.CRM.get(v.a.HEADER_DOWNLOAD),e.appendChild(t),e.appendChild(this.createImageSlider()),e.appendChild(this.createDownloadBtn()),this.popupWindow=e,e}},{key:"createImageSlider",value:function(){var e=document.createElement("div");e.className="image_slider";var t=document.createElement("div");t.className="image_selector";var n=document.createElement("i");n.id="is_prev_image",n.className="icon_greater_than",t.appendChild(n);var i=document.createElement("span");i.id="is_current_image",i.innerText=this.getCurrentPageInfoString(),t.appendChild(i);var r=document.createElement("i");r.id="is_next_image",r.className="icon_greater_than",t.appendChild(r);var a=document.createElement("div");a.id="is_image_box",a.className="slider_image_box";var o=document.createElement("img");return o.id="download_preview_img",a.appendChild(o),e.appendChild(t),e.appendChild(a),e}},{key:"createPrintOptionList",value:function(){var e=document.createElement("div");e.className="combo-box";var t=document.createElement("select");return t.title="option preset",[{labelName:"PNG (권장)",value:"png"},{labelName:"JPG",value:"jpg"}].forEach(function(e){var n=document.createElement("option");n.label=e.labelName,n.value=e.value,t.appendChild(n)}),e.appendChild(t),e}},{key:"createSizePresetList",value:function(){var e=document.createElement("div");e.className="combo-box";var t=document.createElement("select");return t.title="size preset",[{name:"사용자 지정 사이즈",width:0,height:0,lengthUnit:i.CENTI,dpi:0},{name:"가로 현수막형",width:500,height:90,lengthUnit:i.CENTI,dpi:70},{name:"세로 현수막형",width:90,height:500,lengthUnit:i.CENTI,dpi:70},{name:"정사각 현수막형",width:90,height:90,lengthUnit:i.CENTI,dpi:70},{name:"가로 포스터형",width:297,height:210,lengthUnit:i.MILLI,dpi:70},{name:"세로 포스터형",width:210,height:297,lengthUnit:i.MILLI,dpi:70},{name:"세로 배너형",width:60,height:180,lengthUnit:i.CENTI,dpi:70},{name:"명함 가로형",width:94,height:54,lengthUnit:i.MILLI,dpi:120},{name:"명함 세로형",width:54,height:94,lengthUnit:i.MILLI,dpi:120},{name:"스티커 정사각형",width:70,height:70,lengthUnit:i.MILLI,dpi:120},{name:"스티커 직사각형",width:90,height:55,lengthUnit:i.MILLI,dpi:120},{name:"리플렛",width:297,height:210,lengthUnit:i.MILLI,dpi:120},{name:"전단지",width:210,height:297,lengthUnit:i.MILLI,dpi:120},{name:"티켓 가로형",width:172,height:82,lengthUnit:i.MILLI,dpi:120},{name:"티켓 세로형",width:82,height:172,lengthUnit:i.MILLI,dpi:120},{name:"테이블 세팅지",width:426,height:300,lengthUnit:i.MILLI,dpi:120},{name:"L홀더",width:446,height:316,lengthUnit:i.MILLI,dpi:120},{name:"어깨띠",width:12,height:90,lengthUnit:i.CENTI,dpi:120},{name:"Facebook 커버",width:820,height:312,lengthUnit:i.PIXEL,dpi:0},{name:"Facebook 게시물",width:940,height:788,lengthUnit:i.PIXEL,dpi:0},{name:"Instagram 게시물",width:1080,height:1080,lengthUnit:i.PIXEL,dpi:0}].forEach(function(e){var n=document.createElement("option");n.label=e.name,n.value=e.width+"_"+e.height+"_"+e.lengthUnit+"_"+e.dpi,t.appendChild(n)}),e.appendChild(t),e}},{key:"createOptionDivider",value:function(){var e=this,t=document.createElement("div");t.className="option_divider";var n=document.createElement("div");n.className="toggle_button_wrap";var i=document.createElement("div");i.className="toggle_button";var r=document.createElement("i");return r.className="icon_much_greater_than",t.appendChild(n),n.appendChild(i),i.appendChild(r),i.addEventListener("click",function(){e.popupWindow.classList.contains("unfold")?e.popupWindow.classList.remove("unfold"):e.popupWindow.classList.add("unfold")}),t}},{key:"createDownloadBtn",value:function(){var e=document.createElement("div");return e.className="pd_btn",e.innerText=f.CRM.get(v.a.HEADER_DOWNLOAD),e}},{key:"createAdvancedOption",value:function(){var e=document.createElement("div");return e.className="advanced_option",e.appendChild(this.createEditImageSizeSelector()),e.appendChild(this.createSizePresetList()),e.appendChild(this.createCustomSizeBox()),e.appendChild(this.createApplyBox()),e}},{key:"createEditImageSizeSelector",value:function(){var e=document.createElement("div");return e.className="edit_image_size_selector",e.appendChild(this.createSizeInputBox()),e.appendChild(this.createSizeInputBox()),e}},{key:"createSizeInputBox",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"px",t=document.createElement("div");t.className="size_input_box";var n=document.createElement("input");n.title="size",n.type="text";var i=document.createElement("label");return i.innerText=e,t.appendChild(n),t.appendChild(i),t}},{key:"createCustomSizeBox",value:function(){var e=document.createElement("div");return e.className="custom_size",e.appendChild(this.createRadioGroup()),e.appendChild(this.createSizeInputBox("dpi")),e}},{key:"createRadioGroup",value:function(){var e=document.createElement("div");return e.className="size_radio_group_hor",e.appendChild(this.createRadioButton("px-option",i.PIXEL,"unitGroup")),e.appendChild(this.createRadioButton("mm-option",i.MILLI,"unitGroup")),e}},{key:"createRadioButton",value:function(e,t,n){var i=document.createElement("div");i.className="custom_radio_btn";var r=document.createElement("input");r.type="radio",r.id=e,r.name=n;var a=document.createElement("label");a.htmlFor=e,a.innerText=t;var o=document.createElement("div");return o.className="check",i.appendChild(r),i.appendChild(a),i.appendChild(o),i}},{key:"createApplyBox",value:function(){var e=document.createElement("div");e.className="apply_box";var t=document.createElement("span");t.innerText="설정 초기화";var n=document.createElement("span");return n.innerText="전체 디자인에 적용",e.appendChild(t),e.appendChild(n),e}},{key:"getCurrentPageInfoString",value:function(){return"".concat(this.currentPage," / ").concat(this.totalPage)}}]),e}();!function(e){e.MILLI="mm",e.CENTI="cm",e.PIXEL="px"}(i||(i={}))},function(e,t,n){"use strict";n.d(t,"a",function(){return E});var i=n(0),r=n.n(i),a=n(1),o=n.n(a),s=n(35),l=n.n(s),c=n(36),u=n.n(c),h=n(37),d=n.n(h),p=n(75),v=n(51),f=n(116),g=n(103),m=n(127),E=function(){function e(t){l()(this,e),this.textParser=t}var t,n;return u()(e,[{key:"createNewItem",value:function(t,n,i,r,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],l=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=!(arguments.length>8&&void 0!==arguments[8])||arguments[8],u=!(arguments.length>9&&void 0!==arguments[9])||arguments[9],h=!(arguments.length>10&&void 0!==arguments[10])||arguments[10],d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];return e.createGenericItem(p.b,t,n,i,r,a,o,s,l,c,u,h,d)}},{key:"parse",value:(n=o()(r.a.mark(function e(t,n){var i,a,o,s,l,c,u,h;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=25;break}if((i=this.createNewItem(Object(m.a)(),t.Position["@Left"],t.Position["@Top"],t.Position["@Right"],t.Position["@Bottom"],-t["@Rotate"],-1===t["@FlipH"],-1===t["@FlipV"],-1===n["@CanUserSelect"],-1===n["@CanUserMove"],-1===n["@CanUserResize"],-1===n["@CanUserDel"])).copyKey=t["@copyKey"]?t["@copyKey"]:"",i.groupId=t["@GroupId"]?t["@GroupId"]:"",i.layerName=t["@LayerName"]?t["@LayerName"]:"",i.priority=t["@Priority"]?t["@Priority"]:0,i.props.setOpacity(null!=t["@Opacity"]?t["@Opacity"]:255),a=t["@borderScaleStandard"],i.borderScaleStandard=null!=a?a:800,o=void 0!==t["@ParentTbpeId"],s=void 0===t["@NewGrid"],l=this.makeCellNodes(t.CELL),this.parseGridLines(i,t),!o){e.next=17;break}this.parseCellFromDelphi(i,l),e.next=23;break;case 17:if(!s){e.next=21;break}this.parseCellFromOldUnicorn(i,l),e.next=23;break;case 21:return e.next=23,this.parseCellFromNewUnicorn(i,l);case 23:e.next=42;break;case 25:if((i=this.createNewItem(Object(m.a)(),n.Position["@Left"],n.Position["@Top"],n.Position["@Right"],n.Position["@Bottom"],-n["@Rotate"],-1===n["@FlipH"],-1===n["@FlipV"],-1===n["@CanUserSelect"],-1===n["@CanUserMove"],-1===n["@CanUserResize"],-1===n["@CanUserDel"])).props.setOpacity(null!=t["@Opacity"]?t["@Opacity"]:255),c=void 0===t["@Priority"],u=void 0===t["@NewGrid"],h=this.makeCellNodes(n.CELL),this.parseGridLines(i,t),!c){e.next=35;break}this.parseCellFromDelphi(i,h),e.next=41;break;case 35:if(!u){e.next=39;break}this.parseCellFromOldUnicorn(i,h),e.next=41;break;case 39:return e.next=41,this.parseCellFromNewUnicorn(i,h);case 41:i.addedBy=v.c.LAYOUT;case 42:return i.adjustSize(),e.abrupt("return",i);case 44:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})},{key:"parseGridLines",value:function(e,t){var n=[];if(Array.isArray(t.COL)){var i=!0,r=!1,a=void 0;try{for(var o,s=t.COL[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var l=o.value;n.push(l)}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}}else n.push(t.COL);var c=[];if(Array.isArray(t.ROW)){var u=!0,h=!1,d=void 0;try{for(var p,v=t.ROW[Symbol.iterator]();!(u=(p=v.next()).done);u=!0){var f=p.value;c.push(f)}}catch(e){h=!0,d=e}finally{try{u||null==v.return||v.return()}finally{if(h)throw d}}}else c.push(t.ROW);e.init(c.length,n.length,t["@AspectRatio"]),e.rows.forEach(function(e,t){e.thicknessRatio=c[t]["@Ratio"],e.thickness=c[t]["@Width"]||c[t]["@Height"]}),e.cols.forEach(function(e,t){e.thicknessRatio=n[t]["@Ratio"],e.thickness=n[t]["@Width"]||n[t]["@Height"]})}},{key:"parseCellFromDelphi",value:function(t,n){var i=this;t.cells.forEach(function(r,a){r.forEach(function(r,o){var s=n[a*t.cols.length+o],l=g.a.parseColorString(s["@BGColor"]);if(0===l.alpha?r.cellProps.setCellBackgroundColor("#00000000"):r.cellProps.setCellBackgroundColor(l.rgb),r.textProps.setColor(g.a.parseColorString(s["@TextColor"]).rgb),r.textProps.setFamily(s["@FontName"]),r.innerText=null!=s["@Text"]?s["@Text"]:"",r.textProps.setAbsSize(7*s["@FontSize"]),r.textProps.setTextAlignXml(s["@TextAlignH"]||"LEFT"),r.textProps.setVerticalAlignXml(s["@TextAlignV"]||"TOP"),s.FontStyle&&(r.textProps.setBold(s.FontStyle["@Bold"]||!1),r.textProps.setItalic(s.FontStyle["@Italic"]||!1),r.textProps.setUnderline(s.FontStyle["@Underline"]||!1),r.textProps.setStrikeout(s.FontStyle["@Strikeout"]||!1)),r.textProps.setUpperCase(s["@TextUpperCase"]||!1),r.textProps.setListStyleBullet(s["@TextListStyleBullet"]||!1),r.textProps.setListStyleNumber(s["@TextListStyleNumber"]||!1),r.textProps.setActiveFontDetail(!0),r.textProps.setFontDetailTextSpaceXml(1+(s["@TextSpace"]||0)/10),r.textProps.setFontDetailLineSpaceXml(s["@TextLineSpace"]||0),r.textProps.setFontDetailScaleX(1+(s["@TextScaleX"]||0)/100,!0),r.cellType=s["@CellType"],r.cellType===f.c.SLAVE){s[e.MASTER_CELL_ROW_NO_NODE_NAME]=s[e.MASTER_CELL_ROW_NO_NODE_NAME]-1,s[e.MASTER_CELL_COL_NO_NODE_NAME]=s[e.MASTER_CELL_COL_NO_NODE_NAME]-1;var c=s[e.MASTER_CELL_ROW_NO_NODE_NAME],u=s[e.MASTER_CELL_COL_NO_NODE_NAME],h=n[c*t.cols.length+u];h[e.CHILD_CELL_ROW_NO_NODE_NAME]=a,h[e.CHILD_CELL_COL_NO_NODE_NAME]=o}i.parseBorders(r,s,.25)})}),this.parseMasterSlaveCell(t,n);var r=!0,a=!1,o=void 0;try{for(var s,l=t.cells[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var c=s.value,u=!0,h=!1,d=void 0;try{for(var p,v=c[Symbol.iterator]();!(u=(p=v.next()).done);u=!0){var m=p.value;m.synchronizeBorder(m.borders.left),m.synchronizeBorder(m.borders.top),m.synchronizeBorder(m.borders.right),m.synchronizeBorder(m.borders.bottom)}}catch(e){h=!0,d=e}finally{try{u||null==v.return||v.return()}finally{if(h)throw d}}}}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}}},{key:"parseCellFromOldUnicorn",value:function(e,t){var n=this;e.cells.forEach(function(i,r){i.forEach(function(i,a){var o=t[r*e.cols.length+a];i.cellProps.setCellBackgroundColor(o["@BGColor"]),i.textProps.setColor(g.a.parseColorString(o["@TextColor"]).rgb),i.textProps.setFamily(o["@FontName"]),i.innerText=null!=o["@Text"]?o["@Text"]:"",i.textProps.setAbsSize(o["@FontSize"]),i.textProps.setTextAlign(o["@TextAlignH"]||"LEFT"),i.textProps.setVerticalAlign(o["@TextAlignV"]||"TOP"),o.FontStyle&&(i.textProps.setBold(o.FontStyle["@Bold"]||!1),i.textProps.setItalic(o.FontStyle["@Italic"]||!1),i.textProps.setUnderline(o.FontStyle["@Underline"]||!1),i.textProps.setStrikeout(o.FontStyle["@Strikeout"]||!1)),i.textProps.setUpperCase(o["@TextUpperCase"]||!1),i.textProps.setListStyleBullet(o["@TextListStyleBullet"]||!1),i.textProps.setListStyleNumber(o["@TextListStyleNumber"]||!1),i.textProps.setActiveFontDetail(!0),i.textProps.setFontDetailTextSpaceXml(o["@TextTextSpace"]||0),i.textProps.setFontDetailLineSpaceXml(o["@TextLineSpace"]||0),i.textProps.setFontDetailScaleX(null!=o["@TextScaleX"]?o["@TextScaleX"]:1,!0),i.cellType=o["@CellType"],n.parseBorders(i,o,1)})}),this.parseMasterSlaveCell(e,t);var i=!0,r=!1,a=void 0;try{for(var o,s=e.cells[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var l=o.value,c=!0,u=!1,h=void 0;try{for(var d,p=l[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){var v=d.value;v.synchronizeBorder(v.borders.left),v.synchronizeBorder(v.borders.top),v.synchronizeBorder(v.borders.right),v.synchronizeBorder(v.borders.bottom)}}catch(e){u=!0,h=e}finally{try{c||null==p.return||p.return()}finally{if(u)throw h}}}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}}},{key:"parseCellFromNewUnicorn",value:(t=o()(r.a.mark(function e(t,n){var i,a,o,s,l,c,u,h,d,p,v;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(i=!1,a=0;a<t.row;a++)for(o=0;o<t.col;o++)s=n[a*t.cols.length+o],s["@CellType"]===f.c.MASTER&&(i=!0);if(!i)for(l=0;l<t.row;l++)for(c=0;c<t.col;c++)n[l*t.cols.length+c]["@CellType"]=f.c.NONE;u=0;case 4:if(!(u<t.row)){e.next=22;break}h=0;case 6:if(!(h<t.col)){e.next=19;break}return d=t.cells[u][h],p=n[u*t.cols.length+h],d.cellProps.setCellBackgroundColor(p["@BGColor"]),e.next=12,this.textParser.parse(p.CHILDTEXT,p.CHILDTEXT.TEMPLATE);case 12:v=e.sent,d.childTextItem.props=v.props.clone(),d.cellType=p["@CellType"],this.parseBorders(d,p,1);case 16:h++,e.next=6;break;case 19:u++,e.next=4;break;case 22:this.parseMasterSlaveCell(t,n);case 23:case"end":return e.stop()}},e,this)})),function(e,n){return t.apply(this,arguments)})},{key:"parseBorders",value:function(e,t,n){this.parseBorder(e.borders.left,t.CellOutLineLeft,n),this.parseBorder(e.borders.top,t.CellOutLineTop,n),this.parseBorder(e.borders.right,t.CellOutLineRight,n),this.parseBorder(e.borders.bottom,t.CellOutLineBottom,n),t.CellOutLineDLTRB&&this.parseBorder(e.borders.downDiagonal,t.CellOutLineDLTRB,n),t.CellOutLineDLBRT&&this.parseBorder(e.borders.upDiagonal,t.CellOutLineDLBRT,n)}},{key:"parseBorder",value:function(e,t,n){e.visible=t["@Visible"],e.thickness=Math.max(t["@Width"]*n,1),e.color=g.a.parseColorString(t["@Color"]).rgb}},{key:"parseMasterSlaveCell",value:function(t,n){t.cells.forEach(function(i,r){i.forEach(function(i,a){var o=n[r*t.cols.length+a];i.cellType===f.c.SLAVE?(i.visible=!1,i.masterCell=t.cells[o[e.MASTER_CELL_ROW_NO_NODE_NAME]][o[e.MASTER_CELL_COL_NO_NODE_NAME]]):i.cellType===f.c.MASTER&&t.mergeTool.mergeCells({startPos:{row:r,col:a},endPos:{row:o[e.CHILD_CELL_ROW_NO_NODE_NAME],col:o[e.CHILD_CELL_COL_NO_NODE_NAME]}})})}),t.sizeTool.synchronizeCells()}},{key:"makeCellNodes",value:function(e){return e?Array.isArray(e)?e:[e]:null}}],[{key:"createGenericItem",value:function(e,t,n,i,r,a){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8&&void 0!==arguments[8]&&arguments[8],c=!(arguments.length>9&&void 0!==arguments[9])||arguments[9],u=!(arguments.length>10&&void 0!==arguments[10])||arguments[10],h=!(arguments.length>11&&void 0!==arguments[11])||arguments[11],d=!(arguments.length>12&&void 0!==arguments[12])||arguments[12];return new e(t,n,i,r,a,o,s,l,c,u,h,d)}}]),e}();d()(E,"MASTER_CELL_ROW_NO_NODE_NAME","@MasterCellRowNo"),d()(E,"MASTER_CELL_COL_NO_NODE_NAME","@MasterCellColNo"),d()(E,"CHILD_CELL_ROW_NO_NODE_NAME","@ChildCellRowNo"),d()(E,"CHILD_CELL_COL_NO_NODE_NAME","@ChildCellColNo")},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n(35),r=n.n(i),a=n(36),o=n.n(a),s=n(50),l=function(){function e(){r()(this,e)}return o()(e,null,[{key:"correctFromPage",value:function(e){e.getAllSingleItems().forEach(function(t){t instanceof s.e&&(t.orgType!==s.b.Skin||t.backgroundState===s.a.PHOTO_TO_BACKGROUND?t.orgType===s.b.BackgroundImage&&t.backgroundState===s.a.NONE&&(t.backgroundState=s.a.ORIGIN):t.isSkinable(e.sheetSize)||(t.backgroundState=s.a.BACKGROUND_TO_PHOTO))})}}]),e}()},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n(35),r=n.n(i),a=n(36),o=n.n(a),s=n(42),l=n(117),c=function(){function e(){r()(this,e)}return o()(e,null,[{key:"selectTextItemWordAll",value:function(e){s.a.dispatch(new l.d(e,0,0)),s.a.dispatch(new l.g(e))}}]),e}()},,function(e,t,n){"use strict";var i=n(35),r=n.n(i),a=n(36),o=n.n(a),s=n(37),l=n.n(s),c=function(){function e(t){r()(this,e),l()(this,"checkRestriction",!1),l()(this,"completeButtonLabel",""),"BIZHOWS"===t.channel&&(this.setBizhowsCommon(),"NEW"===t.changeMode?this.setBizhowsNewMode():this.setBizhowsUpdateMode())}return o()(e,[{key:"setBizhowsCommon",value:function(){this.checkRestriction=!0}},{key:"setBizhowsNewMode",value:function(){this.completeButtonLabel="장바구니에 추가하기"}},{key:"setBizhowsUpdateMode",value:function(){this.completeButtonLabel="디자인 수정완료"}}]),e}();t.a=c},function(e,t,n){"use strict";var i=n(35),r=n.n(i),a=n(36),o=n.n(a),s=n(37),l=n.n(s),c=function(){function e(t){r()(this,e),l()(this,"fillBackground",!0),l()(this,"addNewPage",!0),l()(this,"copyPage",!0),l()(this,"moveUpPage",!0),l()(this,"moveDownPage",!0),l()(this,"deletePage",!0),l()(this,"foldable",!0),l()(this,"pageTitleEditable",!0),"BIZHOWS"===t.channel&&this.setBizhowsCommon()}return o()(e,[{key:"setBizhowsCommon",value:function(){this.addNewPage=!1,this.copyPage=!1,this.moveUpPage=!1,this.moveDownPage=!1,this.deletePage=!1,this.foldable=!1,this.pageTitleEditable=!1}}]),e}();t.a=c},function(e,t,n){"use strict";n.d(t,"a",function(){return N});var i=n(0),r=n.n(i),a=n(1),o=n.n(a),s=n(35),l=n.n(s),c=n(36),u=n.n(c),h=n(39),d=n.n(h),p=n(38),v=n.n(p),f=n(44),g=n.n(f),m=n(40),E=n.n(m),y=n(37),T=n.n(y),_=n(45),I=n(42),C=n(67),S=n(209),w=n(75),k=n(62),R=n(48),L=n(56),O=n(41),A=n(66),b=n(284),P=n(12),N=function(e){function t(){var e;return l()(this,t),e=d()(this,v()(t).call(this)),T()(g()(e),"actionType",_.a.ONE_TIME),T()(g()(e),"changeDesign",function(){return!1}),T()(g()(e),"commitAction",function(n,i,r){var a=r.canvasRenderer.printout;if(a){var o={isShowPrintoutGuide:t.getIsShowPrintoutGuide,isPhotoCropMode:t.getIsPhotoCropMode,getSizeOption:function(){return t.getSizeOption()},getPrintoutOption:t.getPrintoutOption,getActiveItems:t.getActiveItems,getRenderedPageId:e.getRenderedPageId.bind(g()(e)),getPageDOMPosition:e.getPageDOMPosition.bind(g()(e)),getPageCount:e.getPageCount.bind(g()(e)),getAllPageIdList:e.getAllPageIdList.bind(g()(e)),removeNotExistResultOfItem:e.removeNotExistResultOfItem.bind(g()(e)),removePrintoutGuideById:e.removePrintoutGuideById.bind(g()(e)),removeNotExistResultOfPage:e.removeNotExistResultOfPage.bind(g()(e)),selectItemById:e.selectItemById.bind(g()(e))};a.setCallbackReference(o)}var s={isSelected:e.isSelected.bind(g()(e)),getItemTitle:e.getItemTitle.bind(g()(e)),selectItemByIdList:e.selectItemByIdList.bind(g()(e)),getItemThumbElement:e.getItemThumbElement.bind(g()(e)),showAlertPopup:e.showAlertPopup.bind(g()(e))};r.rightSection.printoutFinalConfirm.setCallbackReference(s),r.itemGuideAlertMobile.setPrintoutAlertBtnClickListener(e.showAlertPopup.bind(g()(e)))}),T()(g()(e),"rollbackAction",function(){}),T()(g()(e),"recycle",function(){}),e.doSaveQueue=!1,e.renderAuto=!1,e}var n,i,a;return E()(t,e),u()(t,[{key:"getRenderedPageId",value:function(){var e="";return I.a.dispatch(new _.c(function(t,n){e=t.pages[n.renderPageIdx].pageId})),e}},{key:"getPageDOMPosition",value:function(){var e=null;return I.a.dispatch(new _.c(function(t,n){var i=t.pages[0].sheetSize,r=n.zoomScale*n.pageEditScale;e={left:0,top:0,width:i.width*r,height:i.height*r}})),e}},{key:"getPageCount",value:function(){var e=0;return I.a.dispatch(new _.c(function(t){e=t.pages.length})),e}},{key:"getAllPageIdList",value:function(){var e=[];return I.a.dispatch(new _.c(function(t){t.pages.forEach(function(t){return e.push(t.pageId)})})),e}},{key:"isSelected",value:function(e){var t=this.searchItem(e);return!!t&&t.select}},{key:"getItemTitle",value:function(e){var t="null",n=this.searchItem(e);return n&&(t=n instanceof k.b?n.props.getText():R.b.getText(n.getResourceType())),t}},{key:"searchItem",value:function(e){var t=null;return I.a.dispatch(new _.c(function(n){n.pages.forEach(function(n){return n.getAllSingleItems().forEach(function(n){n.tbpeId===e&&(t=n)})})})),t}},{key:"selectItemByIdList",value:(a=o()(r.a.mark(function e(t){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&0!==t.length){e.next=2;break}return e.abrupt("return");case 2:n=[],I.a.dispatch(new _.c(function(){var e=o()(r.a.mark(function e(i,a,o){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.forEach(function(e){i.pages.forEach(function(t){return t.getAllSingleItems().forEach(function(t){t.tbpeId!==e||n.push(t)})})}),0!==n.length){e.next=3;break}throw new Error("해당 아이템을 찾을 수 없습니다.");case 3:return L.a.selectItems(n),e.next=6,o.renderAuto(i,a);case 6:case"end":return e.stop()}},e)}));return function(t,n,i){return e.apply(this,arguments)}}()));case 4:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)})},{key:"getItemThumbElement",value:function(e){var n=document.createElement("div");return n.className=O.a.THUMB,I.a.dispatch(new _.c(function(i){i.pages.forEach(function(i){return i.getAllSingleItems().forEach(function(){var i=o()(r.a.mark(function i(a){var o;return r.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(a.tbpeId!==e){i.next=13;break}if(!(a instanceof k.b)){i.next=5;break}Object(P.setToolsIcon)(n,P.ToolsIcon.ITEM_TEXT),i.next=13;break;case 5:if(!(a instanceof w.b)){i.next=9;break}Object(P.setToolsIcon)(n,P.ToolsIcon.ITEM_GRID),i.next=13;break;case 9:return i.next=11,t.renderItemThumb(a);case 11:o=i.sent,n.appendChild(o);case 13:case"end":return i.stop()}},i)}));return function(e){return i.apply(this,arguments)}}())})})),n}},{key:"showAlertPopup",value:function(e){I.a.dispatch(new _.c(function(t,n,i){t.pages.forEach(function(t){return t.getAllSingleItems().forEach(function(){var n=o()(r.a.mark(function n(a){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:a.tbpeId===e&&i.canvasRenderer.printout.showAlertPopup(t.pageId,a.tbpeId);case 1:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}())})}))}},{key:"removePrintoutGuideById",value:function(e){I.a.dispatch(new _.c(function(){var t=o()(r.a.mark(function t(n,i,a){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n.pages.forEach(function(t){return t.getAllSingleItems().forEach(function(t){t.tbpeId===e&&t})}),a.canvasRenderer.printout&&(a.canvasRenderer.printout.removeItemById([e]),a.rightSection.printoutFinalConfirm.render(e,C.e.NONE));case 2:case"end":return t.stop()}},t)}));return function(e,n,i){return t.apply(this,arguments)}}()))}},{key:"removeNotExistResultOfItem",value:function(){I.a.dispatch(new _.c(function(e,t,n){e.pages.forEach(function(e){var t=b.a.getItemIdList(e.getAllSingleItems());n.canvasRenderer.printout.inspectionResult.removeNotExistResultOfItem(e.pageId,t)})}))}},{key:"selectItemById",value:(i=o()(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:I.a.dispatch(new _.c(function(){var e=o()(r.a.mark(function e(n,i,a){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.pages.forEach(function(e){return e.getAllSingleItems().forEach(function(e){e.tbpeId!==t||e.isOnlyOneItem()||L.a.selectItem(e)})}),e.next=3,a.renderAuto(n,i);case 3:case"end":return e.stop()}},e)}));return function(t,n,i){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)})},{key:"removeNotExistResultOfPage",value:function(){var e=[];I.a.dispatch(new _.c(function(t,n,i){t.pages.forEach(function(t){e.push(t.pageId)}),i.canvasRenderer.printout.inspectionResult.removeNotExistResultOfPage(e)}))}}],[{key:"getIsShowPrintoutGuide",value:function(){return I.a.instance.config.showPrintOutGuide}},{key:"getSizeOption",value:function(){return S.a.getSizeOption()}},{key:"getPrintoutOption",value:function(){return S.a.getPrintoutOption()}},{key:"getActiveItems",value:function(){return I.a.instance.activeItems}},{key:"getIsPhotoCropMode",value:function(){return I.a.isCropMode()}},{key:"renderItemThumb",value:(n=o()(r.a.mark(function e(n,i){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n instanceof A.b)){e.next=5;break}a=document.createElement("div"),t.setImageFrameThumb(a,n.getThumbString(36)),e.next=15;break;case 5:return a=new Image,e.prev=6,e.next=9,n.getThumbUrl(36,36);case 9:a.src=e.sent,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}},e,null,[[6,12]])})),function(e,t){return n.apply(this,arguments)})},{key:"setImageFrameThumb",value:function(e,t){e.innerHTML=t;var n=e.firstElementChild;n.style.top="50%",n.style.left="50%",n.style.transform="translate(-50%, -50%)"}}]),t}(_.b)},function(e,t,n){"use strict";n.d(t,"a",function(){return T});var i=n(39),r=n.n(i),a=n(38),o=n.n(a),s=n(44),l=n.n(s),c=n(40),u=n.n(c),h=n(37),d=n.n(h),p=n(35),v=n.n(p),f=n(36),g=n.n(f),m=n(42),E=n(221),y=n(45),T=function(){function e(){v()(this,e)}return g()(e,null,[{key:"getPaginManager",value:function(e,t){return new _(t)}}]),e}(),_=function(e){function t(){var e,n;v()(this,t);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=r()(this,(e=o()(t)).call.apply(e,[this].concat(a))),d()(l()(n),"type",E.c.SCROLL),d()(l()(n),"updateRenderPageIdx",function(e){m.a.isCropMode()||m.a.dispatch(new y.c(function(t){for(var n=0,i=t.pages.length;n<i;n++){var r=m.a.instance.pageController.getPageRenderer(t.pages[n]).contents.getBoundingClientRect();if(r.left<=e.x&&r.right>=e.x&&r.top<=e.y&&r.bottom>=e.y){m.a.instance.renderPageIdx=n;break}}}))}),d()(l()(n),"isCleanRegacyPageElement",function(){return!1}),d()(l()(n),"isRenderPageAll",function(){return!0}),d()(l()(n),"isChangePageByScroll",function(){return!0}),d()(l()(n),"isChangePageElementOffsetY",function(){return!0}),d()(l()(n),"whiteSpaceElementDisplay",function(){return"block"}),d()(l()(n),"isPageOffsetY",function(){return!0}),d()(l()(n),"isShowPageListNavigator",function(){return!1}),d()(l()(n),"getMouseOffsetY",function(){return m.a.instance.getPageScrollOffset()}),n}return u()(t,e),t}(function(){function e(t){var n=this;v()(this,e),d()(this,"isValidCachedCanvasSize",!1),d()(this,"getSelectAreaOffset",function(){var e=n.getCanvasBoundingRect();return{x:e.left,y:e.top}}),d()(this,"getHandlerOffset",function(){return{x:m.a.instance.handlerOffsetX,y:m.a.instance.handlerOffsetY+n.getMouseOffsetY()}}),this.canvas=t.canvas}return g()(e,[{key:"refreshCache",value:function(){this.isValidCachedCanvasSize=!1}},{key:"getCanvasBoundingRect",value:function(){return this.isValidCachedCanvasSize?this.canvasSizeCache:(this.canvasSizeCache=this.canvas.getBoundingClientRect(),this.isValidCachedCanvasSize=!0,this.canvasSizeCache)}}]),e}())},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n(35),r=n.n(i),a=n(36),o=n.n(a),s=n(49),l=n(55),c=n(381),u=function(){function e(){r()(this,e)}return o()(e,null,[{key:"getInnerSize",value:function(e,t){var n=e-2*t;return n>0?n:0}},{key:"isValidMarginSize",value:function(e,t){return t>=0&&2*t<e}},{key:"getInnerInfos",value:function(t,n,i,r){var a=i<r;return{element:t,left:a?0:n,top:a?n:0,width:a?i:e.getInnerSize(i,n),height:a?e.getInnerSize(r,n):r}}},{key:"getIconPosition",value:function(e,t,n,i){var r=e<t,a=n/2,o=r?e/2-a:i-a,s=r?i-a:t/2-a;return{left:o,top:s,right:o,bottom:s,width:n,height:n}}},{key:"getLtrbToRotatedInfos",value:function(e,t,n,i){return{element:e,left:t.left*i,top:t.top*i,width:t.getWidth()*i,height:t.getHeight()*i,degree:n}}},{key:"getInnerLTRBCoordinate",value:function(e,t,n){return new s.a(n,n,e-n,t-n)}},{key:"getItemPurePos",value:function(e,t){var n=t?t.leftTopPt.cx:0,i=t?t.leftTopPt.cy:0;return{left:e.left+n,top:e.top+i}}},{key:"getItemMBRInfos",value:function(e,t,n,i,r,a){return{element:e,left:i.left-t*a,top:i.top-n*a,degree:r,width:i.getWidth(),height:i.getHeight()}}},{key:"getInfos",value:function(e,t,n){return{element:e,left:0,top:0,width:t,height:n}}},{key:"getPureBoundInfos",value:function(e,t,n){return{element:e,left:t.leftTopPt.cx*n,top:t.leftTopPt.cy*n,width:t.width*n,height:t.height*n}}},{key:"getPureInfos",value:function(t,n,i,r){var a=n.getWidth()*i,o=n.getHeight()*i;return r?e.getPureBoundInfos(t,r,i):e.getInfos(t,a,o)}},{key:"getValidMarginValue",value:function(e,t){var n=e;if(!((n.match(/\./g)||[]).length<=1&&n.lastIndexOf(".")===n.length-1)){if(c.a.isIncludeDot(n)){var i=n.indexOf("."),r=n.substr(0,i);switch(t){case l.b.CM:n="".concat(r).concat(n.substr(i,2));break;case l.b.IN:n="".concat(r).concat(n.substr(i,3));break;default:n=r}}return Number(n)}}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return _});var i=n(0),r=n.n(i),a=n(1),o=n.n(a),s=n(35),l=n.n(s),c=n(36),u=n.n(c),h=n(37),d=n.n(h),p=n(49),v=n(252),f=n(84),g=n(365),m=n(42),E=n(65),y=n(47),T=n(12),_=function(){function e(){l()(this,e),d()(this,"itemCenterPosCacheList",new Map),d()(this,"pusher",new y.NotificationPusher({}))}return u()(e,[{key:"create",value:function(e){var t=this,n=document.createElement("div");n.className=g.a.PRINTOUT_INFO_ALERT_WARNING,n.addEventListener("mousedown",function(e){e.stopPropagation(),m.a.instance.mouseAction.mode=E.a.MODE_NONE}),Object(T.setToolsIcon)(n,T.ToolsIcon.ERROR),n.addEventListener("click",function(){var n=o()(r.a.mark(function n(i){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:i.stopPropagation(),i.preventDefault(),t.closeAlertPopup(),e.itemSelectListener(e.tbpeId),e.pusherInfoList.forEach(function(e){return t.addPopup(e)});case 5:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}());var i=e.itemScale,a=this.getLeftTopPoint(n,e.itemLTRB.getCenterPos(),e.degree,e.editWidth,e.editHeight,i);return f.a.setElementLeftTopByPx(n,a.x,a.y),f.a.changeAlertIconCSSbyLevel(n,e.rstLevel),{element:n}}},{key:"update",value:function(e,t){var n=this;e.addEventListener("click",function(){var e=o()(r.a.mark(function e(i){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i.stopPropagation(),i.preventDefault(),n.closeAlertPopup(),t.itemSelectListener(t.tbpeId),t.pusherInfoList.forEach(function(e){return n.addPopup(e)});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}},{key:"addPopup",value:function(e){var t,n=document.createElement("span"),i=Object(T.setToolsIcon)(n,T.ToolsIcon.ERROR);switch(e.type){case"WARNING":t="warning";break;case"CAUTION":t="caution";break;case"RECOMMEND":t="recommend";break;default:t=""}i.classList.add(t);var r={type:y.PusherPopupType.CUSTOM,customTypeElement:n,title:e.title,content:e.contents};this.pusher.pushNotification(r)}},{key:"closeAlertPopup",value:function(){this.pusher.closeAll()}},{key:"updateScale",value:function(e,t,n,i){var r=v.a.WARNING_ICON_SIZE,a=r/2,o=t/i-r,s=n/i-r,l=this.itemCenterPosCacheList.get(e),c=p.b.getValidNumber(l.x,0,o)*i-a,u=p.b.getValidNumber(l.y,0,s)*i-a;f.a.setElementLeftTopByPx(e,c,u)}},{key:"getLeftTopPoint",value:function(e,t,n,i,r,a){var o=v.a.WARNING_ICON_SIZE/2;this.itemCenterPosCacheList.set(e,t);var s,l,c=i-o,u=r-o;return s=p.b.getValidNumber(t.x*a,o,c)-o,l=p.b.getValidNumber(t.y*a,o,u)-o,new p.c(s,l)}},{key:"updateElementsScale",value:function(e,t,n){var i=this;this.itemCenterPosCacheList.forEach(function(r,a){i.updateScale(a,e,t,n)})}},{key:"removeCenterPosCacheOfAlert",value:function(e){this.itemCenterPosCacheList.delete(e),this.closeAlertPopup()}}],[{key:"getNewScale",value:function(e,t,n){return v.a.WARNING_ICON_SIZE/(t*n)}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i,r,a=n(35),o=n.n(a),s=n(36),l=n.n(s),c=n(67),u=function(){function e(){o()(this,e)}return l()(e,null,[{key:"restrictionTypeToTitleString",value:function(e){var t="정의되지 않은 타입";switch(e){case c.f.OVERFLOW_SAFETY_ZONE:t=i.OVERFLOW_SAFETY_ZONE;break;case c.f.LOW_RES_IMAGE:t=i.LOW_RES_IMAGE;break;case c.f.MIN_FONT_SIZE:t=i.MIN_FONT_SIZE;break;case c.f.MIN_ELEMENT_SIZE:t=i.MIN_ELEMENT_SIZE;break;case c.f.OVERLAP_POST_MANU:t=i.OVERLAP_POST_MANU;break;case c.f.UNINPUT_TEXT:t=i.UNINPUT_TEXT}return t}},{key:"restrictionTypeToContentsString",value:function(e){var t="(".concat(e,")은 정의되지 않은 경고 타입입니다. ");switch(e){case c.f.OVERFLOW_SAFETY_ZONE:t=r.OVERFLOW_SAFETY_ZONE;break;case c.f.LOW_RES_IMAGE:t=r.LOW_RES_IMAGE;break;case c.f.MIN_FONT_SIZE:t=r.MIN_FONT_SIZE;break;case c.f.MIN_ELEMENT_SIZE:t=r.MIN_ELEMENT_SIZE;break;case c.f.OVERLAP_POST_MANU:t=r.OVERLAP_POST_MANU;break;case c.f.UNINPUT_TEXT:t=r.UNINPUT_TEXT}return t}}]),e}();!function(e){e.OVERFLOW_SAFETY_ZONE="안전영역 침범 경고",e.LOW_RES_IMAGE="이미지 요소 해상도 주의",e.MIN_FONT_SIZE="텍스트 최소사이즈 주의",e.MIN_ELEMENT_SIZE="최소 요소 사이즈 주의",e.OVERLAP_POST_MANU="후가공 위치 주의",e.UNINPUT_TEXT="미수정 텍스트 알림"}(i||(i={})),function(e){e.OVERFLOW_SAFETY_ZONE="글자나 로고와 같은 중요한 정보는 안전선 안쪽으로 배치해주세요.",e.LOW_RES_IMAGE="이미지 크기를 줄이거나 더 고해상도의 이미지를 사용해주세요.",e.MIN_FONT_SIZE="글자의 크기가 너무 작아서 인쇄시 깨져보일 수 있으니 글자의 크기를 키워주세요.",e.MIN_ELEMENT_SIZE="요소의 크기가 너무 작아서 인쇄시 깨져보일 수 있으니, 요소의 크기를 키워주세요.",e.OVERLAP_POST_MANU="글자나 로고와 같은 중요한 정보는 후가공 영역을 피해 배치해주세요.",e.UNINPUT_TEXT="아직 입력하지 않은 텍스트 요소의 내용을 수정해주세요."}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"a",function(){return _});var i,r=n(39),a=n.n(r),o=n(38),s=n.n(o),l=n(40),c=n.n(l),u=n(35),h=n.n(u),d=n(36),p=n.n(d),v=n(37),f=n.n(v),g=n(51),m=n(54),E=n(184),y=n(286),T=n(3),_=function(){function e(t,n,i){h()(this,e),f()(this,"lastItemRenderers",[]),this.background=n,this.itemTree=new I(t,i)}return p()(e,[{key:"makeItemTree",value:function(e,t,n){(n||this.needUpdateDOM(e))&&(this.itemTree.makeTree(e,this.background.render(t)),this.itemTree.appendDOM(),this.groupIds=this.getGroupIdAll(e),this.lastItemRenderers=e.slice(),this.lastScale=t),this.lastScale!==t&&(this.background.setScale(t),this.lastScale=t),this.updateElement(t)}},{key:"needUpdateDOM",value:function(e){return this.isChangeGroupStructure(e)||!this.equalItems(e)}},{key:"isChangeGroupStructure",value:function(e){var t=this.getGroupIdAll(e);if(!this.groupIds||t.length!==this.groupIds.length)return!0;for(var n=0,i=this.groupIds.length;n<i;n++)if(this.groupIds[n]!==t[n])return!0;return!1}},{key:"getGroupIdAll",value:function(e){var t=new Set;return e.forEach(function(e){e.item instanceof g.e&&!T.StringUtil.isEmpty(e.item.groupId)?t.add(e.item.groupId):e.item instanceof m.a&&e.item.getAllSingleMembers().forEach(function(e){T.StringUtil.isEmpty(e.groupId)||t.add(e.groupId)})}),Array.from(t)}},{key:"equalItems",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.lastItemRenderers;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++){if(t[n]!==e[n])return!1;if(e[n]instanceof y.a){var i=this.equalItems(t[n].getMemberRenderers(),e[n].getMemberRenderers());if(!i)return!1}}return!0}},{key:"updateElement",value:function(e){this.itemTree.updateElement(e)}}]),e}(),I=function(){function e(t,n){h()(this,e),f()(this,"initInnerHTML",""),this.hoverLayer=n,this.rootNode=new S(null,t),this.initInnerHTML=t.innerHTML}return p()(e,[{key:"makeGroupTree",value:function(e,t,n){var i=this;if(!(this.groupIds.indexOf(e.getGroupId())>-1)){var r=new k(t,e,this.hoverLayer);e.getMembers().forEach(function(e){var t,a=!0,o=!1,s=void 0;try{for(var l,c=n[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var u=l.value;if(u.item===e){t=u;break}}}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}e instanceof g.e&&t instanceof E.a&&i.itemIds.indexOf(e.tbpeId)<0?(r.appendChildNode(new w(r,t)),i.itemIds.push(e.tbpeId)):e instanceof m.a&&t instanceof y.a&&i.makeGroupTree(e,r,t.getMemberRenderers())}),t.appendChildNode(r),this.groupIds.push(e.getGroupId())}}},{key:"makeTree",value:function(e,t){this.rootNode.removeAllChildNode(),this.itemIds=[],this.groupIds=[],this.rootNode.element.appendChild(t);var n=!0,i=!1,r=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;s instanceof y.a?this.makeGroupTree(s.item,this.rootNode,s.getMemberRenderers()):s instanceof E.a&&this.rootNode.appendChildNode(new w(this.rootNode,s))}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}}},{key:"appendDOM",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this.rootNode.childNodes[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var a=i.value;this.appendNodeElement(a)}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}}},{key:"appendNodeElement",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,a=e.childNodes[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;this.appendNodeElement(o)}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}e.parentNode&&e.element&&e.parentNode.appendChildElement(e.element)}},{key:"updateElement",value:function(e){this.updateNodeElement(this.rootNode,e)}},{key:"updateNodeElement",value:function(e,t){var n=!0,i=!1,r=void 0;try{for(var a,o=e.childNodes[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;this.updateNodeElement(s,t)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}e.updateElement(t)}}]),e}(),C=function(){function e(t,n){h()(this,e),f()(this,"childNodes",[]),this.parentNode=t,this.type=n}return p()(e,[{key:"appendChildNode",value:function(e){var t=this.childNodes.indexOf(e);t<0?this.childNodes.push(e):this.childNodes[t]=e}},{key:"removeAllChildNode",value:function(){this.childNodes=[],this.removeAllChildElement()}},{key:"appendChildElement",value:function(e){this.element.appendChild(e)}},{key:"removeAllChildElement",value:function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild)}},{key:"getChildItemRenderers",value:function(){var e=[],t=!0,n=!1,r=void 0;try{for(var a,o=this.childNodes[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var s=a.value;switch(s.type){case i.ITEM:e.push(s.itemRenderer);break;case i.GROUP:e=e.concat(s.getChildItemRenderers())}}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return e}}]),e}(),S=function(e){function t(e,n){var r;return h()(this,t),(r=a()(this,s()(t).call(this,e,i.ROOT))).element=n,r}return c()(t,e),p()(t,[{key:"updateElement",value:function(e){}}]),t}(C),w=function(e){function t(e,n){var r;return h()(this,t),(r=a()(this,s()(t).call(this,e,i.ITEM))).itemRenderer=n,r.element=n.elements.elementWrapper,r}return c()(t,e),p()(t,[{key:"updateElement",value:function(e){}}]),t}(C),k=function(e){function t(e,n,r){var o;return h()(this,t),(o=a()(this,s()(t).call(this,e,i.GROUP))).group=n,o.hoverLayer=r,o.element=document.createElement("div"),o.element.style.left="0px",o.element.style.top="0px",o.element.id="tbpe_item_group",o.hoverLayer.appendChild(o.group.boxElement),o}return c()(t,e),p()(t,[{key:"updateElement",value:function(e){this.group.updateBoxStyle()}}]),t}(C);!function(e){e.NONE="none",e.ROOT="root",e.ITEM="item",e.GROUP="group"}(i||(i={}))},,function(e,t,n){"use strict";n.d(t,"a",function(){return p});var i=n(35),r=n.n(i),a=n(36),o=n.n(a),s=n(42),l=n(106),c=n(72),u=n(12),h=n(41),d=n(81),p=function(){function e(){r()(this,e),this.option=d.a.pageToolboxOption,this.makeElement()}return o()(e,[{key:"makeElement",value:function(){this.option.addNewPage&&(this.makeAddPageButton(),this.addEventListeners())}},{key:"makeAddPageButton",value:function(){var e=this.element=document.createElement("button");c.a.createTooltip(e,c.b.T,{description:"페이지 추가하기"}),e.classList.add("btn_add_page");var t=document.createElement("div");return Object(u.setToolsIcon)(t,u.ToolsIcon.ADD),e.appendChild(t),e}},{key:"addEventListeners",value:function(){var e=this;this.element.addEventListener("mouseenter",function(){e.element.classList.add("hover")}),this.element.addEventListener("mouseleave",function(){e.element.classList.remove("hover")}),this.element.addEventListener("click",function(e){e.stopPropagation(),s.a.dispatch(new l.a(s.a.instance.maxPageIdx+1))}),this.element.addEventListener("mousedown",function(e){e.stopPropagation()}),this.element.addEventListener("mouseup",function(){s.a.instance.activeItems=[]})}},{key:"show",value:function(){this.element&&this.element.classList.remove(h.a.HIDDEN)}},{key:"hide",value:function(){this.element&&this.element.classList.add(h.a.HIDDEN)}},{key:"render",value:function(e,t){s.a.isCropMode()||s.a.isSpoidMode()?this.hide():this.show()}}]),e}()},,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return g});var i=n(35),r=n.n(i),a=n(36),o=n.n(a),s=n(37),l=n.n(s),c=n(186),u=n(213),h=n(109),d=n(42),p=n(225),v=n(45),f=n(71),g=function(){function e(){r()(this,e)}return o()(e,null,[{key:"parse",value:function(e,t){var n=new m,i=p.a.build((new DOMParser).parseFromString(e,"text/xml")).SHEET[this.getNodeName(t)],r=this.getPropertyMapperList(t),a=!0,o=!1,s=void 0;try{for(var l,c=r[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var u=l.value,h=null!=u.groupName;h||null==i["@"+u.name]?h&&null!=i[u.groupName]&&null!=i[u.groupName]["@"+u.name]&&n.addPropValue(u,i[u.groupName]["@"+u.name]):n.addPropValue(u,i["@"+u.name])}}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}return n}},{key:"getNodeName",value:function(e){switch(e){case f.a.PHOTO:return"PHOTO";case f.a.TEXT:return"TEXT"}}},{key:"getPropertyMapperList",value:function(e){switch(e){case f.a.PHOTO:return this.IMAGE_PROPERTY_MAPPER_LIST;case f.a.TEXT:return this.TEXT_PROPERTY_MAPPER_LIST}}}]),e}();l()(g,"IMAGE_PROPERTY_MAPPER_LIST",[c.e,c.b,c.d,c.f,c.g,c.i,c.a,c.j,c.h,c.c,c.v,c.x,c.y,c.w,c.k,c.l,c.z,c.A,c.m,c.o,c.n,c.p,c.t,c.r,c.q,c.u,c.s]),l()(g,"TEXT_PROPERTY_MAPPER_LIST",[u.b,u.a,u.H,u.d,u.e,u.f,u.k,u.c,u.D,u.E,u.F,u.G,u.j,u.m,u.l,u.t,u.u,u.v,u.w,u.x,u.y,u.z,u.A,u.B,u.C,u.n,u.o,u.p,u.q,u.r,u.s]);var m=function(){function e(){r()(this,e),l()(this,"propValueMap",new Map)}return o()(e,[{key:"addPropValue",value:function(e,t){this.propValueMap.set(e,t)}},{key:"applyProperty",value:function(e,t,n,i){var r=this;d.a.groupingAction(function(){for(var a=r.propValueMap.entries(),o=a.next();!o.done;){var s=o.value[0],l=o.value[1];o=a.next(),(null==e||s===e||e.callback)&&(t&&n?d.a.dispatch(new h.c(v.a.PRESET_CODE_APPLY,s.groupName,s.name,l,!1,s.timeout,o.done,t,n)):d.a.dispatch(new h.d(v.a.PRESET_CODE_APPLY,s.groupName,s.name,l,!1,s.timeout,o.done,i)))}e&&e.callback&&e.callback()})}},{key:"getValue",value:function(e){return this.propValueMap.get(e)}}]),e}()},,,,function(e,t,n){"use strict";n.d(t,"a",function(){return f});var i,r=n(35),a=n.n(r),o=n(36),s=n.n(o),l=n(37),c=n.n(l),u=n(42),h=n(106),d=n(3),p=n(49),v=n(45);!function(e){e.MILLI="mm",e.CENTI="cm",e.PIXEL="px"}(i||(i={}));var f=function(){function e(){a()(this,e),c()(this,"isProportional",!0),c()(this,"lengthUnit",i.PIXEL),c()(this,"dpi",e.DEFAULT_DPI),this.render(),this.addEventListener()}return s()(e,[{key:"render",value:function(){var e=this.element=document.createElement("div");e.id="sheetSizeManager";var t=document.createElement("div");t.className="layer";var n=document.createElement("i");n.className="btn_close icon_close",t.appendChild(n);var r=document.createElement("p");r.innerText="편집 사이즈 설정",r.className="title",t.appendChild(r);var a=document.createElement("div");a.className="wrap_1";var o=this.sizePresetSelect=document.createElement("select");o.className="size_preset",[{name:"사용자 지정 사이즈",width:0,height:0,lengthUnit:i.CENTI,dpi:0},{name:"가로 현수막형",width:500,height:90,lengthUnit:i.CENTI,dpi:70},{name:"세로 현수막형",width:90,height:500,lengthUnit:i.CENTI,dpi:70},{name:"정사각 현수막형",width:90,height:90,lengthUnit:i.CENTI,dpi:70},{name:"가로 포스터형",width:297,height:210,lengthUnit:i.MILLI,dpi:70},{name:"세로 포스터형",width:210,height:297,lengthUnit:i.MILLI,dpi:70},{name:"세로 배너형",width:60,height:180,lengthUnit:i.CENTI,dpi:70},{name:"명함 가로형",width:94,height:54,lengthUnit:i.MILLI,dpi:120},{name:"명함 세로형",width:54,height:94,lengthUnit:i.MILLI,dpi:120},{name:"스티커 정사각형",width:70,height:70,lengthUnit:i.MILLI,dpi:120},{name:"스티커 직사각형",width:90,height:55,lengthUnit:i.MILLI,dpi:120},{name:"리플렛",width:297,height:210,lengthUnit:i.MILLI,dpi:120},{name:"전단지",width:210,height:297,lengthUnit:i.MILLI,dpi:120},{name:"티켓 가로형",width:172,height:82,lengthUnit:i.MILLI,dpi:120},{name:"티켓 세로형",width:82,height:172,lengthUnit:i.MILLI,dpi:120},{name:"테이블 세팅지",width:426,height:300,lengthUnit:i.MILLI,dpi:120},{name:"L홀더",width:446,height:316,lengthUnit:i.MILLI,dpi:120},{name:"어깨띠",width:12,height:90,lengthUnit:i.CENTI,dpi:120},{name:"Facebook 커버",width:820,height:312,lengthUnit:i.PIXEL,dpi:0},{name:"Facebook 게시물",width:940,height:788,lengthUnit:i.PIXEL,dpi:0},{name:"Instagram 게시물",width:1080,height:1080,lengthUnit:i.PIXEL,dpi:0}].forEach(function(e,t){var n=document.createElement("option");n.label=e.name,n.value=0===t?"":n.value=e.width+"_"+e.height+"_"+e.lengthUnit+"_"+e.dpi,o.appendChild(n)});var s=this.inputDpi=document.createElement("input");s.setAttribute("readonly","readonly"),s.className="dpi_input";var l=document.createElement("span");l.innerText="DPI",l.className="dpi_label",a.appendChild(o),a.appendChild(s),a.appendChild(l),t.appendChild(a);var c=document.createElement("div");c.className="wrap_2";var u=this.inputWidth=document.createElement("input");u.className="size_input";var h=document.createElement("i");h.className="x_label icon_close";var d=this.inputHeight=document.createElement("input");d.className="size_input";var p=this.lengthUnitSelect=document.createElement("select");for(var v in p.className="length_unit",i){var f=document.createElement("option");f.label=i[v],f.value=i[v],p.appendChild(f)}c.appendChild(u),c.appendChild(h),c.appendChild(d),c.appendChild(p),t.appendChild(c);var g=document.createElement("div");g.className="wrap_3";var m=this.proportionalityCheckBox=document.createElement("i");m.className="proportionality icon_check";var E=document.createElement("span");E.innerText="비율 유지하기",E.className="proportionality_label";var y=document.createElement("span");y.innerText="페이지 비율",y.className="ratio_label";var T=this.ratioValue=document.createElement("span");T.className="ratio_value",g.appendChild(m),g.appendChild(E),g.appendChild(y),g.appendChild(T),t.appendChild(g);var _=document.createElement("button");_.innerText="적용하기",_.className="btn_apply",t.appendChild(_);var I=document.createElement("button");I.innerText="다운로드",I.className="btn_download",t.appendChild(I),e.appendChild(t)}},{key:"addEventListener",value:function(){var t=this;this.sizePresetSelect.addEventListener("change",function(){if(d.StringUtil.isEmpty(t.sizePresetSelect.value))t.initData();else{var e=t.sizePresetSelect.value.split("_");t.customSize={width:parseFloat(e[0]),height:parseFloat(e[1])},t.lengthUnit=e[2],t.lengthUnitSelect.disabled=t.lengthUnit===i.PIXEL,t.dpi=parseInt(e[3])}t.updateUI()}),this.inputWidth.addEventListener("change",function(){var e=parseFloat(t.inputWidth.value);t.setWidth(isNaN(e)?0:e),t.updateUI()}),this.inputHeight.addEventListener("change",function(){var e=parseFloat(t.inputHeight.value);t.setHeight(isNaN(e)?0:e),t.updateUI()}),this.lengthUnitSelect.addEventListener("change",function(){var e=t.lengthUnitSelect.value;e===i.PIXEL?t.customSize=t.getPixelSize():t.lengthUnit===i.PIXEL?(t.lengthUnit=e,t.customSize=t.pixelToCustomSize(t.customSize)):e===i.MILLI&&t.lengthUnit===i.CENTI?(t.customSize.width=10*t.customSize.width,t.customSize.height=10*t.customSize.height):e===i.CENTI&&t.lengthUnit===i.MILLI&&(t.customSize.width=t.customSize.width/10,t.customSize.height=t.customSize.height/10),t.lengthUnit=e,t.updateUI()}),this.proportionalityCheckBox.addEventListener("click",function(){t.isProportional=!$(t.proportionalityCheckBox).hasClass("checked"),t.updateUI()}),$(this.element).on("click",function(t){t.preventDefault(),e.closePopup()}).on("keydown",function(e){e.stopPropagation()}).on("click",".layer",function(e){e.stopPropagation()}).on("click",".btn_close",function(){e.closePopup()}).on("click",".btn_apply",function(){var n=t.getPixelSize();u.a.dispatch(new h.h(n.width,n.height)),e.closePopup()}).on("click",".btn_download",function(){var n=t.getPixelSize();alert("download! [ width : "+n.width+" / height : "+n.height+" ]"),e.closePopup()})}},{key:"updateUI",value:function(){this.inputDpi.value=String(this.dpi);var e=this.lengthUnit===i.CENTI?1:0;this.inputWidth.value=this.customSize.width.toFixed(e),this.inputHeight.value=this.customSize.height.toFixed(e),this.isProportional?$(this.proportionalityCheckBox).addClass("checked"):$(this.proportionalityCheckBox).removeClass("checked"),this.lengthUnitSelect.value=String(this.lengthUnit);var t=this.getPixelSize();this.ratioValue.innerText="1 : "+p.b.floorFromDecimalPlace(t.height/t.width,2)}},{key:"setWidth",value:function(e){this.isProportional&&(this.customSize.height=e*this.customSize.height/this.customSize.width),this.customSize.width=e,this.checkSizeLimit()}},{key:"setHeight",value:function(e){this.isProportional&&(this.customSize.width=e*this.customSize.width/this.customSize.height),this.customSize.height=e,this.checkSizeLimit()}},{key:"checkSizeLimit",value:function(){var t=this.getPixelPerLengthUnit(),n=e.MAX_PIXEL_SIZE/t,i=e.MIN_PIXEL_SIZE/t;this.customSize.width>n?this.setWidth(n):this.customSize.width<i&&this.setWidth(i),this.customSize.height>n?this.setHeight(n):this.customSize.height<i&&this.setHeight(i)}},{key:"pixelToCustomSize",value:function(e){var t=this.getPixelPerLengthUnit();return{width:e.width/t,height:e.height/t}}},{key:"getPixelSize",value:function(){var e=this.getPixelPerLengthUnit();return{width:Math.floor(this.customSize.width*e),height:Math.floor(this.customSize.height*e)}}},{key:"getPixelPerLengthUnit",value:function(){switch(this.lengthUnit){case i.MILLI:return e.PIXEL_PER_DPI_IN_MILLI*this.dpi;case i.CENTI:return e.PIXEL_PER_DPI_IN_CENTI*this.dpi;case i.PIXEL:return 1}}},{key:"initData",value:function(t){var n=this;this.isProportional=!1,t&&(this.oriSize=t),u.a.dispatch(new v.c(function(t,i){n.targetPage=t.pages[i.renderPageIdx],n.dpi=e.DEFAULT_DPI,n.customSize=n.pixelToCustomSize(n.oriSize)}))}}],[{key:"setLengthUnit",value:function(e){this.instance.lengthUnit=e}},{key:"getLengthUnit",value:function(){return this.instance.lengthUnit}},{key:"openPopup",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.instance.element.className=t?"download":"",this.instance.initData(e),this.instance.updateUI(),this.instance.sizePresetSelect.value="",document.body.appendChild(this.instance.element)}},{key:"closePopup",value:function(){document.body.removeChild(this.instance.element)}}]),e}();c()(f,"MIN_PIXEL_SIZE",50),c()(f,"MAX_PIXEL_SIZE",1e4),c()(f,"DEFAULT_DPI",300),c()(f,"PIXEL_PER_DPI_IN_CENTI",1/2.54),c()(f,"PIXEL_PER_DPI_IN_MILLI",f.PIXEL_PER_DPI_IN_CENTI/10),c()(f,"instance",new f)},function(e,t,n){"use strict";n.d(t,"a",function(){return _});var i=n(0),r=n.n(i),a=n(1),o=n.n(a),s=n(35),l=n.n(s),c=n(39),u=n.n(c),h=n(38),d=n.n(h),p=n(44),v=n.n(p),f=n(40),g=n.n(f),m=n(37),E=n.n(m),y=n(45),T=n(240),_=function(e){function t(e){var n;return l()(this,t),n=u()(this,d()(t).call(this)),E()(v()(n),"actionType",y.a.ONE_TIME),E()(v()(n),"doSaveQueue",!1),E()(v()(n),"renderAuto",!1),E()(v()(n),"changeDesign",function(){return!1}),E()(v()(n),"commitAction",function(){var e=o()(r.a.mark(function e(t,i,a){var o,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=T.a.getPrintoutOptionByMeta({productId:n.param.productId,optionId:n.param.optionId,margin:n.param.margin,unit:n.param.unit}),(s=i.option.printoutOption).productType===o.productType&&(o.optionType=s.optionType,o.margin=s.margin),e.next=5,new I(o).commitAction(t,i,a);case 5:case"end":return e.stop()}},e)}));return function(t,n,i){return e.apply(this,arguments)}}()),E()(v()(n),"rollbackAction",function(){}),E()(v()(n),"recycle",function(){}),n.param=e,n}return g()(t,e),t}(y.b),I=function(e){function t(e){var n;return l()(this,t),n=u()(this,d()(t).call(this)),E()(v()(n),"actionType",y.a.ONE_TIME),E()(v()(n),"doSaveQueue",!1),E()(v()(n),"renderAuto",!1),E()(v()(n),"changeDesign",function(){return!1}),E()(v()(n),"commitAction",function(){var e=o()(r.a.mark(function e(t,i,a){var o,s,l,c,u,h,d,p;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i.option.printoutOption=n.newOption,(o=a.canvasRenderer.printout).clearAllAlertGuide(),s=!0,l=!1,c=void 0,e.prev=6,u=t.pages[Symbol.iterator]();case 8:if(s=(h=u.next()).done){e.next=16;break}return d=h.value,p=d.sheetSize,e.next=13,o.render({pageWrapper:i.pageController.getPageRenderer(d).element,pageId:d.pageId,pageSize:{width:p.width,height:p.height},pageItems:d.getAllSingleItems(),domRenderParam:{editScale:d.editScale,printAreaBgColor:d.background.color},forceCheckPageItems:!0});case 13:s=!0,e.next=8;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(6),l=!0,c=e.t0;case 22:e.prev=22,e.prev=23,s||null==u.return||u.return();case 25:if(e.prev=25,!l){e.next=28;break}throw c;case 28:return e.finish(25);case 29:return e.finish(22);case 30:case"end":return e.stop()}},e,null,[[6,18,22,30],[23,,25,29]])}));return function(t,n,i){return e.apply(this,arguments)}}()),E()(v()(n),"rollbackAction",function(){}),E()(v()(n),"recycle",function(){}),n.newOption=e,n}return g()(t,e),t}(y.b)},function(e,t,n){"use strict";n.d(t,"a",function(){return m});var i=n(35),r=n.n(i),a=n(39),o=n.n(a),s=n(38),l=n.n(s),c=n(44),u=n.n(c),h=n(40),d=n.n(h),p=n(37),v=n.n(p),f=n(45),g=n(236),m=function(e){function t(){var e,n;r()(this,t);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=o()(this,(e=l()(t)).call.apply(e,[this].concat(a))),v()(u()(n),"actionType",f.a.ONE_TIME),v()(u()(n),"doSaveQueue",!1),v()(u()(n),"renderAuto",!1),v()(u()(n),"changeDesign",function(){return!1}),v()(u()(n),"commitAction",function(e,t,n){var i=t.launcherOption;if(i.hasOption()){var r=i.printGuides;if(r&&0!==r.length){var a=n.canvasRenderer.printout;a.setGuideInfo(r);g.a.parseData([{type:"overflow_safety_zone",level:"caution"},{type:"low_res_image",level:"caution"},{type:"min_font_size",level:"caution",minSize:17},{type:"min_element_size",level:"caution",minSize:.35},{type:"overlap_post_manu",level:"caution"},{type:"uninput_text",level:"caution"}]),a.setMetaReference({restrictionLevelFinder:g.a.getFinder()})}}}),v()(u()(n),"rollbackAction",function(){}),v()(u()(n),"recycle",function(){}),n}return d()(t,e),t}(f.b)},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n(35),r=n.n(i),a=n(36),o=n.n(a),s=n(79),l=n(55),c=n(152),u=function(){function e(){r()(this,e)}return o()(e,null,[{key:"changeAllPageSheetSizeBySizeOption",value:function(e,t){var n=l.d.DEFAULT_DPI,i=t.unit,r={width:Math.round(s.a.getPixel(t.width,n,i)),height:Math.round(s.a.getPixel(t.height,n,i))};e.changeSheetSize(r,c.a.FIT)}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return v});var i=n(0),r=n.n(i),a=n(1),o=n.n(a),s=n(35),l=n.n(s),c=n(36),u=n.n(c),h=n(47),d=n(3),p=n(43),v=function(){function e(){l()(this,e)}var t,n;return u()(e,null,[{key:"getListResponse",value:(n=o()(r.a.mark(function e(){var t,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.cache){e.next=7;break}return 14,t="".concat(d.CRM.get(p.a.ADMIN_TEMPLATE_DESIGNER),"?groupList=").concat(14),e.next=5,h.UnicornApiRequest.get(t);case 5:n=e.sent,this.cache=n.data;case 7:return e.abrupt("return",this.cache);case 8:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"getList",value:(t=o()(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getListResponse();case 2:return t=e.sent,e.abrupt("return",t.list);case 4:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})}]),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return E});var i=n(0),r=n.n(i),a=n(1),o=n.n(a),s=n(35),l=n.n(s),c=n(36),u=n.n(c),h=n(37),d=n.n(h),p=n(96),v=n(3),f=n(43),g=n(47),m=n(162),E=function(){function e(){l()(this,e)}var t;return u()(e,null,[{key:"selectOne",value:(t=o()(r.a.mark(function e(t){var n,i,a,o,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=p.a.getFileKey(t),!this.cache.has(n)){e.next=3;break}return e.abrupt("return",this.cache.get(n));case 3:return i=v.CRM.get(f.a.USER_RESOURCES_FILE_INFO).replace("${key}",n),a=m.a.instance.selectedTeamData,e.next=7,g.UnicornApiRequest.get(i,{data:a});case 7:return o=e.sent,s=o.data,this.cache.set(n,s),e.abrupt("return",s);case 11:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})}]),e}();d()(E,"cache",new Map)},,function(e,t,n){"use strict";var i,r=n(0),a=n.n(r),o=n(1),s=n.n(o),l=n(35),c=n.n(l),u=n(36),h=n.n(u),d=n(37),p=n.n(d),v=n(51),f=n(41),g=n(42),m=n(65),E=n(43),y=n(3),T=n(221),_=n(75),I=n(54),C=n(185),S=n(92),w=n(62),k=n(39),R=n.n(k),L=n(38),O=n.n(L),A=n(44),b=n.n(A),P=n(40),N=n.n(P),x=n(80),M=n(108),D=n(52),B=n(50),U=n(48),G=n(133),F=n(66),H=n(166),V=n(89),W=n(121),z=n(12),X=n(150),Y=function(e){function t(){var e;return c()(this,t),e=R()(this,O()(t).call(this,"div",[f.a.TOGGLE_ITEM])),p()(b()(e),"listener",s()(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.contain()?M.a.openLoginPopup(V.a.FAVORITES,function(){return W.a.unregisterFavorite(e.pk)}):M.a.openLoginPopup(V.a.FAVORITES,s()(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,W.a.registerFavorite(e.pk);case 2:case"end":return t.stop()}},t)})));case 1:case"end":return t.stop()}},t)}))),e.element=document.createElement("label"),e.inputElement=document.createElement("input"),e.inputElement.type="checkbox",e.element.appendChild(e.inputElement),e.wrap.appendChild(e.element),e.initEventListener(),e}var n;return N()(t,e),h()(t,[{key:"updateUI",value:(n=s()(a.a.mark(function e(n){var i,r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=n.selectedItem,this.clear();try{i instanceof G.a||i instanceof X.a||i instanceof H.a?this.pk={referenceKey:i.svgData.key,repositoryType:D.a.UNICORN,resourceType:i.svgData.type.getResourceType()}:i instanceof F.b?this.pk={referenceKey:i.svgData.key,repositoryType:D.a.UNICORN,resourceType:U.a.FRAME}:i instanceof B.e&&(r=t.getResourceType(i.orgType))&&(this.pk={referenceKey:i.props.getPhotoKey(),repositoryType:D.a.BIZHOWS,resourceType:r})}catch(e){console.error(e)}if(!this.pk){e.next=10;break}return e.next=6,W.a.setMyCollectionPk(this.pk);case 6:this.updateInputUI(),this.show(),e.next=11;break;case 10:this.hide();case 11:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"show",value:function(){this.wrap.style.display="inline-block"}},{key:"clear",value:function(){this.pk=null}},{key:"initEventListener",value:function(){var e=this;this.inputElement.addEventListener("change",s()(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.listener();case 2:case"end":return t.stop()}},t)}))),U.b.values().forEach(function(t){W.a.addRegisterListener(t,function(t){e.pk&&W.a.isSamePk(e.pk,t)&&e.updateInputUI()}).addUnregisterListener(t,function(t){e.pk&&W.a.isSamePk(e.pk,t)&&e.updateInputUI()})})}},{key:"contain",value:function(){return W.a.isFavorite(this.pk)}},{key:"updateInputUI",value:function(){var e=this.contain();this.setIcon(),this.inputElement.checked=e,this.inputElement.checked?this.wrap.classList.add(f.a.ACTIVE):this.wrap.classList.remove(f.a.ACTIVE)}},{key:"setIcon",value:function(){var e=this.element.firstChild;"I"===e.nodeName&&this.element.removeChild(e),this.contain()?Object(z.setToolsIcon)(this.element,z.ToolsIcon.HEART_FILL):Object(z.setToolsIcon)(this.element,z.ToolsIcon.HEART)}}],[{key:"getResourceType",value:function(e){switch(e){case B.b.Sticker:return U.a.BITMAP;case B.b.Image:return U.a.IMAGE;case B.b.BackgroundImage:return U.a.BACKGROUND_IMAGE;default:return null}}}]),t}(x.a),K=n(45),Z=n(72),j=n(100),q=n(477),Q=n(500),J=n(260),ee=n(69),te=n(85),ne=function(e){function t(e,n,i){var r;return c()(this,t),(r=R()(this,O()(t).call(this,"div",[f.a.LABEL_ITEM]))).listener=e,r.title=n,r.label=document.createElement("div"),r.label.innerText=n,r.wrap.addEventListener("click",function(t){t.stopPropagation(),e()}),i&&(r.wrap.classList.add(f.a.ICON_LABEL_ITEM),Object(z.setToolsIcon)(r.wrap,i)),r.wrap.appendChild(r.label),r}return N()(t,e),h()(t,[{key:"updateUI",value:function(e){}}]),t}(x.a),ie=function(){function e(t,n){var i=this;c()(this,e),p()(this,"contents",document.createElement("div")),p()(this,"wrapper",document.createElement("div")),this.btnShowPopup=t,this.wrapper.className="tools_popup",this.wrapper.appendChild(this.contents),this.wrapper.addEventListener("click",function(e){i.close()}),this.wrapper.classList.add(f.a.HIDE),this.contents.className="tools_popup_wrapper",this.contents.addEventListener("click",function(e){return e.stopPropagation()}),this.contents.classList.add(n)}return h()(e,[{key:"getWrapper",value:function(){return this.wrapper}},{key:"addContents",value:function(e){this.contents.appendChild(e)}},{key:"open",value:function(){if(this.btnShowPopup){this.btnShowPopup.classList.add(f.a.ACTIVE);var e=this.btnShowPopup.getBoundingClientRect().bottom+4,t=this.btnShowPopup.getBoundingClientRect().left;this.wrapper.style.left="".concat(t,"px"),this.wrapper.style.top="".concat(e,"px")}this.wrapper.classList.remove(f.a.HIDE)}},{key:"isOpen",value:function(){return!this.wrapper.classList.contains(f.a.HIDE)}},{key:"close",value:function(){this.btnShowPopup.classList.remove(f.a.ACTIVE),this.wrapper.classList.add(f.a.HIDE)}}]),e}(),re=n(119),ae=n(135),oe=n(478),se=n(147),le=function(){function e(t,n){c()(this,e),p()(this,"buttons",[]),this.btnShowPopup=t,this.topWrap=n,this.makePhotoButtons(),this.makeFrameBottoms(),this.buttons.push(this.btnExportPhotoFromBackground),this.buttons.push(this.btnExportFramePhoto),this.buttons.push(this.btnPhotoToBackground),this.buttons.push(this.btnReset),this.buttons.push(this.btnFramePhotoReset),this.makePopup()}return h()(e,[{key:"makePhotoButtons",value:function(){var e=this;this.btnReset=te.a.makeLabelContents("이미지 초기화"),this.btnReset.addEventListener("click",function(e){e.stopPropagation(),g.a.dispatch(new re.e)}),this.btnExportPhotoFromBackground=te.a.makeLabelContents("사진 빼내기"),this.btnExportPhotoFromBackground.addEventListener("click",function(t){e.currentItem&&(t.stopPropagation(),e.photoPopup.close(),g.a.dispatch(new oe.a(e.currentItem)))}),this.btnPhotoToBackground=te.a.makeLabelContents("배경으로 만들기"),this.btnPhotoToBackground.addEventListener("click",function(t){t.stopPropagation(),e.photoPopup.close(),e.currentItem&&g.a.dispatch(new ae.b(e.currentItem))})}},{key:"makeFrameBottoms",value:function(){var e=this;this.btnFramePhotoReset=te.a.makeLabelContents("이미지 초기화"),this.btnFramePhotoReset.addEventListener("click",function(t){e.currentFrameItem&&(t.stopPropagation(),g.a.dispatch(new se.f(e.currentFrameItem)))}),this.btnExportFramePhoto=te.a.makeLabelContents("사진 빼내기"),this.btnExportFramePhoto.addEventListener("click",function(t){e.currentFrameItem&&(t.stopPropagation(),e.photoPopup.close(),g.a.dispatch(new se.b(e.currentFrameItem)))})}},{key:"openPopup",value:function(){this.photoPopup.open()}},{key:"initButtons",value:function(){this.setVisibleAllButtons(!1),g.a.isMobileMode()?this.addButtonsInTopWrap():this.addButtonsInPopup()}},{key:"addButtonsInTopWrap",value:function(){var e=this;this.buttons.forEach(function(t){e.topWrap.appendChild(t)})}},{key:"addButtonsInPopup",value:function(){var e=this;this.buttons.forEach(function(t){e.photoPopup.addContents(t)})}},{key:"makePopup",value:function(){this.photoPopup=new ie(this.btnShowPopup,"photo_popup"),this.addButtonsInPopup()}},{key:"updatePhotoUI",value:function(e){this.initButtons(),this.currentItem=e;var t=e.isBackground;te.a.setContentsDisable(this.btnPhotoToBackground,Boolean(e.groupId)),te.a.setContentsVisible(this.btnReset,!0),te.a.setContentsVisible(this.btnExportPhotoFromBackground,t),te.a.setContentsVisible(this.btnPhotoToBackground,e.canChangeToBackground())}},{key:"setVisibleAllButtons",value:function(e){te.a.setContentsVisible(this.btnReset,e),te.a.setContentsVisible(this.btnExportPhotoFromBackground,e),te.a.setContentsVisible(this.btnPhotoToBackground,e),te.a.setContentsVisible(this.btnExportFramePhoto,e),te.a.setContentsVisible(this.btnFramePhotoReset,e)}},{key:"updateImageFrameUI",value:function(e){this.setVisibleAllButtons(!1),this.currentFrameItem=e,te.a.setContentsVisible(this.btnExportFramePhoto,!0),te.a.setContentsVisible(this.btnFramePhotoReset,!0)}}]),e}(),ce=n(118),ue=n(479),he=function(){function e(){c()(this,e),p()(this,"popupBackground",document.createElement("div")),p()(this,"lastUpdateStatus",{targetItemCount:0}),this.toolTopContents=te.a.makeToolboxTopContentsWrapper(),this.toolTopContents.classList.add("common"),this.makeAlignButtons(),this.makeOrderButtons(),this.makeFlipButtons(),this.makeCommonTool(),this.makeOpacityTool()}return h()(e,[{key:"makeAlignButtons",value:function(){var e=this;this.btnAlignLeft=te.a.makeIconContents("왼쪽",z.ToolsIcon.GROUP_ALIGN_LEFT),this.btnAlignLeft.addEventListener("click",function(){1===e.lastUpdateStatus.targetItemCount?g.a.dispatch(new q.c):g.a.dispatch(new Q.c)}),this.btnAlignCenter=te.a.makeIconContents("가운데",z.ToolsIcon.GROUP_ALIGN_CENTER),this.btnAlignCenter.addEventListener("click",function(){1===e.lastUpdateStatus.targetItemCount?g.a.dispatch(new q.b):g.a.dispatch(new Q.b)}),this.btnAlignRight=te.a.makeIconContents("오른쪽",z.ToolsIcon.GROUP_ALIGN_RIGHT),this.btnAlignRight.addEventListener("click",function(){1===e.lastUpdateStatus.targetItemCount?g.a.dispatch(new q.e):g.a.dispatch(new Q.e)}),this.btnAlignDHC=te.a.makeIconContents("가로 간격",z.ToolsIcon.GROUP_DISTRIBUTE_HORIZON),this.btnAlignDHC.classList.add("border_top"),this.btnAlignDHC.addEventListener("click",function(){e.lastUpdateStatus.targetItemCount>2&&g.a.dispatch(new Q.g)}),this.btnAlignTop=te.a.makeIconContents("상단",z.ToolsIcon.GROUP_ALIGN_TOP),this.btnAlignTop.addEventListener("click",function(){1===e.lastUpdateStatus.targetItemCount?g.a.dispatch(new q.f):g.a.dispatch(new Q.f)}),this.btnAlignMiddle=te.a.makeIconContents("중간",z.ToolsIcon.GROUP_ALIGN_MIDDLE),this.btnAlignMiddle.addEventListener("click",function(){1===e.lastUpdateStatus.targetItemCount?g.a.dispatch(new q.d):g.a.dispatch(new Q.d)}),this.btnAlignBottom=te.a.makeIconContents("하단",z.ToolsIcon.GROUP_ALIGN_BOTTOM),this.btnAlignBottom.addEventListener("click",function(){1===e.lastUpdateStatus.targetItemCount?g.a.dispatch(new q.a):g.a.dispatch(new Q.a)}),this.btnAlignDVC=te.a.makeIconContents("세로 간격",z.ToolsIcon.GROUP_DISTRIBUTE_VERTICAL),this.btnAlignDVC.classList.add("border_top"),this.btnAlignDVC.addEventListener("click",function(){e.lastUpdateStatus.targetItemCount>2&&g.a.dispatch(new Q.h)})}},{key:"makeOrderButtons",value:function(){this.btnOrderFirst=te.a.makeIconContents("맨 앞으로",z.ToolsIcon.LAYER_FRONT),this.btnOrderFirst.addEventListener("click",function(){return g.a.dispatch(new J.b)}),this.btnOrderForward=te.a.makeIconContents("앞으로",z.ToolsIcon.LAYER_FORWARD),this.btnOrderForward.addEventListener("click",function(){return g.a.dispatch(new J.c)}),this.btnOrderBackward=te.a.makeIconContents("뒤로",z.ToolsIcon.LAYER_BACKWARD),this.btnOrderBackward.addEventListener("click",function(){return g.a.dispatch(new J.a)}),this.btnOrderLast=te.a.makeIconContents("맨 뒤로",z.ToolsIcon.LAYER_BACK),this.btnOrderLast.addEventListener("click",function(){return g.a.dispatch(new J.d)})}},{key:"makeFlipButtons",value:function(){this.btnFlipHorizon=te.a.makeIconContents("좌우 반전",z.ToolsIcon.FLIP_HORIZON),this.btnFlipHorizon.addEventListener("click",function(){return g.a.dispatch(new S.e)}),this.btnFlipVertical=te.a.makeIconContents("상하 반전",z.ToolsIcon.FLIP_VERTICAL),this.btnFlipVertical.addEventListener("click",function(){return g.a.dispatch(new S.f)})}},{key:"makeOpacityTool",value:function(){this.opacityTool=new j.a(function(e){return g.a.dispatch(new S.m(Number(e)/100*255))},E.a.NULL,0,100,1,"%"),this.opacityToolRow=new ee.g(E.a.TOOLS_COMMON_OPACITY).addCustomClass(f.a.ROW_OPACITY).add(this.opacityTool).setBorderBottom()}},{key:"makeAlignPopup",value:function(){this.alignPopup=new ie(this.btnShowAlign.wrap,"common_align_popup");var e=te.a.makePopupWrapper("horizontal_align");e.appendChild(this.btnAlignLeft),e.appendChild(this.btnAlignCenter),e.appendChild(this.btnAlignRight),e.appendChild(this.btnAlignDHC);var t=te.a.makePopupWrapper("vertical_align");t.appendChild(this.btnAlignTop),t.appendChild(this.btnAlignMiddle),t.appendChild(this.btnAlignBottom),t.appendChild(this.btnAlignDVC),this.alignPopup.addContents(e),this.alignPopup.addContents(t)}},{key:"makeOrderPopup",value:function(){this.orderPopup=new ie(this.btnShowOrder.wrap,"common_order_popup");var e=te.a.makePopupWrapper("order_forward");e.appendChild(this.btnOrderForward),e.appendChild(this.btnOrderFirst);var t=te.a.makePopupWrapper("order_backward");t.appendChild(this.btnOrderBackward),t.appendChild(this.btnOrderLast),this.orderPopup.addContents(e),this.orderPopup.addContents(t)}},{key:"makeFlipPopup",value:function(){this.flipPopup=new ie(this.btnShowFlip.wrap,"common_flip_popup");var e=te.a.makePopupWrapper("horizontal_flip");e.appendChild(this.btnFlipHorizon);var t=te.a.makePopupWrapper("vertical_flip");t.appendChild(this.btnFlipVertical),this.flipPopup.addContents(e),this.flipPopup.addContents(t)}},{key:"togglePopupEvent",value:function(e){if(this.commonToolRow.wrap){var t=e.isOpen();e.getWrapper().parentElement||this.commonToolRow.wrap.appendChild(e.getWrapper()),this.popupBackground.parentElement||this.commonToolRow.wrap.insertBefore(this.popupBackground,this.commonToolRow.wrap.firstChild),this.closeAllPopupEvent(),t||(e.open(),this.popupBackground.classList.remove(f.a.HIDE))}}},{key:"closeAllPopupEvent",value:function(){this.popupBackground.parentElement&&this.popupBackground.parentElement.childNodes.forEach(function(e){e.classList.contains("tools_popup")?e.classList.add(f.a.HIDE):e.childNodes.forEach(function(e){return e.classList.remove(f.a.ACTIVE)})}),this.popupBackground.classList.add(f.a.HIDE)}},{key:"makeCommonTool",value:function(){var e=this;this.popupBackground.className="popup_background",this.popupBackground.addEventListener("click",function(){return e.closeAllPopupEvent()}),this.btnShowAlign=new ne(function(){return e.togglePopupEvent(e.alignPopup)},"정렬"),this.btnShowOrder=new ne(function(){return e.togglePopupEvent(e.orderPopup)},"순서"),this.btnShowFlip=new ne(function(){return e.togglePopupEvent(e.flipPopup)},"반전"),this.btnCutting=new ne(function(){return g.a.dispatch(new re.b)},"자르기"),this.btnImageFrameCutting=new ne(function(){e.currentImageFrameItem&&g.a.dispatch(new se.g(e.currentImageFrameItem))},"자르기"),this.btnMore=new ne(function(){return e.togglePopupEvent(e.photoTools.photoPopup)},"더보기",z.ToolsIcon.GREATER_THAN),this.photoTools=new le(this.btnMore.wrap,this.toolTopContents),this.makeAlignPopup(),this.makeOrderPopup(),this.makeFlipPopup(),this.commonToolRow=(new ee.g).addCustomClass(f.a.ROW_ITEM_COMMON).add((new ee.f).add(this.btnShowAlign,this.btnShowOrder,this.btnShowFlip,this.btnCutting,this.btnImageFrameCutting,this.btnMore))}}]),h()(e,[{key:"makeToolboxRowContents",value:function(){return[{row:this.commonToolRow,priority:100,viewType:0},{row:this.opacityToolRow,priority:500,viewType:0}]}},{key:"makeMobileToolbox",value:function(){var e=this;return this.btnTopCutting=te.a.makeLabelContents("자르기"),this.btnTopCutting.addEventListener("click",function(){return g.a.dispatch(new re.b)}),this.toolTopContents.appendChild(this.btnTopCutting),this.btnTopImageFrameCutting=te.a.makeLabelContents("자르기"),this.btnTopImageFrameCutting.addEventListener("click",function(){e.currentImageFrameItem&&g.a.dispatch(new se.g(e.currentImageFrameItem))}),this.toolTopContents.appendChild(this.btnTopImageFrameCutting),this.toolTopContents.appendChild(te.a.makeButtonShowToolsRow("투명도",this.opacityToolRow,function(){return e.closeAllPopupEvent()})),this.btnTopShowAlign=te.a.makeButtonShowToolsRow("정렬",this.commonToolRow,function(){return e.togglePopupEvent(e.alignPopup)}),this.toolTopContents.appendChild(this.btnTopShowAlign),this.btnTopShowOrder=te.a.makeButtonShowToolsRow("순서",this.commonToolRow,function(){return e.togglePopupEvent(e.orderPopup)}),this.toolTopContents.appendChild(this.btnTopShowOrder),this.btnTopShowFlip=te.a.makeButtonShowToolsRow("반전",this.commonToolRow,function(){return e.togglePopupEvent(e.flipPopup)}),this.toolTopContents.appendChild(this.btnTopShowFlip),this.toolTopContents}},{key:"updateCommonTools",value:function(e,t){var n=!(t.renderedItem&&t.renderedItem.isOnlyOneItem());te.a.setContentsVisible(this.btnShowAlign.wrap,n),te.a.setContentsVisible(this.btnShowOrder.wrap,n),te.a.setContentsVisible(this.btnTopShowAlign,n),te.a.setContentsVisible(this.btnTopShowOrder,n);var i=this.lastUpdateStatus.targetItemCount>=3;te.a.setContentsVisible(this.btnAlignDHC,i),te.a.setContentsVisible(this.btnAlignDVC,i);var r=e.every(function(e){return e.canFlip()});te.a.setContentsVisible(this.btnShowFlip.wrap,r),te.a.setContentsVisible(this.btnTopShowFlip,r);var a=this.getItemIncludedPage(e[0]),o=!ue.a.canChangeOrderToForward(e,a.items);te.a.setContentsDisable(this.btnOrderFirst,o),te.a.setContentsDisable(this.btnOrderForward,o);var s=!ue.a.canChangeOrderToBackward(e,a.items);te.a.setContentsDisable(this.btnOrderLast,s),te.a.setContentsDisable(this.btnOrderBackward,s)}},{key:"updatePhotoPopup",value:function(e){var t=e.renderedItem,n=!e.isAdminEditView;this.photoTools.setVisibleAllButtons(!1);var i=t&&t instanceof B.e&&n;i&&this.photoTools.updatePhotoUI(t);var r=t&&t instanceof F.b&&n&&!t.isDefaultImage()&&!t.isLock();r?(this.currentImageFrameItem=e.renderedItem,this.photoTools.updateImageFrameUI(t)):this.currentImageFrameItem=null,te.a.setContentsVisible(this.btnMore.wrap,i||r),te.a.setContentsVisible(this.btnCutting.wrap,i),te.a.setContentsVisible(this.btnTopCutting,i),te.a.setContentsVisible(this.btnImageFrameCutting.wrap,r),te.a.setContentsVisible(this.btnTopImageFrameCutting,r)}},{key:"updateToolboxRowContents",value:function(e,t){this.updatePhotoPopup(t),e=I.b.getGroupItemsAddedArray(e);var n=!t.isAdminEditView;if(this.commonToolRow.rowVisible=n,this.opacityToolRow.rowVisible=n,te.a.setContentsVisible(this.toolTopContents,n),t.isAdminEditView)return this.lastUpdateStatus.targetItemCount=0,!0;var i=new Set;e.forEach(function(e){var t=I.b.getRootGroup(e.groupId);i.add(t?t.getGroupId():e.tbpeId)}),this.lastUpdateStatus.targetItemCount=i.size;var r=t.renderedItem;if(r)this.opacityTool.updateUI({value:Math.round(r.props.getOpacity()/255*100)});else{var a=e.every(function(t){return t.props.getOpacity()===e[0].props.getOpacity()})?Math.round(e[0].props.getOpacity()/255*100):j.a.UNKNOWN_MULTI_VALUE;this.opacityTool.updateUI({value:a})}return this.updateCommonTools(e,t),!0}},{key:"getItemIncludedPage",value:function(e){var t=null;return g.a.dispatch(new K.c(function(n){t=ce.a.getItemIncludedPage(n.pages,e)})),t}}]),e}();!function(e){e[e.ALIGN_LEFT=2]="ALIGN_LEFT",e[e.ALIGN_CENTER=4]="ALIGN_CENTER",e[e.ALIGN_RIGHT=8]="ALIGN_RIGHT",e[e.ALIGN_DHC=16]="ALIGN_DHC",e[e.ALIGN_TOP=32]="ALIGN_TOP",e[e.ALIGN_MIDDLE=64]="ALIGN_MIDDLE",e[e.ALIGN_BOTTOM=128]="ALIGN_BOTTOM",e[e.ALIGN_DVC=256]="ALIGN_DVC",e[e.ORDER_FIRST=512]="ORDER_FIRST",e[e.ORDER_FORWARD=1024]="ORDER_FORWARD",e[e.ORDER_BACKWARD=2048]="ORDER_BACKWARD",e[e.ORDER_LAST=4096]="ORDER_LAST",e[e.FLIP_HORIZON=8192]="FLIP_HORIZON",e[e.FLIP_VERTICAL=16384]="FLIP_VERTICAL"}(i||(i={}));var de=n(241),pe=n(57),ve=function(e){function t(e,n){var i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:E.a.NULL;c()(this,t),i=R()(this,O()(t).call(this,"div",[f.a.IMAGE_LIST_ITEM])),p()(b()(i),"buttons",[]),i.listener=e,i.itemList=n,i.defaultItemName=r,i.colCount=a,i.suffix=o,2===a&&i.wrap.classList.add(f.a.IMAGE_LIST_COL2);var s=document.createElement("div");s.className=f.a.IMAGE_LIST_WRAP,i.wrap.appendChild(s);var l=document.createElement("div");l.setAttribute("data-mode",T.b.EASY_FLOATING);var u=document.createElement("select");i.select=u;var h=null!=y.CRM.get(o)?y.CRM.get(o)+" ":"";i.itemList.reverse(),i.itemList.forEach(function(e,t){var n=document.createElement("button");n.setAttribute("data-key",e.value),n.setAttribute("data-status",e.status);var r=document.createElement("div");r.className=f.a.IMAGE_WRAP;var a=new Image;if(e.image&&(a.src=e.image.replace(/^http:\/\//i,"https://")),n.appendChild(a),n.appendChild(r),e.name){e.name===i.defaultItemName&&(i.defaultKey=e.value);var o=document.createElement("p");o.innerText=e.name,n.appendChild(o)}s.appendChild(n),i.buttons.push(n);var l=document.createElement("option");l.value=e.value,l.innerText="".concat(h).concat(t+1),u.appendChild(l)});var d=fe(z.ToolsIcon.PREV,f.a.QUICK_PREV,function(e){var t=i.select.selectedIndex>0?i.select.selectedIndex-1:i.select.options.length-1;i.doChange(i.select.options.item(t).value)}),v=fe(z.ToolsIcon.NEXT,f.a.QUICK_NEXT,function(e){var t=i.select.selectedIndex<i.select.options.length-1?i.select.selectedIndex+1:0;i.doChange(i.select.options.item(t).value)});return l.appendChild(d),l.appendChild(u),l.appendChild(v),i.wrap.appendChild(l),i.addEventListener(),i}return N()(t,e),h()(t,[{key:"updateUI",value:function(e){var n=this;this.selectedItem=this.itemList.find(function(t){return t.value===e.value});var i=this.select.children.item(0);if(e.selectDefault)this.select.value=this.defaultKey;else if(this.selectedItem)i.value===t.NONE_KEY&&i.parentNode.removeChild(i),this.select.value=this.selectedItem.value;else{if(i.value!==t.NONE_KEY){var r=document.createElement("option");r.value=t.NONE_KEY;var a=null!=y.CRM.get(this.suffix)?y.CRM.get(this.suffix)+" ":"";r.innerText="".concat(a).concat(y.CRM.get(E.a.NONE_SELECT)),i.parentNode.insertBefore(r,i)}this.select.value=t.NONE_KEY}this.buttons.forEach(function(t){!1===e.active?(t.disabled=!0,t.style.opacity=".3"):(t.removeAttribute("disabled"),t.style.opacity="1");var i=t.getAttribute("data-key");e.selectDefault&&i===n.defaultKey||i===e.value?t.classList.add(f.a.ACTIVE):t.classList.remove(f.a.ACTIVE)})}},{key:"updateSelectedItem",value:function(e){var n=this;e&&this.defaultKey?(this.select.value=this.defaultKey,this.buttons.forEach(function(e){e.getAttribute("data-key")===n.defaultKey?e.classList.add(f.a.ACTIVE):e.classList.remove(f.a.ACTIVE)})):(this.select.value=t.NONE_KEY,$(this.wrap).children().children().removeClass(f.a.ACTIVE))}},{key:"addEventListener",value:function(){var e=this;$(this.wrap).on("click","button",function(){var t=$(this).data("key");t&&e.doChange(t)}),$(this.select).on("change",function(){var t=$(this).val();t&&e.doChange(t)})}},{key:"doChange",value:function(e){this.select.value=e,this.listener&&this.listener(e)}}]),t}(x.a);function fe(e,t,n){var i=document.createElement("button");return i.type="button",i.addEventListener("click",n),Object(z.setToolsIcon)(i,e),i.classList.add(t),i}p()(ve,"NONE_KEY","none");var ge=n(93),me=n(186),Ee=n(187),ye=n(109),Te=n(300),_e=n(71),Ie=function(){function e(){c()(this,e)}return h()(e,null,[{key:"isDefaultColor",value:function(e){return e===Ee.b.RGB}},{key:"isDefaultSize",value:function(e){return e===Ee.b.NUMBER}},{key:"useImageEffectMapper",value:function(e,t,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];g.a.dispatch(new ye.b(e,e,t.actionType,t.groupName,t.name,n,i,t.timeout))}},{key:"applyPreset",value:function(e,t){g.a.dispatch(new Te.a(e,_e.a.PHOTO,t))}},{key:"updateBackgroundColorUI",value:function(e){g.a.dispatch(new K.c(function(t,n){var i=t.pages[n.renderPageIdx].background.color;i&&e.updateUI({value:i})}))}}]),e}(),Ce=function(){function e(){c()(this,e)}return h()(e,[{key:"setCurrentItem",value:function(e){this.currentItem=e}},{key:"updateUI",value:function(e){this.filterRow.updateAccordionUI(),this.preset.updateUI({value:e.getPreset(),selectDefault:e.isFilterValuesAllDefault()}),this.brightness.updateUI({value:e.getBrightness()}),this.contrast.updateUI({value:e.getContrast()}),this.saturation.updateUI({value:e.getSaturation()}),this.tint.updateUI({value:e.getTint()}),this.colorTone.updateUI({value:e.getColorTone()}),this.temperature.updateUI({value:e.getTemperature()}),this.blur.updateUI({value:e.getBlur()}),this.vignette.updateUI({value:e.getVignette()})}},{key:"addToolboxRowContents",value:function(e){e.push({row:this.presetRowItem,priority:600,viewType:0}),e.push({row:this.directAdjustmentRowItem,priority:700,viewType:0}),e.push({row:this.filterRow,priority:502,viewType:0})}},{key:"setVisible",value:function(e){if(this.filterRow.setRowsVisible(e),this.presetRowItem.rowVisible=e&&g.a.isMobileMode(),this.directAdjustmentRowItem.rowVisible=e&&g.a.isMobileMode(),g.a.isMobileMode()){var t=this.filterRow.getSectionRowWrap("preset"),n=this.filterRow.getSectionRowWrap("direct_adjustment");this.presetRowItem.wrap.contains(t)||this.presetRowItem.wrap.appendChild(t),this.directAdjustmentRowItem.wrap.contains(n)||this.directAdjustmentRowItem.wrap.appendChild(n)}else this.filterRow.setSectionRowWrap("preset"),this.filterRow.setSectionRowWrap("direct_adjustment")}},{key:"makePresetRow",value:function(){var e=this;return this.preset=new ve(function(t){var n=e.currentItem;n&&n.props.setPreset(""+t),Ie.applyPreset(t)},ge.a.instance.filterPresetList?ge.a.instance.filterPresetList.slice():[],y.CRM.get(E.a.TOOLS_IMAGE_PRESET_DEFAULT)),(new ee.g).add(this.preset)}},{key:"getPresetRowItem",value:function(){return this.presetRowItem}},{key:"getDirectAdjustmentRowItem",value:function(){return this.directAdjustmentRowItem}},{key:"makeDirectAdjustmentRows",value:function(){var e=[];return this.brightness=this.makeRangeTool(me.b),e.push(new ee.g(E.a.TOOLS_IMAGE_FILTER_BRIGHTNESS).add(this.brightness)),this.contrast=this.makeRangeTool(me.d),e.push(new ee.g(E.a.TOOLS_IMAGE_FILTER_CONTRAST).add(this.contrast)),this.saturation=this.makeRangeTool(me.g),e.push(new ee.g(E.a.TOOLS_IMAGE_FILTER_SATURATION).add(this.saturation)),this.colorTone=this.makeRangeTool(me.c),this.colorTone.setRangeBgCustomClass(f.a.RAINBOW_LINE),e.push(new ee.g(E.a.TOOLS_IMAGE_FILTER_COLOR_TONE).add(this.colorTone)),this.temperature=this.makeRangeTool(me.h),this.temperature.setRangeBgCustomClass(f.a.TEMPERATURE_LINE),e.push(new ee.g(E.a.TOOLS_IMAGE_FILTER_TEMPERATURE).add(this.temperature)),this.blur=this.makeRangeTool(me.a),e.push(new ee.g(E.a.TOOLS_IMAGE_FILTER_BLUR).add(this.blur)),this.vignette=this.makeRangeTool(me.j,0),e.push(new ee.g(E.a.TOOLS_IMAGE_FILTER_VIGNETTE).add(this.vignette)),this.tint=this.makeRangeTool(me.i),this.tint.setRangeBgCustomClass(f.a.RAINBOW_LINE),e.push(new ee.g(E.a.TOOLS_IMAGE_FILTER_TINT).add(this.tint).addCustomClass(f.a.ADMIN_UI)),e}},{key:"makeRowContents",value:function(){this.filterRow=new ee.d(E.a.TOOLS_IMAGE_ROW_FILTER_ACCORDION,f.a.TOOLS_FILTER),this.presetRowItem=(new ee.g).addCustomClass(f.a.TOOLS_PRESET_FILTER_ROW),this.directAdjustmentRowItem=(new ee.g).addCustomClass(f.a.TOOLS_DIRECT_FILTER_ROW),this.filterRow.addSection([this.makePresetRow()],"preset",E.a.TOOLS_IMAGE_ROW_FILTER,z.ToolsIcon.MAGIC_WAND),this.filterRow.addSection(this.makeDirectAdjustmentRows(),"direct_adjustment",E.a.TOOLS_IMAGE_ROW_FILTER_DIRECT_ADJUSTMENT,z.ToolsIcon.TUNE2)}},{key:"makeRangeTool",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-100;return new j.a(function(n){Ie.useImageEffectMapper([t.currentItem],e,n),t.updatePreset()},E.a.NULL,n,100,1)}},{key:"updatePreset",value:function(){this.currentItem&&(this.preset.updateSelectedItem(this.currentItem.props.isFilterValuesAllDefault()),this.currentItem.props.setPreset(""))}}]),e}(),Se=n(110),we=function(){function e(){c()(this,e)}return h()(e,[{key:"accordionRowListener",value:function(e){this.shadowCheckedEvent(e)}},{key:"getRowItem",value:function(){return this.shadowRow}},{key:"makeRowContents",value:function(){var e=this;this.shadowRow=new ee.c(E.a.TOOLS_TEXT_ROW_SHADOW,function(t){return e.accordionRowListener(t)}).setFlex().setBorderBottom(),this.shadowColor=this.makeColorPickerTool(),this.shadowAngle=this.makeRangeTool(me.r,E.a.TOOLS_SHADOW_ANGLE,360,"°"),this.shadowAlpha=this.makeRangeTool(me.q,E.a.TOOLS_SHADOW_ALPHA,100,"%"),this.shadowDistance=this.makeRangeTool(me.u,E.a.TOOLS_SHADOW_DISTANCE),this.shadowBlur=this.makeRangeTool(me.s,E.a.TOOLS_SHADOW_SPREAD),this.shadowRow.appendElement(this.shadowColor.render()).add(this.shadowAngle,this.shadowAlpha,this.shadowDistance,this.shadowBlur)}},{key:"makeColorPickerTool",value:function(){var e=this;return new Se.a(function(t){e.shadowCheckedEvent(!0,t)},z.ToolsIcon.PENCIL,E.a.TOOLS_SHADOW_COLOR,!1,!0).addClass(f.a.ACCORDION_ROW_COLOR)}},{key:"makeRangeTool",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,r=arguments.length>3?arguments[3]:void 0;return new j.a(function(t){Ie.useImageEffectMapper([n.currentItem],e,t)},t,0,i,1,r)}},{key:"setCurrentItem",value:function(e){this.currentItem=e}},{key:"addToolboxRowContents",value:function(e){e.push({row:this.shadowRow,priority:517,viewType:0})}},{key:"setVisible",value:function(e){this.shadowRow.rowVisible=e}},{key:"updateUI",value:function(e){var t=e.isActiveShadow();this.shadowRow.updateUI(t),this.shadowColor.updateUI({value:e.getShadowColor(!0),active:!0}),this.shadowAngle.updateUI({value:e.getShadowAngle(!0),active:t}),this.shadowAlpha.updateUI({value:e.getShadowAlpha(!0),active:t}),this.shadowDistance.updateUI({value:e.getShadowDistance(!0),active:t}),this.shadowBlur.updateUI({value:e.getShadowBlur(!0),active:t})}},{key:"shadowCheckedEvent",value:function(e,t){var n=this;this.currentItem&&g.a.groupingAction(function(){var i=n.currentItem;!0===e&&Ie.isDefaultColor(i.props.getShadowColor(!0))&&Ie.isDefaultSize(i.props.getShadowAngle(!0))&&Ie.isDefaultSize(i.props.getShadowDistance(!0))&&Ie.isDefaultSize(i.props.getShadowBlur(!0))&&(Ie.useImageEffectMapper([i],me.r,315,!1),Ie.useImageEffectMapper([i],me.q,50,!1),Ie.useImageEffectMapper([i],me.u,12,!1),Ie.useImageEffectMapper([i],me.s,8,!1)),Ie.useImageEffectMapper([i],me.p,e),t&&Ie.useImageEffectMapper([n.currentItem],me.t,t)})}}]),e}(),ke=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:E.a.NULL;c()(this,t),(n=R()(this,O()(t).call(this,"div",[f.a.PRESET_ITEM]))).listener=e,n.itemList=i,n.title=r,n.suffix=a;var o=Re(z.ToolsIcon.PREV,f.a.QUICK_PREV,function(){var e=n.select.selectedIndex>0?n.select.selectedIndex-1:n.select.options.length-1;n.doChange(n.select.options.item(e).value)}),s=Re(z.ToolsIcon.NEXT,f.a.QUICK_NEXT,function(){var e=n.select.selectedIndex<n.select.options.length-1?n.select.selectedIndex+1:0;n.doChange(n.select.options.item(e).value)});n.wrap.appendChild(o),n.wrap.appendChild(s);var l=document.createElement("label");l.innerText=y.CRM.get(r)||"",n.wrap.appendChild(l);var u=document.createElement("div");u.className=f.a.VALUE_ELEMENT;var h=document.createElement("select"),d=null!=y.CRM.get(a)?y.CRM.get(a)+" ":"";return i.forEach(function(e){var t=document.createElement("option");t.value=e.value,t.innerText=d+e.title,h.appendChild(t)}),u.appendChild(h),n.select=h,n.wrap.appendChild(u),n.addEventListener(),n}return N()(t,e),h()(t,[{key:"updateUI",value:function(e){var n=this.itemList.find(function(t){return t.value===e.value});n?this.select.value=n.value:this.itemList.length>0?this.select.value=this.itemList[0].value:this.select.value=t.NONE_KEY,this.select.disabled=!e.active}},{key:"addEventListener",value:function(){var e=this;$(this.select).on("change",function(){var t=$(this).val();t&&e.doChange(t)})}},{key:"doChange",value:function(e){this.select.value=e,this.listener&&this.listener(e)}}]),t}(x.a);function Re(e,t,n){var i=document.createElement("button");return i.type="button",i.addEventListener("click",n),Object(z.setToolsIcon)(i,e),i.classList.add(t),i}p()(ke,"NONE_KEY","none");var Le=n(288),Oe=function(){function e(){c()(this,e)}return h()(e,[{key:"accordionRowListener",value:function(e){var t=this.currentItem.props.getGradationMaskPresetKey();y.StringUtil.isEmpty(t)?e&&this.gradationMaskPreset.itemList.length>1?this.gradationMaskPreset.doChange(this.gradationMaskPreset.itemList[1].value):(this.gradationMaskPreset.doChange("-1"),Ie.useImageEffectMapper([this.currentItem],me.m,e)):Ie.useImageEffectMapper([this.currentItem],me.m,e)}},{key:"makePreset",value:function(e){var t=this;this.gradationMaskPreset=new ke(function(n){if(t.currentItem.props.setGradationMaskPresetKey(n),parseInt(n)>0){var i={name:"active",actionType:K.a.IMAGE_GRADATION_ACTIVE,callback:e};Ie.applyPreset(n,i)}},ge.a.instance.gradationMaskPresetList,E.a.PRESET_ITEM,E.a.SUFFIX_GRADIENT_SUFFIX)}},{key:"makeDirectionTool",value:function(){var e=this,t=new Le.a(function(t){Ie.useImageEffectMapper([e.currentItem],me.o,t),e.gradationMaskPreset.doChange("-1")},[{value:Ee.a.T,icon:z.ToolsIcon.ARROW_UP},{value:Ee.a.L,icon:z.ToolsIcon.ARROW_BACK},{value:Ee.a.B,icon:z.ToolsIcon.ARROW_DOWN},{value:Ee.a.R,icon:z.ToolsIcon.ARROW_FORWARD}],0,E.a.TOOLS_IMAGE_GRADATION_DIRECTION);return t.wrap.classList.add(f.a.GRADATION_MASK),this.gradationMaskDirection=t,t}},{key:"makeDepthTool",value:function(){var e=this,t=new j.a(function(t){Ie.useImageEffectMapper([e.currentItem],me.n,t),e.gradationMaskPreset.doChange("-1")},E.a.TOOLS_IMAGE_GRADATION_DEPTH,0,100,1,"%");return this.gradationMaskDepth=t,t}},{key:"getRowItem",value:function(){return this.gradationRow}},{key:"makeRowContents",value:function(e){var t=this;this.gradationRow=new ee.c(E.a.TOOLS_IMAGE_ROW_GRADIENT,function(e){return t.accordionRowListener(e)}).setFlex().setBorderBottom(),this.makePreset(e),this.gradationRow.add(this.makeDirectionTool()),this.gradationRow.add(this.makeDepthTool())}},{key:"setCurrentItem",value:function(e){this.currentItem=e}},{key:"addToolboxRowContents",value:function(e){e.push({row:this.gradationRow,priority:518,viewType:0})}},{key:"setVisible",value:function(e){this.gradationRow.rowVisible=e}},{key:"updateUI",value:function(e){this.gradationRow.updateUI(e.isActiveGradationMask()),this.gradationMaskPreset.updateUI({value:e.getGradationMaskPresetKey(),active:e.isActiveGradationMask()}),this.gradationMaskDirection.updateUI({value:e.getGradationMaskDirection(!0),active:e.isActiveGradationMask()}),this.gradationMaskDepth.updateUI({value:e.getGradationMaskDepth(!0),active:e.isActiveGradationMask()})}}]),e}(),Ae=function(){function e(){c()(this,e)}return h()(e,[{key:"makeRowContents",value:function(){var e=this;this.backgroundColorRow=(new ee.g).setFlex().setBorderBottom().addCustomClass(f.a.ROW_BACKGROUND_SOLID_COLOR),this.backgroundColorTool=new Se.a(function(t){e.backgroundColorTool.updateUI({value:t});g.a.dispatch(new ae.c(g.a.instance.renderPageIdx,t,!1))},null,E.a.TOOLS_IMAGE_BACKGROUND_COLOR).addClass(f.a.BACKGROUND_SOLID_COLOR_PICKER),this.backgroundColorTool.updateUI({value:"#ffffff"}),this.backgroundColorRow.add(this.backgroundColorTool)}},{key:"addToolboxRowContents",value:function(e){e.push({row:this.backgroundColorRow,priority:501,viewType:0})}},{key:"getBackgroundColorTool",value:function(){return this.backgroundColorTool}},{key:"setVisible",value:function(e){this.backgroundColorRow.rowVisible=e,!g.a.isMobileMode()&&this.backgroundColorRow.wrap&&(this.backgroundColorRow.wrap.appendChild(this.backgroundColorTool.wrap),this.backgroundColorTool.canNotAppend=!1)}},{key:"updateUI",value:function(e){this.backgroundColorTool.setDisplay(!0),e&&Ie.updateBackgroundColorUI(this.backgroundColorTool)}}]),e}(),be=n(161),Pe=function(){function e(){var t=this;c()(this,e),p()(this,"backgroundManager",new Ae),p()(this,"filterManager",new Ce),p()(this,"shadowManager",new we),p()(this,"gradationManager",new Oe),this.backgroundManager.makeRowContents(),this.filterManager.makeRowContents(),this.shadowManager.makeRowContents(),this.makeSvgEffectRow(),this.gradationManager.makeRowContents(function(){return t.updateUI()}),this.colorPickerRow=(new ee.g).addCustomClass(f.a.COLOR_PICKER_ROW);var n=this.shadowManager.getRowItem(),i=this.gradationManager.getRowItem();n.addCustomClass(f.a.EFFECT_TOOLS),i.addCustomClass(f.a.EFFECT_TOOLS),n.setPrevCallback(function(){return t.effectMenu.click()}),i.setPrevCallback(function(){return t.effectMenu.click()})}return h()(e,[{key:"makeSvgEffectRow",value:function(){var e=this;this.imageEffecRow=(new ee.g).addCustomClass(f.a.ACCORDION_EFFECT_ROW),this.shadowMenu=new be.a(E.a.TOOLS_TEXT_ROW_SHADOW,function(){return e.showShadowMenu.click()},function(t){return e.shadowManager.accordionRowListener(t)}),this.gradationMenu=new be.a(E.a.TOOLS_IMAGE_ROW_GRADIENT,function(){return e.showGradationMenu.click()},function(t){return e.gradationManager.accordionRowListener(t)}),this.imageEffecRow.add(this.shadowMenu,this.gradationMenu)}},{key:"makeMobileToolbox",value:function(){this.toolTopContents=te.a.makeToolboxTopContentsWrapper();var e=this.backgroundManager.getBackgroundColorTool();this.toolTopContents.appendChild(e.wrap),te.a.setEventColorTool(e,this.colorPickerRow);var t=this.afterColorMenu=te.a.makeIconButtonShowToolsRow(z.ToolsIcon.MAGIC_WAND,this.filterManager.getPresetRowItem());this.toolTopContents.appendChild(t);var n=te.a.makeIconButtonShowToolsRow(z.ToolsIcon.TUNE2,this.filterManager.getDirectAdjustmentRowItem());return this.toolTopContents.appendChild(n),this.effectMenu=te.a.makeButtonShowToolsRow("효과",this.imageEffecRow),this.toolTopContents.appendChild(this.effectMenu),this.showShadowMenu=te.a.makeButtonShowToolsAccordionRow("그림자",this.shadowManager.getRowItem()),this.showShadowMenu.classList.add(f.a.HIDE),this.toolTopContents.appendChild(this.showShadowMenu),this.showGradationMenu=te.a.makeButtonShowToolsAccordionRow("마스크",this.gradationManager.getRowItem()),this.showGradationMenu.classList.add(f.a.HIDE),this.toolTopContents.appendChild(this.showGradationMenu),this.toolTopContents}},{key:"updateUI",value:function(){var e=this.currentItem;this.backgroundManager.updateUI(e.isBackground),this.filterManager.updateUI(e.props),this.shadowManager.updateUI(e.props),this.gradationManager.updateUI(e.props),this.shadowMenu.updateUI(e.props.isActiveShadow()),this.gradationMenu.updateUI(e.props.isActiveGradationMask())}},{key:"makeToolboxRowContents",value:function(){var e=[];return this.filterManager.addToolboxRowContents(e),this.shadowManager.addToolboxRowContents(e),this.gradationManager.addToolboxRowContents(e),e.push({row:this.imageEffecRow,priority:810,viewType:0}),e.push({row:this.colorPickerRow,priority:820,viewType:0}),e}},{key:"updateToolboxRowContents",value:function(e,t){var n=t.renderedItem&&t.renderedItem instanceof B.e&&!t.renderedItem.isUnsupportedLicense();n?(this.setCurrentItem(t.renderedItem),this.updateUI()):this.setCurrentItem(null);var i=n&&!t.isAdminEditView,r=this.currentItem&&this.currentItem.isBackground;if(g.a.isMobileMode()){var a=this.backgroundManager.getBackgroundColorTool();this.toolTopContents.insertBefore(a.wrap,this.afterColorMenu),a.canNotAppend=!0}this.backgroundManager.setVisible(i&&r),this.filterManager.setVisible(i),this.shadowManager.setVisible(i&&!r),this.gradationManager.setVisible(i),this.shadowMenu.setVisible(i&&!r);var o=i&&!t.renderedItem.isLock();return this.imageEffecRow.rowVisible=i&&g.a.isMobileMode(),this.colorPickerRow.rowVisible=i&&r&&g.a.isMobileMode(),te.a.setContentsVisible(this.toolTopContents,o),te.a.setContentsVisible(this.backgroundManager.getBackgroundColorTool().wrap,r),!0}},{key:"setCurrentItem",value:function(e){this.currentItem=e,this.filterManager.setCurrentItem(e),this.shadowManager.setCurrentItem(e),this.gradationManager.setCurrentItem(e)}}]),e}(),Ne=n(220),xe=n(216),Me=n(132),De=n(217),Be=n(114),Ue=function(){function e(){var t=this;c()(this,e),this.btnReset=new C.a(function(){g.a.dispatch(new se.f(t.currentItem))},{icon:z.ToolsIcon.ITEM_PHOTO}),Z.a.createTooltip(this.btnReset.wrap,Z.b.TR,{title:{name:E.a.TOOLTIP_IMAGEFRAME_RESET}}),this.btnPhotoCrop=new C.a(function(){g.a.dispatch(new se.g(t.currentItem))},{icon:z.ToolsIcon.CROP}),Z.a.createTooltip(this.btnPhotoCrop.wrap,Z.b.TR,{title:{name:E.a.TOOLTIP_IMAGEFRAME_CROP_T,shortcut:E.a.TOOLTIP_IMAGEFRAME_CROP_SC}}),this.btnToPhoto=new C.a(function(){g.a.dispatch(new se.b(t.currentItem))},{icon:z.ToolsIcon.FRAME_SEPERATE}),Z.a.createTooltip(this.btnToPhoto.wrap,Z.b.TR,{title:{name:E.a.TOOLTIP_IMAGEFRAME_EXPORT}}),this.btnDeletePhoto=new C.a(function(){g.a.dispatch(new se.a(t.currentItem))},{icon:z.ToolsIcon.ICON_DEL_PHOTO}),Z.a.createTooltip(this.btnDeletePhoto.wrap,Z.b.TR,{title:{name:E.a.TOOLTIP_IMAGEFRAME_DELETE}});var n=(new ee.g).setBorderBottom().addCustomClass(f.a.ROW_PHOTO_EDIT);n.add((new ee.f).add(this.btnReset,this.btnPhotoCrop,this.btnToPhoto,this.btnDeletePhoto)),this.photoButtonsRow=n;var i=(new ee.g).setBorderBottom();this.svgColorPickerTool=new xe.a(function(e,n){return g.a.dispatch(new Me.f(e,n,t.currentItem))},E.a.TOOLS_IMAGEFRAME_COLOR,!1,function(){return t.onStartChangeColor()},function(){return t.onFinishChangeColor()}),i.add(this.svgColorPickerTool),this.colorPickerRow=(new ee.g).addCustomClass(f.a.COLOR_PICKER_ROW),this.svgColorRow=i,this.makeFilterRow(),this.makeAccordionShadowRow(),this.makeSvgEffectRow()}return h()(e,[{key:"makeSvgEffectRow",value:function(){var e=this;this.svgEffecRow=(new ee.g).addCustomClass(f.a.ACCORDION_EFFECT_ROW),this.shadowMenu=new be.a(E.a.TOOLS_TEXT_ROW_SHADOW,function(){return e.showShadowMenu.click()},function(t){return e.shadowCheckedEvent(t)}),this.svgEffecRow.add(this.shadowMenu)}},{key:"onStartChangeColor",value:function(){this.currentItem.setStatus(v.d.LAZY)}},{key:"onFinishChangeColor",value:function(){this.currentItem.setStatus(v.d.CHANGE)}},{key:"makeMobileToolbox",value:function(){this.toolTopContents=te.a.makeToolboxTopContentsWrapper();var e=this.presetFilterMenu=te.a.makeIconButtonShowToolsRow(z.ToolsIcon.MAGIC_WAND,this.presetRow);this.toolTopContents.appendChild(e);var t=this.directFilterMenu=te.a.makeIconButtonShowToolsRow(z.ToolsIcon.TUNE2,this.directAdjustmentRowItem);return this.toolTopContents.appendChild(t),this.toolTopContents.appendChild(this.svgColorPickerTool.wrap),te.a.setEventSvgColorTool(this.svgColorPickerTool,this.colorPickerRow),this.effectMenu=te.a.makeButtonShowToolsRow("효과",this.svgEffecRow),this.toolTopContents.appendChild(this.effectMenu),this.showShadowMenu=te.a.makeButtonShowToolsAccordionRow("그림자",this.accordionShadow),this.showShadowMenu.classList.add(f.a.HIDE),this.toolTopContents.appendChild(this.showShadowMenu),this.toolTopContents}},{key:"updateUI",value:function(e,t){this.currentItem=e;var n=new Map,i=!0,r=!1,a=void 0;try{for(var o,s=e.getEditableOriginColors()[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var l=o.value;e.props.setCurrentOriginColor(l),n.set(l,e.props.getColor())}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}this.svgColorPickerTool.updateUI({colorMap:n}),this.svgColorPickerTool.setDisplay(!t),this.accordionFilterRow.updateAccordionUI(),this.preset.updateUI({value:e.innerPhotoItem.props.getPreset(),selectDefault:e.innerPhotoItem.props.isFilterValuesAllDefault()}),this.brightness.updateUI({value:e.innerPhotoItem.props.getBrightness()}),this.contrast.updateUI({value:e.innerPhotoItem.props.getContrast()}),this.saturation.updateUI({value:e.innerPhotoItem.props.getSaturation()}),this.tint.updateUI({value:e.innerPhotoItem.props.getTint()}),this.colorTone.updateUI({value:e.innerPhotoItem.props.getColorTone()}),this.temperature.updateUI({value:e.innerPhotoItem.props.getTemperature()}),this.blur.updateUI({value:e.innerPhotoItem.props.getBlur()}),this.vignette.updateUI({value:e.innerPhotoItem.props.getVignette()}),this.accordionShadow.updateUI(e.props.isActiveShadow()),this.shadowColor.updateUI({value:e.props.getShadowColor(!0),active:!0}),this.shadowAngle.updateUI({value:e.props.getShadowAngle(!0),active:e.props.isActiveShadow()}),this.shadowAlpha.updateUI({value:e.props.getShadowAlpha(!0),active:e.props.isActiveShadow()}),this.shadowDistance.updateUI({value:e.props.getShadowDistance(!0),active:e.props.isActiveShadow()}),this.shadowBlur.updateUI({value:e.props.getShadowBlur(!0),active:e.props.isActiveShadow()}),this.shadowMenu.updateUI(e.props.isActiveShadow()),this.btnReset.setDisplay(!0),this.btnPhotoCrop.setDisplay(!0);var c=g.a.instance.activeItems[0]&&!I.b.isInGroup(g.a.instance.activeItems[0]);this.btnPhotoCrop.updateUI({active:c,isSelected:!1}),this.btnToPhoto.setDisplay(!0),this.btnDeletePhoto.setDisplay(!0)}},{key:"isDefaultColor",value:function(e){return e===Be.a.RGB}},{key:"isDefaultSize",value:function(e){return e===Be.a.NUMBER}},{key:"makeToolboxRowContents",value:function(){return[{row:this.svgColorRow,priority:500,viewType:0},{row:this.accordionFilterRow,priority:502,viewType:0},{row:this.accordionShadow,priority:800,viewType:0},{row:this.presetRow,priority:600,viewType:0},{row:this.directAdjustmentRowItem,priority:700,viewType:0},{row:this.svgEffecRow,priority:810,viewType:0},{row:this.colorPickerRow,priority:820,viewType:0}]}},{key:"updateToolboxRowContents",value:function(e,t){var n=t.renderedItem,i=t.renderedItem&&n instanceof F.b;if(g.a.isMobileMode()?(this.toolTopContents.insertBefore(this.svgColorPickerTool.wrap,this.effectMenu),this.svgColorPickerTool.canNotAppend=!0):(this.svgColorRow.wrap.appendChild(this.svgColorPickerTool.wrap),this.svgColorPickerTool.canNotAppend=!1),g.a.isMobileMode()){var r=this.accordionFilterRow.getSectionRowWrap("preset"),a=this.accordionFilterRow.getSectionRowWrap("direct_adjustment");this.presetRow.wrap.contains(r)||this.presetRow.wrap.appendChild(r),this.directAdjustmentRowItem.wrap.contains(a)||this.directAdjustmentRowItem.wrap.appendChild(a)}else this.accordionFilterRow.setSectionRowWrap("preset"),this.accordionFilterRow.setSectionRowWrap("direct_adjustment");this.photoButtonsRow.rowVisible=i&&!t.isAdminEditView&&!n.isDefaultImage()&&!n.isLock();var o=i&&!t.isAdminEditView&&n.getEditableOriginColors().length>0;this.svgColorRow.rowVisible=o;var s=i&&!t.isAdminEditView&&!n.isDefaultImage();this.filterDevRow.rowVisible=s,this.accordionFilterRow.setRowsVisible(s&&!g.a.isMobileMode()),this.presetRow.rowVisible=s&&g.a.isMobileMode(),this.directAdjustmentRowItem.rowVisible=s&&g.a.isMobileMode(),this.svgEffecRow.rowVisible=i&&!t.isAdminEditView&&g.a.isMobileMode(),this.colorPickerRow.rowVisible=o&&g.a.isMobileMode(),this.accordionShadow.rowVisible=i&&!t.isAdminEditView;var l=i&&!t.isAdminEditView&&!t.renderedItem.isLock();return te.a.setContentsVisible(this.toolTopContents,l),te.a.setContentsVisible(this.presetFilterMenu,s),te.a.setContentsVisible(this.directFilterMenu,s),te.a.setContentsVisible(this.colorMenu,o),i?(this.currentItem=t.renderedItem,this.updateUI(this.currentItem,t.isAdminEditView)):this.currentItem=null,!0}},{key:"makeFilterRow",value:function(){var t=this;this.accordionFilterRow=new ee.d(E.a.TOOLS_IMAGE_ROW_FILTER_ACCORDION,f.a.TOOLS_FILTER),this.preset=new ve(function(e){g.a.dispatch(new K.c(function(n,i){var r=t.currentItem.innerPhotoItem;r&&r.props.setPreset(""+e)})),t.applyPreset(e)},ge.a.instance.filterPresetList.slice(),y.CRM.get(E.a.TOOLS_IMAGE_PRESET_DEFAULT)),this.presetRow=(new ee.g).addCustomClass(f.a.TOOLS_PRESET_FILTER_ROW),this.accordionFilterRow.addSection([(new ee.g).add(this.preset)],"preset",E.a.TOOLS_IMAGE_ROW_FILTER,z.ToolsIcon.MAGIC_WAND),this.filterDevRow=new ee.g,this.activeLive=new C.a(function(e){g.a.dispatch(new K.c(function(t,n,i){n.activeItems[0].isActiveLiveEdit=!0===e,n.activeItems[0].props.updateRevision()},!0))},{titleString:"liveEdit",icon:z.ToolsIcon.CHECK},{titleString:"liveEdit",icon:z.ToolsIcon.CLOSE}),this.activeWebGL=new C.a(function(e){g.a.dispatch(new K.c(function(t,n,i){n.activeItems[0].isActiveWebGLFilter=!0===e,n.activeItems[0].props.updateRevision()},!0))},{titleString:"WebGL",icon:z.ToolsIcon.CHECK},{titleString:"WebGL",icon:z.ToolsIcon.CLOSE}),this.filterDevRow.add(this.activeLive,this.activeWebGL),this.brightness=new j.a(function(n){e.useSvgImageframeEffectMapper([t.currentItem.innerPhotoItem],[t.currentItem],me.b,n),t.updatePreset()},E.a.NULL,-100,100,1),this.brightnessRow=new ee.g(E.a.TOOLS_IMAGE_FILTER_BRIGHTNESS).add(this.brightness),this.contrast=new j.a(function(n){e.useSvgImageframeEffectMapper([t.currentItem.innerPhotoItem],[t.currentItem],me.d,n),t.updatePreset()},E.a.NULL,-100,100,1),this.contrastRow=new ee.g(E.a.TOOLS_IMAGE_FILTER_CONTRAST).add(this.contrast),this.saturation=new j.a(function(n){e.useSvgImageframeEffectMapper([t.currentItem.innerPhotoItem],[t.currentItem],me.g,n),t.updatePreset()},E.a.NULL,-100,100,1),this.saturationRow=new ee.g(E.a.TOOLS_IMAGE_FILTER_SATURATION).add(this.saturation),this.tint=new j.a(function(n){e.useSvgImageframeEffectMapper([t.currentItem.innerPhotoItem],[t.currentItem],me.i,n),t.updatePreset()},E.a.NULL,-100,100,1),this.tint.setRangeBgCustomClass(f.a.RAINBOW_LINE),this.tintRow=new ee.g(E.a.TOOLS_IMAGE_FILTER_TINT).add(this.tint).addCustomClass(f.a.ADMIN_UI),this.colorTone=new j.a(function(n){e.useSvgImageframeEffectMapper([t.currentItem.innerPhotoItem],[t.currentItem],me.c,n),t.updatePreset()},E.a.NULL,-100,100,1),this.colorTone.setRangeBgCustomClass(f.a.RAINBOW_LINE),this.colorToneRow=new ee.g(E.a.TOOLS_IMAGE_FILTER_COLOR_TONE).add(this.colorTone),this.temperature=new j.a(function(n){e.useSvgImageframeEffectMapper([t.currentItem.innerPhotoItem],[t.currentItem],me.h,n),t.updatePreset()},E.a.NULL,-100,100,1),this.temperature.setRangeBgCustomClass(f.a.TEMPERATURE_LINE),this.temperatureRow=new ee.g(E.a.TOOLS_IMAGE_FILTER_TEMPERATURE).add(this.temperature),this.blur=new j.a(function(n){e.useSvgImageframeEffectMapper([t.currentItem.innerPhotoItem],[t.currentItem],me.a,n),t.updatePreset()},E.a.NULL,-100,100,1),this.blurRow=new ee.g(E.a.TOOLS_IMAGE_FILTER_BLUR).add(this.blur),this.vignette=new j.a(function(n){e.useSvgImageframeEffectMapper([t.currentItem.innerPhotoItem],[t.currentItem],me.j,n),t.updatePreset()},E.a.NULL,0,100,1),this.vignetteRow=new ee.g(E.a.TOOLS_IMAGE_FILTER_VIGNETTE).add(this.vignette);var n=[];n.push(this.brightnessRow),n.push(this.contrastRow),n.push(this.saturationRow),n.push(this.colorToneRow),n.push(this.temperatureRow),n.push(this.blurRow),n.push(this.vignetteRow),n.push(this.tintRow),this.directAdjustmentRowItem=(new ee.g).addCustomClass(f.a.TOOLS_DIRECT_FILTER_ROW),this.accordionFilterRow.addSection(n,"direct_adjustment",E.a.TOOLS_IMAGE_ROW_FILTER_DIRECT_ADJUSTMENT,z.ToolsIcon.TUNE2)}},{key:"shadowCheckedEvent",value:function(t,n){var i=this;g.a.groupingAction(function(){!0===t&&i.isDefaultColor(i.currentItem.props.getShadowColor(!0))&&i.isDefaultSize(i.currentItem.props.getShadowAngle(!0))&&i.isDefaultSize(i.currentItem.props.getShadowDistance(!0))&&i.isDefaultSize(i.currentItem.props.getShadowBlur(!0))&&(e.useSvgImageframeEffectMapper([i.currentItem],[i.currentItem],De.c,315,!1),e.useSvgImageframeEffectMapper([i.currentItem],[i.currentItem],De.b,50,!1),e.useSvgImageframeEffectMapper([i.currentItem],[i.currentItem],De.f,12,!1),e.useSvgImageframeEffectMapper([i.currentItem],[i.currentItem],De.d,8,!1)),e.useSvgImageframeEffectMapper([i.currentItem],[i.currentItem],De.a,t),n&&e.useSvgImageframeEffectMapper([i.currentItem],[i.currentItem],De.e,n)})}},{key:"makeAccordionShadowRow",value:function(){var t=this,n=new ee.c(E.a.TOOLS_TEXT_ROW_SHADOW,function(e){return t.shadowCheckedEvent(e)}).setFlex().setBorderBottom();this.shadowColor=new Se.a(function(e){t.shadowCheckedEvent(!0,e)},z.ToolsIcon.PENCIL,E.a.TOOLS_SHADOW_COLOR,!1,!0).addClass(f.a.ACCORDION_ROW_COLOR),this.shadowAngle=new j.a(function(n){e.useSvgImageframeEffectMapper([t.currentItem],[t.currentItem],De.c,n)},E.a.TOOLS_SHADOW_ANGLE,0,360,1,"°"),this.shadowAlpha=new j.a(function(n){e.useSvgImageframeEffectMapper([t.currentItem],[t.currentItem],De.b,n)},E.a.TOOLS_SHADOW_ALPHA,0,100,1,"%"),this.shadowDistance=new j.a(function(n){e.useSvgImageframeEffectMapper([t.currentItem],[t.currentItem],De.f,n)},E.a.TOOLS_SHADOW_DISTANCE,0,100,1),this.shadowBlur=new j.a(function(n){e.useSvgImageframeEffectMapper([t.currentItem],[t.currentItem],De.d,n)},E.a.TOOLS_SHADOW_SPREAD,0,100,1),n.addCustomClass(f.a.EFFECT_TOOLS),n.setPrevCallback(function(){return t.effectMenu.click()}),n.appendElement(this.shadowColor.render()).add(this.shadowAngle,this.shadowAlpha,this.shadowDistance,this.shadowBlur),this.accordionShadow=n}},{key:"updatePreset",value:function(){this.preset.updateSelectedItem(this.currentItem.innerPhotoItem.props.isFilterValuesAllDefault()),this.currentItem.innerPhotoItem.props.setPreset("")}},{key:"applyPreset",value:function(e,t){this.currentItem.props.updateRevision(!0),g.a.dispatch(new Te.a(e,_e.a.PHOTO,t,null,null,[this.currentItem.innerPhotoItem]))}}],[{key:"useSvgImageframeEffectMapper",value:function(e,t,n,i){var r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];g.a.dispatch(new ye.b(e,t,n.actionType,n.groupName,n.name,i,r,n.timeout))}}]),e}(),Ge=function(){function e(){var t=this;c()(this,e);var n=(new ee.g).setBorderBottom();this.svgColorPickerTool=new xe.a(function(e,n){return g.a.dispatch(new Me.f(e,n,t.currentItem))},E.a.TOOLS_SVG_COLOR,!1,function(){return t.onStartChangeColor()},function(){return t.onFinishChangeColor()}),n.add(this.svgColorPickerTool),this.colorPickerRow=(new ee.g).addCustomClass(f.a.COLOR_PICKER_ROW);var i=new ee.c(E.a.TOOLS_TEXT_ROW_SHADOW,function(e){return t.shadowCheckedEvent(e)}).setFlex().setBorderBottom();this.shadowColor=new Se.a(function(e){t.shadowCheckedEvent(!0,e)},z.ToolsIcon.PENCIL,E.a.TOOLS_SHADOW_COLOR,!1,!0).addClass(f.a.ACCORDION_ROW_COLOR),this.shadowAngle=new j.a(function(n){e.useSvgGraphicEffectMapper([t.currentItem],De.c,n)},E.a.TOOLS_SHADOW_ANGLE,0,360,1,"°"),this.shadowAlpha=new j.a(function(n){e.useSvgGraphicEffectMapper([t.currentItem],De.b,n)},E.a.TOOLS_SHADOW_ALPHA,0,100,1,"%"),this.shadowDistance=new j.a(function(n){e.useSvgGraphicEffectMapper([t.currentItem],De.f,n)},E.a.TOOLS_SHADOW_DISTANCE,0,100,1),this.shadowBlur=new j.a(function(n){e.useSvgGraphicEffectMapper([t.currentItem],De.d,n)},E.a.TOOLS_SHADOW_SPREAD,0,100,1),i.addCustomClass(f.a.EFFECT_TOOLS),i.setPrevCallback(function(){return t.effectMenu.click()}),i.appendElement(this.shadowColor.render()).add(this.shadowAngle,this.shadowAlpha,this.shadowDistance,this.shadowBlur),this.svgColorRow=n,this.accordionShadow=i,this.makeShadowEffectRow()}return h()(e,[{key:"shadowCheckedEvent",value:function(t,n){var i=this;g.a.groupingAction(function(){!0===t&&i.isDefaultColor(i.currentItem.props.getShadowColor(!0))&&i.isDefaultSize(i.currentItem.props.getShadowAngle(!0))&&i.isDefaultSize(i.currentItem.props.getShadowDistance(!0))&&i.isDefaultSize(i.currentItem.props.getShadowBlur(!0))&&(e.useSvgGraphicEffectMapper([i.currentItem],De.c,315,!1),e.useSvgGraphicEffectMapper([i.currentItem],De.b,50,!1),e.useSvgGraphicEffectMapper([i.currentItem],De.f,12,!1),e.useSvgGraphicEffectMapper([i.currentItem],De.d,8,!1)),e.useSvgGraphicEffectMapper([i.currentItem],De.a,t),n&&e.useSvgGraphicEffectMapper([i.currentItem],De.e,n)})}},{key:"makeShadowEffectRow",value:function(){var e=this;this.shadowEffecRow=(new ee.g).addCustomClass(f.a.ACCORDION_EFFECT_ROW),this.shadowMenu=new be.a(E.a.TOOLS_TEXT_ROW_SHADOW,function(){return e.showShadowMenu.click()},function(t){return e.shadowCheckedEvent(t)}),this.shadowEffecRow.add(this.shadowMenu)}},{key:"makeMobileToolbox",value:function(){return this.toolTopContents=te.a.makeToolboxTopContentsWrapper(),this.toolTopContents.appendChild(this.svgColorPickerTool.wrap),te.a.setEventSvgColorTool(this.svgColorPickerTool,this.colorPickerRow),this.effectMenu=te.a.makeButtonShowToolsRow("효과",this.shadowEffecRow),this.toolTopContents.appendChild(this.effectMenu),this.showShadowMenu=te.a.makeButtonShowToolsAccordionRow("그림자",this.accordionShadow),this.showShadowMenu.classList.add(f.a.HIDE),this.toolTopContents.appendChild(this.showShadowMenu),this.toolTopContents}},{key:"updateUI",value:function(e,t){var n=new Map,i=!0,r=!1,a=void 0;try{for(var o,s=this.currentItem.getEditableOriginColors()[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var l=o.value;this.currentItem.props.setCurrentOriginColor(l),n.set(l,this.currentItem.props.getColor())}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}var c=e.isBackground;this.svgColorPickerTool.updateUI({colorMap:n,hideTransparent:!0,hideChangeSameColors:c}),this.svgColorPickerTool.setDisplay(!t),this.accordionShadow.updateUI(e.props.isActiveShadow()),this.shadowColor.updateUI({value:e.props.getShadowColor(!0),active:!0}),this.shadowAngle.updateUI({value:e.props.getShadowAngle(!0),active:e.props.isActiveShadow()}),this.shadowAlpha.updateUI({value:e.props.getShadowAlpha(!0),active:e.props.isActiveShadow()}),this.shadowDistance.updateUI({value:e.props.getShadowDistance(!0),active:e.props.isActiveShadow()}),this.shadowBlur.updateUI({value:e.props.getShadowBlur(!0),active:e.props.isActiveShadow()}),this.shadowMenu.updateUI(e.props.isActiveShadow())}},{key:"isDefaultColor",value:function(e){return e===Be.a.RGB}},{key:"isDefaultSize",value:function(e){return e===Be.a.NUMBER}},{key:"makeToolboxRowContents",value:function(){return[{row:this.svgColorRow,priority:600,viewType:0},{row:this.accordionShadow,priority:800,viewType:0},{row:this.shadowEffecRow,priority:810,viewType:0},{row:this.colorPickerRow,priority:820,viewType:0}]}},{key:"updateToolboxRowContents",value:function(e,t){var n=t.renderedItem&&(t.renderedItem instanceof G.a||t.renderedItem instanceof H.a),i=n&&!t.isAdminEditView&&t.renderedItem.getEditableOriginColors().length>0;this.svgColorRow.rowVisible=i;var r=n&&!t.isAdminEditView&&t.renderedItem&&t.renderedItem.isOnlyOneItem(),a=n&&!t.isAdminEditView&&!t.renderedItem.isBackground;this.accordionShadow.rowVisible=a,this.shadowEffecRow.rowVisible=a&&g.a.isMobileMode(),this.colorPickerRow.rowVisible=i&&g.a.isMobileMode(),g.a.isMobileMode()?(this.toolTopContents.insertBefore(this.svgColorPickerTool.wrap,this.effectMenu),this.svgColorPickerTool.canNotAppend=!0):(this.svgColorRow.wrap.appendChild(this.svgColorPickerTool.wrap),this.svgColorPickerTool.canNotAppend=!1);var o=n&&!t.isAdminEditView&&!t.renderedItem.isLock();return te.a.setContentsVisible(this.toolTopContents,o),te.a.setContentsVisible(this.colorMenu,i),te.a.setContentsVisible(this.patternSizeMenu,r),te.a.setContentsVisible(this.effectMenu,a),n?(this.currentItem=t.renderedItem,this.updateUI(this.currentItem,t.isAdminEditView)):this.currentItem=null,!0}},{key:"onStartChangeColor",value:function(){this.currentItem.setStatus(v.d.LAZY)}},{key:"onFinishChangeColor",value:function(){this.currentItem.setStatus(v.d.CHANGE)}}],[{key:"useSvgGraphicEffectMapper",value:function(e,t,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];g.a.dispatch(new ye.b(e,e,t.actionType,t.groupName,t.name,n,i,t.timeout))}}]),e}(),Fe=n(139),He=n.n(Fe),Ve=n(82),We=n(213),ze=n(104),Xe=n(369),Ye=function(){function e(){var t=this;c()(this,e),this.svgColorRow=(new ee.g).setBorderBottom(),this.svgColorPickerTool=new xe.a(function(e,n){g.a.groupingAction(function(){t.svgItems.forEach(function(t){var i=t,r=i.getEditableOriginColors(),a=i.props.getColorMap(),o=!0,s=!1,l=void 0;try{for(var c,u=a[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var h=He()(c.value,2),d=h[0],p=h[1];e.toLowerCase()===p.toLowerCase()&&r.indexOf(d.toLowerCase())>=0&&g.a.dispatch(new Me.f(d,n,t))}}catch(e){s=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(s)throw l}}}),t.svgColorPickerTool.setOriginColor(n)})},E.a.MULTI_SELECT_ROW_COLORS),this.svgColorRow.add(this.svgColorPickerTool),this.colorPickerRow=(new ee.g).addCustomClass(f.a.COLOR_PICKER_ROW),this.colorRow=(new ee.g).addCustomClass(f.a.ROW_MULTI_COLOR).setBorderBottom();this.color=new Se.a(function(e){g.a.groupingAction(function(){t.textItems.forEach(function(t){de.a.useTextItemCharPropMapper(We.d,e,t)}),t.svgItems.forEach(function(t){var n=t.getEditableOriginColors(),i=!0,r=!1,a=void 0;try{for(var o,s=n[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var l=o.value;g.a.dispatch(new Me.f(l,e,t))}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}})})},We.d.icon,E.a.MULTI_SELECT_ROW_COLOR,!1,!0).addClass(f.a.MULTI_COLOR_PICKER),this.colorRow.add(this.color),this.makeShadowRow(),this.makeEffectRow()}return h()(e,[{key:"makeEffectRow",value:function(){var e=this;this.multiEffecRow=(new ee.g).addCustomClass(f.a.ACCORDION_EFFECT_ROW),this.shadowMenu=new be.a(E.a.TOOLS_TEXT_ROW_SHADOW,function(){return e.showShadowMenu.click()},function(t){return e.shadowCheckedEvent(t)}),this.multiEffecRow.add(this.shadowMenu)}},{key:"shadowCheckedEvent",value:function(t,n){var i=this;g.a.groupingAction(function(){if(!0===t){var r=i.getDefaultShadowValueItems(i.textItems);e.useItemGraphicEffectMapper(r,We.y,315,!1),e.useItemGraphicEffectMapper(r,We.x,50,!1),e.useItemGraphicEffectMapper(r,We.A,12,!1),e.useItemGraphicEffectMapper(r,We.C,8,!1);var a=i.getDefaultShadowValueItems(i.photoItems);e.useItemGraphicEffectMapper(a,me.r,315,!1),e.useItemGraphicEffectMapper(a,me.q,50,!1),e.useItemGraphicEffectMapper(a,me.u,12,!1),e.useItemGraphicEffectMapper(a,me.s,8,!1);var o=i.getDefaultShadowValueItems(i.svgItems);e.useItemGraphicEffectMapper(o,De.c,315,!1),e.useItemGraphicEffectMapper(o,De.b,50,!1),e.useItemGraphicEffectMapper(o,De.f,12,!1),e.useItemGraphicEffectMapper(o,De.d,8,!1)}e.useItemGraphicEffectMapper(i.textItems,We.w,t),e.useItemGraphicEffectMapper(i.photoItems,me.p,t),e.useItemGraphicEffectMapper(i.svgItems,De.a,t),n&&(e.useItemGraphicEffectMapper(i.textItems,We.z,n),e.useItemGraphicEffectMapper(i.photoItems,me.t,n),e.useItemGraphicEffectMapper(i.svgItems,De.e,n))})}},{key:"makeMobileToolbox",value:function(){return this.toolTopContents=te.a.makeToolboxTopContentsWrapper(),this.toolTopContents.appendChild(this.svgColorPickerTool.wrap),te.a.setEventSvgColorTool(this.svgColorPickerTool,this.colorPickerRow),this.toolTopContents.appendChild(this.color.wrap),te.a.setEventColorTool(this.color,this.colorPickerRow),this.effectMenu=te.a.makeButtonShowToolsRow("효과",this.multiEffecRow),this.toolTopContents.appendChild(this.effectMenu),this.showShadowMenu=te.a.makeButtonShowToolsAccordionRow("그림자",this.accordionShadow),this.showShadowMenu.classList.add(f.a.HIDE),this.toolTopContents.appendChild(this.showShadowMenu),this.toolTopContents}},{key:"makeShadowRow",value:function(){var t=this,n=new ee.c(E.a.TOOLS_TEXT_ROW_SHADOW,function(e){return t.shadowCheckedEvent(e)}).setFlex().setBorderBottom();this.shadowColor=new Se.a(function(e){t.shadowCheckedEvent(!0,e)},z.ToolsIcon.PENCIL,E.a.TOOLS_SHADOW_COLOR).addClass(f.a.ACCORDION_ROW_COLOR),this.shadowAngle=new j.a(function(n){e.useItemGraphicEffectMapper(t.textItems,We.y,n),e.useItemGraphicEffectMapper(t.photoItems,me.r,n),e.useItemGraphicEffectMapper(t.svgItems,De.c,n)},E.a.TOOLS_SHADOW_ANGLE,0,360,1,"°"),this.shadowAlpha=new j.a(function(n){e.useItemGraphicEffectMapper(t.textItems,We.x,n),e.useItemGraphicEffectMapper(t.photoItems,me.q,n),e.useItemGraphicEffectMapper(t.svgItems,De.b,n)},E.a.TOOLS_SHADOW_ALPHA,0,100,1,"%"),this.shadowDistance=new j.a(function(n){e.useItemGraphicEffectMapper(t.textItems,We.A,n),e.useItemGraphicEffectMapper(t.photoItems,me.u,n),e.useItemGraphicEffectMapper(t.svgItems,De.f,n)},E.a.TOOLS_SHADOW_DISTANCE,0,100,1),this.shadowBlur=new j.a(function(n){e.useItemGraphicEffectMapper(t.textItems,We.C,n),e.useItemGraphicEffectMapper(t.photoItems,me.s,n),e.useItemGraphicEffectMapper(t.svgItems,De.d,n)},E.a.TOOLS_SHADOW_SPREAD,0,100,1),n.addCustomClass(f.a.EFFECT_TOOLS),n.setPrevCallback(function(){return t.effectMenu.click()}),n.appendElement(this.shadowColor.render()).add(this.shadowAngle,this.shadowAlpha,this.shadowDistance,this.shadowBlur),this.accordionShadow=n}},{key:"updateUI",value:function(e,t,n){if((n||1===e.length)&&this.color.updateUI({value:e[0],isMultiColor:n}),t&&!n&&1!==e.length){var i=new Map,r=!0,a=!1,o=void 0;try{for(var s,l=e[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var c=s.value;i.set(c,c)}}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}this.svgColorPickerTool.updateUI({colorMap:i,hideTransparent:!1,hideChangeSameColors:!1})}this.color.setDisplay(n||1===e.length),this.svgColorPickerTool.setDisplay(t&&!n&&1!==e.length);var u=this.textItems[0]||this.photoItems[0]||this.svgItems[0];u&&(this.accordionShadow.updateUI(u.props.isActiveShadow()),this.shadowColor.updateUI({value:u.props.getShadowColor(!0),active:!0}),this.shadowAngle.updateUI({value:u.props.getShadowAngle(!0),active:u.props.isActiveShadow()}),this.shadowAlpha.updateUI({value:u.props.getShadowAlpha(!0),active:u.props.isActiveShadow()}),this.shadowDistance.updateUI({value:u.props.getShadowDistance(!0),active:u.props.isActiveShadow()}),this.shadowBlur.updateUI({value:u instanceof w.b?u.props.getShadowDistance(!0):u.props.getShadowBlur(!0),active:u.props.isActiveShadow()}),this.shadowMenu.updateUI(u.props.isActiveShadow()))}},{key:"makeToolboxRowContents",value:function(){return[{row:this.colorRow,priority:600,viewType:0},{row:this.svgColorRow,priority:601,viewType:0},{row:this.accordionShadow,priority:602,viewType:0},{row:this.multiEffecRow,priority:700,viewType:0},{row:this.colorPickerRow,priority:820,viewType:0}]}},{key:"updateToolboxRowContents",value:function(e,t){var n=e.filter(function(e){return e instanceof w.b}),i=e.filter(function(e){return e instanceof Ve.a}),r=e.filter(function(e){return e instanceof B.e}),a=e.some(function(e){return!(e instanceof w.b)&&e.props.isCanActiveShadow()}),o=e.length>1&&!t.isAdminEditView,s=0!==n.length||0!==i.length,l=0===n.length&&0===r.length,c=!1,u=[];if(n.length===e.length&&(s=!1),!o)return this.notValidAction(),!0;if(o&&s){var h=!0,d=!1,p=void 0;try{for(var v,f=n[Symbol.iterator]();!(h=(v=f.next()).done);h=!0){var m=v.value.props.getDuplicateValExcludedColors()[0].toLowerCase();if(u.length){if(u[0]!==m){c=!0;break}}else u.push(m)}}catch(e){d=!0,p=e}finally{try{h||null==f.return||f.return()}finally{if(d)throw p}}var E=0===u.length,y=!0,T=!1,_=void 0;try{for(var I,C=i[Symbol.iterator]();!(y=(I=C.next()).done);y=!0){var S=I.value;if(c)break;var k=S.getEditableOriginColors(),R=S.props.getColorMap(),L=!0,O=!1,A=void 0;try{for(var b,P=k[Symbol.iterator]();!(L=(b=P.next()).done);L=!0){var N=b.value,x=R.get(N.toLowerCase()).toLowerCase();if(E)u.push(x);else if(u.indexOf(x)<0){c=!0;break}}}catch(e){O=!0,A=e}finally{try{L||null==P.return||P.return()}finally{if(O)throw A}}E=0===u.length}}catch(e){T=!0,_=e}finally{try{y||null==C.return||C.return()}finally{if(T)throw _}}u.length||(s=!1)}var M=o&&!e[0].isLock();if(te.a.setContentsVisible(this.toolTopContents,M),g.a.isMobileMode()?(this.toolTopContents.insertBefore(this.color.wrap,this.effectMenu),this.toolTopContents.insertBefore(this.svgColorPickerTool.wrap,this.effectMenu),this.color.canNotAppend=!0,this.svgColorPickerTool.canNotAppend=!0):(this.colorRow.wrap.appendChild(this.color.wrap),this.svgColorRow.wrap.appendChild(this.svgColorPickerTool.wrap),this.color.canNotAppend=!1,this.svgColorPickerTool.canNotAppend=!1),o){this.textItems=n,this.svgItems=i,this.photoItems=r;var D=o&&s&&(c||1===u.length);this.colorRow.rowVisible=D&&!g.a.isMobileMode(),this.colorPickerRow.rowVisible=D&&g.a.isMobileMode();var U=o&&s&&l&&!c&&1!==u.length;this.svgColorRow.rowVisible=U,this.accordionShadow.rowVisible=o&&a&&!g.a.isMobileMode(),this.multiEffecRow.rowVisible=o&&a&&g.a.isMobileMode(),this.updateUI(u,l,c),te.a.setContentsVisible(this.svgColorMenu,U),te.a.setContentsVisible(this.effectMenu,a)}else this.notValidAction();return!0}},{key:"notValidAction",value:function(){this.colorRow.rowVisible=!1,this.svgColorRow.rowVisible=!1,this.accordionShadow.rowVisible=!1,this.multiEffecRow.rowVisible=!1,this.colorPickerRow.rowVisible=!1,this.textItems=null,this.svgItems=null,this.photoItems=null,te.a.setContentsVisible(this.toolTopContents,!1)}},{key:"isDefaultColor",value:function(e,t){return e instanceof w.b?t===ze.e.RGB:e instanceof B.e?t===Ee.b.RGB:e instanceof Ve.a&&t===Be.a.RGB}},{key:"isDefaultSize",value:function(e,t){return e instanceof w.b?t===ze.e.NUMBER:e instanceof B.e?t===Ee.b.NUMBER:e instanceof Ve.a&&t===Be.a.NUMBER}},{key:"getDefaultShadowValueItems",value:function(e){var t=this;return e.filter(function(e){return t.isDefaultColor(e,e.props.getShadowColor(!0))&&e instanceof w.b?Xe.a.isShadowAngleDefault(e.props):t.isDefaultSize(e,e.props.getShadowAngle(!0))&&t.isDefaultSize(e,e.props.getShadowDistance(!0))&&t.isDefaultSize(e,e instanceof w.b?e.props.getShadowDistance(!0):e.props.getShadowBlur(!0))})}}],[{key:"useItemGraphicEffectMapper",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e&&e.length&&g.a.dispatch(new ye.b(e,e,t.actionType,t.groupName,t.name,n,i,t.timeout))}}]),e}(),Ke={groupName:"outline",name:"active",actionType:K.a.SVG_GRAPHIC_OUTLINE_ACTIVE},Ze={groupName:"outline",name:"color",actionType:K.a.SVG_GRAPHIC_OUTLINE_COLOR,timeout:3e3},je={groupName:"outline",name:"size",actionType:K.a.SVG_GRAPHIC_OUTLINE_SIZE,timeout:3e3},qe={groupName:"outline",name:"type",actionType:K.a.SVG_GRAPHIC_OUTLINE_TYPE,timeout:3e3},$e=function(){function e(t){var n,i;c()(this,e),p()(this,"lineList",[]),p()(this,"isStyleTemplateProp",!1),p()(this,"rowVisible",!0),this.listener=t,this.wrap=document.createElement("div"),this.wrap.className="".concat(f.a.TOOLS_ITEM," ").concat(f.a.SELECT_ITEM," item_stroke_type");var r=document.createElement("button");r.classList.add("title"),r.textContent="종류";var a=document.createElement("button");a.classList.add("strokeListBtn");var o=document.createElement("button");o.classList.add("currentStrokeType");var s=document.createElement("button");s.classList.add("solid"),o.appendChild(s),Object(z.setToolsIcon)(o,z.ToolsIcon.GREATER_THAN,!0),a.appendChild(o);var l=document.createElement("button");l.classList.add("popupList");var u=document.createElement("button");(n=u.classList).add.apply(n,["lineTypeBtn","solidBtn"]),u.setAttribute(e.LI_TAG_VALUE_ATTR_NAME,"solid");var h=document.createElement("button");h.classList.add("solid"),u.appendChild(h);var d=document.createElement("button");(i=d.classList).add.apply(i,["lineTypeBtn","dashBtn"]),d.setAttribute(e.LI_TAG_VALUE_ATTR_NAME,"dash");var v=document.createElement("button");v.classList.add("dash"),d.appendChild(v),l.appendChild(u),l.appendChild(d),a.appendChild(l),this.currentStrokeLine=s,this.strokeListBtn=a,this.popupList=l,this.lineList.push(u),this.lineList.push(d),this.wrap.appendChild(r),this.wrap.appendChild(a),this.addEventListener()}return h()(e,[{key:"render",value:function(){return this.wrap}},{key:"updateUI",value:function(e){var t=e.value;this.currentStrokeLine.className=t}},{key:"hidePopup",value:function(){this.popupList.classList.remove(e.POPUP_ACTIVE)}},{key:"showPopup",value:function(){this.popupList.classList.add(e.POPUP_ACTIVE)}},{key:"addEventListener",value:function(){var t=this,n=function e(){t.hidePopup(),document.removeEventListener("click",e)};this.strokeListBtn.addEventListener("click",function(i){i.stopPropagation(),i.preventDefault(),t.popupList.classList.contains(e.POPUP_ACTIVE)?(t.hidePopup(),document.removeEventListener("click",n)):(t.showPopup(),document.addEventListener("click",n))});var i=!0,r=!1,a=void 0;try{for(var o,s=function(){var n=o.value;n.addEventListener("mouseenter",function(){n.classList.add("hover")}),n.addEventListener("mouseleave",function(){n.classList.remove("hover")}),n.addEventListener("click",function(){t.listener(n.getAttribute(e.LI_TAG_VALUE_ATTR_NAME))})},l=this.lineList[Symbol.iterator]();!(i=(o=l.next()).done);i=!0)s()}catch(e){r=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(r)throw a}}}}]),e}();p()($e,"POPUP_ACTIVE","active"),p()($e,"LI_TAG_VALUE_ATTR_NAME","data-value");var Qe=function(){function e(){var t=this;c()(this,e);var n=(new ee.g).setBorderBottom();this.svgColorPickerTool=new xe.a(function(e,n){return g.a.dispatch(new Me.f(e,n,t.currentItem))},E.a.TOOLS_SVG_COLOR,!1,function(){return t.onStartChangeColor()},function(){return t.onFinishChangeColor()}),n.add(this.svgColorPickerTool),this.colorPickerRow=(new ee.g).addCustomClass(f.a.COLOR_PICKER_ROW),this.svgColorRow=n,this.makeAccordionOutlineRow(),this.makeAccordionShadowRow(),this.makeSvgEffectRow()}return h()(e,[{key:"makeSvgEffectRow",value:function(){var e=this;this.svgEffecRow=(new ee.g).addCustomClass(f.a.ACCORDION_EFFECT_ROW),this.outlineMenu=new be.a(E.a.TOOLS_TEXT_ROW_OUTLINE,function(){return e.showOutlineMenu.click()},function(t){return e.outlineCheckedEvent(t)}),this.shadowMenu=new be.a(E.a.TOOLS_TEXT_ROW_SHADOW,function(){return e.showShadowMenu.click()},function(t){return e.shadowCheckedEvent(t)}),this.svgEffecRow.add(this.outlineMenu,this.shadowMenu)}},{key:"makeMobileToolbox",value:function(){return this.toolTopContents=te.a.makeToolboxTopContentsWrapper(),this.toolTopContents.appendChild(this.svgColorPickerTool.wrap),te.a.setEventSvgColorTool(this.svgColorPickerTool,this.colorPickerRow),this.effectMenu=te.a.makeButtonShowToolsRow("효과",this.svgEffecRow),this.toolTopContents.appendChild(this.effectMenu),this.showOutlineMenu=te.a.makeButtonShowToolsAccordionRow("외곽선",this.accordionOutline),this.showOutlineMenu.classList.add(f.a.HIDE),this.toolTopContents.appendChild(this.showOutlineMenu),this.showShadowMenu=te.a.makeButtonShowToolsAccordionRow("그림자",this.accordionShadow),this.showShadowMenu.classList.add(f.a.HIDE),this.toolTopContents.appendChild(this.showShadowMenu),this.toolTopContents}},{key:"makeAccordionOutlineRow",value:function(){var t=this,n=new ee.c(E.a.TOOLS_TEXT_ROW_OUTLINE,function(e){return t.outlineCheckedEvent(e)}).setFlex().setBorderBottom();this.outlineType=new $e(function(n){e.useSvgShapePropMapper(qe,n,[t.currentItem])}),this.outlineColor=new Se.a(function(e){t.outlineCheckedEvent(!0,e)},z.ToolsIcon.PENCIL,E.a.TOOLS_OUTLINE_COLOR,!1,!0).addClass(f.a.ACCORDION_ROW_COLOR),this.outlineSize=new j.a(function(n){e.useSvgShapePropMapper(je,n,[t.currentItem])},E.a.TOOLS_OUTLINE_SIZE,1,25,1),n.addCustomClass(f.a.EFFECT_TOOLS),n.setPrevCallback(function(){return t.effectMenu.click()}),n.appendElement(this.outlineColor.render()).add(this.outlineType,this.outlineSize),this.accordionOutline=n}},{key:"outlineCheckedEvent",value:function(t,n){var i=this;g.a.groupingAction(function(){e.useSvgShapePropMapper(Ke,t,[i.currentItem]),n&&e.useSvgShapeEffectMapper([i.currentItem],Ze,n)})}},{key:"shadowCheckedEvent",value:function(t,n){var i=this;g.a.groupingAction(function(){!0===t&&i.isDefaultColor(i.currentItem.props.getShadowColor(!0))&&i.isDefaultSize(i.currentItem.props.getShadowAngle(!0))&&i.isDefaultSize(i.currentItem.props.getShadowDistance(!0))&&i.isDefaultSize(i.currentItem.props.getShadowBlur(!0))&&(e.useSvgShapeEffectMapper([i.currentItem],De.c,315,!1),e.useSvgShapeEffectMapper([i.currentItem],De.b,50,!1),e.useSvgShapeEffectMapper([i.currentItem],De.f,12,!1),e.useSvgShapeEffectMapper([i.currentItem],De.d,8,!1)),e.useSvgShapeEffectMapper([i.currentItem],De.a,t),n&&e.useSvgShapeEffectMapper([i.currentItem],De.e,n)})}},{key:"makeAccordionShadowRow",value:function(){var t=this,n=new ee.c(E.a.TOOLS_TEXT_ROW_SHADOW,function(e){return t.shadowCheckedEvent(e)}).setFlex().setBorderBottom();this.shadowColor=new Se.a(function(e){t.shadowCheckedEvent(!0,e)},z.ToolsIcon.PENCIL,E.a.TOOLS_SHADOW_COLOR,!1,!0).addClass(f.a.ACCORDION_ROW_COLOR),this.shadowAngle=new j.a(function(n){e.useSvgShapeEffectMapper([t.currentItem],De.c,n)},E.a.TOOLS_SHADOW_ANGLE,0,360,1,"°"),this.shadowAlpha=new j.a(function(n){e.useSvgShapeEffectMapper([t.currentItem],De.b,n)},E.a.TOOLS_SHADOW_ALPHA,0,100,1,"%"),this.shadowDistance=new j.a(function(n){e.useSvgShapeEffectMapper([t.currentItem],De.f,n)},E.a.TOOLS_SHADOW_DISTANCE,0,100,1),this.shadowBlur=new j.a(function(n){e.useSvgShapeEffectMapper([t.currentItem],De.d,n)},E.a.TOOLS_SHADOW_SPREAD,0,100,1),n.addCustomClass(f.a.EFFECT_TOOLS),n.setPrevCallback(function(){return t.effectMenu.click()}),n.appendElement(this.shadowColor.render()).add(this.shadowAngle,this.shadowAlpha,this.shadowDistance,this.shadowBlur),this.accordionShadow=n}},{key:"updateUI",value:function(e,t){var n=new Map,i=!0,r=!1,a=void 0;try{for(var o,s=this.currentItem.getEditableOriginColors()[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var l=o.value;this.currentItem.props.setCurrentOriginColor(l),n.set(l,this.currentItem.props.getColor())}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}this.svgColorPickerTool.updateUI({colorMap:n}),this.svgColorPickerTool.setDisplay(!t),this.accordionOutline.updateUI(e.props.isActiveOutline()),this.outlineColor.updateUI({value:e.props.getOutlineColor(),active:!0}),this.outlineSize.updateUI({value:e.props.getOutlineSize(),active:e.props.isActiveOutline()}),this.outlineType.updateUI({value:e.props.getOutlineType(),active:e.props.isActiveOutline()}),this.accordionShadow.updateUI(e.props.isActiveShadow()),this.shadowColor.updateUI({value:e.props.getShadowColor(!0),active:!0}),this.shadowAngle.updateUI({value:e.props.getShadowAngle(!0),active:e.props.isActiveShadow()}),this.shadowAlpha.updateUI({value:e.props.getShadowAlpha(!0),active:e.props.isActiveShadow()}),this.shadowDistance.updateUI({value:e.props.getShadowDistance(!0),active:e.props.isActiveShadow()}),this.shadowBlur.updateUI({value:e.props.getShadowBlur(!0),active:e.props.isActiveShadow()}),this.shadowMenu.updateUI(e.props.isActiveShadow()),this.outlineMenu.updateUI(e.props.isActiveOutline())}},{key:"onStartChangeColor",value:function(){this.currentItem.setStatus(v.d.LAZY)}},{key:"onFinishChangeColor",value:function(){this.currentItem.setStatus(v.d.CHANGE)}},{key:"isDefaultColor",value:function(e){return e===Be.a.RGB}},{key:"isDefaultSize",value:function(e){return e===Be.a.NUMBER}},{key:"makeToolboxRowContents",value:function(){return[{row:this.svgColorRow,priority:600,viewType:0},{row:this.accordionOutline,priority:650,viewType:0},{row:this.accordionShadow,priority:800,viewType:0},{row:this.svgEffecRow,priority:810,viewType:0},{row:this.colorPickerRow,priority:820,viewType:0}]}},{key:"updateToolboxRowContents",value:function(e,t){var n=t.renderedItem&&t.renderedItem instanceof X.a,i=n&&!t.isAdminEditView&&t.renderedItem.getEditableOriginColors().length>0;this.svgColorRow.rowVisible=i,this.accordionOutline.rowVisible=n&&!t.isAdminEditView,this.accordionShadow.rowVisible=n&&!t.isAdminEditView,this.svgEffecRow.rowVisible=n&&!t.isAdminEditView&&g.a.isMobileMode(),this.colorPickerRow.rowVisible=i&&g.a.isMobileMode(),g.a.isMobileMode()?(this.toolTopContents.insertBefore(this.svgColorPickerTool.wrap,this.effectMenu),this.svgColorPickerTool.canNotAppend=!0):(this.svgColorRow.wrap.appendChild(this.svgColorPickerTool.wrap),this.svgColorPickerTool.canNotAppend=!1);var r=n&&!t.isAdminEditView&&!t.renderedItem.isLock();return te.a.setContentsVisible(this.toolTopContents,r),te.a.setContentsVisible(this.colorMenu,i),n?(this.currentItem=t.renderedItem,this.updateUI(this.currentItem,t.isAdminEditView)):this.currentItem=null,!0}}],[{key:"useSvgShapePropMapper",value:function(e,t,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];g.a.dispatch(new ye.d(e.actionType,e.groupName,e.name,t,i,e.timeout,!0,n))}},{key:"useSvgShapeEffectMapper",value:function(e,t,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];g.a.dispatch(new ye.b(e,e,t.actionType,t.groupName,t.name,n,i,t.timeout))}}]),e}(),Je=n(376),et=n(484),tt=n(143),nt=n(5),it=n(112),rt=n(242),at=n(126),ot=n(113),st=n(60),lt=n(49),ct=n(151),ut=function(){function e(){var t=this;c()(this,e),this.btnDelete=new C.a(function(){g.a.dispatch(new ae.d),g.a.instance.mouseAction.mode=m.a.MODE_NONE},{icon:z.ToolsIcon.DELETE}),Z.a.createTooltip(this.btnDelete.wrap,Z.b.TL,{title:{name:"배경 삭제"}});var n=(new ee.g).setBorderBottom().addCustomClass(f.a.ROW_BACKGROUND_DELETE);n.add((new ee.f).add(this.btnDelete));var i=new ee.g(E.a.TOOLS_SVG_PATTERN_SIZE);this.patternSizeTool=new j.a(function(n){return g.a.dispatch(new Me.i(t.currentItem,lt.b.getNewRangeValue(n,e.TRACKBAR_MIN_PATTERN_COUNT_RATIO,e.TRACKBAR_MAX_PATTERN_COUNT_RATIO,Be.b.MIN_PATTERN_COUNT_RATIO,Be.b.MAX_PATTERN_COUNT_RATIO)))},E.a.NULL,e.TRACKBAR_MIN_PATTERN_COUNT_RATIO,e.TRACKBAR_MAX_PATTERN_COUNT_RATIO,1),i.add(this.patternSizeTool),this.backgroundDeleteRow=n,this.patternCountRatioRow=i}return h()(e,[{key:"makeMobileToolbox",value:function(){this.toolTopContents=te.a.makeToolboxTopContentsWrapper();var e=this.patternSizeMenu=te.a.makeButtonShowToolsRow("패턴 크기",this.patternCountRatioRow);return this.toolTopContents.appendChild(e),this.toolTopContents}},{key:"updateUI",value:function(t,n){var i=new Map,r=!0,a=!1,o=void 0;try{for(var s,l=this.currentItem.getEditableOriginColors()[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var c=s.value;this.currentItem.props.setCurrentOriginColor(c),i.set(c,this.currentItem.props.getColor())}}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}t.isBackground;var u=t.svgData.type===st.g.BACKGROUND_PATTERN,h=lt.b.getNewRangeValue(t.props.patternCountRatio,Be.b.MIN_PATTERN_COUNT_RATIO,Be.b.MAX_PATTERN_COUNT_RATIO,e.TRACKBAR_MIN_PATTERN_COUNT_RATIO,e.TRACKBAR_MAX_PATTERN_COUNT_RATIO);this.patternSizeTool.updateUI({value:Math.round(h),active:!t.isLock()}),this.patternSizeTool.setDisplay(u),this.btnDelete.setDisplay(u)}},{key:"isDefaultColor",value:function(e){return e===Be.a.RGB}},{key:"isDefaultSize",value:function(e){return e===Be.a.NUMBER}},{key:"makeToolboxRowContents",value:function(){return[{row:this.patternCountRatioRow,priority:700,viewType:0}]}},{key:"updateToolboxRowContents",value:function(e,t){var n=t.renderedItem&&t.renderedItem instanceof ct.a,i=(n&&!t.isAdminEditView&&t.renderedItem.getEditableOriginColors().length,n&&!t.isAdminEditView&&t.renderedItem&&t.renderedItem.isOnlyOneItem());this.patternCountRatioRow.rowVisible=i,this.backgroundDeleteRow.rowVisible=n&&!t.isAdminEditView&&t.renderedItem&&t.renderedItem.isOnlyOneItem();var r=n&&!t.isAdminEditView&&!t.renderedItem.isBackground,a=n&&!t.isAdminEditView&&!t.renderedItem.isLock();return te.a.setContentsVisible(this.toolTopContents,a),te.a.setContentsVisible(this.patternSizeMenu,i),te.a.setContentsVisible(this.effectMenu,r),n?(this.currentItem=t.renderedItem,this.updateUI(this.currentItem,t.isAdminEditView)):this.currentItem=null,!0}}]),e}();p()(ut,"TRACKBAR_MIN_PATTERN_COUNT_RATIO",1),p()(ut,"TRACKBAR_MAX_PATTERN_COUNT_RATIO",50),n.d(t,"a",function(){return pt}),n.d(t,"b",function(){return ht});var ht,dt,pt=function(){function e(){var t=this;c()(this,e),p()(this,"lastRenderStatus",{contents:{items:null,headerTitle:null,renderedItem:null,headerToolVisible:0,isLock:!1,isValidResource:!0,isAdminEditView:!1,navRootGroup:!1,theme:null,isUnsupportedLicense:!1},position:{editorViewMode:null,left:0,top:0,visible:!1}}),p()(this,"margin",5),p()(this,"marginBottom",36),p()(this,"mouseAction",{mode:m.a.MODE_NONE,offsetX:0,offsetY:0,baseX:0,baseY:0}),p()(this,"isAdminEditMode",!1),p()(this,"rowContents",[]),p()(this,"rowContentsRenderer",[]);var n=document.getElementById(nt.a.librarySection);this.element=document.createElement("div"),this.element.id="itemToolbox",this.rowContentsRenderer=[new he,new de.a,new Pe,new Ne.b,new Qe,new Ue,new Ge,new ut,new Je.a,new Ye],this.rowContentsRenderer.forEach(function(e){t.addRowContents(e.makeToolboxRowContents())}),this.makeElement(),n.appendChild(this.element)}var t;return h()(e,[{key:"setReady",value:(t=s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.addEventListeners();case 1:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"setToolsExpend",value:function(e){e?this.element.classList.add("expend"):this.element.classList.remove("expend")}},{key:"toggleToolsExpend",value:function(){this.element.classList.toggle("expend")}},{key:"makeHeaderRightTools",value:function(){var e=this,t=document.createElement("div");t.className="header_tools",this.btnAdminEdit=new C.a(function(t){e.isAdminEditMode=t,g.a.dispatch(new K.c(function(e,t,n){n.renderItemTools(e,t)},!1))},{icon:z.ToolsIcon.SETTINGS}),this.btnCopy=new C.a(function(){g.a.dispatch(new rt.a(g.a.instance.renderPageIdx)),g.a.dispatch(new rt.c(g.a.instance.renderPageIdx))},{icon:z.ToolsIcon.COPY}),Z.a.createTooltip(this.btnCopy.wrap,Z.b.B,{title:{name:E.a.TOOLS_TOOLTIP_CLONE_TITLE,shortcut:E.a.TOOLS_TOOLTIP_CLONE_SHORTCUT}}),this.btnLock=new C.a(function(e){e?g.a.dispatch(new S.k):g.a.dispatch(new S.n)},{icon:z.ToolsIcon.LOCK}),Z.a.createTooltip(this.btnLock.wrap,Z.b.B,{title:{name:E.a.TOOLS_TOOLTIP_LOCK_TITLE,shortcut:E.a.TOOLS_TOOLTIP_LOCK_SHORTCUT}},{title:{name:E.a.TOOLS_TOOLTIP_UNLOCK_TITLE,shortcut:E.a.TOOLS_TOOLTIP_UNLOCK_SHORTCUT}}),this.btnDelete=new C.a(function(){return g.a.dispatch(new at.a)},{icon:z.ToolsIcon.DELETE}),Z.a.createTooltip(this.btnDelete.wrap,Z.b.B,{title:{name:E.a.TOOLS_TOOLTIP_DELETE_TITLE,shortcut:E.a.TOOLS_TOOLTIP_DELETE_SHORTCUT}}),this.btnFavorite=new Y,this.btnGroup=new C.a(function(e){e?g.a.dispatch(new S.a):g.a.dispatch(new S.d)},{icon:z.ToolsIcon.ITEM_GROUP}),Z.a.createTooltip(this.btnGroup.wrap,Z.b.B,{title:{name:E.a.TOOLS_TOOLTIP_GROUP_TITLE,shortcut:E.a.TOOLS_TOOLTIP_GROUP_SHORTCUT}},{title:{name:E.a.TOOLS_TOOLTIP_UNGROUP_TITLE,shortcut:E.a.TOOLS_TOOLTIP_UNGROUP_SHORTCUT}}),t.appendChild(this.btnAdminEdit.render()),t.appendChild(this.btnGroup.render()),t.appendChild(this.btnCopy.render()),t.appendChild(this.btnLock.render()),t.appendChild(this.btnDelete.render()),t.appendChild(this.btnFavorite.render()),this.header.appendChild(t)}},{key:"makeHeaderMobileTools",value:function(){var e=this.headerMobileTools=document.createElement("div");e.className="toolbox_header_mobile",this.rowContentsRenderer.forEach(function(t){e.insertBefore(t.makeMobileToolbox(),e.lastChild)}),this.header.appendChild(e)}},{key:"makeHeader",value:function(){this.header=document.createElement("div"),this.header.className=f.a.TOOLBOX_HEADER,this.headerTitle=document.createElement("span"),this.header.appendChild(this.headerTitle),this.makeHeaderMobileTools(),this.makeHeaderRightTools(),this.element.appendChild(this.header)}},{key:"makeBody",value:function(){this.body=document.createElement("div"),this.body.className=f.a.TOOLBOX_BODY;var e=document.createDocumentFragment();this.rowContents.forEach(function(t){var n=t.row.render();t.element=n,e.appendChild(n)}),this.scrollElement=new pe.a,this.scrollElement.element.style.width="100%",this.scrollContents=document.createElement("div"),this.scrollContents.appendChild(e),this.body.appendChild(this.scrollElement.render(this.scrollContents)),this.element.appendChild(this.body)}},{key:"makeFooter",value:function(){this.footer=document.createElement("div"),this.footer.className=f.a.TOOLBOX_FOOTER,this.element.appendChild(this.footer)}},{key:"makeElement",value:function(){this.makeHeader(),this.makeBody(),this.makeFooter()}},{key:"addRowContents",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.forEach(function(e){return t.rowContents.push(e)}),n&&this.rowContents.sort(function(e,t){return e.priority-t.priority})}},{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=this.getRenderStatus(e,t),i=n.position.visible;if(i){var r=!1,a=!1;if(1===e.length&&e[0]instanceof _.b){var o=e[0];r=!o.isSameLastEditedCellAndEditingCell(),a=!o.isSameTextStyle(),o.updateLastEditedCell(),o.updateLastTextStyle()}(this.isChangeContentsStatus(n.contents)||r||a||t&&(t.type===ht.FORCE_UPDATE||t.type===ht.MOCKUP_EDIT))&&this.renderContents(n.position.editorViewMode,e,n.contents)}else this.setToolsExpend(!1);g.a.dispatch(new K.c(function(e,t,n){var r=i?ot.a.top:ot.a.default;n.setPositionFloatingButtons(r)})),this.isChangePositionStatus(n.position)&&(i?(this.element.classList.add(f.a.ACTIVE),n.position.editorViewMode!==this.lastRenderStatus.position.editorViewMode&&document.body.setAttribute("data-view",n.position.editorViewMode)):this.element.classList.remove(f.a.ACTIVE),g.a.dispatch(new K.c(function(e,t,n){n.leftBar.setActiveItemMenu(i)}))),this.lastRenderStatus=n}},{key:"renderContents",value:function(t,n,i){var r=i.renderedItem,a=this.lastRenderStatus.contents,o=i.headerTitle!==a.headerTitle||i.isLock!==a.isLock||i.isValidResource!==a.isValidResource||i.isUnsupportedLicense!==a.isUnsupportedLicense||i.isAdminEditView!==a.isAdminEditView||i.navRootGroup!==a.navRootGroup,s=i.isLock,l=i.isValidResource,c=i.isUnsupportedLicense;if(o){this.headerTitle.innerHTML="";var u=y.CRM.get(i.headerTitle)||i.headerTitle;if(s?u+=" (잠겨있음)":l?c&&(u="미지원 요소"):u+=" (삭제됨)",i.navRootGroup){var h=document.createElement("span");h.className=e.NAV_ROOT_GROUP,h.innerText="그룹",this.headerTitle.appendChild(h),r&&Object(z.setToolsIcon)(this.headerTitle,z.ToolsIcon.GREATER_THAN,!0)}i.navRootGroup&&!r||this.headerTitle.appendChild(document.createTextNode(u)),r&&this.element.setAttribute("data-type",r.getItemType().toLowerCase()),this.setToolsExpend(!1),this.headerMobileTools.childNodes.forEach(function(e){e.classList.contains(f.a.HIDE)||e.childNodes.forEach(function(e){return e.classList.remove("is_selected")})}),this.rowContents.forEach(function(e){e.element.classList.remove("mobile_active"),e.element.classList.contains("row_item_common")&&e.element.childNodes.forEach(function(e){e.classList.contains("tools_popup")&&e.classList.add(f.a.HIDE)})})}!((i.headerToolVisible&dt.LOCK)>0)||r&&r.isOnlyOneItem()?this.btnLock.setDisplay(!1):(this.btnLock.setDisplay(!0),this.btnLock.updateUI({isSelected:s})),(i.headerToolVisible&dt.FAVORITE)>0?(this.btnFavorite.setDisplay(!0),this.btnFavorite.updateUI({active:!0,selectedItem:r})):(this.btnFavorite.setDisplay(!1),this.btnFavorite.updateUI({active:!1})),(i.headerToolVisible&dt.GROUP)>0?(this.btnGroup.setDisplay(!0),1===n.length?this.btnGroup.updateUI({isSelected:!0}):this.btnGroup.updateUI({isSelected:I.b.isSameGroup(n)})):this.btnGroup.setDisplay(!1),this.btnAdminEdit.setDisplay(g.a.getEnv().adminMode),this.btnAdminEdit.updateUI({active:g.a.getEnv().adminMode,isSelected:i.isAdminEditView}),this.rowContentsRenderer.forEach(function(e){e.updateToolboxRowContents(n,i)}),s||!l||c?this.element.classList.add(f.a.ITEM_LOCKED):this.element.classList.remove(f.a.ITEM_LOCKED),this.btnDelete.setDisplay(!0),this.btnDelete.updateUI({active:!s&&l,isSelected:!1});var d=l&&!(r&&r.isOnlyOneItem())&&!s&&!c;this.btnCopy.setDisplay(d);for(var p=0,v=0,m=this.rowContents.length;v<m;v++){var E=this.rowContents[v];if(E.row.rowVisible){if(p+=1,null==E.element){var T=E.row.render();E.element=T}if(this.scrollContents===E.element.parentElement)continue;this.scrollContents.insertBefore(E.element,this.scrollContents.children.item(p-1))}else E.element.parentElement&&E.element.parentElement.removeChild(E.element)}}},{key:"getRenderStatus",value:function(e,t){if(this.mouseAction.mode===m.a.MODE_ITEM_DRAG)return{position:{left:this.mouseAction.offsetX,top:this.mouseAction.offsetY,visible:!0,editorViewMode:this.lastRenderStatus.position.editorViewMode},contents:this.lastRenderStatus.contents};var n=e;if(t&&t.type===ht.HIDE||0===n.length||n.some(function(e){return e.status===v.d.LOADING}))return{position:Object.assign({},this.lastRenderStatus.position,{visible:!1}),contents:{items:null,headerTitle:null,renderedItem:null,headerToolVisible:0,isLock:!1,isValidResource:!0,isAdminEditView:!1,navRootGroup:!1,theme:null,isUnsupportedLicense:!1}};var i=null,r=null,a=dt.LOCK,o=!1,s=!0,l=!1,c=!1;n.length>1?(a|=dt.GROUP,I.b.isSameGroup(n)?(c=!0,(r=I.b.getRootGroup(n[0].groupId).getSelectedItem())?(i=r.getHeaderTitle(),o=r.isLock()):(i="그룹",o=n[0].isLock())):(i="다중요소",o=n[0].isLock())):(i=(r=n[0]).getHeaderTitle(),r instanceof w.b||(a|=dt.FAVORITE),r.groupId&&(c=!0,a|=dt.GROUP),o=r.isLock(),s=!r.isResourceLoadFail(),l=r.isUnsupportedLicense(),s&&!l||(a-=dt.LOCK,a-=dt.FAVORITE)),t&&t.type===ht.ADMIN&&(this.isAdminEditMode=!0);var u=-1;return t&&t.type===ht.MOCKUP_EDIT&&(i="조합",this.isAdminEditMode=!0,u=t.key),{position:Object.assign({},this.lastRenderStatus.position,{visible:!0}),contents:{items:n.map(function(e){return{tbpeId:e.tbpeId,revision:e.props.getRevision(),forced:e.props.isForcedUpdate()}}),headerTitle:i,renderedItem:r,headerToolVisible:a,navRootGroup:c,isLock:o,isValidResource:s,isUnsupportedLicense:l,isAdminEditView:this.isAdminEditMode&&g.a.getEnv().adminMode,theme:tt.a.getConfigValue(it.a.UNICORN_THEME),mockUpEditIdx:u}}}},{key:"isChangeContentsStatus",value:function(e){var t=this.lastRenderStatus.contents.items,n=e.items;if(null==t||null==n||t.length!==n.length||this.lastRenderStatus.contents.headerToolVisible!==e.headerToolVisible||this.lastRenderStatus.contents.isAdminEditView!==e.isAdminEditView||this.lastRenderStatus.contents.theme!==e.theme)return!0;if(this.lastRenderStatus.contents.headerTitle!==e.headerTitle)return!0;if(this.lastRenderStatus.contents.renderedItem!==e.renderedItem)return!0;for(var i=0,r=t.length;i<r;i++)if(t[i].revision!==n[i].revision||t[i].tbpeId!==n[i].tbpeId||n[i].forced)return!0;return!1}},{key:"isChangePositionStatus",value:function(e){var t=this.lastRenderStatus.position;return null==t||t.visible!==e.visible||t.left!==e.left||t.top!==e.top||t.editorViewMode!==e.editorViewMode}},{key:"addEventListeners",value:function(){var t=this,n=this,i=function(e){if(t.mouseAction.mode===m.a.MODE_ITEM_DRAG){var n=g.a.instance.size;t.mouseAction.offsetX+=e.clientX-t.mouseAction.baseX,t.mouseAction.offsetY+=e.clientY-t.mouseAction.baseY,t.mouseAction.baseX=e.clientX,t.mouseAction.baseY=e.clientY,t.mouseAction.offsetX=Math.max(264-n.canvasWidth+t.margin,Math.min(t.mouseAction.offsetX,-t.margin)),t.mouseAction.offsetY=Math.min(n.canvasHeight-t.marginBottom,Math.max(t.mouseAction.offsetY,t.margin)),t.render()}},r=function e(n){t.mouseAction.mode=m.a.MODE_NONE,document.removeEventListener("mouseup",e),document.removeEventListener("mousemove",i)};$(this.element).on("click",".".concat(e.NAV_ROOT_GROUP),function(){g.a.dispatch(new et.a)}).on("mousedown",".".concat(f.a.TOOLBOX_HEADER),function(e){2!==e.button&&g.a.instance.editorViewMode!==T.b.HARD_FIXED&&(document.addEventListener("mouseup",r),document.addEventListener("mousemove",i),n.mouseAction.mode=m.a.MODE_ITEM_DRAG,n.mouseAction.baseX=e.clientX,n.mouseAction.baseY=e.clientY)}).on("keydown",":text",function(e){return e.stopPropagation()})}},{key:"isAlignEventTargetSingle",value:function(){return 1===this.lastRenderStatus.contents.items.length}},{key:"addContentsRenderers",value:function(e){var t=this;e.forEach(function(e){if(!t.rowContentsRenderer.some(function(t){return t===e})){t.rowContentsRenderer.push(e);var n=e.makeToolboxRowContents();t.addRowContents(n),n.forEach(function(e){var n=e.row.render();e.element=n,t.scrollContents.appendChild(n)})}})}},{key:"getContentsRendererList",value:function(){return this.rowContentsRenderer}}]),e}();p()(pt,"NAV_ROOT_GROUP","nav_root_group"),function(e){e[e.HIDE=0]="HIDE",e[e.ADMIN=1]="ADMIN",e[e.FORCE_UPDATE=2]="FORCE_UPDATE",e[e.MOCKUP_EDIT=3]="MOCKUP_EDIT"}(ht||(ht={})),function(e){e[e.LOCK=2]="LOCK",e[e.FAVORITE=4]="FAVORITE",e[e.GROUP=8]="GROUP"}(dt||(dt={}))},,function(e,t,n){"use strict";var i=n(0),r=n.n(i),a=n(1),o=n.n(a),s=n(35),l=n.n(s),c=n(36),u=n.n(c),h=n(37),d=n.n(h),p=n(42),v=n(67),f=n(209),g=n(84),m=n(284),E=n(73),y=n.n(E),T=n(50),_=n(62),I=n(66),C=n(49),S=function(){function e(){l()(this,e)}return u()(e,null,[{key:"isOverflowSafetyZone",value:function(e,t,n,i){var r=new C.a(0,0,e,t);return C.b.isThereAnyOneSideBetweenLtrbs(i,n,r)}},{key:"isLowResImage",value:function(e,t,n,i){return t/e*n<=i}},{key:"isMinFontSize",value:function(e,t){for(var n=0;n<t.length;n++){if(Math.min.apply(Math,y()(t[n]))<e)return!0}return!1}},{key:"isOverlapPostManu",value:function(e,t,n,i,r,a){var o=n.getRotatedLTRBByPivot(i,r),s=e<t,l=s?e:t,c=s?t:e,u=this.checkRollAreaCollision(o,s,a.rollAreaSizeLorT,l,c);if(a.rollAreaSizeLorT&&u)return!0;var h=this.checkSewingAreaCollision(o,s,a.sewingDistanceLorT,a.sewingAreaSize,l,c);if(a.sewingDistanceLorT&&a.sewingAreaSize&&h)return!0;var d=this.checkMetalRingAreaCollision(n,i,r,a.ringDistance,a.ringRadius,e,t);return a.ringRadius&&a.ringDistance&&d}},{key:"checkRollAreaCollision",value:function(e,t,n,i,r){var a,o;return t?(a=new C.a(0,0,i,n),o=new C.a(0,r-n,i,r)):(a=new C.a(0,0,n,i),o=new C.a(r-n,0,r,i)),C.b.isCollisionAABB(a,e)||C.b.isCollisionAABB(o,e)}},{key:"checkSewingAreaCollision",value:function(e,t,n,i,r,a){var o,s,l=n-i,c=2*i,u=a-n-i;return t?(o=new C.a(0,l,r,l+c),s=new C.a(0,u,r,u+c)):(o=new C.a(l,0,l+c,r),s=new C.a(u,0,u+c,r)),C.b.isCollisionAABB(o,e)||C.b.isCollisionAABB(s,e)}},{key:"checkMetalRingAreaCollision",value:function(e,t,n,i,r,a,o){var s={center:new C.c(i,i),radius:r},l={center:new C.c(i,o-i),radius:r},c={center:new C.c(a-i,i),radius:r},u={center:new C.c(a-i,o-i),radius:r};return C.b.isCollisionWithCircle(s,e,t,n)||C.b.isCollisionWithCircle(l,e,t,n)||C.b.isCollisionWithCircle(c,e,t,n)||C.b.isCollisionWithCircle(u,e,t,n)}},{key:"equalsTextWithCase",value:function(e,t){return e===t}}]),e}(),w=function(){function e(){l()(this,e)}return u()(e,null,[{key:"check",value:function(e,t){var n=[],i=e.itemPosition.getWidth(),r=e.itemPosition.getHeight();return(S.isLowResImage(i,t.imgOriginWidth,t.dpi,t.minDpi)||S.isLowResImage(r,t.imgOriginHeight,t.dpi,t.minDpi))&&n.push(v.f.LOW_RES_IMAGE),n}}]),e}(),k=function(){function e(){l()(this,e)}return u()(e,null,[{key:"check",value:function(e,t){var n=[],i=t.pageSheetWidthPx,r=t.pageSheetHeightPx,a=e.getItemBound(),o=a.pureLTRB,s=o.getRotatedLTRBByPivot(a.centerPos,a.degree);return e.isOnlyOneItem()?n:(S.isOverflowSafetyZone(i,r,t.guideAreaLTRB,s)&&n.push(v.f.OVERFLOW_SAFETY_ZONE),S.isOverlapPostManu(i,r,o,a.centerPos,a.degree,t.avoidData)&&n.push(v.f.OVERLAP_POST_MANU),n)}}]),e}(),R=function(){function e(){l()(this,e)}return u()(e,null,[{key:"getResultListByHold",value:function(e,t,n,i){var r=[];return n.forEach(function(n){var a=t.findIndex(function(e){return e===n});if(a>-1){t.splice(a,1);var o=i.has(n)?i.get(n):v.e.NONE;o!==v.e.NONE&&r.push({tbpeId:e,rstType:n,rstLevel:o,isHold:!0})}}),t.forEach(function(t){var n=i.has(t)?i.get(t):v.e.NONE;n!==v.e.NONE&&r.push({tbpeId:e,rstType:t,rstLevel:n,isHold:!1})}),r}},{key:"sortResultListByPriority",value:function(e){var t=[v.f.OVERFLOW_SAFETY_ZONE,v.f.LOW_RES_IMAGE,v.f.MIN_FONT_SIZE,v.f.MIN_ELEMENT_SIZE,v.f.OVERLAP_POST_MANU,v.f.UNINPUT_TEXT],n=[];t.forEach(function(t){var i=e.findIndex(function(e){return e.rstType===t});if(i>-1){var r=e.splice(i,1);n.push(r[0])}}),e.forEach(function(e){return n.push(e)}),Object.assign(e,n)}}]),e}(),L=function(){function e(){l()(this,e)}return u()(e,null,[{key:"checkItems",value:function(t,n,i){var r=[],a=!0,o=!1,s=void 0;try{for(var l,c=t[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var u=l.value,h=e.check(u,n),d=i.has(u.tbpeId)?i.get(u.tbpeId):[],p=R.getResultListByHold(u.tbpeId,h,d,n.restrictionLevelFinder);r.push.apply(r,y()(p))}}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}return R.sortResultListByPriority(r),r}},{key:"check",value:function(t,n){var i=[],r=e.getCommonCheckReference(n);if(i.push.apply(i,y()(k.check(t,r))),t instanceof T.e&&t.belongsTo===T.c.INDEPENDENT){var a=e.getPhotoCheckReference(t,n);i.push.apply(i,y()(w.check(t,a)))}else if(t instanceof _.b);else if(t instanceof I.b&&!t.isDefaultImage()){var o=e.getPhotoCheckReference(t.innerPhotoItem,n);i.push.apply(i,y()(w.check(t.innerPhotoItem,o)))}return i}},{key:"getCommonCheckReference",value:function(e){return{pageSheetWidthPx:e.pageSheetWidthPx,pageSheetHeightPx:e.pageSheetHeightPx,pagePrintWidthPx:e.pagePrintWidthPx,pagePrintHeightPx:e.pagePrintHeightPx,guideAreaLTRB:e.guideAreaLTRB,avoidData:e.avoidData}}},{key:"getPhotoCheckReference",value:function(e,t){var n=t.imgOriginSizeFinder.get(e.tbpeId);return{imgOriginWidth:n.width,imgOriginHeight:n.height,dpi:t.imgDpi,minDpi:t.imgMinDpi}}},{key:"getTextCheckReference",value:function(e){return{fontMinSizePt:e.fontMinSizePt}}}]),e}(),O=n(3),A=n(43),b=function e(){l()(this,e)};d()(b,"CAN_HOLD_LEVEL_WARNING",!1),d()(b,"CAN_HOLD_LEVEL_CAUTION",!0),d()(b,"CAN_HOLD_LEVEL_RECOMMEND",!0);var P=n(381),N=function(){function e(){l()(this,e),d()(this,"allResultList",new Map),e.initRestrictionTypeText()}return u()(e,[{key:"setCallbackReference",value:function(e){this.callbackReference=e}},{key:"clear",value:function(){this.allResultList.clear()}},{key:"setRestrictionLevelFinder",value:function(e){this.restrictionLevelFinder=e}},{key:"saveResultOfPageId",value:function(e,t){if(0!==t.length){var n=t[0].tbpeId;this.removeItemIdResultIdOfAllPage(n);var i=this.allResultList.has(e),r=i?this.allResultList.get(e):[];t.forEach(function(e){e.rstType!==v.f.NONE&&r.push(e)}),i||this.allResultList.set(e,r)}}},{key:"removeItemIdResultIdOfAllPage",value:function(e){this.allResultList.forEach(function(t){for(var n=t.findIndex(function(t){return t.tbpeId===e});n>=0;)t.splice(n,1),n=t.findIndex(function(t){return t.tbpeId===e})})}},{key:"removeResultOfPageId",value:function(e){this.allResultList.delete(e)}},{key:"removeNotExistResultOfItem",value:function(e,t){var n=this;if(this.allResultList.has(e)){var i=this.allResultList.get(e);i.forEach(function(e){if(!t.find(function(t){return t===e.tbpeId})){var r=i.findIndex(function(t){return t.tbpeId===e.tbpeId});r>=0&&(i.splice(r,1),n.callbackReference&&n.callbackReference.removePrintoutGuideById(e.tbpeId))}})}}},{key:"removeNotExistResultOfPage",value:function(e){var t=this;this.allResultList.forEach(function(n,i){e.indexOf(i)<0&&t.allResultList.delete(i)})}},{key:"getInitResultData",value:function(){var t=[],n=[],i=[];function r(t,n){t.push({type:n,name:e.getNameByRestrictionType(n),itemIdListWithHolding:new Map})}return this.restrictionLevelFinder.forEach(function(e,a){switch(e){case v.e.WARNING:r(t,a);break;case v.e.CAUTION:r(n,a);break;case v.e.RECOMMEND:default:r(i,a)}}),{totalCount:0,unHoldCount:0,holdCount:0,holdItemIdList:[],warningInfo:{name:e.ALERT_LEVEL_NAME_WARNING,count:0,canHold:b.CAN_HOLD_LEVEL_WARNING,rstInfoList:t},cautionInfo:{name:e.ALERT_LEVEL_NAME_CAUTION,count:0,canHold:b.CAN_HOLD_LEVEL_CAUTION,rstInfoList:n},recommendInfo:{name:e.ALERT_LEVEL_NAME_RECOMMEND,count:0,canHold:b.CAN_HOLD_LEVEL_RECOMMEND,rstInfoList:i}}}},{key:"getAllResult",value:function(){this.callbackReference&&(this.callbackReference.removeNotExistResultOfItem(),this.callbackReference.removeNotExistResultOfPage());var t=this.getInitResultData();return this.allResultList.forEach(function(n){n.forEach(function(n){e.setResultData(n,t)})}),t.totalCount+=t.holdCount+t.unHoldCount,t}},{key:"getLowResCount",value:function(e){var t=e.cautionInfo.rstInfoList,n=0;return t.forEach(function(e){e.type===v.f.LOW_RES_IMAGE&&(n=e.itemIdListWithHolding.size)}),n}},{key:"getWarningCount",value:function(e){return e.warningInfo.rstInfoList.length}},{key:"getFinalConfirmList",value:function(){var e=this.getAllResult(),t=new Map;this.addRestrictionItems(t,e.warningInfo,v.e.WARNING),this.addRestrictionItems(t,e.cautionInfo,v.e.CAUTION),this.addRestrictionItems(t,e.recommendInfo,v.e.RECOMMEND);var n=this.getLowResCount(e),i=this.getWarningCount(e);return{totalCount:t.size,lowResCount:n,itemList:t,warningCount:i}}},{key:"addRestrictionItems",value:function(e,t,n){t.rstInfoList.forEach(function(t){t.itemIdListWithHolding.forEach(function(t,i){e.get(i)||e.set(i,n)})})}},{key:"getAlertCount",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.getAllResult();return{total:t.totalCount,unHold:t.unHoldCount,hold:t.holdCount,warning:t.warningInfo?P.a.getAlertTypeCount(v.a.WARNING,e):0,caution:t.cautionInfo?P.a.getAlertTypeCount(v.a.CAUTION,e):0,recommend:t.recommendInfo?P.a.getAlertTypeCount(v.a.RECOMMEND,e):0}}},{key:"getInspectionResultOfItemRestriction",value:function(e,t){var n=null;return this.allResultList.forEach(function(i){n=i.find(function(n){return n.tbpeId===e&&n.rstType===t})}),n}},{key:"toggleHoldOfItemRestrictionType",value:function(e,t){var n=this.getInspectionResultOfItemRestriction(e,t);n&&(n.isHold=!n.isHold)}},{key:"isHoldOfItemRestrictionType",value:function(e,t){var n=this.getInspectionResultOfItemRestriction(e,t);return!!n&&n.isHold}},{key:"getHoldRestrictionTypeListOfItem",value:function(e){var t=[];return this.allResultList.forEach(function(n){n.forEach(function(n){n.tbpeId===e&&n.isHold&&t.push(n.rstType)})}),t}},{key:"getRestrictionTypeListOfItem",value:function(e){var t=[];return this.allResultList.forEach(function(n){n.forEach(function(n){n.tbpeId===e&&t.push(n.rstType)})}),t}}],[{key:"initRestrictionTypeText",value:function(){e.ALERT_LEVEL_NAME_WARNING=O.CRM.get(A.a.PRINTOUT_ALERT_LEVEL_NAME_WARNING),e.ALERT_LEVEL_NAME_CAUTION=O.CRM.get(A.a.PRINTOUT_ALERT_LEVEL_NAME_CAUTION),e.ALERT_LEVEL_NAME_RECOMMEND=O.CRM.get(A.a.PRINTOUT_ALERT_LEVEL_NAME_RECOMMEND),e.ALERT_LEVEL_NAME_HOLD=O.CRM.get(A.a.PRINTOUT_ALERT_LEVEL_NAME_HOLD),e.ALERT_RESTRICTION_NAME_OVERFLOW_SAFETY_ZONE=O.CRM.get(A.a.PRINTOUT_ALERT_RESTRICTION_NAME_OVERFLOW_SAFETY_ZONE),e.ALERT_RESTRICTION_NAME_LOW_RES_IMAGE=O.CRM.get(A.a.PRINTOUT_ALERT_RESTRICTION_NAME_LOW_RES_IMAGE),e.ALERT_RESTRICTION_NAME_MIN_FONT_SIZE=O.CRM.get(A.a.PRINTOUT_ALERT_RESTRICTION_NAME_MIN_FONT_SIZE),e.ALERT_RESTRICTION_NAME_MIN_ELEMENT_SIZE=O.CRM.get(A.a.PRINTOUT_ALERT_RESTRICTION_NAME_MIN_ELEMENT_SIZE),e.ALERT_RESTRICTION_NAME_OVERLAP_POST_MANU=O.CRM.get(A.a.PRINTOUT_ALERT_RESTRICTION_NAME_OVERLAP_POST_MANU),e.ALERT_RESTRICTION_NAME_UNINPUT_TEXT=O.CRM.get(A.a.PRINTOUT_ALERT_RESTRICTION_NAME_UNINPUT_TEXT)}},{key:"setResultData",value:function(e,t){var n=e.rstType,i=e.tbpeId,r=e.isHold,a=-1;switch(r?(t.holdCount++,t.holdItemIdList.push(i)):t.unHoldCount++,e.rstLevel){case v.e.WARNING:t.warningInfo.count++,(a=t.warningInfo.rstInfoList.findIndex(function(e){return e.type===n}))>=0&&t.warningInfo.rstInfoList[a].itemIdListWithHolding.set(i,r);break;case v.e.CAUTION:t.cautionInfo.count++,(a=t.cautionInfo.rstInfoList.findIndex(function(e){return e.type===n}))>=0&&t.cautionInfo.rstInfoList[a].itemIdListWithHolding.set(i,r);break;case v.e.RECOMMEND:default:t.recommendInfo.count++,(a=t.recommendInfo.rstInfoList.findIndex(function(e){return e.type===n}))>=0&&t.recommendInfo.rstInfoList[a].itemIdListWithHolding.set(i,r)}}},{key:"getNameByRestrictionType",value:function(t){switch(t){case v.f.OVERFLOW_SAFETY_ZONE:return e.ALERT_RESTRICTION_NAME_OVERFLOW_SAFETY_ZONE;case v.f.LOW_RES_IMAGE:return e.ALERT_RESTRICTION_NAME_LOW_RES_IMAGE;case v.f.MIN_FONT_SIZE:return e.ALERT_RESTRICTION_NAME_MIN_FONT_SIZE;case v.f.MIN_ELEMENT_SIZE:return e.ALERT_RESTRICTION_NAME_MIN_ELEMENT_SIZE;case v.f.OVERLAP_POST_MANU:return e.ALERT_RESTRICTION_NAME_OVERLAP_POST_MANU;case v.f.UNINPUT_TEXT:return e.ALERT_RESTRICTION_NAME_UNINPUT_TEXT;default:return"undefined"}}}]),e}(),x=function(){function e(){l()(this,e),d()(this,"itemPageIdList",new Map),d()(this,"inspectionResult",new N),d()(this,"itemHoldRstTypeList",new Map)}var t;return u()(e,[{key:"setCallbackReference",value:function(e){this.callbackReference=e}},{key:"initItemInfo",value:function(e,t){var n=this;this.itemHoldRstTypeList.clear(),t.forEach(function(t){var i=t.tbpeId;n.itemHoldRstTypeList.set(i,n.inspectionResult.getHoldRestrictionTypeListOfItem(i)),n.inspectionResult.removeItemIdResultIdOfAllPage(i),n.itemPageIdList.set(i,e)})}},{key:"checkRestriction",value:(t=o()(r.a.mark(function e(t,n,i,a){var o,s=this;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.initItemInfo(t,n),o=L.checkItems(n,i,this.itemHoldRstTypeList),this.inspectionResult.saveResultOfPageId(t,o),n.forEach(function(e){var t=e.tbpeId,r=e.getItemBound(),l=[];o.filter(function(e){return e.tbpeId===t}).forEach(function(e){e.rstType!==v.f.NONE&&l.push(e.rstType)});var c=s.getMostRestrictionLevelByTypeList(l,i.restrictionLevelFinder),u={itemTbpeId:t,itemBound:r,rstTypes:l,rstLevel:c};a.warningIconVC.checkAlert(u),s.updateAlertVisibleOfItems(a,n)});case 4:case"end":return e.stop()}},e,this)})),function(e,n,i,r){return t.apply(this,arguments)})},{key:"getMostRestrictionLevelByTypeList",value:function(e,t){var n=[];e.forEach(function(e){n.push(t.get(e))});for(var i=0,r=[v.e.WARNING,v.e.CAUTION,v.e.RECOMMEND,v.e.HOLD];i<r.length;i++)for(var a=r[i],o=0,s=n;o<s.length;o++){if(s[o]===a)return a}return v.e.WARNING}},{key:"updateAlertVisibleOfItems",value:function(e,t){var n=[],i=[];t.forEach(function(e){e.isEditMode?i.push(e.tbpeId):n.push(e.tbpeId)}),e.warningIconVC.showAlert(n),e.warningIconVC.hideAlert(i),e.render()}},{key:"getPageIdOfItem",value:function(e){return this.itemPageIdList.get(e)}},{key:"removePageIdOfItem",value:function(e){this.itemPageIdList.delete(e)}},{key:"updateDOMbyItems",value:function(t,n){var i=t.items;switch(t.itemStatus){case v.b.SELECT:this.selectItem(n,i);break;case v.b.REMOVE:this.removeItem(n,i);break;case v.b.CHANGE_POSITION:e.changePosition(n,i);break;case v.b.MOVE_OTHER_PAGE:this.moveToOtherPage(n,i);break;default:return void console.log("undefined ItemsStatus")}}},{key:"selectItem",value:function(e,t){if(t&&1===t.length&&t[0]){var n=t[0].tbpeId;t[0].isOnlyOneItem()||e.warningIconVC.hideAlert([n])}e.warningIconVC.showAlert(m.a.getNoEditItemIdList(this.callbackReference.getActiveItems()))}},{key:"removeItem",value:function(e,t){var n=this;t&&0!==t.length&&t.forEach(function(t){var i=t.tbpeId;n.inspectionResult.removeItemIdResultIdOfAllPage(i),n.itemPageIdList.delete(i),e.removeAlert(i)})}},{key:"removeItemById",value:function(e,t){var n=this;t&&0!==t.length&&t.forEach(function(t){n.inspectionResult.removeItemIdResultIdOfAllPage(t),n.itemPageIdList.delete(t),e.removeAlert(t)})}},{key:"moveToOtherPage",value:function(e,t){t&&0!==t.length&&m.a.getNoEditItemIdList(t).forEach(function(t){e.removeAlert(t)})}}],[{key:"getMostRestrictionType",value:function(e,t){var n=[v.e.WARNING,v.e.CAUTION,v.e.RECOMMEND,v.e.HOLD];if(t)for(var i=0,r=n;i<r.length;i++){var a=r[i],o=!0,s=!1,l=void 0;try{for(var c,u=e[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var h=c.value;if(t.get(h)===a)return h}}catch(e){s=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(s)throw l}}}}},{key:"changePosition",value:function(e,t){if(t&&0!==t.length){var n=m.a.getNoEditItemIdList(t);e.warningIconVC.hideAlert(n)}}}]),e}(),M=n(79),D=n(55),B=n(358),U=function(){function e(){l()(this,e)}return u()(e,null,[{key:"getPixelBySize",value:function(t,n,i){var r=e.getCheckedDPIbySize(n),a=M.a.changeUnit(t,i,D.b.CM),o=M.a.getPixelFromCenti(a,r);return o=e.getScaledPixelByLimitSize(o,n)}},{key:"getCheckedDPIbySize",value:function(e){var t=p.a.instance.env.devMode?D.d.DEV_MAX_SHEET_SIZE:D.d.MAX_SHEET_SIZE;return e>=t?t/D.d.DEFAULT_DPI:D.d.DEFAULT_DPI}},{key:"getScaledPixelByLimitSize",value:function(e,t){var n=p.a.instance.env.devMode?D.d.DEV_MAX_SHEET_SIZE:D.d.MAX_SHEET_SIZE;return t>=n?e*(n/t):e}}]),e}(),G=function(){function e(){l()(this,e)}return u()(e,null,[{key:"getAvoidData",value:function(e,t){var n=D.b.CM,i=0,r=0,a=0,o=0,s=0,l=0,c=0,u=0,h=0;switch(e){case v.c.BAR:var d=B.a.getBarMeta();i=U.getPixelBySize(d.rollAreaSizeLorT,t,n),r=U.getPixelBySize(d.rollAreaSizeRorB,t,n),a=U.getPixelBySize(d.sewingDistanceLorT,t,n),o=U.getPixelBySize(d.sewingDistanceRorB,t,n),s=U.getPixelBySize(d.sewingAreaSize,t,n);break;case v.c.ROD_SEWING:var p=B.a.getRodSewingMeta();i=U.getPixelBySize(p.rollAreaSizeLorT,t,n),r=U.getPixelBySize(p.rollAreaSizeRorB,t,n),a=U.getPixelBySize(p.sewingDistanceLorT,t,n),o=U.getPixelBySize(p.sewingDistanceRorB,t,n),s=U.getPixelBySize(p.sewingAreaSize,t,n);break;case v.c.METAL_RING:var f=B.a.getMetalRingMeta();l=U.getPixelBySize(f.radius,t,n),c=U.getPixelBySize(f.distance,t,n);break;case v.c.SURROUND_SEWING:var g=B.a.getSurroundSewingMeta();u=U.getPixelBySize(g.rollAreaSizeAll,t,n);break;case v.c.EDGE_ROUNDING:var m=B.a.getEdgeRoundingMeta();h=U.getPixelBySize(m.radius,t,n)}return{rollAreaSizeLorT:i,rollAreaSizeRorB:r,sewingDistanceLorT:a,sewingDistanceRorB:o,sewingAreaSize:s,ringRadius:l,ringDistance:c,surroundSewingRollAreaSizeAll:u,edgeRoundingRadius:h}}}]),e}(),F=n(236),H=n(252),V=n(45),W=n(493),z=n(81),X=n(298);n.d(t,"a",function(){return Y});var Y=function(){function e(){l()(this,e),d()(this,"guideDataList",new Map),d()(this,"itemController",new x),this.option=z.a.printoutOption}var t,n,i;return u()(e,[{key:"setCallbackReference",value:function(e){this.callbackReference=e,this.itemController.setCallbackReference(e),this.inspectionResult.setCallbackReference(e)}},{key:"setMetaReference",value:function(e){this.restrictionLevelFinder=e.restrictionLevelFinder,this.inspectionResult.setRestrictionLevelFinder(e.restrictionLevelFinder)}},{key:"setGuideInfo",value:function(e){var t=this;this.areaGuides=[],e.forEach(function(e){"AREA"===e.type?t.areaGuides.push(e):"IMAGE_DPI"===e.type?t.imageDpiGuide=e:"ITEM_SIZE"===e.type?t.itemSizeGuide=e:"FONT_SIZE"===e.type?t.fontSizeGuide=e:console.log("Unhandled guide",e)})}},{key:"render",value:(i=o()(r.a.mark(function e(t){var n,i,a,o,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.option.checkRestriction){e.next=2;break}return e.abrupt("return");case 2:if(n=f.a.getPrintoutOption(),t.domRenderParam.printOption=n,i=t.pageId,a=this.createGuideVC(i,n),o=this.callbackReference.getPageDOMPosition(),a.setSize(o.width,o.height),a.render(t.domRenderParam),t.pageWrapper&&!a.wrapper.parentElement&&a.appendElementTo(t.pageWrapper),!((s=p.a.instance.activeItems).length>0)||t.pageItems.includes(s[0])||t.forceCheckPageItems||this.callbackReference.isPhotoCropMode()){e.next=13;break}return e.abrupt("return");case 13:return e.next=15,this.checkRestrictionOfItems({items:t.forceCheckPageItems?t.pageItems:s,pageWidth:t.pageSize.width,pageHeight:t.pageSize.height,pageId:i,pageItems:t.pageItems});case 15:this.setVisibleHighlight(a,s),this.setVisibleMobileAlert(s),this.updateRenderAfter(i);case 18:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"setVisibleMobileAlert",value:function(e){var t=this;p.a.dispatch(new V.c(function(n,i,r){if(1===e.length){var a=e[0].tbpeId,o=t.inspectionResult.getRestrictionTypeListOfItem(a).length>0;r.itemGuideAlertMobile.showPrintoutAlertBtn(o,a)}else r.itemGuideAlertMobile.showPrintoutAlertBtn(!1)}))}},{key:"setVisibleHighlight",value:function(e,t){var n=this;if(this.guideDataList.forEach(function(t){t.vc!==e&&t.vc.setVisibleHighlight(!1)}),0!==t.length){var i=!1;t.forEach(function(e){n.inspectionResult.getRestrictionTypeListOfItem(e.tbpeId).forEach(function(e){e===v.f.OVERFLOW_SAFETY_ZONE&&(i=!0)})}),e.setVisibleHighlight(i)}else e.setVisibleHighlight(!1)}},{key:"createGuideVC",value:function(e,t){if(this.guideDataList.has(e))return this.guideDataList.get(e).vc;var n=this.callbackReference.getPageDOMPosition(),i=new W.a(n.width,n.height,this.areaGuides,this.imageDpiGuide);return this.guideDataList.set(e,{vc:i,printoutOption:t}),i}},{key:"closeAlertPopup",value:function(){this.guideDataList.forEach(function(e){e.vc.warningIconVC.closeAlertPopup()})}},{key:"updateRenderAfter",value:function(e){this.updateLinkedDOMofItem(e),this.updateDOMGuideOnOffByPage(e),this.updateGuideVisible(),this.removeNotLinkedGuideDOM()}},{key:"updateLinkedDOMofItem",value:function(e){var t=this.callbackReference.getActiveItems();if(!t||0!==t.length){var n=this.itemController.getPageIdOfItem(t[0].tbpeId);if(n&&n.toLowerCase()!==e.toLowerCase()){var i=this.guideDataList.get(n);if(i){var r=m.a.getItemIdList(t),a=!0,o=!1,s=void 0;try{for(var l,c=r[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var u=l.value;i.vc.removeAlert(u),this.itemController.removePageIdOfItem(u)}}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}}}}}},{key:"removeNotLinkedGuideDOM",value:function(){if(this.callbackReference.getPageCount()!==this.guideDataList.size){var e=this.callbackReference.getAllPageIdList();this.guideDataList.forEach(function(t,n,i){var r=!1,a=!0,o=!1,s=void 0;try{for(var l,c=e[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var u=l.value;if(n.toLowerCase()===u.toLowerCase()){r=!0;break}}}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}r||i.delete(n)})}}},{key:"updateDOMGuideOnOffByPage",value:function(e){if(this.guideDataList.has(e)){var t=this.guideDataList.get(e),n=this.callbackReference.isShowPrintoutGuide(),i=t.vc.wrapper.parentElement;i&&g.a.togglePageContentPrintAreaMode(i,n)}}},{key:"getGuideDataOfLastRenderedPage",value:function(){return this.guideDataList.get(this.callbackReference.getRenderedPageId())}},{key:"updateDOM",value:function(e){if(this.option.checkRestriction&&this.guideDataList.has(e.pageId)){e.domRenderParam.printOption||(e.domRenderParam.printOption=f.a.getPrintoutOption());var t=this.guideDataList.get(e.pageId).vc,n=this.callbackReference.getPageDOMPosition();t.setSize(n.width,n.height),t.render(e.domRenderParam)}}},{key:"showAlertPopup",value:function(e,t){var n=this.guideDataList.get(e).vc;n&&n.warningIconVC.showAlertPopup(t)}},{key:"updateGuideVisible",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.option.checkRestriction){var e=this.getGuideDataOfLastRenderedPage();if(e){var t=e.vc;this.callbackReference.isPhotoCropMode()?t.warningIconVC.hideAlert():t.warningIconVC.showAlert(),this.showAllPageGuide()}}}},{key:"removeGuideDataByPageId",value:function(e){if(this.option.checkRestriction&&this.guideDataList.has(e)){var t=this.guideDataList.get(e).vc;t.wrapper.parentElement&&t.wrapper.parentElement.removeChild(t.wrapper),this.guideDataList.delete(e),this.inspectionResult.removeResultOfPageId(e)}}},{key:"removeAllGuideData",value:function(){this.option.checkRestriction&&(this.guideDataList.forEach(function(e){var t=e.vc;t.clear(),t.wrapper.parentElement&&t.wrapper.parentElement.removeChild(t.wrapper)}),p.a.dispatch(new V.c(function(e,t,n){n.rightSection.printoutFinalConfirm.clearList()})),this.guideDataList.clear())}},{key:"clearAllAlertGuide",value:function(){this.inspectionResult.clear(),this.removeAllGuideData()}},{key:"showAllPageGuide",value:function(){this.guideDataList.forEach(function(e){e.vc.setVisible(!0)})}},{key:"hideAllPageGuide",value:function(){this.guideDataList.forEach(function(e){e.vc.setVisible(!1)})}},{key:"updateByItems",value:function(e){if(this.option.checkRestriction){var t=e.pageId,n=t?this.guideDataList.get(t):this.getGuideDataOfLastRenderedPage();n&&this.itemController.updateDOMbyItems(e,n.vc)}}},{key:"removeItemById",value:function(e){if(this.option.checkRestriction){var t=this.getGuideDataOfLastRenderedPage();t&&this.itemController.removeItemById(t.vc,e)}}},{key:"getInspectionDataSet",value:(n=o()(r.a.mark(function e(t,n,i,a){var o,s,l,c,u,h,d,p,v,g,m,E,y,T;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=f.a.getSizeOption(),s=o.dpi,l=o.unit,c=M.a.getPixel(o.width,s,l),u=M.a.getPixel(o.height,s,l),h=Math.max(c,u),d=X.a.getGuideAreaLTRB(this.areaGuides[0]),p=G.getAvoidData(a.optionType,h),v=0,g=0,e.next=12,H.a.getImageOriginSizeFinderAddedItems(t);case 12:return m=e.sent,E=o.dpi,y=this.imageDpiGuide?this.imageDpiGuide.minDpi:0,T=F.a.getFinder(),e.abrupt("return",{pageSheetWidthPx:n,pageSheetHeightPx:i,pagePrintWidthPx:c,pagePrintHeightPx:u,guideAreaLTRB:d,imgDpi:E,imgMinDpi:y,avoidData:p,fontMinSizePt:v,elementMinSizePt:g,imgOriginSizeFinder:m,restrictionLevelFinder:T});case 17:case"end":return e.stop()}},e,this)})),function(e,t,i,r){return n.apply(this,arguments)})},{key:"checkRestrictionOfItems",value:(t=o()(r.a.mark(function e(t){var n,i,a,o,s=this;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.option.checkRestriction&&!this.callbackReference.isPhotoCropMode()){e.next=2;break}return e.abrupt("return");case 2:if(0!==(n=t.items).length){e.next=5;break}return e.abrupt("return");case 5:return i=f.a.getPrintoutOption(),a=this.createGuideVC(t.pageId,i),this.callbackReference.removeNotExistResultOfItem(),this.callbackReference.removeNotExistResultOfPage(),e.next=11,this.getInspectionDataSet(n,t.pageWidth,t.pageHeight,i);case 11:return o=e.sent,e.next=14,this.itemController.checkRestriction(t.pageId,n,o,a);case 14:n.forEach(function(e){if(e.select||e.isOnlyOneItem()){var t=s.getShowRestrictionLevel(e.tbpeId);a.warningIconVC.updateAlertByRestrictionLevel(e.tbpeId,t)}});case 15:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"getShowRestrictionLevel",value:function(e){var t=this.restrictionLevelFinder,n=this.inspectionResult.getRestrictionTypeListOfItem(e),i=this.inspectionResult.getHoldRestrictionTypeListOfItem(e);function r(e){var i=!0,r=!1,a=void 0;try{for(var o,s=n[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var l=o.value;if(t.get(l)===e)return!0}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}}function a(e,n){var i=0;return e.forEach(function(e){t.get(e)===n&&i++}),i}var o=v.e.HOLD,s=o,l=v.e.RECOMMEND;r(l)&&b.CAN_HOLD_LEVEL_RECOMMEND&&(s=a(n,l)===a(i,l)?o:l);var c=v.e.CAUTION;r(c)&&b.CAN_HOLD_LEVEL_CAUTION&&(a(n,c)!==a(i,c)&&(s=c));var u=v.e.WARNING;r(u)&&(b.CAN_HOLD_LEVEL_WARNING?a(n,u)!==a(i,u)&&(s=u):s=u);return s}},{key:"inspectionResult",get:function(){return this.itemController.inspectionResult}}]),e}()},function(e,t,n){"use strict";var i,r=n(0),a=n.n(r),o=n(1),s=n.n(o),l=n(35),c=n.n(l),u=n(36),h=n.n(u),d=n(37),p=n.n(d),v=n(42),f=n(41),g=n(106),m=n(3),E=n(110),y=n(135),T=n(12),_=n(58),I=n(72),C=n(45);!function(e){e.PAGE_HEADER="page_header",e.PAGE_HEADER_WRAP="page_header_wrap",e.CURRENT_PAGE_NUM_TOP_DIV="current_page_num_top_div",e.PAGE_LABEL_DIV="page_label_div",e.SHEET_SIZE_SMALL="sheet_size_small",e.NO_TITLE="no_title",e.OVER_FLOWN="overflown",e.LEFT_SIDE_WRAP="left_side_wrap",e.PAGE_BTN_WRAP="page_btn_wrap",e.COLOR_BTN_WRAP="color_button_wrap",e.BTN_ADD_NEW_PAGE="add_new_page",e.BTN_COPY_PAGE="copy_page",e.BTN_MOVE_UP_PAGE="move_up_page",e.BTN_MOVE_DOWN_PAGE="move_down_page",e.BTN_DELETE_PAGE="delete_page"}(i||(i={}));var S=n(43),w=n(81),k=function(){function e(t,n){c()(this,e),this.pageHeaderWrap=t,this.page=n,this.option=w.a.pageToolboxOption,this.makeElement(t)}return h()(e,[{key:"makeElement",value:function(t){var n=this.pageBtnWrap=document.createElement("div");return n.className=i.PAGE_BTN_WRAP,this.option.fillBackground&&n.appendChild(this.makeColorButtonWrapElement()),this.option.foldable&&(n.appendChild(e.createLine()),n.appendChild(this.makeFoldableWrapperElement())),t.appendChild(this.pageBtnWrap),n}},{key:"makeColorButtonWrapElement",value:function(){var e=this,t=document.createElement("div");t.className=i.COLOR_BTN_WRAP;var n=this.btnFillBackground=new E.a(function(t){e.btnFillBackground.updateUI({value:t}),v.a.dispatch(new y.c(e.page.pageIdx,t))},T.ToolsIcon.FORMAT_COLOR_FILL);return _.a.setGTMValue(n.wrap,"page_background_solid"),I.a.createTooltip(n.wrap,I.b.B,{description:"배경 색상"}),n.updateUI({value:"#ffffff"}),t.appendChild(n.wrap),t}},{key:"makeFoldableWrapperElement",value:function(){var e=this.makeFoldableElement();return this.option.addNewPage&&e.appendChild(this.makeAddNewPageButton()),this.option.copyPage&&e.appendChild(this.makeCopyPageButton()),this.option.moveUpPage&&e.appendChild(this.makeMovePageUpButton()),this.option.moveDownPage&&e.appendChild(this.makeMovePageDownButton()),this.option.deletePage&&e.appendChild(this.makeDeletePageButton()),e}},{key:"makeFoldableElement",value:function(){var e=this,t=this.foldableWrap=document.createElement("div");t.className=f.a.FOLDABLE;var n=Object(T.setToolsIcon)(t,T.ToolsIcon.DDDOT);return this.addEventListenerToButton(n,function(){v.a.instance.renderPageIdx=e.page.pageIdx,e.setBtnFold(!1)}),t}},{key:"makeAddNewPageButton",value:function(){var e=this,t=this.addPage=document.createElement("button");t.className=i.BTN_ADD_NEW_PAGE;var n=I.a.createTooltip(t,I.b.B,{description:S.a.TOOLS_POPUP_PAGE_ADD_NEW_PAGE});return Object(T.setToolsIcon)(t,T.ToolsIcon.ADD),this.addEventListenerToButton(t,function(){v.a.dispatch(new g.a(e.page.pageIdx+1)),n.hide()}),t}},{key:"makeCopyPageButton",value:function(){var e=this,t=this.copyPage=document.createElement("button");t.className=i.BTN_COPY_PAGE;var n=I.a.createTooltip(t,I.b.B,{description:S.a.TOOLS_POPUP_PAGE_COPY_PAGE});return Object(T.setToolsIcon)(t,T.ToolsIcon.COPY),this.addEventListenerToButton(t,function(){v.a.dispatch(new g.b(e.page.pageIdx+1)),n.hide()}),t}},{key:"makeMovePageUpButton",value:function(){var e=this,t=this.moveUpPage=document.createElement("button");t.className=i.BTN_MOVE_UP_PAGE;var n=I.a.createTooltip(t,I.b.B,{description:S.a.TOOLS_POPUP_PAGE_MOVE_UP_PAGE});return Object(T.setToolsIcon)(t,T.ToolsIcon.MOVE_DOWN),t.classList.add("rotate180"),this.addEventListenerToButton(t,function(){v.a.dispatch(new g.g(e.page.pageIdx)),n.hide()}),t}},{key:"makeMovePageDownButton",value:function(){var e=this,t=this.moveDownPage=document.createElement("button");t.className=i.BTN_MOVE_DOWN_PAGE;var n=I.a.createTooltip(t,I.b.B,{description:S.a.TOOLS_POPUP_PAGE_MOVE_DOWN_PAGE});return Object(T.setToolsIcon)(t,T.ToolsIcon.MOVE_DOWN),this.addEventListenerToButton(t,function(){v.a.dispatch(new g.d(e.page.pageIdx)),n.hide()}),t}},{key:"makeDeletePageButton",value:function(){var e=this,t=this.deletePage=document.createElement("button");t.className=i.BTN_DELETE_PAGE;var n=I.a.createTooltip(t,I.b.B,{description:S.a.TOOLS_POPUP_PAGE_DELETE_PAGE});return Object(T.setToolsIcon)(t,T.ToolsIcon.DELETE),this.addEventListenerToButton(t,function(t){v.a.dispatch(new g.i(e.page.pageIdx)),n.hide()}),t}},{key:"render",value:function(){var t=this;e.setButtonEnable(this.addPage,!0),e.setButtonEnable(this.copyPage,!0),e.setButtonEnable(this.btnFillBackground.wrap,!0),e.setButtonEnable(this.moveUpPage,0!==this.page.pageIdx),v.a.dispatch(new C.c(function(n,i){e.setButtonEnable(t.moveDownPage,t.page.pageIdx!==i.maxPageIdx),e.setButtonEnable(t.deletePage,1!==n.pages.length),t.btnFillBackground.updateUI({value:n.pages[t.page.pageIdx].background.color})}))}},{key:"addEventListenerToButton",value:function(e,t){e.addEventListener("click",function(e){e.stopPropagation(),$(document.body).trigger("click"),t(e)}),v.a.getEnv().browser.isMobile()||(e.addEventListener("mouseenter",function(){e.classList.add("hover")}),e.addEventListener("mouseleave",function(){e.classList.remove("hover")}))}},{key:"setBtnFold",value:function(e){v.a.dispatch(new C.c(function(t,n,i){var r=i.canvasRenderer.canvas;r&&(e?r.classList.remove("page_header_btn_show"):r.classList.add("page_header_btn_show"))}))}}],[{key:"setButtonEnable",value:function(e,t){e&&(t?e.classList.remove("disabled"):(e.classList.remove("hover"),e.classList.add("disabled")))}},{key:"createLine",value:function(){var e=document.createElement("div");return e.className="line",e}}]),e}();n.d(t,"a",function(){return R});var R=function(){function e(t){c()(this,e),p()(this,"globalCloseEventName","click.".concat(m.StringUtil.random())),p()(this,"titleEditMode",!1),p()(this,"_isSheetSizeSmall",!1),this.props=t,this.option=w.a.pageToolboxOption,this.page=t.page,this.parentElement=t.parentElement,this.pageTitle=t.title?t.title:this.page.title,this.makeElement(),this._pagePopup=new k(this.pageHeaderWrap,t.page)}var t;return h()(e,[{key:"pagePopup",get:function(){return this._pagePopup}},{key:"element",get:function(){return this._element}},{key:"pageHeaderWrap",get:function(){return this._pageHeaderWrap}},{key:"leftSideWrap",get:function(){return this._leftSideWrap}},{key:"pageTitleWrap",get:function(){return this._pageTitleWrap}},{key:"pageTitleElement",get:function(){return this._pageTitleElement}},{key:"pageTitle",get:function(){return this._pageTitle},set:function(e){if(this._pageTitle=e,this.pageTitleElement){var t=i.NO_TITLE;e?(this.pageTitleWrap.classList.remove(t),this.leftSideWrap.classList.remove(t)):(this.pageTitleWrap.classList.add(t),this.leftSideWrap.classList.add(t))}}},{key:"isSheetSizeSmall",get:function(){return this._isSheetSizeSmall},set:function(e){this._isSheetSizeSmall=e,e?this.leftSideWrap.classList.add(i.SHEET_SIZE_SMALL):this.leftSideWrap.classList.remove(i.SHEET_SIZE_SMALL)}}]),h()(e,[{key:"setReady",value:(t=s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)})},{key:"makeElement",value:function(){this._element=document.createElement("div"),this.element.className=i.PAGE_HEADER,this._pageHeaderWrap=document.createElement("div"),this.pageHeaderWrap.className=i.PAGE_HEADER_WRAP,this.element.appendChild(this.pageHeaderWrap),this.labelCurrentPageNumTop=document.createElement("div"),this.labelCurrentPageNumTop.className=i.CURRENT_PAGE_NUM_TOP_DIV,this.labelCurrentPageNumTop.innerText=this.getPageLabel(),this.pageLabelElement=document.createElement("div"),this.pageLabelElement.className=i.PAGE_LABEL_DIV,this.pageLabelElement.innerText=e.PAGE_LABEL_STRING,this._pageTitleElement=document.createElement("div"),this.pageTitleElement.innerText=this.pageTitle?this.pageTitle:"제목 입력",this.pageTitleElement.className=f.a.PAGE_TITLE,this._pageTitleWrap=document.createElement("div"),this.pageTitleWrap.className=f.a.PAGE_TITLE_WRAP,this.pageTitleWrap.appendChild(this.pageTitleElement),this._leftSideWrap=document.createElement("div"),this.leftSideWrap.classList.add(i.LEFT_SIDE_WRAP),this.leftSideWrap.appendChild(this.labelCurrentPageNumTop),this.option.pageTitleEditable&&(this.leftSideWrap.appendChild(this.pageLabelElement),this.leftSideWrap.appendChild(this.pageTitleWrap)),this._pageHeaderWrap.appendChild(this.leftSideWrap),this.parentElement.innerHTML="",this.parentElement.appendChild(this.element),this.addEventListeners()}},{key:"addEventListeners",value:function(){var e=this;$(this.pageTitleElement).on("mousedown touchstart",function(e){e.stopPropagation()}).on("click",function(t){v.a.isCropMode()||(t.stopPropagation(),"true"!==e.pageTitleElement.contentEditable&&(v.a.instance.renderPageIdx=e.page.pageIdx,e.pageTitleElement.contentEditable="true",e.pageTitleElement.classList.add(f.a.CONTENTEDITABLE),e.pageTitleElement.focus(),document.execCommand("selectAll"),$(document.body).on(e.globalCloseEventName,function(){return e.pageTitleElement.blur()})))}).on("keydown keyup",function(t){t.stopPropagation(),13!==t.keyCode&&27!==t.keyCode||e.pageTitleElement.blur(),e.pageTitleElement.innerText.length>=255&&(e.pageTitleElement.innerText=e.pageTitleElement.innerText.substr(0,255))}).on("focus",function(t){t.stopPropagation(),e.titleEditMode=!0,e.pageTitleElement.parentElement.classList.add(f.a.ACTIVE),document.execCommand("selectAll")}).on("blur",function(){e.pageTitleElement.contentEditable="false",e.pageTitleElement.classList.remove(f.a.CONTENTEDITABLE),e.pageTitleElement.scrollLeft=0,$(document.body).off(e.globalCloseEventName),e.blurHandler()}),$(this.element).on("mousedown touchstart",function(t){t.stopPropagation(),e.mouseDownTarget=t.target}).on("mouseup touchend",function(t){e.mouseDownTarget===t.target&&t.stopPropagation(),e.mouseDownTarget=null}).on("mousemove touchmove",function(t){e.mouseDownTarget===t.target&&t.stopPropagation()})}},{key:"blurHandler",value:function(){this.pageTitle=this.pageTitleElement.innerText.trim(),this.pageTitle.length||(this.pageTitleElement.innerText="제목 입력"),this.pageTitleElement.parentElement.classList.remove(f.a.ACTIVE),v.a.dispatch(new g.j(this.page.pageIdx,this.pageTitle)),this.titleEditMode=!1}},{key:"show",value:function(){this.pageHeaderWrap.classList.remove(f.a.HIDDEN)}},{key:"hide",value:function(){this.pageHeaderWrap.classList.add(f.a.HIDDEN)}},{key:"render",value:function(){v.a.isCropMode()||v.a.isSpoidMode()?this.hide():this.show(),this.pagePopup.render(),this.updateSizeBreakPoints();var e=this.getRenderStatus();if(this.isChangeContentsStatus(e.contents)){if(this.titleEditMode)return void this.blurHandler();this.renderContents()}this.lastRenderStatus=e,this.mouseDownTarget=null}},{key:"renderContents",value:function(){this.pageTitleElement.innerText=this.page.title?this.page.title:e.INPUT_TEXT_STRING,this.labelCurrentPageNumTop.innerText=this.getPageLabel()}},{key:"getPageLabel",value:function(){return this.option.pageTitleEditable||!this.pageTitle?"".concat(this.page.pageIdx+1):this.pageTitle}},{key:"updateSizeBreakPoints",value:function(){this.isHidden(this.element)||(this.element.offsetWidth>=e.SHEET_SIZE_BREAKPOINT?this.isSheetSizeSmall=!1:this.isSheetSizeSmall=!0,this.isOverflownHorizontally(this.pageHeaderWrap)?this.pageHeaderWrap.classList.add(i.OVER_FLOWN):this.pageHeaderWrap.classList.remove(i.OVER_FLOWN))}},{key:"isOverflownHorizontally",value:function(e){var t=0,n=!0,i=!1,r=void 0;try{for(var a,o=e.children[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;s instanceof HTMLElement&&(t+=s.offsetWidth)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return t>this.pageHeaderWrap.offsetWidth}},{key:"isHidden",value:function(e){return null===e.offsetParent}},{key:"setBtnFold",value:function(e){this.pagePopup.setBtnFold(e),this.updateSizeBreakPoints()}},{key:"getRenderStatus",value:function(e){return{contents:{pageIdx:this.page.pageIdx,pageTitle:this.page.title},position:null}}},{key:"isChangeContentsStatus",value:function(e){return null==this.lastRenderStatus||null==this.lastRenderStatus.contents||this.lastRenderStatus.contents.pageIdx!==e.pageIdx||e.pageTitle!==this.pageTitle}},{key:"isChangePositionStatus",value:function(e){return!1}}]),e}();p()(R,"SHEET_SIZE_BREAKPOINT",360),p()(R,"PAGE_LABEL_STRING","페이지"),p()(R,"INPUT_TEXT_STRING","제목 입력")},function(e,t,n){"use strict";var i=n(35),r=n.n(i),a=n(36),o=n.n(a),s=function(){function e(){r()(this,e)}return o()(e,[{key:"makeXml",value:function(e,t){t.attr("is_available",e.isAvailable).attr("sewing_length",e.sewingLength).attr("metalring_length",e.metalringLength).attr("stick_length",e.stickLength).attr("stick_surround",e.stickSurround)}}]),e}(),l=function(){function e(){r()(this,e)}return o()(e,[{key:"makeXml",value:function(e,t){t.attr("name",e.name).attr("width",e.width).attr("height",e.height).attr("minDpi",e.mindpi).attr("output_type",e.outputType).attr("print_size",e.printSize).attr("border_type",e.borderType).attr("paper_type",e.paperType).attr("left_margin",e.leftMargin).attr("top_margin",e.topMargin).attr("right_margin",e.rightMargin).attr("bottom_margin",e.bottomMargin).attr("post_proc_type",e.postProcType).attr("center_margin",e.centerMargin).attr("margin_type",e.marginType).attr("is_dynamic_width",e.isDynamicWidth).attr("is_custom_size",e.isCustomSize).attr("custom_width",e.customWidth).attr("custom_height",e.customHeight).attr("extra_data",e.extraData).attr("filter_data",e.filterData).attr("minimum_font_height",e.minimumFontHeight),(new s).makeXml(e.finishType,t.elem("FINISH-TYPE").elem("FINISH-TYPE"))}}]),e}();n.d(t,"a",function(){return c});var c=function(){function e(){r()(this,e)}return o()(e,[{key:"makeXml",value:function(e,t){t.attr("Version",e.version).attr("ProgramVersion",e.programVersion).attr("CopyCommIdx",e.copyCommIdx).elem("COMMODITY").text(e.commodity.toString()).close().elem("OUTPUT").text(e.output.toString()).close().elem("PARAM").text(e.param.toString()).close(),(new l).makeXml(e.output,t.elem("OUTPUT2"))}}]),e}()},function(e,t,n){"use strict";var i=n(35),r=n.n(i),a=n(36),o=n.n(a),s=n(253),l=n(104),c=n(125),u=n(105),h=n(49),d=n(74),p=n(37),v=n.n(p),f=function(){function e(){r()(this,e),v()(this,"m11",1),v()(this,"m12",0),v()(this,"m13",0),v()(this,"m21",0),v()(this,"m22",1),v()(this,"m23",0),v()(this,"m31",0),v()(this,"m32",0),v()(this,"m33",1)}return o()(e,[{key:"multiply",value:function(e){this.m11=this.m11*e.m11+this.m12*e.m21+this.m13*e.m31,this.m12=this.m11*e.m12+this.m12*e.m22+this.m13*e.m32,this.m21=this.m21*e.m11+this.m22*e.m21+this.m23*e.m31,this.m22=this.m21*e.m12+this.m22*e.m22+this.m23*e.m32,this.m31=this.m31*e.m11+this.m32*e.m21+this.m33*e.m31,this.m32=this.m31*e.m12+this.m32*e.m22+this.m33*e.m32}},{key:"scale",value:function(e,t){this.multiply(function(e,t){var n=new f;return n.m11=e,n.m22=t,n}(e,t))}},{key:"translate",value:function(e,t){this.multiply(function(e,t){var n=new f;return n.m31=e,n.m32=t,n}(e,t))}},{key:"rotate",value:function(e){var t,n,i,r;this.multiply((t=e,n=new f,i=Math.sin(t),r=Math.cos(t),n.m11=r,n.m12=i,n.m21=-i,n.m22=r,n))}},{key:"getPoint",value:function(e,t){return{x:this.m11*e+this.m21*t+this.m31,y:this.m12*e+this.m22*t+this.m32}}}]),e}();n.d(t,"a",function(){return g});var g=function(){function e(t,n,i){r()(this,e),this.renderer=t,this.props=n,this.svg=i,this.filters=new Map,this.chars=new Map,this.id=Math.round(4294967295*Math.random()).toString(16)}return o()(e,[{key:"setProps",value:function(e){this.props=e}},{key:"drawDefault",value:function(e,t){this.updateTo(this.svg,e,t,0,0,0,0,1,!1,!1,!1,!0)}},{key:"update",value:function(e,t,n,i,r,a){var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6];this.updateTo(this.svg,e,t,n,i,r,a,1,o)}},{key:"updateTo",value:function(e,t,n,i,r,a,o){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,l=arguments.length>8&&void 0!==arguments[8]&&arguments[8],c=arguments.length>9&&void 0!==arguments[9]&&arguments[9],u=arguments.length>10&&void 0!==arguments[10]&&arguments[10],h=arguments.length>11&&void 0!==arguments[11]&&arguments[11];void 0!==t&&void 0!==n&&void 0!==i&&void 0!==r&&void 0!==a&&void 0!==o&&(e.setAttributeNS(null,"viewBox","".concat(Math.round(i-a)," ").concat(Math.round(r-o)," ")+"".concat(Math.round(t)," ").concat(Math.round(n))),e.setAttribute("width",Math.round(t)+"px"),e.setAttribute("height",Math.round(n)+"px")),l||(e.style.transform="translate(".concat(Math.round(i-a),"px,").concat(Math.round(r-o),"px)")),this.updateSVG(e,a,o,t,n,s,c,u,h)}},{key:"getShadowFilterID",value:function(e,t,n,i,r,a,o,s){var l="".concat(e.distance,"_").concat(e.angle,"-").concat(e.spread,"_").concat(t,"-").concat(e.color,"_").concat(e.alpha);if(this.filters.has(l))return this.filters.get(l);var c=e.distance/200*t/1,u=h.b.getPointByDistanceAngle(c/n,e.angle-90-this.props.getRotate()),d=e.spread/10/1*1.625/20*t/4.5/n,p="sha_".concat(this.id,"_").concat(Math.round(4294967295*Math.random()).toString(16)),v=document.createElementNS("http://www.w3.org/2000/svg","filter");v.id=p,v.setAttributeNS(null,"x","-500%"),v.setAttributeNS(null,"y","-500%"),v.setAttributeNS(null,"width","1100%"),v.setAttributeNS(null,"height","1100%");var f=document.createElementNS("http://www.w3.org/2000/svg","feOffset");f.setAttributeNS(null,"result","offOut"),f.setAttributeNS(null,"in","SourceAlpha"),f.setAttributeNS(null,"dx",u.cx.toString()),f.setAttributeNS(null,"dy",u.cy.toString()),v.appendChild(f);var g=document.createElementNS("http://www.w3.org/2000/svg","feGaussianBlur");g.setAttributeNS(null,"result","blurOut"),g.setAttributeNS(null,"in","offOut"),g.setAttributeNS(null,"stdDeviation",d.toString()),v.appendChild(g);var m=document.createElementNS("http://www.w3.org/2000/svg","feFlood");m.setAttributeNS(null,"result","colorOut"),m.setAttributeNS(null,"flood-color",e.color),m.setAttributeNS(null,"flood-opacity",(e.alpha/100).toString()),v.appendChild(m);var E=document.createElementNS("http://www.w3.org/2000/svg","feComposite");return E.setAttributeNS(null,"result","compOut"),E.setAttributeNS(null,"in","colorOut"),E.setAttributeNS(null,"in2","blurOut"),E.setAttributeNS(null,"operator","in"),v.appendChild(E),this.filters.set(l,p),i.appendChild(v),p}},{key:"getGradientID",value:function(e,t,n){var i="grad_".concat(e.x1,"-").concat(e.x2,"_").concat(e.y1,"-").concat(e.y2,"_").concat(t);if(this.filters.has(i))return this.filters.get(i);var r=Object.assign({},e);r.x1+=t,r.x2+=t;var a=-1*h.b.getRadianByDegree(this.props.getGradientAngle()),o={cx:r.x1,cy:r.y1},s={cx:r.x2,cy:r.y1},l={cx:r.x1,cy:r.y2},c={cx:r.x2,cy:r.y2},u=h.b.centerPoint(o,c);o=h.b.transformation(o,u,-a),s=h.b.transformation(s,u,-a),l=h.b.transformation(l,u,-a),c=h.b.transformation(c,u,-a);var d=Math.min(o.cx,l.cx,s.cx,c.cx),p=Math.min(o.cy,l.cy,s.cy,c.cy),v=Math.max(o.cx,l.cx,s.cx,c.cx),f=Math.max(o.cy,l.cy,s.cy,c.cy);o={cx:d,cy:p},s={cx:v,cy:p},l={cx:d,cy:f},c={cx:v,cy:f};var g=h.b.centerPoint(o,l),m=h.b.centerPoint(s,c);g=h.b.transformation(g,u,a),m=h.b.transformation(m,u,a);var E="grad_".concat(this.id,"_").concat(Math.round(4294967295*Math.random()).toString(16)),y=document.createElementNS("http://www.w3.org/2000/svg","linearGradient");if(y.id=E,y.setAttributeNS(null,"x1","".concat(g.cx)),y.setAttributeNS(null,"x2","".concat(m.cx)),y.setAttributeNS(null,"y1","".concat(g.cy)),y.setAttributeNS(null,"y2","".concat(m.cy)),y.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),255===this.props.getGradientAlpha1()){var T=document.createElementNS("http://www.w3.org/2000/svg","stop");T.setAttributeNS(null,"offset","0%"),T.setAttributeNS(null,"style","stop-color:".concat(this.props.getGradientColor1(),";stop-opacity:1")),y.appendChild(T)}if(255===this.props.getGradientAlpha2()&&!this.props.isGradientNewFormat()){var _=document.createElementNS("http://www.w3.org/2000/svg","stop");_.setAttributeNS(null,"offset","33%"),_.setAttributeNS(null,"style","stop-color:".concat(this.props.getGradientColor2(),";stop-opacity:1")),y.appendChild(_)}if(255===this.props.getGradientAlpha3()&&!this.props.isGradientNewFormat()){var I=document.createElementNS("http://www.w3.org/2000/svg","stop");I.setAttributeNS(null,"offset","66%"),I.setAttributeNS(null,"style","stop-color:".concat(this.props.getGradientColor3(),";stop-opacity:1")),y.appendChild(I)}if(255===this.props.getGradientAlpha4()){var C=document.createElementNS("http://www.w3.org/2000/svg","stop");C.setAttributeNS(null,"offset","100%"),C.setAttributeNS(null,"style","stop-color:".concat(this.props.getGradientColor4(),";stop-opacity:1")),y.appendChild(C)}return this.filters.set(i,E),n.appendChild(y),E}},{key:"updateSVG",value:function(e,t,n,i,r,a,o,s,h){var p,v,f,g,m,E,y=this;this.chars.clear(),this.filters.clear();for(var T="".concat(this.id,"_f"),_="".concat(this.id,"_s"),I="".concat(this.id,"_o"),C="".concat(this.id,"_def"),S="".concat(this.id,"_bg"),w=0;w<e.children.length;w++){var k=e.children.item(w);k.id===T?v=k:k.id===_?g=k:k.id===I?f=k:k.id===C?p=k:k.id===S&&(E=k)}v||(v=document.createElementNS("http://www.w3.org/2000/svg","g")),v.id=T;var R=[];if(v)for(var L=0;L<v.children.length;L++)R.push(v.children[L]);var O=[];if(g)for(var A=0;A<g.children.length;A++)O.push(g.children[A]);var b=[];if(f)for(var P=0;P<f.children.length;P++)b.push(f.children[P]);if(p)for(;p.lastChild;)p.removeChild(p.lastChild);else(p=document.createElementNS("http://www.w3.org/2000/svg","defs")).id=C;this.renderer.foreach(this.props,1,null,[function(e,t,n,i,r,a,s,d){var p;switch(t.filltype){case l.a.COLOR:p=t.color;break;case l.a.GRADATION:p="url(#".concat(m,")");break;case l.a.MASK:}var f=c.a.instance.get(t.styles,n).unitsPerEm,g=t.size*u.b/f,E=i,T=r;void 0!==d.angle&&(E=d.beforex,T=d.beforey),o&&(E=Math.round(E),T=Math.round(T));var _,I=R[0];I&&(_=I.children[0]);var C=h?function(){return u.a}:function(e){return e},S=y.getCharSVG(t,n,g,E,T,d,a,s,C,_);if(S){var w=S.element,k=S.fakebold,L="".concat(a,"_").concat(s);y.chars.set(L,{element:w,fakebold:k});var O=I;R.splice(0,1),O||(O=document.createElementNS("http://www.w3.org/2000/svg","g"),v.appendChild(O),O.appendChild(w)),O.id="g_".concat(y.id,"_f_").concat(a,"_").concat(s);var A=k?Math.round(t.size/36*100)/100:0;if(O.setAttributeNS(null,"stroke-width",A.toString()),O.setAttributeNS(null,"stroke-linejoin","miter"),O.setAttributeNS(null,"fill",p),O.setAttributeNS(null,"stroke",p),void 0!==d.angle){var b=180*d.angle/Math.PI;O.setAttributeNS(null,"transform","translate(".concat(i,",").concat(r,") rotate(").concat(b,") translate(").concat(-d.trans,",0)")+" translate(".concat(-d.beforex,",").concat(-d.beforey,")"))}else O.removeAttributeNS(null,"transform")}},function(e,t,n,i,r,a,o,l){var c=y.chars.get("".concat(a,"_").concat(o));if(t.outline.active&&t.outline.size>0&&c){var h,p=c.element,v=c.fakebold,g=b[0];f||((f=document.createElementNS("http://www.w3.org/2000/svg","g")).id=I),s?(h=p.cloneNode(!0),f.appendChild(h)):(g?(b.splice(0,1),h=g):(h=document.createElementNS("http://www.w3.org/2000/svg","use"),f.appendChild(h)),h.setAttributeNS(d.a.XLINK,"xlink:href","#".concat(p.id)));var m=t.outline.size/200*e.maxCharWidth;if(v&&(m+=t.size*u.b/36),h.setAttributeNS(null,"stroke-width","".concat(Math.round(m))),h.setAttributeNS(null,"stroke","".concat(t.outline.color)),h.setAttributeNS(null,"stroke-linejoin","round"),h.setAttributeNS(null,"fill-rule","nonzero"),h.setAttributeNS(null,"stroke-linecap","round"),void 0!==l.angle){var E=180*l.angle/Math.PI;h.setAttributeNS(null,"transform","translate(".concat(i,",").concat(r,") rotate(").concat(E,") translate(").concat(-l.trans,",0)")+" translate(".concat(-l.beforex,",").concat(-l.beforey,")"))}else h.removeAttributeNS(null,"transform")}},function(e,a,o,l,c,h,v,f){var m=y.chars.get("".concat(h,"_").concat(v));if(a.shadow.active&&(0!==a.shadow.distance||0!==a.shadow.spread)&&m){var E,T,I=O[0];I?(E=I,O.splice(0,1),T=E.lastChild):(g||((g=document.createElementNS("http://www.w3.org/2000/svg","g")).id=_),E=document.createElementNS("http://www.w3.org/2000/svg","g"),g.appendChild(E));var C=m.element,S=m.fakebold;s?(T=C.cloneNode(!0),E.appendChild(T)):(T||(T=document.createElementNS("http://www.w3.org/2000/svg","use"),E.appendChild(T)),T.setAttributeNS(d.a.XLINK,"xlink:href","#".concat(C.id)));var w=0;if(a.outline.active&&a.outline.size>0&&(w=a.outline.size/200*e.maxCharWidth),S&&(w+=a.size*u.b/36),w=Math.round(100*w)/100,T.setAttributeNS(null,"stroke-width","".concat(w)),T.setAttributeNS(null,"stroke","".concat(a.shadow.color)),T.setAttributeNS(null,"fill","".concat(a.shadow.color)),T.setAttributeNS(null,"stroke-linejoin","round"),void 0!==f.angle){var k=180*f.angle/Math.PI;T.setAttributeNS(null,"transform","translate(".concat(l,",").concat(c,") rotate(").concat(k,") translate(").concat(-f.trans,",0)")+" translate(".concat(-f.beforex,",").concat(-f.beforey,")"))}else T.removeAttributeNS(null,"transform");E.setAttributeNS(null,"filter","url(#".concat(y.getShadowFilterID(a.shadow,e.maxCharWidth,1,p,t,n,i,r),")"))}}],[function(e,t,n,i){y.props.isActiveGradient()&&(m=y.getGradientID(n,e.startX[i],p))},null,null],h);for(var N=0,x=R;N<x.length;N++){var M=x[N];M.parentElement.removeChild(M)}for(var D=0,B=O;D<B.length;D++){var U=B[D];U.parentElement.removeChild(U)}for(var G=0,F=b;G<F.length;G++){var H=F[G];H.parentElement.removeChild(H)}p.parentNode!==e&&e.appendChild(p);var V=this.props.getBackgroundColor();9===V.length&&(V=V.substr(1,8)),"00000000"!==V?(E||((E=document.createElementNS("http://www.w3.org/2000/svg","rect")).id=S,e.appendChild(E)),E.setAttributeNS(null,"fill",this.props.getBackgroundColor()),E.setAttributeNS(null,"x","0"),E.setAttributeNS(null,"y","0"),E.setAttributeNS(null,"width","".concat(this.props.getWidth()*a)),E.setAttributeNS(null,"height","".concat(this.props.getHeight()*a))):E&&(e.removeChild(E),E=null),g&&(g.setAttributeNS(null,"transform","scale(".concat((this.props.isActiveCurve()?1:this.props.getFontDetailScaleXAcc()/100)*a,",").concat(a,")")),g.parentNode!==e&&e.appendChild(g)),f&&(f.setAttributeNS(null,"transform","scale(".concat((this.props.isActiveCurve()?1:this.props.getFontDetailScaleXAcc()/100)*a,",").concat(a,")")),f.parentNode!==e&&e.appendChild(f)),v.setAttributeNS(null,"transform","scale(".concat((this.props.isActiveCurve()?1:this.props.getFontDetailScaleXAcc()/100)*a,",").concat(a,")")),v.parentNode!==e&&e.appendChild(v),255!==this.props.getOpacity()?e.setAttributeNS(null,"opacity",(Math.round(100*this.props.getOpacity())/25500).toString()):e.removeAttributeNS(null,"opacity");var W=[];p&&W.push(p),E&&W.push(E),g&&W.push(g),f&&W.push(f),v&&W.push(v);for(var z=W.length-1;z>=0;z--){var X=W[z],Y=null;z<W.length-1&&(Y=W[z+1]),e.insertBefore(X,Y)}}},{key:"getCharSVG",value:function(e,t,n,i,r,a,o,l,h,d){var p;p=c.a.instance.isAvailableChar(e.styles,t)?h(e.styles.family):u.a;var v,g,m=c.a.instance.getAvailableStyle(p),E=!1,y=!1;(e.styles.bold||e.styles.italic)&&(e.styles.bold&&e.styles.italic?(m.italic||(y=!0),m.bold||(E=!0)):e.styles.bold?m.bold||(E=!0):e.styles.italic&&(m.italic||(y=!0)));for(var T=function(e){return Math.round(100*e)/100},_="g_".concat(this.id,"_txt"),I="g_".concat(this.id,"_dec"),C="".concat(_,"_").concat(o,"_").concat(l),S="".concat(I,"_").concat(o,"_").concat(l),w=d||document.createElementNS("http://www.w3.org/2000/svg","g"),k=0;k<w.children.length;k++){var R=w.children[k];-1!==R.id.indexOf(_)?v=R:-1!==R.id.indexOf(I)&&(g=R)}var L=c.a.instance.get({family:p,bold:e.styles.bold,italic:e.styles.italic},t);if(" "!==t&&L.has(t)?(v||(v=document.createElementNS("http://www.w3.org/2000/svg","text"),w.appendChild(v)),v.id=C,v.textContent=t,v.setAttributeNS(null,"x","".concat(i)),v.setAttributeNS(null,"y","".concat(r)),v.style.fontFamily="".concat(L.unitsPerEm*n),v.style.fontFamily=Object(u.c)(p),v.setAttributeNS(null,"font-size","".concat(L.unitsPerEm*n)),v.setAttributeNS(null,"font-family","".concat(Object(u.c)(p))),y?v.setAttributeNS(null,"transform","matrix(".concat(function(e,t){var n=new f,i=new f;return n.translate(-e,-t),i.m21=-s.a,n.multiply(i),n.translate(e,t),"".concat(n.m11," ").concat(n.m12," ").concat(n.m21," ").concat(n.m22," ").concat(n.m31," ").concat(n.m32)}(i,r),")")):e.styles.italic?(v.setAttributeNS(null,"font-style","italic"),v.style.fontStyle="italic"):(v.style.fontStyle="",v.removeAttributeNS(null,"font-style"),v.removeAttributeNS(null,"transform")),E||(e.styles.bold?(v.style.fontWeight="bold",v.setAttributeNS(null,"font-weight","bold")):(v.style.fontWeight="",v.removeAttributeNS(null,"font-weight")))):v&&w.removeChild(v),e.styles.strikeout||e.styles.underline){var O="",A=a.advance;if(e.styles.strikeout){var b=-a.ascend/3;O+="M".concat(T(i)," ").concat(b+r," L").concat(T(i+A)," ").concat(b+r," ")}if(e.styles.underline){var P=-a.descend/2;O+="M".concat(T(i)," ").concat(P+r," L").concat(T(i+A)," ").concat(P+r," ")}g||(g=document.createElementNS("http://www.w3.org/2000/svg","path"),w.appendChild(g)),g.id=S,g.setAttributeNS(null,"d",O),g.setAttributeNS(null,"stroke-width",Math.round(e.size/15).toString())}else g&&w.removeChild(g);if(w.hasChildNodes()){var N="g_".concat(this.id,"_").concat(o,"_").concat(l);return w.id=N,{element:w,fakebold:E}}return null}}]),e}()},function(e,t,n){"use strict";var i=n(0),r=n.n(i),a=n(1),o=n.n(a),s=n(35),l=n.n(s),c=n(36),u=n.n(c),h=n(37),d=n.n(h),p=n(84),v=n(12),f=n(57),g=n(67),m=n(364),E=n(41),y=function(){function e(){l()(this,e),d()(this,"alertList",new Map),d()(this,"isSelectInContent",!1),d()(this,"changeRenderFlag",!1),this.alertCount=0,this.lowResCount=0,this.warningCount=0}return u()(e,[{key:"setInspectionResult",value:function(e){this.inspectionResult=e}},{key:"getWrapper",value:function(){return this.alertListWrapper||this.makeWrapper(),this.alertListWrapper}},{key:"makeWrapper",value:function(){this.alertListWrapper=p.a.makeDiv(m.a.BODY_LIST_WRAPPER),this.warningList=p.a.makeDiv("warning_list"),this.cautionList=p.a.makeDiv("caution_list"),this.recommendList=p.a.makeDiv("recommend_list"),this.alertListWrapper.appendChild(this.warningList),this.alertListWrapper.appendChild(this.cautionList),this.alertListWrapper.appendChild(this.recommendList)}},{key:"initAlertList",value:function(){var e=this;this.clearList(),this.updateCount(),this.inspectionResult.getFinalConfirmList().itemList.forEach(function(t,n){e.addItem(n,t)}),this.changeRenderFlag=!0}},{key:"clearList",value:function(){this.alertCount=0,this.lowResCount=0,this.warningCount=0,this.alertList.clear(),p.a.removeAllChild(this.warningList),p.a.removeAllChild(this.cautionList),p.a.removeAllChild(this.recommendList)}},{key:"getSelectedLayer",value:function(e){return e.querySelector(".".concat(E.a.SELECTED))?e.querySelector(".".concat(E.a.SELECTED)):null}},{key:"getFirstSelectedLayer",value:function(){return this.getSelectedLayer(this.warningList)?this.getSelectedLayer(this.warningList):this.getSelectedLayer(this.cautionList)?this.getSelectedLayer(this.cautionList):this.getSelectedLayer(this.recommendList)?this.getSelectedLayer(this.recommendList):null}},{key:"updateCount",value:function(){if(this.inspectionResult){var e=this.inspectionResult.getFinalConfirmList();this.alertCount=e.totalCount,this.lowResCount=e.lowResCount,this.warningCount=e.warningCount}else this.alertCount=0,this.lowResCount=0,this.warningCount=0}},{key:"render",value:function(e,t){this.changeRenderFlag=!1,t&&t===g.e.NONE?this.deleteItem(e):this.alertList.get(e)?this.updateItem(e,t):this.addItem(e,t)}},{key:"deleteItem",value:function(e){var t=this.alertList.get(e);t&&(this.removeAlertListElement(t.element,t.level),this.alertList.delete(e),this.changeRenderFlag=!0)}},{key:"updateItem",value:function(e,t){var n=this.alertList.get(e);if(n){if(t){var i=p.a.getHighLevel(n.level,t);n.level!==i&&(this.removeAlertListElement(n.element,n.level),this.addItem(e,i))}var r=this.callbackReference.isSelected(e);n.isSelected!==r&&(n.isSelected=r,r?(n.element.classList.add(E.a.SELECTED),this.changeRenderFlag=!0):n.element.classList.remove(E.a.SELECTED))}}},{key:"includeWarning",value:function(){return this.alertCount>0&&this.warningCount>0}},{key:"includeCaution",value:function(){return this.alertCount>0&&0===this.warningCount}},{key:"includeAlert",value:function(){return this.alertCount>0}},{key:"includeLowRes",value:function(){return this.lowResCount>0}},{key:"setCallbackReference",value:function(e){this.callbackReference=e}},{key:"addItem",value:function(e,t){var n=this;if(t&&t!==g.e.NONE){var i=p.a.makeDiv(m.a.ACCORDION_LIST_ITEM),a=this.callbackReference.getItemThumbElement(e);i.appendChild(a);var s=this.callbackReference.getItemTitle(e);i.appendChild(p.a.makeHTMLParagraph(s)),Object(v.setToolsIcon)(i,v.ToolsIcon.ERROR).addEventListener("click",function(t){t.stopPropagation(),t.preventDefault(),n.callbackReference.showAlertPopup(e)});var l=this.callbackReference.isSelected(e);l&&i.classList.add(E.a.SELECTED);var c={element:i,level:t,isSelected:l};this.alertList.set(e,c),i.addEventListener("click",o()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n.isSelectInContent=!0,t.prev=1,t.next=4,n.callbackReference.selectItemByIdList([e]);case 4:t.next=10;break;case 6:t.prev=6,t.t0=t.catch(1),console.error(t.t0),n.initAlertList();case 10:case"end":return t.stop()}},t,null,[[1,6]])}))),this.addAlertListElement(i,t)}}},{key:"addAlertListElement",value:function(e,t){t===g.e.RECOMMEND?this.recommendList.appendChild(e):t===g.e.CAUTION?this.cautionList.appendChild(e):t===g.e.WARNING&&this.warningList.appendChild(e),this.changeRenderFlag=!0}},{key:"removeAlertListElement",value:function(e,t){t===g.e.RECOMMEND?this.recommendList.removeChild(e):t===g.e.CAUTION?this.cautionList.removeChild(e):t===g.e.WARNING&&this.warningList.removeChild(e)}}]),e}(),T=n(290),_=n(81);n.d(t,"a",function(){return I});var I=function(){function e(t){l()(this,e),d()(this,"confirmType",T.a.NEW_CART),this.listener=t,this.ckListConfirm=p.a.makeCheckbox(),this.ckTypoCheck=p.a.makeCheckbox(),this.makeElement()}return u()(e,[{key:"setActionSet",value:function(e){this.actionSet=e}},{key:"setInspectionResult",value:function(e){this.alertList.setInspectionResult(e)}},{key:"clearList",value:function(){this.alertList.clearList()}},{key:"render",value:function(e,t){this.isShow()&&(e?(this.alertList.render(e,t),this.alertList.updateCount()):this.alertList.initAlertList(),this.alertList.changeRenderFlag&&(this.updateBody(),this.alertList.isSelectInContent||this.moveScrollToSelectedLayerByCenter(),this.alertList.isSelectInContent=!1,this.setActiveBtnSave()))}},{key:"toggleShow",value:function(e){e&&(this.confirmType=e),this.isShow()?this.hide():this.show(),this.listener&&this.listener()}},{key:"show",value:function(e){e&&(this.confirmType=e),this.isShow()||(this.wrapper.classList.add(E.a.ACTIVE),this.listener&&this.listener()),this.updateFooter(),this.render()}},{key:"hide",value:function(){this.isShow()&&(this.wrapper.classList.remove(E.a.ACTIVE),this.listener&&this.listener())}},{key:"isShow",value:function(){return this.wrapper.classList.contains(E.a.ACTIVE)}},{key:"updateFooter",value:function(){this.ckListConfirm.checked=!1,this.ckTypoCheck.checked=!1,this.setActiveBtnSave()}},{key:"setActiveBtnSave",value:function(){this.isCheckedAllConfirm()?(this.btnSave.classList.add(E.a.ACTIVE),this.footer.classList.remove("save_button_disabled")):this.btnSave.classList.remove(E.a.ACTIVE)}},{key:"checkIncludePhotoItem",value:function(){var e=!1;return this.actionSet&&(e=this.actionSet.checkIncludePhotoItem()),e}},{key:"updateBody",value:function(){this.alertList.includeLowRes()||!this.checkIncludePhotoItem()?this.wrapper.classList.remove("show_good_resolution"):this.wrapper.classList.add("show_good_resolution"),this.alertList.includeWarning()?(this.wrapper.classList.add("include_warning"),this.wrapper.classList.remove("include_caution")):this.alertList.includeCaution()?(this.wrapper.classList.add("include_caution"),this.wrapper.classList.remove("include_warning")):(this.wrapper.classList.remove("include_warning"),this.wrapper.classList.remove("include_caution"))}},{key:"setCallbackReference",value:function(e){this.alertList.setCallbackReference(e)}},{key:"getElement",value:function(){return this.wrapper}},{key:"makeElement",value:function(){this.wrapper=p.a.makeDiv("printout_final_confirm_wrapper"),this.alertList=new y,this.makeHeader(),this.makeBody(),this.makeFooter()}},{key:"makeHeader",value:function(){var e=this,t=p.a.makeDiv("header");t.appendChild(p.a.makeTitle("최종 확인")),Object(v.setToolsIcon)(t,v.ToolsIcon.CLOSE).addEventListener("click",function(t){t.stopPropagation(),e.hide()}),this.wrapper.appendChild(t)}},{key:"makeBody",value:function(){var e=this.body=p.a.makeDiv("body"),t=this.scrollElement=new f.a(!1,!0,"100%"),n=p.a.makeDiv("contents_wrapper"),i=p.a.makeInfoBox("default","실제 출력물은 모니터의 색감과 큰 차이가 발생할 수 있습니다."),r=p.a.makeInfoBox("warning_resolution","하단의 요소 목록을 모두 확인해주세요.\n빨간색으로 표시된 경고가 있을 경우 주문이 불가능하므로 반드시 수정해주세요!"),a=p.a.makeInfoBox("caution_resolution","하단의 요소 목록을 모두 확인해주세요.\n제작 진행 중 표시된 경고 내용 또는 고객변심으로 인한 주문 취소 및 수정은 불가능합니다."),o=p.a.makeInfoBox("good_resolution","모든 이미지의 해상도 상태가 좋아요!");n.appendChild(i),n.appendChild(r),n.appendChild(a),n.appendChild(o),n.appendChild(this.alertList.getWrapper()),e.appendChild(t.render(n)),this.wrapper.appendChild(e)}},{key:"moveScrollToSelectedLayerByCenter",value:function(){var e=this.alertList.getFirstSelectedLayer();if(e){var t=(this.scrollElement.contents.offsetHeight-e.offsetHeight)/2;this.scrollElement.setScrollY(e.offsetTop-t)}}},{key:"makeFooter",value:function(){var e=this,t=this.footer=p.a.makeDiv("footer"),n=p.a.makeCheckWrapper(this.ckListConfirm,"위의 요소 목록을 모두 확인하였습니다.",function(){return e.setActiveBtnSave()});n.classList.add("alert_list_confirm"),t.appendChild(n);var i=p.a.makeCheckWrapper(this.ckTypoCheck,"모든 페이지의 오탈자를 체크하였습니다.",function(){return e.setActiveBtnSave()});t.appendChild(i);var a=p.a.makeDiv("recommend_checking");a.innerText="위의 사항을 모두 체크해주세요.",t.appendChild(a);var s=this.btnSave=p.a.makeButton("save_button");s.innerText=_.a.printoutOption.completeButtonLabel;var l=function(){return T.b.show(e.confirmType,function(){return e.hide()})};s.addEventListener("click",o()(r.a.mark(function n(){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.isCheckedAllConfirm()||!e.actionSet){n.next=9;break}if(e.confirmType!==T.a.NEW_CART){n.next=6;break}return n.next=4,e.actionSet.saveDesignToCart(function(){return l()});case 4:n.next=9;break;case 6:if(e.confirmType!==T.a.UPDATE){n.next=9;break}return n.next=9,e.actionSet.updateDesign(function(){return l()});case 9:s.classList.contains(E.a.ACTIVE)?t.classList.remove("save_button_disabled"):t.classList.add("save_button_disabled");case 10:case"end":return n.stop()}},n)}))),t.appendChild(s),this.wrapper.appendChild(t)}},{key:"isCheckedAllConfirm",value:function(){return this.ckTypoCheck.checked&&(!this.alertList.includeAlert()||this.ckListConfirm.checked)}}]),e}()}])]);