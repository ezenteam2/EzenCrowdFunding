(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{215:function(e,t,n){"use strict";var i,a;n.d(t,"a",function(){return i}),function(e){e.SQUARE="SQUARE",e.ROUND_SQUARE="ROUND_SQUARE",e.CIRCLE="CIRCLE",e.LINE="LINE",e.VECTOR="VECTOR"}(i||(i={})),function(e){e.NONE="NONE",e.TRANSPARENT="TRANSPARENT",e.COLOR="COLOR",e.TEXTURE="TEXTURE"}(a||(a={}))},285:function(e,t,n){"use strict";var i,a,r,s,o;n.d(t,"a",function(){return i}),n.d(t,"b",function(){return s}),function(e){e.WARNING="WARNING",e.CAUTION="CAUTION",e.RECOMMEND="RECOMMEND"}(i||(i={})),function(e){e.AREA="AREA",e.ITEM_SIZE="ITEM_SIZE",e.FONT_SIZE="FONT_SIZE",e.IMAGE_DPI="IMAGE_DPI"}(a||(a={})),function(e){e.IN="IN",e.OUT="OUT",e.BETWEEN="BETWEEN"}(r||(r={})),function(e){e.NONE="NONE",e.DOT="DOT",e.SOLID="SOLID"}(s||(s={})),function(e){e.USER="USER",e.MICAN="MICAN",e.BOTH="BOTH"}(o||(o={}))},298:function(e,t,n){"use strict";var i=n(35),a=n.n(i),r=n(36),s=n.n(r),o=n(67),l=n(473),c=n(42),u=n(49),d=n(45),p=n(79),h=n(39),m=n.n(h),g=n(38),v=n.n(g),f=n(40),E=n.n(f),T=n(366),y=n(285),I=function(e){function t(e){var n;return a()(this,t),(n=m()(this,v()(t).call(this,y.a[e.alertType],e.title,e.warningText))).minDpi=e.minDpi,n}return E()(t,e),t}(T.a),L=function e(t,n){a()(this,e),this.ltrb=n,this.shapeType=t},k=n(215),_=function(){function e(){a()(this,e)}return s()(e,[{key:"getGuideAreaPxLTRB",value:function(e){var t=new u.a(0,0,0,0);return c.a.dispatch(new d.c(function(n,i){var a=i.option.size,r=a.width,s=a.height,o=a.dpi,l=a.unit,c=new u.a(0,0,p.a.getPixel(r,o,l),p.a.getPixel(s,o,l)),d=n.pages[i.renderPageIdx].sheetSize,h=d.width/c.getWidth(),m=d.height/c.getHeight();t=new u.a(p.a.getPixel(e.left*h,o,l),p.a.getPixel(e.top*m,o,l),p.a.getPixel(e.right,o,l)*h,p.a.getPixel(e.bottom,o,l)*m)})),t}},{key:"getGuideAreaLTRB",value:function(e){var t=e.position;return this.getGuideAreaPxLTRB(new u.a(t.left,t.top,t.right,t.bottom))}},{key:"isSameRstTypes",value:function(e,t){if(e.length===t.length)return e.forEach(function(e,n){if(e!==t[n])return!1}),!0}},{key:"setGuideAreaData",value:function(e){this.guideAreaData=e}},{key:"addImageMinDpiGuide",value:function(e){this.imgDpiGuideProps=new I(e)}},{key:"getArea",value:function(e){var t=e.position,n=new u.a(t.left,t.top,t.right,t.bottom),i=e.shape?k.a[e.shape.type]:k.a.SQUARE,a=this.getGuideAreaPxLTRB(n);return new L(i,a)}},{key:"getPusherInfoList",value:function(e){var t=this,n=[];return e.rstTypes.forEach(function(e){var i,a,r;e===o.f.OVERFLOW_SAFETY_ZONE?(i=t.guideAreaData.type,a=t.guideAreaData.title,r=t.guideAreaData.contents):e===o.f.LOW_RES_IMAGE?(i=t.imgDpiGuideProps.type,a=t.imgDpiGuideProps.title,r=t.imgDpiGuideProps.contents):(i=y.a.CAUTION,a=l.a.restrictionTypeToTitleString(e),r=l.a.restrictionTypeToContentsString(e));var s={type:i,title:a,contents:r};n.push(s)}),n}},{key:"getAlertParam",value:function(e,t,n,i){var a=c.a.instance.pageEditScale*c.a.instance.zoomScale;return{tbpeId:e.itemTbpeId,itemLTRB:e.itemBound.itemLTRB,degree:e.itemBound.degree,itemScale:a,editScale:c.a.instance.pageEditScale,editWidth:t,editHeight:n,rstLevel:e.rstLevel,zoomScale:c.a.instance.zoomScale,pusherInfoList:this.getPusherInfoList(e),itemSelectListener:i}}}]),e}();t.a=new _},300:function(e,t,n){"use strict";n(0),n(1);var i=n(35),a=n.n(i),r=n(36),s=n.n(r),o=n(37),l=n.n(o),c=n(45),u=(n(42),n(93)),d=(n(241),n(481)),p=(n(163),n(3)),h=n(43),m=function(){function e(){a()(this,e),l()(this,"styleList",[])}return s()(e,null,[{key:"add",value:function(t){this.remove(t.idx),e.isEffectType(t.type)||this.instance.styleList.unshift(t)}},{key:"remove",value:function(e){var t=0,n=!0,i=!1,a=void 0;try{for(var r,s=this.instance.styleList[Symbol.iterator]();!(n=(r=s.next()).done);n=!0){if(r.value.idx===e){this.instance.styleList.splice(t,1);break}t++}}catch(e){i=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}}},{key:"isEffectType",value:function(e){return e===u.c.STYLE_IMAGE_BITMAP_MASK||e===u.c.STYLE_IMAGE_STICKER_FRAME||e===u.c.STYLE_TEXT_FONT_FAMILY}},{key:"getList",value:function(){return this.instance.styleList}},{key:"clear",value:function(){this.instance.styleList=[]}}]),e}();l()(m,"instance",new m);var g=n(66);n(71);n.d(t,"a",function(){return v});var v=function(){function e(t,n,i,r,s,o){a()(this,e),l()(this,"doSaveQueue",!1),l()(this,"actionType",c.a.STYLE_TEMPLATE_APPLY),l()(this,"isActionGroupEquals",function(){return!1}),l()(this,"concat",function(e){return!1}),l()(this,"changeDesign",function(){return!0}),l()(this,"isLastSavedAction",!1),this.templateStyleIdx=t,this.itemType=n,this.mapper=i,this.param1=r,this.param2=s,this.items=o}return s()(e,[{key:"commit",value:function(e,t){var n=this;t.activeItems.length<1||(!this.items&&t.activeItems[0]instanceof g.b&&(this.items=[t.activeItems[0].innerPhotoItem]),u.a.findOne(this.templateStyleIdx).then(function(e){d.a.parse(e.data.xml,n.itemType).applyProperty(n.mapper,n.param1,n.param2,n.items),m.add(e.data)}).catch(function(e){alert(p.CRM.get(h.a.TOOLS_POPUP_TEMPLATE_STYLE_SAVE_LOAD_FAIL_MSG)),console.error(e)}))}},{key:"rollback",value:function(e,t){}},{key:"recycle",value:function(){}}]),e}()},33:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),r=n(1),s=n.n(r),o=n(42),l=n(45),c=n(35),u=n.n(c),d=n(36),p=n.n(d),h=n(37),m=n.n(h),g=function(){function e(){u()(this,e),this.listener=[]}return p()(e,[{key:"addEventListener",value:function(e,t){this.listener.push({type:e,listener:t}),document.addEventListener(e,t)}},{key:"removeEventListener",value:function(e,t){this.listener=this.listener.filter(function(n){return n.type!==e||n.listener!==t}),document.removeEventListener(e,t)}},{key:"removeAllEventListener",value:function(){this.listener.forEach(function(e){document.removeEventListener(e.type,e.listener)}),this.listener=[]}}]),e}();m()(g,"instance",new g);var v,f=n(122),E=n(124),T=n(39),y=n.n(T),I=n(38),L=n.n(I),k=n(44),_=n.n(k),w=n(40),b=n.n(w),S=n(384),O=n(65),C=function(e){function t(e){var n;return u()(this,t),n=y()(this,L()(t).call(this)),m()(_()(n),"isPossibleInCropMode",!0),m()(_()(n),"actionType",l.a.KEY_UP),m()(_()(n),"changeDesign",function(){return!1}),m()(_()(n),"commitAction",function(e,i){n.isScreenMoveMode()&&t.disableScreenMoveMode()}),m()(_()(n),"rollbackAction",function(e,t){}),m()(_()(n),"recycle",function(){}),n.renderAuto=!1,n.doSaveQueue=!1,n.keyCheck=new S.a(e),n}return b()(t,e),p()(t,[{key:"isScreenMoveMode",value:function(){return(!this.keyCheck.isCtrlPress()||this.keyCheck.isSpace())&&!o.a.instance.renderer.pageZoomNavigator.isScreenMoveMode&&(o.a.instance.mouseAction.mode===O.a.MODE_NAVIGATION||o.a.instance.mouseAction.mode===O.a.MODE_NAVIGATION_DRAG)}}],[{key:"disableScreenMoveMode",value:function(){o.a.instance.mouseAction.mode=O.a.MODE_NONE,o.a.instance.renderer.canvasRenderer.disableScrollMode()}}]),t}(l.b),P=n(61),D=n(379),A=n(3),R=n(41),M=n(111),N=n(469),x=n(46),B=n.n(x),U=n(63),H=n(43),G=n(57),z=n(72);!function(e){e.POPUP_DOWNLOAD="popup_download",e.POPUP_DOWNLOAD_HEADER="download_header",e.POPUP_DOWNLOAD_HEADER_TITLE="header_title",e.POPUP_DOWNLOAD_BODY="download_body",e.POPUP_DOWNLOAD_BODY_TITLE="body_title",e.POPUP_DOWNLOAD_BODY_OUTPUT_TYPE="body_output_type",e.POPUP_DOWNLOAD_BODY_OUTPUT_TYPE_TAB="output_type_tab",e.POPUP_DOWNLOAD_BODY_OUTPUT_TYPE_TAB_BG="output_type_tab_background",e.POPUP_DOWNLOAD_BODY_FILE_TYPE="body_file_type",e.POPUP_DOWNLOAD_BODY_FILE_TYPE_BUTTON_AREA="file_type_button_area",e.POPUP_DOWNLOAD_BODY_FILE_TYPE_BUTTON="file_type_button",e.POPUP_DOWNLOAD_BODY_FILE_TYPE_BUTTON_ICON="file_type_button_icon",e.POPUP_DOWNLOAD_BODY_DROPDOWN="body_dropdown",e.POPUP_DOWNLOAD_BODY_DROPDOWN_TEXT="body_dropdown_text",e.POPUP_DOWNLOAD_BODY_DROPDOWN_BUTTON_AREA="body_dropdown_button_area",e.POPUP_DOWNLOAD_BODY_SELECT_PAGE="body_select_page",e.POPUP_DOWNLOAD_BODY_SELECT_PAGE_BUTTON="select_page_button",e.POPUP_DOWNLOAD_BODY_SELECT_PAGE_LIST_CONTAINER="select_page_list_container",e.POPUP_DOWNLOAD_BODY_SELECT_PAGE_LIST_ITEMS="select_page_list_items",e.POPUP_DOWNLOAD_BODY_SELECT_PAGE_DONE_BUTTON="select_page_done_button",e.POPUP_DOWNLOAD_BODY_OUTPUT_INFO="body_output_info",e.POPUP_DOWNLOAD_BODY_OUTPUT_INFO_TEXT_BOX="output_info_text_box",e.POPUP_DOWNLOAD_BODY_OUTPUT_INFO_TEXT_BOX_NORMAL="normal",e.POPUP_DOWNLOAD_BODY_OUTPUT_INFO_TIP="output_info_tip",e.POPUP_DOWNLOAD_BODY_OUTPUT_INFO_LICENSE_AREA="output_info_license_area",e.POPUP_DOWNLOAD_BODY_OUTPUT_INFO_LICENSE_TEXT="output_info_license_text",e.POPUP_DOWNLOAD_BODY_OUTPUT_INFO_PAGE_NOT_SELECTED="output_info_page_not_selected",e.POPUP_DOWNLOAD_BODY_OUTPUT_INFO_PAGE_CONFIRM="output_info_page_confirm",e.POPUP_DOWNLOAD_BODY_OUTPUT_INFO_IMG_COMBINE_MAX_PAGE_SIZE="output_info_img_combine_max_page_size",e.POPUP_DOWNLOAD_BODY_IMG_COMBINE="img_combine",e.POPUP_DOWNLOAD_BODY_IMG_COMBINE_CHECK_BOX_AREA="check_box_area",e.POPUP_DOWNLOAD_BODY_IMG_COMBINE_CHECK_BOX_TEXT="check_box_text",e.POPUP_DOWNLOAD_FOOTER="download_footer",e.POPUP_DOWNLOAD_FOOTER_DOWNLOAD_BUTTON_AREA="download_button_area",e.POPUP_DOWNLOAD_FOOTER_DOWNLOAD_BUTTON="download_button",e.POPUP_DOWNLOAD_INFO_BUTTON="info_button",e.POPUP_DOWNLOAD_INFO_TOOLTIP_POPUP="info_tooltip_popup",e.POPUP_DOWNLOAD_INFO_TOOLTIP_POPUP_CONTENT_BACKGROUND="content_background",e.POPUP_DOWNLOAD_INFO_TOOLTIP_POPUP_CONTENT_AREA="content_area",e.POPUP_DOWNLOAD_INFO_TOOLTIP_POPUP_MAIN_TITLE="main_title",e.POPUP_DOWNLOAD_INFO_TOOLTIP_POPUP_SUB_TITLE="sub_title",e.POPUP_DOWNLOAD_INFO_TOOLTIP_POPUP_DESCRIPTION="description",e.POPUP_DOWNLOAD_INFO_TOOLTIP_POPUP_DESCRIPTION_HIGHLIGHT="description_highlight",e.POPUP_BUTTON_HIGHLIGHT="popup_button_highlight",e.HIGH_RESOLUTION_TEST_AREA="high_resolution_test_area",e.HIGH_RESOLUTION_TEST_SIZE_INPUT="high_resolution_test_size_input",e.HIGH_RESOLUTION_TEST_DOWNLOAD_BUTTON="high_resolution_test_download_btn",e.RESTRICT_TEXT_INFO="restrict_text_info"}(v||(v={}));var F,W=n(160),K=n(12),V=n(153),Y=function(){function e(){u()(this,e)}return p()(e,null,[{key:"makeContour",value:function(){var e=document.createElement("div");return e.className=R.a.CONTOUR,e}},{key:"makeIconMenu",value:function(t,n){var i=document.createElement("button");return i.className="popup_menu",Object(K.setToolsIcon)(i,t,!0),i.appendChild(e.makeParagraph("menu_paragraph",A.CRM.get(n))),i}},{key:"makeMenuElement",value:function(t){var n=document.createElement("button");return n.className="popup_menu",n.appendChild(e.makeParagraph("menu_paragraph",t)),n}},{key:"makeParagraph",value:function(e,t){var n=document.createElement("p");return n.className=e,n.innerText=t,n}},{key:"makeSwitchElement",value:function(e){var t=document.createElement("label");t.className=R.a.SWITCH;var n=document.createElement("input");n.type="checkbox",n.checked=e.isChecked,n.addEventListener("change",function(){e.listener(n.checked)}),t.appendChild(n);var i=document.createElement("span");return i.className=R.a.SLIDER,t.appendChild(i),t}},{key:"makeSwitchMenu",value:function(t,n){var i=e.makeMenuElement(t),a=e.makeSwitchElement(n);return i.appendChild(a),i}},{key:"makeTitleMenu",value:function(t,n){var i=document.createElement("div");if(i.className="popup_title",n){var a=document.createElement("div");a.className="back_button",Object(K.setToolsIcon)(a,K.ToolsIcon.GREATER_THAN,!0,"left",180),a.addEventListener("click",function(e){e.stopPropagation(),n()}),i.appendChild(a)}return i.appendChild(e.makeParagraph("menu_title",t)),i}},{key:"makePopupMenu",value:function(t,n,i){var a=document.createElement("div");if(a.className="popup_menu",n&&Object(K.setToolsIcon)(a,n,!0,"right"),a.appendChild(e.makeParagraph("menu_title",t)),i){var r=document.createElement("div");r.classList.add(R.a.SUB_TITLE,"right"),r.innerText=i,a.appendChild(r)}return a}},{key:"makeToggleBtn",value:function(e){var t=document.createElement("div");t.className=R.a.BUTTON_WRAP;var n=document.createElement("span");if(n.className=R.a.TITLE,n.innerText=e.title,t.appendChild(n),e.subTitle){var i=document.createElement("span");i.classList.add(R.a.SUB_TITLE,"left"),i.innerText=e.subTitle,t.appendChild(i)}var a=document.createElement("label"),r=document.createElement("input");r.type="checkbox",r.checked=null==e.initValue||e.initValue,r.addEventListener("change",function(){e.func(r.checked)}),a.appendChild(r);var s=document.createElement("div");return s.appendChild(document.createElement("span")),a.appendChild(s),t.appendChild(a),{wrap:t,checkbox:r}}},{key:"makeRadio",value:function(e,t,n){var i=document.createElement("div");i.className=R.a.RADIO_WRAP;var a=document.createElement("span");a.className=R.a.TITLE,a.innerText=A.CRM.get(e),i.appendChild(a);var r=new V.a(t,n);return i.appendChild(r.render()),i}}]),e}(),j=function(){function e(){u()(this,e),this.initContent(),this.makeElement()}return p()(e,[{key:"initContent",value:function(){this.webContent=[],this.webContent.push({mainTitle:A.CRM.get(H.a.TOOLS_POPUP_DOWNLOAD_INFO_TOOLTIP_WEB_FILE_TYPE_TITLE),components:[{type:F.TITLE,description:A.CRM.get(H.a.TOOLS_POPUP_DOWNLOAD_INFO_TOOLTIP_WEB_PNG_TITLE)},{type:F.DESCRIPTION,description:A.CRM.get(H.a.TOOLS_POPUP_DOWNLOAD_INFO_TOOLTIP_WEB_PNG_DESC)},{type:F.TITLE,description:A.CRM.get(H.a.TOOLS_POPUP_DOWNLOAD_INFO_TOOLTIP_WEB_JPG_TITLE)},{type:F.DESCRIPTION,description:A.CRM.get(H.a.TOOLS_POPUP_DOWNLOAD_INFO_TOOLTIP_WEB_JPG_DESC)}]}),this.webContent.push({mainTitle:A.CRM.get(H.a.TOOLS_POPUP_DOWNLOAD_INFO_TOOLTIP_WEB_DOWNLOAD_TYPE_TITLE),components:[{type:F.TITLE,description:A.CRM.get(H.a.TOOLS_POPUP_DOWNLOAD_INFO_TOOLTIP_WEB_QUICK_TITLE)},{type:F.DESCRIPTION,description:A.CRM.get(H.a.TOOLS_POPUP_DOWNLOAD_INFO_TOOLTIP_WEB_QUICK_DESC)},{type:F.DESCRIPTION_HIGHLIGHT,description:A.CRM.get(H.a.TOOLS_POPUP_DOWNLOAD_INFO_TOOLTIP_WEB_QUICK_DESC_HIGHLIGHT)},{type:F.TITLE,description:A.CRM.get(H.a.TOOLS_POPUP_DOWNLOAD_INFO_TOOLTIP_WEB_HIGH_RES_TITLE)},{type:F.DESCRIPTION,description:A.CRM.get(H.a.TOOLS_POPUP_DOWNLOAD_INFO_TOOLTIP_WEB_HIGH_RES_DESC)}]}),this.printoutContent=[],this.printoutContent.push({mainTitle:A.CRM.get(H.a.TOOLS_POPUP_DOWNLOAD_INFO_TOOLTIP_PRINT_FILE_TYPE_TITLE),components:[{type:F.TITLE,description:A.CRM.get(H.a.TOOLS_POPUP_DOWNLOAD_INFO_TOOLTIP_PRINT_JPG_TITLE)},{type:F.DESCRIPTION,description:A.CRM.get(H.a.TOOLS_POPUP_DOWNLOAD_INFO_TOOLTIP_PRINT_JPG_DESC)},{type:F.TITLE,description:A.CRM.get(H.a.TOOLS_POPUP_DOWNLOAD_INFO_TOOLTIP_PRINT_PDF_TITLE)},{type:F.DESCRIPTION,description:A.CRM.get(H.a.TOOLS_POPUP_DOWNLOAD_INFO_TOOLTIP_PRINT_PDF_DESC)}]})}},{key:"makeElement",value:function(){var e=this.elementWrapper=document.createElement("div");e.classList.add(v.POPUP_DOWNLOAD_INFO_TOOLTIP_POPUP),e.classList.add(R.a.HIDE),e.addEventListener("click",function(e){e.stopPropagation()}),e.appendChild(this.makeHeader()),this.webContentElement=this.makeContentElement(this.webContent),this.printContentElement=this.makeContentElement(this.printoutContent);var t=new G.a(!1,!0,"calc(100% - 76px)");return e.appendChild(t.render()),this.scrollContents=t.contents,e}},{key:"makeHeader",value:function(){var e=this,t=document.createElement("div");t.className="info_tooltip_popup_header",Object(K.setToolsIcon)(t,K.ToolsIcon.GREATER_THAN,!0,"left",180).addEventListener("click",function(){return e.hide()});var n=document.createElement("label");return n.innerText="다운로드 도움말",t.appendChild(n),Object(K.setToolsIcon)(t,K.ToolsIcon.CLOSE).addEventListener("click",function(){return e.hide()}),t.appendChild(Y.makeContour()),t}},{key:"makeContentElement",value:function(e){var t=this,n=document.createElement("div");return n.className=v.POPUP_DOWNLOAD_INFO_TOOLTIP_POPUP_CONTENT_BACKGROUND,e.forEach(function(e){var i=document.createElement("div");i.className=v.POPUP_DOWNLOAD_INFO_TOOLTIP_POPUP_CONTENT_AREA;var a=document.createElement("label");a.className=v.POPUP_DOWNLOAD_INFO_TOOLTIP_POPUP_MAIN_TITLE,a.innerText=e.mainTitle,i.appendChild(a),e.mainTitle.toLowerCase()===A.CRM.get(H.a.TOOLS_POPUP_DOWNLOAD_INFO_TOOLTIP_PRINT_FILE_TYPE_TITLE)&&(t.fileTypeAreaElement=i),e.components.forEach(function(e){switch(e.type){case F.DESCRIPTION:var t=document.createElement("label");t.className=v.POPUP_DOWNLOAD_INFO_TOOLTIP_POPUP_DESCRIPTION,t.innerHTML=e.description,i.appendChild(t);break;case F.DESCRIPTION_HIGHLIGHT:var n=document.createElement("label");n.className=v.POPUP_DOWNLOAD_INFO_TOOLTIP_POPUP_DESCRIPTION,n.classList.add(v.POPUP_DOWNLOAD_INFO_TOOLTIP_POPUP_DESCRIPTION_HIGHLIGHT),n.innerHTML=e.description,i.appendChild(n);break;case F.TITLE:default:var a=document.createElement("label");a.className=v.POPUP_DOWNLOAD_INFO_TOOLTIP_POPUP_SUB_TITLE,a.innerText=e.description,i.appendChild(a)}}),n.appendChild(i)}),n}},{key:"updateUI",value:function(e){this.isAdminMode=e.isAdminMode,this.isDevMode=e.isDevMode,this.updateContent(e.outputType)}},{key:"updateContent",value:function(e){e===W.c.WEB?(this.scrollContents.appendChild(this.webContentElement),this.printContentElement.parentElement&&this.printContentElement.parentElement.removeChild(this.printContentElement)):(this.scrollContents.appendChild(this.printContentElement),this.webContentElement.parentElement&&this.webContentElement.parentElement.removeChild(this.webContentElement))}},{key:"show",value:function(){this.elementWrapper.classList.remove(R.a.HIDE)}},{key:"hide",value:function(){this.elementWrapper.classList.add(R.a.HIDE)}},{key:"toggleVisible",value:function(){this.elementWrapper.classList.contains(R.a.HIDE)?this.elementWrapper.classList.remove(R.a.HIDE):this.elementWrapper.classList.add(R.a.HIDE)}}]),e}();!function(e){e[e.TITLE=0]="TITLE",e[e.DESCRIPTION=1]="DESCRIPTION",e[e.DESCRIPTION_HIGHLIGHT=2]="DESCRIPTION_HIGHLIGHT"}(F||(F={}));var X=function(){function e(){u()(this,e)}return p()(e,null,[{key:"getNewPrintSize",value:function(t,n,i,a){if(Number.isNaN(Number(t)))return a;var r=Number(t);return n===W.d.WIDTH?e.getNewSizeByWidth(r,i):e.getNewSizeByHeight(r,i)}},{key:"getNewSizeByWidth",value:function(t,n){var i,a=t;return a>n.width?(a=e.getCheckedMaxValue(a),(i=e.getSizeByWidthRatio(a,n)).height>e.MAX_SIZE&&(i=e.getSizeByHeightRatio(e.MAX_SIZE,n))):i=n,i}},{key:"getNewSizeByHeight",value:function(t,n){var i,a=t;return a>n.height?(a=e.getCheckedMaxValue(a),(i=e.getSizeByHeightRatio(a,n)).width>e.MAX_SIZE&&(i=e.getSizeByWidthRatio(e.MAX_SIZE,n))):i=n,i}},{key:"getCheckedMaxValue",value:function(t){return t>e.MAX_SIZE?e.MAX_SIZE:t}},{key:"getSizeByWidthRatio",value:function(e,t){var n=e/t.width,i=t.height*n;return{width:Math.round(e),height:Math.round(i)}}},{key:"getSizeByHeightRatio",value:function(e,t){var n=e/t.height,i=t.width*n;return{width:Math.round(i),height:Math.round(e)}}}]),e}();m()(X,"MAX_SIZE",5e4);var Z,q=function(){function e(){u()(this,e),m()(this,"pageSize",{width:0,height:0}),m()(this,"printSize",{width:0,height:0}),this.elementWrapper=this.makeElement()}return p()(e,[{key:"makeElement",value:function(){var e=document.createElement("div");e.className=v.HIGH_RESOLUTION_TEST_AREA;var t=document.createElement("label");return t.className="high_resolution_test_title",t.innerText="고해상도 테스트",e.appendChild(t),e.appendChild(this.makeSizeSettingElement()),e.appendChild(this.makeDownloadElement()),e}},{key:"makeSizeSettingElement",value:function(){var e=document.createElement("div");e.className="high_resolution_test_setting_area";var t=this.widthInputElement=this.makeSizeInputElement(W.d.WIDTH);e.appendChild(t);var n=document.createElement("span");Object(K.setToolsIcon)(n,K.ToolsIcon.LOCK_ON,!0),e.appendChild(n);var i=this.heightInputElement=this.makeSizeInputElement(W.d.HEIGHT);e.appendChild(i);var a=document.createElement("label");return a.innerText="px",e.appendChild(a),e}},{key:"makeSizeInputElement",value:function(e){var t=this,n=document.createElement("input");return n.className=v.HIGH_RESOLUTION_TEST_SIZE_INPUT,n.addEventListener("keyup",function(){return t.checkValidValue(n.value)}),n.addEventListener("change",function(){var i=X.getNewPrintSize(n.value,e,t.pageSize,t.printSize);t.updatePrintSize(i)}),n}},{key:"makeDownloadElement",value:function(){var e=this,t=document.createElement("div"),n=this.downloadButtonElement=document.createElement("button");return n.className=v.HIGH_RESOLUTION_TEST_DOWNLOAD_BUTTON,n.innerText="다운로드",n.addEventListener("click",function(){n.disabled=!0;var t={isHighResolution:!0,printScale:e.getPrintScale(),isForceHighResolution:!0};e.downloadEvent(t)}),t.appendChild(n),t}},{key:"checkValidValue",value:function(e){Number.isNaN(Number(e))&&this.updateSizeInputUI(this.printSize)}},{key:"updatePageSize",value:function(e){this.pageSize=e,0===this.printSize.width&&0===this.printSize.height&&(this.printSize=e,this.updateSizeInputUI(e))}},{key:"updatePrintSize",value:function(e){this.printSize=e,this.updateSizeInputUI(e)}},{key:"updateSizeInputUI",value:function(e){this.widthInputElement.value=e.width.toString(),this.heightInputElement.value=e.height.toString()}},{key:"setDownloadEvent",value:function(e){this.downloadEvent=e}},{key:"updateDownloadButtonUI",value:function(){this.downloadButtonElement.disabled=!1}},{key:"updateUI",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e?this.show():this.hide()}},{key:"show",value:function(){this.elementWrapper.classList.remove(R.a.HIDE)}},{key:"hide",value:function(){this.elementWrapper.classList.add(R.a.HIDE)}},{key:"getPrintScale",value:function(){return this.printSize.width/this.pageSize.width}}]),e}(),Q=n(55),J=function(){function e(){u()(this,e)}return p()(e,null,[{key:"makeSliderUI",value:function(e){var t=document.createElement("label");t.className=R.a.SWITCH;var n=document.createElement("input");n.type="checkbox",n.checked=e.isChecked,n.addEventListener("change",function(){e.listener(n.checked)}),t.appendChild(n);var i=document.createElement("span");return i.className=R.a.SLIDER,t.appendChild(i),t}},{key:"toggleElementActive",value:function(e){var t=R.a.ACTIVE;e.classList.contains(t)?e.classList.remove(t):e.classList.add(t)}},{key:"toggleElementActiveOfElements",value:function(e,t){e.forEach(function(e){e===t?e.classList.add(R.a.ACTIVE):e.classList.remove(R.a.ACTIVE)})}},{key:"showElement",value:function(e){e.classList.remove(R.a.HIDE)}},{key:"hideElement",value:function(e){e.classList.add(R.a.HIDE)}},{key:"getFirstChildLabelWidth",value:function(e){var t=e.getElementsByTagName("label")[0];return t?t.offsetWidth:0}}]),e}(),ee=n(89),te=n(58),ne=function e(){u()(this,e),e.SELECT_PAGE_DEFAULT=A.CRM.get(H.a.TOOLS_POPUP_DOWNLOAD_SELECT_PAGE_ITEM_DEFAULT_PAGE),e.SELECT_PAGE_ALL_PAGE=A.CRM.get(H.a.TOOLS_POPUP_DOWNLOAD_SELECT_PAGE_ITEM_ALL_PAGE),e.SELECT_PAGE=A.CRM.get(H.a.TOOLS_POPUP_DOWNLOAD_SELECT_PAGE_ITEM_PAGE),e.OUTPUT_INFO_PAGE_COUNT=A.CRM.get(H.a.TOOLS_POPUP_DOWNLOAD_OUTPUT_INFO_PAGE_COUNT),e.OUTPUT_INFO_IOS_RESTRICT=A.CRM.get(H.a.TOOLS_POPUP_DOWNLOAD_OUTPUT_INFO_IOS_RESTRICT),e.OUTPUT_INFO_WORK_SIZE=A.CRM.get(H.a.TOOLS_POPUP_DOWNLOAD_OUTPUT_INFO_WORK_SIZE),e.OUTPUT_INFO_DPI=A.CRM.get(H.a.TOOLS_POPUP_DOWNLOAD_OUTPUT_INFO_DPI)};m()(ne,"SELECT_PAGE_DEFAULT",""),m()(ne,"SELECT_PAGE_ALL_PAGE",""),m()(ne,"SELECT_PAGE",""),m()(ne,"OUTPUT_INFO_PAGE_COUNT",""),m()(ne,"OUTPUT_INFO_WORK_SIZE",""),m()(ne,"OUTPUT_INFO_DPI",""),m()(ne,"OUTPUT_INFO_IOS_RESTRICT",""),function(e){e.OUTPUT_TYPE="data-output-type",e.FILE_TYPE="data-file-type",e.DOWNLOAD_TYPE="data-download-type"}(Z||(Z={}));var ie,ae,re,se=function(){function e(){u()(this,e)}return p()(e,null,[{key:"getImgCombineTextElements",value:function(e,t,n,i,a){var r=[],s=document.createElement("div"),o=i?1:t;s.innerText=e.totalPageCount.replace("${pageCount}",o.toString()),r.push(s);var l=document.createElement("div"),c=t*n.pageHeight;if(l.innerText=e.workSize.replace("${width}","".concat(n.pageWidth,"px")).replace("${height}","".concat(c,"px")),r.push(l),a){l.className=R.a.WARNING;var u=document.createElement("div");u.innerText=e.imgCombineMaxPageSize,u.classList.add(v.POPUP_DOWNLOAD_BODY_OUTPUT_INFO_IMG_COMBINE_MAX_PAGE_SIZE),u.classList.add(R.a.WARNING),r.push(u)}return r}},{key:"getInfoTextElements",value:function(t,n,i,a,r){var s=[],o=a?1:t;if(e.addBaseTextToTextList(o,s),n===W.c.PRINT){var l={workWidth:i.workWidth,workHeight:i.workHeight,dpi:i.dpi,unit:i.unit};e.addPrintTypeTextToTextList(l,s,r)}else{var c=t*i.pageHeight,u={pageWidth:i.pageWidth,pageHeight:a?c:i.pageHeight};e.addWebTypeTextToTextList(u,s)}var d=[];return s.forEach(function(e){var t=document.createElement("div");t.innerText=e,d.push(t)}),d}},{key:"getiOSRestrictTextElement",value:function(){var e=document.createElement("div");return e.innerText=ne.OUTPUT_INFO_IOS_RESTRICT,e.className=v.RESTRICT_TEXT_INFO,e}},{key:"addBaseTextToTextList",value:function(e,t){var n=ne.OUTPUT_INFO_PAGE_COUNT;n=n.replace("${pageCount}",e.toString()),t.push(n)}},{key:"addWebTypeTextToTextList",value:function(t,n){var i=ne.OUTPUT_INFO_WORK_SIZE;i=e.replaceSizeText(i,t.pageWidth,t.pageHeight,"px"),n.push(i)}},{key:"addPrintTypeTextToTextList",value:function(t,n,i){var a=e.getPrintTypeUnit(t.unit);i&&n.push(e.getWorkSizeText(t.workWidth,t.workHeight,a)),n.push(e.getDPIText(t.dpi))}},{key:"getPrintTypeUnit",value:function(e){var t=e===Q.b.PX?Q.b.MM:e;return(t=t===Q.b.IN?"inch":t).toLowerCase()}},{key:"replaceSizeText",value:function(e,t,n,i){var a=e;return a=(a=a.replace("${width}","".concat(t.toString()).concat(i))).replace("${height}","".concat(n.toString()).concat(i))}},{key:"getWorkSizeText",value:function(t,n,i){var a=ne.OUTPUT_INFO_WORK_SIZE;return a=e.replaceSizeText(a,t,n,i)}},{key:"getDPIText",value:function(e){var t=ne.OUTPUT_INFO_DPI;return t=t.replace("${dpi}",e.toString())}}]),e}(),oe=function(){function e(){u()(this,e),this.initDynamicText(),this.makeElement()}return p()(e,[{key:"initDynamicText",value:function(){this.dynamicText={totalPageCount:A.CRM.get(H.a.TOOLS_POPUP_DOWNLOAD_OUTPUT_INFO_PAGE_COUNT),workSize:A.CRM.get(H.a.TOOLS_POPUP_DOWNLOAD_OUTPUT_INFO_WORK_SIZE),licenseDescription:A.CRM.get(H.a.TOOLS_POPUP_DOWNLOAD_LICENSE_DESCRIPTION),licenseLinkURL:A.CRM.get(H.a.TOOLS_POPUP_DOWNLOAD_LICENSE_LINK_URL),licenseLinkText:A.CRM.get(H.a.TOOLS_POPUP_DOWNLOAD_LICENSE_LINK_TEXT),pageNotSelected:A.CRM.get(H.a.TOOLS_POPUP_DOWNLOAD_OUTPUT_INFO_PAGE_NOT_SELECTED),pageConfirm:A.CRM.get(H.a.TOOLS_POPUP_DOWNLOAD_OUTPUT_INFO_PAGE_CONFIRM),imgCombineMaxPageSize:A.CRM.get(H.a.TOOLS_POPUP_DOWNLOAD_OUTPUT_INFO_IMG_COMBINE_MAX_PAGE_SIZE)}}},{key:"makeElement",value:function(){var e=this.element=document.createElement("div");return e.className=v.POPUP_DOWNLOAD_BODY_OUTPUT_INFO_TEXT_BOX,e}},{key:"updateUI",value:function(e){var t=this.element;t.innerHTML="",e.isDownloadEnable?(t.classList.add(v.POPUP_DOWNLOAD_BODY_OUTPUT_INFO_TEXT_BOX_NORMAL),this.updateByDownloadEnable(t,e.enableOption)):(t.classList.remove(v.POPUP_DOWNLOAD_BODY_OUTPUT_INFO_TEXT_BOX_NORMAL),this.updateByDownloadDisable(t,e.disableOption))}},{key:"updateByDownloadEnable",value:function(e,t){if(se.getInfoTextElements(t.selectedPageCount,t.outputType,t.outputInfo,t.isImgCombine,t.isDevMode).forEach(function(t){e.appendChild(t)}),t.isiOSBigSize){var n=se.getiOSRestrictTextElement();e.appendChild(n)}}},{key:"updateByDownloadDisable",value:function(e,t){if(t.selectedPageCount){var n=t.acceptableInfo.imgTroublePageIdxList;n.length?this.updateTextByImageTrouble(e,t.selectedPageIdxList,n):t.isImgCombineOverMaxPageSize&&this.updateTextByImgCombineMaxPageSize(e,t.selectedPageCount,t.outputInfo,t.isImgCombine,t.isImgCombineOverMaxPageSize)}else this.updateTextByNotSelectedPage(e)}},{key:"updateTextByImageTrouble",value:function(e,t,n){var i=t.filter(function(e){return n.some(function(t){return e===t})}).map(function(e){return e+1}).join(", "),a=document.createElement("div");a.innerHTML=this.dynamicText.licenseDescription,e.appendChild(a);var r=document.createElement("div");r.className=v.POPUP_DOWNLOAD_BODY_OUTPUT_INFO_PAGE_CONFIRM,r.innerText="".concat(i,"  ").concat(this.dynamicText.pageConfirm),e.appendChild(r);var s=document.createElement("div");s.className=v.POPUP_DOWNLOAD_BODY_OUTPUT_INFO_LICENSE_AREA;var o=document.createElement("a");o.className=v.POPUP_DOWNLOAD_BODY_OUTPUT_INFO_LICENSE_TEXT,o.href=this.dynamicText.licenseLinkURL,o.target="_blank",o.innerText=this.dynamicText.licenseLinkText,s.appendChild(o),e.appendChild(s)}},{key:"updateTextByImgCombineMaxPageSize",value:function(e,t,n,i,a){se.getImgCombineTextElements(this.dynamicText,t,n,i,a).forEach(function(t){e.appendChild(t)})}},{key:"updateTextByNotSelectedPage",value:function(e){var t=document.createElement("div");t.className=v.POPUP_DOWNLOAD_BODY_OUTPUT_INFO_PAGE_NOT_SELECTED,t.innerText=this.dynamicText.pageNotSelected,e.appendChild(t)}}]),e}(),le=function(){function e(){u()(this,e),this.makeElement()}return p()(e,[{key:"makeElement",value:function(){var e=this.elementWrapper=document.createElement("div");return e.className=v.POPUP_DOWNLOAD_BODY_IMG_COMBINE,e.appendChild(this.makeCheckBoxArea()),e}},{key:"makeCheckBoxArea",value:function(){var e=this,t=document.createElement("div");return t.className=v.POPUP_DOWNLOAD_BODY_IMG_COMBINE_CHECK_BOX_AREA,t.appendChild(this.makeCheckBox()),t.appendChild(this.makeCheckBoxText()),t.addEventListener("click",function(){e.checkBox.checked=!e.checkBox.checked,e.checkEventListener&&e.checkEventListener()}),t}},{key:"makeCheckBox",value:function(){var e=this.checkBox=document.createElement("input");return e.type="checkbox",e.checked=!1,e}},{key:"makeCheckBoxText",value:function(){var e=document.createElement("label");return e.className=v.POPUP_DOWNLOAD_BODY_IMG_COMBINE_CHECK_BOX_TEXT,e.innerText=A.CRM.get(H.a.TOOLS_POPUP_DOWNLOAD_IMG_COMBINE),Object(K.setToolsIcon)(e,K.ToolsIcon.CHECK),e}},{key:"initSetting",value:function(){this.checkBox.checked=!1}},{key:"addCheckEventListener",value:function(e){this.checkEventListener=e}},{key:"show",value:function(){this.elementWrapper.classList.remove(R.a.HIDE)}},{key:"hide",value:function(){this.initSetting(),this.elementWrapper.classList.add(R.a.HIDE)}},{key:"enable",value:function(){this.elementWrapper.classList.remove(R.a.DISABLE)}},{key:"disable",value:function(){this.elementWrapper.classList.add(R.a.DISABLE)}},{key:"isChecked",value:function(){return this.checkBox.checked}}]),e}();ae=ie||(ie={}),re="criteoReportSales",ae.reportSales=function(){var e=document.getElementById(re);null!=e&&e.parentElement.removeChild(e),(e=document.createElement("iframe")).id=re,e.title="criteo-report-sales",e.style.display="none !important",e.style.width="px !important",e.style.height="px !important",e.style.opacity="0 !important",e.style.pointerEvents="none !important",e.tabIndex=-1,e.src="/libs/virtual-page/download-report.html",document.body.appendChild(e)};var ce,ue=function(e){function t(){var e;return u()(this,t),e=y()(this,L()(t).call(this)),m()(_()(e),"infoTooltipPopup",new j),m()(_()(e),"thumbImgList",[]),m()(_()(e),"selectedPages",[]),m()(_()(e),"selectedOutputType",W.c.WEB),m()(_()(e),"selectedImageFileType",W.b.PNG),m()(_()(e),"selectedDownloadType",W.a.QUICK),m()(_()(e),"downloadAvailableStatus",ce.ENABLE),m()(_()(e),"highResTester",new q),m()(_()(e),"fileTypeIcons",[]),m()(_()(e),"webFileTypeButtonElements",[]),m()(_()(e),"printFileTypeButtonElements",[]),e.dynamicText=new ne,e.highResTester.setDownloadEvent(e.doDownload.bind(_()(e))),e.initFileTypeIconData(),e.outputInfoTextBox=new oe,e.infoTooltipPopup=new j,e.imgCombine=new le,e}return b()(t,e),p()(t,[{key:"setPositionOffsetElement",value:function(e){this.positionOffsetElement=e}},{key:"addWindowResizeEvent",value:function(){window.addEventListener("resize",this.updatePosition.bind(this))}},{key:"removeWindowResizeEvent",value:function(){window.removeEventListener("resize",this.updatePosition)}},{key:"getId",value:function(){return t.ID_ELEMENT_WRAPPER}},{key:"getContents",value:function(){var e=this.wrapper=this.makeWrapperElement();return e.appendChild(this.makeHeaderUI()),e.appendChild(this.makeBodyUI()),e.appendChild(this.makeFooterUI()),e.appendChild(this.infoTooltipPopup.elementWrapper),this.addEventListeners(),e}},{key:"updateUI",value:function(){this.updatePosition(),1===this.pageCount?J.hideElement(this.selectPageElement):J.showElement(this.selectPageElement),this.updateAllUiToDefault()}},{key:"addEventListeners",value:function(){var e=this;this.imgCombine.addCheckEventListener(function(){e.updateDownloadAvailableStatus(),e.updateOutputInfoUI(),e.updateDownloadButtonUI()})}},{key:"open",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this.popupCallback){this.initPageInfoSetting(n),this.initSelectedPagesByPageCount(),this.updateDownloadAvailableStatus(),B()(L()(t.prototype),"open",this).call(this,e),this.element.classList.contains(R.a.UP_SIDE)&&this.element.classList.remove(R.a.UP_SIDE),this.addWindowResizeEvent();var i=this.popupCallback.pageOption.getSizeOption();this.highResTester.updatePageSize({width:i.width,height:i.height});try{te.a.moveVirtualPage(te.c.DOWNLOAD),te.a.sendEvent("다운로드","다운로드 팝업",location.pathname,!0)}catch(e){}return this}console.log("It can't open. undefined callback")}},{key:"close",value:function(){return this.hideDropdownAndTooltipUI(),this.removeWindowResizeEvent(),te.a.moveVirtualPage(te.c.PAGE_BACK),B()(L()(t.prototype),"close",this).call(this)}},{key:"setCallback",value:function(e){this.popupCallback=e}},{key:"initFileTypeIconData",value:function(){this.fileTypeIcons.push({outputType:W.c.WEB,imgFileType:W.b.JPG,tooltipTxt:A.CRM.get(H.a.TOOLS_POPUP_DOWNLOAD_FILE_TYPE_TOOLTIP_JPG_WEB),isSelect:!0}),this.fileTypeIcons.push({outputType:W.c.WEB,imgFileType:W.b.PNG,tooltipTxt:A.CRM.get(H.a.TOOLS_POPUP_DOWNLOAD_FILE_TYPE_TOOLTIP_PNG)}),this.fileTypeIcons.push({outputType:W.c.WEB,imgFileType:W.b.PNG_TRANSPARENT,tooltipTxt:A.CRM.get(H.a.TOOLS_POPUP_DOWNLOAD_FILE_TYPE_TOOLTIP_PNG_TRANSPARENT)}),this.fileTypeIcons.push({outputType:W.c.WEB,imgFileType:W.b.PDF,tooltipTxt:A.CRM.get(H.a.TOOLS_POPUP_DOWNLOAD_FILE_TYPE_TOOLTIP_PDF_WEB)}),this.fileTypeIcons.push({outputType:W.c.PRINT,imgFileType:W.b.JPG,tooltipTxt:A.CRM.get(H.a.TOOLS_POPUP_DOWNLOAD_FILE_TYPE_TOOLTIP_JPG_PRINT)}),this.fileTypeIcons.push({outputType:W.c.PRINT,imgFileType:W.b.PDF,tooltipTxt:A.CRM.get(H.a.TOOLS_POPUP_DOWNLOAD_FILE_TYPE_TOOLTIP_PDF_PRINT),isSelect:!0})}},{key:"updateDownloadAvailableStatus",value:function(){var e=this.popupCallback.environment.isLogin(),t=this.popupCallback.getDownloadAcceptableInfo(),n=this.selectedPages.some(function(e){return t.imgTroublePageIdxList.some(function(t){return t===e})}),i=this.imgCombine.isChecked()&&this.isImgCombineOverMaxPageSize();this.downloadAvailableStatus=!e||!this.selectedPages.length||n||i?ce.DISABLE:ce.ENABLE}},{key:"updateAllUiToDefault",value:function(){this.updateOutputTypeTabUI(),this.updateFileTypeUI(),this.initSelectPageCheckboxes(),this.updateSelectPageButtonUI(),this.updateOutputInfoUI(),this.updateImageCombineUI(),this.updateDownloadButtonUI(),this.highResTester.updateUI(this.popupCallback.environment.isDevMode())}},{key:"initPageInfoSetting",value:function(e){var t=this.pageCount!==e&&this.element;this.pageCount=e,t&&this.initSelectPageItemList()}},{key:"updateOutputTypeTabUI",value:function(){var e=this.outputTypeTabAreaElement.getElementsByClassName(v.POPUP_DOWNLOAD_BODY_OUTPUT_TYPE_TAB),t=this.getOutputType(),n=!0,i=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(n=(r=s.next()).done);n=!0){var o=r.value;o.getAttribute(Z.OUTPUT_TYPE)===t?o.classList.add(R.a.ACTIVE):o.classList.remove(R.a.ACTIVE)}}catch(e){i=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}this.selectedOutputType=t,t===W.c.WEB?this.changeToWebTypeButtonUI():this.changeToPrintTypeButtonUI()}},{key:"updateFileTypeUI",value:function(){var e=this,t=this.selectedOutputType===W.c.PRINT;t&&(this.selectedImageFileType!==W.b.PNG&&this.selectedImageFileType!==W.b.PNG_TRANSPARENT||(this.selectedImageFileType=W.b.PDF));var n=t?this.printFileTypeButtonElements:this.webFileTypeButtonElements;n.forEach(function(t){t.getAttribute(Z.FILE_TYPE)===e.selectedImageFileType&&J.toggleElementActiveOfElements(n,t)})}},{key:"initSelectedPagesByPageCount",value:function(){this.selectedPages=[];for(var e=0;e<this.pageCount;e++)this.selectedPages.push(e)}},{key:"initSelectPageCheckboxes",value:function(){this.getCheckboxElementsOfSelectPage().forEach(function(e){e.checked=!0})}},{key:"initSelectPageItemList",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,a=this.selectPageScroll.contents.getElementsByTagName("ul")[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var r=i.value;r.parentElement.removeChild(r)}}catch(e){t=!0,n=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}this.selectPageScroll.contents.appendChild(this.makeSelectPageItemListElement())}},{key:"updatePosition",value:function(){if(this.positionOffsetElement){var e=$(this.positionOffsetElement).offset().left,t=e+this.positionOffsetElement.offsetWidth;this.contentsWrap.style.left="".concat(t,"px"),$(window).width()<$(this.contentsWrap).width()+e?this.element.classList.add(R.a.LEFT_SIDE):this.element.classList.remove(R.a.LEFT_SIDE)}}},{key:"getCheckboxElementsOfSelectPage",value:function(){var e=this.selectPageItemListElement.getElementsByTagName("input"),t=[],n=!0,i=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(n=(r=s.next()).done);n=!0){var o=r.value;t.push(o)}}catch(e){i=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return t}},{key:"makeWrapperElement",value:function(){var e=this,t=document.createElement("div");return t.className=v.POPUP_DOWNLOAD,t.addEventListener("click",function(){e.infoTooltipPopup.hide()}),t}},{key:"makeHeaderUI",value:function(){var e=this.headerElement=document.createElement("div");e.className=v.POPUP_DOWNLOAD_HEADER;var t=document.createElement("label");return t.className=v.POPUP_DOWNLOAD_HEADER_TITLE,t.innerText=A.CRM.get(H.a.TOOLS_POPUP_DOWNLOAD_TITLE),e.appendChild(t),e}},{key:"makeBodyUI",value:function(){var e=document.createElement("div");e.className=v.POPUP_DOWNLOAD_BODY,e.appendChild(this.makeOutputTypeTabElement()),e.appendChild(this.makeFileTypeElement()),e.appendChild(this.makeSelectPageElement()),e.appendChild(this.imgCombine.elementWrapper),e.appendChild(this.makeOutputInfoElement()),this.bodyElement=e;var t=new G.a(!1,!0,"auto");return t.contents.appendChild(e),t.render()}},{key:"makeOutputTypeTabElement",value:function(){var e=this,t=this.outputTypeTabAreaElement=document.createElement("div");t.className=v.POPUP_DOWNLOAD_BODY_OUTPUT_TYPE;var n=document.createElement("div");n.className=v.POPUP_DOWNLOAD_BODY_OUTPUT_TYPE_TAB_BG,t.appendChild(n);var i=this.webTabElement=document.createElement("div");i.className=v.POPUP_DOWNLOAD_BODY_OUTPUT_TYPE_TAB,i.setAttribute(Z.OUTPUT_TYPE,W.c.WEB);var a=document.createElement("label");a.innerText=A.CRM.get(H.a.TOOLS_POPUP_DOWNLOAD_OUTPUT_TYPE_WEB),i.appendChild(a),t.appendChild(i);var r=this.printTabElement=document.createElement("div");r.className=v.POPUP_DOWNLOAD_BODY_OUTPUT_TYPE_TAB,r.setAttribute(Z.OUTPUT_TYPE,W.c.PRINT);var s=document.createElement("label");s.innerText=A.CRM.get(H.a.TOOLS_POPUP_DOWNLOAD_OUTPUT_TYPE_PRINT),r.appendChild(s),t.appendChild(r);var o=[i,r];i.addEventListener("click",function(){e.selectedOutputType!==W.c.WEB&&(J.toggleElementActiveOfElements(o,i),e.selectedOutputType=W.c.WEB,e.changeToWebTypeButtonUI(),c())}),r.addEventListener("click",function(){e.selectedOutputType!==W.c.PRINT&&(J.toggleElementActiveOfElements(o,r),e.selectedOutputType=W.c.PRINT,e.changeToPrintTypeButtonUI(),c())});var l=this;function c(){l.infoTooltipPopup.hide(),l.updateFileTypeUI(),l.updateImageCombineUI(),l.updateDownloadAvailableStatus(),l.updateOutputInfoUI(),l.updateDownloadButtonUI()}return t}},{key:"makeFileTypeElement",value:function(){var e=this,t=document.createElement("div");t.className=v.POPUP_DOWNLOAD_BODY_FILE_TYPE;var n=document.createElement("label");n.className=v.POPUP_DOWNLOAD_BODY_TITLE,n.innerText=A.CRM.get(H.a.TOOLS_POPUP_DOWNLOAD_FILE_TYPE_TITLE),t.appendChild(n);var i=this.fileTypeButtonAreaElement=document.createElement("div");i.className=v.POPUP_DOWNLOAD_BODY_FILE_TYPE_BUTTON_AREA,this.fileTypeIcons.forEach(function(t){var n=document.createElement("button");n.className=v.POPUP_DOWNLOAD_BODY_FILE_TYPE_BUTTON;var i,a=e.popupCallback.getFileTypeIconElements();switch(t.imgFileType){case W.b.PDF:i=a.pdf;break;case W.b.PNG:i=a.png;break;case W.b.PNG_TRANSPARENT:i=a.pngTransparent;break;default:i=a.jpg}i.classList.add(v.POPUP_DOWNLOAD_BODY_FILE_TYPE_BUTTON_ICON),t.isSelect&&n.classList.add(R.a.ACTIVE),n.appendChild(i),t.tooltipTxt&&z.a.createTooltip(n,z.b.T,{title:{name:t.tooltipTxt}}),n.setAttribute(Z.FILE_TYPE,t.imgFileType),t.outputType===W.c.PRINT?e.printFileTypeButtonElements.push(n):e.webFileTypeButtonElements.push(n)});var a=this;function r(e){e.forEach(function(t){t.addEventListener("click",function(){a.selectedImageFileType=t.getAttribute(Z.FILE_TYPE),J.toggleElementActiveOfElements(e,t),a.updateImageCombineUI(),a.selectedImageFileType===W.b.PDF&&(a.updateDownloadAvailableStatus(),a.updateOutputInfoUI(),a.updateDownloadButtonUI())})})}return r(this.webFileTypeButtonElements),r(this.printFileTypeButtonElements),this.webFileTypeButtonElements.forEach(function(e){return i.appendChild(e)}),t.appendChild(i),t}},{key:"makeSelectPageElement",value:function(){var e=this,n=this.selectPageElement=document.createElement("div");n.className=v.POPUP_DOWNLOAD_BODY_SELECT_PAGE;var i=document.createElement("label");i.className=v.POPUP_DOWNLOAD_BODY_TITLE,i.innerText=A.CRM.get(H.a.TOOLS_POPUP_DOWNLOAD_SELECT_PAGE_TITLE),n.appendChild(i);var a=this.selectPageButtonAreaElement=document.createElement("div");a.className=v.POPUP_DOWNLOAD_BODY_DROPDOWN_BUTTON_AREA,Object(K.setToolsIcon)(a,K.ToolsIcon.GREATER_THAN,!0);var r=document.createElement("button");r.className=v.POPUP_DOWNLOAD_BODY_SELECT_PAGE_BUTTON;var s=this.selectPageButtonLabelElement=document.createElement("label");s.innerText=this.getSelectPageButtonText(),r.appendChild(s),a.appendChild(r),n.appendChild(a);var o=document.createElement("div");o.className=v.POPUP_DOWNLOAD_BODY_DROPDOWN,J.hideElement(o),this.selectPageScroll=new G.a(!1,!0),this.selectPageScroll.element.classList.add(v.POPUP_DOWNLOAD_BODY_SELECT_PAGE_LIST_CONTAINER),this.selectPageScroll.contents.appendChild(this.makeSelectPageItemListElement()),o.appendChild(this.selectPageScroll.element);var l=this.selectPageDoneButtonElement=document.createElement("button");return l.className=v.POPUP_DOWNLOAD_BODY_SELECT_PAGE_DONE_BUTTON,l.innerText=A.CRM.get(H.a.TOOLS_POPUP_DOWNLOAD_SELECT_PAGE_DONE),o.appendChild(l),this.wrapper.appendChild(o),a.addEventListener("click",function(){e.toggleDropdownUIVisible(o),J.toggleElementActive(a)}),l.addEventListener("click",function(){t.hideDropdownUI()}),n}},{key:"makeSelectPageItemListElement",value:function(){var e=this,t=this.selectPageItemListElement=document.createElement("ul");t.className=v.POPUP_DOWNLOAD_BODY_SELECT_PAGE_LIST_ITEMS;var n=document.createElement("li"),i=this.allPageCheckBoxElement=document.createElement("input");i.type="checkbox",i.checked=!0,n.appendChild(i);var a=document.createElement("label");a.className=v.POPUP_DOWNLOAD_BODY_DROPDOWN_TEXT,a.innerText=ne.SELECT_PAGE_ALL_PAGE,Object(K.setToolsIcon)(a,K.ToolsIcon.CHECK),n.appendChild(a),t.appendChild(n);var r=function(t,n){t.preventDefault(),e.updateRelatedSelectPage(n)};n.addEventListener("click",function(e){r(e,i)}),this.thumbImgList=[];for(var s=function(n){var i=document.createElement("li"),a=new Image;e.thumbImgList.push(a),i.appendChild(a);var s=document.createElement("input");s.type="checkbox",s.value=n.toString(),s.checked=!0,i.appendChild(s);var o=document.createElement("label"),l=ne.SELECT_PAGE;o.innerText="".concat(n+1," ").concat(l),Object(K.setToolsIcon)(o,K.ToolsIcon.CHECK),i.appendChild(o),t.appendChild(i),i.addEventListener("click",function(e){r(e,s)})},o=0;o<this.pageCount;o++)s(o);return t}},{key:"makeOutputInfoElement",value:function(){var e=this,t=this.outputInfoAreaElement=document.createElement("div");t.className=v.POPUP_DOWNLOAD_BODY_OUTPUT_INFO;var n=document.createElement("label");n.className=v.POPUP_DOWNLOAD_BODY_TITLE,n.innerText=A.CRM.get(H.a.TOOLS_POPUP_DOWNLOAD_OUTPUT_INFO_TITLE),t.appendChild(n);var i=document.createElement("button");i.className=v.POPUP_DOWNLOAD_INFO_BUTTON,Object(K.setToolsIcon)(i,K.ToolsIcon.OUTLINE);var a=document.createElement("label");a.innerText="도움말",i.appendChild(a),i.addEventListener("click",function(t){e.updateInfoTooltipUI(),e.infoTooltipPopup.toggleVisible(),t.stopPropagation()}),t.appendChild(i),t.appendChild(this.outputInfoTextBox.element);var r=this.outputInfoTipElement=document.createElement("label");return r.className=v.POPUP_DOWNLOAD_BODY_OUTPUT_INFO_TIP,r.innerText=A.CRM.get(H.a.TOOLS_POPUP_DOWNLOAD_OUTPUT_INFO_TIP),t.appendChild(r),t}},{key:"makeFooterUI",value:function(){var e=document.createElement("div");return e.className=v.POPUP_DOWNLOAD_FOOTER,e.appendChild(this.makeSingleDownloadElement()),e.appendChild(this.makeDownloadElementWebType()),e.appendChild(this.highResTester.elementWrapper),this.footerElement=e,e}},{key:"makeSingleDownloadElement",value:function(){var e=this,t=this.oldDownloadButtonElement=document.createElement("button");return t.tabIndex=-1,t.className=v.POPUP_DOWNLOAD_FOOTER_DOWNLOAD_BUTTON,t.innerText=A.CRM.get(H.a.TOOLS_POPUP_DOWNLOAD_DOWNLOAD_BUTTON_DEFAULT),t.addEventListener("click",function(){e.popupCallback.environment.isLogin()?(t.disabled=!0,e.popupCallback.environment.isDevMode()?(e.popupCallback.confirmDownloadAction(e.downloadForPrint.bind(e)),e.close()):e.downloadForPrint()):e.popupCallback.openLoginPopup(ee.a.DOWNLOAD_PRINT)}),t}},{key:"downloadForPrint",value:function(){var e=this.selectedDownloadType===W.a.HIGH_RESOLUTION||this.selectedOutputType===W.c.PRINT,t=this.selectedOutputType===W.c.PRINT;this.doDownload({isHighResolution:e,isForceHighResolution:t})}},{key:"makeDownloadElementWebType",value:function(){var e=this,t=this.webTypeDownloadAreaElement=document.createElement("div");t.className=v.POPUP_DOWNLOAD_FOOTER_DOWNLOAD_BUTTON_AREA;var n=this.quickDownloadButtonElement=document.createElement("button");n.tabIndex=-1,n.innerText=A.CRM.get(H.a.TOOLS_POPUP_DOWNLOAD_DOWNLOAD_TYPE_ITEM_QUICK),n.setAttribute(Z.DOWNLOAD_TYPE,W.a.QUICK),t.appendChild(n);var i=this.highResDownloadButtonElement=document.createElement("button");return i.tabIndex=-1,i.innerText=A.CRM.get(H.a.TOOLS_POPUP_DOWNLOAD_DOWNLOAD_TYPE_ITEM_HIGH_RESOLUTION),i.setAttribute(Z.DOWNLOAD_TYPE,W.a.HIGH_RESOLUTION),t.appendChild(i),n.addEventListener("click",function(){n.disabled=!0,e.doDownload({isHighResolution:!1})}),i.addEventListener("click",function(){e.popupCallback.environment.isLogin()?(i.disabled=!0,e.doDownload({isHighResolution:!0})):e.popupCallback.openLoginPopup(ee.a.DOWNLOAD_HIGH)}),t}},{key:"doDownload",value:function(e){this.popupCallback.downloadAction({selectedPages:this.selectedPages,selectedFileType:this.selectedImageFileType,isApplyHighResolution:e.isHighResolution,printScale:e.printScale?e.printScale:1,isForceHighResolution:e.isForceHighResolution,isImgCombine:this.imgCombine.isChecked(),isWebDpi:this.selectedOutputType===W.c.WEB}),this.doneDownloadEvent(e.isHighResolution)}},{key:"doneDownloadEvent",value:function(e){var t=this;this.downloadExecuteEvent&&e&&this.downloadExecuteEvent();try{var n=this.fileTypeIcons.find(function(e){return e.imgFileType===t.selectedImageFileType&&e.outputType===t.selectedOutputType}).tooltipTxt,i=null,a=null;e?this.selectedOutputType===W.c.PRINT?(a=te.c.DOWNLOAD_PRINT,i="인쇄용 다운로드"):(a=te.c.DOWNLOAD_HIGH,i="고해상도 다운로드"):(a=te.c.DOWNLOAD_QUICK,i="빠른 다운로드"),te.a.moveVirtualPage(a),te.a.sendEvent("다운로드",i,n,!0),ie.reportSales()}catch(e){}this.close()}},{key:"toggleDropdownUIVisible",value:function(e){e.classList.contains(R.a.HIDE)?(t.hideDropdownUI(),J.showElement(e),this.updateSelectPage()):J.hideElement(e)}},{key:"updateSelectPage",value:function(){var e=this;this.updateSelectPageListHeightByPageCount(),o.a.dispatch(new l.c(function(t){e.thumbImgList.forEach(function(){var e=s()(a.a.mark(function e(n,i){var r,s,o,l,c;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.pages[i],c=r.sheetSize.width/r.sheetSize.height,r.sheetSize.width>r.sheetSize.height?(s=n.height/r.sheetSize.height,l=n.height,o=l*c):(s=n.width/r.sheetSize.width,o=n.width,l=o/c),e.next=5,r.renderThumbnail(o,l,s);case 5:n.src=e.sent;case 6:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}())}))}},{key:"hideDropdownAndTooltipUI",value:function(){t.hideDropdownUI(),this.infoTooltipPopup.hide()}},{key:"updateInfoTooltipUI",value:function(){var e=this.selectedOutputType===W.c.WEB?J.getFirstChildLabelWidth(this.webTabElement):J.getFirstChildLabelWidth(this.printTabElement);this.infoTooltipPopup.updateUI({outputType:this.selectedOutputType,underBarWidth:e,isAdminMode:this.popupCallback.environment.isAdminMode(),isDevMode:this.popupCallback.environment.isDevMode()})}},{key:"updateRelatedSelectPage",value:function(e){e.checked=!e.checked,this.updateSelectedPages(e),this.updateSelectPageButtonUI(),this.updateDownloadAvailableStatus(),this.updateImageCombineUI(),this.updateOutputInfoUI(),this.updateDownloadButtonUI()}},{key:"updateSelectedPages",value:function(e){if(e===this.allPageCheckBoxElement)e.checked?this.initSelectedPagesByPageCount():this.selectedPages=[],this.toggleCheckAllPage(e.checked);else{var t=this.allPageCheckBoxElement,n=Number(e.value),i=this.selectedPages.indexOf(n);i>-1?(this.selectedPages.splice(i,1),t.checked&&(t.checked=!1)):(this.selectedPages.push(n),this.selectedPages.length===this.pageCount&&(t.checked=!0)),this.selectedPages.sort(function(e,t){return e-t})}}},{key:"updateSelectPageListHeightByPageCount",value:function(){var e=this.selectPageItemListElement.children[0],t=this.selectPageItemListElement.children.length,n=$(e).outerHeight(!0)*t;this.selectPageScroll.element.style.height="".concat(Math.min(n,216),"px")}},{key:"updateSelectPageButtonUI",value:function(){var e=this.selectPageButtonAreaElement,t=this.selectPageButtonLabelElement;this.selectedPages.length>0?(e.classList.remove(v.POPUP_BUTTON_HIGHLIGHT),t.innerText=this.getSelectPageButtonText()):(e.classList.add(v.POPUP_BUTTON_HIGHLIGHT),t.innerText=ne.SELECT_PAGE_DEFAULT);var n=this.selectPageDoneButtonElement;this.popupCallback.environment.isDevMode()?n.classList.add(R.a.DEV_MODE):n.classList.remove(R.a.DEV_MODE)}},{key:"getSelectPageButtonText",value:function(){var e;e=(this.selectedPages[0]+1).toString();var t=this.selectedPages.length;if(1===t)e+=" ".concat(ne.SELECT_PAGE);else if(t>1&&t<this.pageCount){for(var n=1;n<t;n++){if(8===n){e+="".concat(", ","...");break}var i=this.selectedPages[n]+1;e+="".concat(", ").concat(i.toString())}e+=" ".concat(ne.SELECT_PAGE)}else e="".concat(ne.SELECT_PAGE_ALL_PAGE," (1~").concat(this.pageCount,")");return e}},{key:"toggleCheckAllPage",value:function(e){var t=this.getCheckboxElementsOfSelectPage(),n=!0,i=!1,a=void 0;try{for(var r,s=t[Symbol.iterator]();!(n=(r=s.next()).done);n=!0){r.value.checked=e}}catch(e){i=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}}},{key:"changeToWebTypeButtonUI",value:function(){var e=this.fileTypeButtonAreaElement;t.clearChildNodes(e),this.webFileTypeButtonElements.forEach(function(t){e.appendChild(t)})}},{key:"changeToPrintTypeButtonUI",value:function(){var e=this.fileTypeButtonAreaElement;t.clearChildNodes(e),this.printFileTypeButtonElements.forEach(function(t){e.appendChild(t)})}},{key:"updateOutputInfoUI",value:function(){this.selectedOutputType===W.c.PRINT?this.outputInfoAreaElement.classList.add(String(W.c.PRINT)):this.outputInfoAreaElement.classList.remove(String(W.c.PRINT)),this.outputInfoTextBox.updateUI({isDownloadEnable:this.isHighResDownloadAvailable(),enableOption:{selectedPageCount:this.selectedPages.length,outputType:this.selectedOutputType,outputInfo:this.popupCallback.getPrintSizeInfo(),isDevMode:this.popupCallback.environment.isDevMode(),isImgCombine:this.imgCombine.isChecked(),isiOSBigSize:this.isBigSizeIniOS()},disableOption:{selectedPageCount:this.selectedPages.length,selectedPageIdxList:this.selectedPages,acceptableInfo:this.popupCallback.getDownloadAcceptableInfo(),outputInfo:this.popupCallback.getPrintSizeInfo(),isImgCombine:this.imgCombine.isChecked(),isImgCombineOverMaxPageSize:this.isImgCombineOverMaxPageSize()}}),this.updateOutputInfoTipUI()}},{key:"updateOutputInfoTipUI",value:function(){var e=this.outputInfoTipElement;this.selectedOutputType===W.c.PRINT?J.showElement(e):J.hideElement(e)}},{key:"updateDownloadButtonUI",value:function(){var e=this.oldDownloadButtonElement;e.disabled=!1;var t=A.CRM.get(H.a.TOOLS_POPUP_DOWNLOAD_DOWNLOAD_BUTTON_DEFAULT),n=A.CRM.get(H.a.TOOLS_POPUP_DOWNLOAD_DOWNLOAD_BUTTON_LOGIN);this.selectedOutputType===W.c.PRINT?e.classList.add(R.a.DEV_MODE):e.classList.remove(R.a.DEV_MODE),this.popupCallback.environment.isLogin()||!this.isTestMode()?e.innerText=t:e.innerText=n,this.isHighResDownloadAvailable()?e.classList.remove(R.a.DISABLE):e.classList.add(R.a.DISABLE);var i=this.webTypeDownloadAreaElement;if(this.selectedOutputType===W.c.WEB){J.showElement(i),J.hideElement(e);var a=!0,r=!1,s=void 0;try{for(var o,l=i.childNodes[Symbol.iterator]();!(a=(o=l.next()).done);a=!0){var c=o.value;c.disabled=!1,this.isHighResDownloadAvailable()?c.classList.remove(R.a.DISABLE):c.classList.add(R.a.DISABLE)}}catch(e){r=!0,s=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw s}}var u=this.quickDownloadButtonElement;this.isQuickDownloadAvailable()?u.classList.remove(R.a.DISABLE):u.classList.add(R.a.DISABLE);var d=this.highResDownloadButtonElement;this.isHighResDownloadAvailable()?d.classList.remove(R.a.DISABLE):d.classList.add(R.a.DISABLE)}else J.showElement(e),J.hideElement(i);this.highResTester.updateDownloadButtonUI()}},{key:"updateImageCombineUI",value:function(){this.selectedPages.length>1&&this.selectedOutputType===W.c.WEB?this.imgCombine.show():this.imgCombine.hide(),this.selectedImageFileType===W.b.PDF?(this.imgCombine.disable(),this.imgCombine.initSetting()):this.imgCombine.enable()}},{key:"addDownloadButtonEventListener",value:function(e){this.downloadExecuteEvent=e}},{key:"getPrintScale",value:function(){return this.highResTester.getPrintScale()}},{key:"getOutputType",value:function(){return this.popupCallback.pageOption.getSizeOption().unit!==Q.b.PX?W.c.PRINT:W.c.WEB}},{key:"isTestMode",value:function(){return this.popupCallback.environment.isDevMode()||this.popupCallback.environment.isAdminMode()}},{key:"isHighResDownloadAvailable",value:function(){return this.downloadAvailableStatus===ce.ENABLE}},{key:"isBigSizeIniOS",value:function(){if(this.popupCallback.environment.isIOS()){var e=this.popupCallback.getPrintSizeInfo();if(e.pageWidth>4096||e.pageHeight>4096)return!0}return!1}},{key:"isQuickDownloadAvailable",value:function(){return this.downloadAvailableStatus===ce.ENABLE&&(!this.imgCombine.isChecked()&&!this.isBigSizeIniOS())}},{key:"isImgCombineOverMaxPageSize",value:function(){return 65536<this.popupCallback.getPrintSizeInfo().pageHeight*this.selectedPages.length}}],[{key:"hideDropdownUI",value:function(){var e=document.getElementsByClassName(v.POPUP_DOWNLOAD_BODY_DROPDOWN_BUTTON_AREA),t=!0,n=!1,i=void 0;try{for(var a,r=e[Symbol.iterator]();!(t=(a=r.next()).done);t=!0){a.value.classList.remove(R.a.ACTIVE)}}catch(e){n=!0,i=e}finally{try{t||null==r.return||r.return()}finally{if(n)throw i}}var s=document.getElementsByClassName(v.POPUP_DOWNLOAD_BODY_DROPDOWN),o=!0,l=!1,c=void 0;try{for(var u,d=s[Symbol.iterator]();!(o=(u=d.next()).done);o=!0){var p=u.value;J.hideElement(p)}}catch(e){l=!0,c=e}finally{try{o||null==d.return||d.return()}finally{if(l)throw c}}}},{key:"clearChildNodes",value:function(e){for(;e.hasChildNodes();)e.removeChild(e.lastChild)}},{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}(U.a);m()(ue,"ID_ELEMENT_WRAPPER","download_popup"),function(e){e[e.DISABLE=0]="DISABLE",e[e.ENABLE=1]="ENABLE"}(ce||(ce={}));var de=n(209),pe=n(378),he=n(108),me=function(e){function t(){var e;return u()(this,t),e=y()(this,L()(t).call(this)),m()(_()(e),"actionType",l.a.ONE_TIME),m()(_()(e),"changeDesign",function(){return!1}),m()(_()(e),"commitAction",function(n,i,a){e.meta=n,e.store=i,e.renderer=a;var r={isLogin:t.isLogin,isAdminMode:t.isAdminMode,isDevMode:t.isDevMode,isIOS:t.isIOS},s={getSizeOption:de.a.getSizeOption,getPrintoutOption:de.a.getPrintoutOption};ue.instance.setCallback({environment:r,pageOption:s,downloadAction:pe.a.doDownload,confirmDownloadAction:pe.a.confirmDownload,getFileTypeIconElements:pe.a.getFileTypeIconElements,getPrintSizeInfo:pe.a.getOutputInfo,openLoginPopup:t.openLoginPopup,getDownloadAcceptableInfo:pe.a.getDownloadAcceptableInfo})}),m()(_()(e),"rollbackAction",function(){}),m()(_()(e),"recycle",function(){}),e.doSaveQueue=!1,e.renderAuto=!1,e}return b()(t,e),p()(t,null,[{key:"isLogin",value:function(){return o.a.instance.user.isLogin()}},{key:"isAdminMode",value:function(){return o.a.instance.env.adminMode}},{key:"isDevMode",value:function(){return o.a.instance.env.devMode}},{key:"isIOS",value:function(){return o.a.isIOS()}},{key:"openLoginPopup",value:function(e,t,n){he.a.openLoginPopup(e,t,n)}}]),t}(l.b),ge=n(128),ve=n(52),fe=n(142),Ee=n(174),Te=n(363),ye=n(164),Ie=n(149),Le=n(62),ke=n(117),_e=n(75),we=n(51),be=n(54),Se=n(56),Oe=n(321),Ce=n(86),Pe=n(191),De=n(49),Ae=function(){function e(){u()(this,e)}return p()(e,null,[{key:"isSimilarTo",value:function(t,n){var i=Math.abs(e.mouseV.x-t),a=Math.abs(e.mouseV.y-n),r=o.a.getEnv().browser.isMobile()?e.MOBILE_SENSITIVITY:e.SENSITIVITY;return i<=r&&a<=r}},{key:"downMouse",value:function(t,n){this.mouseV.x=t,this.mouseV.y=n,e.isDowned=!0,e._isSamePoint=!0}},{key:"moveMouse",value:function(t,n){e.isDowned&&!e.isSimilarTo(t,n)&&(e._isSamePoint=!1)}},{key:"upMouse",value:function(){e.isDowned=!1,e._isSamePoint=!1}},{key:"isSamePoint",get:function(){return e._isSamePoint}}]),e}();m()(Ae,"mouseV",new De.c(0,0)),m()(Ae,"isDowned",!1),m()(Ae,"_isSamePoint",!0),m()(Ae,"SENSITIVITY",0),m()(Ae,"MOBILE_SENSITIVITY",3);var Re=n(192),Me=function(e){function t(e,n,i,a,r,s,c,d){var p,h=arguments.length>8&&void 0!==arguments[8]&&arguments[8];return u()(this,t),p=y()(this,L()(t).call(this)),m()(_()(p),"isPossibleInCropMode",!0),m()(_()(p),"doSaveQueue",!1),m()(_()(p),"changeDesign",function(){return!1}),m()(_()(p),"actionType",l.a.MOUSE_DOWN),m()(_()(p),"commitAction",function(e,t,n){if(Re.a.instance.hide(),p.shiftKey||n.canvasRenderer.mouseDblClickManager.downMouse(p.offsetX,p.offsetY,p.isTouch),Ae.downMouse(p.offsetX,p.offsetY),document.activeElement instanceof HTMLInputElement&&document.activeElement.blur(),t.mouseAction.mode!==O.a.MODE_GRID_HANDLER_DOWN){var i=Object(Ie.a)(p.offsetX,p.offsetY),a=i.offsetX,r=i.offsetY;t.mouseAction.offsetX=p.offsetX,t.mouseAction.offsetY=p.offsetY;var s=!0,l=!0,c=!1,u=void 0;try{for(var d,h=e.pages[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var m=d.value;if(t.pageController.getPageRenderer(m).isInRange(p.offsetX,p.offsetY)){p.pageIdx=m.pageIdx,t.renderPageIdx=m.pageIdx,s=!1;break}}}catch(e){c=!0,u=e}finally{try{l||null==h.return||h.return()}finally{if(c)throw u}}var g=e.pages[p.pageIdx],v=t.pageController.getPageRenderer(g),f=v.getInRangeItem(a,r);switch(o.a.isCropMode()||o.a.dispatch(new Ce.f(f)),t.mouseAction.mode){case O.a.MODE_NAVIGATION:t.mouseAction.mode=O.a.MODE_NAVIGATION_DRAG,t.mouseAction.baseX=p.event.pageX,t.mouseAction.baseY=p.event.pageY;case O.a.MODE_NAVIGATION_DRAG:case O.a.MODE_MOBILE_DOWN:return;case O.a.MODE_HANDLER_RESIZE_T:case O.a.MODE_HANDLER_RESIZE_TR:case O.a.MODE_HANDLER_RESIZE_R:case O.a.MODE_HANDLER_RESIZE_BR:case O.a.MODE_HANDLER_RESIZE_B:case O.a.MODE_HANDLER_RESIZE_BL:case O.a.MODE_HANDLER_RESIZE_L:case O.a.MODE_HANDLER_RESIZE_TL:return t.mouseAction.baseX=p.event.pageX,t.mouseAction.baseY=p.event.pageY,n.handler.readyResize(),void t.activeItems.forEach(function(e){e.isLazyHandlerHandlePosition(Oe.a.mouseActionToHandle(t.mouseAction.mode))&&e.setStatus(we.d.LAZY),e instanceof Le.b&&e.isEditMode&&o.a.dispatch(new ke.c(e))});case O.a.MODE_HANDLER_MOVE_START:return void(t.mouseAction.mode=O.a.MODE_ITEM_DRAG);case O.a.MODE_HANDLER_ROTATE:return void(t.mouseAction.mode=O.a.MODE_ITEM_ROTATE);case O.a.MODE_GUIDELINE_MOVE:return}if(o.a.isCropMode())v.getInRangeItems(a,r,a,r)&&(t.mouseAction.mode=O.a.MODE_SELECT_ONE_OR_DRAG);else if(!p.isTouch||!Pe.a.isItemSkinable(f,v.page.sheetSize)){var E=g.getAllSingleItems(),T=E.filter(function(e){return!0===e.select}),y=v.getInRangeGroup(a,r);if(!s&&y){var I=y.getAllSingleMembers(),L=y.getSelectedItem();if(L instanceof Le.b&&L===f)return void(L.isEditArea(a,r)?(t.mouseAction.baseX=p.offsetX,t.mouseAction.baseY=p.offsetY,t.mouseAction.mode=O.a.MODE_TEXT_EDIT):f.isEditMode&&(o.a.dispatch(new ke.c(L)),p.canvas.style.cursor="move",t.mouseAction.mode=O.a.MODE_ITEM_DRAG));var k=E.indexOf(f),_=E.indexOf(I[I.length-1]),w=I.some(function(e){return e.select});if(w&&T.some(function(e){return I.indexOf(e)<0}))return void(t.mouseAction.mode=O.a.MODE_SELECT_ONE_OR_DRAG);if(_>=k&&!p.shiftKey&&(!p.ctrlKey||0===t.activeItems.length))return Se.a.selectItems(I),w&&I.indexOf(f)>-1&&y.setSelectedItem(f),n.renderHandler(e,t),void(t.mouseAction.mode=O.a.MODE_SELECT_ONE_OR_DRAG)}var b=T[T.length-1],S=E.indexOf(f)>E.indexOf(b),C=1===T.length&&T[0]===f;if(!s&&(!S||f.isLock())&&(t.mouseAction.mode===O.a.MODE_HANDLER_DOWN||f instanceof Le.b&&C)){if(null==f||!f.select)return void(t.mouseAction.mode=O.a.MODE_SELECT_ONE_OR_DRAG);if(T.push(f),be.b.isSameGroup(T))return Se.a.appendSelectedItem(f),void(t.mouseAction.mode=O.a.MODE_SELECT_ONE_OR_DRAG);if(f.select&&f.props.isCanUserMove())return void(f instanceof Le.b?f.isEditArea(a,r)&&(t.mouseAction.baseX=p.offsetX,t.mouseAction.baseY=p.offsetY,(f.isEditMode||!f.isEditMode&&!p.shiftKey)&&(t.mouseAction.mode=O.a.MODE_TEXT_EDIT)):f instanceof _e.b&&f.select&&!f.isLock()?(t.mouseAction.baseX=p.offsetX,t.mouseAction.baseY=p.offsetY,t.activeItems.length>1?p.shiftKey||(t.mouseAction.mode=O.a.MODE_ITEM_DRAG):f.selectedColNo>=0?t.mouseAction.mode=O.a.MODE_GRID_BORDER_HOR_DRAG:f.selectedRowNo>=0?t.mouseAction.mode=O.a.MODE_GRID_BORDER_VER_DRAG:f.positionTool.getCell(a,r)?t.mouseAction.mode=O.a.MODE_GRID_CLICK:t.mouseAction.mode=O.a.MODE_GRID_HANDLER_DOWN):t.mouseAction.mode=O.a.MODE_SELECT_ONE_OR_DRAG)}if(!(s||null==f||f.isLock()||g.background.isSkinItem(f))||o.a.isSpoidMode())return s||!f||f.select||p.shiftKey||p.ctrlKey&&0!==t.activeItems.length||g.background.isSkinItem(f)||o.a.isSpoidMode()?void 0:(Se.a.selectItem(f),n.renderHandler(e,t),void(t.mouseAction.mode=O.a.MODE_SELECT_ONE_OR_DRAG));if(t.activeItems.length>0&&o.a.dispatch(new Ce.d(t.activeItems)),p.shiftKey||p.ctrlKey||Se.a.unselectAllItems(),t.mouseAction.mode=O.a.MODE_MULTI_SELECT,t.mouseAction.baseX=p.offsetX,t.mouseAction.baseY=p.offsetY,!p.isTouch){var P=n.canvasRenderer.pagingManager.getSelectAreaOffset();p.selectArea.style.left="".concat(Math.min(p.offsetX,t.mouseAction.baseX)-P.x,"px"),p.selectArea.style.top="".concat(Math.min(p.offsetY,t.mouseAction.baseY)-P.y,"px"),p.selectArea.style.width="1px",p.selectArea.style.height="1px",p.selectArea.style.display="block"}}}}),m()(_()(p),"rollbackAction",function(){}),m()(_()(p),"recycle",function(){p.canvas=null,p.event=null}),p.pageIdx=e,p.canvas=n,p.selectArea=i,p.event=a,p.offsetX=r,p.offsetY=s,p.shiftKey=c,p.ctrlKey=d,p.isTouch=h,p.renderAuto=!1,p}return b()(t,e),t}(l.b),Ne=n(50),xe=n(227),Be=n(87),Ue=n(92),He=n(66),Ge=n(126),ze=function(e){function t(e,n,i,a,r,s,c,d){var p;return u()(this,t),p=y()(this,L()(t).call(this)),m()(_()(p),"changeDesign",function(){return!1}),m()(_()(p),"isPossibleInCropMode",!0),m()(_()(p),"doSaveQueue",!1),m()(_()(p),"actionType",l.a.MOUSE_UP),m()(_()(p),"outOfPage",!0),m()(_()(p),"commitAction",function(e,t,n){Ae.upMouse();var i=!0,a=!1,r=void 0;try{for(var s,l=e.pages[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var c=s.value;if(t.pageController.getPageRenderer(c).isInRange(p.offsetX,p.offsetY)){t.renderPageIdx=c.pageIdx,p.outOfPage=!1;break}}}catch(e){a=!0,r=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw r}}var u=e.pages[p.pageIdx],d=Object(Ie.a)(p.offsetX,p.offsetY),h=d.offsetX,m=d.offsetY,g=Object(Ie.a)(t.mouseAction.baseX,t.mouseAction.baseY),v=g.offsetX,f=g.offsetY,E={absoluteX:h,absoluteY:m,absoluteBaseX:v,absoluteBaseY:f},T=t.pageController.getPageRenderer(u),y=T.getInRangeItem(h,m);t.mouseAction.mode===O.a.MODE_GRID_HANDLER_DOWN&&t.activeItems.filter(function(e){return e instanceof _e.b}).length>0&&(y=t.activeItems.filter(function(e){return e instanceof _e.b})[0]),p.doAction(e,t,n,E);var I=u.getAllSingleItems();if(I.filter(function(e){return e instanceof Le.b}).forEach(function(e){e.isEditMode&&y!==e&&t.mouseAction.mode!==O.a.MODE_TEXT_SELECT&&t.mouseAction.mode!==O.a.MODE_NONE&&t.pageController.getItemRenderer(e).toggleEditMode()}),I.filter(function(e){return e instanceof _e.b}).forEach(function(e){if(y!==e&&(t.mouseAction.mode!==O.a.MODE_GRID_CELLS_SELECT||!e.select)){var n=t.pageController.getItemRenderer(e);e.isTextEditMode&&n.toggleEditMode(h,m),e.unselectAllCell(),n.updateContentsAfter(null,t.pageEditScale)}}),!o.a.isCropMode())if(t.activeItems.length){var L=!0,k=!1,_=void 0;try{for(var w,b=e.pages[Symbol.iterator]();!(L=(w=b.next()).done);L=!0){var S=w.value,C=S.getAllSingleItems();if(-1!==C.indexOf(t.activeItems[0])){t.renderPageIdx=S.pageIdx,t.activeItems=C.filter(function(e){return e.select});break}}}catch(e){k=!0,_=e}finally{try{L||null==b.return||b.return()}finally{if(k)throw _}}}else Se.a.unselectAllItems();switch(p.selectArea.style.display="none",e.pages.forEach(function(e){var n=t.pageController.getPageRenderer(e);n.updateHoverLayer(t.activeItems),n.pageToolboxTop.setBtnFold(!0)}),t.activeItems.forEach(function(e){e.setStatus(we.d.STABLE)}),t.mouseAction.mode){case O.a.MODE_HANDLER_RESIZE_T:case O.a.MODE_HANDLER_RESIZE_TR:case O.a.MODE_HANDLER_RESIZE_R:case O.a.MODE_HANDLER_RESIZE_BR:case O.a.MODE_HANDLER_RESIZE_B:case O.a.MODE_HANDLER_RESIZE_BL:case O.a.MODE_HANDLER_RESIZE_L:case O.a.MODE_HANDLER_RESIZE_TL:n.renderCanvas(e,t,t.activeItems),n.renderHandler(e,t,{type:Be.a.RESIZE})}if(t.mouseAction.mode!==O.a.MODE_NAVIGATION){y instanceof Le.b&&y.isEditArea(h,m)||(p.canvas.style.cursor="default");var P=T.getInRangeGroup(h,m),D=u.background.backgroundItem;if(P||!y||o.a.isCropMode()||y!==D||T.isGroupSelected(h,m))t.mouseAction.mode=O.a.MODE_NONE;else E.absoluteBaseX!==E.absoluteX&&E.absoluteBaseY!==E.absoluteY&&t.mouseAction.mode!==O.a.MODE_SELECT_ONE_OR_DRAG&&t.mouseAction.mode!==O.a.MODE_MOBILE_DOWN?t.mouseAction.mode=O.a.MODE_NONE:(t.mouseAction.mode=O.a.MODE_BACKGROUND_SELECT,Se.a.selectBackgroundItem(!o.a.isMobileMode()))}t.activeItems.length&&n.renderHandler(e,t)}),m()(_()(p),"rollbackAction",function(e,t){}),m()(_()(p),"recycle",function(){p.canvas=null}),p.pageIdx=e,p.canvas=n,p.selectArea=i,p.event=a,p.offsetX=r,p.offsetY=s,p.isShiftKeyPush=c,p.isCtrlKeyPush=d,p}return b()(t,e),p()(t,[{key:"doAction",value:function(e,n,i,a){var r=t.HANDLER_MAP.get(n.mouseAction.mode);r?r(this,e,n,i,a):this.doDefaultAction(e,n,i,a)}},{key:"doDefaultAction",value:function(e,t,n,i){if(!o.a.isCropMode()&&!this.outOfPage){var a=e.pages[this.pageIdx],r=t.pageController.getPageRenderer(a).getSelectedItemInfo(i.absoluteX,i.absoluteY,a.background.backgroundItem);if(this.isShiftKeyPush||this.isCtrlKeyPush){if(r.selectedItem&&r.selectedItem===a.background.backgroundItem)return;A.ArrayUtil.isEmpty(r.selectedGroupItems)?r.selectedItem&&(r.selectedItem.select?Se.a.unselectItem(r.selectedItem):Se.a.appendSelectedItem(r.selectedItem)):r.selectedGroupItems[0].select?Se.a.unselectItem(r.selectedGroupItems[0]):Se.a.appendSelectedItems(r.selectedGroupItems)}else{if(Se.a.unselectAllItems(),r.selectedItem&&r.selectedItem===a.background.backgroundItem)return;A.ArrayUtil.isEmpty(r.selectedGroupItems)?r.selectedItem&&Se.a.appendSelectedItem(r.selectedItem):Se.a.appendSelectedItems(r.selectedGroupItems)}}}}]),t}(l.b);m()(ze,"HANDLER_MAP",new Map([[O.a.MODE_NAVIGATION,function(e,t,n,i,a){n.mouseAction.mode=O.a.MODE_NAVIGATION}],[O.a.MODE_NAVIGATION_DRAG,function(e,t,n,i,a){n.mouseAction.mode=O.a.MODE_NAVIGATION}],[O.a.MODE_MOBILE_SCROLL,function(e,t,n,i,a){n.mouseAction.mode=O.a.MODE_NONE}],[O.a.MODE_MULTI_SELECT,function(e,t,n,i,a){for(var r=function(n,i){var a=t.pages[n],r=a.getAllSingleItems(),s=r.filter(function(e){return e.hover}),l=1===s.length;if(r.forEach(function(t){if(Pe.a.isItemSkinable(t,a.sheetSize));else if((e.isShiftKeyPush||e.isCtrlKeyPush)&&t.select){if(t.hover){Se.a.unselectItem(t);var n=be.b.getRootGroup(t.groupId);if(n){var i=!0,r=!1,s=void 0;try{for(var o,c=n.getAllSingleMembers()[Symbol.iterator]();!(i=(o=c.next()).done);i=!0){o.value.hover=!1}}catch(e){r=!0,s=e}finally{try{i||null==c.return||c.return()}finally{if(r)throw s}}}}}else t.hover&&(l||t.props.isCanUserSelect()&&t.props.isCanUserMove()&&t.props.isCanUserResize())&&Se.a.appendSelectedItem(t);t.hover=!1}),s.length)return o.a.instance.renderPageIdx=a.pageIdx,"break"},s=0,l=t.pages.length;s<l;s++){if("break"===r(s))break}}],[O.a.MODE_PHOTO_CROP_UI_SELECT,function(e,t,n,i,a){var r=n.activeItems;if(1===r.length&&!r[0].isLock()){var s=r[0];Se.a.selectItem(s)}}],[O.a.MODE_GRID_CELLS_SELECT,function(e,t,n,i,a){var r=t.pages[e.pageIdx],s=n.pageController.getPageRenderer(r),l=s.getInRangeItem(a.absoluteX,a.absoluteY);if(l instanceof _e.b&&l.select&&!l.isLock()){var c=s.getPagePosition(n.mouseAction.baseX,n.mouseAction.baseY),u=s.getPagePosition(e.offsetX,e.offsetY);o.a.dispatch(new xe.a(l,c.x/n.zoomScale/n.pageEditScale,c.y/n.zoomScale/n.pageEditScale,u.x/n.zoomScale/n.pageEditScale,u.y/n.zoomScale/n.pageEditScale,e.isShiftKeyPush,e.event.ctrlKey,!0))}}],[O.a.MODE_GRID_CLICK,function(e,t,n,i,a){var r=t.pages[e.pageIdx],s=n.pageController.getPageRenderer(r),l=s.getInRangeItem(a.absoluteX,a.absoluteY);if(l instanceof _e.b&&l.select&&!l.isLock()){var c=s.getPagePosition(n.mouseAction.baseX,n.mouseAction.baseY),u=s.getPagePosition(e.offsetX,e.offsetY);o.a.dispatch(new xe.a(l,c.x/n.zoomScale/n.pageEditScale,c.y/n.zoomScale/n.pageEditScale,u.x/n.zoomScale/n.pageEditScale,u.y/n.zoomScale/n.pageEditScale,e.isShiftKeyPush,e.event.ctrlKey,!0))}e.renderAuto=!1}],[O.a.MODE_AFTER_MOVE_ITEM_TO_OTHER_PAGE,function(e,t,n,i,a){n.mouseAction.mode=O.a.MODE_NONE,Se.a.unselectAllItems()}],[O.a.MODE_GRID_HANDLER_DOWN,function(e,t,n,i,a){ze.HANDLER_MAP.get(O.a.MODE_GRID_BORDER_VER_DRAG)(e,t,n,i,a)}],[O.a.MODE_GRID_BORDER_HOR_DRAG,function(e,t,n,i,a){ze.HANDLER_MAP.get(O.a.MODE_GRID_BORDER_VER_DRAG)(e,t,n,i,a)}],[O.a.MODE_GRID_BORDER_VER_DRAG,function(e,t,n,i,a){n.mouseAction.mode=O.a.MODE_NONE}],[O.a.MODE_ITEM_DRAG,function(e,t,n,i,a){var r=t.pages[e.pageIdx],s=n.activeItems,l=s.slice(),c=[];if(s.length){var u=!0,d=!1,p=void 0;try{for(var h,m=function(){var e=h.value,t=n.pageController.getPageRenderer(e);if(l.slice().forEach(function(e){var n=o.a.instance.pageController.getItemRenderer(e).elements.elementWrapper.getBoundingClientRect();t.isPageInRange(n.left,n.top,n.right,n.bottom)&&c.push(l.splice(l.indexOf(e),1)[0])}),!l.length)return"break"},g=t.pages[Symbol.iterator]();!(u=(h=g.next()).done);u=!0){if("break"===m())break}}catch(e){d=!0,p=e}finally{try{u||null==g.return||g.return()}finally{if(d)throw p}}var v=!0,f=!1,E=void 0;try{for(var T,y=function(){var e=T.value;if(-1===l.indexOf(e))return"continue";var t=be.b.getGroupItemsAddedArray([e]);t.some(function(e){return-1!==c.indexOf(e)})&&(l=l.filter(function(e){return-1===t.indexOf(e)}))},I=l.slice()[Symbol.iterator]();!(v=(T=I.next()).done);v=!0)y()}catch(e){f=!0,E=e}finally{try{v||null==I.return||I.return()}finally{if(f)throw E}}o.a.isCropMode()||o.a.dispatch(new Ge.a(l.slice(),e.pageIdx,!0))}if(s=s.filter(function(e){return-1===l.indexOf(e)}),i.canvasRenderer.pagingManager.updateRenderPageIdx({x:a.absoluteX*n.zoomScale,y:a.absoluteY*n.zoomScale}),o.a.isDefaultMode()&&e.pageIdx!==n.renderPageIdx)return n.mouseAction.mode=O.a.MODE_AFTER_MOVE_ITEM_TO_OTHER_PAGE,o.a.dispatch(new Ue.l(t.pages[e.pageIdx],t.pages[n.renderPageIdx])),void(e.renderAuto=!1);if(!o.a.isCropMode()&&1===s.length&&s[0]instanceof Ne.e){var L=s[0];if(L.belongsTo===Ne.c.INDEPENDENT){var k=r.getAllSingleItems().filter(function(e){return e instanceof He.b}),_=!0,w=!1,b=void 0;try{for(var S,C=k[Symbol.iterator]();!(_=(S=C.next()).done);_=!0){var P=S.value;if(!P.isLock()){var D=P.getImageSrcStatus();if(D===He.a.SET_SRC||D===He.a.SET_SRC_STABLE)return o.a.dispatch(new Ue.o(P,L)),void(e.renderAuto=!1)}}}catch(e){w=!0,b=e}finally{try{_||null==C.return||C.return()}finally{if(w)throw b}}}}ze.HANDLER_MAP.get(O.a.MODE_ITEM_ROTATE)(e,t,n,i,a)}],[O.a.MODE_HANDLER_RESIZE_T,function(e,t,n,i,a){ze.HANDLER_MAP.get(O.a.MODE_ITEM_ROTATE)(e,t,n,i,a)}],[O.a.MODE_HANDLER_RESIZE_TR,function(e,t,n,i,a){ze.HANDLER_MAP.get(O.a.MODE_ITEM_ROTATE)(e,t,n,i,a)}],[O.a.MODE_HANDLER_RESIZE_R,function(e,t,n,i,a){ze.HANDLER_MAP.get(O.a.MODE_ITEM_ROTATE)(e,t,n,i,a)}],[O.a.MODE_HANDLER_RESIZE_BR,function(e,t,n,i,a){ze.HANDLER_MAP.get(O.a.MODE_ITEM_ROTATE)(e,t,n,i,a)}],[O.a.MODE_HANDLER_RESIZE_B,function(e,t,n,i,a){ze.HANDLER_MAP.get(O.a.MODE_ITEM_ROTATE)(e,t,n,i,a)}],[O.a.MODE_HANDLER_RESIZE_BL,function(e,t,n,i,a){ze.HANDLER_MAP.get(O.a.MODE_ITEM_ROTATE)(e,t,n,i,a)}],[O.a.MODE_HANDLER_RESIZE_L,function(e,t,n,i,a){ze.HANDLER_MAP.get(O.a.MODE_ITEM_ROTATE)(e,t,n,i,a)}],[O.a.MODE_HANDLER_RESIZE_TL,function(e,t,n,i,a){ze.HANDLER_MAP.get(O.a.MODE_ITEM_ROTATE)(e,t,n,i,a)}],[O.a.MODE_ITEM_RESIZE,function(e,t,n,i,a){ze.HANDLER_MAP.get(O.a.MODE_ITEM_ROTATE)(e,t,n,i,a)}],[O.a.MODE_ITEM_ROTATE,function(e,t,n,i,a){var r=t.pages[e.pageIdx],s=n.pageController.getPageRenderer(r).getInRangeItem(a.absoluteX,a.absoluteY);if(n.activeItems.length>0&&n.activeItems[0]instanceof _e.b);else if(1===n.activeItems.length&&n.activeItems[0]instanceof Le.b){var l=n.activeItems[0];if(l===s)return!l.isEditMode&&l.isEditArea(a.absoluteX,a.absoluteY)&&a.absoluteBaseX===a.absoluteX&&a.absoluteBaseY===a.absoluteY?o.a.dispatch(new ke.d(l,a.absoluteX/r.editScale,a.absoluteY/r.editScale)):l.isEditMode&&!l.isEditArea(a.absoluteX,a.absoluteY)&&o.a.dispatch(new ke.c(l)),void o.a.cutActionQ();if(l.isEditMode)return void o.a.dispatch(new ke.c(l))}i.handler.calculateRatio(),o.a.cutActionQ()}],[O.a.MODE_TEXT_EDIT,function(e,t,n,i,a){var r=t.pages[e.pageIdx],s=n.pageController.getPageRenderer(r),l=s.getInRangeItem(a.absoluteX,a.absoluteY),c=(o.a.getEnv().browser.isMobile()?Ae.MOBILE_SENSITIVITY:Ae.SENSITIVITY)/n.zoomScale,u=Math.abs(a.absoluteBaseX-a.absoluteX),d=Math.abs(a.absoluteBaseY-a.absoluteY);if(l instanceof Le.b&&l.isEditArea(a.absoluteX,a.absoluteY)&&u<=c&&d<=c){var p=s.getPagePosition(n.mouseAction.baseX,n.mouseAction.baseY),h=s.getPagePosition(e.offsetX,e.offsetY);o.a.dispatch(new ke.d(l,p.x/n.zoomScale/n.pageEditScale,p.y/n.zoomScale/n.pageEditScale,h.x/n.zoomScale/n.pageEditScale,h.y/n.zoomScale/n.pageEditScale,e.isShiftKeyPush))}}],[O.a.MODE_TEXT_SELECT,function(e,t,n,i,a){var r=t.pages[e.pageIdx],s=n.pageController.getPageRenderer(r),l=s.getInRangeItem(a.absoluteX,a.absoluteY);if(l instanceof Le.b&&l.isEditMode){var c=s.getPagePosition(n.mouseAction.baseX,n.mouseAction.baseY),u=s.getPagePosition(e.offsetX,e.offsetY);o.a.dispatch(new ke.d(l,c.x/n.zoomScale/n.pageEditScale,c.y/n.zoomScale/n.pageEditScale,u.x/n.zoomScale/n.pageEditScale,u.y/n.zoomScale/n.pageEditScale,e.isShiftKeyPush,!0))}}],[O.a.MODE_SELECT_ONE,function(e,t,n,i,a){t.pages[e.pageIdx].getAllSingleItems().forEach(function(t){e.isShiftKeyPush||e.isCtrlKeyPush||Se.a.unselectItem(t),t.hover=!1}),e.doDefaultAction(t,n,i,a)}]]));var Fe=n(119),We=n(147),Ke=n(280),Ve=function(e){function t(e,n,i,a){var r;return u()(this,t),r=y()(this,L()(t).call(this)),m()(_()(r),"isPossibleInCropMode",!0),m()(_()(r),"doSaveQueue",!1),m()(_()(r),"changeDesign",function(){return!1}),m()(_()(r),"actionType",l.a.MOUSE_DBLCLICK),m()(_()(r),"commitAction",function(e,n){var i=e.pages[r.pageIdx],a=n.pageController.getPageRenderer(i),s=Object(Ie.a)(r.offsetX,r.offsetY),l=s.offsetX,c=s.offsetY,u=a.getInRangeItem(l,c),d=o.a.isCropMode();if((!a.isGroupSelected(l,c)||d||u instanceof Le.b)&&!(o.a.instance.mouseAction.mode===O.a.MODE_NAVIGATION||u&&u.isLock())){var p=t.getPhotoItem(u);if(p){var h=a.getInRangeItems(l,c,l,c);t.canPhotoCropCancel(p,h)?o.a.dispatch(new Fe.d):p.tbpeId===u.tbpeId||h.includes(p)?d?o.a.dispatch(new Fe.c):o.a.dispatch(new Fe.b(p)):u instanceof Ne.e?o.a.dispatch(new Fe.c(p)):u instanceof He.b?o.a.dispatch(new We.h):o.a.dispatch(new Fe.c(p))}else if(u instanceof He.b&&u.getFrameColor()?o.a.dispatch(new We.g(u)):u instanceof _e.b&&!u.isTextEditMode&&o.a.dispatch(new Ke.b(u,l,c)),null!=u&&!o.a.isCropMode())if(u instanceof Le.b){var m=a.getPagePosition(r.offsetX,r.offsetY),g=m.x/n.zoomScale/i.editScale,v=m.y/n.zoomScale/i.editScale;u.isEditMode?o.a.dispatch(new ke.h(u,g,v,!1)):o.a.dispatch(new ke.d(u,g,v))}else;}}),m()(_()(r),"rollbackAction",function(){}),m()(_()(r),"recycle",function(){r.canvas=null}),r.pageIdx=e,r.canvas=n,r.offsetX=i,r.offsetY=a,r}return b()(t,e),p()(t,null,[{key:"getPhotoItem",value:function(e){var t;t=1===o.a.instance.activeItems.length&&o.a.instance.activeItems[0]instanceof Ne.e?o.a.instance.activeItems[0]:null;var n=e&&e instanceof Ne.e&&e.isBackground;return t=!t&&n?e:t}},{key:"canPhotoCropCancel",value:function(e,t){if(e.isEditMode){if(0===t.length)return!0;var n=!0,i=!1,a=void 0;try{for(var r,s=t[Symbol.iterator]();!(n=(r=s.next()).done);n=!0){var l=r.value;if(l instanceof He.b&&o.a.isCropMode()&&(l=l.innerPhotoItem),e.tbpeId===l.tbpeId)return!1}}catch(e){i=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return!0}return!1}}]),t}(l.b),Ye=n(73),je=n.n(Ye),$e=n(140),Xe=function(e){function t(e,n){var i;u()(this,t),i=y()(this,L()(t).call(this)),m()(_()(i),"timeout",3e3),i.gridItem=e,i.deltaThickness=n,i.commitTime=(new Date).getTime(),i.rowThickness=[],i.colThickness=[];var a=!0,r=!1,s=void 0;try{for(var l,c=e.rows[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var d=l.value;i.rowThickness.push(d.thickness)}}catch(e){r=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(r)throw s}}var p=!0,h=!1,g=void 0;try{for(var v,f=e.cols[Symbol.iterator]();!(p=(v=f.next()).done);p=!0){var E=v.value;i.colThickness.push(E.thickness)}}catch(e){h=!0,g=e}finally{try{p||null==f.return||f.return()}finally{if(h)throw g}}i.gridItem.isTextEditMode&&o.a.instance.pageController.getItemRenderer(i.gridItem).toggleEditMode(-1,-1);return i}return b()(t,e),p()(t,[{key:"recoveryOriginThicness",value:function(){var e=this;this.gridItem.cols.forEach(function(t,n){t.thickness=e.colThickness[n]}),this.gridItem.rows.forEach(function(t,n){t.thickness=e.rowThickness[n]}),this.gridItem.props.setLeft(this.oldLeft),this.gridItem.props.setTop(this.oldTop),this.gridItem.adjustSize(),this.gridItem.updateThicknessRatio()}}]),t}($e.a),Ze=function(e){function t(e,n){var i;return u()(this,t),i=y()(this,L()(t).call(this,e,n)),m()(_()(i),"actionType",l.a.GRID_CELL_THICKNESS),m()(_()(i),"isActionGroupEquals",function(e){return null!=e&&e.actionType===i.actionType&&(!(e.commitTime-i.commitTime>i.timeout)&&(i.gridItem===e.gridItem&&i.colNo===e.colNo))}),m()(_()(i),"concat",function(e){return e instanceof t&&e.colNo===i.colNo&&e.gridItem===i.gridItem&&(i.deltaThickness+=e.deltaThickness,!0)}),m()(_()(i),"commitAction",function(e,t,n){(i.oldLeft=i.gridItem.props.getLeft(),i.oldTop=i.gridItem.props.getTop(),i.gridItem.unselectAllCell(),i.gridItem.isTextEditMode)&&t.pageController.getItemRenderer(i.gridItem).toggleEditMode(-1,-1);i.gridItem.positionTool.setColWidth(i.colNo,i.deltaThickness),i.gridItem.adjustRowThickness(),i.gridItem.adjustColThickness(i.colNo===i.gridItem.col?i.colNo-1:i.colNo),i.gridItem.adjustSize(),i.gridItem.updateThicknessRatio(),n.renderCanvas(e,t,[i.gridItem]),n.renderHandler(e,t,{type:Be.a.GRID_CELL_THICKNESS_RESIZE})}),m()(_()(i),"rollbackAction",function(e,t,n){i.recoveryOriginThicness(),n.renderCanvas(e,t,[i.gridItem]),n.renderHandler(e,t,{type:Be.a.GRID_CELL_THICKNESS_RESIZE})}),m()(_()(i),"recycle",function(){i.gridItem=null}),i.colNo=i.gridItem.selectedColNo,i}return b()(t,e),t}(Xe),qe=function(e){function t(e,n){var i;u()(this,t),i=y()(this,L()(t).call(this,e,n)),m()(_()(i),"actionType",l.a.GRID_CELL_THICKNESS),m()(_()(i),"oldFlags",[]),m()(_()(i),"isActionGroupEquals",function(e){return null!=e&&e.actionType===i.actionType&&(!(e.commitTime-i.commitTime>i.timeout)&&(i.gridItem===e.gridItem&&i.rowNo===e.rowNo))}),m()(_()(i),"concat",function(e){return e instanceof t&&e.rowNo===i.rowNo&&e.gridItem===i.gridItem&&(i.deltaThickness+=e.deltaThickness,!0)}),m()(_()(i),"commitAction",function(e,t,n){(i.oldLeft=i.gridItem.props.getLeft(),i.oldTop=i.gridItem.props.getTop(),i.gridItem.unselectAllCell(),i.gridItem.isTextEditMode)&&t.pageController.getItemRenderer(i.gridItem).toggleEditMode(-1,-1);var a=Math.max(0,i.rowNo-1),r=!0,s=!1,o=void 0;try{for(var l,c=i.gridItem.cells[a][Symbol.iterator]();!(r=(l=c.next()).done);r=!0){l.value.isResizedByHeightChange=!1}}catch(e){s=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(s)throw o}}i.gridItem.positionTool.setRowHeight(i.rowNo,i.deltaThickness),i.gridItem.adjustRowThickness(i.rowNo===i.gridItem.row?i.rowNo-1:i.rowNo),i.gridItem.adjustColThickness(),i.gridItem.adjustSize(),i.gridItem.updateThicknessRatio(),n.renderCanvas(e,t,[i.gridItem]),n.renderHandler(e,t,{type:Be.a.GRID_CELL_THICKNESS_RESIZE})}),m()(_()(i),"rollbackAction",function(e,t,n){for(var a=Math.max(0,i.rowNo-1),r=0;r<i.oldFlags.length;r++){var s=i.oldFlags[r];i.gridItem.cells[a][r].isResizedByHeightChange=s}i.recoveryOriginThicness(),n.renderCanvas(e,t,[i.gridItem]),n.renderHandler(e,t,{type:Be.a.GRID_CELL_THICKNESS_RESIZE})}),m()(_()(i),"recycle",function(){i.gridItem=null,i.rowThickness=null,i.colThickness=null}),i.rowNo=i.gridItem.selectedRowNo;var a=Math.max(0,i.rowNo-1),r=!0,s=!1,o=void 0;try{for(var c,d=i.gridItem.cells[a][Symbol.iterator]();!(r=(c=d.next()).done);r=!0){var p=c.value;i.oldFlags.push(p.isResizedByHeightChange)}}catch(e){s=!0,o=e}finally{try{r||null==d.return||d.return()}finally{if(s)throw o}}return i}return b()(t,e),t}(Xe),Qe=n(242),Je=function(e){function t(e,n,i,a,r,s,o){var c;return u()(this,t),c=y()(this,L()(t).call(this)),m()(_()(c),"changeDesign",function(){return!1}),m()(_()(c),"isPossibleInCropMode",!0),m()(_()(c),"doSaveQueue",!1),m()(_()(c),"actionType",l.a.MOUSE_MOVE),m()(_()(c),"commitAction",function(e,t,n){Ae.moveMouse(c.offsetX,c.offsetY);var i=Object(Ie.a)(c.offsetX,c.offsetY),a=i.offsetX,r=i.offsetY,s=Object(Ie.a)(t.mouseAction.baseX,t.mouseAction.baseY),o={absoluteX:a,absoluteY:r,absoluteBaseX:s.offsetX,absoluteBaseY:s.offsetY,moveX:(c.offsetX-t.mouseAction.offsetX)/t.pageEditScale/t.zoomScale,moveY:(c.offsetY-t.mouseAction.offsetY)/t.pageEditScale/t.zoomScale},l=be.b.getGroupItemsAddedArray(t.activeItems.slice());switch(c.doAction(e,t,n,o),t.mouseAction.offsetX=c.offsetX,t.mouseAction.offsetY=c.offsetY,e.pages.forEach(function(e){t.pageController.getPageRenderer(e).updateHoverLayer()}),t.mouseAction.mode){case O.a.MODE_NAVIGATION_DRAG:n.renderCanvas(e,t);break;case O.a.MODE_ITEM_DRAG:n.renderCanvas(e,t,l);break;case O.a.MODE_ITEM_ROTATE:n.renderCanvas(e,t,l),n.renderHandler(e,t,{type:Be.a.ROTATE});break;case O.a.MODE_HANDLER_RESIZE_T:case O.a.MODE_HANDLER_RESIZE_TR:case O.a.MODE_HANDLER_RESIZE_R:case O.a.MODE_HANDLER_RESIZE_BR:case O.a.MODE_HANDLER_RESIZE_B:case O.a.MODE_HANDLER_RESIZE_BL:case O.a.MODE_HANDLER_RESIZE_L:case O.a.MODE_HANDLER_RESIZE_TL:n.renderCanvas(e,t,l),n.renderHandler(e,t,{type:Be.a.RESIZE});break;case O.a.MODE_GUIDELINE_MOVE:break;case O.a.MODE_MOBILE_DOWN:t.mouseAction.mode=O.a.MODE_MOBILE_SCROLL;break;default:n.renderCanvas(e,t,l)}}),m()(_()(c),"rollbackAction",function(e,t){}),m()(_()(c),"recycle",function(){c.canvas=null}),c.pageIdx=e,c.canvas=n,c.selectArea=i,c.event=a,c.offsetX=r,c.offsetY=s,c.isShiftKeyPush=o,c.renderAuto=!1,c}return b()(t,e),p()(t,[{key:"doAction",value:function(e,n,i,a){var r=t.HANDLER_MAP.get(n.mouseAction.mode);r?r(this,e,n,i,a):this.doDefaultAction(e,n,i,a)}},{key:"doDefaultAction",value:function(e,t,n,i){if(!o.a.getEnv().browser.isMobile()){for(var a=e.pages[this.pageIdx],r=t.pageController.getPageRenderer(a),s=i.absoluteX*t.zoomScale,l=i.absoluteY*t.zoomScale,c=!0,u=0,d=e.pages.length;u<d;u++)if((r=t.pageController.getPageRenderer(e.pages[u])).isInRange(s,l)){a=e.pages[u],c=!1;break}a.getAllSingleItems().forEach(function(e){return e.hover=!1});var p=r.getInRangeItem(i.absoluteX,i.absoluteY),h=!1,m=r.getInRangeGroup(i.absoluteX,i.absoluteY);if(!c&&m){var g=a.getAllSingleItems(),v=m.getAllSingleMembers();h=g.indexOf(v[v.length-1])>=g.indexOf(p)}o.a.instance.activeItems;if(o.a.isCropMode()||c)this.canvas.style.cursor="default";else if(h){var f=m.getSelectedItem();if(p===f&&f instanceof Le.b&&f.isEditMode)this.canvas.style.cursor="text";else{this.canvas.style.cursor="move";var E=m.getAllSingleMembers();if(E[0].select)p&&(p.hover=!0);else{var T=!0,y=!1,I=void 0;try{for(var L,k=E[Symbol.iterator]();!(T=(L=k.next()).done);T=!0){L.value.hover=!0}}catch(e){y=!0,I=e}finally{try{T||null==k.return||k.return()}finally{if(y)throw I}}}}}else if(p)if(1===t.activeItems.length&&p===t.activeItems[0]&&t.activeItems[0]instanceof Le.b)t.activeItems[0].isEditArea(i.absoluteX,i.absoluteY)&&t.activeItems[0].isEditMode?this.canvas.style.cursor="text":this.canvas.style.cursor="move";else if(1===t.activeItems.length&&p===t.activeItems[0]&&p instanceof _e.b)p&&p.positionTool.getCell(i.absoluteX,i.absoluteY)===p.editingCell?this.canvas.style.cursor="text":this.canvas.style.cursor="default";else{p.hover=!0;var _,w=!1;if(this.isShiftKeyPush&&t.activeItems.length>0)(t.activeItems[0].isLock()||p.isLock())&&(w=!0);if(w)_="not-allowed";else{var b=a.background.backgroundItem;b&&p&&b===p?(p.hover=!1,_=""):_="move"}this.canvas.style.cursor=_}else this.canvas.style.cursor="default"}}}]),t}(l.b);m()(Je,"SENSITIVITY",1),m()(Je,"HANDLER_MAP",new Map([[O.a.MODE_NAVIGATION_DRAG,function(e,t,n,i,a){var r=(e.event.pageX-n.mouseAction.baseX)/n.zoomScale,s=(e.event.pageY-n.mouseAction.baseY)/n.zoomScale;n.renderer.scrollView(-r,-s),n.mouseAction.baseX=e.event.pageX,n.mouseAction.baseY=e.event.pageY}],[O.a.MODE_SELECT_ONE_OR_DRAG,function(e,t,n,i,a){var r=Math.abs(n.mouseAction.offsetX-e.offsetX),s=Math.abs(n.mouseAction.offsetY-e.offsetY);if(r>Je.SENSITIVITY||s>Je.SENSITIVITY){var l=e.event;if(!o.a.isCropMode()&&(l.ctrlKey||l.metaKey||l.altKey)){var c=n.activeItems.slice();Se.a.unselectAllItems(),o.a.dispatch(new Qe.a(o.a.instance.renderPageIdx,c)),o.a.dispatch(new Qe.c(o.a.instance.renderPageIdx,!1))}n.mouseAction.mode=O.a.MODE_ITEM_DRAG,e.doAction(t,n,i,a)}}],[O.a.MODE_GRID_HANDLER_DOWN,function(e,t,n,i,a){Je.HANDLER_MAP.get(O.a.MODE_ITEM_DRAG)(e,t,n,i,a)}],[O.a.MODE_ITEM_DRAG,function(e,t,n,i,a){n.mouseAction.mode=O.a.MODE_ITEM_DRAG,e.canvas.style.cursor="move",o.a.dispatch(new Ue.g(a.moveX,a.moveY,e.isShiftKeyPush,!0));var r=n.activeItems;if(1===r.length&&r[0]instanceof Ne.e){var s=r[0];if(s.belongsTo===Ne.c.INDEPENDENT){var l=t.pages[n.renderPageIdx],c=n.pageController.getPageRenderer(l).getPagePosition(e.offsetX,e.offsetY);et.updateSvgImageframeImageSrc({store:n,photoItem:s,absoluteX:c.x/n.zoomScale,absoluteY:c.y/n.zoomScale,page:t.pages[n.renderPageIdx]})}}}],[O.a.MODE_MULTI_SELECT,function(e,t,n,i,a){var r=!0;t.pages.forEach(function(t){t.getAllSingleItems().forEach(function(i){i.hover=!1;var a=n.pageController.getPageRenderer(t);r&&a.isPageInRange(n.mouseAction.baseX,n.mouseAction.baseY,e.offsetX,e.offsetY)&&(r=!1)})});var s=i.canvasRenderer.pagingManager.getSelectAreaOffset();if(e.selectArea.style.left="".concat(Math.min(e.offsetX,n.mouseAction.baseX)-s.x,"px"),e.selectArea.style.top="".concat(Math.min(e.offsetY,n.mouseAction.baseY)-s.y,"px"),e.selectArea.style.width="".concat(Math.abs(e.offsetX-n.mouseAction.baseX),"px"),e.selectArea.style.height="".concat(Math.abs(e.offsetY-n.mouseAction.baseY),"px"),!r){var o=n.mouseAction.mode===O.a.MODE_MULTI_SELECT&&Math.abs(a.absoluteBaseX-a.absoluteX)>5&&Math.abs(a.absoluteBaseY-a.absoluteY)>5,l=t.pages[e.pageIdx],c=n.pageController.getPageRenderer(l),u=c.getInRangeItems(a.absoluteBaseX,a.absoluteBaseY,a.absoluteX,a.absoluteY,o?-1:1);if(Math.abs(a.absoluteBaseX-a.absoluteX)>5&&Math.abs(a.absoluteBaseY-a.absoluteY)>5){var d=u.filter(function(e){return l.background.isSkinItem(e)});if(d.length>0){var p=d[0],h=new De.a(a.absoluteBaseX,a.absoluteBaseY,a.absoluteX,a.absoluteY);De.b.isIncludeLtrbCoordinate(p.getLTRBCoordinate(),h)||u.splice(u.indexOf(p),1)}}var m=c.getInRangeGroups(a.absoluteBaseX,a.absoluteBaseY,a.absoluteX,a.absoluteY,o?-1:1),g=!0,v=!1,f=void 0;try{for(var E,T=u[Symbol.iterator]();!(g=(E=T.next()).done);g=!0){E.value.hover=!0}}catch(e){v=!0,f=e}finally{try{g||null==T.return||T.return()}finally{if(v)throw f}}var y=!0,I=!1,L=void 0;try{for(var k,_=m[Symbol.iterator]();!(y=(k=_.next()).done);y=!0){var w=k.value,b=!0,S=!1,C=void 0;try{for(var P,D=w.getAllSingleMembers()[Symbol.iterator]();!(b=(P=D.next()).done);b=!0){P.value.hover=!0}}catch(e){S=!0,C=e}finally{try{b||null==D.return||D.return()}finally{if(S)throw C}}}}catch(e){I=!0,L=e}finally{try{y||null==_.return||_.return()}finally{if(I)throw L}}}}],[O.a.MODE_HANDLER_RESIZE_T,function(e,t,n,i,a){var r=e.event;o.a.dispatch(new Ue.h(O.a.MODE_HANDLER_RESIZE_T,t.pages,a.absoluteX,a.absoluteY,e.isShiftKeyPush,r.altKey||r.ctrlKey||r.metaKey))}],[O.a.MODE_HANDLER_RESIZE_TR,function(e,t,n,i,a){var r=e.event;o.a.dispatch(new Ue.h(O.a.MODE_HANDLER_RESIZE_TR,t.pages,a.absoluteX,a.absoluteY,e.isShiftKeyPush,r.altKey||r.ctrlKey||r.metaKey))}],[O.a.MODE_HANDLER_RESIZE_R,function(e,t,n,i,a){var r=e.event;o.a.dispatch(new Ue.h(O.a.MODE_HANDLER_RESIZE_R,t.pages,a.absoluteX,a.absoluteY,e.isShiftKeyPush,r.altKey||r.ctrlKey||r.metaKey))}],[O.a.MODE_HANDLER_RESIZE_BR,function(e,t,n,i,a){var r=e.event;o.a.dispatch(new Ue.h(O.a.MODE_HANDLER_RESIZE_BR,t.pages,a.absoluteX,a.absoluteY,e.isShiftKeyPush,r.altKey||r.ctrlKey||r.metaKey))}],[O.a.MODE_HANDLER_RESIZE_B,function(e,t,n,i,a){var r=e.event;o.a.dispatch(new Ue.h(O.a.MODE_HANDLER_RESIZE_B,t.pages,a.absoluteX,a.absoluteY,e.isShiftKeyPush,r.altKey||r.ctrlKey||r.metaKey))}],[O.a.MODE_HANDLER_RESIZE_BL,function(e,t,n,i,a){var r=e.event;o.a.dispatch(new Ue.h(O.a.MODE_HANDLER_RESIZE_BL,t.pages,a.absoluteX,a.absoluteY,e.isShiftKeyPush,r.altKey||r.ctrlKey||r.metaKey))}],[O.a.MODE_HANDLER_RESIZE_L,function(e,t,n,i,a){var r=e.event;o.a.dispatch(new Ue.h(O.a.MODE_HANDLER_RESIZE_L,t.pages,a.absoluteX,a.absoluteY,e.isShiftKeyPush,r.altKey||r.ctrlKey||r.metaKey))}],[O.a.MODE_HANDLER_RESIZE_TL,function(e,t,n,i,a){var r=e.event;o.a.dispatch(new Ue.h(O.a.MODE_HANDLER_RESIZE_TL,t.pages,a.absoluteX,a.absoluteY,e.isShiftKeyPush,r.altKey||r.ctrlKey||r.metaKey))}],[O.a.MODE_ITEM_ROTATE,function(e,t,n,i,a){var r=t.pages[n.renderPageIdx],s=n.pageController.getPageRenderer(r).getPagePosition(e.offsetX,e.offsetY);o.a.dispatch(new Ue.i(s.x/o.a.instance.zoomScale/r.editScale,s.y/o.a.instance.zoomScale/r.editScale,!0,e.isShiftKeyPush))}],[O.a.MODE_GRID_BORDER_VER_DRAG,function(e,t,n,i,a){e.canvas.style.cursor="row-resize";var r=n.activeItems,s=r[0];1===r.length&&s&&s instanceof _e.b&&!s.isLock()&&o.a.dispatch(new qe(s,a.moveY))}],[O.a.MODE_GRID_BORDER_HOR_DRAG,function(e,t,n,i,a){e.canvas.style.cursor="col-resize";var r=n.activeItems,s=r[0];1===r.length&&s&&s instanceof _e.b&&!s.isLock()&&o.a.dispatch(new Ze(s,a.moveX))}],[O.a.MODE_GRID_CLICK,function(e,t,n,i,a){var r=n.activeItems;if(1===r.length&&r[0]instanceof _e.b&&!r[0].isLock()){var s=t.pages[e.pageIdx],l=n.pageController.getPageRenderer(s),c=l.getPagePosition(n.mouseAction.baseX,n.mouseAction.baseY),u=l.getPagePosition(e.offsetX,e.offsetY);o.a.dispatch(new xe.a(r[0],c.x/n.zoomScale/n.pageEditScale,c.y/n.zoomScale/n.pageEditScale,u.x/n.zoomScale/n.pageEditScale,u.y/n.zoomScale/n.pageEditScale,e.isShiftKeyPush,e.event.ctrlKey,!0)),r[0].positionTool.getCell(a.absoluteBaseX,a.absoluteBaseY)!==r[0].positionTool.getCell(a.absoluteX,a.absoluteY)&&(n.mouseAction.mode=O.a.MODE_GRID_CELLS_SELECT)}}],[O.a.MODE_GRID_CELLS_SELECT,function(e,t,n,i,a){var r=t.pages[e.pageIdx],s=n.pageController.getPageRenderer(r),l=s.getInRangeItem(a.absoluteX,a.absoluteY);if(l instanceof _e.b&&l.select&&!l.isLock()){var c=s.getPagePosition(n.mouseAction.baseX,n.mouseAction.baseY),u=s.getPagePosition(e.offsetX,e.offsetY);o.a.dispatch(new xe.a(l,c.x/n.zoomScale/n.pageEditScale,c.y/n.zoomScale/n.pageEditScale,u.x/n.zoomScale/n.pageEditScale,u.y/n.zoomScale/n.pageEditScale,e.isShiftKeyPush,e.event.ctrlKey))}}],[O.a.MODE_TEXT_EDIT,function(e,t,n,i,a){var r=t.pages[e.pageIdx],s=n.pageController.getPageRenderer(r),l=s.getInRangeItem(a.absoluteX,a.absoluteY);if(l instanceof Le.b&&l.isEditArea(a.absoluteX,a.absoluteY))if(l.isEditMode){var c=s.getPagePosition(n.mouseAction.baseX,n.mouseAction.baseY),u=s.getPagePosition(e.offsetX,e.offsetY);o.a.dispatch(new ke.d(l,c.x/n.zoomScale/n.pageEditScale,c.y/n.zoomScale/n.pageEditScale,u.x/n.zoomScale/n.pageEditScale,u.y/n.zoomScale/n.pageEditScale,e.isShiftKeyPush)),n.mouseAction.mode=O.a.MODE_TEXT_SELECT}else Ae.isSamePoint||(n.mouseAction.mode=O.a.MODE_SELECT_ONE_OR_DRAG)}],[O.a.MODE_TEXT_SELECT,function(e,t,n,i,a){var r=t.pages[e.pageIdx],s=n.pageController.getPageRenderer(r),l=s.getInRangeItem(a.absoluteX,a.absoluteY);if(l instanceof Le.b&&l.isEditMode){var c=s.getPagePosition(n.mouseAction.baseX,n.mouseAction.baseY),u=s.getPagePosition(e.offsetX,e.offsetY);o.a.dispatch(new ke.d(l,c.x/n.zoomScale/n.pageEditScale,c.y/n.zoomScale/n.pageEditScale,u.x/n.zoomScale/n.pageEditScale,u.y/n.zoomScale/n.pageEditScale,e.isShiftKeyPush))}}]]));var et=function(){function e(){u()(this,e)}return p()(e,null,[{key:"isChangeContentsStatus",value:function(e){return!this.lastParam||e.absoluteX!==this.lastParam.absoluteX||e.absoluteY!==this.lastParam.absoluteY}},{key:"setSvgImageframeStatus",value:function(e,t){switch(t){case He.a.SET_SRC:case He.a.SET_SRC_STABLE:return e?He.a.SET_SRC_STABLE:He.a.RESET_SRC;case He.a.RESET_SRC:case He.a.RESET_SRC_STABLE:return e?He.a.SET_SRC:He.a.RESET_SRC_STABLE;default:return null}}},{key:"updateSvgImageframeImageSrc",value:function(e){if(!o.a.isCropMode()&&this.isChangeContentsStatus(e)){var t=e.page.getAllSingleItems().filter(function(e){return e instanceof He.b}),n=e.store.pageController.getItemRenderer(e.photoItem),i=new De.a(e.absoluteX,e.absoluteY,e.absoluteX,e.absoluteY);i.changeScaleReverse(e.page.lastRenderEditScale);var a=!0,r=!0,s=!1,l=void 0;try{for(var c,u=je()(t).reverse()[Symbol.iterator]();!(r=(c=u.next()).done);r=!0){var d=c.value;if(!d.isLock()){var p=d.isInRange(i),h=this.setSvgImageframeStatus(p&&a,d.getImageSrcStatus());p&&(a=!1,n.elements.elementWrapper.style.opacity="0.3"),e.store.pageController.getItemRenderer(d).setImageSrcStatus(h,n.elements.element)}}}catch(e){s=!0,l=e}finally{try{r||null==u.return||u.return()}finally{if(s)throw l}}a&&(n.elements.elementWrapper.style.opacity="1.0")}this.lastParam=e}}]),e}(),tt=function(e){function t(e,n,i,a,r){var s;return u()(this,t),s=y()(this,L()(t).call(this)),m()(_()(s),"isPossibleInCropMode",!0),m()(_()(s),"doSaveQueue",!1),m()(_()(s),"changeDesign",function(){return!1}),m()(_()(s),"actionType",l.a.MOUSE_CLICK),m()(_()(s),"commitAction",function(e,t,n){var i=e.pages[s.pageIdx],a=t.pageController.getPageRenderer(i),r=Object(Ie.a)(s.offsetX,s.offsetY),l=r.offsetX,c=r.offsetY,u=a.getInRangeItem(l,c);o.a.instance.mouseAction.mode!==O.a.MODE_NAVIGATION&&null!=u&&(u.isLock()||o.a.isCropMode()||u instanceof Le.b&&3===s.detail&&u.isEditMode&&o.a.dispatch(new ke.g(u)))}),m()(_()(s),"rollbackAction",function(){}),m()(_()(s),"recycle",function(){s.canvas=null}),s.pageIdx=e,s.canvas=n,s.offsetX=i,s.offsetY=a,s.detail=r,s.renderAuto=!1,s}return b()(t,e),t}(l.b),nt=function(){function e(){u()(this,e),m()(this,"isOkayToCloseBrowser",!0)}return p()(e,null,[{key:"setIsOkayToCloseBrowser",value:function(){e.instance.isOkayToCloseBrowser=!1}},{key:"canICloseThisWindow",value:function(){var t=e.instance.isOkayToCloseBrowser;return e.instance.isOkayToCloseBrowser=!0,t}}]),e}();m()(nt,"instance",new nt);var it=n(204),at=function(){function e(){u()(this,e),m()(this,"DOUBLE_CLICK_TOLERANCE",3),m()(this,"DOUBLE_TAB_TOLERANCE",20),m()(this,"TIMEOUT_DURATION",300),m()(this,"downCount",0),m()(this,"mouseV",new De.c(0,0)),m()(this,"isMultipleDown",!1)}return p()(e,[{key:"downMouse",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.isPointEquals(e,t,this.mouseV.x,this.mouseV.y,i)||this.clear(),this.mouseV.x=e,this.mouseV.y=t,this.downCount++,this.isMultipleDown=this.downCount>1,this.timeoutEvent&&this.timeoutEvent.setExecCallBack(!1),this.timeoutEvent=new it.a(this.TIMEOUT_DURATION,function(){n.clear()})}},{key:"clear",value:function(){this.downCount=0,this.isMultipleDown=!1}},{key:"isDoubleClick",value:function(){return this.isMultipleDown}},{key:"isPointEquals",value:function(e,t,n,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=a?this.DOUBLE_TAB_TOLERANCE:this.DOUBLE_CLICK_TOLERANCE;return Math.abs(e-n)<r&&Math.abs(t-i)<r}}]),e}(),rt=n(470),st=n(229),ot=n(162),lt=n(494),ct=n(53),ut=n(295),dt=function(){function e(){u()(this,e)}return p()(e,null,[{key:"getRenderedPages",value:function(t,n,i){var a=[],r=!0,s=!1,o=void 0;try{for(var l,c=t.pages[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var u=l.value,d=n.pageController.getPageRenderer(u);e.isScrolledIntoView(d.element)&&a.push(u)}}catch(e){s=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(s)throw o}}return a}},{key:"getPageHeight",value:function(e,t){return e.sheetSize.height*t.pageEditScale*t.zoomScale}},{key:"isScrolledIntoView",value:function(e){var t=e.getBoundingClientRect(),n=t.top,i=t.bottom;return n<window.innerHeight&&i>=0}},{key:"calcEditScale",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.MAX_PAGE_RENDER_SIZE_DEFAULT,i=Math.max(t.sheetSize.width,t.sheetSize.height);return n/Math.max(n,i)}}]),e}();m()(dt,"MAX_PAGE_RENDER_SIZE_DEFAULT",800);var pt=n(476),ht=function(){function e(){u()(this,e)}return p()(e,null,[{key:"getDistance",value:function(e,t){return Math.hypot(t.clientX-e.clientX,t.clientY-e.clientY)}},{key:"startPinch",value:function(t,n){e.prevDistance=e.getDistance(t,n)}},{key:"getPinchScale",value:function(t,n){var i=e.getDistance(t,n),a=i/e.prevDistance;return e.prevDistance=i,a}}]),e}();m()(ht,"prevDistance",0);var mt,gt=n(238),vt=n(259);!function(e){e.URL="URL",e.XML="XML"}(mt||(mt={}));var ft=n(47),Et=function(){function e(){u()(this,e)}var t;return p()(e,null,[{key:"getBizhowsSvgElement",value:(t=s()(a.a.mark(function e(t){var n,i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ft.ApiRequest.getXml(t);case 2:return n=e.sent,i=n.data,e.abrupt("return",i?i.getElementsByTagName("svg")[0]:null);case 5:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})}]),e}(),Tt=n(74),yt=function(){function e(){u()(this,e)}return p()(e,null,[{key:"getChildMaskElement",value:function(e){if(!e)return null;var t=e.querySelectorAll("svg");if(!t)return null;var n=!0,i=!1,a=void 0;try{for(var r,s=t[Symbol.iterator]();!(n=(r=s.next()).done);n=!0){var o=r.value;if(o.classList.contains("masking"))return o}}catch(e){i=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return null}}]),e}(),It=n(215),Lt=function(){function e(){u()(this,e)}return p()(e,null,[{key:"getCircle",value:function(e,t,n){var i=t/2,a=e/2*(1-n/Math.max(e,t)),r=e/t,s="M ".concat(a," ").concat(i," A ").concat(r," ").concat(1," 0 0 1 ").concat(e-a," ").concat(i),o="A ".concat(r," ").concat(1," 0 0 1 ").concat(a," ").concat(i);return"".concat(s," ").concat(o," Z")}}]),e}(),kt=function(){function e(){u()(this,e)}return p()(e,null,[{key:"convertPolygonPointsNodeToPathNode",value:function(e){for(var t=document.createElementNS(Tt.a.SVG,"path"),n=this.getCoordinatePoints(e.getAttribute("points")),i="M",a=n.length,r=0;r<a-1;r++){var s=n[r];i+="".concat(s.cx," ").concat(s.cy,"L")}var o=n[a-1];i+="".concat(o.cx," ").concat(o.cy,"Z"),t.setAttribute("d","".concat(i));var l=!0,c=!1,u=void 0;try{for(var d,p=e.attributes[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var h=d.value;"points"!==h.name&&t.setAttribute(h.name,h.value)}}catch(e){c=!0,u=e}finally{try{l||null==p.return||p.return()}finally{if(c)throw u}}return t}},{key:"getCoordinatePoints",value:function(e){for(var t,n,i,a,r=[],s=e.slice().split(" "),o=0;o<s.length;o++){var l=s[o].split(",");if(1===l.length)t?(a=Number(l[0]),n=!0):(i=Number(l[0]),t=!0);else{if(2!==l.length)continue;t||(i=Number(l[0]),t=!0),null==l[1]||""===l[1]?(a=Number(l[0]),n=!0):(a=Number(l[1]),n=!0)}t&&n&&(r.push({cx:i,cy:a}),i=0,a=0,t=!1,n=!1)}return r}}]),e}(),_t=function(){function e(){u()(this,e)}return p()(e,null,[{key:"createVector",value:function(e,t){var n=document.createElementNS(Tt.a.SVG,"svg");n.setAttribute("viewBox",t);var i=kt.convertPolygonPointsNodeToPathNode(e),a=t.split(" "),r=Number(a[2]),s=Number(a[3]),o="".concat(this.getRectPath(r,s)," ").concat(i.getAttribute("d"));return n.appendChild(this.createPathElement(o)),n}},{key:"createCircle",value:function(e,t,n){var i=document.createElementNS(Tt.a.SVG,"svg");i.setAttribute("viewBox","0 0 ".concat(e," ").concat(t));var a=this.getRectPath(e,t),r=Lt.getCircle(e,t,n);return i.appendChild(this.createPathElement("".concat(a," ").concat(r))),i}},{key:"createPathElement",value:function(e){var t=document.createElementNS(Tt.a.SVG,"path");return t.setAttribute("d","".concat(e)),t}},{key:"getRectPath",value:function(e,t){return"M -".concat(.2," -").concat(.2," V ").concat(t+.2," H ").concat(e+.2," V -").concat(.2," Z")}}]),e}(),wt=new(function(){function e(){u()(this,e),m()(this,"maskElementList",new Map)}var t,n,i;return p()(e,[{key:"initMask",value:(i=s()(a.a.mark(function e(t,n){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(![It.a.SQUARE,It.a.LINE,It.a.ROUND_SQUARE].includes(t.type)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.initMaskElement(t,n);case 4:case"end":return e.stop()}},e,this)})),function(e,t){return i.apply(this,arguments)})},{key:"initMaskElement",value:(n=s()(a.a.mark(function t(n,i){var r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=n.type,t.next=t.t0===It.a.CIRCLE?3:t.t0===It.a.VECTOR?5:14;break;case 3:return this.originMaskElement=e.initCircleMaskElement(i.width,i.height,n.radius),t.abrupt("break",15);case 5:if(r=n.vector,n.vectorFormat!==mt.URL){t.next=12;break}return t.next=9,e.initVectorMaskElementFromApi(r);case 9:this.originMaskElement=t.sent,t.next=13;break;case 12:this.originMaskElement=e.initVectorMaskElement(r);case 13:return t.abrupt("break",15);case 14:this.originMaskElement=null;case 15:this.shapeOutput=n;case 16:case"end":return t.stop()}},t,this)})),function(e,t){return n.apply(this,arguments)})},{key:"getMaskElementById",value:function(e){if(!this.hasMask())return null;if(this.maskElementList.has(e))return this.maskElementList.get(e);if(this.originMaskElement){var t,n=this.originMaskElement.cloneNode(!0);if(this.shapeOutput.type===It.a.CIRCLE)t=this.originMaskElement.cloneNode(!0);else if(this.shapeOutput.type===It.a.VECTOR){var i=n.getAttribute("viewBox");t=_t.createVector(n.querySelector("polygon"),i)}return this.maskElement=t,t.classList.add("masking","layer"),t.style.zIndex="9999",t.querySelector("path").classList.add("mask_path"),this.maskElementList.set(e,t),t}console.log("undefined origin pagemask element")}},{key:"hasChildMaskElement",value:function(e){return null!=yt.getChildMaskElement(e)}},{key:"replaceMaskOnBackground",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1";this.maskElementList.has(e)&&(this.maskElementList.get(e).style.zIndex=t)}},{key:"replaceMaskOnItems",value:function(){this.maskElementList.forEach(function(e){return e.style.zIndex="9999"})}},{key:"hasMask",value:function(){return!!this.originMaskElement}}],[{key:"initCircleMaskElement",value:function(e,t,n){return _t.createCircle(e,t,n)}},{key:"initVectorMaskElementFromApi",value:(t=s()(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Et.getBizhowsSvgElement(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})},{key:"initVectorMaskElement",value:function(e){var t=document.createElementNS(Tt.a.SVG,"svg");return t.innerHTML=e,t}}]),e}()),bt=function(){function e(){u()(this,e),m()(this,"pageRenderers",[]),m()(this,"lastRenderStatus",{position:null,contents:null}),m()(this,"isPinchAction",!1),m()(this,"mouseDblClickManager",new at),m()(this,"renderingOption",{doReRender:!0,scrollFitAfterRenderer:!0,zoomFitAfterRender:!0}),this.printout=new lt.a}var t,n,i,r;return p()(e,[{key:"setReady",value:(r=s()(a.a.mark(function t(){var n,i,r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.canvas=document.getElementById("canvas"),this.canvas.className="old",this.pageToolboxBottom=new pt.a,this.selectArea=document.getElementById("selectArea"),n=this.canvas.parentNode,(i=new G.a(!0,!0)).element.id=e.PAGE_SCROLL_ELEMENT,i.element.classList.add("crop_disable_area"),(r=i.render(this.canvas)).style.width="100%",r.style.height="100%",n.insertBefore(r,n.childNodes.item(0)),this.scrollElement=i,this.updateCanvasSize(),this.addEventListeners(),this.contents=document.createElement("div"),this.contents.className="render_contents",this.wrap=document.createElement("div"),this.wrap.className="render_wrap",this.wrap.appendChild(this.contents),this.pageToolboxBottom.element&&this.contents.appendChild(this.pageToolboxBottom.element),this.canvas.insertBefore(this.wrap,this.canvas.childNodes.item(0)),this.canvas.appendChild(this.selectArea),this.updatePagingManager();case 24:case"end":return t.stop()}},t,this)})),function(){return r.apply(this,arguments)})},{key:"setPageTitles",value:function(e){this.titles=e}},{key:"updatePagingManager",value:function(){this.pagingManager&&o.a.instance.pageMode===this.pagingManager.type||(o.a.instance.renderPageIdx=0,this.pagingManager=rt.a.getPaginManager(o.a.instance.pageMode,{canvas:this.canvas})),this.pagingManager.refreshCache(),o.a.pageScrollOffset=0,this.renderingOption.doReRender=!0}},{key:"updateScrollCenterOfCurrentPage",value:function(){this.renderingOption.scrollFitAfterRenderer=!0}},{key:"updateZoomFitAfterRender",value:function(){this.renderingOption.zoomFitAfterRender=!0}},{key:"updateCanvasSize",value:function(){var e=document.getElementById("playground").getBoundingClientRect();o.a.instance.size.canvasWidth=e.width,o.a.instance.size.canvasHeight=e.height}},{key:"setEditModeContents",value:function(e){e?this.contents.classList.add("edit_mode"):this.contents.classList.remove("edit_mode")}},{key:"addEventListeners",value:function(){var e=this;function t(e){switch(e){case O.a.MODE_ITEM_DRAG:case O.a.MODE_ITEM_ROTATE:case O.a.MODE_MULTI_SELECT:case O.a.MODE_HANDLER_RESIZE_L:case O.a.MODE_HANDLER_RESIZE_T:case O.a.MODE_HANDLER_RESIZE_R:case O.a.MODE_HANDLER_RESIZE_B:case O.a.MODE_HANDLER_RESIZE_TL:case O.a.MODE_HANDLER_RESIZE_TR:case O.a.MODE_HANDLER_RESIZE_BL:case O.a.MODE_HANDLER_RESIZE_BR:return!0}return!1}var n=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=t.target.tagName.toUpperCase();if(n||"IMG"!==i&&"DIV"!==i||t.preventDefault(),n||2!==t.button){o.a.instance.mouseAction.mode===O.a.MODE_NAVIGATION&&t.preventDefault();var a=n?t.touches[0]:t;if(e.pagingManager.updateRenderPageIdx({x:a.clientX,y:a.clientY}),n){var r=t.touches;if(r.length>=2)return t.preventDefault(),ht.startPinch(r[0],r[1]),void(e.isPinchAction=!0);e.isPinchAction=!1;var s=e.pageRenderers[o.a.instance.renderPageIdx],l=s.isInRange(a.clientX,a.clientY),c=Object(Ie.a)(a.clientX,a.clientY),u=c.offsetX,d=c.offsetY,p=s.getInRangeItem(u,d),h=Pe.a.isItemSkinable(p,s.page.sheetSize);o.a.isCropMode()?t.preventDefault():l&&p&&!h?p.select?t.preventDefault():o.a.instance.mouseAction.mode=O.a.MODE_MOBILE_DOWN:(o.a.instance.mouseAction.mode=O.a.MODE_MOBILE_DOWN,h||e.mouseDblClickManager.clear())}o.a.dispatch(new Me(o.a.instance.renderPageIdx,e.canvas,e.selectArea,a,a.clientX,a.clientY,t.shiftKey,t.ctrlKey,n))}};this.canvas.addEventListener("mousedown",n),this.canvas.addEventListener("touchstart",function(e){return n(e,!0)});var i=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=n?t.changedTouches[0]:t,a=e.pageRenderers[o.a.instance.renderPageIdx],r=a.isInRange(i.clientX,i.clientY);if(n&&r&&t.cancelable&&t.preventDefault(),e.isPinchAction)return t.preventDefault(),void o.a.dispatch(new l.c(function(e,t,n){n.renderItemTools(e,t)}));o.a.dispatch(new ze(o.a.instance.renderPageIdx,e.canvas,e.selectArea,i,i.clientX,i.clientY,t.shiftKey,t.ctrlKey)),e.mouseDblClickManager.isDoubleClick()&&(o.a.dispatch(new Ve(o.a.instance.renderPageIdx,e.canvas,i.clientX,i.clientY)),e.mouseDblClickManager.clear())};this.canvas.addEventListener("mouseup",function(e){t(o.a.instance.mouseAction.mode)||i(e)}),this.canvas.addEventListener("touchend",function(e){t(o.a.instance.mouseAction.mode)||i(e,!0)}),document.addEventListener("mouseup",function(e){t(o.a.instance.mouseAction.mode)&&i(e)}),document.addEventListener("touchend",function(e){t(o.a.instance.mouseAction.mode)&&i(e,!0)}),this.canvas.addEventListener("click",function(t){o.a.dispatch(new tt(o.a.instance.renderPageIdx,e.canvas,t.clientX,t.clientY,t.detail))});var r=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(n&&t.touches.length>=2){t.preventDefault();var i=t.touches,a=ht.getPinchScale(i[0],i[1]),r=o.a.instance,s=r.zoomScale*a*r.pageEditScale,l=st.b.getLowestScale()*r.pageEditScale,c=st.b.getHighestScale()*r.pageEditScale;return s<l?s=l:s>c&&(s=c),void o.a.dispatch(new vt.a(s))}var u=n?t.touches[0]:t;o.a.dispatch(new Je(o.a.instance.renderPageIdx,e.canvas,e.selectArea,u,u.clientX,u.clientY,t.shiftKey))};this.canvas.addEventListener("mousemove",function(e){t(o.a.instance.mouseAction.mode)||r(e)},!1),this.canvas.addEventListener("touchmove",function(e){t(o.a.instance.mouseAction.mode)||r(e,!0)},!1),document.addEventListener("touchstart",function(e){e.touches.length>=2&&e.preventDefault()},{passive:!1}),document.addEventListener("mousemove",function(e){t(o.a.instance.mouseAction.mode)&&r(e)},{passive:!1}),document.addEventListener("touchmove",function(e){t(o.a.instance.mouseAction.mode)&&o.a.instance.mouseAction.mode!==O.a.MODE_MULTI_SELECT&&r(e,!0)},{passive:!1}),document.addEventListener("dragover",function(e){o.a.isDefaultMode()&&Object(ot.e)(e)}),document.addEventListener("dragleave",function(e){o.a.isDefaultMode()&&Object(ot.d)(e)}),document.addEventListener("drop",function(){var e=s()(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ot.a.instance.uploadUserFile(t.dataTransfer.files);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),this.canvas.addEventListener("drop",function(t){if(!(t.dataTransfer.files.length>0)){t.stopPropagation(),ot.a.removeDragToUploadLayer(),e.pagingManager.updateRenderPageIdx({x:t.clientX,y:t.clientY});var n=t.dataTransfer.getData("text"),i=document.getElementById(n);if(i){var a=i.getAttribute("data-resource-key");o.a.dispatch(new f.a(o.a.instance.renderPageIdx,t.clientX,t.clientY,a,null,!0))}Se.a.unselectAllItems()}});var c=$(window).width()+$(window).height();window.addEventListener("resize",function(){if(o.a.getEnv().browser.isMobile()){var t=$(window).width()+$(window).height();if(t!==c)return void(c=t)}e.updateCanvasSize(),o.a.dispatch(new gt.a)}),window.addEventListener("beforeunload",function(e){nt.canICloseThisWindow()||(e.preventDefault(),e.returnValue="")}),this.scrollElement.onAfterScroll=function(t){o.a.dispatch(new l.c(function(n,i,a){if(e.canvas&&!o.a.getEnv().browser.isMobile()&&(e.scrollElement.maxMoveScrollHeight=i.activeItems.length?0:e.canvas.clientHeight),e.pagingManager.isChangePageByScroll()&&(e.pagingManager.refreshCache(),i.mouseAction.mode===O.a.MODE_NONE||i.mouseAction.mode===O.a.MODE_BACKGROUND_SELECT)){var r=t.target.scrollHeight-t.target.offsetHeight,s=t.target.scrollTop/r,l=i.renderPageIdx;i.renderPageIdx=n.pages.length-1;for(var c=n.pages.length,u=0;u<c;u++){if(s<(u+1)/c){var d=n.pages[i.renderPageIdx],p=!0,h=!1,m=void 0;try{for(var g,v=d.getAllSingleItems()[Symbol.iterator]();!(p=(g=v.next()).done);p=!0){g.value.hover=!1}}catch(e){h=!0,m=e}finally{try{p||null==v.return||v.return()}finally{if(h)throw m}}i.renderPageIdx=u;break}}l!==i.renderPageIdx&&a.leftBar.getMenu(ct.b.BACKGROUND_LIB).render(n,i),a.canvasRenderer.renderAuto(n,i),a.renderLayer(n,i)}}))},this.canvas.addEventListener("wheel",function(e){if(e.ctrlKey){e.preventDefault();var t=e.deltaY<0?st.c.IN:st.c.OUT;st.b.zoomInOutByExtend(t)}})}},{key:"renderPage",value:(i=s()(a.a.mark(function t(n,i){var r,s,o,l,c,u,d,p=arguments;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=!(p.length>2&&void 0!==p[2])||p[2],s=!(p.length>3&&void 0!==p[3])||p[3],p.length>4&&void 0!==p[4]?p[4]:[],o=p.length>5&&void 0!==p[5]&&p[5],l=this.pageRenderers[n.pageIdx],s&&(i.zoomScale<1?this.contents.setAttribute(e.DATA_ZOOM_OUT,""+i.zoomScale):this.contents.removeAttribute(e.DATA_ZOOM_OUT)),n.editScale=dt.calcEditScale(n),i.pageEditScale=n.editScale,c=i.activeItems[0]&&n.items.includes(i.activeItems[0]),!o||c){t.next=15;break}return l.removeLayers(),l.hideHeader(),t.abrupt("return",this);case 15:r&&((u=i.size).pageDeltaOffsetX=0,u.pageWidth=Math.floor(n.sheetSize.width*n.editScale),u.pageHeight=Math.floor(n.sheetSize.height*n.editScale),u.pageOffsetX=Math.floor((u.canvasWidth-u.pageWidth)/2),u.pageOffsetY=Math.floor(u.pageDeltaOffsetY+(u.canvasHeight-u.pageHeight)/2));case 16:return d=(new Date).getTime(),t.next=19,l.render(n.editScale,d);case 19:return l.showHeader(),t.abrupt("return",this);case 21:case"end":return t.stop()}},t,this)})),function(e,t){return i.apply(this,arguments)})},{key:"renderItemGuide",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];var n=e.pages[0].sheetSize,i=t.zoomScale*t.pageEditScale,a=n.width*i,r=n.height*i,s=o.a.instance.pageEditScale*o.a.instance.zoomScale;this.pageRenderers.forEach(function(e){e.itemGuideRenderer.render(e.page.getAllSingleItems(),a,r,s)})}},{key:"renderPrintout",value:(n=s()(a.a.mark(function e(t){var n=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n.length>1&&void 0!==n[1]?n[1]:[]).length>0)){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.printout.render({pageWrapper:o.a.instance.pageController.getPageRenderer(t).element,pageId:t.pageId,pageSize:{width:t.sheetSize.width,height:t.sheetSize.height},pageItems:t.getAllSingleItems(),domRenderParam:{editScale:t.editScale,printAreaBgColor:t.background.color}});case 5:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"syncPageRenderers",value:function(e){var t=this.pageRenderers.slice();this.pageRenderers=[];var n=!0,i=!1,a=void 0;try{for(var r,s=t[Symbol.iterator]();!(n=(r=s.next()).done);n=!0){var o=r.value;e.indexOf(o.page)>=0?this.pageRenderers[o.page.pageIdx]=o:o.removeElement()}}catch(e){i=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}for(var l=0;l<e.length;l++){this.pageRenderers[l]||(this.pageRenderers[l]=new ut.a({page:e[l],title:this.titles?this.titles[l].title:""}))}}},{key:"renderSinglePage",value:function(t,n){var i=this,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return new Promise(function(){var c=s()(a.a.mark(function s(c,u){var d,p,h,m,g,v,f,E,T,y,I,L,k;return a.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(d=null,p=!1,1===be.b.getGroupItemsAddedArray(n.activeItems).length&&n.activeItems[0].isRequireLiveEdit()?i.liveEditItem===n.activeItems[0]?i.liveEditItem.setReadyLiveEdit(!0):(d=i.liveEditItem,i.liveEditItem=n.activeItems[0],p=!0):i.liveEditItem&&(d=i.liveEditItem,i.liveEditItem=null),d&&(d.setReadyLiveEdit(!1),1,(h=n.pageController.getItemRenderer(d))&&h.renderLiveEdit(1,!1,!0).catch(function(e){return console.log(e)})),m=n.size,g=r||o,v=i.pageRenderers[t.pageIdx],g||!(l.length>0||l.length>0&&i.liveEditItem&&i.liveEditItem.isReadyLiveEdit())){a.next=14;break}return v.syncItemRenderers(),f=i.pageRenderers[t.pageIdx],E=1===l.length&&i.liveEditItem&&l[0].tbpeId===i.liveEditItem.tbpeId,f.renderItems(l,t.lastRenderEditScale,E,p).catch(function(e){return console.error(e)}),v.pageDOM.makeItemTree(v.itemRenderers,1,!1),c(),a.abrupt("return");case 14:if(r&&(t.editScale=dt.calcEditScale(t),n.pageEditScale=t.editScale,m.pageDeltaOffsetX=0,m.pageWidth=Math.floor(t.sheetSize.width*t.editScale),m.pageHeight=Math.floor(t.sheetSize.height*t.editScale),m.pageOffsetX=Math.floor((m.canvasWidth-m.pageWidth)/2),m.pageOffsetY=Math.floor(m.pageDeltaOffsetY+(m.canvasHeight-m.pageHeight)/2),i.pagingManager.isCleanRegacyPageElement()&&i.lastRenderStatus.contents))for(T=i.canvas.getElementsByClassName(ut.a.PAGE_CLASS),y=T.length-1;y>=0;y--)(I=T.item(y)).parentElement&&I.parentElement.removeChild(I);return L=(new Date).getTime(),a.next=18,v.render(t.editScale,L);case 18:k=a.sent,o&&(n.zoomScale<1?i.contents.setAttribute(e.DATA_ZOOM_OUT,""+n.zoomScale):i.contents.removeAttribute(e.DATA_ZOOM_OUT)),k.parentElement!==i.contents&&i.contents.insertBefore(k,i.contents.childNodes.item(t.pageIdx)),c();case 22:case"end":return a.stop()}},s)}));return function(e,t){return c.apply(this,arguments)}}())}},{key:"renderAuto",value:(t=s()(a.a.mark(function e(t,n){var i,r,s,c,u,d,p,h,m,g,v,f,E,T,y,I,L,k,_,w,b,S,O,C,P,D,A,R,M,N,x,B,U,H,G,z,F=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=F.length>2&&void 0!==F[2]?F[2]:[],this.renderingOption.zoomFitAfterRender&&(o.a.instance.pageEditScale=dt.calcEditScale(t.pages[0]),st.b.initValues(t.pages[0].sheetSize,this.canvas.parentElement),o.a.instance.zoomScale=st.b.getFitScale(),this.renderingOption.zoomFitAfterRender=!1),r=!1,this.pageRenderers.length!==t.pages.length&&(this.syncPageRenderers(t.pages),r=!0),s=0;case 5:if(!(s<t.pages.length)){e.next=15;break}if(c=t.pages[s],u=this.pageRenderers[s],c===u.page){e.next=12;break}return this.syncPageRenderers(t.pages),r=!0,e.abrupt("break",15);case 12:s++,e.next=5;break;case 15:for(d=!0,p=!1,h=void 0,e.prev=18,m=this.pageRenderers[Symbol.iterator]();!(d=(g=m.next()).done);d=!0)v=g.value,f=v.page,E=v.renderElement(f.editScale||dt.calcEditScale(f)),(r||E.parentElement!==this.contents)&&this.contents.insertBefore(E,this.contents.childNodes.item(f.pageIdx));e.next=26;break;case 22:e.prev=22,e.t0=e.catch(18),p=!0,h=e.t0;case 26:e.prev=26,e.prev=27,d||null==m.return||m.return();case 29:if(e.prev=29,!p){e.next=32;break}throw h;case 32:return e.finish(29);case 33:return e.finish(26);case 34:if(T=this.getRenderStatus(t),y=this.isChangeContentsStatus(T.contents),I=this.isChangePositionStatus(T.position),!(i.length>0)&&this.pagingManager.isRenderPageAll()){e.next=43;break}return L=t.pages[n.renderPageIdx],e.next=39,this.renderSinglePage(L,n,y,I,i);case 39:return e.next=41,this.renderPrintout(L,n.activeItems);case 41:e.next=77;break;case 43:k=dt.getRenderedPages(t,n,this.scrollElement),_=!0,w=!1,b=void 0,e.prev=47,S=t.pages[Symbol.iterator]();case 49:if(_=(O=S.next()).done){e.next=63;break}if(C=O.value,!(k.indexOf(C)>=0)){e.next=58;break}return e.next=54,this.renderPage(C,n,y,I);case 54:return e.next=56,this.renderPrintout(C);case 56:e.next=60;break;case 58:return e.next=60,this.renderPage(C,n,y,I,[],!0);case 60:_=!0,e.next=49;break;case 63:e.next=69;break;case 65:e.prev=65,e.t1=e.catch(47),w=!0,b=e.t1;case 69:e.prev=69,e.prev=70,_||null==S.return||S.return();case 72:if(e.prev=72,!w){e.next=75;break}throw b;case 75:return e.finish(72);case 76:return e.finish(69);case 77:if(this.renderItemGuide(t,n,n.activeItems),this.renderingOption.scrollFitAfterRenderer&&(this.scrollElement.moveScrollCenterX(),this.scrollToPage(n.renderPageIdx),this.renderingOption.scrollFitAfterRenderer=!1),!y){e.next=100;break}for(P=dt.getRenderedPages(t,n,this.scrollElement),D=!0,A=!1,R=void 0,e.prev=84,M=P[Symbol.iterator]();!(D=(N=M.next()).done);D=!0)x=N.value,n.pageController.getPageRenderer(x).setPosition(),this.printout.updateDOM({pageId:x.pageId,domRenderParam:{editScale:x.editScale,printAreaBgColor:x.background.color}});e.next=92;break;case 88:e.prev=88,e.t2=e.catch(84),A=!0,R=e.t2;case 92:e.prev=92,e.prev=93,D||null==M.return||M.return();case 95:if(e.prev=95,!A){e.next=98;break}throw R;case 98:return e.finish(95);case 99:return e.finish(92);case 100:for(this.lastRenderStatus=T,this.renderingOption.doReRender=!1,B=!0,U=!1,H=void 0,e.prev=105,G=this.pageRenderers[Symbol.iterator]();!(B=(z=G.next()).done);B=!0)z.value.pageToolboxTop.updateSizeBreakPoints();e.next=113;break;case 109:e.prev=109,e.t3=e.catch(105),U=!0,H=e.t3;case 113:e.prev=113,e.prev=114,B||null==G.return||G.return();case 116:if(e.prev=116,!U){e.next=119;break}throw H;case 119:return e.finish(116);case 120:return e.finish(113);case 121:return o.a.isCropMode()||o.a.dispatch(new l.c(function(e,t,n){n.leftBar.getMenu(ct.b.BACKGROUND_LIB).render(e,t)})),this.pageToolboxBottom.render(t,n),this.renderMasking(),e.abrupt("return",this);case 125:case"end":return e.stop()}},e,this,[[18,22,26,34],[27,,29,33],[47,65,69,77],[70,,72,76],[84,88,92,100],[93,,95,99],[105,109,113,121],[114,,116,120]])})),function(e,n){return t.apply(this,arguments)})},{key:"renderMasking",value:function(){if(wt.hasMask()){var e=!0,t=!1,n=void 0;try{for(var i,a=this.pageRenderers[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var r=i.value;r.contents.classList.add("mask");var s=r.page;if(!wt.hasChildMaskElement(r.itemLayer)){var o=wt.getMaskElementById(s.pageId);o&&r.itemLayer.appendChild(o)}}}catch(e){t=!0,n=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}}}},{key:"scrollToPage",value:function(e){o.a.instance.renderPageIdx=e;var t=o.a.instance.getPageScrollOffset();this.scrollElement.setScrollY(t)}},{key:"getRenderStatus",value:function(e){var t=e,n=t.pages[0].sheetSize,i=o.a.instance,a=dt.getRenderedPages(t,i,this.scrollElement),r=[],s=!0,l=!1,c=void 0;try{for(var u,d=a[Symbol.iterator]();!(s=(u=d.next()).done);s=!0){var p=u.value;r.push(p.pageIdx)}}catch(e){l=!0,c=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw c}}return{position:{pageCount:t.pages.length,zoomScale:i.zoomScale,editScale:i.pageEditScale,tx:i.size.pageDeltaOffsetX,ty:i.size.pageDeltaOffsetY,sheetWidth:n.width,sheetHeight:n.height,canvasWidth:i.size.canvasWidth,canvasHeight:i.size.canvasHeight},contents:{renderdPageIdxs:r,pageCount:t.pages.length,pageOffsetX:i.size.pageOffsetX,pageOffsetY:i.size.pageOffsetY,canvasWidth:i.size.canvasWidth,canvasHeight:i.size.canvasHeight,sheetWidth:n.width,sheetHeight:n.height}}}},{key:"isChangeContentsStatus",value:function(e){var t=this.lastRenderStatus.contents;return this.renderingOption.doReRender||null==t||t.renderdPageIdxs.length!==e.renderdPageIdxs.length||!t.renderdPageIdxs.every(function(t,n){return t===e.renderdPageIdxs[n]})||t.pageCount!==e.pageCount||t.sheetWidth!==e.sheetWidth||t.sheetHeight!==e.sheetHeight||t.pageOffsetX!==e.pageOffsetX||t.pageOffsetY!==e.pageOffsetY||t.canvasWidth!==e.canvasWidth||t.canvasHeight!==e.canvasHeight}},{key:"isChangePositionStatus",value:function(e){var t=this.lastRenderStatus.position;return this.renderingOption.doReRender||null==t||t.pageCount!==e.pageCount||t.sheetWidth!==e.sheetWidth||t.sheetHeight!==e.sheetHeight||t.tx!==e.tx||t.ty!==e.ty||t.editScale!==e.editScale||t.zoomScale!==e.zoomScale||t.canvasWidth!==e.canvasWidth||t.canvasHeight!==e.canvasHeight}},{key:"enableScrollMode",value:function(){document.getElementById(e.PAGE_SCROLL_ELEMENT).classList.add(e.MODE_CANVAS_SCROLL),o.a.instance.renderer.handler.disableElementEvent()}},{key:"disableScrollMode",value:function(){document.getElementById(e.PAGE_SCROLL_ELEMENT).classList.remove(e.MODE_CANVAS_SCROLL),o.a.instance.renderer.handler.enableElementEvent()}},{key:"updateRenderPage",value:function(e){A.ArrayUtil.isEmpty(this.pageRenderers)||this.pageRenderers.forEach(function(t){t.updateRenderPage(e)})}}]),e}();m()(bt,"MODE_CANVAS_SCROLL","mode_canvas_scroll"),m()(bt,"PAGE_SCROLL_ELEMENT","page_scroll_element"),m()(bt,"DATA_ZOOM_OUT","data-zoom-out");var St,Ot=n(98),Ct=n(97),Pt=function(e){function t(){return u()(this,t),y()(this,L()(t).apply(this,arguments))}var n,i;return b()(t,e),p()(t,[{key:"loadList",value:(i=s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.paginationListTool.initList();case 2:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)})},{key:"makeElement",value:function(){var e=document.createElement("div");return e.className=this.getElementClass(),e.appendChild(this.makeAdminUi()),e.appendChild(this.makeBtnAdd()),e.appendChild(this.paginationListTool.render()),e}},{key:"makeAdminUi",value:function(){var e=this;this.adminUIElement=document.createElement("div"),this.adminUIElement.className=R.a.ADMIN_UI;var t=document.createElement("ul"),n=document.createElement("li");n.className=R.a.ACTIVE,n.setAttribute("data-type",Ct.b.ACTIVE),n.addEventListener("click",function(){return r(n)}),n.innerText="공개",t.appendChild(n);var i=document.createElement("li");i.setAttribute("data-type",Ct.b.DISABLED),i.addEventListener("click",function(){return r(i)}),i.innerText="비공개",t.appendChild(i),this.adminUIElement.appendChild(t);var r=function(){var n=s()(a.a.mark(function n(i){return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return $(t).children().removeClass(R.a.ACTIVE),i.classList.add(R.a.ACTIVE),n.next=4,e.setStatus(i.getAttribute("data-type"));case 4:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}();return this.adminUIElement}},{key:"updateUI",value:function(){B()(L()(t.prototype),"updateUI",this).call(this),o.a.getEnv().adminMode?this.adminUIElement.classList.add(R.a.ACTIVE):this.adminUIElement.classList.remove(R.a.ACTIVE)}},{key:"setStatus",value:(n=s()(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.lib.setStatus(t),e.next=3,this.paginationListTool.initList();case 3:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})}]),t}(Ot.a),Dt=n(77),At=n(76);!function(e){e.DEFAULT="DEFAULT",e.BY_DESIGNER_ID="BY_DESIGNER_ID"}(St||(St={}));var Rt,Mt=function(e){function t(){var e,n;u()(this,t);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return n=y()(this,(e=L()(t)).call.apply(e,[this].concat(a))),m()(_()(n),"status",Ct.b.ACTIVE),m()(_()(n),"requestMode",St.DEFAULT),n}var n,i;return b()(t,e),p()(t,[{key:"loadList",value:(i=s()(a.a.mark(function e(n,i){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.initRequestMode(),e.next=3,B()(L()(t.prototype),"loadList",this).call(this,n,i);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)})),function(e,t){return i.apply(this,arguments)})},{key:"initRequestMode",value:function(){if(A.StringUtil.isEmpty(this.keyword))this.requestMode=St.DEFAULT;else switch(this.keyword.charAt(0)){case"@":this.requestMode=St.BY_DESIGNER_ID;break;default:this.requestMode=St.DEFAULT}}},{key:"setStatus",value:function(e){this.status=e}},{key:"requestList",value:(n=s()(a.a.mark(function e(t){var n,i,r,s,o,l,c=this;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setGTMLibDataAuto(this.keyword),e.next=3,Ct.a.getListByType(t);case 3:if(n=e.sent,i=[],n.data.forEach(function(e){return i.push(c.makeListItem(e))}),r={items:i,totalRow:n.pagination.totalRow},i.length>0)try{s=this.getGTMLibData(),o=s.listTitle,l=s.category,At.a.sendImpressions({items:i,category:l,listTitle:o,pageNo:t.page,pageSize:t.pageSize})}catch(e){}return e.abrupt("return",r);case 9:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"getRequestParam",value:function(e){var t={type:this.getTemplateDesignType(),status:this.status,page:e.page,pageSize:e.pageSize};switch(this.requestMode){case St.BY_DESIGNER_ID:t.designerId=this.keyword.substr(1);break;case St.DEFAULT:default:t.keyword=this.keyword}return t}}]),t}(Dt.a),Nt=n(83),xt=n(183),Bt=n(113),Ut=n(94),Ht=function(e){function t(){var e,n;u()(this,t);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return n=y()(this,(e=L()(t)).call.apply(e,[this].concat(a))),m()(_()(n),"makeDddot",!0),n}return b()(t,e),p()(t,[{key:"getThumbUrlList",value:function(){return[this.listItemData.resourceData.thumb300Url]}},{key:"makeHoverLayer",value:function(){var e=this,n=B()(L()(t.prototype),"makeHoverLayer",this).call(this),i=Object(K.setToolsIcon)(n,K.ToolsIcon.SETTINGS,!0);if(i.addEventListener("click",function(){var t=s()(a.a.mark(function t(n){var i;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n.stopPropagation(),i=e.getDefaultTbpeItem(),o.a.dispatch(new l.c(function(t,n,a){a.renderItemToolsByItem([i],n,{type:Bt.b.MOCKUP_EDIT,key:e.listItemData.resourceData.idx})}));case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()),n.appendChild(i),this.makeDddot){var r={itemType:xt.b.MOCKUP,itemIdx:this.listItemData.resourceData.idx,searchTool:this.getSearchTool()},c=new xt.a(r),u=Ut.a.makeDddotBtn(s()(a.a.mark(function t(){var n;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:At.a.sendDetailClick(e.listItemData.myCollectionPk),n={useFavorite:e.useFavorite,myCollectionPk:e.listItemData.myCollectionPk},c.openItemInfo(n,$(u).offset());case 3:case"end":return t.stop()}},t)})));n.appendChild(u)}return n}},{key:"getSearchTool",value:function(){return null}}]),t}(Nt.a),Gt=n(48),zt=function(e){function t(e){var n;return u()(this,t),n=y()(this,L()(t).call(this,new Nt.b(e,Gt.a.GRID,ve.a.UNICORN))),m()(_()(n),"makeDddot",!1),n.useFavorite=!1,n}return b()(t,e),p()(t,[{key:"getDefaultTbpeItem",value:function(){var e=new _e.b("",0,0,0,0);return e.init(1,1),e}},{key:"getEECItemData",value:function(e,t,n){var i=this.listItemData.myCollectionPk,a=Object(Gt.c)(i.resourceType),r="".concat(a,":").concat(i.referenceKey);return{name:"".concat(r,":").concat(this.listItemData.resourceData.name),id:r,price:0,brand:"요소",category:e,variant:a,list:t,position:n}}}]),t}(Ht),Ft=function(e){function t(){return u()(this,t),y()(this,L()(t).call(this))}return b()(t,e),p()(t,[{key:"getTemplateDesignType",value:function(){return Ct.c.MOCKUP_GRID}},{key:"makeListItem",value:function(e){return new zt(e)}},{key:"getLibType",value:function(){return Dt.b.GRID}}]),t}(Mt),Wt=n(118),Kt=function(e){function t(e,n,i){var r;return u()(this,t),r=y()(this,L()(t).call(this)),m()(_()(r),"actionType",l.a.ADD_GRID),m()(_()(r),"commitAction",function(){var e=s()(a.a.mark(function e(t,n,i){var s,o,l,c,u,d,p,h;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s=t.pages[r.pageIdx],o=new De.a(0,0,100*r.row,100*r.row),r.newTbpeId="".concat((new Date).getTime(),"-").concat(Math.random()),!r.newItem){e.next=7;break}l=r.newItem,e.next=28;break;case 7:for((l=new _e.b(r.newTbpeId,o.left,o.top,o.right,o.bottom,0)).init(r.row,r.col),c=!0,u=!1,d=void 0,e.prev=12,p=l.rows[Symbol.iterator]();!(c=(h=p.next()).done);c=!0)h.value.thickness=50;e.next=20;break;case 16:e.prev=16,e.t0=e.catch(12),u=!0,d=e.t0;case 20:e.prev=20,e.prev=21,c||null==p.return||p.return();case 23:if(e.prev=23,!u){e.next=26;break}throw d;case 26:return e.finish(23);case 27:return e.finish(20);case 28:l.props.setLeft(0),l.props.setTop(0),l.adjustSize(),o=Wt.a.getOffsetBaseRect(!1,s.sheetSize,s.editScale,0,0,o.getWidth(),o.getHeight()),l.scale(o.getWidth()/l.getWidth()),l.move(o.left,o.top),l.aspectRatio=l.getHeight()/l.getWidth(),l.addedBy=we.c.USER,s.getAllSingleItems().forEach(function(e){e.hover=!1}),s.addItem(l,s.items.length),Se.a.selectItem(l),r.newItem=l,i.renderCanvas(t,n),i.renderHandler(t,n);case 42:case"end":return e.stop()}},e,null,[[12,16,20,28],[21,,23,27]])}));return function(t,n,i){return e.apply(this,arguments)}}()),m()(_()(r),"rollbackAction",function(e,t,n){e.pages[r.pageIdx].removeItem(r.newItem),n.renderCanvas(e,t),n.renderHandler(e,t)}),m()(_()(r),"recycle",function(){r.newItem=null}),r.pageIdx=e,r.row=n,r.col=i,r}return b()(t,e),t}($e.a),Vt=n(138),Yt=function(e){function t(){var e;return u()(this,t),(e=y()(this,L()(t).call(this))).init(),e}return b()(t,e),p()(t,[{key:"makeLib",value:function(){return new Ft}},{key:"makeBtnAdd",value:function(){var e=document.createElement("button");return e.innerText="기본 표 추가",e.addEventListener("click",function(){Vt.a.hideLeftMenu(),o.a.dispatch(new Kt(o.a.instance.renderPageIdx,5,5))}),e}},{key:"getElementClass",value:function(){return R.a.LIBRARY_GRID}},{key:"getIcon",value:function(){return K.ToolsIcon.ITEM_GRID}},{key:"getName",value:function(){return H.a.TOOLS_LIB_GRID_TITLE}},{key:"getLeftMenuType",value:function(){return ct.b.GRID_LIB}}]),t}(Pt),jt=function(e){function t(e,n){var i;return u()(this,t),(i=y()(this,L()(t).call(this,new Nt.b(e,Gt.a.TEXT,ve.a.UNICORN)))).searchTool=n,i}return b()(t,e),p()(t,[{key:"getDefaultTbpeItem",value:function(){return new Le.b("",0,0,0,0)}},{key:"getSearchTool",value:function(){return this.searchTool}},{key:"getEECItemData",value:function(e,t,n){var i=this.listItemData.myCollectionPk,a=Object(Gt.c)(i.resourceType),r="".concat(a,":").concat(i.referenceKey);return{name:"".concat(r,":").concat(this.listItemData.resourceData.name),id:r,price:0,brand:"요소",category:e,variant:a,list:t,position:n}}}]),t}(Ht),$t=function(e){function t(e){var n;return u()(this,t),(n=y()(this,L()(t).call(this))).searchTool=e,n.addFavoriteEvent(Gt.a.TEXT),n}return b()(t,e),p()(t,[{key:"getTemplateDesignType",value:function(){return Ct.c.MOCKUP_TEXT}},{key:"makeListItem",value:function(e){return new jt(e,this.searchTool)}},{key:"setKeyword",value:function(e){this.keyword=e}},{key:"getKeyword",value:function(){return this.keyword}},{key:"getLibType",value:function(){return Dt.b.TEXT}}]),t}(Mt),Xt=n(131),Zt=n(362),qt=function(e){function t(){var e;return u()(this,t),(e=y()(this,L()(t).call(this))).searchTool=new Xt.a(function(t){return e.setKeyword(A.StringUtil.nvl(t))},A.CRM.get(H.a.TOOLS_LIB_KEYWORD_PLACEHOLDER)),e.init(),e}var n,i;return b()(t,e),p()(t,[{key:"loadList",value:(i=s()(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.paginationListTool.initList();case 2:t=e.sent.totalRow;try{this.loadListAfter(t)}catch(e){0}case 4:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)})},{key:"makeLib",value:function(){return new $t(this.searchTool)}},{key:"makeBtnAdd",value:function(){var e=document.createElement("button");return e.innerText="글상자 추가",e.addEventListener("click",s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Vt.a.hideLeftMenu(),o.a.dispatch(new Zt.a);case 2:case"end":return e.stop()}},e)}))),e}},{key:"makeElement",value:function(){var e=document.createElement("div");return e.className=this.getElementClass(),e.appendChild(this.makeAdminUi()),e.appendChild(this.makeBtnAdd()),e.appendChild(this.makeSearchTool()),e.appendChild(this.paginationListTool.render()),e}},{key:"makeSearchTool",value:function(){return this.searchTool.render()}},{key:"setKeyword",value:(n=s()(a.a.mark(function e(t){var n,i=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!(i.length>1&&void 0!==i[1])||i[1],this.searchTool.updateUI(t),this.lib.setKeyword(t),!n){e.next=6;break}return e.next=6,this.loadList();case 6:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"getElementClass",value:function(){return R.a.LIBRARY_TEXT}},{key:"getIcon",value:function(){return K.ToolsIcon.LIBRARY_TEXT}},{key:"getName",value:function(){return H.a.TOOLS_LIB_TEXT_TITLE}},{key:"getLeftMenuType",value:function(){return ct.b.TEXT_LIB}},{key:"loadListAfter",value:function(e){var t=this.lib.getKeyword()||"";t&&te.a.sendSearchReport({type:te.b.TEXT_ITEM,keyword:t,category:null,totalRow:e})}},{key:"getItemUseEventData",value:function(){var e=this.lib.getGTMLibData();return{type:te.b.TEXT_ITEM,category:null,keyword:e.keyword}}}]),t}(Pt),Qt=n(492),Jt=function(){function e(){u()(this,e),m()(this,"toolbox",new Qt.a)}var t;return p()(e,[{key:"setReady",value:(t=s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.toolbox.setReady();case 2:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"render",value:function(e,t,n){var i=t.activeItems;n?n.type===Rt.HIDE?this.toolbox.render(i,{type:Qt.b.HIDE}):n.type===Rt.FORCE_UPDATE?this.toolbox.render(i,{type:Qt.b.FORCE_UPDATE}):n.type===Rt.ADMIN?this.toolbox.render(i,{type:Qt.b.ADMIN}):this.toolbox.render(i):this.toolbox.render(i)}},{key:"renderItem",value:function(e,t,n){n?n.type===Rt.ADMIN?this.toolbox.render(e,{type:Qt.b.ADMIN}):n.type===Rt.MOCKUP_EDIT?this.toolbox.render(e,{type:Qt.b.MOCKUP_EDIT,key:n.key}):n.type===Rt.HIDE?this.toolbox.render(e,{type:Qt.b.HIDE}):this.toolbox.render(e):this.toolbox.render(e)}},{key:"addToolboxContentsRenderers",value:function(e){this.toolbox.addContentsRenderers(e)}},{key:"setToolsExpend",value:function(e){this.toolbox.setToolsExpend(e)}},{key:"toggleToolsExpend",value:function(){this.toolbox.toggleToolsExpend()}},{key:"getToolRenderers",value:function(){return this.toolbox.getContentsRendererList()}}]),e}();!function(e){e[e.HIDE=0]="HIDE",e[e.ADMIN=1]="ADMIN",e[e.FORCE_UPDATE=2]="FORCE_UPDATE",e[e.MOCKUP_EDIT=3]="MOCKUP_EDIT"}(Rt||(Rt={}));var en,tn,nn,an=n(5);tn=en||(en={}),nn=null,tn.ready=function(){document.body.classList.add(R.a.MOBILE_TUTORIAL_READY)},tn.getElement=function(){if(null==nn){(nn=document.createElement("div")).className=R.a.MOBILE_TUTORIAL;var e=document.createElement("div");e.className=R.a.BODY,e.innerText=A.CRM.get(H.a.TOOLTIP_MOBILE_TUTORIAL),nn.appendChild(e)}return nn},tn.close=function(){nn&&nn.parentElement&&(nn.parentElement.removeChild(nn),document.body.classList.remove(R.a.MOBILE_TUTORIAL_READY),nn=null)};var rn,sn=n(155),on=function(){function e(){u()(this,e),this.makeMobileAlertBtn()}return p()(e,[{key:"getMobileAlertBtn",value:function(){return this.mobileAlertBtn}},{key:"setPrintoutAlertBtnClickListener",value:function(e){this.printoutAlertBtnClickListener=e}},{key:"showUnsupportedLicenseAlert",value:function(e){e?this.unsupportedLicenseAlertBtn.classList.add(R.a.ACTIVE):(this.unsupportedLicenseAlertBtn.classList.remove(R.a.ACTIVE),this.showPrintoutAlertBtn(!1))}},{key:"isShowUnsupportedLicenseAlertBtn",value:function(){return this.unsupportedLicenseAlertBtn.classList.contains(R.a.ACTIVE)}},{key:"showPrintoutAlertBtn",value:function(e,t){e&&t&&!this.isShowUnsupportedLicenseAlertBtn()?(this.printoutAlertBtn.classList.add(R.a.ACTIVE),this.tbpeId=t):this.printoutAlertBtn.classList.remove(R.a.ACTIVE)}},{key:"makeLabel",value:function(e){var t=document.createElement("div");return t.classList.add("mobile_alert_button_label"),t.innerText=e,t}},{key:"makePrintoutAlertBtn",value:function(){var e=this,t=this.printoutAlertBtn=document.createElement("div");return t.classList.add("printout_alert"),Object(K.setToolsIcon)(t,K.ToolsIcon.ERROR),t.appendChild(this.makeLabel("확인해주세요")),t.addEventListener("touchend",function(t){t.stopPropagation(),t.preventDefault(),e.printoutAlertBtnClickListener&&e.tbpeId&&e.printoutAlertBtnClickListener(e.tbpeId)}),t}},{key:"makeUnsupportedLicenseAlertBtn",value:function(){var e=this.unsupportedLicenseAlertBtn=document.createElement("div");e.classList.add("unsupported_license_alert");var t=document.createElement("div");return t.className="unsupported_license_alert_icon",e.appendChild(t),e.appendChild(this.makeLabel("미지원 요소")),e.addEventListener("touchend",function(e){e.stopPropagation(),e.preventDefault(),sn.c.showPusher()}),e}},{key:"makeMobileAlertBtn",value:function(){var e=this.mobileAlertBtn=document.createElement("div");e.classList.add("mobile_alert_button"),e.appendChild(this.makePrintoutAlertBtn()),e.appendChild(this.makeUnsupportedLicenseAlertBtn())}}]),e}(),ln=n(81),cn=function(){function e(t,n,i,a,r,s,o,l,c,d,p,h,m,g){if(u()(this,e),this.appHeader=t,this.leftBar=n,this.itemToolsRenderer=i,this.pageListNavigator=a,this.pageZoomNavigator=r,this.rightFloatingMenu=s,this.leftFloatingMenu=o,this.canvasRenderer=l,this.handler=c,this.messageBox=d,this.helpCenter=p,this.designProjectMenu=h,this.rightSection=m,this.rightBar=g,this.itemGuideAlertMobile=new on,this.appElement=document.getElementById("app"),null==this.appElement)throw Error("와 조작당함: ".concat("app"));this.setHeader(),this.setBody()}var t,n,i,r;return p()(e,[{key:"setReady",value:(r=s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.appHeader.setReady();case 2:return e.next=4,this.canvasRenderer.setReady();case 4:return e.next=6,this.itemToolsRenderer.setReady();case 6:return e.next=8,this.leftBar.setReady();case 8:return e.next=10,this.handler.setReady();case 10:return e.next=12,this.pageListNavigator.setReady();case 12:return e.next=14,this.pageZoomNavigator.setReady();case 14:return e.next=16,this.rightFloatingMenu.setReady();case 16:return this.leftFloatingMenu.setReady(),this.helpCenter.setReady(),e.next=20,this.designProjectMenu.setReady();case 20:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"renderAll",value:(i=s()(a.a.mark(function e(t,n){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.renderAuto(t,n);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}},e,this)})),function(e,t){return i.apply(this,arguments)})},{key:"renderAppHeader",value:(n=s()(a.a.mark(function e(t,n){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.appHeader.render(t,n);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})},{key:"renderItemTools",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return n?this.itemToolsRenderer.render(e,t,{type:Rt.HIDE}):i?this.itemToolsRenderer.render(e,t,{type:Rt.FORCE_UPDATE}):this.itemToolsRenderer.render(e,t),this}},{key:"renderItemToolsByItem",value:function(e,t,n){n&&n.type===Bt.b.ADMIN?this.itemToolsRenderer.renderItem(e,t,{type:Rt.ADMIN}):n&&n.type===Bt.b.MOCKUP_EDIT?this.itemToolsRenderer.renderItem(e,t,{type:Rt.MOCKUP_EDIT,key:n.key}):this.itemToolsRenderer.renderItem(e,t)}},{key:"renderPageNavigator",value:function(e,t){return this.pageListNavigator.render(e,t),this.pageZoomNavigator.render(e,t),this}},{key:"renderCanvas",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.canvasRenderer.renderAuto(e,t,n).catch(function(e){return null}),this}},{key:"renderLayer",value:function(e,t){return this.rightSection.layerToolManager.render(e,t),this.leftFloatingMenu.update(),this}},{key:"renderRightFloatingMenu",value:function(e,t){return this.rightFloatingMenu.render(e,t),this}},{key:"renderLeftFloatingMenu",value:function(e){return this.leftFloatingMenu.render(e),this}},{key:"renderDesignProjectMenu",value:function(e){return this.designProjectMenu.render(e),this}},{key:"renderAuto",value:(t=s()(a.a.mark(function e(t,n,i){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=8;break}return e.next=3,this.canvasRenderer.renderAuto(t,n);case 3:try{this.renderOther(t,n)}catch(e){console.log(e)}return i(),e.abrupt("return",this);case 8:return e.next=10,this.canvasRenderer.renderAuto(t,n).catch(function(e){return console.log(e)});case 10:return e.abrupt("return",this.renderOther(t,n));case 11:case"end":return e.stop()}},e,this)})),function(e,n,i){return t.apply(this,arguments)})},{key:"setRotateSpecialBtn",value:function(e){o.a.isMobileMode()&&e?this.specialBtn.classList.add("rotate"):this.specialBtn.classList.remove("rotate")}},{key:"setVisibleSpecialBtn",value:function(e){e?this.specialBtn.classList.remove(R.a.MOBILE_HIDE):this.specialBtn.classList.add(R.a.MOBILE_HIDE)}},{key:"setPositionFloatingButtons",value:function(e){if(this.specialBtn&&this.pageZoomBtn)switch(e){case Bt.a.default:this.specialBtn.classList.remove(R.a.FLOATING_TOP),this.pageZoomBtn.classList.remove(R.a.FLOATING_TOP),this.bizMark.classList.remove(R.a.FLOATING_TOP);break;case Bt.a.top:this.specialBtn.classList.add(R.a.FLOATING_TOP),this.pageZoomBtn.classList.add(R.a.FLOATING_TOP),this.bizMark.classList.add(R.a.FLOATING_TOP)}}},{key:"renderHandler",value:function(e,t,n){return this.handler.render(e,t,n),this}},{key:"renderOther",value:function(e,t,n){this.renderHandler(e,t);var i=n&&n.type===Bt.c.ITEM_TOOLS_UPDATE_PREVENT,a=n&&n.type===Bt.c.NO_RENDER_LAYER;return i||a||this.itemToolsRenderer.render(e,t),this.appHeader.render(e,t),this.pageListNavigator.render(e,t),this.pageZoomNavigator.render(e,t),this.renderDesignProjectMenu(t),this.rightBar&&this.rightBar.render(),a||(this.rightSection.layerToolManager.render(e,t),this.leftFloatingMenu.update()),this.rightFloatingMenu.render(e,t),this.leftFloatingMenu.render(t),this.leftBar.render(e,t),this}},{key:"hasScroll",value:function(){return this.canvasRenderer.scrollElement.hasScroll()}},{key:"scrollView",value:function(e,t){this.canvasRenderer.scrollElement.moveScrollX(e).moveScrollY(t)}},{key:"moveScroll",value:function(e,t){this.canvasRenderer.scrollElement.moveScroll(e,t)}},{key:"scrollCenter",value:function(){this.canvasRenderer.scrollElement.moveScrollCenter()}},{key:"renderLayerThumb",value:function(e){this.rightSection.layerToolManager.updateThumbs(e)}},{key:"setHeader",value:function(){var e=this.appHeader.getElement();e&&e.parentElement!==this.appElement&&this.appElement.appendChild(e)}},{key:"setBody",value:function(){var e=document.getElementById(an.a.editorWrap);e.appendChild(this.leftBar.getElement()),e.appendChild(this.makeEditorSection()),e.appendChild(this.rightSection.getElement())}},{key:"makeEditorSection",value:function(){var e=this,t=ln.a.editorSectionOption,n=document.getElementById(an.a.editorSection);null==n&&(n=document.createElement("section")),n.id="editorSection";var i=document.createElement("section");i.id="designProjectMenu",n.appendChild(i);var a=document.createElement("div");a.id="playground";var r=document.createElement("div");r.id="canvas";var s=document.createElement("div");s.id="selectArea",r.appendChild(s);var l=document.createElement("div");l.id="itemArrangeTypeSelector";var c=Re.a.getElement(),u=document.createElement("div");u.id="pageListNavigator";var d=this.pageZoomBtn=document.createElement("div");d.id="pageZoomNavigator";var p=document.createElement("div");p.id="leftFloatingMenu";var h=document.createElement("div");h.id="rightFloatingMenu";var m=this.messageBoxBtn=this.messageBox.getDefaultButton(),g=this.specialBtn=document.createElement("div");g.id="specialButton",g.classList.add(t.bizhowsCenter?R.a.THEME_BIZHOWS:R.a.THEME_MIRIDI);var v=document.createElement("div");o.a.getEnv().browser.isMobile()&&v.appendChild(en.getElement()),v.addEventListener("click",function(t){t.stopPropagation(),en.close(),e.leftBar.toggleShowLibrary()}),v.id="showLibrary",Object(K.setToolsIcon)(v,K.ToolsIcon.ADD),g.appendChild(v);var f=document.createElement("div");f.id="helpCenter",f.className=R.a.HELP_CENTER;var E=t.bizhowsCenter?K.ToolsIcon.HELP:K.ToolsIcon.MESSAGE_ROUNDED;Object(K.setToolsIcon)(f,E),f.addEventListener("click",function(t){t.stopPropagation(),e.helpCenter.openHelpPopup(f)}),g.appendChild(f);var T=this.bizMark=document.createElement("div");return T.classList.add("bizhows_mode_mark"),a.appendChild(r),a.appendChild(l),a.appendChild(c),a.appendChild(u),a.appendChild(d),a.appendChild(p),a.appendChild(h),t.showBizhowsMark&&a.appendChild(T),a.appendChild(this.itemGuideAlertMobile.getMobileAlertBtn()),t.showMessageBoxBtn&&a.appendChild(m),a.appendChild(g),n.appendChild(a),n}}]),e}(),un=n(168),dn=n.n(un),pn=n(106);!function(e){e[e.IDLE=0]="IDLE",e[e.BUSY=1]="BUSY"}(rn||(rn={}));var hn=function(){function e(){u()(this,e),m()(this,"lastRenderStatus",{contents:null,position:null}),m()(this,"processStatus",null),m()(this,"pageListVisible",!0)}var t;return p()(e,[{key:"setReady",value:(t=s()(a.a.mark(function t(){var n=this;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.element=document.getElementById("pageListNavigator"),this.makeElement(),setInterval(function(){var t=o.a.instance;if(!n.lastRenderStatus.position||n.lastRenderStatus.position.pageHandleVisible){var i=t.actionQ.length,a=i>0?t.actionQ[i-1].length:0;if(n.processStatus===rn.IDLE&&n.lastRenderStatus.contents&&(n.lastRenderStatus.contents.actionCount1!==i||n.lastRenderStatus.contents.actionCount2!==a||n.lastRenderStatus.contents.designInfoIdx!==P.b.getDesignInfo().getIdx())&&(new Date).getTime()-n.lastRenderStatus.contents.renderTime>e.REFRESH_TERM){var r=Object.assign({},n.lastRenderStatus.contents,{renderTime:(new Date).getTime()});n.renderPageListItems(r,t.renderPageIdx)}}},e.REFRESH_INTERVAL);case 3:case"end":return t.stop()}},t,this)})),function(){return t.apply(this,arguments)})},{key:"makeElement",value:function(){var e=this,t=document.createElement("div");t.className=R.a.PAGE_NAVIGATOR_BUTTONS,this.element.appendChild(t),this.mouseHandles=t;var n=mn("btnShowPageList",null,null,function(){e.showPageList(!e.pageListVisible)});z.a.createTooltip(n,z.b.T,{title:{name:H.a.PAGE_TOOLTIP_SHOWPAGELIST_TITLE}});var i=mn("btnMovePagePrev",K.ToolsIcon.PREV,null,function(){return o.a.dispatch(new pn.f)});z.a.createTooltip(i,z.b.T,{title:{name:H.a.PAGE_TOOLTIP_PREVIOUSPAGE_TITLE,shortcut:H.a.PAGE_TOOLTIP_PREVIOUSPAGE_SHORTCUT}});var a=mn("btnMovePageNext",K.ToolsIcon.NEXT,null,function(){return o.a.dispatch(new pn.e)});z.a.createTooltip(a,z.b.T,{title:{name:H.a.PAGE_TOOLTIP_NEXTPAGE_TITLE,shortcut:H.a.PAGE_TOOLTIP_NEXTPAGE_SHORTCUT}}),this.pageHandles=document.createElement("div"),this.pageHandles.className=R.a.PAGE_NAVIGATOR_BUTTONS,this.pageHandles.appendChild(n),this.pageHandles.appendChild(i),this.pageHandles.appendChild(a),this.element.appendChild(this.pageHandles);var r=document.createElement("div");r.className=R.a.PAGE_LIST;var s=document.createElement("div");s.className=R.a.PAGE_LIST_HEADER;var c=document.createElement("p");c.innerText=A.CRM.get(H.a.PAGE_LIST_TITLE),s.appendChild(c);var u=mn("btnClosePageList",K.ToolsIcon.CLOSE,null,function(){o.a.dispatch(new l.c(function(t,n,i){e.pageListVisible=!1,i.renderPageNavigator(t,n)}))});s.appendChild(u),Object(K.setToolsIcon)(s,K.ToolsIcon.WORK_COMPLETE),r.appendChild(s);var d=document.createElement("div");d.className=R.a.PAGE_LIST_ITEMS,r.appendChild(d),this.element.appendChild(r),this.pageList=r,this.btnShowPageList=n,this.pageListItems=d,this.pageListScrollElement=new G.a,this.pageListItems.appendChild(this.pageListScrollElement.render()),$(this.pageList).on("click",".".concat(R.a.PAGE_THUMBNAIL),function(e){var t=$(this).data("pageIdx");o.a.instance.renderPageIdx!==t&&o.a.dispatch(new pn.c(t))}).on("click",".".concat(R.a.ADD_PAGE_BLANK),function(e){o.a.dispatch(new pn.a(Number($(this).data("pageIdx"))+1))}).on("click",".".concat(R.a.ADD_PAGE_CLONE),function(e){o.a.dispatch(new pn.b(Number($(this).data("pageIdx"))+1))}).on("click",".".concat(R.a.PAGE_REMOVE),function(e){o.a.dispatch(new pn.i(Number($(this).data("pageIdx"))))})}},{key:"render",value:function(e,t){if(t.renderer.canvasRenderer.pagingManager.isShowPageListNavigator()){this.element.classList.remove("disabled");var n=this.getRenderStatus(e),i=n.position.isPageListVisible;if(this.isChangeContentsStatus(n.contents)){var a=n.contents.maxPageIdx,r="";r=a>0?"".concat(n.contents.renderPageIdx+1," / ").concat(a+1,"  "):"1 / 1",this.btnShowPageList.innerText="페이지 ".concat(r," "),this.element.className=R.a.ACTIVE,this.renderPageListItems(n.contents)}this.isChangePositionStatus(n.position)&&(n.position.pageHandleVisible?(i?(this.btnShowPageList.classList.add(R.a.ACTIVE),this.pageList.classList.add(R.a.ACTIVE)):(this.btnShowPageList.classList.remove(R.a.ACTIVE),this.pageList.classList.remove(R.a.ACTIVE)),this.pageHandles.classList.remove(R.a.DISABLE)):(this.btnShowPageList.classList.remove(R.a.ACTIVE),this.pageList.classList.remove(R.a.ACTIVE),this.pageHandles.classList.add(R.a.DISABLE))),this.lastRenderStatus=n}else this.element.classList.add("disabled")}},{key:"getRenderStatus",value:function(e){var t=o.a.instance,n=e.pages[t.renderPageIdx].sheetSize;return{position:{pageHandleVisible:e.pages.length>1,isPageListVisible:this.pageListVisible},contents:{renderTime:(new Date).getTime(),zoomScale:t.zoomScale,isMoveMode:t.mouseAction.mode===O.a.MODE_NAVIGATION,renderPageIdx:t.renderPageIdx,renderPageRatio:n.width/n.height,maxPageIdx:t.maxPageIdx,actionCount1:null!=this.lastRenderStatus.contents?this.lastRenderStatus.contents.actionCount1:0,actionCount2:null!=this.lastRenderStatus.contents?this.lastRenderStatus.contents.actionCount2:0,designInfoIdx:P.b.getDesignInfo().getIdx(),designEditTime:P.b.getDesignEditTime(),maxHeight:$("#playground").height()-130,pageHasScroll:t.renderer.hasScroll()}}}},{key:"isChangeContentsStatus",value:function(e){var t=this.lastRenderStatus.contents;return null==t||t.zoomScale!==e.zoomScale||t.isMoveMode!==e.isMoveMode||t.renderPageIdx!==e.renderPageIdx||t.renderPageRatio!==e.renderPageRatio||t.maxPageIdx!==e.maxPageIdx||t.maxHeight!==e.maxHeight||t.designInfoIdx!==e.designInfoIdx||t.designEditTime!==e.designEditTime}},{key:"isChangePositionStatus",value:function(e){var t=this.lastRenderStatus.position;return null==t||t.isPageListVisible!==e.isPageListVisible||t.pageHandleVisible!==e.pageHandleVisible}},{key:"renderPageListItems",value:function(t,n){var i=this;this.processStatus=rn.BUSY,o.a.dispatch(new l.c(function(a,r,s){var o=r.actionQ.length,l=o>0?r.actionQ[o-1].length:0,c=P.b.getDesignInfo().getIdx(),u=a.pages.length;if(null!=n){var d=a.pages[n];if(i.isRenderTimeout(t)||null==d)return void(i.processStatus=rn.IDLE);var p=gn(d.sheetSize,168,500),h=p.w,m=p.h,g=p.scale;return d.renderThumbnail(h,m,g).then(function(n){$(i.element).find(".page_thumbnail[data-page-id=".concat(d.pageId,"]")).attr("src",n);var a=$(".".concat(R.a.PAGE_LIST," ul")).height()+e.PAGE_LIST_ITEMS_MARGIN_BOTTOM,r=a<t.maxHeight?a:t.maxHeight;i.pageListScrollElement.setMaxHeight(r+"px"),i.lastRenderStatus.contents.actionCount1=o,i.lastRenderStatus.contents.actionCount2=l,i.lastRenderStatus.contents.designInfoIdx=c}),i.lastRenderStatus.contents&&(i.lastRenderStatus.contents.renderTime=t.renderTime),void(i.processStatus=rn.IDLE)}var v=0,f=document.createElement("ul"),E=!0,T=!1,y=void 0;try{for(var I,L=function(){var n=I.value;if(i.isRenderTimeout(t))return i.processStatus=rn.IDLE,{v:void 0};var a=gn(n.sheetSize,168,500),s=a.w,d=a.h,p=a.scale,h=document.createElement("li");h.id="preview"+n.pageIdx,h.className=R.a.PAGE_LIST_ITEM,h.style.zIndex=u-n.pageIdx+"",n.pageIdx===r.renderPageIdx&&h.classList.add(R.a.ACTIVE);var m=document.createElement("h6");m.innerText=""+(n.pageIdx+1);var g=new Image;g.setAttribute(e.PAGE_IDX_KEY,""+n.pageIdx),g.setAttribute("data-page-id",""+n.pageId),g.className=R.a.PAGE_THUMBNAIL,g.style.width=s+"px",g.style.height=d+"px",h.appendChild(g),h.appendChild(m),h.appendChild(mn(null,K.ToolsIcon.DDDDOT,R.a.PAGE_DOT));var E=document.createElement("div");E.className=R.a.PAGE_CONTROL;var T=document.createElement("div");T.className=R.a.PAGE_ADD_CONTROL;var y=document.createElement("div");y.className=R.a.ADD_PAGE_BUTTONS;var L=document.createElement("p");L.className=R.a.ADD_PAGE_BLANK,L.innerText="빈 페이지 추가하기",L.setAttribute(e.PAGE_IDX_KEY,""+n.pageIdx);var k=document.createElement("p");k.className=R.a.ADD_PAGE_CLONE,k.innerText="페이지 복제하기",k.setAttribute(e.PAGE_IDX_KEY,""+n.pageIdx),y.appendChild(L),y.appendChild(k),T.appendChild(y);var _=Object(K.setToolsIcon)(T,K.ToolsIcon.PLUS),w=[];w.push({name:H.a.PAGE_TOOLTIP_ADDCLONEPAGE_SUBTITLE1,shortcut:H.a.PAGE_TOOLTIP_ADDCLONEPAGE_SHORTCUT1}),w.push({name:H.a.PAGE_TOOLTIP_ADDCLONEPAGE_SUBTITLE2,shortcut:H.a.PAGE_TOOLTIP_ADDCLONEPAGE_SHORTCUT2}),z.a.createTooltip(_,z.b.T,{title:{name:H.a.PAGE_TOOLTIP_ADDCLONEPAGE_TITLE},subtitles:w}),_.addEventListener("click",function(){y.classList.toggle(R.a.ACTIVE);var e="click.add_page_"+A.StringUtil.random();y.classList.contains(R.a.ACTIVE)?$(document.body).on(e,function(t){var n=t.target;n===_||$.contains(_,n)||n===y||$.contains(y,n)||(y.classList.remove(R.a.ACTIVE),$(document.body).off(e))}):$(document.body).off(e)}),E.appendChild(T),h.appendChild(E);var b=mn(null,K.ToolsIcon.DELETE,R.a.PAGE_REMOVE);b.setAttribute(e.PAGE_IDX_KEY,""+n.pageIdx),z.a.createTooltip(b,z.b.TL,{title:{name:H.a.PAGE_TOOLTIP_REMOVEPAGE_TITLE}}),h.appendChild(b),f.appendChild(h),n.renderThumbnail(s,d,p).then(function(n){g.src=n;var a=$(f).height()+e.PAGE_LIST_ITEMS_MARGIN_BOTTOM,r=a<t.maxHeight?a:t.maxHeight;i.pageListScrollElement.setMaxHeight(r+"px"),v++,i.lastRenderStatus.contents&&v===u&&(i.lastRenderStatus.contents.actionCount1=o,i.lastRenderStatus.contents.actionCount2=l,i.lastRenderStatus.contents.designInfoIdx=c)})},k=a.pages[Symbol.iterator]();!(E=(I=k.next()).done);E=!0){var _=L();if("object"===dn()(_))return _.v}}catch(e){T=!0,y=e}finally{try{E||null==k.return||k.return()}finally{if(T)throw y}}i.isRenderTimeout(t)||i.pageListScrollElement.setMaxHeight(t.maxHeight+"px").render(f),i.processStatus=rn.IDLE,i.lastRenderStatus.contents&&(i.lastRenderStatus.contents.renderTime=t.renderTime)}))}},{key:"isRenderTimeout",value:function(e){return null!=this.lastRenderStatus.contents&&e.renderTime<=this.lastRenderStatus.contents.renderTime}},{key:"showPageList",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.pageListVisible=e,t&&o.a.dispatch(new l.c(function(e,t,n){n.renderPageNavigator(e,t)}));var n=function(e){};this.pageListVisible?document.addEventListener("click",n):document.removeEventListener("click",n)}}]),e}();function mn(e,t,n,i){var a=document.createElement("button");return e&&(a.id=e),a.type="button",i&&a.addEventListener("click",i),t&&Object(K.setToolsIcon)(a,t),n&&a.classList.add(n),a}function gn(e,t,n){var i=t/e.width,a=n/e.height,r=Math.min(i,a);return{w:Math.floor(r*e.width),h:Math.floor(r*e.height),scale:r}}m()(hn,"REFRESH_INTERVAL",800),m()(hn,"REFRESH_TERM",2500),m()(hn,"PAGE_LIST_ITEMS_MARGIN_BOTTOM",20),m()(hn,"PAGE_IDX_KEY","data-page-idx");var vn,fn=n(144),En=n(107),Tn=n(230),yn=function(e){function t(){return u()(this,t),y()(this,L()(t).apply(this,arguments))}var n,i;return b()(t,e),p()(t,[{key:"requestList",value:(i=s()(a.a.mark(function e(n){var i,r,s,o,l,c,u=this;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setGTMLibDataAuto(n.keyword),e.next=3,t.requestList(n);case 3:if(i=e.sent,r=A.ArrayUtil.nvl(i.data).map(function(e){return u.param.makeListItem(e)}),s={items:r,totalRow:i.totalCnt},r.length>0)try{o=this.getGTMLibData(),l=o.listTitle,c=o.category,At.a.sendImpressions({items:r,category:c,listTitle:l,pageNo:n.pageNo,pageSize:n.pageSize})}catch(e){}return e.abrupt("return",s);case 8:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"getRequestParam",value:function(e){var t={pageSize:e.pageSize,pageNo:e.page,categoryIdxList:this.categoryParam(),active:this.getListParamStatus(),deployType:this.getListParamDeployTypeBit(),excludeDeployType:this.getListParamExcludeDeployTypeBit()},n=this.param.getKeyword();if(!A.StringUtil.isEmpty(n)){if(o.a.getEnv().adminMode){var i=n.charAt(0);if("#"===i)return t.id=n.substring(1),t;if("@"===i)return t.designerId=n.substring(1),t}var a=n.trim().split(" ");t.keyword=a.shift(),t.filterKeywordList=a}return t}},{key:"getListParamStatus",value:function(){switch(this.param.getItemAccessType()){case ct.a.PUBLIC:case ct.a.PRIVATE:return ft.StickerStatus.ACTIVE;default:return ft.StickerStatus.DISABLED}}},{key:"getListParamDeployTypeBit",value:function(){switch(this.param.getItemAccessType()){case ct.a.PUBLIC:return Tn.a.UNICORN.bit;case ct.a.PRIVATE:default:return-1}}},{key:"getListParamExcludeDeployTypeBit",value:function(){switch(this.param.getItemAccessType()){case ct.a.PRIVATE:return Tn.a.UNICORN.bit;case ct.a.PUBLIC:default:return-1}}}],[{key:"requestList",value:(n=s()(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.ajax({type:"POST",url:A.CRM.get(H.a.STICKER_LIST_URL),data:t,contentType:"application/x-www-form-urlencoded;charset=euc-kr",dataType:"json",traditional:!0,beforeSend:function(e){e.overrideMimeType("application/x-www-form-urlencoded;charset=euc-kr")}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)})}]),t}(Dt.a),In=function(e){function t(e){var n;return u()(this,t),(n=y()(this,L()(t).call(this))).param=e,n.addFavoriteEvent(Gt.a.BACKGROUND_IMAGE),n}return b()(t,e),p()(t,[{key:"categoryParam",value:function(){return[En.a.BACKGROUND]}},{key:"getLibType",value:function(){return Dt.b.BACKGROUND_IMAGE}}]),t}(yn),Ln=function(e){function t(){return u()(this,t),y()(this,L()(t).apply(this,arguments))}var n;return b()(t,e),p()(t,[{key:"getLibParam",value:function(){var e=this;return{makeListItem:function(t){return e.makeListItem(t)},getItemAccessType:this.param.getItemAccessType,getKeyword:this.param.getKeyword}}},{key:"getStickerListItemParam",value:function(e){var t=this;return{resourceData:e,setKeyword:this.param.setKeyword,getKeyword:function(){return t.param.getKeyword()}}}},{key:"makeElement",value:function(){var e=document.createElement("div");return e.className=this.getElementClass(),e.appendChild(this.paginationListTool.render()),e}},{key:"loadList",value:(n=s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.paginationListTool.initList();case 2:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"getIcon",value:function(){return null}}]),t}(Ot.a),kn=n(101),_n=function(e){function t(e,n){var i;return u()(this,t),(i=y()(this,L()(t).call(this,new Nt.b(e.resourceData,n,ve.a.BIZHOWS)))).param=e,i}return b()(t,e),p()(t,[{key:"getThumbUrlList",value:function(){return[En.b.getThumbnail(this.listItemData.resourceData.id,En.c.SIZE_400)]}},{key:"doAction",value:function(){if(B()(L()(t.prototype),"doAction",this).call(this),this.param.getKeyword){var e=this.param.getKeyword();A.StringUtil.isEmpty(e)||e.startsWith("#")||e.startsWith("@")||kn.a.from(ve.a.SMILECAT,Boolean(!1)).increaseStickerSearchKeywordCount(this.listItemData.resourceData.tsIdx,e.split(" "))}}},{key:"makeHoverLayer",value:function(){var e=this,n=B()(L()(t.prototype),"makeHoverLayer",this).call(this),i=Object(K.setToolsIcon)(n,K.ToolsIcon.SETTINGS,!0);i.addEventListener("click",function(){var t=s()(a.a.mark(function t(n){var i,r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n.stopPropagation(),i=e.listItemData.myCollectionPk,(r=new Ne.e("",0,0,0,0)).props.setPhotoKey(i.referenceKey),r.orgType=e.getOriginPhotoType(),o.a.dispatch(new l.c(function(e,t,n){Se.a.unselectAllItems(),n.renderHandler(e,t),n.renderItemToolsByItem([r],t,{type:Bt.b.ADMIN})}));case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()),n.appendChild(i);var r=new xt.a({itemType:xt.b.STICKER,itemReferenceKey:this.listItemData.myCollectionPk.referenceKey,search:this.param.setKeyword?function(t){return e.param.setKeyword(t)}:void 0}),c=Ut.a.makeDddotBtn(s()(a.a.mark(function t(){var n;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:At.a.sendDetailClick(e.listItemData.myCollectionPk),n={useFavorite:e.useFavorite,myCollectionPk:e.listItemData.myCollectionPk},r.openItemInfo(n,$(c).offset());case 3:case"end":return t.stop()}},t)})));return n.appendChild(c),n}},{key:"isValid",value:function(){var e=this.listItemData.resourceData.id;return e&&!E.b.isIclickSticker(e)}}]),t}(Nt.a),wn=function(e){function t(e){return u()(this,t),y()(this,L()(t).call(this,e,Gt.a.BACKGROUND_IMAGE))}return b()(t,e),p()(t,[{key:"getOriginPhotoType",value:function(){return Ne.b.BackgroundImage}}]),t}(_n),bn=function(e){function t(e){var n;return u()(this,t),(n=y()(this,L()(t).call(this))).param=e,n.init(),n}return b()(t,e),p()(t,[{key:"makeLib",value:function(){return new In(this.getLibParam())}},{key:"getName",value:function(){return H.a.TOOLS_LIB_BACKGROUND_IMAGE_TITLE}},{key:"makeListItem",value:function(e){return new wn(this.getStickerListItemParam(e))}},{key:"getElementClass",value:function(){return R.a.LIBRARY_BACKGROUND_PHOTO}},{key:"getLeftMenuType",value:function(){return ct.b.BACKGROUND_IMAGE_LIB}},{key:"getJustifiedListToolOption",value:function(){return null}},{key:"getItemUseEventData",value:function(){return{type:te.b.BG_ITEM,category:null,keyword:null,customAction:"사진"}}}]),t}(Ln),Sn=n(60),On=n(121);!function(e){e.DEFAULT="DEFAULT",e.BY_DESIGNER_ID="BY_DESIGNER_ID"}(vn||(vn={}));var Cn=function(e){function t(){var e,n;u()(this,t);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return n=y()(this,(e=L()(t)).call.apply(e,[this].concat(a))),m()(_()(n),"requestMode",vn.DEFAULT),n}var n,i,r,l;return b()(t,e),p()(t,[{key:"loadList",value:(l=s()(a.a.mark(function e(n,i){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.initRequestMode(),e.next=3,B()(L()(t.prototype),"loadList",this).call(this,n,i);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)})),function(e,t){return l.apply(this,arguments)})},{key:"initRequestMode",value:function(){var e=this.param.getKeyword();if(A.StringUtil.isEmpty(e))this.requestMode=vn.DEFAULT;else switch(e.charAt(0)){case"@":this.requestMode=vn.BY_DESIGNER_ID;break;default:this.requestMode=vn.DEFAULT}}},{key:"getFunctionItem",value:function(){return null}},{key:"requestList",value:(r=s()(a.a.mark(function e(t){var n,i,r,s,l,c,u=this;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setGTMLibDataAuto(this.param.getKeyword()),e.next=3,Sn.c.getSvgDataResponse(t,o.a.instance.env.adminMode);case 3:if(n=e.sent,i=A.ArrayUtil.nvl(n.svgDataList).map(function(e){return u.param.makeListItem(e,!1)}),1===t.page&&this.getFunctionItem()&&A.StringUtil.isEmpty(t.keyword)&&i.unshift(this.getFunctionItem()),r={items:i,totalRow:n.totalRow},i.length>0)try{s=this.getGTMLibData(),l=s.listTitle,c=s.category,At.a.sendImpressions({items:i,category:c,listTitle:l,pageNo:t.page,pageSize:t.pageSize})}catch(e){}return e.abrupt("return",r);case 9:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"loadRecommendList",value:(i=s()(a.a.mark(function e(t){var n,i,r=this;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=7;break}return e.next=3,this.loadRecommendDataList();case 3:return n=e.sent,e.abrupt("return",n.map(function(e){return r.param.makeListItem(e,!1)}));case 7:if(this.recommendList){e.next=12;break}return e.next=10,this.loadRecommendDataList();case 10:i=e.sent,this.recommendList=i.map(function(e){return r.param.makeListItem(e,!0)});case 12:return e.abrupt("return",this.recommendList);case 13:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"loadRecommendDataList",value:(n=s()(a.a.mark(function e(){var t,n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.recommendDataList){e.next=8;break}return(t=this.getRequestParam({page:1,pageSize:20})).recommend=!0,t.keyword="",e.next=6,Sn.c.getSvgDataResponse(t,o.a.instance.env.adminMode);case 6:n=e.sent,this.recommendDataList=n.svgDataList;case 8:return e.abrupt("return",this.recommendDataList);case 9:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"getRequestParam",value:function(e){var t={type:this.getSvgMetaType().value,page:e.page,pageSize:e.pageSize,status:this.getListParamStatus().value},n=this.param.getKeyword();switch(this.requestMode){case vn.BY_DESIGNER_ID:t.designerId=n.substr(1);break;case vn.DEFAULT:default:t.keyword=n}return t}},{key:"getListParamStatus",value:function(){switch(this.param.getItemAccessType()){case ct.a.PUBLIC:return Sn.h.ACTIVE;case ct.a.PRIVATE:return Sn.h.INACTIVE;default:return Sn.h.DISABLED}}},{key:"getGTMItemData",value:function(e){try{var n={resourceType:e.resourceType,referenceKey:e.key,repositoryType:e.repositoryType},i=this.recommendList.find(function(e){return On.a.isSamePk(n,e.listItemData.myCollectionPk)});if(null!=i){var a=this.getGTMLibData(),r=a.listTitle,s=a.category;return i.getEECItemData(s,r,0)}}catch(e){}return B()(L()(t.prototype),"getGTMItemData",this).call(this,e)}}]),t}(Dt.a),Pn=n(214),Dn=n(135),An=n(120),Rn=function(e){function t(e){return u()(this,t),y()(this,L()(t).call(this,e,Gt.a.BACKGROUND_PATTERN))}return b()(t,e),p()(t,[{key:"makeElement",value:function(){var e=B()(L()(t.prototype),"makeElement",this).call(this);return e.classList.add("function_item"),o.a.dispatch(new l.c(function(t,n){e.style.backgroundColor=t.pages[n.renderPageIdx].background.color})),e}},{key:"updateElementBackgroundColor",value:function(e){this.element&&(this.element.style.backgroundColor=e)}},{key:"makeThumbImg",value:function(){var e=An.a.getImageElementWithReplaceableThumbnail();return e.style.display="none",e}},{key:"makeHoverLayer",value:function(){return document.createElement("div")}},{key:"doAction",value:function(){o.a.dispatch(new l.c(function(e,t,n){n.leftBar.hideLibrary();var i=e.pages[t.renderPageIdx].background;Se.a.selectItem(i.backgroundItem),o.a.dispatch(new Dn.d)}))}}]),t}(Pn.a),Mn=function(e){function t(e){var n;u()(this,t),(n=y()(this,L()(t).call(this))).param=e,n.addFavoriteEvent(Gt.a.BACKGROUND_PATTERN);var i={resourceData:new Sn.b,setKeyword:null};return n.functionItem=new Rn(i),n}return b()(t,e),p()(t,[{key:"getFunctionItem",value:function(){return this.functionItem}},{key:"getLibType",value:function(){return Dt.b.BACKGROUND_PATTERN}},{key:"getSvgMetaType",value:function(){return Sn.g.BACKGROUND_PATTERN}}]),t}(Cn),Nn=function(e){function t(){var e,n;u()(this,t);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return n=y()(this,(e=L()(t)).call.apply(e,[this].concat(a))),m()(_()(n),"isReadyList",!1),n}var n,i;return b()(t,e),p()(t,[{key:"getLibParam",value:function(){var e=this;return{makeListItem:function(t,n){return e.makeListItem(t,n)},getItemAccessType:this.param.getItemAccessType,getKeyword:this.param.getKeyword}}},{key:"getSvgListItemParam",value:function(e,t){return{resourceData:e,recommend:t,setKeyword:this.param.setKeyword}}},{key:"makeElement",value:function(){var e=document.createElement("div");return e.className=this.getElementClass(),e.appendChild(this.paginationListTool.render()),e}},{key:"loadList",value:(i=s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isReadyList){e.next=3;break}return e.next=3,this.setReadyList();case 3:return e.next=5,this.paginationListTool.initList();case 5:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)})},{key:"setReadyList",value:(n=s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this.paginationListTool,e.next=3,this.lib.loadRecommendList();case 3:e.t1=e.sent,e.t0.setRecommendList.call(e.t0,e.t1),this.isReadyList=!0;case 6:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"getIcon",value:function(){return null}}]),t}(Ot.a),xn=function(e){function t(e){return u()(this,t),y()(this,L()(t).call(this,e,Gt.a.BACKGROUND_PATTERN))}return b()(t,e),t}(Pn.a),Bn=function(e){function t(e){var n;return u()(this,t),(n=y()(this,L()(t).call(this))).param=e,n.init(),n}return b()(t,e),p()(t,[{key:"makeLib",value:function(){return new Mn(this.getLibParam())}},{key:"getFunctionItem",value:function(){var e=null;return this.lib&&this.lib.getFunctionItem()instanceof Rn&&(e=this.lib.getFunctionItem()),e}},{key:"getName",value:function(){return H.a.TOOLS_LIB_BACKGROUND_PATTERN_TITLE}},{key:"makeListItem",value:function(e,t){return new xn(this.getSvgListItemParam(e,t))}},{key:"getElementClass",value:function(){return R.a.LIBRARY_BACKGROUND_PATTERN}},{key:"getLeftMenuType",value:function(){return ct.b.BACKGROUND_PATTERN_LIB}},{key:"getJustifiedListToolOption",value:function(){return null}},{key:"getItemUseEventData",value:function(){return{type:te.b.BG_ITEM,category:null,keyword:null,customAction:"패턴"}}}]),t}(Nn),Un=n(69),Hn=n(110),Gn=n(71),zn=n(279),Fn=function(e){function t(e,n,i){var r;return u()(this,t),r=y()(this,L()(t).call(this)),m()(_()(r),"items",[]),m()(_()(r),"isRequireFavoriteDataInit",!1),r.menuList=e,r.getKeyword=n,r.selectMenu=i,r.element=r.makeElement(),r.addFavoriteEvent(Gt.a.IMAGE),r.addFavoriteEvent(Gt.a.BITMAP),r.addFavoriteEvent(Gt.a.LINE),r.addFavoriteEvent(Gt.a.FIGURE),r.addFavoriteEvent(Gt.a.ILLUST),r.addFavoriteEvent(Gt.a.FRAME),On.a.addDataInitListener(s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r.isRequireFavoriteDataInit=!0,!r.isActive){e.next=4;break}return e.next=4,r.initFavoriteData();case 4:case"end":return e.stop()}},e)}))),r}var n,i,r,l;return b()(t,e),p()(t,[{key:"active",value:function(){return B()(L()(t.prototype),"active",this).call(this),this.initFavoriteData().catch(function(e){return console.error(e)}),this.multiTypeListTool.loadWaitQueue().catch(function(e){return console.error(e)}),this}},{key:"initFavoriteData",value:(l=s()(a.a.mark(function e(){var t,n,i,r,s,o,l,c;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isRequireFavoriteDataInit){e.next=32;break}this.isRequireFavoriteDataInit=!1,t=new Map,this.items.forEach(function(e){var n=e.listItemData.myCollectionPk.resourceType;t.has(n)||t.set(n,[]),t.get(n).push(e)}),n=!0,i=!1,r=void 0,e.prev=7,s=t.keys()[Symbol.iterator]();case 9:if(n=(o=s.next()).done){e.next=18;break}return l=o.value,c=t.get(l),e.next=14,On.a.setListItems(c);case 14:c.forEach(function(e){return e.render()});case 15:n=!0,e.next=9;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(7),i=!0,r=e.t0;case 24:e.prev=24,e.prev=25,n||null==s.return||s.return();case 27:if(e.prev=27,!i){e.next=30;break}throw r;case 30:return e.finish(27);case 31:return e.finish(24);case 32:case"end":return e.stop()}},e,this,[[7,20,24,32],[25,,27,31]])})),function(){return l.apply(this,arguments)})},{key:"load",value:(r=s()(a.a.mark(function e(){var t,n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,e.prev=1,this.items=[],e.next=5,this.multiTypeListTool.loadList(!A.StringUtil.isEmpty(this.getKeyword()));case 5:(n=e.sent).forEach(function(e){return e.render()}),this.isLoaded=!0,this.sendImpressions(n),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t=!0;case 14:t&&alert("리스트를 가져오는 도중 오류가 발생하였습니다.");case 15:case"end":return e.stop()}},e,this,[[1,11]])})),function(){return r.apply(this,arguments)})},{key:"sendImpressions",value:function(e){try{At.a.sendImpressions({items:e,category:t.ALL_TYPE_CATEGORY,listTitle:t.ALL_TYPE_TITLE,pageNo:1,pageSize:10})}catch(e){}}},{key:"addItems",value:(i=s()(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.items=this.items.concat(t),e.next=3,On.a.setListItems(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"addFavoriteEvent",value:function(e){var t=this;On.a.addRegisterListener(e,function(e){return t.updateItemFavoriteUI(e)}).addUnregisterListener(e,function(e){return t.updateItemFavoriteUI(e)})}},{key:"updateItemFavoriteUI",value:function(e){var t=!0,n=!1,i=void 0;try{for(var a,r=this.items[Symbol.iterator]();!(t=(a=r.next()).done);t=!0){var s=a.value;On.a.isSamePk(e,s.listItemData.myCollectionPk)&&s.render()}}catch(e){n=!0,i=e}finally{try{t||null==r.return||r.return()}finally{if(n)throw i}}}},{key:"render",value:function(){var e=this.getRenderStatus();return this.isChangeContentsStatus(e.contents)&&(o.a.getEnv().adminMode?this.multiTypeListTool.element.classList.add(R.a.ADMIN_MODE):this.multiTypeListTool.element.classList.remove(R.a.ADMIN_MODE)),this.lastRenderStatus=e,this.element}},{key:"makeElement",value:function(){var e=this,t=document.createElement("div");t.classList.add(R.a.LIBRARY_ITEM_ALL_TYPE);var n=[];return this.menuList.forEach(function(t){return n.push(e.makeMultiTypeParam(t))}),this.multiTypeListTool=new zn.a(n,!0),t.appendChild(this.multiTypeListTool.render()),t}},{key:"makeMultiTypeParam",value:function(e){switch(e.lib.getLibType()){case Dt.b.PIXABAY:return this.makeMultiTypeParamPixabay(e);case Dt.b.LINE:case Dt.b.ILLUST:return this.makeMultiTypeParamSvg(e,2,1);case Dt.b.FIGURE:case Dt.b.FRAME:return o.a.getEnv().browser.isMobile()?this.makeMultiTypeParamSvg(e,1,3):this.makeMultiTypeParamSvg(e,1,4);case Dt.b.IMAGE:case Dt.b.BITMAP:default:return this.makeMultiTypeParamDefault(e)}}},{key:"makeMultiTypeParamPixabay",value:function(e){var t=this.makeMultiTypeParamDefault(e);return t.getList=s()(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.abrupt("return",{items:t,totalRow:t.length});case 2:case"end":return e.stop()}},e)})),t}},{key:"makeMultiTypeParamSvg",value:function(e,t,n){var i=this,r=this.makeMultiTypeParamDefault(e),o=e.lib;return r.getList=s()(a.a.mark(function e(){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.loadRecommendList(!0);case 2:return e.t0=n*t,r=e.sent.slice(0,e.t0),e.next=6,i.addItems(r);case 6:return e.t1=e.sent,e.t2=r.length,e.abrupt("return",{items:e.t1,totalRow:e.t2});case 9:case"end":return e.stop()}},e)})),r.getListWithKeyword=s()(a.a.mark(function t(){var n,r,s;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.getKeyword(),t.next=3,o.loadRecommendList(!0);case 3:return r=(r=t.sent).filter(function(e){return e.listItemData.resourceData.keywordList.indexOf(n)>=0}),t.next=7,e.lib.loadList({page:1,pageSize:zn.a.MAX_ROWS+1});case 7:return s=t.sent,r=r.concat(s.items),t.next=11,i.addItems(r);case 11:return t.t0=t.sent,t.t1=r.length,t.abrupt("return",{items:t.t0,totalRow:t.t1});case 14:case"end":return t.stop()}},t)})),r.maxRowsJustified=t,r.simpleLayoutOption.cols=n,r.preventJustifyWithoutKeyword=!0,r}},{key:"makeMultiTypeParamDefault",value:function(e){var t,n,i=this;return{title:A.CRM.get(e.getName()),getList:(n=s()(a.a.mark(function t(){var n;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.lib.loadList({page:1,pageSize:10});case 2:return n=t.sent,t.next=5,i.addItems(n.items);case 5:return t.t0=t.sent,t.t1=n.items.length,t.abrupt("return",{items:t.t0,totalRow:t.t1});case 8:case"end":return t.stop()}},t)})),function(){return n.apply(this,arguments)}),getListWithKeyword:(t=s()(a.a.mark(function t(){var n;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.lib.loadList({page:1,pageSize:zn.a.MAX_ROWS+1});case 2:return n=t.sent,t.next=5,i.addItems(n.items);case 5:return t.t0=t.sent,t.t1=n.items.length,t.abrupt("return",{items:t.t0,totalRow:t.t1});case 8:case"end":return t.stop()}},t)})),function(){return t.apply(this,arguments)}),moveDetail:function(){return i.selectMenu(e.getLeftMenuType())},justifyOption:e.getJustifiedListToolOption(),maxRowsJustified:1,simpleLayoutOption:{cols:2},preventJustifyWithoutKeyword:!1}}},{key:"setReady",value:(n=s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)})},{key:"getLeftMenuType",value:function(){return ct.b.ALL_TYPE_ITEM}},{key:"getName",value:function(){return H.a.TOOLS_LIB_ALL_TITLE}},{key:"getIcon",value:function(){return null}},{key:"getRenderStatus",value:function(){return{contents:{isAdminMode:o.a.getEnv().adminMode},position:null}}},{key:"isChangeContentsStatus",value:function(e){return!this.lastRenderStatus||this.lastRenderStatus.contents.isAdminMode!==e.isAdminMode}},{key:"isChangePositionStatus",value:function(e){return!1}},{key:"getGTMItemData",value:function(e){var n={resourceType:e.resourceType,referenceKey:e.key,repositoryType:e.repositoryType},i=this.items.find(function(e){return On.a.isSamePk(n,e.listItemData.myCollectionPk)});return i?i.getEECItemData(t.ALL_TYPE_CATEGORY,t.ALL_TYPE_TITLE,1):null}},{key:"getItemUseEventData",value:function(){return{type:te.b.ITEM,category:"전체",keyword:this.getKeyword()}}},{key:"getItemsCount",value:function(){return this.items.length}}]),t}(fn.a);m()(Fn,"ALL_TYPE_CATEGORY","요소>전체"),m()(Fn,"ALL_TYPE_TITLE","요소 > 전체");var Wn=function(e){function t(){var e;u()(this,t),e=y()(this,L()(t).call(this)),m()(_()(e),"menuMap",new Map),m()(_()(e),"isReadyList",!1),e.element=e.makeElement();var n={getKeyword:function(){return e.keyword},setKeyword:function(t){return e.setKeyword(t)},getItemAccessType:function(){return e.itemAccessType}},i=new Bn(n);return e.functionItem=i.getFunctionItem(),e.initMenuList([i,new bn(n)]),e}var n,i,r,l,c;return b()(t,e),p()(t,[{key:"initMenuList",value:function(e){var t=this;e.forEach(function(e){return function(e){t.menuMap.set(e.getLeftMenuType(),e),t.addTabBtn(e),t.contentsWrap.appendChild(e.getElement())}(e)})}},{key:"makeElement",value:function(){var e=document.createElement("div");return e.className=R.a.LIBRARY_BACKGROUND,e.appendChild(this.makeAdminUI()),e.appendChild(this.makeSearchTool()),e.appendChild(this.makeSolidColor()),e.appendChild(this.makeTabUI()),e.appendChild(this.makeContentsWrap()),e}},{key:"makeSearchTool",value:function(){var e=this;return this.searchTool=new Xt.a(function(t){return e.setKeyword(t)},A.CRM.get(H.a.TOOLS_LIB_KEYWORD_PLACEHOLDER)),this.searchTool.render()}},{key:"makeButtonBackgroundTools",value:function(){var e=this.btnBackgroundTools=document.createElement("div");e.className="background_tools_button",Object(K.setToolsIcon)(e,K.ToolsIcon.PENCIL);var t=document.createElement("div");return t.innerText="배경 편집",e.appendChild(t),e.addEventListener("click",function(){Se.a.selectBackgroundItem()}),e}},{key:"setKeyword",value:(c=s()(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.keyword!==t){e.next=2;break}return e.abrupt("return");case 2:return this.keyword=t,this.searchTool.updateUI(t),this.resetMenuListLoadFlag(),e.next=7,this.load();case 7:case"end":return e.stop()}},e,this)})),function(e){return c.apply(this,arguments)})},{key:"makeSolidColor",value:function(){var e=this,t=(new Un.g).setMarginTop().addCustomClass(R.a.ROW_BACKGROUND_SOLID_COLOR);this.solidColor=new Hn.a(function(t){e.solidColor.updateUI({value:t}),o.a.dispatch(new Dn.c(o.a.instance.renderPageIdx,t,!1))},null,H.a.TOOLS_BACKGROUND_ROW_SOLID_COLOR),te.a.setGTMValue(this.solidColor.wrap,"lib_background_solid"),this.solidColor.updateUI({value:"#ffffff"}),t.add(this.solidColor);var n=new Un.b(Gn.a.NONE);return n.itemRows.push(t),n.render()}},{key:"makeTabUI",value:function(){var e=document.createElement("div");return e.className=R.a.BACKGROUND_TAB,e.classList.add(R.a.ACTIVE),this.btnElement=document.createElement("ul"),e.appendChild(this.btnElement),e.appendChild(this.makeButtonBackgroundTools()),e}},{key:"addTabBtn",value:function(e){var t=this,n=e.getLeftMenuType(),i=document.createElement("li");i.setAttribute("data-type",n),i.addEventListener("click",function(){return t.selectMenu(n)}),i.innerText=A.CRM.get(e.getName()),this.btnElement.appendChild(i)}},{key:"makeContentsWrap",value:function(){return this.contentsWrap=document.createElement("div"),this.contentsWrap.className=R.a.CONTENTS_WRAP,this.contentsWrap}},{key:"selectMenu",value:(l=s()(a.a.mark(function e(t){var n,i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.menuMap.get(t)){e.next=3;break}throw new Error("메뉴가 존재하지 않습니다");case 3:return(i=$(this.btnElement)).children().removeClass(R.a.ACTIVE),i.find('[data-type="'.concat(t,'"]')).addClass(R.a.ACTIVE),this.selectedMenu&&this.selectedMenu.inactive(),this.selectedMenu=n.active(),e.next=10,this.load();case 10:case"end":return e.stop()}},e,this)})),function(e){return l.apply(this,arguments)})},{key:"load",value:(r=s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isReadyList){e.next=3;break}return e.next=3,this.setReadyList();case 3:if(this.selectedMenu){e.next=7;break}return e.next=6,this.selectMenu(this.menuMap.keys().next().value);case 6:return e.abrupt("return");case 7:if(this.selectedMenu.isLoaded){e.next=10;break}return e.next=10,this.selectedMenu.load();case 10:this.isLoaded=!0;try{this.loadAfter()}catch(e){0}case 12:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"loadAfter",value:function(){var e=this.keyword||"",t=this.selectedMenu.getName();if(e){var n=0;if(this.selectedMenu instanceof Fn)n=this.selectedMenu.getItemsCount();else try{n=this.selectedMenu.lib.lastListResult.totalRow}catch(e){0}te.a.sendSearchReport({type:te.b.BG_ITEM,keyword:e,category:A.CRM.get(t),totalRow:n})}}},{key:"setReadyList",value:(i=s()(a.a.mark(function e(){var t,n,i,r,s,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=!0,n=!1,i=void 0,e.prev=3,r=this.menuMap.values()[Symbol.iterator]();case 5:if(t=(s=r.next()).done){e.next=12;break}return o=s.value,e.next=9,o.setReady();case 9:t=!0,e.next=5;break;case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),n=!0,i=e.t0;case 18:e.prev=18,e.prev=19,t||null==r.return||r.return();case 21:if(e.prev=21,!n){e.next=24;break}throw i;case 24:return e.finish(21);case 25:return e.finish(18);case 26:this.isReadyList=!0;case 27:case"end":return e.stop()}},e,this,[[3,14,18,26],[19,,21,25]])})),function(){return i.apply(this,arguments)})},{key:"resetMenuListLoadFlag",value:function(){this.menuMap.forEach(function(e){return e.isLoaded=!1})}},{key:"render",value:function(e,t){var n=this.getRenderStatus(e,t);if(this.isChangeContentsStatus(n.contents)){o.a.getEnv().adminMode?this.adminUIElement.classList.add(R.a.ACTIVE):this.adminUIElement.classList.remove(R.a.ACTIVE),Re.a.instance.hide();var i=n.contents.backgroundColor;this.solidColor.updateUI({value:i}),this.functionItem&&this.functionItem.updateElementBackgroundColor(i),n.contents.isBackground?this.btnBackgroundTools.classList.remove(R.a.DISABLE):this.btnBackgroundTools.classList.add(R.a.DISABLE)}return this.menuMap.forEach(function(n){return n.render(e,t)}),this.lastRenderStatus=n,this.element}},{key:"getIcon",value:function(){return K.ToolsIcon.LIBRARY_SKIN}},{key:"getName",value:function(){return H.a.TOOLS_LIB_BACKGROUND_TITLE}},{key:"setReady",value:(n=s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)})},{key:"getLeftMenuType",value:function(){return ct.b.BACKGROUND_LIB}},{key:"getRenderStatus",value:function(e,t){return{contents:{isBackground:null!==e.pages[t.renderPageIdx].background.backgroundItem,renderPageIdx:t.renderPageIdx,backgroundColor:e.pages[t.renderPageIdx].background.color,isAdminMode:o.a.getEnv().adminMode},position:null}}},{key:"isChangeContentsStatus",value:function(e){return!this.lastRenderStatus||this.lastRenderStatus.contents.isBackground!==e.isBackground||this.lastRenderStatus.contents.renderPageIdx!==e.renderPageIdx||this.lastRenderStatus.contents.backgroundColor!==e.backgroundColor||this.lastRenderStatus.contents.isAdminMode!==e.isAdminMode}},{key:"isChangePositionStatus",value:function(e){return!1}},{key:"getGTMItemData",value:function(e){return this.selectedMenu.getGTMItemData(e)}},{key:"getItemUseEventData",value:function(){return this.selectedMenu.getItemUseEventData()}}]),t}(fn.a),Kn=n(136),Vn=n(244),Yn=n(245),jn=n(370),$n=n(270),Xn=function(){function e(){u()(this,e),m()(this,"cropAreaBoxLTRB",new De.a(0,0,0,0))}return p()(e,[{key:"getPhotoCropButtons",value:function(){return this.photoCropButtons}},{key:"addCropElements",value:function(e){this.cropArea.parentElement!==e&&(e.appendChild(this.cropArea),e.appendChild(this.photoCropButtons))}},{key:"removeCropElements",value:function(){this.photoCropButtons.parentElement&&this.photoCropButtons.parentElement.removeChild(this.photoCropButtons),this.cropArea.parentElement&&this.cropArea.parentElement.removeChild(this.cropArea)}},{key:"setImageframePhotoCropView",value:function(){this.cropArea.classList.add(ti.CROP_IMAGE_FRAME_PHOTO),this.setVisibleResizeButtons(!1)}},{key:"setVisibleResizeButtons",value:function(e){e?this.cropResizeButtons.classList.remove(R.a.HIDE):this.cropResizeButtons.classList.add(R.a.HIDE)}},{key:"setPhotoCropView",value:function(e,t){var n=e.photoCrop.boxDivRect,i=e.photoCrop.areaDivRect,a=o.a.instance.pageEditScale*t,r=new De.a(n.left,n.top,n.left+n.width,n.top+n.height).move(i.left,i.top).changeScale(a),s=new De.a(i.left,i.top,i.left+i.width,i.top+i.height).changeScale(a).getCenterPos(),l=De.b.getRotatedVectorByPoint(s,r.getCenterPos(),De.b.getRadianByDegree(e.props.getRotate()));r.moveCenter(l),this.cropAreaBoxLTRB.setLTRB(r),this.cropAreaBoxLTRB.rotate=e.props.getRotate(),this.cropArea.style.transform="translate(".concat(r.left,"px, ").concat(r.top,"px) rotate(").concat(e.props.getRotate(),"deg)"),this.cropArea.style.width="".concat(r.getWidth(),"px"),this.cropArea.style.height="".concat(r.getHeight(),"px"),this.cropResizeButtons.style.width="100%",this.cropResizeButtons.style.height="100%",this.cropArea.classList.remove(ti.CROP_IMAGE_FRAME_PHOTO),this.setVisibleResizeButtons(!e.isBackground),this.setPhotoCropButtonsPosition()}},{key:"setPhotoCropButtonsPosition",value:function(){var t=e.CROP_BUTTONS_WIDTH/2,n=this.cropAreaBoxLTRB.getRotatedLTRB(this.cropAreaBoxLTRB.rotate),i=n.left+n.getWidth()/2-t,a=n.top+n.getHeight()+20;this.photoCropButtons.style.transform="translate(".concat(i,"px, ").concat(a,"px)")}},{key:"addPhotoCropButtons",value:function(){var e=this;this.photoCropButtons=document.createElement("div"),this.photoCropButtons.className=ti.PHOTO_CROP_BUTTONS;var t=$n.a.makeInlineButton(ti.BTN_PHOTO_CROP_ACCEPT,K.ToolsIcon.CHECK);this.tooltipPhotoCropAccept=z.a.createTooltip(t,z.b.T,{title:{name:H.a.RB_TOOLTIP_PHOTOCROPACCEPT_TITLE}}),this.photoCropButtons.appendChild(t);var n=$n.a.makeInlineButton(ti.BTN_PHOTO_CROP_CANCEL,K.ToolsIcon.CLOSE);this.tooltipPhotoCropCancel=z.a.createTooltip(n,z.b.T,{title:{name:H.a.RB_TOOLTIP_PHOTOCROPCANCEL_TITLE}}),this.photoCropButtons.appendChild(n),this.photoCropButtons.appendChild($n.a.makeMobileButton(ti.BTN_PHOTO_CROP_CANCEL,"취소")),this.photoCropButtons.appendChild($n.a.makeMobileButton(ti.BTN_PHOTO_CROP_ACCEPT,"자르기")),this.cropArea=document.createElement("div"),this.cropArea.className=ti.PHOTO_CROP_AREA,this.cropResizeButtons=document.createElement("div"),this.cropResizeButtons.className=ti.PHOTO_CROP_RESIZE_BUTTONS,[Yn.b.LT,Yn.b.RT,Yn.b.LB,Yn.b.RB].forEach(function(t){var n=document.createElement("div");n.className="".concat(ti.CROP_RESIZE_HANDLE),n.setAttribute(ti.CROP_RESIZE_DIRECTION_ATTR,t.toString()),e.cropResizeButtons.appendChild(n)}),this.cropArea.appendChild(this.cropResizeButtons)}},{key:"addEventListeners",value:function(e){var t=this;function n(e){e.preventDefault(),e.stopPropagation()}$(this.cropArea).on("mousedown touchstart",function(t){try{var n=t.target;if(n.classList.contains("".concat(ti.CROP_RESIZE_HANDLE))){var i=n.getAttribute(ti.CROP_RESIZE_DIRECTION_ATTR);o.a.instance.activeItems[0].photoCrop.setResizeDirection(i)}o.a.instance.mouseAction.mode=O.a.MODE_HANDLER_MOVE_START,document.addEventListener("mouseup",e),document.addEventListener("touchend",e)}catch(t){console.error(t)}}),$(this.photoCropButtons).on("mousedown touchstart",".".concat(ti.BTN_PHOTO_CROP_ACCEPT),function(e){t.tooltipPhotoCropAccept.hide();var i=o.a.instance.activeItems[0].belongsTo;i===Ne.c.INDEPENDENT?o.a.dispatch(new Fe.c):i===Ne.c.IMAGEFRAME&&o.a.dispatch(new We.h),n(e),o.a.instance.mouseAction.mode=O.a.MODE_PHOTO_CROP_UI_SELECT}).on("mousedown touchstart",".".concat(ti.BTN_PHOTO_CROP_CANCEL),function(e){t.tooltipPhotoCropCancel.hide(),o.a.dispatch(new Fe.d),n(e),o.a.instance.mouseAction.mode=O.a.MODE_PHOTO_CROP_UI_SELECT})}}]),e}();m()(Xn,"CROP_BUTTONS_WIDTH",72);var Zn,qn,Qn=n(79),Jn=function(){function e(t,n){for(u()(this,e),m()(this,"cropTools",new Xn),m()(this,"forceUpdatePosition",!1),m()(this,"tooltipDegRevision",0),m()(this,"gridRowDivs",[]),m()(this,"gridColDivs",[]),m()(this,"gridRowCellBorders",[]),m()(this,"gridColCellBorders",[]),this.element=t,this.pageId=n;t.firstChild;)t.firstChild.remove();this.elementMap=new Map,this.setElement(t,n)}return p()(e,[{key:"setElement",value:function(e,t){this.element=e,this.element.innerHTML="",this.pageId=t,this.makeElement(),this.addEventListeners()}},{key:"setStatus",value:function(t,n,i,a,r){var s=this;this.pageIdx=i.position.pageIdx,this.lastRotate=i.position.rotate;var o=i.position,l=a.position,c=o.zoomScale,u=o.editScale,d=this.forceUpdatePosition||c!==l.zoomScale||r&&r.type===Be.a.WINDOW_RESIZE,p=this.forceUpdatePosition||u!==l.editScale,h=d||p;if(o.setPositionFromItem&&n.activeItems.length>0){var m=n.activeItems[0],g=m.props;i.position.left=g.getLeft(),i.position.top=g.getTop(),i.position.width=g.getWidth(),i.position.height=g.getHeight(),i.ovalshape=m.isRBRound()}var v=1===n.activeItems.length&&n.activeItems[0]instanceof Ne.e;(i.forceUpdate||h||o.width!==l.width)&&(this.band.style.width="".concat((v?Math.ceil(o.width):o.width)*u*c,"px")),(i.forceUpdate||h||o.height!==l.height)&&(this.band.style.height="".concat((v?Math.ceil(o.height):o.height)*u*c,"px")),this.band.style.display="",this.band.style.borderRadius=i.ovalshape?"100%":"",this.band.style.left="".concat(o.left*u*c,"px"),this.band.style.top="".concat(o.top*u*c,"px"),this.band.style.transform="rotate(".concat(o.rotate,"deg)"),this.updateBackgroundViewMode(n.activeItems);var f=[Be.d.PHOTO_CROP,Be.d.IMAGE_FRAME_PHOTO_CROP];o.isLock?this.setLockStatusView():f.includes(i.contents.mode)?(this.cropTools.setPhotoCropView(n.activeItems[0],i.position.zoomScale),this.setButtonsView(this.cropTools.getPhotoCropButtons()),this.setFooterView(!1),i.contents.mode===Be.d.IMAGE_FRAME_PHOTO_CROP&&this.cropTools.setImageframePhotoCropView()):i.contents.mode===Be.d.GRID?this.setGridView(o,r):(this.setDefaultView(),o.canRotate?this.basicButtons.classList.add("canRotate"):this.basicButtons.classList.remove("canRotate")),this.setResizeButtonDisplay(o,l,i.contents,r),this.setMoveButtonDisplay(o),o.footerDistance?this.footerElement.style.top="calc(100% + ".concat(o.footerDistance,"px"):this.footerElement.style.top="",void 0!==o.smallPlus?o.smallPlus?(this.lilPlus.classList.remove("ccw"),this.lilPlus.classList.add("cw")):(this.lilPlus.classList.remove("cw"),this.lilPlus.classList.add("ccw")):(this.lilPlus.classList.remove("cw"),this.lilPlus.classList.remove("ccw"));for(var E=this.buttonWrapper.getElementsByClassName(ti.INLINE_BUTTON),T=0,y=E.length;T<y;T++)E.item(T).style.transform="rotateZ(".concat(-i.position.rotate,"deg)");this.moveButton.style.transform="translate(0, 50%) rotateZ(".concat(-i.position.rotate,"deg)");var I,L,k,_,w,b,S,C,P,D,A,R,M=!1,N=!1;if(r)switch(r.type){case Be.a.MOVE:this.movePanel.innerText="".concat(Math.round(i.position.left),", ").concat(Math.round(i.position.top)),this.movePanel.style.transformOrigin="".concat(i.position.width/2*u,"px \n                        ").concat(i.position.height/2*u,"px"),this.movePanel.style.transform="rotateZ(".concat(-i.position.rotate,"deg) translate(-110%, -110%)");var x=a.contents.snapData,B=x.dx,U=x.dy,H=o.left,G=o.top,z=o.width,F=o.height;if(0!==o.rotate){var W=new De.a(H,G,H+z,G+F).getRotatedLTRB(-o.rotate);H=W.left,G=W.top,z=W.getWidth(),F=W.getHeight()}if(n.config.showSnapLIne&&0!==B){var K=0;(x.lineX&Be.c.LEFT)>0?(M=!0,K=Math.ceil(H*u*c)):(x.lineX&Be.c.RIGHT)>0?(M=!0,K=Math.ceil((H+z)*u*c)):(x.lineX&Be.c.CENTER_X)>0&&(M=!0,K=Math.ceil((H+z/2)*u*c)),M&&(this.snapLineX.style.transform="translateX(".concat(K,"px)"))}if(n.config.showSnapLIne&&0!==U){var V=0;(x.lineY&Be.c.TOP)>0?(N=!0,V=Math.ceil(G*u*c)):(x.lineY&Be.c.BOTTOM)>0?(N=!0,V=Math.ceil((G+F)*u*c)):(x.lineY&Be.c.CENTER_Y)>0&&(N=!0,V=Math.ceil((G+F/2)*u*c)),N&&(this.snapLineY.style.transform="translateY(".concat(V,"px)"))}break;case Be.a.ROTATE:if(i.contents.mode===Be.d.GRID)break;this.tooltipRotate.hide(),this.tooltipDegree.updateContent({description:"".concat((Math.round(i.position.rotate)+360)%360,"°")});var Y=this.tooltipDegree.getDefaultTooltip();if((I=n.mouseAction).mode===O.a.MODE_ITEM_ROTATE)L=32,k=10,D=Math.min(Math.max(I.offsetX+L,k),$(window).width()-Y.offsetWidth-k),A=Math.min(Math.max(I.offsetY+L,k),$(window).height()-Y.offsetHeight-k),Y.style.transform="";else{w=(_=$(this.element).offset()).left+o.left*u*c,b=_.top+o.top*u*c,S=this.band.offsetWidth,C=this.band.offsetHeight,P=new De.c(w+S/2,b+C/2);var j=new De.c(w+S/2,b-63);D=(R=De.b.calcLocationByRotate(j,P,o.rotate)).x,A=R.y,Y.style.transform="translate(-50%, -50%)"}this.tooltipDegree.show(!1,0,D,A),I.mode===O.a.MODE_ITEM_ROTATE?(this.tooltipDegRevision=0,$(Y).stop().animate({opacity:"1"},0)):(this.tooltipDegRevision++,$(Y).finish().animate({opacity:"1"},0).animate({opacity:"0"},1e3,"swing",function(){s.tooltipDegRevision--,s.tooltipDegRevision<=0&&"0"===Y.style.opacity&&s.tooltipDegree.hide()}));break;case Be.a.RESIZE:var X=n.option.size,Z=X.dpi,q=X.unit,Q=t.pages[0].sheetSize,J=Qn.a.getPixel(X.width,Z,q)/Q.width,ee=e.getPositionSize(o.width*J,o.height*J,Z,q);this.tooltipSize.updateContent({description:"".concat(ee.width," × ").concat(ee.height," (").concat(q.toLowerCase(),")")}),I=n.mouseAction,L=32,k=10;var te=this.tooltipSize.getDefaultTooltip();D=Math.min(Math.max(I.offsetX+L,k),$(window).width()-te.offsetWidth-k),A=Math.min(Math.max(I.offsetY+L,k),$(window).height()-te.offsetHeight-k),this.tooltipSize.show(!1,0,D,A)}else this.tooltipDegRevision<=0&&this.tooltipDegree.hide(),this.tooltipSize.hide();var ne=a.contents.snapData;if(clearTimeout(this.snapLineTimeOut),this.snapLineX.style.display=M?"block":"none",this.snapLineY.style.display=N?"block":"none",ne&&ne.isFromKeyAction&&(M||N)&&(this.snapLineTimeOut=setTimeout(function(){s.snapLineX.style.display="none",s.snapLineY.style.display="none"},1e3)),ne){var ie=ne.targetTypeX,ae=ne.targetTypeY;ie===Vn.a.PAGE||ie===Vn.a.GUIDELINE?(this.snapLineX.classList.remove("item"),this.snapLineX.classList.add("page")):ie===Vn.a.ITEM&&(this.snapLineX.classList.add("item"),this.snapLineX.classList.remove("page")),ae===Vn.a.PAGE||ae===Vn.a.GUIDELINE?(this.snapLineY.classList.remove("item"),this.snapLineY.classList.add("page")):ae===Vn.a.ITEM&&(this.snapLineY.classList.add("item"),this.snapLineY.classList.remove("page"))}i.contents.cmd!==a.contents.cmd&&(r?this.element.setAttribute("data-cmd",r.type.toLowerCase()):this.element.removeAttribute("data-cmd"));var re=i.contents.handlerType;re?this.element.setAttribute("data-handler-type",re):this.element.removeAttribute("data-handler-type"),this.element.style.display="block",this.setRotateButtonPosition(o.rotate),this.setMoveButtonPosition(o.rotate)}},{key:"hide",value:function(){this.element.style.display="none"}},{key:"makeElement",value:function(){this.band=document.createElement("div"),this.band.className=ti.HANDLERS,this.tooltipDegree=z.a.createTooltip(this.band,z.b.CUSTOM,{description:""},null,{setDefaultEvents:!1}),this.tooltipSize=z.a.createTooltip(this.band,z.b.CUSTOM,{description:""},null,{setDefaultEvents:!1}),this.snapLineX=document.createElement("div"),this.snapLineX.className="snap_line line_x",this.snapLineY=document.createElement("div"),this.snapLineY.className="snap_line line_y",this.element.appendChild(this.snapLineX),this.element.appendChild(this.snapLineY),this.element.appendChild(this.band),this.buttonWrapper=document.createElement("div"),this.buttonWrapper.className="buttons",this.band.appendChild(this.buttonWrapper),this.resizeCursor=document.createElement("div"),this.resizeCursor.className=ti.RESIZE_POINT_CURSOR_WRAP,this.curImg=new Image,this.curImg.src="/resources/image/cursor/resize_handle_ew.png",this.curImg.className=ti.RESIZE_POINT_CURSOR,this.curImg.draggable=!1,this.resizeCursor.appendChild(this.curImg),this.element.appendChild(this.resizeCursor),this.addBasicButtons(),this.addMoveButton(),this.cropTools.addPhotoCropButtons(),this.addLockStatusButtons(),this.makeGridButtons(),this.inlineButtons=[this.basicButtons,this.lockStatusButtons],this.addResizeButtons(),this.addFooterButtons(),this.addSmallPlusButton()}},{key:"setMode",value:function(e,t){e.contents.mode===Be.d.PHOTO_CROP||e.contents.mode===Be.d.IMAGE_FRAME_PHOTO_CROP?!document.body.classList.contains(ti.IMAGE_CROP_MODE)&&t&&(this.band.style.cursor="move",document.body.classList.add(ti.IMAGE_CROP_MODE)):(document.body.classList.remove(ti.IMAGE_CROP_MODE),this.band.style.cursor="")}},{key:"setButtonsView",value:function(e){var t=this;this.inlineButtons.forEach(function(n){if(n===e)n.parentElement!==t.buttonWrapper&&t.buttonWrapper.appendChild(n),t.buttonWrapper.parentElement||t.band.appendChild(t.buttonWrapper);else{var i=n.parentElement;i&&(i.removeChild(n),0===i.children.length&&i.parentElement&&i.parentElement.removeChild(i))}}),e===this.cropTools.getPhotoCropButtons()?this.cropTools.addCropElements(this.element):this.cropTools.removeCropElements();var n=this.band.getElementsByClassName("grid_buttons").length>0;e!==this.gridButtons||n?e!==this.gridButtons&&n&&(this.band.classList.remove("hiddenResizePoint"),this.band.removeChild(this.gridButtons)):(this.band.classList.add("hiddenResizePoint"),this.band.appendChild(this.gridButtons))}},{key:"setFooterView",value:function(e){}},{key:"setDefaultView",value:function(){this.setButtonsView(this.basicButtons),this.setFooterView(!0)}},{key:"setLockStatusView",value:function(){this.setButtonsView(this.lockStatusButtons),this.setFooterView(!1)}},{key:"setRotateButtonPosition",value:function(e){var t=this.getButtonLTRB(this.rotateButton,this.isBottomRotateHandle()),n=this.getElementLTRB(this.element),i=(Math.round(e)+360)%360,a=ti.BTN_TOP;(this.getClientRect().top<=n.top||t.top<=n.top&&(i<90||i>270)||t.bottom>=n.bottom&&i>90&&i<270||t.left<=n.left&&i>180&&i<360||t.right>=n.right&&i>0&&i<180)&&(a=ti.BTN_BOTTOM),this.buttonWrapper.classList.remove(ti.BTN_TOP),this.buttonWrapper.classList.remove(ti.BTN_BOTTOM),this.buttonWrapper.classList.add(a)}},{key:"setMoveButtonPosition",value:function(e){var t=this.getButtonLTRB(this.moveButton,this.isLeftMoveHandle()),n=this.getElementLTRB(this.element),i=(Math.round(e)+360)%360,a=ti.BTN_RIGHT;(t.top<=n.top&&i>180&&i<360||t.bottom>=n.bottom&&i>0&&i<180||t.left<=n.left&&i>90&&i<270||t.right>=n.right&&(i<90||i>270))&&(a=ti.BTN_LEFT),this.moveButton.classList.remove(ti.BTN_RIGHT),this.moveButton.classList.remove(ti.BTN_LEFT),this.moveButton.classList.add(a)}},{key:"setGridView",value:function(e,t){if(this.setButtonsView(this.gridButtons),this.setFooterView(!0),!e.isLock&&!t){var n=e.editScale*e.zoomScale,i=Math.ceil(e.width*n),a=Math.ceil(e.height*n);this.band.style.display="block";var r=o.a.instance.activeItems[0];if(r.selectedRowNo=-1,r.selectedColNo=-1,r.row>this.gridRowDivs.length)for(var s=this.gridRowDivs.length;s<r.row;s++){var l=this.makeRowDiv(s);this.gridButtons.appendChild(l),this.gridRowDivs.push(l)}else if(r.row<this.gridRowDivs.length)for(var c=this.gridRowDivs.length-1;c>=r.row;c--){var u=this.gridRowDivs[c];this.gridButtons.removeChild(u),this.gridRowDivs.splice(c,1)}if(r.col>this.gridColDivs.length)for(var d=this.gridColDivs.length;d<r.col;d++){var p=this.makeColDiv(d);this.gridButtons.appendChild(p),this.gridColDivs.push(p)}else if(r.col<this.gridColDivs.length)for(var h=this.gridColDivs.length-1;h>=r.col;h--){var m=this.gridColDivs[h];this.gridButtons.removeChild(m),this.gridColDivs.splice(h,1)}if(r.row+1>this.gridRowCellBorders.length)for(var g=this.gridRowCellBorders.length;g<r.row+1;g++){var v=this.makeRowCellBorders(g);this.gridButtons.appendChild(v),this.gridRowCellBorders.push(v)}else if(r.row+1<this.gridRowCellBorders.length)for(var f=this.gridRowCellBorders.length-1;f>=r.row+1;f--){var E=this.gridRowCellBorders[f];this.gridButtons.removeChild(E),this.gridRowCellBorders.splice(f,1)}if(r.col+1>this.gridColCellBorders.length)for(var T=this.gridColCellBorders.length;T<r.col+1;T++){var y=this.makeColCellBorders(T);this.gridButtons.appendChild(y),this.gridColCellBorders.push(y)}else if(r.col+1<this.gridColCellBorders.length)for(var I=this.gridColCellBorders.length-1;I>=r.col+1;I--){var L=this.gridColCellBorders[I];this.gridButtons.removeChild(L),this.gridColCellBorders.splice(I,1)}for(var k=0,_=r.getHeight(),w=0;w<r.rows.length;w++){var b=r.rows[w],S=this.gridRowDivs[w];S.style.top="".concat(k/_*a,"px"),S.style.height="".concat(b.thickness/_*a+1,"px"),k+=b.thickness}for(var O=0,C=r.getWidth(),P=0;P<r.cols.length;P++){var D=r.cols[P],A=this.gridColDivs[P];A.style.left="".concat(Math.floor(O/C*i),"px"),A.style.width="".concat(Math.ceil(D.thickness/C*i+1),"px"),O+=D.thickness}k=0;for(var R=0;R<this.gridRowCellBorders.length;R++){var M=this.gridRowCellBorders[R];if(0===R)M.style.top="-3px";else k+=r.rows[R-1].thickness,M.style.top="".concat(k/_*a-3,"px")}O=0;for(var N=0;N<this.gridColCellBorders.length;N++){var x=this.gridColCellBorders[N];if(0===N)x.style.left="-3px";else O+=r.cols[N-1].thickness,x.style.left="".concat(O/C*i-3,"px")}var B=!0,U=!1,H=void 0;try{for(var G,z=this.gridRowDivs[Symbol.iterator]();!(B=(G=z.next()).done);B=!0){G.value.firstChild.classList.remove("select")}}catch(e){U=!0,H=e}finally{try{B||null==z.return||z.return()}finally{if(U)throw H}}var F=!0,W=!1,K=void 0;try{for(var V,Y=this.gridColDivs[Symbol.iterator]();!(F=(V=Y.next()).done);F=!0){V.value.firstChild.classList.remove("select")}}catch(e){W=!0,K=e}finally{try{F||null==Y.return||Y.return()}finally{if(W)throw K}}this.gridButtons.classList.remove("selectAllCells");var j=r.selectedCells;if(j.length>0){var $=!0,X=!1,Z=void 0;try{for(var q,Q=j[Symbol.iterator]();!($=(q=Q.next()).done);$=!0){var J=q.value,ee=J.row,te=J.col;this.gridRowDivs[ee].firstChild.classList.add("select"),this.gridColDivs[te].firstChild.classList.add("select")}}catch(e){X=!0,Z=e}finally{try{$||null==Q.return||Q.return()}finally{if(X)throw Z}}j.length===r.row*r.col&&this.gridButtons.classList.add("selectAllCells")}for(var ne=0;ne<r.rows.length;ne++){r.rows[ne].thickness*n<ti.RESIZE_HANDLE_VISIBLE_TERM_CELL?0===ne?this.firstRowPoint.classList.add("small"):(this.gridRowDivs[ne-1].classList.add("small"),this.gridRowCellBorders[ne-1].classList.add("small")):0===ne?this.firstRowPoint.classList.remove("small"):(this.gridRowDivs[ne-1].classList.remove("small"),this.gridRowCellBorders[ne-1].classList.remove("small"))}for(var ie=0;ie<r.cols.length;ie++){r.cols[ie].thickness*n<ti.RESIZE_HANDLE_VISIBLE_TERM_CELL?0===ie?this.firstColPoint.classList.add("small"):(this.gridColDivs[ie-1].classList.add("small"),this.gridColCellBorders[ie-1].classList.add("small")):0===ie?this.firstColPoint.classList.remove("small"):(this.gridColDivs[ie-1].classList.remove("small"),this.gridColCellBorders[ie-1].classList.remove("small"))}i<ti.RESIZE_HANDLE_VISIBLE_TERM_GRID?this.gridButtons.classList.add("small_w"):this.gridButtons.classList.remove("small_w"),a<ti.RESIZE_HANDLE_VISIBLE_TERM_GRID?this.gridButtons.classList.add("small_h"):this.gridButtons.classList.remove("small_h")}else this.band.style.display="none"}},{key:"makeRowCellBorders",value:function(e){var t=document.createElement("div");return t.classList.add("row","cellBorder"),t.setAttribute("rowIdx","".concat(e)),this.addEventListnerToCellBorder(t),t}},{key:"makeColCellBorders",value:function(e){var t=document.createElement("div");return t.classList.add("col","cellBorder"),t.setAttribute("colIdx","".concat(e)),this.addEventListnerToCellBorder(t),t}},{key:"addEventListnerToCellBorder",value:function(e){var t=function(t){var n;0!==t.buttons||e.classList.contains("hover")||(e.classList.add("hover"),n=e.classList.contains("col")?"col-resize":"row-resize",o.a.dispatch(new l.c(function(t,i,a){var r=i.activeItems[0];r.cursorOnBorder=!0,e.classList.contains("row")?(r.selectedRowNo=Number(e.getAttribute("rowIdx")),r.selectedColNo=-1):(r.selectedColNo=Number(e.getAttribute("colIdx")),r.selectedRowNo=-1),a.canvasRenderer.canvas.style.cursor=n})))};e.addEventListener("mouseenter",t),e.addEventListener("mousemove",t),e.addEventListener("mouseleave",function(t){e.classList.contains("hover")&&(e.classList.remove("hover"),1!==t.buttons&&o.a.dispatch(new l.c(function(e,t,n){if(1===t.activeItems.length&&t.activeItems[0]instanceof _e.b){var i=t.activeItems[0];i.cursorOnBorder=!1,i.selectedRowNo=-1,i.selectedColNo=-1}n.canvasRenderer.canvas.style.cursor="block"})))})}},{key:"addBasicButtons",value:function(){this.basicButtons=document.createElement("div"),this.basicButtons.className=ti.BASIC_BUTTONS,this.rotateButton=$n.a.makeInlineButton(ti.BTN_ROTATE,K.ToolsIcon.ROTATE);var e=[];e.push({name:H.a.RB_TOOLTIP_ROTATEITEM_SUBTITLE1,shortcut:H.a.RB_TOOLTIP_ROTATEITEM_SHORTCUT1}),e.push({name:H.a.RB_TOOLTIP_ROTATEITEM_SUBTITLE2,shortcut:H.a.RB_TOOLTIP_ROTATEITEM_SHORTCUT2}),this.tooltipRotate=z.a.createTooltip(this.rotateButton,z.b.T,{title:{name:H.a.RB_TOOLTIP_ROTATEITEM_TITLE},subtitles:e}),this.basicButtons.appendChild(this.rotateButton),this.buttonWrapper.appendChild(this.basicButtons),this.movePanel=document.createElement("p"),this.movePanel.className="active_panel move",this.band.appendChild(this.movePanel)}},{key:"addMoveButton",value:function(){this.moveButton=document.createElement("div"),this.moveButton.classList.add(ti.MOVE_BUTTON),Object(K.setToolsIcon)(this.moveButton,K.ToolsIcon.MOVE),this.band.appendChild(this.moveButton)}},{key:"addFooterButtons",value:function(){var e=this;this.footerElement=document.createElement("div"),this.footerElement.className=ti.FOOTER_BUTTONS;var t=function(){o.a.dispatch(new Qe.a(e.pageIdx)),o.a.dispatch(new Qe.c(e.pageIdx)),te.a.sendEvent("단축키 vs 버튼클릭","복제하기","핸들",!0)},n=$n.a.makeInlineButton(ti.BTN_COPY,K.ToolsIcon.COPY);n.addEventListener("click",t),n.addEventListener("touchend",t),z.a.createTooltip(n,z.b.B,{title:{name:H.a.TOOLS_TOOLTIP_CLONE_TITLE,shortcut:H.a.TOOLS_TOOLTIP_CLONE_SHORTCUT}});var i=function(){o.a.dispatch(new Ge.a),te.a.sendEvent("단축키 vs 버튼클릭","삭제하기","핸들",!0)},a=$n.a.makeInlineButton(ti.BTN_DELETE,K.ToolsIcon.DELETE);a.addEventListener("click",i),a.addEventListener("touchend",i),z.a.createTooltip(a,z.b.B,{title:{name:H.a.TOOLS_TOOLTIP_DELETE_TITLE,shortcut:H.a.TOOLS_TOOLTIP_DELETE_SHORTCUT}}),this.footerElement.appendChild(n),this.footerElement.appendChild(a)}},{key:"addLockStatusButtons",value:function(){this.lockStatusButtons=document.createElement("div");var e=$n.a.makeInlineButton(ti.BTN_UNLOCK,K.ToolsIcon.LOCK);this.tooltipBtnUnLock=z.a.createTooltip(e,z.b.T,{title:{name:H.a.RB_TOOLTIP_LOCK_TITLE},description:H.a.RB_TOOLTIP_LOCK_DESCRIPTION}),this.lockStatusButtons.appendChild(e)}},{key:"addResizeButtons",value:function(){var e=this;[O.a.MODE_HANDLER_RESIZE_T,O.a.MODE_HANDLER_RESIZE_TR,O.a.MODE_HANDLER_RESIZE_R,O.a.MODE_HANDLER_RESIZE_BR,O.a.MODE_HANDLER_RESIZE_B,O.a.MODE_HANDLER_RESIZE_BL,O.a.MODE_HANDLER_RESIZE_L,O.a.MODE_HANDLER_RESIZE_TL].forEach(function(t){var n=document.createElement("div");n.className=ti.RESIZE_POINT,n.setAttribute(ti.RESIZE_HANDLE_ATTR,t.toLowerCase()),t===O.a.MODE_HANDLER_RESIZE_TL&&(n.id=ti.PHOTO_CROP_AREA_PIVOT),e.band.appendChild(n),e.elementMap.set(t.toLowerCase(),n)})}},{key:"addSmallPlusButton",value:function(){this.lilPlus=document.createElement("img"),this.lilPlus.src="/resources/image/handle/extra_text_icon.png",this.lilPlus.classList.add("small_plus"),this.band.appendChild(this.lilPlus)}},{key:"makeGridButtons",value:function(){this.gridButtons=document.createElement("div"),this.gridButtons.classList.add("grid_buttons");var e=document.createElement("div");e.classList.add("border","leftBorder");var t=document.createElement("div");t.classList.add("border","topBorder");var n=document.createElement("div");n.classList.add("border","rightBorder");var i=document.createElement("div");i.classList.add("border","bottomBorder");var a=document.createElement("div");a.classList.add("rightHandle");var r=this.makePointDiv();r.classList.add("top"),a.appendChild(r);var s=this.makePointDiv();s.classList.add("center"),a.appendChild(s);var o=this.makePointDiv();o.classList.add("bottom"),a.appendChild(o),a.setAttribute(ti.RESIZE_HANDLE_ATTR,O.a.MODE_HANDLER_RESIZE_R);var l=document.createElement("div");l.classList.add("bottomHandle");var c=this.makePointDiv();c.classList.add("left"),l.appendChild(c);var u=this.makePointDiv();u.classList.add("center"),l.appendChild(u);var d=this.makePointDiv();d.classList.add("right"),l.appendChild(d),l.setAttribute(ti.RESIZE_HANDLE_ATTR,O.a.MODE_HANDLER_RESIZE_B);var p=document.createElement("div");p.classList.add("rightBottomHandle");var h=this.makePointDiv();h.classList.add("center"),p.appendChild(h),p.setAttribute(ti.RESIZE_HANDLE_ATTR,O.a.MODE_HANDLER_RESIZE_BR);var m=document.createElement("div");m.classList.add("leftTopHandle","hoverable");var g=document.createElement("div");g.classList.add("leftTopPoint"),m.appendChild(g);var v=this.makeRowDiv(-1),f=this.makeColDiv(-1);this.gridButtons.appendChild(e),this.gridButtons.appendChild(t),this.gridButtons.appendChild(n),this.gridButtons.appendChild(i),this.gridButtons.appendChild(a),this.gridButtons.appendChild(l),this.gridButtons.appendChild(p),this.gridButtons.appendChild(m),this.gridButtons.appendChild(v),this.gridButtons.appendChild(f),this.firstRowPoint=v,this.firstColPoint=f,this.gridColDivs=[],this.gridRowDivs=[],this.gridColCellBorders=[],this.gridRowCellBorders=[]}},{key:"makePointDiv",value:function(){var e=document.createElement("div");return e.classList.add("point"),e}},{key:"makeRowBorderPoint",value:function(e,t){var n=document.createElement("div");if(n.classList.add("borderDiv","hoverable","row"),0!==t){var i=function(e){e.preventDefault(),e.stopPropagation(),o.a.dispatch(new l.c(function(e,n,i){n.mouseAction.mode=O.a.MODE_GRID_HANDLER_DOWN;var a=n.activeItems[0];a.unselectAllCell();for(var r=[],s=0;s<a.col;s++)r.push({row:t-1,col:s});a.selectCells(r),n.pageController.getItemRenderer(a).updateContentsAfter(null,n.pageEditScale),i.renderItemTools(e,n)}))};n.addEventListener("mousedown",i),n.addEventListener("touchstart",i)}var a=document.createElement("div");a.classList.add("borderPoint","row","hoverable"),a.setAttribute("rowBorderIdx","".concat(t)),Object(K.setToolsIcon)(a,K.ToolsIcon.PLUS),0===t&&a.classList.add("firstPoint"),e.appendChild(n),e.appendChild(a),this.addEventListenerGridBorderPoint(a)}},{key:"makeColBorderPoint",value:function(e,t){var n=document.createElement("div");if(n.classList.add("borderDiv","hoverable","col"),0!==t){var i=function(e){e.preventDefault(),e.stopPropagation(),o.a.dispatch(new l.c(function(e,n,i){n.mouseAction.mode=O.a.MODE_GRID_HANDLER_DOWN;var a=n.activeItems[0];a.unselectAllCell();for(var r=[],s=0;s<a.row;s++)r.push({row:s,col:t-1});a.selectCells(r),n.pageController.getItemRenderer(a).updateContentsAfter(null,n.pageEditScale),i.renderItemTools(e,n)}))};n.addEventListener("mousedown",i),n.addEventListener("touchstart",i)}var a=document.createElement("div");a.classList.add("borderPoint","col","hoverable"),0===t&&a.classList.add("firstPoint"),a.setAttribute("colBorderIdx","".concat(t)),Object(K.setToolsIcon)(a,K.ToolsIcon.PLUS),e.appendChild(n),e.appendChild(a),this.addEventListenerGridBorderPoint(a)}},{key:"addEventListenerGridBorderPoint",value:function(e){var t=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(n||2!==t.button){o.a.instance.mouseAction.mode=O.a.MODE_GRID_HANDLER_DOWN;var i=o.a.instance.activeItems[0];if(e.classList.contains("row")){var a=Number(e.getAttribute("rowBorderIdx"));0===a?o.a.dispatch(new jn.f(i,a)):o.a.dispatch(new jn.e(i,a)),Se.a.selectItem(i)}else if(e.classList.contains("col")){var r=Number(e.getAttribute("colBorderIdx"));0===r?o.a.dispatch(new jn.c(i,r)):o.a.dispatch(new jn.d(i,r))}t.preventDefault(),t.stopPropagation()}};e.addEventListener("mousedown",t),e.addEventListener("touchstart",function(e){return t(e,!0)});var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t||2!==e.button){var n=o.a.instance.activeItems[0];o.a.dispatch(new l.c(function(e,t,i){Se.a.selectItem(n),i.renderHandler(e,t),t.mouseAction.mode=O.a.MODE_NONE})),e.preventDefault(),e.stopPropagation()}};e.addEventListener("mouseup",n),e.addEventListener("touchend",function(e){return n(e,!0)}),e.addEventListener("mouseenter",function(){e.classList.add("hover")}),e.addEventListener("mouseleave",function(){e.classList.remove("hover")})}},{key:"makeRowDiv",value:function(e){var t=document.createElement("div");return t.classList.add("gridLine","row"),e<0&&t.classList.add("firstRow"),t.setAttribute("rowIdx","".concat(e)),this.makeRowBorderPoint(t,e+1),t}},{key:"makeColDiv",value:function(e){var t=document.createElement("div");return t.classList.add("gridLine","col"),e<0&&t.classList.add("firstCol"),t.setAttribute("rowIdx","".concat(e)),this.makeColBorderPoint(t,e+1),t}},{key:"setElementClass",value:function(e,t){e?this.element.classList.add(t):this.element.classList.remove(t)}},{key:"setVisibilityResizeButtons",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];n.forEach(function(n){var i=t.elementMap.get(n.toLowerCase());null!=i&&(e?(t.band!==i.parentElement&&t.band.appendChild(i),i.style.display=""):i.style.display="none")})}},{key:"setResizeButtonDisplay",value:function(e,t,n,i){if(e.isLock||i)this.setVisibilityResizeButtons(!1,[O.a.MODE_HANDLER_RESIZE_T,O.a.MODE_HANDLER_RESIZE_TR,O.a.MODE_HANDLER_RESIZE_R,O.a.MODE_HANDLER_RESIZE_BR,O.a.MODE_HANDLER_RESIZE_B,O.a.MODE_HANDLER_RESIZE_BL,O.a.MODE_HANDLER_RESIZE_L,O.a.MODE_HANDLER_RESIZE_TL]);else{var a=e.isLock!==t.isLock||null==i,r=Math.ceil(e.width*e.editScale*e.zoomScale),s=Math.ceil(e.height*e.editScale*e.zoomScale),o=e.isChangeableWidth!==t.isChangeableWidth,l=e.isChangeableHeight!==t.isChangeableHeight;a&&this.setVisibilityResizeButtons(!0,[O.a.MODE_HANDLER_RESIZE_TL,O.a.MODE_HANDLER_RESIZE_TR,O.a.MODE_HANDLER_RESIZE_BL,O.a.MODE_HANDLER_RESIZE_BR]),(a||o)&&this.setVisibilityResizeButtons(e.isChangeableWidth,[O.a.MODE_HANDLER_RESIZE_L,O.a.MODE_HANDLER_RESIZE_R]),(a||l)&&this.setVisibilityResizeButtons(e.isChangeableHeight,[O.a.MODE_HANDLER_RESIZE_T,O.a.MODE_HANDLER_RESIZE_B]),this.setElementClass(r<ti.RESIZE_HANDLE_SIZE_TERM||s<ti.RESIZE_HANDLE_SIZE_TERM,"handler_lv2");var c=r<ti.RESIZE_HANDLE_VISIBLE_TERM,u=s<ti.RESIZE_HANDLE_VISIBLE_TERM,d=c||u;this.setElementClass(c,"small_w_handler"),this.setElementClass(u,"small_h_handler"),this.setElementClass(d,"handler_lv3"),this.setElementClass(e.isTinyHandle,"tiny_handler")}}},{key:"setMoveButtonDisplay",value:function(e){var t=Math.ceil(e.width*e.editScale*e.zoomScale),n=Math.ceil(e.height*e.editScale*e.zoomScale);!e.isLock&&(t<ti.MOVE_HANDLE_VISIBLE_TERM_BOTH&&n<ti.MOVE_HANDLE_VISIBLE_TERM_BOTH||t<ti.MOVE_HANDLE_VISIBLE_TERM_EITHER||n<ti.MOVE_HANDLE_VISIBLE_TERM_EITHER)?this.moveButton.classList.add(ti.BTN_MOVE):this.moveButton.classList.remove(ti.BTN_MOVE)}},{key:"snap",value:function(e,t,n){Zn.doSnap(e,t.position,t.contents.snapData,n)}},{key:"enableElementEvent",value:function(){this.element.style.pointerEvents=""}},{key:"disableElementEvent",value:function(){this.element.style.pointerEvents="none"}},{key:"updateHandlerPosition",value:function(){this.forceUpdatePosition=!0}},{key:"setCmd",value:function(e){this.element.setAttribute("data-cmd",e)}},{key:"getElementLTRB",value:function(e){var t=$(e).offset(),n=t.left,i=t.top,a=n+e.offsetWidth,r=i+e.offsetHeight;return new De.a(n,i,a,r)}},{key:"getButtonLTRB",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.getElementLTRB(e);if(t){var i=this.getClientRect(),a=(i.left+i.right)/2,r=(i.top+i.bottom)/2,s=n.getCenterPos(),o=2*(a-s.x),l=2*(r-s.y);n.move(o,l)}return n}},{key:"getDegByDir",value:function(e,t){var n=0;if(t===ti.RESIZE_POINT)switch(e){case O.a.MODE_HANDLER_RESIZE_R:n=0;break;case O.a.MODE_HANDLER_RESIZE_BR:n=45;break;case O.a.MODE_HANDLER_RESIZE_B:n=90;break;case O.a.MODE_HANDLER_RESIZE_BL:n=135;break;case O.a.MODE_HANDLER_RESIZE_L:n=180;break;case O.a.MODE_HANDLER_RESIZE_TL:n=225;break;case O.a.MODE_HANDLER_RESIZE_T:n=270;break;case O.a.MODE_HANDLER_RESIZE_TR:n=315}else switch(e){case Yn.b.RT:n=0;break;case Yn.b.RB:n=90;break;case Yn.b.LB:n=180;break;case Yn.b.LT:n=270}return n}},{key:"addEventListeners",value:function(){var e,t,n=this,i=!1,a=!1,r=!1;function s(e){e.preventDefault(),e.stopPropagation()}function c(e,t){t?e.classList.add(R.a.ACTIVE):e.classList.remove(R.a.ACTIVE)}function u(e){s(e),o.a.instance.mouseAction.mode=O.a.MODE_NONE,o.a.dispatch(new l.c(function(e,t,n){n.renderHandler(e,t)}))}$(this.element).on("mouseenter",".".concat(ti.RESIZE_POINT,", .").concat(ti.CROP_RESIZE_HANDLE),function(s){if(!r){e=s.currentTarget;var c=0;if(s.currentTarget.classList.contains(ti.RESIZE_POINT)){i=!0,n.curImg.src="/resources/image/cursor/resize_handle_ew.png";var u=e.getAttribute(ti.RESIZE_HANDLE_ATTR).toUpperCase();c=n.getDegByDir(u,ti.RESIZE_POINT)}else if(s.currentTarget.classList.contains(ti.CROP_RESIZE_HANDLE)){a=!0,n.curImg.src="/resources/image/cursor/cur_crop.png";var d=e.getAttribute(ti.CROP_RESIZE_DIRECTION_ATTR);c=n.getDegByDir(d,ti.CROP_RESIZE_HANDLE)}c+=n.lastRotate,n.curImg.style.transform="rotate(".concat(c,"deg)"),n.resizeCursor.style.display="block",e.classList.add(R.a.HOVER),t=n.element.getBoundingClientRect(),n.curImg.style.left="".concat(s.pageX-t.left-n.curImg.width/2,"px"),n.curImg.style.top="".concat(s.pageY-t.top-n.curImg.height/2,"px"),o.a.dispatch(new l.c(function(e,t,n){n.canvasRenderer.canvas.style.cursor="none"}))}}),$(document).on("mousemove",function(s){var c=!1;if(i||a){switch(o.a.instance.mouseAction.mode){case O.a.MODE_HANDLER_RESIZE_L:case O.a.MODE_HANDLER_RESIZE_T:case O.a.MODE_HANDLER_RESIZE_R:case O.a.MODE_HANDLER_RESIZE_B:case O.a.MODE_HANDLER_RESIZE_TL:case O.a.MODE_HANDLER_RESIZE_TR:case O.a.MODE_HANDLER_RESIZE_BL:case O.a.MODE_HANDLER_RESIZE_BR:c=!0}n.curImg.style.left="".concat(s.pageX-t.left-n.curImg.width/2,"px"),n.curImg.style.top="".concat(s.pageY-t.top-n.curImg.height/2,"px");var u=e.getBoundingClientRect(),d=s.clientX,p=s.clientY,h=new De.a(Math.floor(u.left),Math.floor(u.top),Math.ceil(u.right),Math.ceil(u.bottom)),m=d<h.left||d>h.right||p<h.top||p>h.bottom;c||r||!m||(n.resizeCursor.style.display="none",e.classList.remove(R.a.HOVER),i=!1,a=!1,o.a.dispatch(new l.c(function(e,t,n){n.canvasRenderer.canvas.style.cursor="default"})))}}),this.curImg.addEventListener("mousedown",function(t){i?n.resizePointMousedownListener(e):a&&(r=!0,$(e).trigger("mousedown"))});var d=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.stopPropagation(),t||2!==e.button){var i=o.a.instance;if(i.renderPageIdx=n.pageIdx,t&&e.touches.length>=2)ht.startPinch(e.touches[0],e.touches[1]);else{var a=e.target,r=a.classList,s=t?e.touches[0]:e;if(i.mouseAction.mode===O.a.MODE_HANDLER_ROTATE||i.mouseAction.mode===O.a.MODE_HANDLER_MOVE_START)t&&e.preventDefault();else if(r.contains(ti.RESIZE_POINT))n.resizePointMousedownListener(a),t&&e.preventDefault();else{var c,u=null,d=null;o.a.dispatch(new l.c(function(e,t,i){var a=e.pages[n.pageIdx];u=t.pageController.getPageRenderer(a),c=u.isInRange(s.clientX,s.clientY),d=i.canvasRenderer.mouseDblClickManager}));var p=Object(Ie.a)(s.clientX,s.clientY),h=p.offsetX,m=p.offsetY,g=u.getSelectedItemInfo(h,m),v=g.selectedItem;if(v&&v instanceof Le.b&&v.select&&!v.isEditMode&&d.clear(),t)if(o.a.isCropMode())i.mouseAction.mode=O.a.MODE_HANDLER_DOWN,e.preventDefault();else{if(!c)return;var f=!1;if(A.ArrayUtil.isEmpty(g.selectedGroupItems)){if(g.selectedItem){var E=be.b.getRootGroup(g.selectedItem.groupId);f=E?null!==E.getSelectedItem():g.selectedItem.select}}else f=g.selectedGroupItems.some(function(e){return e.select});var T=i.activeItems.some(function(e){return e.isLock()});f&&!T?(i.mouseAction.mode=O.a.MODE_HANDLER_DOWN,e.preventDefault()):i.mouseAction.mode=O.a.MODE_MOBILE_DOWN}else i.mouseAction.mode=O.a.MODE_HANDLER_DOWN}var y=null,I=null;o.a.dispatch(new l.c(function(e,t,n){y=n.canvasRenderer.canvas,I=n.canvasRenderer.selectArea})),o.a.dispatch(new Me(n.pageIdx,y,I,s,s.clientX,s.clientY,e.shiftKey,e.ctrlKey,t))}}};this.band.addEventListener("mousedown",d),this.band.addEventListener("touchstart",function(e){return d(e,!0)}),$(this.buttonWrapper).on("mousedown touchstart",".".concat(ti.BTN_ROTATE),function(e){o.a.instance.mouseAction.mode=O.a.MODE_HANDLER_ROTATE,c(this,!0)}).on("mouseup touchend",".".concat(ti.BTN_ROTATE),function(e){c(this,!1)}).on("mousedown touchstart",".".concat(ti.BTN_UNLOCK),s).on("mouseup touchend",".".concat(ti.BTN_UNLOCK),function(e){n.tooltipBtnUnLock.hide(),o.a.dispatch(new Ue.n(o.a.instance.activeItems)),s(e)}).on("mousemove touchmove",".".concat(ti.BTN_PHOTO_CROP_ACCEPT,",\n            .").concat(ti.BTN_PHOTO_CROP_CANCEL,", .").concat(ti.BTN_PHOTO_EMPTY,", .").concat(ti.BTN_UNLOCK),function(e){s(e)}),$(this.moveButton).on("mousedown touchstart",function(e){o.a.instance.mouseAction.mode=O.a.MODE_HANDLER_MOVE_START,c(this,!0)}).on("mouseup touchend",function(e){c(this,!1)}),$(this.footerElement).on("mousedown touchstart",".".concat(ti.BTN_COPY,", .").concat(ti.BTN_DELETE),u).on("mouseup touchend",".".concat(ti.BTN_COPY,", .").concat(ti.BTN_DELETE),u);this.cropTools.addEventListeners(function e(){r=!1;try{o.a.instance.activeItems[0].photoCrop.initResizeDirection(),document.removeEventListener("mouseup",e),document.removeEventListener("touchend",e)}catch(e){console.error(e)}}),$(this.gridButtons).on("mousedown touchstart",".rightBottomHandle",function(e){o.a.instance.mouseAction.mode=O.a.MODE_ITEM_RESIZE,s(e)}).on("mouseenter",".rightBottomHandle, .rightHandle, .bottomHandle",function(a){e=a.currentTarget;var r,s=0;i=!0,n.curImg.src="/resources/image/cursor/resize_handle_ew.png",r=e.classList.contains("rightBottomHandle")?O.a.MODE_HANDLER_RESIZE_BR:e.classList.contains("rightHandle")?O.a.MODE_HANDLER_RESIZE_R:O.a.MODE_HANDLER_RESIZE_B,s=n.getDegByDir(r,ti.RESIZE_POINT),s+=n.lastRotate,n.curImg.style.transform="rotate(".concat(s,"deg)"),n.curImg.style.zIndex="3950",n.resizeCursor.style.display="block",t=n.element.getBoundingClientRect(),n.curImg.style.left="".concat(a.pageX-t.left-n.curImg.width/2,"px"),n.curImg.style.top="".concat(a.pageY-t.top-n.curImg.height/2,"px"),o.a.dispatch(new l.c(function(e,t,n){n.canvasRenderer.canvas.style.cursor="none"}))}).on("mouseup touchend",".leftTopHandle",function(e){Se.a.selectItem(o.a.instance.activeItems[0])}).on("mouseenter",".hoverable",function(e){e.currentTarget.classList.add("hover")}).on("mouseleave",".hoverable",function(e){e.currentTarget.classList.remove("hover")}).on("mousedown touchstart",".leftTopHandle",function(e){2!==e.buttons&&(o.a.dispatch(new l.c(function(e,t,n){t.mouseAction.mode=O.a.MODE_GRID_HANDLER_DOWN;var i=t.activeItems[0],a=t.pageController.getItemRenderer(i);i.isTextEditMode&&a.toggleEditMode(-1,-1);for(var r=[],s=0;s<i.row;s++)for(var o=0;o<i.col;o++)r.push({row:s,col:o});i.selectCells(r),a.updateContentsAfter(null,t.pageEditScale),n.renderHandler(e,t)})),s(e))})}},{key:"resizePointMousedownListener",value:function(e){var t=this;o.a.instance.mouseAction.mode=e.getAttribute(ti.RESIZE_HANDLE_ATTR).toUpperCase(),o.a.dispatch(new l.c(function(e,n,i){i.handler.lastRenderStatus.contents.cmd={type:Be.a.RESIZE},t.setCmd(Be.a.RESIZE.toLowerCase())}))}},{key:"isBottomRotateHandle",value:function(){return this.buttonWrapper.classList.contains(ti.BTN_BOTTOM)}},{key:"isLeftMoveHandle",value:function(){return this.moveButton.classList.contains(ti.BTN_LEFT)}},{key:"getClientRect",value:function(){return this.band.getBoundingClientRect()}},{key:"updateBackgroundViewMode",value:function(e){if(1===e.length){var t=e[0];t.isOnlyOneItem()&&t.select&&!t.isEditMode?this.band.classList.add("background_view"):this.band.classList.remove("background_view")}else this.band.classList.remove("background_view")}}],[{key:"getPositionSize",value:function(e,t,n,i){return{width:Qn.a.getSizeFromPixelWithDecimal(e,n,i),height:Qn.a.getSizeFromPixelWithDecimal(t,n,i)}}}]),e}(),ei=n(151),ti=function(){function e(){u()(this,e),m()(this,"lastRenderStatus",{position:{pageIdx:0,left:0,top:0,width:0,height:0,ratio:0,rotate:0,editScale:0,visible:!1,zoomScale:0,isLock:!1,setPositionFromItem:!1,isChangeableWidth:!1,isChangeableHeight:!1,isTinyHandle:!1,canRotate:!0,isBottomRotateHandle:!1,canvasWidth:0,canvasHeight:0},contents:{mode:Be.d.DEFAULT,snapData:null,itemsKey:null,handlerType:null},forceUpdate:!1}),m()(this,"handlerList",[])}var t;return p()(e,[{key:"setReady",value:(t=s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)})},{key:"render",value:function(e,t,n){var i=this;e.pages.forEach(function(e){var n=t.pageController.getPageRenderer(e),a=i.handlerList[e.pageIdx];a?a.pageId!==e.pageId&&(n.handlerLayer||(n.makeElement(),n.makeLayers()),i.handlerList[e.pageIdx]=new Jn(n.handlerLayer,e.pageId)):i.handlerList.push(new Jn(n.handlerLayer,e.pageId))}),this.handlerList.length>e.pages.length&&(this.handlerList=this.handlerList.slice(0,e.pages.length));var a=this.getRenderStatus(e,n);this.lastRenderPageIdx=a.position.pageIdx,a.position.visible?(this.handlerList[a.position.pageIdx].setStatus(e,t,a,this.lastRenderStatus,n),e.pages.forEach(function(e){e.pageIdx!==a.position.pageIdx&&i.handlerList[e.pageIdx].hide(),i.handlerList[e.pageIdx].setMode(a,e.pageIdx===a.position.pageIdx)})):e.pages.forEach(function(e){i.handlerList[e.pageIdx].hide()}),this.lastRenderStatus=a}},{key:"getRenderStatus",value:function(e,t){if(!t)return this.getNewStatus(e);var n={position:Object.assign({},this.lastRenderStatus.position),contents:Object.assign({},this.lastRenderStatus.contents)};switch(n.contents.cmd=t,t.type){case Be.a.MOVE:return n.position=this.getMoveStatus(t),n;case Be.a.ROTATE:return n;case Be.a.RESIZE:return{position:Object.assign({},this.resizeRenderStatus.position),contents:Object.assign({},this.resizeRenderStatus.contents)};case Be.a.PHOTO_CROP:return n.contents.mode=Be.d.PHOTO_CROP,n;case Be.a.IMAGE_FRAME_PHOTO_CROP:return n.contents.mode=Be.d.IMAGE_FRAME_PHOTO_CROP,n;case Be.a.CANCEL_PHOTO_CROP:return n.contents.mode=Be.d.DEFAULT,n;case Be.a.GRID_CELL_THICKNESS_RESIZE:return n.contents.mode=Be.d.GRID,n;case Be.a.WINDOW_RESIZE:return this.getNewStatus(e);default:throw Error("command... : "+t)}}},{key:"getNewStatus",value:function(e){var t=o.a.instance,n=be.b.getGroupItemsAddedArray(t.activeItems.slice());if(0===n.length||o.a.isSpoidMode()){var i=Object.assign({},this.lastRenderStatus);return i.contents.mode=Be.d.DEFAULT,i.position.visible=!1,i}var a=this.lastRenderPageIdx===t.renderPageIdx?e.pages[t.renderPageIdx]:Wt.a.getItemIncludedPage(e.pages,n[0]),r=t.pageEditScale,s=null;o.a.isCropMode()?s=t.activeItems[0]:1===n.length&&(s=n[0]);var l={list:[],dx:0,dy:0,lineX:Be.c.NONE,lineY:Be.c.NONE,targetTypeX:Vn.a.NONE,targetTypeY:Vn.a.NONE,isFromKeyAction:!1};l.list.push({ltrb:new De.a(0,0,a.sheetSize.width,a.sheetSize.height,0),type:Vn.a.PAGE});var c,u,d=[],p=!0,h=!1,m=void 0;try{for(var g,v=a.getAllSingleItems()[Symbol.iterator]();!(p=(g=v.next()).done);p=!0){var f=g.value;if(!f.select){var E=be.b.getRootGroup(f.groupId);E?d.indexOf(E)<0&&(d.push(E),l.list.push({ltrb:Kn.a.getItemsLTRBCoordinate(E.getMembers(),!0),type:Vn.a.ITEM})):l.list.push({ltrb:f.getLTRBCoordinate(!0),type:Vn.a.ITEM})}}}catch(e){h=!0,m=e}finally{try{p||null==v.return||v.return()}finally{if(h)throw m}}o.a.instance.showGuideline&&(l.list=l.list.concat(a.guidelineManager.getSnapTargetDataArray()));var T,y,I,L,k,_,w,b=this.lastRenderStatus.contents.mode,S=qn.NORMAL,O=!1,C=!1,P=!1;if(s){T=s.tbpeId;var D=s.props;if(c=D.getLeft(),u=D.getTop(),y=D.getWidth(),I=D.getHeight(),L=D.getRotate(),b=s instanceof _e.b?Be.d.GRID:s instanceof Ne.e&&o.a.isCropMode()?s.belongsTo===Ne.c.INDEPENDENT?Be.d.PHOTO_CROP:s.belongsTo===Ne.c.IMAGEFRAME?Be.d.IMAGE_FRAME_PHOTO_CROP:Be.d.DEFAULT:Be.d.DEFAULT,O=s.isChangableWidth(),C=s.isChangableHeight(),s instanceof ei.a&&(s.isPatternSVG()||s.isExtendSVG()))O&&C?S=qn.PATTERN_WH:O?S=qn.PATTERN_W:C&&(S=qn.PATTERN_H);else if(s instanceof Le.b){S=qn.TEXT,P=s.isTinyHandle();var A=s.getFooterDistance();0!==A&&(_=A),w=s.getSmallPlusPos()}else s instanceof _e.b&&(_=20);k=s.canRotate()}else{b=Be.d.DEFAULT,k=n.every(function(e){return e.canRotate()}),T=n.reduce(function(e,t){return e+t.tbpeId},"");var R=this.lastRenderStatus.contents.cmd;if(!R||R.type!==Be.a.ROTATE&&R.type!==Be.a.MOVE&&R.type!==Be.a.RESIZE||this.lastRenderStatus.contents.itemsKey!==T||t.renderPageIdx!==this.lastRenderStatus.position.pageIdx){var M=Kn.a.getItemsLTRBCoordinate(n,!0);c=M.left,u=M.top,y=M.right-c,I=M.bottom-u,L=0}else{var N=this.lastRenderStatus.position;c=N.left,u=N.top,y=N.width,I=N.height,L=N.rotate}}var x=this.handlerList[t.renderPageIdx].isBottomRotateHandle(),B=s&&(s instanceof ei.a||s instanceof Le.b||b===Be.d.PHOTO_CROP),U=n[0].isLock();return{position:{pageIdx:a.pageIdx,left:c,top:u,width:y,height:I,ratio:I/y,editScale:r,rotate:L,visible:!0,zoomScale:t.zoomScale,isLock:U,setPositionFromItem:B,isChangeableWidth:O,isChangeableHeight:C,isTinyHandle:P,canRotate:k,isBottomRotateHandle:x,footerDistance:_,smallPlus:w,canvasWidth:t.size.canvasWidth,canvasHeight:t.size.canvasHeight},contents:{mode:b,itemsKey:T,snapData:l,handlerType:U?qn.LOCK:S},forceUpdate:this.lastRenderPageIdx!==a.pageIdx}}},{key:"isChangeContentsStatus",value:function(e){return!1}},{key:"isChangePositionStatus",value:function(e){return!1}},{key:"snap",value:function(e,t){var n=this;o.a.isCropMode()||o.a.dispatch(new l.c(function(){n.handlerList[n.lastRenderPageIdx].snap(e,n.lastRenderStatus,t)}))}},{key:"getMoveStatus",value:function(e){return Object.assign(this.lastRenderStatus.position,{left:this.lastRenderStatus.position.left+e.tx,top:this.lastRenderStatus.position.top+e.ty})}},{key:"getLTRB",value:function(){var e=this.lastRenderStatus.position;return new De.a(e.left,e.top,e.left+e.width,e.top+e.height,e.rotate)}},{key:"rotate",value:function(e){this.setDegree(this.lastRenderStatus.position.rotate+e)}},{key:"setDegree",value:function(e){this.lastRenderStatus.position.rotate=e}},{key:"readyResize",value:function(){this.resizeRenderStatus={position:Object.assign({},this.lastRenderStatus.position),contents:Object.assign({},this.lastRenderStatus.contents)}}},{key:"enableElementEvent",value:function(){var e=this;o.a.dispatch(new l.c(function(t){t.pages.forEach(function(t){e.handlerList[t.pageIdx].enableElementEvent()})}))}},{key:"disableElementEvent",value:function(){var e=this;o.a.dispatch(new l.c(function(t){t.pages.forEach(function(t){e.handlerList[t.pageIdx].disableElementEvent()})}))}},{key:"getOffsetLTRB",value:function(){if(this.handlerList[this.lastRenderPageIdx]){var e=$(this.handlerList[this.lastRenderPageIdx].band),t=e.offset().left,n=e.offset().top;return new De.a(t,n,t+e.width(),n+e.height())}}},{key:"updateHandlerPosition",value:function(){this.handlerList[this.lastRenderPageIdx]&&this.handlerList[this.lastRenderPageIdx].updateHandlerPosition()}},{key:"calculateRatio",value:function(){this.lastRenderStatus.position.ratio=this.lastRenderStatus.position.height/this.lastRenderStatus.position.width}},{key:"getClientRect",value:function(e){return this.handlerList[e].getClientRect()}}]),e}();m()(ti,"HANDLERS","handlers"),m()(ti,"FOOTER_BUTTONS","footer_buttons"),m()(ti,"RESIZE_POINT","resize_point"),m()(ti,"RESIZE_POINT_CURSOR_WRAP","resize_point_cursor_wrap"),m()(ti,"RESIZE_POINT_CURSOR","resize_point_cursor"),m()(ti,"RESIZE_HANDLE_ATTR","data-term"),m()(ti,"INLINE_BUTTON","inline_button"),m()(ti,"BASIC_BUTTONS","basic_buttons"),m()(ti,"MOVE_BUTTON","move_button"),m()(ti,"PHOTO_CROP_BUTTONS","photo_crop_buttons"),m()(ti,"PHOTO_CROP_AREA","photo_crop_area"),m()(ti,"PHOTO_CROP_AREA_PIVOT","photo_crop_area_pivot"),m()(ti,"PHOTO_CROP_RESIZE_BUTTONS","photo_crop_resize_buttons"),m()(ti,"CROP_RESIZE_HANDLE","crop_resize_handle"),m()(ti,"CROP_IMAGE_FRAME_PHOTO","crop_image_frame_photo"),m()(ti,"CROP_RESIZE_DIRECTION_ATTR","data-direction"),m()(ti,"BTN_MOVE","btn_move"),m()(ti,"BTN_ROTATE","btn_rotate"),m()(ti,"BTN_UNLOCK","btn_unlock"),m()(ti,"BTN_COPY","btn_copy"),m()(ti,"BTN_DELETE","btn_delete"),m()(ti,"BTN_PHOTO_CROP_ACCEPT","crop_accept"),m()(ti,"BTN_PHOTO_CROP_CANCEL","crop_cancel"),m()(ti,"IMAGE_CROP_MODE","image_crop_mode"),m()(ti,"BTN_PHOTO_EMPTY","photo_empty"),m()(ti,"BTN_LEFT","btn_left"),m()(ti,"BTN_TOP","btn_top"),m()(ti,"BTN_RIGHT","btn_right"),m()(ti,"BTN_BOTTOM","btn_bottom"),m()(ti,"MOVE_HANDLE_VISIBLE_TERM_BOTH",60),m()(ti,"MOVE_HANDLE_VISIBLE_TERM_EITHER",20),m()(ti,"RESIZE_HANDLE_SIZE_TERM",44),m()(ti,"RESIZE_HANDLE_VISIBLE_TERM",24),m()(ti,"RESIZE_HANDLE_VISIBLE_TERM_GRID",24),m()(ti,"RESIZE_HANDLE_VISIBLE_TERM_CELL",12),function(e){var t=e.SNAP_TERM=10;function n(e,t,n,a,r,s){var o=r.ltrb;if(r.type===Vn.a.GUIDELINE)return i(e,t,a,o.left,Be.c.LEFT,s)||i(e,n,a,o.left,Be.c.RIGHT,s);var l=(t+n)/2,c=o.getCenterPos().x;return i(e,t,a,o.left,Be.c.LEFT,s)||i(e,n,a,o.left,Be.c.RIGHT,s)||i(e,l,a,o.left,Be.c.CENTER_X,s)||i(e,t,a,c,Be.c.LEFT,s)||i(e,n,a,c,Be.c.RIGHT,s)||i(e,l,a,c,Be.c.CENTER_X,s)||i(e,t,a,o.right,Be.c.LEFT,s)||i(e,n,a,o.right,Be.c.RIGHT,s)||i(e,l,a,o.right,Be.c.CENTER_X,s)}function i(e,t,n,i,a,r){var o=s(r);if(e<0){if(n<0)return(n-=e)>0?n=0:e=0,{moveX:e,snapTerm:n,useOldSnapData:!0};if(i<=t&&t-o<i){var l=i-t;return{moveX:e+=l,snapTerm:n=l,useOldSnapData:!1,line:a}}return n>0?{moveX:e-n,snapTerm:0,useOldSnapData:!0}:null}if(n>0)return(n-=e)<0?n=0:e=0,{moveX:e,snapTerm:n,useOldSnapData:!0};if(t<=i&&i-o<t){var c=i-t;return{moveX:e+=c,snapTerm:n=c,useOldSnapData:!1,line:a}}return n<0?{moveX:e-n,snapTerm:0,useOldSnapData:!0}:null}function a(e,t,n,i,a,s){var o=a.ltrb;if(a.type===Vn.a.GUIDELINE)return r(e,t,i,o.top,Be.c.TOP,s)||r(e,n,i,o.top,Be.c.BOTTOM,s);var l=(t+n)/2,c=o.getCenterPos().y;return r(e,t,i,o.top,Be.c.TOP,s)||r(e,n,i,o.top,Be.c.BOTTOM,s)||r(e,l,i,o.top,Be.c.CENTER_Y,s)||r(e,t,i,c,Be.c.TOP,s)||r(e,n,i,c,Be.c.BOTTOM,s)||r(e,l,i,c,Be.c.CENTER_Y,s)||r(e,t,i,o.bottom,Be.c.TOP,s)||r(e,n,i,o.bottom,Be.c.BOTTOM,s)||r(e,l,i,o.bottom,Be.c.CENTER_Y,s)}function r(e,t,n,i,a,r){var o=s(r);if(e<0){if(n<0)return(n-=e)>0?n=0:e=0,{moveY:e,snapTerm:n,useOldSnapData:!0};if(i<t&&t-o<=i){var l=i-t;return{moveY:e+=l,snapTerm:n=l,useOldSnapData:!1,line:a}}return n>0?{moveY:e-n,snapTerm:0,useOldSnapData:!0}:null}if(n>0)return(n-=e)<0?n=0:e=0,{moveY:e,snapTerm:n,useOldSnapData:!0};if(t<i&&i-o<=t){var c=i-t;return{moveY:e+=c,snapTerm:n=c,useOldSnapData:!1,line:a}}return n<0?{moveY:e-n,snapTerm:0,useOldSnapData:!0}:null}function s(e){return e?1:t}e.doSnap=function(e,t,i,r){if(0!==e.x||0!==e.y){var s=i.lineX,o=i.lineY,l=new De.a(t.left,t.top,t.left+t.width,t.top+t.height).getRotatedLTRB(t.rotate);l.move(e.x,e.y);var c=l.left,u=l.top,d=l.right,p=l.bottom,h=0!==e.x,m=0!==e.y,g=!0,v=!1,f=void 0;try{for(var E,T=i.list[Symbol.iterator]();!(g=(E=T.next()).done);g=!0){var y=E.value;if(h){var I=n(e.x,c,d,i.dx,y,r);I&&(e.x=I.moveX,i.dx=I.snapTerm,i.lineX=null!=I.line?I.line:s,i.targetTypeX=I.useOldSnapData?i.targetTypeX:y.type,i.isFromKeyAction=r,h=!1)}if(m){var L=a(e.y,u,p,i.dy,y,r);L&&(e.y=L.moveY,i.dy=L.snapTerm,i.lineY=null!=L.line?L.line:o,i.targetTypeY=L.useOldSnapData?i.targetTypeY:y.type,i.isFromKeyAction=r,m=!1)}if(!h&&!m)break}}catch(e){v=!0,f=e}finally{try{g||null==T.return||T.return()}finally{if(v)throw f}}h&&(i.dx=0,i.lineX=Be.c.NONE,i.targetTypeX=Vn.a.NONE),m&&(i.dy=0,i.lineY=Be.c.NONE,i.targetTypeY=Vn.a.NONE)}}}(Zn||(Zn={})),function(e){e.NORMAL="normal",e.LOCK="lock",e.PATTERN_WH="pattern_wh",e.PATTERN_W="pattern_w",e.PATTERN_H="pattern_h",e.TEXT="text",e.GRID="grid"}(qn||(qn={}));var ni,ii=n(185),ai=n(485),ri=n(154),si=n(158),oi=n(289),li=function(e){function t(e,n,i,a,r,s,o){var l;return u()(this,t),l=y()(this,L()(t).call(this,e,i,a,r,s,o,!0)),m()(_()(l),"priorLeft",0),l.elementToBasePositionOn=n,l}return b()(t,e),p()(t,null,[{key:"createCustomSizeTooltipElement",value:function(e,n,i,a,r,s,o){return new t(e,n,i,a,r,s,o)}}]),p()(t,[{key:"updateDefaultTooltipPosition",value:function(e){this.setLocation(this.defaultTooltip,e)}},{key:"setLocation",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,i=e.offsetWidth;switch(this.location){case z.b.T:var a=this.elementToBasePositionOn.getBoundingClientRect().width,r=this.elementToBasePositionOn.getBoundingClientRect(),s=this.reference.getBoundingClientRect(),o={left:r.left-s.left+a/2,top:r.top-s.top};o.top<=0?(o.top=0,e.style.visibility="hidden"):e.offsetWidth>0&&e.offsetHeight>0&&(e.style.visibility="visible");var l=o.left-i/2,c=o.top;Math.abs(this.priorLeft-l)>1&&(e.style.left="".concat(l,"px"),this.priorLeft=l),e.style.top="".concat(c,"px");break;case z.b.CUSTOM:void 0!==t&&(e.style.left="".concat(t,"px")),void 0!==n&&(e.style.top="".concat(n,"px"));break;default:throw new Error("Not Implemented Exception. Only attachment to the top is supported")}}}]),t}(z.a);!function(e){e[e.WidthToolTip=0]="WidthToolTip",e[e.HeightToolTip=1]="HeightToolTip"}(ni||(ni={}));var ci=function(){function e(t){u()(this,e),m()(this,"heightToolTipVisible",!1),m()(this,"widthToolTipVisible",!1),this.attachEventHandlers(t)}return p()(e,[{key:"makeTooltips",value:function(e,t,n,i,a){void 0===this.widthTooltip&&(this.widthTooltip=this.makeTooltip(e,n,i,a)),void 0===this.heightTooltip&&(this.heightTooltip=this.makeTooltip(t,n,i,a))}},{key:"makeTooltip",value:function(e,t,n,i){if(null!=e){var a=n,r=i.unit.toLowerCase();return li.createCustomSizeTooltipElement(t,e,z.b.T,{title:{name:"입력 가능한 최소 사이즈는 ".concat(a.min+r,",<br>최대 사이즈는 ").concat(a.max+r," 입니다.")}},{title:{name:"입력 가능한 최소 사이즈는 ".concat(a.min+r,",<br> 최대 사이즈는 ").concat(a.max+r," 입니다.")}},{setDefaultEvents:!1})}}},{key:"hideTooltips",value:function(){void 0!==this.widthTooltip&&(this.widthTooltip.hide(),this.widthToolTipVisible=!1),void 0!==this.heightTooltip&&(this.heightTooltip.hide(),this.heightToolTipVisible=!1)}},{key:"updateToolTip",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;t&&e?"width"===a?this.displayTooltip(ni.WidthToolTip):this.displayTooltip(ni.HeightToolTip):t&&!e?this.displayTooltip(ni.HeightToolTip):e&&!this.widthToolTipVisible&&this.displayTooltip(ni.WidthToolTip),this.updateTooltipContent(n,i)}},{key:"displayTooltip",value:function(e){e===ni.WidthToolTip?this.widthToolTipVisible||(this.widthTooltip.show(),this.heightTooltip.hide(),this.widthToolTipVisible=!0,this.heightToolTipVisible=!1):e===ni.HeightToolTip&&(this.heightToolTipVisible||(this.widthTooltip.hide(),this.heightTooltip.show(),this.widthToolTipVisible=!1,this.heightToolTipVisible=!0))}},{key:"updateTooltipContent",value:function(e,t){var n=e,i=t.unit.toLowerCase();void 0!==this.widthTooltip&&void 0!==this.heightTooltip&&(this.heightTooltip.updateContent({title:{name:"입력 가능한 최소 사이즈는 ".concat(n.min+i,",<br> 최대 사이즈는 ").concat(n.max+i," 입니다.")}}),this.widthTooltip.updateContent({title:{name:"입력 가능한 최소 사이즈는 ".concat(n.min+i,",<br> 최대 사이즈는 ").concat(n.max+i," 입니다.")}}))}},{key:"attachEventHandlers",value:function(e){var t=this;e.onAfterScroll=function(){t.widthToolTipVisible?t.widthTooltip.updateDefaultTooltipPosition(e.getScrollY()):t.heightToolTipVisible&&t.heightTooltip.updateDefaultTooltipPosition(e.getScrollY())}}}]),e}(),ui=function(){function e(t,n,i,a){u()(this,e),this.dpi=t,this.unit=a,this.width=n,this.height=i}return p()(e,[{key:"dpi",get:function(){return this._dpi},set:function(e){this._dpi=e}},{key:"width",get:function(){return this._width},set:function(e){this._width=e,this._widthAsString=this._width.toFixed(di.getMaxDecimalPlaces(this.unit))}},{key:"widthAsString",get:function(){return this._widthAsString},set:function(e){this._widthAsString=e,di.decimalPlaces(this.widthAsString)>di.getMaxDecimalPlaces(this.unit)&&(this._widthAsString=this._widthAsString.substr(0,this._widthAsString.length-1)),this._width=Number(e)}},{key:"height",get:function(){return this._height},set:function(e){this._height=e,this._heightAsString=this._height.toFixed(di.getMaxDecimalPlaces(this.unit))}},{key:"heightAsString",get:function(){return this._heightAsString},set:function(e){this._heightAsString=e,di.decimalPlaces(this.heightAsString)>di.getMaxDecimalPlaces(this.unit)&&(this._heightAsString=this._heightAsString.substr(0,this._heightAsString.length-1)),this._height=Number(e)}},{key:"unit",get:function(){return this._unit},set:function(e){this._unit=e}},{key:"currentAspectRatio",get:function(){return this._currentAspectRatio},set:function(e){this._currentAspectRatio=e}}]),p()(e,[{key:"toFixedWithoutRounding",value:function(e,t){var n=new RegExp("^-?\\d+(?:.\\d{0,"+(t||-1)+"})?");return e.toString().match(n)[0]}}]),e}(),di=function(){function e(t){u()(this,e),m()(this,"_size",new ui(hi.DEFAULT_SIZE_OPTION.dpi,hi.DEFAULT_SIZE_OPTION.width,hi.DEFAULT_SIZE_OPTION.height,hi.DEFAULT_SIZE_OPTION.unit)),this.updateToolTipCallback=t}return p()(e,[{key:"size",get:function(){return this._size},set:function(e){this._size=e}}]),p()(e,[{key:"getSizeLimit",value:function(){var e=si.a.MIN_SHEET_SIZE,t=si.a.getMaxSheetSize(o.a.getEnv().devMode);switch(this.size.unit){case Q.b.MM:return{min:this.roundDecimal(e/Q.d.DEFAULT_DPI*2.54*10),max:this.roundDecimal(t/Q.d.DEFAULT_DPI*2.54*10)};case Q.b.CM:return{min:this.roundDecimal(e/Q.d.DEFAULT_DPI*2.54),max:this.roundDecimal(t/Q.d.DEFAULT_DPI*2.54)};case Q.b.IN:return{min:this.roundDecimal(e/Q.d.DEFAULT_DPI),max:this.roundDecimal(t/Q.d.DEFAULT_DPI)};case Q.b.PX:return{min:this.roundDecimal(e),max:this.roundDecimal(t)}}}},{key:"changeCustomSizeUnit",value:function(e,t){var n=this.size.unit;this.size.unit=e,this.size.width=Qn.a.changeUnit(this.size.width,n,e,this.size.dpi),this.size.height=Qn.a.changeUnit(this.size.height,n,e,this.size.dpi),this.limitCustomSizeToMaxBounds(),this.updateToolTipCallback(),this.updateDOMCustomSizeInputs(t)}},{key:"updateHeightBasedOnLockedRatioAndWidth",value:function(e){var t=this.getSizeLimit();this.size.height=isNaN(this.size.height)?t.min:this.size.height,this.size.height=e*this.size.currentAspectRatio,this.size.height=this.roundDecimal(this.size.height)}},{key:"updateWidthBasedOnLockedRatioAndHeight",value:function(e){var t=this.getSizeLimit();this.size.width=isNaN(this.size.width)?t.min:this.size.width,this.size.width=e/this.size.currentAspectRatio,this.size.width=this.roundDecimal(this.size.width)}},{key:"updateCustomSizeInputWarn",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;n.width&&n.height&&(t&&e?(n.width.classList.add("warn"),n.height.classList.add("warn")):t?(n.height.classList.add("warn"),n.width.classList.remove("warn")):e&&(n.width.classList.add("warn"),n.height.classList.remove("warn")))}},{key:"clearCustomSizeInputWarn",value:function(e){e.width&&e.width.classList.remove("warn"),e.height&&e.height.classList.remove("warn")}},{key:"updateDOMCustomSizeInputs",value:function(e){e.width&&(e.width.value=this.size.widthAsString),e.height&&(e.height.value=this.size.heightAsString),e.unit&&(e.unit.value=this.size.unit)}},{key:"lockAspectRatio",value:function(){this.size.currentAspectRatio=this.size.height/this.size.width}},{key:"limitCustomSizeToMaxBounds",value:function(){var e=this.getSizeLimit();this.size.width>e.max?this.size.width=e.max:this.size.width<e.min&&(this.size.width=e.min),this.size.height>e.max?this.size.height=e.max:this.size.height<e.min&&(this.size.height=e.min)}},{key:"limitFixedRatioSizeToMaxBounds",value:function(){var e=this.getSizeLimit();this.size.currentAspectRatio<=1?this.size.height<e.min?(this.size.height=e.min,this.size.width=this.size.height/this.size.currentAspectRatio,this.size.width=this.roundDecimal(this.size.width)):this.size.width>e.max&&(this.size.width=e.max,this.size.height=this.size.width*this.size.currentAspectRatio,this.size.height=this.roundDecimal(this.size.height)):this.size.currentAspectRatio>=1&&(this.size.height>e.max?(this.size.height=e.max,this.size.width=this.size.height/this.size.currentAspectRatio,this.size.width=this.roundDecimal(this.size.width)):this.size.width<e.min&&(this.size.width=e.min,this.size.height=this.size.width*this.size.currentAspectRatio,this.size.height=this.roundDecimal(this.size.height)))}},{key:"roundDecimal",value:function(t){return De.b.round(t,e.getMaxDecimalPlaces(this.size.unit)+1)}}],[{key:"getMaxDecimalPlaces",value:function(e){switch(e){case Q.b.IN:return 2;case Q.b.CM:return 1;case Q.b.MM:case Q.b.PX:return 0}}},{key:"decimalPlaces",value:function(e){var t=(""+e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0}}]),e}(),pi=n(283),hi=function(e){function t(e,n,i){var a,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return u()(this,t),a=y()(this,L()(t).call(this)),m()(_()(a),"_customSizeElement",{row:null,width:null,height:null,unit:null,warn:null}),m()(_()(a),"templateTypeRenderList",[]),m()(_()(a),"customSizeRatioFixed",!1),m()(_()(a),"keyword",""),a.selectCallback=e,a.openType=n,a.customSizeInputParam=i,a.doSaveSelectedRow=r,a.hasAllType=s,a.element.classList.add(R.a.TEMPLATE_TYPE_TOOL),a.templateTypeToolSizeManager=new di(a.updateTooltipAndWarning.bind(_()(a))),a.makeSearchTool(),a.makeList(),a.templateTypeTooltipManager=new ci(a.scrollElement),a.templateTypeTooltipManager.makeTooltips(a.customSizeElement.width,a.customSizeElement.height,a.scrollElementWrapper,a.sizeLimit,a.customSize),a}var n,i,r;return b()(t,e),p()(t,[{key:"customSizeElement",get:function(){return this._customSizeElement}},{key:"customSize",get:function(){return this.templateTypeToolSizeManager.size}},{key:"sizeLimit",get:function(){return this.templateTypeToolSizeManager.getSizeLimit()}}]),p()(t,[{key:"onInputChangeEvent",value:function(){this.customSizeRatioFixed?this.templateTypeToolSizeManager.limitFixedRatioSizeToMaxBounds():this.templateTypeToolSizeManager.limitCustomSizeToMaxBounds(),this.enableApplyButton(),this.templateTypeToolSizeManager.updateDOMCustomSizeInputs(this.customSizeElement)}},{key:"setCustomSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Q.b.PX;this.templateTypeToolSizeManager.size.unit=n,this.templateTypeToolSizeManager.size.width=e,this.templateTypeToolSizeManager.size.height=t,this.templateTypeToolSizeManager.size.dpi=Q.d.DEFAULT_DPI,this.updateTooltipAndWarning(),this.templateTypeToolSizeManager.updateDOMCustomSizeInputs(this.customSizeElement)}},{key:"setCustomWidth",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.templateTypeToolSizeManager.size.widthAsString=e,this.customSizeRatioFixed&&this.templateTypeToolSizeManager.updateHeightBasedOnLockedRatioAndWidth(this.templateTypeToolSizeManager.size.width),this.updateTooltipAndWarning(),t&&this.templateTypeToolSizeManager.updateDOMCustomSizeInputs(this.customSizeElement)}},{key:"setCustomHeight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.templateTypeToolSizeManager.size.heightAsString=e,this.customSizeRatioFixed&&this.templateTypeToolSizeManager.updateWidthBasedOnLockedRatioAndHeight(this.templateTypeToolSizeManager.size.height),this.updateTooltipAndWarning(),t&&this.templateTypeToolSizeManager.updateDOMCustomSizeInputs(this.customSizeElement)}},{key:"dispatchSheetSizeUpdate",value:function(){var e=this;o.a.dispatch(new l.c(function(t,n){var i=t.pages[0].sheetSize;if(null!=e.selectedType&&(e.selectedType.unit===Q.b.PX?i.width===e.selectedType.width&&i.height===e.selectedType.height||e.deselect():n.option.size&&e.selectedType.unit===n.option.size.unit&&e.selectedType.width===n.option.size.width&&e.selectedType.height===n.option.size.height||e.deselect()),e.customSizeInputParam)if(n.option.size){var a=n.option.size;e.setCustomSize(a.width,a.height,a.unit)}else e.setCustomSize(i.width,i.height);n.env.devMode?e.element.classList.add(R.a.DEV_MODE):e.element.classList.remove(R.a.DEV_MODE)}))}},{key:"render",value:function(){return this.element}},{key:"setHeightAuto",value:function(){var e=Math.min(this.listWrap.scrollHeight,window.innerHeight-this.listWrap.getBoundingClientRect().top);return this.element.style.height="".concat(e,"px"),this.scrollElement.updateScrollbar(),this}},{key:"getList",value:function(){return this.templateTypeRenderList.slice()}},{key:"clearKeyword",value:(r=s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.searchTool.updateUI(""),e.next=3,this.loadTemplateTypeList(this.openType,"",!1);case 3:this.updateUISelectedTemplateType();case 4:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"renderList",value:function(){var e=this,t=!A.StringUtil.isEmpty(this.keyword);$(this.listWrap).empty(),!t&&this.customSizeElement.row&&this.listWrap.appendChild(this.customSizeElement.row),this.hasAllType&&this.listWrap.appendChild(this.makeRow(Q.d.ALL_TYPE));for(var n=[],i=this.templateTypeRenderList.slice();!A.ArrayUtil.isEmpty(i);){var a=i.shift();if(A.ArrayUtil.isEmpty(n))n.push([a]);else{var r=n[n.length-1],s=r[0];A.StringUtil.isEmpty(a.groupId)||A.StringUtil.isEmpty(s.groupId)||s.groupId!==a.groupId?n.push([a]):r.push(a)}}n.forEach(function(n){if(1===n.length&&A.StringUtil.isEmpty(n[0].groupId))e.listWrap.appendChild(e.makeRow(n[0]));else{var i=!1;e.selectedType&&n.forEach(function(t){i=i||e.selectedType.id===t.id});var a=n[0],r=e.makeAccordionRow(a.groupTitle,t,a.groupId,i);te.a.preventGTMAttr(r.row),e.listWrap.appendChild(r.row);var s=!1;n.forEach(function(t){r.contentsWrap.appendChild(e.makeRow(t,!0)),s=s||!A.StringUtil.isEmpty(t.productTypeId)}),s&&r.contentsWrap.parentElement.classList.add(R.a.PRINT_OPTION)}})}},{key:"makeList",value:function(){var e=this,t=this.scrollElement=new G.a(!1,!0,"100%");this.listWrap=document.createElement("div"),this.listWrap.className=R.a.LIST_WRAP,this.customSizeInputParam?(this.scrollElementWrapper=document.createElement("div"),this.scrollElementWrapper.className=R.a.SCROLL_ELEMENT_WRAPPER,this.element.appendChild(this.scrollElementWrapper),this.scrollElementWrapper.appendChild(t.render(this.listWrap))):this.element.appendChild(t.render(this.listWrap)),this.customSizeInputParam&&(this.makeCustomSizeInput(),$(this.listWrap).on("keydown","input",function(e){e.stopPropagation()}).on("input","input",function(t){var n=t.currentTarget;e.lastInputUsed=n.getAttribute("data-type"),"width"===e.lastInputUsed?e.setCustomWidth(n.value,!0):e.setCustomHeight(n.value,!0)}).on("change","input",function(){return e.onInputChangeEvent()}))}},{key:"makeCustomSizeInput",value:function(){var e=this,t=this.makeAccordionRow("직접 입력",!1);this.customSizeElement.row=t.row,this.customSizeElement.row.classList.add(R.a.CUSTOM_SIZE);var n=function(e){var t=document.createElement("input");return t.setAttribute("data-type",e),t},i=this.customSizeElement.width=n("width");i.setAttribute("type","number"),t.contentsWrap.appendChild(i);var a=document.createElement("span");a.className="".concat(R.a.FIX_RATIO," ").concat(this.customSizeRatioFixed?R.a.ACTIVE:""),Object(K.setToolsIcon)(a,K.ToolsIcon.LOCK_ON,!0),Object(K.setToolsIcon)(a,K.ToolsIcon.LOCK_OFF,!0),a.addEventListener("click",function(){a.classList.toggle(R.a.ACTIVE),e.customSizeRatioFixed=a.classList.contains(R.a.ACTIVE),e.customSizeRatioFixed&&e.templateTypeToolSizeManager.lockAspectRatio()}),t.contentsWrap.appendChild(a);var r=this.customSizeElement.height=n("height");r.setAttribute("type","number"),t.contentsWrap.appendChild(r);var s=this.customSizeElement.unit=document.createElement("select");function o(e){var t=document.createElement("option");return t.innerText=e.toLowerCase(),t.value=e,t}s.appendChild(o(Q.b.PX)),s.appendChild(o(Q.b.MM)),s.appendChild(o(Q.b.CM)),s.appendChild(o(Q.b.IN)),s.addEventListener("change",function(){return e.templateTypeToolSizeManager.changeCustomSizeUnit(s.value,e.customSizeElement)}),this.templateTypeToolSizeManager.size.unit=s.value,t.contentsWrap.appendChild(s);var l=document.createElement("button");this.applyButton=l,l.innerText=this.customSizeInputParam.btnText,l.addEventListener("mouseup",function(t){e.deselect();var n=e.templateTypeToolSizeManager.size;e.customSizeInputParam.callback({width:n.width,height:n.height,unit:n.unit,dpi:n.dpi},t)}),t.contentsWrap.appendChild(l)}},{key:"makeAccordionRow",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=document.createElement("div");r.className=R.a.TOOLS_ACCORDION_ROW,i&&r.setAttribute("data-id",i);var s=document.createElement("input");s.className=R.a.ACCORDION_VISIBLE,s.type="checkbox",s.checked=n||a,r.appendChild(s);var o=document.createElement("label"),l=document.createElement("span");l.innerText=e,o.appendChild(l),Object(K.setToolsIcon)(o,K.ToolsIcon.GREATER_THAN,!0),o.addEventListener("click",function(e){if(e.stopPropagation(),s.checked)s.checked=!1;else{n||t.closeAccordionAll(),s.checked=!0;var i=$(r);t.scrollElement.setScrollY(i.position().top-$(t.scrollElement.contents).height()+i.height())}}),r.appendChild(o);var c=document.createElement("div");return c.className=R.a.ACCORDION_CONTENTS_WRAP,r.appendChild(c),{row:r,contentsWrap:c}}},{key:"makeRow",value:function(e){var n=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=document.createElement("div");a.setAttribute("data-id",e.id);var r=this.selectedType&&this.selectedType.id===e.id;a.className="".concat(R.a.TOOLS_ROW," ").concat(r?R.a.SELECTED_VALUE:"");var s=document.createElement("span");if(s.innerText=e.title,a.appendChild(s),!isNaN(e.width)&&!isNaN(e.height)&&e.unit){var o=document.createElement("span");o.className=R.a.SIZE_LABEL;var l=e.unit.toLowerCase();o.innerText="".concat(e.width," ").concat(l," × ").concat(e.height," ").concat(l),a.appendChild(o)}return a.addEventListener("mousedown",function(e){e.preventDefault()}),a.addEventListener("mouseup",function(t){n.selectTemplateType(e,!0,t)}),i||A.StringUtil.isEmpty(e.productTypeId)||a.classList.add(R.a.PRINT_OPTION),!A.StringUtil.isEmpty(e.allowedMode)&&t.isAllowedBit(A.StringUtil.reverse(e.allowedMode),Q.a.USER_MODE)||a.classList.add(R.a.HIDDEN_TO_USER),a}},{key:"makeSearchTool",value:function(){var e=this;this.searchTool=new Xt.a(function(t){return e.loadTemplateTypeList(e.openType,t)},"",!1,void 0,!0),this.element.appendChild(this.searchTool.render())}},{key:"enableApplyButton",value:function(){void 0!==this.applyButton&&this.applyButton.removeAttribute("disabled")}},{key:"disableApplyButton",value:function(){void 0!==this.applyButton&&this.applyButton.setAttribute("disabled","disabled")}},{key:"getApplyButtonState",value:function(){return this.applyButton.getAttribute("disabled")}},{key:"updateUISelectedTemplateType",value:function(){if(this.selectedType){var e=$(this.listWrap).find(".".concat(R.a.TOOLS_ROW,'[data-id="').concat(this.selectedType.id,'"]')).addClass(R.a.SELECTED_VALUE);if(e.length>0){this.closeAccordionAll();var t=e[0].parentElement.parentElement;t.classList.contains(R.a.TOOLS_ACCORDION_ROW)&&$(t).find(".".concat(R.a.ACCORDION_VISIBLE)).prop("checked",!0)}}}},{key:"updateTooltipAndWarning",value:function(){var e=this.sizeLimit,t=!1;(this.templateTypeToolSizeManager.size.width>e.max||this.templateTypeToolSizeManager.size.width<e.min)&&(t=!0);var n=!1;(this.templateTypeToolSizeManager.size.height>e.max||this.templateTypeToolSizeManager.size.height<e.min)&&(n=!0),t||n?(this.templateTypeToolSizeManager.updateCustomSizeInputWarn(t,n,this.customSizeElement),this.templateTypeTooltipManager.updateToolTip(t,n,this.sizeLimit,this.customSize,this.lastInputUsed),this.disableApplyButton()):(this.templateTypeToolSizeManager.clearCustomSizeInputWarn(this.customSizeElement),this.templateTypeTooltipManager.hideTooltips(),this.enableApplyButton())}},{key:"updateDOMCustomSizeInputs",value:function(){this.templateTypeToolSizeManager.updateDOMCustomSizeInputs(this.customSizeElement)}},{key:"loadTemplateTypeList",value:(i=s()(a.a.mark(function e(){var t,n,i,r,s,o=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:this.openType,n=o.length>1&&void 0!==o[1]?o[1]:"",i=!(o.length>2&&void 0!==o[2])||o[2],r=o.length>3?o[3]:void 0,this.openType=t,this.keyword=n,s=this.makeLoadStatus(),!this.isChangeLoadStatus(s)){e.next=12;break}return i&&this.deselect(),e.next=11,this.loadTemplateTypeDataList(r);case 11:this.renderList();case 12:return this.lastLoadStatus=s,e.abrupt("return",this);case 14:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)})},{key:"makeLoadStatus",value:function(){return{openType:this.openType,keyword:this.keyword,adminMode:o.a.getEnv().adminMode,devMode:o.a.getEnv().devMode}}},{key:"isChangeLoadStatus",value:function(e){return null==this.lastLoadStatus||this.lastLoadStatus.openType!==e.openType||this.lastLoadStatus.keyword!==e.keyword||this.lastLoadStatus.adminMode!==e.adminMode||this.lastLoadStatus.devMode!==e.devMode}},{key:"loadTemplateTypeDataList",value:(n=s()(a.a.mark(function e(n){var i,r=this;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oi.a.getTemplateTypeList(this.openType);case 2:return i=e.sent,n&&n.name!==pi.a.NONE&&n.size!==pi.b.NONE&&(i=[i.find(function(e){return e.groupTitle&&e.groupTitle.includes(n.name)&&e.title&&e.title.includes(n.size)})]),this.templateTypeRenderList=i.filter(function(e){return t.isAllowedMode(e)}),A.StringUtil.isEmpty(this.keyword)||(this.templateTypeRenderList=this.templateTypeRenderList.filter(function(e){return!A.ArrayUtil.isEmpty(e.keywords)&&e.keywords.indexOf(r.keyword)>=0||!A.StringUtil.isEmpty(e.title)&&e.title.indexOf(r.keyword)>=0||!A.StringUtil.isEmpty(e.groupTitle)&&e.groupTitle.indexOf(r.keyword)>=0})),e.abrupt("return",this);case 7:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"select",value:function(e,t){var n=oi.a.findTemplateType(e,this.templateTypeRenderList);return this.selectTemplateType(n,t)}},{key:"selectTemplateType",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;return e?(this.doSaveSelectedRow?this.selectedType&&this.selectedType.id===e.id||(this.deselect(),this.selectedType=e,this.updateUISelectedTemplateType(),t&&this.selectCallback&&this.selectCallback(e,n)):t&&this.selectCallback&&this.selectCallback(e,n),e):this.selectedType}},{key:"deselect",value:function(){this.selectedType=null,$(this.listWrap).find(".".concat(R.a.TOOLS_ROW)).removeClass(R.a.SELECTED_VALUE)}},{key:"closeAccordionAll",value:function(){$(this.listWrap).find(".".concat(R.a.ACCORDION_VISIBLE)).prop("checked",!1)}},{key:"getSelectedTypeTitle",value:function(){if(this.selectedType)return{groupTitle:this.selectedType.groupTitle,title:this.selectedType.title}}},{key:"setGtmData",value:function(e){te.a.setGTMValue(this.element,e)}}],[{key:"isAllowedMode",value:function(e){if(!e||!e.allowedMode)return!1;var t=A.StringUtil.reverse(e.allowedMode),n=o.a.getEnv().adminMode,i=o.a.getEnv().devMode;return!(n||i||!this.isAllowedBit(t,Q.a.USER_MODE))||(!(!n||!this.isAllowedBit(t,Q.a.ADMIN_MODE))||!(!i||!this.isAllowedBit(t,Q.a.DEV_MODE)))}},{key:"isAllowedBit",value:function(e,t){return"1"===e.charAt(Math.log2(t))}}]),t}(ri.a);m()(hi,"DEFAULT_SIZE_OPTION",{width:si.a.DEFAULT_SHEET_SIZE,height:si.a.DEFAULT_SHEET_SIZE,unit:Q.d.DEFAULT_UNIT,dpi:Q.d.DEFAULT_DPI});var mi,gi=n(293),vi=n(143),fi=n(266),Ei=n(203),Ti=n(95),yi=n(112),Ii=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;u()(this,e),m()(this,"defaultValue",""),m()(this,"globalCloseEventName","click.".concat(A.StringUtil.random())),this.changeAction=t,this.maxLength=n,this.makeElement(),this.bindEvent()}return p()(e,[{key:"setDefaultValue",value:function(e){this.defaultValue=e}},{key:"makeElement",value:function(){this.element=document.createElement("div"),this.element.className=R.a.CONTENT_EDITABLE_ELEMENT,this.editableElement=document.createElement("p"),this.element.appendChild(this.editableElement),Object(K.setToolsIcon)(this.element,K.ToolsIcon.PENCIL,!0)}},{key:"bindEvent",value:function(){var e=this;$(this.editableElement).on("click",function(t){t.stopPropagation(),e.startEdit()}).on("keydown",function(t){t.stopPropagation(),13===t.keyCode&&e.endEdit()}).on("focusout",function(){return e.endEdit()})}},{key:"startEdit",value:function(){var e=this;$(document.body).off(this.globalCloseEventName).trigger("click"),$(document.body).on(this.globalCloseEventName,function(){return e.endEdit()}),"true"!==this.editableElement.contentEditable&&(this.editableElement.contentEditable="true",this.editableElement.classList.add(R.a.CONTENTEDITABLE),this.editableElement.focus(),document.execCommand("selectAll"))}},{key:"endEdit",value:function(){$(document.body).off(this.globalCloseEventName),window.getSelection().removeAllRanges(),this.editableElement.blur(),this.editableElement.scrollLeft=0,this.editableElement.contentEditable="false",this.editableElement.classList.remove(R.a.CONTENTEDITABLE);var e=this.editableElement.innerText;e.length>this.maxLength&&(e=e.substring(0,this.maxLength)),this.inputValue!==e&&(this.render(e),this.changeAction(e))}},{key:"render",value:function(e){return e&&(this.inputValue=e,this.editableElement.innerText=e,this.editableElement.title=e,e===this.defaultValue?this.element.classList.add("default_value"):this.element.classList.remove("default_value")),this.element}}]),e}(),Li=n(228),ki=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";u()(this,e),this.element=document.createElement("div"),this.element.className="default_profile",this.textElem=document.createElement("div"),this.textElem.className="default_profile_text",this.updateUI(t),this.initDom()}return p()(e,[{key:"updateUI",value:function(e){this.textElem.innerText=e?e.substring(0,2):"",this.setColorClass(e)}},{key:"addEventListener",value:function(e,t){this.element.addEventListener(e,t)}},{key:"initDom",value:function(){this.element.appendChild(this.textElem)}},{key:"render",value:function(){return this.element}},{key:"setColorClass",value:function(e){this.element.className="default_profile","유니콘"===e?this.element.classList.add("unicorn"):"비즈하우스"===e?this.element.classList.add("bizhows"):"스마일캣"===e?this.element.classList.add("smilecat"):"미리디"===e&&this.element.classList.add("miridih")}}]),e}(),_i=n(486),wi=n(261),bi=n(263),Si=n(152),Oi=function(){function e(t,n,i){u()(this,e),m()(this,"actionType",l.a.TEMPLATE_LOAD),m()(this,"doSaveQueue",!0),m()(this,"isActionGroupEquals",function(e){return!1}),m()(this,"concat",function(e){return!1}),m()(this,"changeDesign",function(){return!0}),m()(this,"isLastSavedAction",!1),this.designParam=t,this.sizeOption=n,this.templateType=i}var t,n,i;return p()(e,[{key:"commit",value:(i=s()(a.a.mark(function e(t,n,i){var r,s,l,c,u;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.undoStatus=this.makeStatus(t,n),!this.redoStatus){e.next=6;break}return this.setStatus(this.redoStatus,t),e.next=5,this.render(t,n,i);case 5:return e.abrupt("return");case 6:return r=!1,bi.a.open(A.CRM.get(H.a.TOOLS_POPUP_DESIGN_LOAD_LOADING_MSG),A.CRM.get(H.a.TOOLS_POPUP_DESIGN_LOAD_LOADING_CANCEL),function(){return r=!0}),e.prev=8,s=M.a.make(this.designParam),e.next=12,s.load(!1,E.a.LOADING_ITEM);case 12:if((l=e.sent).templateType=this.templateType,fe.a.setTemplateTypeList([{id:this.templateType?this.templateType.id:null,title:this.templateType?this.templateType.title:null}]),!r){e.next=17;break}return e.abrupt("return");case 17:return o.a.setMetaData(l),this.sizeOption?(c=Qn.a.getPixelLimitMax(this.sizeOption,si.a.getMaxSheetSize(o.a.getEnv().devMode)),l.pages.forEach(function(e){return e.changeSheetSize(c,Si.a.FIT)}),o.a.instance.option.size=this.sizeOption):s instanceof si.d&&!A.StringUtil.isEmpty(s.designBean.sizeOption)?o.a.instance.option.initByDesignBean(s.designBean):o.a.instance.option.initSizeByMeta(l),e.next=21,this.render(l,n,i);case 21:ye.a.loadDesignMetaResource(l).catch(function(e){return console.error(e)});try{u=l.pages[0].reference,fe.a.setRefTemplateKey(u.templateKey),te.a.sendEvent("템플릿 선택","템플릿 선택","".concat(u.templateRepositoryType," - ").concat(u.templateKey),!0)}catch(e){}e.next=28;break;case 25:throw e.prev=25,e.t0=e.catch(8),e.t0;case 28:return e.prev=28,bi.a.close(),e.finish(28);case 31:case"end":return e.stop()}},e,this,[[8,25,28,31]])})),function(e,t,n){return i.apply(this,arguments)})},{key:"render",value:(n=s()(a.a.mark(function e(t,n,i){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i.pageListNavigator.showPageList(!0,!1),i.canvasRenderer.updatePagingManager(),i.canvasRenderer.updateZoomFitAfterRender(),e.next=5,i.renderAll(t,n);case 5:o.a.dispatch(new pn.k),Te.a.applyPresetToMeta(t);case 7:case"end":return e.stop()}},e)})),function(e,t,i){return n.apply(this,arguments)})},{key:"rollback",value:(t=s()(a.a.mark(function e(t,n,i){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.redoStatus=this.makeStatus(t,n),this.setStatus(this.undoStatus,t),e.next=4,this.render(t,n,i);case 4:case"end":return e.stop()}},e,this)})),function(e,n,i){return t.apply(this,arguments)})},{key:"setStatus",value:function(e,t){t.pages=e.pages,o.a.setMetaData(t),o.a.instance.renderPageIdx=e.renderPageIdx,o.a.instance.option.size=e.sizeOption,wi.a.clear(),Se.a.unselectAllItems()}},{key:"makeStatus",value:function(e,t){return{pages:e.pages,renderPageIdx:t.renderPageIdx,sizeOption:t.option.size}}},{key:"recycle",value:function(){this.undoStatus=null,this.redoStatus=null}}]),e}(),Ci=function(e){function t(e,n){var i;return u()(this,t),i=y()(this,L()(t).call(this)),m()(_()(i),"actionType",l.a.CHANGE_PAGE_SIZE),m()(_()(i),"changeDesign",function(){return!0}),m()(_()(i),"rollbackBgSizeList",new Map),m()(_()(i),"redoBgSizeList",new Map),m()(_()(i),"commitAction",function(){var e=s()(a.a.mark(function e(t,n,r){var s,l,c,u;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i.oriTemplateType=t.templateType,t.templateType=i.templateType,Se.a.unselectAllItems(),!i.redoPages){e.next=10;break}return i.setSizeOption(),t.pages=i.redoPages,r.canvasRenderer.updateZoomFitAfterRender(),r.canvasRenderer.updatePagingManager(),r.renderAll(t,n),e.abrupt("return");case 10:if(i.rollbackSizeOption=o.a.instance.option.size,i.setSizeOption(),s={width:t.pages[0].sheetSize.width,height:t.pages[0].sheetSize.height},l=i.sheetSize.width/i.sheetSize.height==s.width/s.height,c=!0,i.rollbackPages=[],i.rollbackBgSizeList.clear(),t.pages.forEach(function(e,n){c=c&&0===e.items.length,e.guidelineManager&&(e.guidelineFactoryInfos=e.guidelineManager.getGuidelineFactoryInfos()),i.rollbackPages.push(e);var a=e.clone();a.changeSheetSize(i.sheetSize),t.replacePage(a,n)}),u={beforeSheetSize:s,pageTargetAll:!0,targetPageIdx:n.renderPageIdx},!l&&!c){e.next=25;break}return u.selectedType=Si.a.FIT,e.next=23,Si.b.instance.arrange(u);case 23:e.next=27;break;case 25:return e.next=27,Si.b.instance.render(u);case 27:if(i.templateType)try{Te.a.applyPresetToMeta(t),Si.b.instance.updateOriginalPagesGuideLineInfo()}catch(e){console.error("guide line preset error.",e)}case 28:case"end":return e.stop()}},e)}));return function(t,n,i){return e.apply(this,arguments)}}()),m()(_()(i),"rollbackAction",function(e,t,n){e.templateType=i.oriTemplateType,i.setSizeOption(i.rollbackSizeOption),i.redoPages=e.pages,e.pages=i.rollbackPages,Se.a.unselectAllItems(),n.canvasRenderer.updatePagingManager(),n.canvasRenderer.updateZoomFitAfterRender(),n.renderAll(e,t)}),m()(_()(i),"recycle",function(){i.rollbackPages=null,i.redoPages=null}),i.sizeOption=e,i.templateType=n,i.sheetSize=Qn.a.getPixelLimitMax(e,si.a.getMaxSheetSize(o.a.getEnv().devMode)),i.renderAuto=!1,i}return b()(t,e),p()(t,[{key:"setSizeOption",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.sizeOption;o.a.instance.option.size=e}}]),t}(l.b),Pi=function(){function e(t){u()(this,e),this.trace=t,this.element=document.createElement("div"),this.element.className=R.a.RIGHT_FLOATING_MENU_SHEET_SIZE_BTN;var n=document.createElement("button");n.classList.add(R.a.BUTTON_TOOL_TAB_TOGGLE),this.widthSpan=document.createElement("span"),n.appendChild(this.widthSpan),Object(K.setToolsIcon)(n,K.ToolsIcon.ADD,!0),this.heightSpan=document.createElement("span"),n.appendChild(this.heightSpan),this.unitSpan=document.createElement("span"),this.unitSpan.className="size_unit",n.appendChild(this.unitSpan),Object(K.setToolsIcon)(n,K.ToolsIcon.GREATER_THAN,!0),this.element.appendChild(n);var i=document.createElement("div");i.className=R.a.TOOLS_TAB,this.sheetSizeSelector=Di(function(){return n.classList.remove(R.a.ACTIVE)},t),i.appendChild(this.sheetSizeSelector.render()),this.element.appendChild(i)}var t,n;return p()(e,[{key:"setReady",value:(n=s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadTypeList(o.a.getEnv().adminMode?Q.c.ALL:Q.c.SHEET_SIZE);case 2:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"getElement",value:function(){return this.element}},{key:"loadTypeList",value:(t=s()(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sheetSizeSelector.loadTemplateTypeList(t,"",!1);case 2:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"render",value:function(t,n){var i=this.getRenderStatus(t,n);if(this.isChangeAdminMode(i.contents)&&this.loadTypeList(n.env.adminMode?Q.c.ALL:Q.c.SHEET_SIZE).catch(function(e){return console.error(e)}),this.isChangeSizeOption(i.contents)){var a=i.contents.sizeOption;this.widthSpan.innerText=String(e.floorSize(a.width,a.unit)),this.heightSpan.innerText=String(e.floorSize(a.height,a.unit)),this.unitSpan.innerText=String(a.unit.toLowerCase()),this.sheetSizeSelector.dispatchSheetSizeUpdate(),t.templateType&&this.sheetSizeSelector.select({id:t.templateType.id},!1)}this.lastRenderStatus=i}},{key:"getRenderStatus",value:function(e,t){return{contents:{adminMode:t.env.adminMode,sizeOption:t.option.size,templateTypeId:e.templateType?e.templateType.id:""},position:{}}}},{key:"isChangeAdminMode",value:function(e){return!this.lastRenderStatus||this.lastRenderStatus.contents.adminMode!==e.adminMode}},{key:"isChangeSizeOption",value:function(e){if(!this.lastRenderStatus)return!0;var t=this.lastRenderStatus.contents.sizeOption,n=e.sizeOption;return t.width!==n.width||t.height!==n.height||t.unit!==n.unit||this.lastRenderStatus.contents.templateTypeId!==e.templateTypeId}},{key:"isChangeContentsStatus",value:function(e){return this.isChangeAdminMode(e)||this.isChangeSizeOption(e)}},{key:"isChangePositionStatus",value:function(e){return!1}}],[{key:"floorSize",value:function(e,t){return De.b.floorFromDecimalPlace(e,di.getMaxDecimalPlaces(t))}},{key:"getSheetSize",value:function(){var t="",n=o.a.instance.option.size;if(n){var i=String(e.floorSize(n.width,n.unit)),a=String(e.floorSize(n.height,n.unit));t="".concat(i).concat(n.unit.toLowerCase()," × ").concat(a).concat(n.unit.toLowerCase())}return t}}]),e}();function Di(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;function n(n,i){if(e(),o.a.dispatch(new Ci(n,i)),null!=t){var a="".concat(n.width,"x").concat(n.height,", ").concat(n.unit);null!=n.dpi&&(a+=", ".concat(n.dpi," DPI")),te.a.sendEvent("크기조정 클릭이벤트 비교",t,a,!0)}}var i=new hi(function(){var e=s()(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n({width:t.width,height:t.height,unit:t.unit,dpi:Q.d.DEFAULT_DPI},t),e.next=3,i.clearKeyword();case 3:o.a.dispatch(new l.c(function(){var e=s()(a.a.mark(function e(n,i,r){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.leftBar.getMenu(ct.b.TEMPLATE_LIB).setTemplateType(t);case 2:case"end":return e.stop()}},e)}));return function(t,n,i){return e.apply(this,arguments)}}())),o.a.dispatch(new _i.a({productId:t.productTypeId,unit:t.unit}));case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),Q.c.SHEET_SIZE,{btnText:"적용하기",callback:function(e){n(e),o.a.dispatch(new l.c(function(){var t=s()(a.a.mark(function t(n,i,r){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.leftBar.getMenu(ct.b.TEMPLATE_LIB).setTemplateType({width:e.width,height:e.height});case 2:case"end":return t.stop()}},t)}));return function(e,n,i){return t.apply(this,arguments)}}())),o.a.dispatch(new _i.a({unit:e.unit}))}});return i}!function(e){e.RIGHT_FLOATING_MENU="사이즈정보",e.APP_HEADER="크기조정"}(mi||(mi={}));var Ai=function(e){function t(e,n){var i;return u()(this,t),(i=y()(this,L()(t).call(this))).id=e,i.contents=n,n||(i.contents=document.createElement("div")),i.contentsWrapClassName="responsive_popup_wrap",i.contents.className="responsive_popup_contents",i.makeBtnClose=!1,i}return b()(t,e),p()(t,[{key:"getContents",value:function(){return this.contents}},{key:"getId",value:function(){return this.id}},{key:"updateUI",value:function(){}},{key:"makeScrollElement",value:function(){var e=document.createElement("div");return e.className="responsive_popup_contents_scroll",this.contents.appendChild(e),e}},{key:"makeIconMenu",value:function(e,t){var n=Y.makeIconMenu(e,t);return this.contents.appendChild(n),n}},{key:"makeTitle",value:function(e,t){var n=Y.makeTitleMenu(A.CRM.get(e),t);return this.contents.appendChild(n),this.contents.appendChild(Y.makeContour()),n}},{key:"makeCloseButton",value:function(){return Object(K.setToolsIcon)(this.contents,K.ToolsIcon.CLOSE)}},{key:"makeContour",value:function(){this.contents.appendChild(Y.makeContour())}}]),t}(U.a),Ri=n(179),Mi=function(e){function t(e){var n;return u()(this,t),(n=y()(this,L()(t).call(this,t.EDITOR_SETTING_ID))).backEventListener=e,n.makeElements(),n}return b()(t,e),p()(t,[{key:"makeElements",value:function(){var e=this;this.makeTitle(H.a.EDITOR_SETTING,function(){e.backEventListener(),e.hide()}),this.makeCloseButton().addEventListener("click",function(){return e.hide()}),this.makeContents()}},{key:"makeContents",value:function(){var e=this.makeScrollElement(),n=Y.makeToggleBtn({title:A.CRM.get(H.a.SOUTHWEST_SETTINGS_TOGGLE_BTN_SNAP),func:function(e){o.a.dispatch(new l.c(function(t,n){n.config.useSnap=e}))}});e.appendChild(n.wrap),te.a.setGTMValue(n.wrap,"settings");var i=Y.makeToggleBtn({title:A.CRM.get(H.a.HEADER_DESIGN_GUIDE),func:function(e){o.a.dispatch(new l.c(function(n,i,a){i.config.showDesignGuide=e,i.pageController.getPageRenderer(n.pages[i.renderPageIdx]).setDesignGuide(),t.replaceMask(e,n.pages)},!0))}});e.appendChild(i.wrap);var a=Y.makeRadio(H.a.SOUTHWEST_SETTINGS_TOGGLE_BTN_PAGINATION_MODE,function(e){o.a.dispatch(new l.c(function(t,n){n.config.leftMenuPaginationMode=e},!0))},[{label:"스크롤",value:Ri.b.SCROLL,selected:!0},{label:"페이지",value:Ri.b.BUTTON,selected:!1}]);a.classList.add(R.a.ROW_BORDER_TOP),e.appendChild(a)}},{key:"getElement",value:function(){return this.contents}},{key:"show",value:function(){this.getElement()&&this.getElement().classList.add(R.a.ACTIVE)}},{key:"hide",value:function(){this.getElement()&&this.getElement().classList.remove(R.a.ACTIVE)}}],[{key:"replaceMask",value:function(e,t){!0===e?wt.replaceMaskOnItems():t.forEach(function(e){var t=e.background.backgroundItem?"1":"0";wt.replaceMaskOnBackground(e.pageId,t)})}}]),t}(Ai);m()(Mi,"EDITOR_SETTING_ID","editorSetting");var Ni=n(222),xi=n(123),Bi=function(e){function t(e){var n;return u()(this,t),(n=y()(this,L()(t).call(this,t.GUIDELINE_ID))).backEventListener=e,n.makeElements(),n}return b()(t,e),p()(t,[{key:"makeElements",value:function(){var e=this;this.makeTitle(H.a.HEADER_GUIDE_LINE,function(){e.backEventListener(),e.hide()}),this.makeCloseButton().addEventListener("click",function(){return e.hide()}),this.makeContents()}},{key:"makeContents",value:function(){var e=this,t=this.makeScrollElement(),n=this.showGuidelineSwitch=Y.makeToggleBtn({title:A.CRM.get(H.a.HEADER_GUIDELINE_SHOW),subTitle:"Ctrl + ;",func:function(){return o.a.dispatch(new Ni.b)},initValue:o.a.instance.showGuideline});t.appendChild(n.wrap);var i=this.lockGuidelineSwitch=Y.makeToggleBtn({title:A.CRM.get(H.a.HEADER_GUIDELINE_LOCK),subTitle:"Ctrl + Alt + ;",func:function(){return o.a.dispatch(new Ni.a)},initValue:o.a.instance.lockGuideline});t.appendChild(i.wrap);var a=Y.makePopupMenu("가로 가이드선 추가");a.classList.add(R.a.ROW_BORDER_TOP),a.addEventListener("click",function(){e.contents.classList.contains(R.a.DISABLE)||(o.a.dispatch(new Ni.c(xi.c.HOR)),te.a.sendEvent("가이드선","가이드선 추가",a.innerText,!0))}),t.appendChild(a);var r=Y.makePopupMenu("세로 가이드선 추가");r.addEventListener("click",function(){e.contents.classList.contains(R.a.DISABLE)||(o.a.dispatch(new Ni.c(xi.c.VER)),te.a.sendEvent("가이드선","가이드선 추가",r.innerText,!0))}),t.appendChild(r);var s=Y.makePopupMenu("가이드선 초기화");s.addEventListener("click",function(){e.contents.classList.contains(R.a.DISABLE)||(o.a.dispatch(new Ni.d),te.a.sendEvent("가이드선","가이드선 전체 삭제",s.innerText,!0))}),t.appendChild(s)}},{key:"getElement",value:function(){return this.contents}},{key:"show",value:function(){this.getElement()&&this.getElement().classList.add(R.a.ACTIVE)}},{key:"hide",value:function(){this.getElement()&&this.getElement().classList.remove(R.a.ACTIVE)}},{key:"showGuideLine",value:function(){this.showGuidelineSwitch&&!this.showGuidelineSwitch.checkbox.checked&&(this.showGuidelineSwitch.checkbox.checked=!0)}},{key:"hideGuideLine",value:function(){this.showGuidelineSwitch&&this.showGuidelineSwitch.checkbox.checked&&(this.showGuidelineSwitch.checkbox.checked=!1)}},{key:"lockGuideLine",value:function(){this.lockGuidelineSwitch&&!this.lockGuidelineSwitch.checkbox.checked&&(this.lockGuidelineSwitch.checkbox.checked=!0)}},{key:"unlockGuideLine",value:function(){this.lockGuidelineSwitch&&this.lockGuidelineSwitch.checkbox.checked&&(this.lockGuidelineSwitch.checkbox.checked=!1)}}]),t}(Ai);m()(Bi,"GUIDELINE_ID","headerGuidelineMenu");var Ui=n(243),Hi=n(132),Gi=n(282),zi=function(e){function t(){var e;return u()(this,t),e=y()(this,L()(t).call(this,t.SETTING_TAB_ID)),m()(_()(e),"adminElements",[]),m()(_()(e),"devElements",[]),e.editorSetting=new Mi(function(){return e.show()}),e.guidelinePopup=new Bi(function(){return e.show()}),e.makeElements(),e}return b()(t,e),p()(t,[{key:"makeContents",value:function(){var e=this,t=this.makeScrollElement(),n=Y.makeToggleBtn({title:A.CRM.get(H.a.SOUTHWEST_SETTINGS_TOGGLE_BTN_DARK),func:function(e){vi.a.setConfig(yi.a.UNICORN_THEME,e?Ui.a.BLACK:Ui.a.DEFAULT).catch(function(e){return console.error(e)}),o.a.dispatch(new l.c(function(e,t,n){n.renderItemToolsByItem(t.activeItems,t)}))},initValue:o.a.instance.env.theme===Ui.a.BLACK});this.themeCheckbox=n.checkbox,t.appendChild(n.wrap),te.a.setGTMValue(n.wrap,"settings");var i=Y.makeToggleBtn({title:A.CRM.get(H.a.SOUTHWEST_SETTINGS_TOGGLE_BTN_LAYER),subTitle:"Ctrl + Y",func:function(){return o.a.dispatch(new Gi.b)},initValue:!1});i.wrap.classList.add(R.a.ROW_BORDER_TOP),i.wrap.classList.add("show_layer_button"),this.showLayerCheckbox=i.checkbox,t.appendChild(i.wrap);var r=Y.makePopupMenu("가이드선",K.ToolsIcon.GREATER_THAN);r.classList.add(R.a.ROW_BORDER_TOP),r.addEventListener("click",function(){e.hide(),e.guidelinePopup.show()}),t.appendChild(r);var c=Y.makePopupMenu("에디터 환경",K.ToolsIcon.GREATER_THAN);c.addEventListener("click",function(){e.hide(),e.editorSetting.show()}),t.appendChild(c);var u,d=Y.makeToggleBtn({title:A.CRM.get(H.a.SOUTHWEST_SETTINGS_TOGGLE_BTN_ADMIN),func:(u=s()(a.a.mark(function t(n){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(vi.a.setConfig(yi.a.IS_ADMIN,String(n)),e.setVisibleTemplateProject(n),!o.a.instance.env.adminMode){t.next=6;break}return t.next=5,Sn.c.reloadAdminSvgData();case 5:o.a.dispatch(new Hi.a);case 6:case"end":return t.stop()}},t)})),function(e){return u.apply(this,arguments)}),initValue:o.a.instance.env.adminMode});d.wrap.classList.add(R.a.ROW_BORDER_TOP),t.appendChild(d.wrap),this.adminCheckbox=d.checkbox,this.adminElements.push(d.wrap);var p=this.btnOpenTemplateProject=Y.makePopupMenu("템플릿 프로젝트 열기...",null,"Ctrl + Alt + E");p.addEventListener("click",function(){e.hide(),o.a.dispatch(new l.c(function(e,t,n){n.rightBar.togglePopup()}))}),t.appendChild(p),this.adminElements.push(p);var h,m=Y.makeToggleBtn({title:A.CRM.get(H.a.SOUTHWEST_SETTINGS_TOGGLE_BTN_DEV),func:(h=s()(a.a.mark(function t(n){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,vi.a.setConfig(yi.a.IS_DEV,String(n));case 2:o.a.dispatch(new l.c(function(t,i,a){n?a.renderAuto(t,i):(o.a.instance.config.showPrintOutGuide=!1,i.config.showPageMaskGuide=!1,a.canvasRenderer.printout.hideAllPageGuide()),a.canvasRenderer.printout.updateGuideVisible(),e.show()}));case 3:case"end":return t.stop()}},t)})),function(e){return h.apply(this,arguments)}),initValue:o.a.instance.env.devMode});m.wrap.classList.add(R.a.ROW_BORDER_TOP),t.appendChild(m.wrap),this.devCheckbox=m.checkbox,this.adminElements.push(m.wrap)}},{key:"makeElements",value:function(){var e=this;this.makeTitle(H.a.HEADER_SETTING),this.makeCloseButton().addEventListener("click",function(){Ee.a.scrollOn(),e.contents.classList.toggle(R.a.ACTIVE)}),this.makeContents()}},{key:"getElement",value:function(){return this.contents}},{key:"getEditorSettingElement",value:function(){return this.editorSetting.getElement()}},{key:"getGuidelineElement",value:function(){return this.guidelinePopup.getElement()}},{key:"setVisibleTemplateProject",value:function(e){e?this.btnOpenTemplateProject.classList.remove(R.a.HIDE):this.btnOpenTemplateProject.classList.add(R.a.HIDE)}},{key:"show",value:function(){var e=this,t=o.a.instance;this.themeCheckbox.checked=t.env.theme===Ui.a.BLACK,t.user.isAdmin()?(this.adminElements.forEach(function(e){return e.classList.remove(R.a.HIDE)}),this.adminCheckbox.checked=t.env.adminMode,this.devCheckbox.checked=t.env.devMode):this.adminElements.forEach(function(e){return e.classList.add(R.a.HIDE)}),this.setVisibleTemplateProject(t.env.adminMode),t.env.devMode?this.devElements.forEach(function(e){return e.classList.remove(R.a.HIDE)}):this.devElements.forEach(function(e){return e.classList.add(R.a.HIDE)}),o.a.dispatch(new l.c(function(t,n,i){e.showLayerCheckbox.checked=i.rightSection.layerToolManager.isShowLayerToolbox()})),this.getElement()&&this.getElement().classList.add(R.a.ACTIVE)}},{key:"hide",value:function(){this.getElement()&&this.getElement().classList.remove(R.a.ACTIVE)}},{key:"editorSettingPopupHide",value:function(){this.editorSetting.hide()}},{key:"guidelinePopupHide",value:function(){this.guidelinePopup.hide()}},{key:"showGuideLine",value:function(){this.guidelinePopup&&this.guidelinePopup.showGuideLine()}},{key:"hideGuideLine",value:function(){this.guidelinePopup&&this.guidelinePopup.hideGuideLine()}},{key:"lockeGuideLine",value:function(){this.guidelinePopup&&this.guidelinePopup.lockGuideLine()}},{key:"unlockGuideLine",value:function(){this.guidelinePopup&&this.guidelinePopup.unlockGuideLine()}},{key:"updateLayerCheckBox",value:function(e){this.showLayerCheckbox.checked=e}}]),t}(Ai);m()(zi,"SETTING_TAB_ID","header_setting_tab");var Fi,Wi=n(165),Ki=function(){function e(){u()(this,e)}return p()(e,null,[{key:"makeLoginButton",value:function(){var e=document.createElement("div");e.className="login_button_wrapper";var t=document.createElement("div");t.className="sign_in_button";var n=document.createElement("div");n.className="sign_in_label",n.innerText="로그인",Object(K.setToolsIcon)(t,K.ToolsIcon.USER),t.appendChild(n),t.addEventListener("click",function(){o.a.instance.user.getUserProfile().isLogin||he.a.openLoginPopup(ee.a.USER_MENU)}),e.appendChild(t);var i=document.createElement("div");return i.className="sign_up_label",i.innerText="회원가입",i.addEventListener("click",function(e){o.a.instance.user.getUserProfile().isLogin||o.a.instance.user.isLogin()||Wi.a.openSignUp(ee.a.USER_MENU)}),e.appendChild(i),e}}]),e}(),Vi=n(296);!function(e){e.HEADER_RIGHT="header_right",e.BTN_SAVE_MY_LIBRARY="btn_save_my_library",e.BTN_SAVE_CART="btn_save_cart",e.BTN_MINI_SAVE_CART="btn_mini_save_cart",e.BTN_DONE_UPDATE="btn_done_update",e.BTN_MINI_DONE_UPDATE="btn_mini_done_update",e.ICON_DDDOT="icon_dddot"}(Fi||(Fi={}));var Yi=function(e){function t(){return u()(this,t),y()(this,L()(t).apply(this,arguments))}return b()(t,e),p()(t,[{key:"addWindowResizeEvent",value:function(){window.addEventListener("resize",this.updatePosition.bind(this))}},{key:"removeWindowResizeEvent",value:function(){window.removeEventListener("resize",this.updatePosition)}},{key:"updatePosition",value:function(){if(t.positionOffsetElement){var e=$(t.positionOffsetElement).offset().left,n=e+t.positionOffsetElement.offsetWidth;this.contentsWrap.style.left="".concat(n,"px"),$(window).width()<$(this.contentsWrap).width()+e?this.element.classList.add("left_side"):this.element.classList.remove("left_side")}}},{key:"makeTitle",value:function(){var e=document.createElement("div");return e.className="title",e.innerText="공유하기 전에 제목을 지어주세요.",e}},{key:"makeDescription",value:function(){var e=document.createElement("div");return e.className="description",e.innerText="아직 디자인 문서에 제목이 없어요.",e}},{key:"makeInput",value:function(){var e=this,t=this.input=document.createElement("input");return t.className="input",t.placeholder="제목을 입력해주세요",t.addEventListener("input",function(){A.StringUtil.isEmpty(t.value.trim())?e.button.classList.remove(R.a.ACTIVE):e.button.classList.add(R.a.ACTIVE)}),t}},{key:"makeButton",value:function(){var e=this,n=this.button=document.createElement("div");return n.className="button",n.innerText="저장",n.addEventListener("click",function(){var n=e.input.value;A.StringUtil.isEmpty(n.trim())||(t.titleSettingListeners.forEach(function(e){return e(n)}),e.close())}),n}},{key:"getContents",value:function(){var e=document.createElement("div");return e.className="contents",e.appendChild(this.makeTitle()),e.appendChild(this.makeDescription()),e.appendChild(this.makeInput()),e.appendChild(this.makeButton()),e}},{key:"getId",value:function(){return"titleSettingPopup"}},{key:"updateUI",value:function(){}},{key:"open",value:function(e){return B()(L()(t.prototype),"open",this).call(this,e),this.element.classList.contains(R.a.UP_SIDE)&&this.element.classList.remove(R.a.UP_SIDE),this.addWindowResizeEvent(),this.input.value="",this.button.classList.remove(R.a.ACTIVE),o.a.getEnv().browser.isMobile()||this.input.focus({preventScroll:!0}),this}},{key:"close",value:function(){return B()(L()(t.prototype),"close",this).call(this),this.removeWindowResizeEvent(),this}}],[{key:"open",value:function(e){t.instance.open(e)}},{key:"close",value:function(){t.instance.close()}},{key:"setPositionOffsetElement",value:function(e){t.positionOffsetElement=e}},{key:"addTitleSettingListener",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n&&(t.titleSettingListeners=[]),t.titleSettingListeners.push(e)}}]),t}(U.a);m()(Yi,"instance",new Yi),m()(Yi,"titleSettingListeners",[]);var ji=n(290),$i=n(375),Xi=n(267),Zi=function(){function e(){u()(this,e),m()(this,"lastRenderStatus",{contents:null,position:null}),m()(this,"settingTab",new zi),m()(this,"isInitProfileElement",!1),this.option=ln.a.appHeaderOption,this.element=document.getElementById(an.a.appHeader),null==this.element&&(this.element=document.createElement("header"),this.element.id=an.a.appHeader),this.makeElement(),this.makeMessageModal()}var t,n,i,r,c;return p()(e,[{key:"setNewMarks",value:function(){var e=o.a.instance.renderer.messageBox,t=e.makeNewMark();e.addNewCommonMark(t),this.btnShowFileTab.appendChild(t);var n=e.makeNewMark();e.addNewCommonMark(n),this.emailIcon.appendChild(n);var i=document.createElement("label");i.className="new_mark_text",i.innerText="새 우편 도착!",e.addNewCommonMark(i),this.btnMessageBox.appendChild(i)}},{key:"setReady",value:(c=s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setNewMarks(),o.a.instance.renderer.messageBox.addButton(this.btnMessageBox),this.addEventListeners(),e.next=5,this.initTemplateTypeList(!0);case 5:case"end":return e.stop()}},e,this)})),function(){return c.apply(this,arguments)})},{key:"render",value:(r=s()(a.a.mark(function t(n,i){var r,s,l,c,u,d,p,h,m,g,v,f,E;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this.getRenderStatus(n),s=r.contents.userProfile,i.user.isAdmin()?this.element.classList.add(R.a.ADMIN_USER):this.element.classList.remove(R.a.ADMIN_USER),i.env.adminMode?this.element.classList.add(R.a.ADMIN_MODE):this.element.classList.remove(R.a.ADMIN_MODE),i.env.devMode?this.element.classList.add(R.a.DEV_MODE):this.element.classList.remove(R.a.DEV_MODE),this.updateDownloadBtnUI(n),this.updateGuideLine(i.showGuideline,i.lockGuideline),this.updateSheetSize(),this.updateShareBtnUI(r.contents.sharedPrivate||r.contents.sharedPublic),this.btnDesignGuide.updateUI({isSelected:i.config.showDesignGuide}),this.btnPhotonGuide.updateUI({isSelected:i.config.showPhotoGuide}),this.btnAdminMode.updateUI({isSelected:i.env.adminMode}),this.btnDebugMode&&this.btnDebugMode.updateUI({isSelected:i.env.debug}),this.btnSnapMode&&this.btnSnapMode.updateUI({isSelected:i.config.useSnap}),this.isInitProfileElement){t.next=17;break}return t.next=16,this.initProfileElement(s.isLogin);case 16:this.isInitProfileElement=!0;case 17:if(!this.isChangeContentsStatus(r.contents)){t.next=25;break}return null!=this.lastRenderStatus.contents&&r.contents.logo===this.lastRenderStatus.contents.logo||(this.btnDashboard.innerHTML="",l=null,"MiriCanvas"===r.contents.logo?(l=new Image).src="/resources/image/logo/miri_logo.svg":(l=document.createElement("h1")).innerText=r.contents.logo,this.btnDashboard.appendChild(l)),this.designTitleElem.render(r.contents.projectName),t.next=22,this.initProfileElement(s.isLogin);case 22:this.renderUserProfile(s),this.initTemplateTypeList().catch(function(e){return console.error(e)}),this.updateDesignSaveStatus();case 25:if(c=i.actionQ.length,u=i.redoQ.length,o.a.instance.user.getUserProfile().isLogin?(this.btnLogin.classList.remove(R.a.SHOW),this.designSaveStatus.classList.remove(R.a.HIDE)):(this.btnLogin.classList.add(R.a.SHOW),this.designSaveStatus.classList.add(R.a.HIDE)),o.a.isCropMode()?(this.btnUndo.classList.add(R.a.DISABLE),this.btnRedo.classList.add(R.a.DISABLE),this.btnUndo.style.pointerEvents="none",this.btnRedo.style.pointerEvents="none"):(c>0?this.btnUndo.classList.remove(R.a.DISABLE):this.btnUndo.classList.add(R.a.DISABLE),u>0?this.btnRedo.classList.remove(R.a.DISABLE):this.btnRedo.classList.add(R.a.DISABLE),this.btnUndo.style.pointerEvents="",this.btnRedo.style.pointerEvents=""),d=document.createDocumentFragment(),(p=document.createElement("li")).innerText="새 페이지",d.appendChild(p),0!==P.b.getDesignInfo().getIdx()&&((h=document.createElement("li")).innerText="디자인 적용",d.appendChild(h)),c+u>0){for(m=0;m<c;m++)(g=document.createElement("li")).innerText=i.actionQ[m][0].actionType,g.className=R.a.ACTION_Q,$(g).data(e.ACTION_REPEAT_KEY,c-m),d.appendChild(g);for(v=u-1;v>=0;v--)(f=document.createElement("li")).innerText=i.redoQ[v][0].actionType,f.style.opacity="0.5",f.className=R.a.REDO_Q,$(f).data(e.ACTION_REPEAT_KEY,u-v),d.appendChild(f)}(E=document.createElement("ul")).appendChild(d),this.actionListScrollElement.setMaxHeight(30*Math.min(E.childElementCount,10)+"px"),this.actionListScrollElement.render(E),o.a.getEnv().debug?$("#btnDebug span:not(.tools_icon)").html('debug: <em style="color:#ff7362">ON</em>'):($("#btnDebug").hide(),$("#btnDebug span:not(.tools_icon)").text("debug: OFF")),this.lastRenderStatus=r;case 41:case"end":return t.stop()}},t,this)})),function(e,t){return r.apply(this,arguments)})},{key:"updateDownloadBtnUI",value:function(e){e.pages.some(function(e){return e.isStatusLoading()})?(this.btnShowDownloadTab.classList.add(R.a.DISABLE),this.btnDownload.classList.add(R.a.DISABLE)):(this.btnShowDownloadTab.classList.remove(R.a.DISABLE),this.btnDownload.classList.remove(R.a.DISABLE))}},{key:"initTemplateTypeList",value:(i=s()(a.a.mark(function e(){var t,n,i,r=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]&&r[0],n=o.a.getEnv().adminMode?Q.c.ALL:Q.c.SHEET_SIZE,e.next=4,this.sheetSizeSelectTool.loadTemplateTypeList(n,"",!1);case 4:return e.next=6,this.newDesignSizeSelectTool.loadTemplateTypeList(n,"",!1);case 6:t&&(i=A.RequestUtil.get(A.RequestParamKey.TEMPLATE_TYPE_ID),!A.StringUtil.isEmpty(i)&&this.sheetSizeSelectTool.getList().some(function(e){return e.id===i})&&this.sheetSizeSelectTool.select({id:i},!1));case 7:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)})},{key:"makeElement",value:function(){this.element.innerHTML="";var e=document.createElement("div");e.className="header_wrap",e.appendChild(this.makeMenuLeft()),e.appendChild(this.makeMenuRight()),this.element.appendChild(e)}},{key:"setTitleName",value:function(e){var t=this;A.StringUtil.isEmpty(e.trim())&&(e=P.b.getTitle()),he.a.openLoginPopup(ee.a.CHANGE_PROJECT_TITLE,function(){P.b.setTitle(e)},function(){t.docTitle.render(P.a.getDefaultTitle()),t.designTitleElem.render(P.a.getDefaultTitle())}),this.docTitle.render(e),this.designTitleElem.render(e)}},{key:"makeUserMenuWrap",value:function(){var e=this;return this.userMenuWrap=document.createElement("div"),this.userMenuWrap.className=R.a.USER_INFO,this.requireLoginLabel=document.createElement("div"),this.requireLoginLabel.innerText="로그인하기",this.requireLoginLabel.className="require_login",this.docInfoWrap=document.createElement("div"),this.docInfoWrap.className="doc_info_wrap",(this.docTitle=new Ii(function(t){return e.setTitleName(t)})).setDefaultValue(P.a.getDefaultTitle()),this.docTitle.render().classList.add("doc_title"),this.docSize=document.createElement("div"),this.docSize.className="doc_size",this.docInfoWrap.appendChild(this.docTitle.render()),this.docInfoWrap.appendChild(this.docSize),this.userMenuWrap.appendChild(this.docInfoWrap),this.userMenuWrap.addEventListener("click",function(){o.a.instance.user.getUserProfile().isLogin||he.a.openLoginPopup(ee.a.USER_MENU)}),this.userMenuWrap}},{key:"updateSheetSize",value:function(){var e=Pi.getSheetSize();A.StringUtil.isEmpty(e)||(this.labelSheetSize.innerText=e)}},{key:"makeBtnShowSheetResizePopup",value:function(){var e=this,t=this.btnResizeSheet=document.createElement("button");t.classList.add(R.a.BUTTON_TOOL_TAB_TOGGLE),t.type="button",t.id="btnResizeSheet",this.option.resizePage||t.classList.add(R.a.HIDE);var n=this.labelSheetSize=document.createElement("span");return t.appendChild(n),Object(K.setToolsIcon)(t,K.ToolsIcon.GREATER_THAN,!0,"right",90),$(t).on("click",function(){e.closeTab(),e.sheetSizeSelectTool.dispatchSheetSizeUpdate(),o.a.dispatch(new l.c(function(t){t.templateType&&e.sheetSizeSelectTool.select({id:t.templateType.id},!1)})),Ee.a.scrollOff()}),t}},{key:"makeMenuLeft",value:function(){var t=this,n=document.createElement("div");n.className="header_left",o.a.getEnv().browser.isMobile()&&n.classList.add(R.a.MOBILE);var i=document.createElement("div");i.className="logo";var r=new Image;r.src="/resources/image/logo_miri.png";var c=new Image;c.src="/resources/image/logo/mobile_logo_m.svg";var u=A.CRM.get(H.a.MYSPACE_PAGE_PATH),d=document.createElement("a");d.className="small_logo",this.option.mySpaceOpenInNewTab?d.addEventListener("click",function(){window.open(u)}):d.href=u,d.appendChild(c),i.appendChild(d),this.btnDashboard=document.createElement("a"),this.btnDashboard.className="default_logo",this.option.mySpaceOpenInNewTab?this.btnDashboard.addEventListener("click",function(){window.open(u)}):this.btnDashboard.href=u,this.btnDashboard.appendChild(r),i.appendChild(this.btnDashboard),n.appendChild(i);var p=document.createElement("div");p.className=R.a.DESIGN_HISTORY,this.btnDesignHistory=qi(null,"btnDesignHistory",H.a.HEADER_DESIGN_HISTORY,function(){he.a.openLoginPopup(ee.a.HISTORY,s()(a.a.mark(function e(){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.closeTab(),Ee.a.scrollOff(),0!==(n=P.b.getDesignInfo().getIdx())){e.next=7;break}return e.next=6,P.b.save({categoryIdx:Ei.a.getSaveCategoryIdx()});case 6:n=P.b.getDesignInfo().getIdx();case 7:fi.a.setDesignIdx(n);case 8:case"end":return e.stop()}},e)})))}),this.btnDesignHistory.classList.add(R.a.BUTTON_TOOL_TAB_TOGGLE);var h=Ji(R.a.DESIGN_HISTORY_VIEW),m=document.createElement("div");m.className=R.a.DESIGN_HISTORY_PREVIEW,h.appendChild(fi.a.render(m,this.option.showHistoryCopyButton)),fi.a.addCloseEventListener(this.btnDesignHistory),p.appendChild(this.btnDesignHistory),p.appendChild(h),p.appendChild(m),n.appendChild(p);var g=document.createElement("div");g.className=R.a.DESIGN_SETTINGS;var v=this.btnShowFileMenu=qi(null,"btnShowDesignSettingList",H.a.HEADER_DESIGN_SETTINGS);v.classList.add(R.a.BUTTON_TOOL_TAB_TOGGLE),g.appendChild(v);var f=Ji(R.a.DESIGN_SETTINGS_VIEW);f.appendChild(this.makeTabBackground());var E=document.createElement("div");E.className="file_menu_tab_scroll",E.appendChild(this.makeUserMenuWrap());var T="click.".concat(A.StringUtil.random()),y="mousedown.".concat(A.StringUtil.random()),I="mousedown.".concat(A.StringUtil.random()),L=qi(K.ToolsIcon.NEW_FILE,"btnNewDesign",H.a.HEADER_MAKE_NEW_DESIGN,s()(a.a.mark(function e(){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Z.dispatchSheetSizeUpdate(),t.closeTab(),Ee.a.scrollOff(),X.classList.add(R.a.ACTIVE),n=!1,$(X).on(I,function(e){e.stopPropagation(),n=!0}),X.focus({preventScroll:!0}),$(document.body).on(y,function(){n=!1}),$(document.body).on(T,function(){n||(Ee.a.scrollOn(),$(document.body).off(T).off(y).trigger("click"),$(X).off(I),X.classList.remove(R.a.ACTIVE))});case 9:case"end":return e.stop()}},e)})));L.classList.add(R.a.ROW_BORDER_TOP),this.option.makeNewDocument||L.classList.add(R.a.HIDE),E.appendChild(L);var k=qi(K.ToolsIcon.COPY,"btnCopyDesign",H.a.HEADER_COPY_DESIGN,s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.closeTab(),Xi.a.check(sn.b.COPY_DESIGN,s()(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(he.a.openLoginPopup(ee.a.COPY_DESIGN)){e.next=7;break}if(0!==(t=P.b.getDesignInfo()).getIdx()){e.next=6;break}return alert("디자인을 저장중입니다 잠시 후 다시 복사해주세요."),P.b.save({categoryIdx:Ei.a.getSaveCategoryIdx()}).catch(function(e){0}),e.abrupt("return");case 6:P.b.openCopyDesignWindow(t.getIdx()).catch(function(e){0});case 7:case"end":return e.stop()}},e)})));case 2:case"end":return e.stop()}},e)})));this.option.copyDocument||k.classList.add(R.a.HIDE),E.appendChild(k);var _=qi(K.ToolsIcon.SAVE,"btnSave",H.a.HEADER_SAVE,function(){t.closeTab(),he.a.openLoginPopup(ee.a.SAVE)||P.b.save({categoryIdx:Ei.a.getSaveCategoryIdx()}).catch(function(e){console.error(e),alert(A.CRM.get(H.a.TOOLS_POPUP_DESIGN_SAVE_CREATE_FAIL_MSG))})});this.option.saveToMySpace||_.classList.add(R.a.HIDE),this.designSaveStatus2=document.createElement("span"),this.designSaveStatus2.classList.add(R.a.DESIGN_SAVE_STATUS),_.appendChild(this.designSaveStatus2),E.appendChild(_);var w=qi(K.ToolsIcon.DOWNLOAD,"fileTabDownload",H.a.HEADER_DOWNLOAD,function(){return t.btnDownload.click()});w.className="file_expand_menu",w.classList.add(R.a.ROW_BORDER_TOP),this.option.download||w.classList.add(R.a.HIDE),E.appendChild(w);var b=qi(K.ToolsIcon.SHARE,"fileTabShare",H.a.HEADER_SHARE,function(){t.closeTab(),t.btnShare.click()});b.className="file_expand_menu",this.option.share||b.classList.add(R.a.HIDE),E.appendChild(b);var S=this.btnNewProject=qi(K.ToolsIcon.PROJECT,"btnNewProject",H.a.HEADER_NEW_PROJECT,s()(a.a.mark(function e(){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.closeTab(),he.a.openLoginPopup(ee.a.NEW_PROJECT)){e.next=13;break}return e.prev=2,e.next=5,Li.a.create({title:"제목을 입력해주세요."});case 5:n=e.sent,window.open("".concat(A.CRM.getBasePath(),"project/").concat(btoa(String(n.idx))),"_blank"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0),alert("디자인 프로젝트 생성에 실패하였습니다.\n잠시후 다시 시도해 주시기 바랍니다.");case 13:case"end":return e.stop()}},e,null,[[2,9]])})));S.classList.add(R.a.ROW_BORDER_TOP),E.appendChild(S);var O=qi(K.ToolsIcon.RULER,"fileTabResizeSheet",H.a.HEADER_RESIZE_SHEET,function(){return te.click()});if(O.classList.add(R.a.ROW_BORDER_TOP),this.option.resizePage||O.classList.add(R.a.HIDE),E.appendChild(O),this.option.saveToDesignLibrary){var C=this.makeSaveToDesignLibraryButton();C.classList.add(R.a.ROW_BORDER_TOP),C.appendChild(this.designSaveStatus2),E.appendChild(C)}if(this.option.saveToCart&&E.appendChild(this.makeSaveToCartButton()),this.option.saveUpdatedFromDesignLibrary||this.option.saveUpdatedFromCart){var D=this.makeSaveUpdatedButton();D.classList.add(R.a.ROW_BORDER_TOP),E.appendChild(D)}var M=qi(K.ToolsIcon.RESTORE,"fileTabDesignHistory",H.a.HEADER_DESIGN_HISTORY,function(){return t.btnDesignHistory.click()});M.classList.add(R.a.ROW_BORDER_TOP),E.appendChild(M);var N=qi(K.ToolsIcon.PRESENTATION,"fileTabPresent",H.a.HEADER_PRESENTATION,function(){return t.btnPresent.click()});this.option.presentation||N.classList.add(R.a.HIDE),E.appendChild(N);var x=this.settingTab.getElement();x.appendChild(this.makeTabBackground());var B=this.menuSetting=qi(K.ToolsIcon.SETTINGS,"fileTabSetting",H.a.HEADER_SETTING,function(){he.a.openLoginPopup(ee.a.SETTING,function(){t.closeTab(),t.settingTab.show(),Ee.a.scrollOff()})});B.classList.add("file_expand_menu"),o.a.isMobileMode()||B.classList.add(R.a.ROW_BORDER_TOP),x.id="settingLayer",E.appendChild(B);var U=this.btnMessageBox=qi(null,null,H.a.HEADER_MESSAGE_BOX,function(){t.closeTab()});U.classList.add(R.a.ROW_BORDER_TOP,"file_expand_menu"),this.emailIcon=Object(K.setToolsIcon)(U,K.ToolsIcon.EMAIL),this.option.messageBox&&E.appendChild(U);var F=qi(null,"helpCenter",H.a.HEADER_HELP,null);F.className=R.a.HELP_CENTER,F.classList.add("file_expand_menu"),Object(K.setToolsIcon)(F,K.ToolsIcon.MESSAGE_ROUNDED),F.addEventListener("click",function(){o.a.dispatch(new l.c(function(e,n,i){t.closeTab(),i.helpCenter.openHelpPopup(F)}))}),E.appendChild(F);var W=qi(K.ToolsIcon.USER_OUTLINE,"btnMySpace",H.a.HEADER_MY_SPACE,s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.closeTab(),he.a.openLoginPopup(ee.a.MOVE_MYSPACE)||(location.href=ft.MyspaceUtil.getUrlWithHash());case 2:case"end":return e.stop()}},e)})));W.classList.add(R.a.ROW_BORDER_TOP),this.option.moveToMySpace||W.classList.add(R.a.HIDE),E.appendChild(W),f.appendChild(E),g.appendChild(f),g.appendChild(x);var V=this.settingTab.getEditorSettingElement();V.appendChild(this.makeTabBackground()),V.id="editorSetting",g.appendChild(V);var Y=this.settingTab.getGuidelineElement();function j(e,t){Ee.a.scrollOn(),X.classList.remove(R.a.ACTIVE);var n=Qn.a.getPixelLimitMax(e,si.a.getMaxSheetSize(o.a.getEnv().devMode)),i=(new A.RequestParam).set(A.RequestParamKey.SHEET_W,String(n.width)).set(A.RequestParamKey.SHEET_H,String(n.height)).set(A.RequestParamKey.TEMPLATE_TYPE_ID,t?t.id:"");e.unit!==Q.b.PX&&i.set(A.RequestParamKey.SIZE_UNIT,e.unit).set(A.RequestParamKey.DPI,String(e.dpi)),window.open("".concat(A.CRM.getBasePath(),"design?").concat(i.serialize()),"_blank")}Y.appendChild(this.makeTabBackground()),Y.id="guidelinePopup",g.appendChild(Y);var X=this.newDesignTab=document.createElement("div");X.appendChild(this.makeTabBackground()),X.className=R.a.NEW_DESIGN_SIZE_VIEW,X.tabIndex=-1;var Z=this.newDesignSizeSelectTool=new hi(function(e){j({width:e.width,height:e.height,unit:e.unit,dpi:Q.d.DEFAULT_DPI},e)},Q.c.SHEET_SIZE,{btnText:"새 디자인 만들기",callback:function(e){j(e)}},!1);X.appendChild(Z.render()),$(X).on("click keydown",function(e){return e.stopPropagation()}),g.appendChild(X),n.appendChild(g);var q=qi(null,"btnShowSettingPopup",H.a.HEADER_SETTINGS,function(){return t.menuSetting.click()});n.appendChild(q);var J=document.createElement("div"),te=this.makeBtnShowSheetResizePopup();J.appendChild(te);var ne=Ji(R.a.RESIZE_SHEET_VIEW);ne.appendChild(this.makeTabBackground()),this.sheetSizeSelectTool=Di(function(){Ee.a.scrollOn(),te.classList.remove(R.a.ACTIVE)},mi.APP_HEADER),ne.appendChild(this.sheetSizeSelectTool.render()),J.appendChild(ne),n.appendChild(J),this.btnUndo=qi(K.ToolsIcon.UNDO,"btnUndo",null,function(){o.a.dispatch(new l.c(function(){var e=s()(a.a.mark(function e(t,n,i){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.rollback();case 2:return P.b.setSaveStatus(!P.b.isSaving()&&P.b.isSaved()?P.c.DEFAULT:P.c.SAVE_REQUIRE),e.next=5,(new Ce.d).commitAction(t,n,i);case 5:return e.next=7,i.renderAll(t,n);case 7:case"end":return e.stop()}},e)}));return function(t,n,i){return e.apply(this,arguments)}}()))}),z.a.createTooltip(this.btnUndo,z.b.B,{title:{shortcut:H.a.HEADER_TOOLTIP_UNDO_SHORTCUT}}),n.appendChild(this.btnUndo),this.btnRedo=qi(K.ToolsIcon.REDO,"btnRedo",null,function(){o.a.dispatch(new l.c(function(){var e=s()(a.a.mark(function e(t,n,i){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.redo();case 2:return P.b.setSaveStatus(!P.b.isSaving()&&P.b.isSaved()?P.c.DEFAULT:P.c.SAVE_REQUIRE),e.next=5,i.renderAll(t,n);case 5:case"end":return e.stop()}},e)}));return function(t,n,i){return e.apply(this,arguments)}}()))}),z.a.createTooltip(this.btnRedo,z.b.B,{title:{shortcut:H.a.HEADER_TOOLTIP_REDO_SHORTCUT}}),n.appendChild(this.btnRedo);var ie=this.designTitleElem=new Ii(function(e){return t.setTitleName(e)});ie.setDefaultValue(P.a.getDefaultTitle()),n.appendChild(ie.render()),this.btnAdminMode=new ii.a(function(){return vi.a.setConfig(yi.a.IS_ADMIN,String(!o.a.instance.env.adminMode))},{icon:K.ToolsIcon.ADMIN}).addClass(R.a.ROW_BORDER_TOP).addClass(R.a.ADMIN_BUTTON);var ae=document.createElement("div");ae.className=R.a.ACTION_LIST;var re=qi(K.ToolsIcon.TIME,"btnShowActionList",H.a.HEADER_ACTION_LIST);Object(K.setToolsIcon)(re,K.ToolsIcon.CARET,!0),re.classList.add(R.a.BUTTON_TOOL_TAB_TOGGLE),ae.appendChild(re),this.actionListTab=Ji(R.a.ACTION_LIST_VIEW),this.actionListScrollElement=new G.a(!1,!0,"300px"),this.actionListTab.appendChild(this.actionListScrollElement.render()),ae.appendChild(this.actionListTab);var se=document.createElement("div");se.className=R.a.ITEM_ORDER_LIST;var oe=qi(K.ToolsIcon.LAYER_FRONT,"btnShowItemList",H.a.HEADER_ITEM_LIST);oe.classList.add(R.a.BUTTON_TOOL_TAB_TOGGLE),Object(K.setToolsIcon)(oe,K.ToolsIcon.CARET,!0),this.itemOrderListTab=Ji(R.a.ITEM_ORDER_LIST_VIEW),this.itemOrderListScrollElement=new G.a(!1,!0,"300px"),this.itemOrderListTab.appendChild(this.itemOrderListScrollElement.render()),se.appendChild(oe),se.appendChild(this.itemOrderListTab);var le=document.createElement("div");le.className=R.a.UNICORN_SETTINGS;var ce=qi(K.ToolsIcon.SETTINGS,"btnSettings",H.a.HEADER_SETTINGS);ce.classList.add(R.a.BUTTON_TOOL_TAB_TOGGLE),this.settingsTabElement=Ji(R.a.UNICORN_SETTINGS_VIEW);var ue=new ii.a(function(e){o.a.dispatch(new l.c(function(e,t){ai.a.openPopup(e.pages[t.renderPageIdx].sheetSize)},!1))},{icon:K.ToolsIcon.RULER,titleKey:H.a.HEADER_EDIT_SIZE}).addClass(R.a.BUTTON_EDIT_SIZE);if(this.btnDesignGuide=new ii.a(function(e){o.a.dispatch(new l.c(function(t,n,i){n.config.showDesignGuide=!0===e,n.pageController.getPageRenderer(t.pages[n.renderPageIdx]).setDesignGuide(),i.renderAppHeader(t,n)},!1))},{icon:K.ToolsIcon.CHECK,titleKey:H.a.HEADER_DESIGN_GUIDE}).addClass(R.a.ROW_BORDER_TOP),this.btnPhotonGuide=new ii.a(function(e){o.a.dispatch(new l.c(function(t,n,i){n.config.showPhotoGuide=!0===e,i.renderAppHeader(t,n)},!1))},{icon:K.ToolsIcon.CHECK,titleKey:H.a.HEADER_PHOTO_GUIDE}).addClass(R.a.PHOTO_GUIDE),o.a.instance.env.adminMode){this.btnSnapMode=new ii.a(function(e){o.a.dispatch(new l.c(function(e,t,n){t.config.useSnap=!t.config.useSnap},!0))},{icon:K.ToolsIcon.HYPERLINK,titleKey:H.a.HEADER_SNAP_MODE});var de=document.createElement("input");de.type="text",de.value=""+Zn.SNAP_TERM,de.style.width="30px",de.addEventListener("keypress",function(e){var t=isNaN(de.value)?0:Number(de.value);Zn.SNAP_TERM=t,de.value=""+t}),this.btnSnapMode.wrap.appendChild(de)}this.settingsTabElement.appendChild(ue.render()),this.settingsTabElement.appendChild(this.btnDesignGuide.render()),this.settingsTabElement.appendChild(this.btnPhotonGuide.render());var pe=document.createElement("div");function me(t,n){n&&vi.a.setConfig(yi.a.UNICORN_THEME,t).catch(function(e){return console.error(e)});for(var i=0,a=pe.children.length;i<a;i++){var r=pe.children.item(i);r.getAttribute(e.THEME_KEY)===t?r.classList.add(R.a.ACTIVE):r.classList.remove(R.a.ACTIVE)}}return pe.className="theme_block border_top",[1,2,3,4,5].forEach(function(t){var n=document.createElement("p");n.setAttribute(e.THEME_KEY,""+t);var i=document.createElement("span");n.appendChild(i);var a="".concat(A.CRM.get(H.a.HEADER_THEME_SET)," 0").concat(t);n.appendChild(document.createTextNode(a)),pe.appendChild(n)}),$(pe).on("click","p",function(t){me(t.target.getAttribute(e.THEME_KEY),!0)}),me(vi.a.getConfigValue(yi.a.UNICORN_THEME),!1),this.settingsTabElement.appendChild(pe),this.btnDebugMode&&this.settingsTabElement.appendChild(this.btnDebugMode.render()),this.btnSnapMode&&this.settingsTabElement.appendChild(this.btnSnapMode.render()),le.appendChild(ce),le.appendChild(this.settingsTabElement),n}},{key:"makeTabBackground",value:function(){var e=this,t=document.createElement("div");return t.className="tab_background",t.addEventListener("click",function(){return e.closeTab()}),t}},{key:"makeSaveToDesignLibraryButton",value:function(){var e=this;return Qi(K.ToolsIcon.INBOX_OUTLINE,Fi.BTN_SAVE_MY_LIBRARY,H.a.HEADER_SAVE_MY_LIBRARY,s()(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.clickSaveDesignLibrary();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)})))}},{key:"makeSaveToCartButton",value:function(){var e=this;return Qi(K.ToolsIcon.CART_OUTLINE,Fi.BTN_SAVE_CART,H.a.HEADER_SAVE_CART,function(){return e.clickSaveCart()})}},{key:"makeMiniSaveToCartButton",value:function(){var e=this;return Qi(K.ToolsIcon.CART_OUTLINE,Fi.BTN_MINI_SAVE_CART,"",function(){return e.clickSaveCart()})}},{key:"makeSaveUpdatedButton",value:function(){var e=this;return Qi(K.ToolsIcon.CHECK,Fi.BTN_DONE_UPDATE,H.a.HEADER_DONE_UPDATE,function(){return e.clickDoneUpdate()})}},{key:"makeMiniSaveUpdatedButton",value:function(){var e=this;return Qi(K.ToolsIcon.CHECK,Fi.BTN_MINI_DONE_UPDATE,"",function(){return e.clickDoneUpdate()})}},{key:"closeTab",value:function(){Ee.a.scrollOn(),this.btnShowFileMenu&&this.btnShowFileMenu.classList.remove(R.a.ACTIVE),this.btnResizeSheet&&this.btnResizeSheet.classList.remove(R.a.ACTIVE),this.newDesignTab&&this.newDesignTab.classList.remove(R.a.ACTIVE),this.settingTab.hide(),this.settingTab.editorSettingPopupHide(),this.settingTab.guidelinePopupHide()}},{key:"getSharePopupOffset",value:function(){var e=$(this.btnShare).offset();return{left:e.left+this.btnShare.clientWidth,top:e.top+this.btnShare.clientHeight+5}}},{key:"openTitleSettingPopup",value:function(){var e=this.getSharePopupOffset();Yi.open(e)}},{key:"openDesignSharePopup",value:function(){var e=P.b.getDesignInfo().getIdx(),t=this.getSharePopupOffset();ft.DesignSharePopup.open(e,t)}},{key:"btnDownloadClickEvent",value:function(e,t){var n=this;this.closeTab(),Xi.a.check(sn.b.DOWNLOAD,function(){n.downloadPopup.setPositionOffsetElement(e),o.a.dispatch(new l.c(function(e){he.a.openLoginPopup(ee.a.OPEN_DOWNLOAD_POPUP,function(){n.downloadPopup.open(t,e.pages.length)})}))})}},{key:"btnPresentClickEvent",value:function(){this.closeTab(),Xi.a.check(sn.b.PRESENTATION,function(){o.a.dispatch(new l.c(function(e){(new $i.a).play(e).catch(function(e){return console.error(e)})}))})}},{key:"makeMenuRight",value:function(){var e=this,t=document.createElement("div");t.className="header_right";var n=this.btnPresent=qi(K.ToolsIcon.PRESENTATION,"btnPresentation");n.addEventListener("click",function(){e.btnPresentClickEvent()}),z.a.createTooltip(n,z.b.B,{title:{name:H.a.HEADER_TOOLTIP_PRESENT_TITLE}}),this.option.presentation||n.classList.add(R.a.HIDE),t.appendChild(n),this.btnLogin=Ki.makeLoginButton(),this.option.loginView||this.btnLogin.classList.add(R.a.HIDE),t.appendChild(this.btnLogin),this.designSaveStatus=document.createElement("div"),this.designSaveStatus.className=R.a.DESIGN_SAVE_STATUS;var i=document.createElement("p");i.className=R.a.SAVE_REQUIRE,i.innerText=A.CRM.get(H.a.HEADER_SAVE_REQUIRE),this.designSaveStatus.appendChild(i);var r=document.createElement("p");r.className=R.a.SAVE_FAILED,r.innerText=A.CRM.get(H.a.HEADER_SAVE_FAILED),this.designSaveStatus.appendChild(r);var o=document.createElement("p");o.className=R.a.SAVE_REQUEST,o.appendChild(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=document.createElement("span");t.className=R.a.RING_LOADER,t.appendChild(document.createElement("span")),t.appendChild(document.createElement("span")),t.appendChild(document.createElement("span")),t.appendChild(document.createElement("span"));var n=document.createElement("label");return n.innerText=e,t.appendChild(n),t}(A.CRM.get(H.a.HEADER_SAVE_REQUEST))),this.designSaveStatus.appendChild(o);var l=document.createElement("p");l.className=R.a.SAVE_COMPLETE;var c=document.createElement("span");c.innerText=this.option.useTempSaveStatusText?A.CRM.get(H.a.HEADER_SAVE_TEMP_COMPLETE):A.CRM.get(H.a.HEADER_SAVE_COMPLETE),Object(K.setToolsIcon)(l,K.ToolsIcon.CHECK),l.appendChild(c),this.designSaveStatus.appendChild(l),t.appendChild(this.designSaveStatus),this.btnSaveDesign=qi(null,"btnSaveDesign","저장",function(){he.a.openLoginPopup(ee.a.SAVE_ICON)||P.b.save({categoryIdx:Ei.a.getSaveCategoryIdx()}).catch(function(e){console.error(e),alert(A.CRM.get(H.a.TOOLS_POPUP_DESIGN_SAVE_CREATE_FAIL_MSG))})});var u="".concat(A.CRM.get(H.a.HEADER_SAVE),"\n        ").concat(A.CRM.get(H.a.HEADER_SAVE_DESIGN_SHORTCUT));if(z.a.createTooltip(this.btnSaveDesign,z.b.B,{title:{shortcut:u}}),this.option.saveToMySpace||this.btnSaveDesign.classList.add(R.a.HIDE),t.appendChild(this.btnSaveDesign),this.option.saveToDesignLibrary){var d=this.makeSaveToDesignLibraryButton();d.classList.add(R.a.ROW_BORDER_TOP),t.appendChild(d)}if(this.option.saveToCart&&t.appendChild(this.makeSaveToCartButton()),this.option.saveUpdatedFromDesignLibrary||this.option.saveUpdatedFromCart){var p=this.makeSaveUpdatedButton();p.classList.add(R.a.ROW_BORDER_TOP),t.appendChild(p)}var h,m=this.btnShowFileTab=document.createElement("div");m.className="icon_dddot",m.addEventListener("click",function(){e.btnShowFileMenu.classList.contains(R.a.ACTIVE)?Ee.a.scrollOn():Ee.a.scrollOff(),e.btnShowFileMenu.classList.toggle(R.a.ACTIVE)}),t.appendChild(m),Yi.addTitleSettingListener(function(t){e.setTitleName(t),e.openDesignSharePopup()},!0),ft.DesignSharePopup.setHostUrl(A.CRM.get(H.a.SHARE_HOST)),ft.DesignSharePopup.addPublicShareListener(function(t,n){P.b.setSharedPublic(n),e.updateShareBtnUI(n)}),this.btnShare=qi(K.ToolsIcon.SHARE,"btnShare",null,function(t){Xi.a.check(sn.b.SHARE,function(){Yi.setPositionOffsetElement(e.btnShare),ft.DesignSharePopup.setPositionOffsetElement(e.btnShare),he.a.openLoginPopup(ee.a.SHARE,s()(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.b.save({categoryIdx:Ei.a.getSaveCategoryIdx()});case 2:P.b.getTitle()!==P.a.getDefaultTitle()||P.b.getSharedPrivate()||P.b.getSharedPublic()?e.openDesignSharePopup():e.openTitleSettingPopup();case 3:case"end":return t.stop()}},t)})))})}),this.btnShareTitle=document.createElement("span"),this.btnShare.appendChild(this.btnShareTitle),this.updateShareBtnUI(),this.option.share||this.btnShare.classList.add(R.a.HIDE),t.appendChild(this.btnShare);var g=this.btnDownload=qi(K.ToolsIcon.DOWNLOAD,"btnDownload",H.a.HEADER_DOWNLOAD,function(t){var n=(h=$(g).offset()).left+g.clientWidth,i=h.top+g.clientHeight+5;e.btnDownloadClickEvent(g,{left:n,top:i})});this.option.download||g.classList.add(R.a.HIDE),t.appendChild(g);var v=this.downloadPopup=ue.instance;v.setPositionOffsetElement(g),v.addDownloadButtonEventListener(function(){e.setDownloadPopupEventListener()});var f=this.btnShowDownloadTab=document.createElement("div");return f.className="btn_small_download",Object(K.setToolsIcon)(f,K.ToolsIcon.UPLOAD),f.addEventListener("click",function(){e.btnDownloadClickEvent(f,{right:20,top:50})}),this.option.download||f.classList.add(R.a.HIDE),t.appendChild(f),this.option.saveToCart&&t.appendChild(this.makeMiniSaveToCartButton()),(this.option.saveUpdatedFromDesignLibrary||this.option.saveUpdatedFromCart)&&t.appendChild(this.makeMiniSaveUpdatedButton()),t}},{key:"setDownloadPopupEventListener",value:function(){var e=this.btnDownload,t=Vi.a.instance;t.addStartEventListener(function(){e.classList.add(R.a.DISABLE)}),t.addCancelEventListener(function(){e.classList.remove(R.a.DISABLE),gi.a.cancel()}),gi.a.addDownloadDoneEventList(function(){e.classList.remove(R.a.DISABLE),t.close()})}},{key:"updateShareBtnUI",value:function(e){e?(this.btnShare.classList.add("sharing"),this.btnShareTitle.innerText="공유중"):(this.btnShare.classList.remove("sharing"),this.btnShareTitle.innerText="공유")}},{key:"initProfileElement",value:(n=s()(a.a.mark(function e(t){var n,i,r,s,l,c,u;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((n=document.createElement("button")).type="button",!t){e.next=8;break}return e.next=5,Ti.a.getSelectedTeam();case 5:e.t0=e.sent.name,e.next=9;break;case 8:e.t0=null;case 9:return i=e.t0,e.next=12,ea(t,i);case 12:r=e.sent,n.appendChild(r),this.userMenuWrap.innerHTML="",this.userMenuWrap.appendChild(n),n.addEventListener("click",function(){o.a.instance.user.getUserProfile().isLogin&&(location.href=ft.MyspaceUtil.getUrlWithHash())}),t?(s=function(e){var t=document.createElement("span");return t.innerText=e,t},this.docTitle.render(P.b.getDesignInfo().getTitle()),this.docSize.innerHTML="",l=Pi.getSheetSize(),A.StringUtil.isEmpty(l)||(this.docSize.appendChild(s(l)),this.userMenuWrap.appendChild(this.docInfoWrap)),this.userMenuWrap.appendChild(this.docInfoWrap),c=Ti.a.getSelectedTeamScope(),z.a.createTooltip(r,z.b.R,{title:{name:"".concat(i," > ").concat(c===ft.TeamScope.TEAM?"팀 작업":"개인 작업")}}),c===ft.TeamScope.TEAM&&((u=document.createElement("div")).className="doc_type",u.setAttribute("data-type",c),this.userMenuWrap.appendChild(u))):this.userMenuWrap.appendChild(this.requireLoginLabel);case 18:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"renderUserProfile",value:function(e){e.isLogin&&(e.newMessageCount>0?this.userMenuWrap.setAttribute("data-new-message",""):this.userMenuWrap.removeAttribute("data-new-message"))}},{key:"addEventListeners",value:function(){this.element&&this.element.addEventListener("click",function(){o.a.dispatch(new Fe.d)}),$(this.actionListTab).on("click","li",function(t){var n=$(this),i=n.data(e.ACTION_REPEAT_KEY);n.hasClass(R.a.ACTION_Q)?o.a.dispatch(new l.c(function(){var e=s()(a.a.mark(function e(t,n,r){var s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s=0;case 1:if(!(s<i)){e.next=10;break}return e.next=4,n.rollback();case 4:return P.b.setSaveStatus(!P.b.isSaving()&&P.b.isSaved()?P.c.DEFAULT:P.c.SAVE_REQUIRE),e.next=7,r.renderAll(t,n);case 7:s++,e.next=1;break;case 10:case"end":return e.stop()}},e)}));return function(t,n,i){return e.apply(this,arguments)}}())):n.hasClass(R.a.REDO_Q)&&o.a.dispatch(new l.c(function(){var e=s()(a.a.mark(function e(t,n,r){var s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s=0;case 1:if(!(s<i)){e.next=10;break}return e.next=4,n.redo();case 4:return P.b.setSaveStatus(!P.b.isSaving()&&P.b.isSaved()?P.c.DEFAULT:P.c.SAVE_REQUIRE),e.next=7,r.renderAll(t,n);case 7:s++,e.next=1;break;case 10:case"end":return e.stop()}},e)}));return function(t,n,i){return e.apply(this,arguments)}}()))})}},{key:"getRenderStatus",value:function(e){var t=e,n=t.pages[o.a.instance.renderPageIdx].getAllSingleItems().reduce(function(e,t){return e+t.tbpeId+t.props.getRevision()+t.groupId},""),i=P.b.getDesignInfo(),a=t.pages.map(function(e){return e.title});return{position:null,contents:{logo:o.a.instance.config.logo,userProfile:o.a.instance.user.getUserProfile(),itemsOrderKey:n,designIdx:i.getIdx(),projectName:i.getTitle(),adminMode:o.a.instance.env.adminMode,devMode:o.a.instance.env.devMode,sizeOption:o.a.instance.option.size,pageTitleList:a,sharedPrivate:i.getSharedPrivate(),sharedPublic:i.getSharedPublic()}}}},{key:"isChangeContentsStatus",value:function(e){var t=this.lastRenderStatus.contents,n=!1;return t&&(n=t.pageTitleList.some(function(t){return!e.pageTitleList.includes(t)})),null==t||t.userProfile!==e.userProfile||t.logo!==e.logo||t.designIdx!==e.designIdx||t.projectName!==e.projectName||t.adminMode!==e.adminMode||t.devMode!==e.devMode||t.sizeOption!==e.sizeOption||n}},{key:"isChangePositionStatus",value:function(e){return!1}},{key:"makeMessageModal",value:function(){var t=this,n=document.createElement("div"),i=document.createElement("p");i.innerText=A.CRM.get(H.a.USER_MESSAGE_TITLE);var a=document.createElement("div");this.messageModalScrollElement=new G.a(!1,!0,"200px"),a.appendChild(this.messageModalScrollElement.render()),n.appendChild(i),n.appendChild(a),this.messageModal=document.createElement("div"),this.messageModal.className=R.a.USER_MESSAGE_MODAL,this.messageModal.appendChild(n);var r=document.createElement("button");Object(K.setToolsIcon)(r,K.ToolsIcon.CLOSE),n.appendChild(r),$(a).on("click","a",function(n){o.a.instance.user.messageList[$(n.target).index()].doRead(),n.target.classList.add(e.MESSAGE_READ_FLAG),t.renderUserProfile(o.a.instance.user.getUserProfile())}),n.addEventListener("click",function(e){return e.stopPropagation()});var s=function(e){e.stopPropagation(),t.messageModal.parentNode.removeChild(t.messageModal)};r.addEventListener("click",s),this.messageModal.addEventListener("click",s)}},{key:"updateDesignSaveStatus",value:function(){var e=P.b.getSaveStatus();this.designSaveStatus.setAttribute("data-status",e),this.designSaveStatus2.setAttribute("data-status",o.a.instance.user.isLogin()?e:""),e===P.c.SAVE_COMPLETE&&this.option.useTempSaveStatusText?this.designSaveStatus.classList.add(R.a.LEFT):this.designSaveStatus.classList.remove(R.a.LEFT)}},{key:"getElement",value:function(){return this.element}},{key:"clickSaveCart",value:function(){this.closeTab(),Xi.a.check(sn.b.SAVE,function(){o.a.dispatch(new l.c(function(e,t,n){n.rightSection.printoutFinalConfirm.toggleShow(ji.a.NEW_CART)}))})}},{key:"clickDoneUpdate",value:function(){this.closeTab(),o.a.dispatch(new l.c(function(e,t,n){n.rightSection.printoutFinalConfirm.toggleShow(ji.a.UPDATE)}))}},{key:"clickSaveDesignLibrary",value:(t=s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.closeTab(),Xi.a.check(sn.b.SAVE,s()(a.a.mark(function e(){var t,n,i,r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.b.save({categoryIdx:Ei.a.getSaveCategoryIdx()});case 2:t=document.createElement("span"),(n=document.createElement("div")).classList.add("round_icon"),Object(K.setToolsIcon)(n,K.ToolsIcon.CHECK),t.appendChild(n),i=new ft.NotificationPusher({}),r={type:ft.PusherPopupType.CUSTOM,customTypeElement:t,title:"저장 완료!",content:"저장한 디자인은 나의 디자인함에서 확인할 수 있습니다."},i.pushNotification(r,5e3);case 10:case"end":return e.stop()}},e)})));case 2:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"updateGuideLine",value:function(e,t){var n=this,i=this.settingTab;i&&(e?i.showGuideLine():i.hideGuideLine(),t?i.lockeGuideLine():i.unlockGuideLine(),o.a.dispatch(new l.c(function(e,t,i){n.settingTab.updateLayerCheckBox(i.rightSection.layerToolManager.isShowLayerToolbox())})))}}]),e}();function qi(e,t,n,i){var a=document.createElement("button");if(a.type="button",t&&(a.id=t),n){var r=document.createElement("span");r.innerText=A.CRM.get(n)||n,a.appendChild(r)}return i&&a.addEventListener("click",i),e&&Object(K.setToolsIcon)(a,e),a}function Qi(e,t,n,i){var a=document.createElement("button");if(a.type="button",t&&(a.className=t),n){var r=document.createElement("span");r.innerText=A.CRM.get(n)||n,a.appendChild(r)}return i&&a.addEventListener("click",i),e&&Object(K.setToolsIcon)(a,e),a}function Ji(e){var t=document.createElement("div");t.className="".concat(R.a.TOOLS_TAB," ").concat(e);for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return i.forEach(function(e){return t.appendChild(e)}),t}function ea(){return ta.apply(this,arguments)}function ta(){return(ta=s()(a.a.mark(function e(){var t,n,i,r,s=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=!(s.length>0&&void 0!==s[0])||s[0],n=s.length>1?s[1]:void 0,(i=document.createElement("div")).className=t?"avatar ".concat(R.a.LOGIN_USER):"favicon",t?(r=new ki(n).render(),i.appendChild(r)):Object(K.setToolsIcon)(i,K.ToolsIcon.USER_PROFILE),e.abrupt("return",i);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}m()(Zi,"ACTION_REPEAT_KEY","repeat"),m()(Zi,"THEME_KEY","data-theme"),m()(Zi,"MESSAGE_READ_FLAG","read");var na=function(){function e(){u()(this,e)}var t;return p()(e,null,[{key:"getList",value:(t=s()(a.a.mark(function e(){var t,n,i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.instance.folderDataCache){e.next=9;break}return t=A.CRM.get(H.a.DESIGN_CATEGORY),e.next=4,Ti.a.getDefaultSelectedTeamData();case 4:return n=e.sent,e.next=7,ft.UnicornApiRequest.get("".concat(t,"?").concat($.param(n)));case 7:i=e.sent,this.instance.folderDataCache=i.data;case 9:return e.abrupt("return",this.instance.folderDataCache.slice());case 10:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})}]),e}();m()(na,"instance",new na);var ia=n(361),aa=n(237),ra=function(e){function t(e){var n;return u()(this,t),n=y()(this,L()(t).call(this)),m()(_()(n),"HEIGHT_MARGIN",85),n.param=e,n.option=ln.a.dddotPopupOption,n.templateInfoElementMap={},n.makeElement(),n}return b()(t,e),p()(t,[{key:"openTemplateInfo",value:function(e){var t=this;this.openParam=e,this.emptyElement(),this.openPopup(e.favoritesParam,e.offset),this.loadTemplateInfo().then(function(){return t.updateUIAfterRender()})}},{key:"emptyElement",value:function(){this.templateInfoElementMap.title.innerText="",this.templateInfoElementMap.updateDate&&(this.templateInfoElementMap.updateDate.innerText=""),this.templateInfoElementMap.designerId&&(this.templateInfoElementMap.designerId.innerText=""),this.templateInfoElementMap.keywords&&$(this.templateInfoElementMap.keywords).empty()}},{key:"updateUIAfterRender",value:function(){var e=$(this.templateInfoElementMap.keywords);if(this.templateInfoElementMap.keywords&&e.height()<this.templateInfoElementMap.keywords.scrollHeight)for(var t=e.children(),n=2*t.height(),i=!1,a=0,r=t.length;a<r;a++){var s=t.eq(a),o=s.position();if(!i&&o.top>0&&(s.before(this.btnKeywordMore),i=!0),o.top>=n){s.before(this.btnKeywordMore).addClass(R.a.CLEAR_BOTH);break}}}},{key:"updateKeywordsUI",value:function(e){var t=this.templateInfoElementMap.keywords;t.classList.add(R.a.LIMIT_HEIGHT),$(t).empty();var n=document.createDocumentFragment(),i=document.createElement("label");i.innerText="키워드",n.appendChild(i);var a=e.length-1;if(e.forEach(function(e,t){var i=document.createElement("span");i.className=R.a.WORD_WRAP;var r=document.createElement("a");if(r.innerText=e,i.appendChild(r),t<a){var s=document.createElement("span");s.innerText=",",i.appendChild(s)}n.appendChild(i)}),!e.length){var r=document.createElement("span");r.className=R.a.KEYWORD_NONE,r.innerText="없음",n.appendChild(r)}t.appendChild(n)}},{key:"makeHeader",value:function(){var e=Ut.a.makeHeaderWrap();this.templateInfoElementMap.title=this.makeTemplateTitleElem(),e.appendChild(this.templateInfoElementMap.title),this.hasUpdateDate()&&(this.templateInfoElementMap.updateDate=document.createElement("p"),this.templateInfoElementMap.updateDate.className=R.a.UPDATE_DATE,e.appendChild(this.templateInfoElementMap.updateDate)),this.hasDesignerId()&&(this.templateInfoElementMap.designerId=document.createElement("p"),this.templateInfoElementMap.designerId.className=R.a.DESIGNER_ID,e.appendChild(this.templateInfoElementMap.designerId)),this.contents.appendChild(e)}},{key:"makeKeyword",value:function(){var e=this,t=Ut.a.makeKeywordWrap();this.templateInfoElementMap.keywords=document.createElement("div"),this.templateInfoElementMap.keywords.className=R.a.KEYWORDS,t.appendChild(this.templateInfoElementMap.keywords),this.btnKeywordMore=document.createElement("button"),this.btnKeywordMore.className=R.a.BTN_KEYWORD_MORE,this.btnKeywordMore.innerText="... 더보기",$(this.templateInfoElementMap.keywords).on("click","a",function(t){e.close();var n=t.currentTarget;e.param.searchKeywordCallback&&e.param.searchKeywordCallback(n.innerText)}),this.btnKeywordMore.addEventListener("click",function(){e.templateInfoElementMap.keywords.classList.remove(R.a.LIMIT_HEIGHT),e.templateInfoElementMap.keywords.lastChild.after(e.btnKeywordShort)}),this.btnKeywordShort=document.createElement("button"),this.btnKeywordShort.className=R.a.BTN_KEYWORD_SHORT,this.btnKeywordShort.innerText="간단히",this.btnKeywordShort.addEventListener("click",function(){e.templateInfoElementMap.keywords.classList.add(R.a.LIMIT_HEIGHT)}),this.contents.appendChild(t)}},{key:"makeTemplateChangeBtn",value:function(){var e=document.createElement("div");e.className=R.a.BUTTON_WRAP,e.classList.add(aa.a.CHANGE_TEMPLATE),e.appendChild(this.makeBtnTemplateChange()),this.contents.appendChild(e)}},{key:"makeBtnTemplateChange",value:function(){var e=this,t=document.createElement("button");return t.innerText="이 템플릿으로 덮어쓰기",Object(K.setToolsIcon)(t,K.ToolsIcon.REPLACE),z.a.createTooltip(t,z.b.B,{title:{name:H.a.PRINTOUT_TOOLTIP_TEMPLATE_NOT_CHANGEABLE}},{title:{name:H.a.PRINTOUT_TOOLTIP_TEMPLATE_NOT_CHANGEABLE}},{atDisable:!0}),t.addEventListener("click",function(){return e.loadTemplate()}),this.btnLoadTemplate=t,t}},{key:"loadTemplate",value:function(){var e;this.close(),Vt.a.hideLeftMenu(),this.openParam.sheetSize?e={width:this.openParam.sheetSize.width,height:this.openParam.sheetSize.height,unit:Q.b.PX}:this.openParam.templateType&&(e={width:this.openParam.templateType.width,height:this.openParam.templateType.height,unit:this.openParam.templateType.unit,dpi:Q.d.DEFAULT_DPI}),o.a.dispatch(new Oi(P.b.getDesignParam(this.getDesignKey(),this.openParam.repositoryType,this.isTemplate()),e,this.openParam.templateType))}},{key:"getDesignKey",value:function(){return this.openParam.templateLoadKey?this.openParam.templateLoadKey:String(this.openParam.designIdx)}},{key:"updateUI",value:function(){}},{key:"hasUpdateDate",value:function(){return!1}},{key:"hasDesignerId",value:function(){return!1}},{key:"makeTemplateTitleElem",value:function(){return document.createElement("span")}}]),t}(ia.a),sa=n(78),oa=function(e){function t(){return u()(this,t),y()(this,L()(t).apply(this,arguments))}var n;return b()(t,e),p()(t,[{key:"loadTemplateInfo",value:(n=s()(a.a.mark(function e(){var t,n,i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={title:"",updateDate:0,creatorAccountEmail:"",keywords:[]},e.next=3,sa.a.findOne(this.openParam.designIdx);case 3:n=e.sent,this.openParam.templateType=n.templateType,Object.assign(t,n),this.templateInfoElementMap.title.innerText=t.title,this.templateInfoElementMap.updateDate&&(this.templateInfoElementMap.updateDate.innerText="".concat(A.DateUtil.toString(new Date(t.updateDate),"yyyy-MM-dd HH:mm"))),this.templateInfoElementMap.designerId&&(i=t.creatorAccountEmail.slice(0,t.creatorAccountEmail.indexOf("@")),this.templateInfoElementMap.designerId.innerText="By ".concat(i)),this.templateInfoElementMap.keywords&&this.updateKeywordsUI(t.keywords);case 10:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"makeElement",value:function(){B()(L()(t.prototype),"makeElement",this).call(this),this.makeHeader(),this.option.changeTemplate&&this.makeTemplateChangeBtn(),this.option.openNewTab&&this.makeBtnOpenNewTab()}},{key:"makeBtnOpenNewTab",value:function(){var e=this,t=document.createElement("div");t.className="".concat(R.a.BUTTON_WRAP," ").concat(R.a.NEW_TAB);var n=document.createElement("button");n.innerText="새 탭으로 열기",Object(K.setToolsIcon)(n,K.ToolsIcon.OPEN_IN_NEW),n.addEventListener("click",function(){return e.openNewTab()}),t.appendChild(n),this.contents.appendChild(t)}},{key:"openNewTab",value:function(){var e=P.b.getStartDesignUrl(this.openParam.designIdx);window.open(e,"_blank")}},{key:"isTemplate",value:function(){return!1}},{key:"hasUpdateDate",value:function(){return!0}},{key:"getId",value:function(){return"designDddotPopup"}}]),t}(ra),la=n(148),ca=n(182),ua=n(141),da=function(e){function t(e){var n;return u()(this,t),n=y()(this,L()(t).call(this)),m()(_()(n),"orderType",ua.b.DESC),m()(_()(n),"orderField",ua.c.UPDATE_DATE),m()(_()(n),"categoryIdx",0),m()(_()(n),"repositoryType",ua.d.MIRICANVAS),n.param=e,n}var n;return b()(t,e),p()(t,[{key:"setKeyword",value:function(e){this.keyword=e}},{key:"getKeyword",value:function(){return this.keyword}},{key:"setOrderType",value:function(e){this.orderType=e}},{key:"setOrderField",value:function(e){this.orderField=e}},{key:"setDesignCategory",value:function(e){this.categoryIdx=e}},{key:"setDesignRepositoryType",value:function(e){this.repositoryType=e}},{key:"requestList",value:(n=s()(a.a.mark(function e(t){var n,i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sa.a.getMyList(t);case 2:return n=e.sent,i=this.makeListItems(n.list),e.abrupt("return",{items:i,totalRow:n.pagination.totalRow});case 5:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"getRequestParam",value:function(e){var t=A.StringUtil.nvl(this.keyword);return{page:e.page,pageSize:e.pageSize,title:t,orderField:this.orderField,orderBy:this.orderType,categorySearch:this.categoryIdx>0,categoryIdx:this.categoryIdx,repo:t?ua.d.ALL:this.repositoryType}}},{key:"makeListItems",value:function(e){var t=this;return e.map(function(e){return t.param.makeListItem(e)})}},{key:"getLibType",value:function(){return Dt.b.DESIGN}},{key:"getGTMItemData",value:function(e){return null}}]),t}(Dt.a),pa=n(177),ha=function(e){function t(){return u()(this,t),y()(this,L()(t).apply(this,arguments))}return b()(t,e),p()(t,[{key:"makeThumbImg",value:function(){var e=this,n=B()(L()(t.prototype),"makeThumbImg",this).call(this);return n.onload=function(){var t=n.width/pa.a.MAX_WIDTH;n.height/t<pa.a.SHORT_HEIGHT&&e.element.classList.add(R.a.SHORT)},n}}]),t}(Nt.a),ma=function(e){function t(e,n,i){var a;return u()(this,t),(a=y()(this,L()(t).call(this,new Nt.b(e,Gt.a.DESIGN,ve.a.UNICORN)))).openSubPage=n,a.dddotPopup=i,a.useFavorite=!1,a}return b()(t,e),p()(t,[{key:"getThumbUrlList",value:function(){return this.listItemData.resourceData.pageList.map(function(e){return e.thumbKey.includes("base64")?e.thumbKey:sa.a.makeThumbUrl(e.thumbKey)})}},{key:"doAction",value:function(){if(!this.isEditing){var e=this.getThumbUrlList();A.ArrayUtil.isEmpty(e)||e.length<2?(this.closeSubPage(),B()(L()(t.prototype),"doAction",this).call(this)):this.openSubPage(this)}}},{key:"closeSubPage",value:function(){$(this.element.parentElement).children(".".concat(R.a.SUB_PAGE_OPENED)).removeClass(R.a.SUB_PAGE_OPENED)}},{key:"makeHoverLayer",value:function(){var e=B()(L()(t.prototype),"makeHoverLayer",this).call(this);e.appendChild(this.makeDddot());var n=this.getThumbUrlList();if(!A.ArrayUtil.isEmpty(n)&&n.length>1){var i=document.createElement("label");i.innerText=String(n.length),i.className=R.a.PAGE_CNT,e.appendChild(i)}return e}},{key:"makeDddot",value:function(){var e=this,t=Ut.a.makeDddotBtn(function(){var n=e.listItemData.myCollectionPk;e.dddotPopup.openTemplateInfo({designIdx:Number(n.referenceKey),favoritesParam:{useFavorite:!1,myCollectionPk:n},repositoryType:n.repositoryType,offset:$(t).offset()})});return t}},{key:"render",value:function(){var e=B()(L()(t.prototype),"render",this).call(this);return this.setIsEditing(),e}},{key:"setIsEditing",value:function(){var e=P.b.getDesignInfo().getIdx();return e>0&&(this.isEditing=this.listItemData.resourceData.idx===e,this.isEditing&&this.element.classList.add(R.a.EDITING)),this}}]),t}(ha),ga=function(e){function t(){var e;return u()(this,t),(e=y()(this,L()(t).call(this))).makeBtnClose=!1,e.id=A.StringUtil.random(),e.selectedOrderFieldInfo=t.ORDER_FIELD_INFO_LIST[0],e.selectedOrderTypeInfo=t.ORDER_TYPE_INFO_LIST[1],e.contents=e.makeContents(),e}return b()(t,e),p()(t,[{key:"addOrderFieldSelectListener",value:function(e){return this.orderFieldSelectListener=e,this}},{key:"addOrderTypeSelectListener",value:function(e){return this.orderTypeSelectListener=e,this}},{key:"getSelectedOrderFieldInfo",value:function(){return this.selectedOrderFieldInfo}},{key:"makeContents",value:function(){var e=document.createElement("div");return e.appendChild(this.makeTitle()),e.appendChild(this.makeOrderField()),e.appendChild(this.makeOrderType()),e}},{key:"getContents",value:function(){return this.contents}},{key:"makeTitle",value:function(){var e=document.createElement("p");return e.className=R.a.TITLE,e.innerText="정렬",e}},{key:"makeOrderField",value:function(){var e=this,n=document.createDocumentFragment();return t.ORDER_FIELD_INFO_LIST.forEach(function(t){n.appendChild(e.makeOrderFieldItem(t))}),this.orderFieldUl=document.createElement("ul"),this.orderFieldUl.className="order_field",this.orderFieldUl.appendChild(n),this.orderFieldUl}},{key:"makeOrderFieldItem",value:function(e){var t=this,n=document.createElement("li"),i=document.createElement("span");return i.innerText=e.label,n.appendChild(i),Object(K.setToolsIcon)(n,K.ToolsIcon.CHECK,!0),n.addEventListener("click",function(){if(t.selectedOrderFieldInfo.field!==e.field){t.close(),t.selectedOrderFieldInfo=e;var i=!0,a=!1,r=void 0;try{for(var s,o=t.orderFieldUl.children[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){s.value.classList.remove(R.a.ACTIVE)}}catch(e){a=!0,r=e}finally{try{i||null==o.return||o.return()}finally{if(a)throw r}}n.classList.add(R.a.ACTIVE),t.orderFieldSelectListener&&t.orderFieldSelectListener(e)}}),e.field===this.selectedOrderFieldInfo.field&&n.classList.add(R.a.ACTIVE),n}},{key:"makeOrderType",value:function(){var e=this,n=document.createDocumentFragment();return t.ORDER_TYPE_INFO_LIST.forEach(function(t){n.appendChild(e.makeOrderTypeItem(t))}),this.orderTypeUl=document.createElement("ul"),this.orderTypeUl.className="order_type",this.orderTypeUl.appendChild(n),this.orderTypeUl}},{key:"makeOrderTypeItem",value:function(e){var t=this,n=document.createElement("li");n.setAttribute("data-order-type",e.type);var i=document.createElement("span");return i.innerText=e.label,n.appendChild(i),Object(K.setToolsIcon)(n,K.ToolsIcon.CHECK,!0),n.addEventListener("click",function(){t.setOrderType(e.type),t.orderTypeSelectListener&&t.orderTypeSelectListener(e)}),e.type===this.selectedOrderTypeInfo.type&&n.classList.add(R.a.ACTIVE),n}},{key:"setOrderType",value:function(e){var n=t.ORDER_TYPE_INFO_LIST.find(function(t){return t.type===e});if(n&&n.type!==this.selectedOrderTypeInfo.type){this.close(),this.selectedOrderTypeInfo=n;var i=!0,a=!1,r=void 0;try{for(var s,o=this.orderTypeUl.children[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value;l.getAttribute("data-order-type")===n.type?l.classList.add(R.a.ACTIVE):l.classList.remove(R.a.ACTIVE)}}catch(e){a=!0,r=e}finally{try{i||null==o.return||o.return()}finally{if(a)throw r}}}}},{key:"getElementClass",value:function(){return"order_field_select_popup"}},{key:"getId",value:function(){return this.id}},{key:"updateUI",value:function(){}}]),t}(U.a);m()(ga,"ORDER_FIELD_INFO_LIST",[{field:ua.c.UPDATE_DATE,label:"마지막 수정일"},{field:ua.c.CREATE_DATE,label:"최근 생성일"},{field:ua.c.TITLE,label:"이름순"}]),m()(ga,"ORDER_TYPE_INFO_LIST",[{type:ua.b.ASC,label:"오름차순"},{type:ua.b.DESC,label:"내림차순"}]);var va,fa=n(102),Ea=function(){function e(t,n){var i=this;u()(this,e),m()(this,"orderType",ua.b.DESC),this.orderFieldSelectCallback=t,this.orderTypeToggleCallback=n,this.orderFieldSelectPopup=(new ga).addOrderFieldSelectListener(function(e){i.orderFieldLabel.innerText=e.label,i.orderFieldSelectCallback(e.field)}).addOrderTypeSelectListener(function(e){i.selectOrderType(e.type)}),this.element=this.makeElement()}return p()(e,[{key:"setTotalRow",value:function(e,t){this.totalRowLabel.innerText=String(e),t?this.totalRowLabel.classList.add(R.a.KEYWORDS):this.totalRowLabel.classList.remove(R.a.KEYWORDS),this.totalRowLabel.classList.remove(R.a.LOADING)}},{key:"loading",value:function(){this.totalRowLabel.innerText="",this.totalRowLabel.classList.add(R.a.LOADING)}},{key:"makeElement",value:function(){var e=document.createElement("div");return e.className="list_header",e.appendChild(this.makeTotalRowLabel()),e.appendChild(this.makeOrderController()),e}},{key:"makeTotalRowLabel",value:function(){var e=document.createElement("div");return e.className="total_row_wrap",this.totalRowLabel=document.createElement("span"),this.totalRowLabel.classList.add(R.a.LOADING),this.totalRowLabel.className="total_row",this.totalRowLabel.innerText="",e.appendChild(this.totalRowLabel),e}},{key:"makeOrderController",value:function(){var e=document.createElement("div");return e.className="order_controller",e.appendChild(this.makeOrderFieldSelectButton()),e.appendChild(this.makeOrderTypeToggleButton()),e}},{key:"makeOrderFieldSelectButton",value:function(){var e=this,t=document.createElement("div");return t.className="order_field_select_btn",this.orderFieldLabel=document.createElement("span"),t.appendChild(this.orderFieldLabel),this.orderFieldLabel.innerText=this.orderFieldSelectPopup.getSelectedOrderFieldInfo().label,t.addEventListener("click",function(){e.orderFieldSelectPopup.open($(t).offset())}),t}},{key:"makeOrderTypeToggleButton",value:function(){var e=this,t=this.orderTypeToggleBtn=document.createElement("div");return t.className="order_type_toggle_btn",Object(K.setToolsIcon)(t,K.ToolsIcon.MOVE_DOWN),t.setAttribute("data-order-type",this.orderType),t.addEventListener("click",function(){fa.a.isMobileSize()?e.orderFieldSelectPopup.open($(t).offset()):(e.selectOrderType(e.orderType===ua.b.DESC?ua.b.ASC:ua.b.DESC),e.orderFieldSelectPopup.setOrderType(e.orderType))}),t}},{key:"selectOrderType",value:function(e){this.orderType=e,this.orderTypeToggleBtn.setAttribute("data-order-type",this.orderType),this.orderTypeToggleCallback(this.orderType)}}]),e}(),Ta=function(e){function t(){var e;return u()(this,t),(e=y()(this,L()(t).call(this))).option=ln.a.templateLibMenuOption,e.isLoginRequire=!0,e.init(),e.dddotPopup=new oa({}),e}var n,i,r;return b()(t,e),p()(t,[{key:"makeLib",value:function(){var e=this;return new da({makeListItem:function(t){return e.makeListItem(t)}})}},{key:"makeListHeader",value:function(){var e=this;return this.listHeader=new Ea(function(t){return e.setOrderField(t)},function(t){return e.setOrderType(t)}),this.listHeader.element}},{key:"setOrderField",value:(r=s()(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.lib.setOrderField(t),e.next=3,this.loadList();case 3:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"setOrderType",value:(i=s()(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.lib.setOrderType(t),e.next=3,this.loadList();case 3:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"makeListTool",value:function(){return this.paginationListTool.prependElementToScrollContents(this.makeListHeader()),this.subPagesTool=new ca.a(function(e,t){var n=e.listItemData.dropEventKey,i=P.b.getDesignParam(n,e.listItemData.myCollectionPk.repositoryType,!1);o.a.dispatch(new la.a(i,t))},Gt.a.DESIGN_PAGE),this.subPagesTool.render(),this.paginationListTool.render()}},{key:"makeListItem",value:function(e){var t=this;return new ma(e,function(e){return t.openSubPage(e)},this.dddotPopup)}},{key:"addDesignListItem",value:(n=s()(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)})},{key:"openSubPage",value:function(e){var t=e.element;if($(this.subPagesTool.element).remove(),t.classList.contains(R.a.SUB_PAGE_OPENED))t.classList.remove(R.a.SUB_PAGE_OPENED);else{for(var n=t.parentNode.children,i=0,a=n.length;i<a;i++)n[i].classList.remove(R.a.SUB_PAGE_OPENED);t.classList.add(R.a.SUB_PAGE_OPENED),this.subPagesTool.updateUI({listItem:e}),this.paginationListTool.listTool.insertElement(this.subPagesTool.element,ca.a.getNextLineLiIdx(t)),this.paginationListTool.scrollElement.setScrollY($(t).position().top)}}},{key:"updateListCount",value:function(){this.listHeader.setTotalRow(this.paginationListTool.getTotalRow(),!A.StringUtil.isEmpty(this.lib.getKeyword()))}},{key:"getIcon",value:function(){return K.ToolsIcon.MY_DESIGN}},{key:"getName",value:function(){return H.a.TOOLS_LIB_DESIGN_TITLE}},{key:"getLeftMenuType",value:function(){return ct.b.DESIGN_LIB}}]),t}(Ot.a),ya=function(){function e(t,n,i){u()(this,e),this.title=t,this.contents=n,this.btn=i,this.element=this.makeElement()}return p()(e,[{key:"makeElement",value:function(){var e=document.createElement("div");e.className=R.a.EMPTY_LIST_NOTI_LAYER;var t=document.createElement("div"),n=document.createElement("div");n.className="empty_list_notify_img",t.appendChild(n);var i=document.createElement("p");i.classList.add(R.a.TITLE),i.innerHTML=this.title,t.appendChild(i);var a=document.createElement("p");return a.innerHTML=this.contents,t.appendChild(a),this.btn&&t.appendChild(this.btn),e.appendChild(t),e}}]),e}(),Ia=function(e){function t(){var e;return u()(this,t),(e=y()(this,L()(t).call(this))).paginationListTool.setListEmptyView(new ya(A.CRM.get(H.a.TOOLS_LIB_DESIGN_FOLDER_DESIGN_EMPTY_LIST_MSG),A.CRM.get(H.a.TOOLS_LIB_DESIGN_FOLDER_DESIGN_EMPTY_LIST_MSG_2)).element),e}var n,i;return b()(t,e),p()(t,[{key:"loadFolderDesigns",value:(i=s()(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.folder||this.folder.idx!==t.idx){e.next=2;break}return e.abrupt("return");case 2:return this.setFolder(t),this.active(),e.next=6,this.load();case 6:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"setFolder",value:function(e){this.folder=e,this.lib.setDesignCategory(e.idx),this.folderNameLabel.innerText=e.name,this.listHeader.setTotalRow(e.designCount,!1)}},{key:"loadList",value:(n=s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.paginationListTool.initList();case 2:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"makeElement",value:function(){var e=document.createElement("div");return e.className=R.a.LIBRARY_DESIGN_FOLDER,e.appendChild(this.makeHeader()),e.appendChild(this.makeBody()),e}},{key:"makeHeader",value:function(){var e=this,t=document.createElement("div");return t.className="design_folder_header",Object(K.setToolsIcon)(t,K.ToolsIcon.MOVE_LEFT).addEventListener("click",function(){return e.closeSelf()}),this.folderNameLabel=document.createElement("span"),t.appendChild(this.folderNameLabel),t}},{key:"makeBody",value:function(){var e=document.createElement("div");return e.className="design_folder_body",e.appendChild(this.makeListTool()),e}},{key:"closeSelf",value:function(){this.element.parentElement&&this.element.parentElement.removeChild(this.element)}}]),t}(Ta),La=function(e){function t(){var e;return u()(this,t),(e=y()(this,L()(t).call(this))).lib.setDesignRepositoryType(ua.d.BIZHOWS),e.paginationListTool.setListEmptyView(t.makeListEmptyView().element),e}var n,i,r;return b()(t,e),p()(t,[{key:"loadList",value:(r=s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.listHeader.loading(),e.next=3,this.paginationListTool.initList();case 3:this.updateListCount();case 4:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"makeElement",value:function(){return this.makeListTool()}},{key:"addDesignListItem",value:(i=s()(a.a.mark(function e(n){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B()(L()(t.prototype),"addDesignListItem",this).call(this,n);case 2:return e.next=4,this.paginationListTool.addItem(this.makeListItem(n));case 4:this.updateListCount();case 5:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"updateListItemThumbnail",value:(n=s()(a.a.mark(function e(n,i){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B()(L()(t.prototype),"updateListItemThumbnail",this).call(this,n,i);case 2:return e.next=4,this.paginationListTool.updateItemThumbnail(n,i);case 4:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})}],[{key:"makeListEmptyView",value:function(){return new ya(A.CRM.get(H.a.TOOLS_LIB_DESIGN_EMPTY_BIZ_LIST_MSG),A.CRM.get(H.a.TOOLS_LIB_DESIGN_EMPTY_BIZ_LIST_MSG_2))}}]),t}(Ta);!function(e){e.DOCUMENTS="DOCUMENTS",e.FOLDERS="FOLDERS",e.BIZHOWS="BIZHOWS"}(va||(va={}));var ka,_a=function(e){function t(){var e;return u()(this,t),e=y()(this,L()(t).call(this)),m()(_()(e),"isLoadedFolders",!1),e.designFolderLibMenu=new Ia,e.designBizLibMenu=new La,e.listEmptyView=e.makeListEmptyView(),e.listEmptyViewForKeyword=e.makeListEmptyViewForKeyword(),e.paginationListTool.setListEmptyView(e.listEmptyView.element),e.lib.setDesignRepositoryType(ua.d.MIRICANVAS),e.initSetting(),e}var n,i,r,o,l,c,d;return b()(t,e),p()(t,[{key:"initSetting",value:function(){var e=null;e=this.option.bizhowsTabMenu&&this.option.selectedBizhowsTabMenu?va.BIZHOWS:va.DOCUMENTS,this.reloadTabMenuId=e,this.tabMenu.select(e)}},{key:"setReady",value:(d=s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B()(L()(t.prototype),"setReady",this).call(this);case 2:return e.next=4,this.designFolderLibMenu.setReady();case 4:if(!this.option.bizhowsTabMenu){e.next=7;break}return e.next=7,this.designBizLibMenu.setReady();case 7:case"end":return e.stop()}},e,this)})),function(){return d.apply(this,arguments)})},{key:"loadList",value:(c=s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.listHeader.loading(),this.isLoadedFolders||this.loadFolders().catch(function(e){return console.error(e)}),!this.option.bizhowsTabMenu||!this.option.selectedBizhowsTabMenu){e.next=7;break}return this.bizhowsTabContents.appendChild(this.designBizLibMenu.getElement()),this.designBizLibMenu.active(),e.next=7,this.designBizLibMenu.load();case 7:return e.next=9,this.paginationListTool.initList();case 9:this.updateListCount();case 10:case"end":return e.stop()}},e,this)})),function(){return c.apply(this,arguments)})},{key:"makeElement",value:function(){var e=document.createElement("div");return e.className=R.a.LIBRARY_DESIGN,e.appendChild(this.makeSearchTool()),e.appendChild(this.makeTabMenu()),e}},{key:"makeSearchTool",value:function(){var e=this;return this.searchTool=new Xt.a(function(t){return e.setKeyword(A.StringUtil.nvl(t))},A.CRM.get(H.a.TOOLS_LIB_DESIGN_SEARCH_PLACEHOLDER)),this.searchTool.render()}},{key:"makeTabMenu",value:function(){return this.tabMenu=(new A.TabMenuDefault).addItem({button:"문서",contents:this.makeDocumentTabContents(),active:!0,menuId:va.DOCUMENTS}).addItem({button:"폴더",contents:this.makeFolderTabContents(),menuId:va.FOLDERS}),this.makeBizhowsTabMenu(),this.tabMenu.element}},{key:"makeBizhowsTabMenu",value:function(){var e,t=this;this.option.bizhowsTabMenu&&this.tabMenu.addItem({button:"비즈하우스",contents:this.makeBizhowsTabContents(),menuId:va.BIZHOWS,buttonClickEvent:(e=s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.designBizLibMenu.isLoaded){e.next=4;break}return t.bizhowsTabContents.appendChild(t.designBizLibMenu.getElement()),e.next=4,t.designBizLibMenu.load();case 4:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)})})}},{key:"makeDocumentTabContents",value:function(){var e=document.createElement("div");return e.className="document_tab_contents",e.appendChild(this.makeListTool()),e}},{key:"makeFolderTabContents",value:function(){var e=this.folderTabContents=document.createElement("div");return e.className="folder_tab_contents loading",this.foldersUl=document.createElement("ul"),e.appendChild(new G.a(!1,!0,"100%").render(this.foldersUl)),e.appendChild(new ya(A.CRM.get(H.a.TOOLS_LIB_DESIGN_FOLDER_EMPTY_LIST_MSG),A.CRM.get(H.a.TOOLS_LIB_DESIGN_FOLDER_EMPTY_LIST_MSG_2)).element),e}},{key:"makeBizhowsTabContents",value:function(){var e=this.bizhowsTabContents=document.createElement("div");return e.className="bizhows_tab_contents",e}},{key:"setKeyword",value:(l=s()(a.a.mark(function e(t){var n,i=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!(i.length>1&&void 0!==i[1])||i[1],this.searchTool.updateUI(t),A.StringUtil.isEmpty(t)?(this.tabMenu.element.classList.remove(R.a.KEYWORDS),this.paginationListTool.setListEmptyView(this.listEmptyView.element),this.changeSelectedTab()):(this.lastTabMenuId||(this.lastTabMenuId=this.getActiveTabMenuId()),this.tabMenu.select(va.DOCUMENTS),this.tabMenu.element.classList.add(R.a.KEYWORDS),this.paginationListTool.setListEmptyView(this.listEmptyViewForKeyword.element)),this.lib.setKeyword(t),!n){e.next=7;break}return e.next=7,this.loadList();case 7:case"end":return e.stop()}},e,this)})),function(e){return l.apply(this,arguments)})},{key:"loadFolders",value:(o=s()(a.a.mark(function e(){var t,n=this;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoadedFolders=!0,e.next=3,na.getList();case 3:t=e.sent,A.ArrayUtil.isEmpty(t)?this.folderTabContents.classList.add("empty"):(this.folderTabContents.classList.remove("empty"),this.sortFolders(t).forEach(function(e){n.foldersUl.appendChild(n.renderFolder(e))})),this.folderTabContents.classList.remove("loading");case 6:case"end":return e.stop()}},e,this)})),function(){return o.apply(this,arguments)})},{key:"sortFolders",value:function(e){var t=new Map,n=[];e.forEach(function(e){t.set(e.name,e),n.push(e.name)}),A.SortUtil.sortStringArray(n);var i=[];return n.forEach(function(e){return i.push(t.get(e))}),i}},{key:"renderFolder",value:function(e){var t=this,n=document.createElement("li"),i=document.createElement("div");if(i.className="thumb_wrap",A.StringUtil.isEmpty(e.thumbKey))Object(K.setToolsIcon)(i,K.ToolsIcon.FOLDER_OUTLINE),i.classList.add("empty");else{var a=document.createElement("img");a.src=ft.UnicornApiClient.getURL("".concat(A.CRM.get(H.a.IMAGE_PREVIEW_API),"/").concat(e.thumbKey,"/300")),i.appendChild(a)}n.appendChild(i);var r=document.createElement("div");r.className="folder_info_wrap";var s=document.createElement("span");s.className="title",s.innerText=e.name,r.appendChild(s);var o=document.createElement("span");return o.className="design_cnt",o.innerText=String(e.designCount),r.appendChild(o),n.addEventListener("click",function(){return t.openFolderContentsView(e)}),n.appendChild(r),n}},{key:"openFolderContentsView",value:(r=s()(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.element.appendChild(this.designFolderLibMenu.getElement()),e.next=3,this.designFolderLibMenu.loadFolderDesigns(t);case 3:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"makeListEmptyView",value:function(){var e=document.createElement("button");return e.innerText=A.CRM.get(H.a.TOOLS_LIB_DESIGN_BTN_MOVE_TEMPLATE),e.addEventListener("click",function(){return Vt.a.selectLeftMenu(ct.b.TEMPLATE_LIB)}),new ya(A.CRM.get(H.a.TOOLS_LIB_DESIGN_EMPTY_LIST_MSG),A.CRM.get(H.a.TOOLS_LIB_DESIGN_EMPTY_LIST_MSG_2),e)}},{key:"makeListEmptyViewForKeyword",value:function(){return new ya(A.CRM.get(H.a.TOOLS_LIB_LIST_EMPTY_MESSAGE),A.CRM.get(H.a.TOOLS_LIB_LIST_EMPTY_MESSAGE_2))}},{key:"getActiveTabMenuId",value:function(){return this.tabMenu.getSelectedButtonId()||va.DOCUMENTS}},{key:"changeSelectedTab",value:function(){this.lastTabMenuId&&(this.tabMenu.select(this.lastTabMenuId),this.lastTabMenuId=null)}},{key:"addDesignListItem",value:(i=s()(a.a.mark(function e(n){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B()(L()(t.prototype),"addDesignListItem",this).call(this,n);case 2:if(this.reloadTabMenuId!==va.BIZHOWS){e.next=7;break}return e.next=5,this.designBizLibMenu.addDesignListItem(n);case 5:e.next=10;break;case 7:return e.next=9,this.paginationListTool.addItem(this.makeListItem(n));case 9:this.updateListCount();case 10:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"updateListItemThumbnail",value:(n=s()(a.a.mark(function e(n,i){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B()(L()(t.prototype),"updateListItemThumbnail",this).call(this,n,i);case 2:if(this.reloadTabMenuId!==va.BIZHOWS){e.next=7;break}return e.next=5,this.designBizLibMenu.updateListItemThumbnail(n,i);case 5:e.next=9;break;case 7:return e.next=9,this.paginationListTool.updateItemThumbnail(n,i);case 9:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})},{key:"updateUI",value:function(){B()(L()(t.prototype),"updateUI",this).call(this),this.updateTabUI()}},{key:"updateTabUI",value:function(){if(this.bizhowsTabContents){if(!this.option.bizhowsTabMenu){var e=Array.from(this.tabMenu.element.querySelectorAll(".button_wrap")).find(function(e){return e.getAttribute("data-menu-id")===va.BIZHOWS});e&&e.parentElement&&e.parentElement.removeChild(e);var t=Array.from(this.tabMenu.element.querySelectorAll(".contents_wrap")).find(function(e){return e.getAttribute("data-menu-id")===va.BIZHOWS});t&&t.parentElement&&(t.parentElement.removeChild(t),this.bizhowsTabContents=null),this.tabMenu.select(va.DOCUMENTS)}}else this.option.bizhowsTabMenu&&!this.bizhowsTabContents&&this.makeBizhowsTabMenu()}}]),t}(Ta),wa=function(){function e(){u()(this,e)}return p()(e,[{key:"setReady",value:function(){this.menuWrapElem=document.getElementById("leftFloatingMenu")}},{key:"render",value:function(e){}},{key:"update",value:function(){}}]),e}(),ba=n(218),Sa=function(e){function t(){var e;return u()(this,t),(e=y()(this,L()(t).call(this))).element=e.makeElement(),e}var n,i,r,c;return b()(t,e),p()(t,[{key:"makeElement",value:function(){var e=document.createElement("div");return e.className="lib_dev_tool",e.appendChild(this.makeSheetFileLoader()),e.appendChild(this.makeSheetKeyLoader()),e.appendChild(this.makeDesignLoader()),e.appendChild(this.makeLauncherTester()),e.appendChild(this.testButton()),e}},{key:"testButton",value:function(){var e=document.createElement("button");return e.innerText="테스트용 버튼",e}},{key:"makeSheetFileLoader",value:function(){var e=this,t=document.createElement("button");t.innerText="시트 파일 로드",t.addEventListener("click",function(){return $(n).trigger("click")});var n=document.createElement("input");n.type="file",n.accept=".xml",n.style.display="none",$(n).on("change",s()(a.a.mark(function t(){var i;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.files){t.next=16;break}return t.prev=1,t.next=4,e.readXmlFile(n.files[0]);case 4:return i=t.sent,t.next=7,e.loadPageFromXml(i);case 7:t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),console.error(t.t0),alert("오류");case 13:return t.prev=13,n.value="",t.finish(13);case 16:case"end":return t.stop()}},t,null,[[1,9,13,16]])})));var i=document.createElement("div");return i.appendChild(t),i.appendChild(n),i}},{key:"readXmlFile",value:function(e){return new Promise(function(t){var n=new FileReader;n.onloadend=function(){var e=(new DOMParser).parseFromString(n.result,"text/xml");t(e)},n.readAsText(e)})}},{key:"loadPageFromXml",value:(c=s()(a.a.mark(function e(t){var n,i,r,s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=M.a.make(null),e.next=3,n.load();case 3:return i=e.sent,r=ba.a.parseUnicornXML([t]).xml[0],e.next=7,i.parsePage(0,r);case 7:return s=e.sent,e.next=10,ye.a.loadPageResource(s);case 10:return i.replacePage(s,0),o.a.setMetaData(i),e.next=14,this.renderEditor();case 14:case"end":return e.stop()}},e,this)})),function(e){return c.apply(this,arguments)})},{key:"makeSheetKeyLoader",value:function(){var e=this,t=document.createElement("input");t.placeholder="sheet key",t.addEventListener("keydown",function(e){return e.stopPropagation()});var n=document.createElement("button");n.innerText="시트 로드",n.addEventListener("click",s()(a.a.mark(function n(){var i,r;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=t.value,!A.StringUtil.isEmpty(i)){n.next=3;break}return n.abrupt("return");case 3:return n.prev=3,n.next=6,sa.a.getSheetData(i);case 6:return r=n.sent,n.next=9,e.loadPageFromXml(r);case 9:n.next=15;break;case 11:n.prev=11,n.t0=n.catch(3),console.error(n.t0),alert("오류");case 15:case"end":return n.stop()}},n,null,[[3,11]])})));var i=document.createElement("div");return i.appendChild(t),i.appendChild(n),i}},{key:"makeDesignLoader",value:function(){var e=this,t=document.createElement("input");t.placeholder="디자인 인덱스",t.addEventListener("keydown",function(e){return e.stopPropagation()});var n=document.createElement("button");n.innerText="디자인 로드",n.addEventListener("click",s()(a.a.mark(function n(){var i;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=isNaN(Number(t.value))?Number(atob(t.value)):Number(t.value),!(isNaN(i)||i<=0)){n.next=3;break}return n.abrupt("return");case 3:return n.prev=3,n.next=6,e.loadDesign(i);case 6:n.next=12;break;case 8:n.prev=8,n.t0=n.catch(3),console.error(n.t0),alert("오류");case 12:case"end":return n.stop()}},n,null,[[3,8]])})));var i=document.createElement("div");return i.appendChild(t),i.appendChild(n),i}},{key:"makeLauncherTester",value:function(){var e=document.createElement("input");e.value='{"idx":1}',e.addEventListener("keydown",function(e){return e.stopPropagation()});var t,n=document.createElement("button");n.innerText="런처로 에디터 오픈",n.addEventListener("click",s()(a.a.mark(function n(){return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,t){n.next=4;break}return n.next=4,$.getScript("".concat(A.CRM.get(H.a.DEFAULT_HOST),"/libs/unicorn-launcher/launcher.js"));case 4:(t=window.unicornLauncher).load(JSON.parse(e.value)),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(0),console.error(n.t0),alert("오류");case 12:case"end":return n.stop()}},n,null,[[0,8]])})));var i=document.createElement("div");return i.appendChild(e),i.appendChild(n),i}},{key:"loadDesign",value:(r=s()(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=M.a.make({repositoryType:ve.a.UNICORN,idx:t}),e.t0=o.a,e.next=4,n.load();case 4:return e.t1=e.sent,e.t0.setMetaData.call(e.t0,e.t1),e.next=8,this.renderEditor();case 8:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"renderEditor",value:function(){return new Promise(function(e){o.a.dispatch(new l.c(function(){var t=s()(a.a.mark(function t(n,i,r){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r.pageListNavigator.showPageList(!0,!1),r.canvasRenderer.updatePagingManager(),r.canvasRenderer.updateZoomFitAfterRender(),t.next=5,r.renderAll(n,i);case 5:o.a.dispatch(new pn.k),e();case 7:case"end":return t.stop()}},t)}));return function(e,n,i){return t.apply(this,arguments)}}()))})}},{key:"load",value:(i=s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.isLoaded=!0;case 1:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)})},{key:"render",value:function(e,t){return this.element}},{key:"getIcon",value:function(){return K.ToolsIcon.CUT}},{key:"getName",value:function(){return H.a.TOOLS_LIB_DEV_TOOL_TITLE}},{key:"setReady",value:(n=s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)})},{key:"getLeftMenuType",value:function(){return ct.b.DEV_TOOL}},{key:"getRenderStatus",value:function(e,t){}},{key:"isChangeContentsStatus",value:function(e){return!1}},{key:"isChangePositionStatus",value:function(e){return!1}}]),t}(fn.a),Oa=n(226),Ca=n(176),Pa=function(e){function t(){var e;return u()(this,t),(e=y()(this,L()(t).call(this))).element=e.makeElement(),e}var n,i;return b()(t,e),p()(t,[{key:"makeElement",value:function(){var e=document.createElement("div");return e.className=R.a.LIBRARY_IMAGE_DOWNLOAD,this.gettyInput=this.makeIdInput("Getty",e),this.utoInput=this.makeIdInput("Uto",e),e.appendChild(this.makeDownloadReqButton()),e}},{key:"makeIdInput",value:function(e,t){var n=document.createElement("div");n.className=R.a.ROW_WRAP;var i=document.createElement("div");i.className=R.a.TITLE,i.innerText="".concat(e," ID");var a=document.createElement("div");a.className=R.a.DESC,a.innerText="* 여러개 입력시 콤마 사용";var r=document.createElement("textarea");return r.addEventListener("keydown",function(e){return e.stopPropagation()}),n.appendChild(i),n.appendChild(a),n.appendChild(r),t.appendChild(n),r}},{key:"makeDownloadReqButton",value:function(){var e=this,t=document.createElement("button");return t.innerText="다운로드 요청하기",t.addEventListener("click",s()(a.a.mark(function t(){var n;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=!0,t.next=3,Oa.a.requestExternalStickerDownload(e.getReqParam()).catch(function(){n=!1,alert("다운로드 요청에 실패하였습니다.")});case 3:n&&(e.utoInput.value="",e.gettyInput.value="",Ca.a.open({title:"다운로드 요청 완료",subTitle:"메일을 확인해주세요.",hideCancelBtn:!0}));case 4:case"end":return t.stop()}},t)}))),t}},{key:"getReqParam",value:function(){var e=o.a.instance.user.email.split("@")[0],t=this.gettyInput.value,n=this.utoInput.value;return t.length&&n.length?{designerId:e,gettyIdList:t.split(","),utoIdList:n.split(",")}:t.length?{designerId:e,gettyIdList:t.split(",")}:{designerId:e,utoIdList:n.split(",")}}},{key:"load",value:(i=s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.isLoaded=!0;case 1:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)})},{key:"render",value:function(e,t){return this.element}},{key:"getIcon",value:function(){return K.ToolsIcon.GOSTY}},{key:"getName",value:function(){return H.a.TOOLS_LIB_IMAGE_DOWNLOAD_TITLE}},{key:"setReady",value:(n=s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)})},{key:"getLeftMenuType",value:function(){return ct.b.IMAGE_DOWNLOAD}},{key:"getRenderStatus",value:function(e,t){}},{key:"isChangeContentsStatus",value:function(e){return!1}},{key:"isChangePositionStatus",value:function(e){return!1}}]),t}(fn.a),Da=function(e){function t(){return u()(this,t),y()(this,L()(t).apply(this,arguments))}return b()(t,e),p()(t,[{key:"getContents",value:function(){var e=document.createElement("div");e.className=R.a.CONTENTS,e.classList.add(R.a.DISABLE);var t=document.createElement("p");t.innerText=this.getTitle(),e.appendChild(t);var n=this.getInsideContents();return n.classList.add(R.a.INSIDE_CONTENTS),e.appendChild(n),e}},{key:"makeLine",value:function(){var e=document.createElement("div");return e.className=R.a.LINE,e}},{key:"makeRow",value:function(e,t){var n=document.createElement("div");n.className=R.a.ROW_WRAP;var i=document.createElement("span");i.className=R.a.TITLE,i.innerText=e;var a=document.createElement("span");return a.className=R.a.VALUE_ELEMENT,a.innerText=t,n.appendChild(i),n.appendChild(a),n}},{key:"getId",value:function(){return"miniPopup"}},{key:"updateUI",value:function(){}}]),t}(U.a),Aa=function(e){function t(){return u()(this,t),y()(this,L()(t).apply(this,arguments))}return b()(t,e),p()(t,[{key:"getInsideContents",value:function(){var e=document.createElement("div");return e.id="KeywordSearchInfoPopup",e.appendChild(t.makeRow("이미지 ID",null,"get_a0123456789")),e.appendChild(t.makeRow("디자이너 ID","@","yjson")),e}},{key:"getTitle",value:function(){return"키워드 검색 예시"}}],[{key:"makeRow",value:function(e,t,n){var i=document.createElement("div");i.className=R.a.ROW_WRAP;var a=document.createElement("div");a.className=R.a.TITLE,a.innerText=e;var r=document.createElement("div");if(r.className=R.a.VALUE_ELEMENT,t){var s=document.createElement("span");s.className=R.a.SPECIAL,s.innerText=t,r.appendChild(s)}var o=document.createElement("span");return o.innerText=n,r.appendChild(o),i.appendChild(a),i.appendChild(r),i}}]),t}(Da),Ra=function(e){function t(e,n,i,a,r,s,o){var l;return u()(this,t),(l=y()(this,L()(t).call(this))).imageId=e,l.designerId=n,l.imgWidth=i,l.imgHeight=a,l.extension=r,l.uploadImageCount=s,l.uploadDate=o,l.dddotElem=l.makeDddot(),l}return b()(t,e),p()(t,[{key:"getInsideContents",value:function(){var e=document.createElement("div");return e.appendChild(this.makeRow("디자이너 ID",this.designerId)),e.appendChild(this.makeRow("이미지 사이즈","".concat(this.imgWidth," × ").concat(this.imgHeight))),e.appendChild(this.makeRow("확장자",this.extension)),e.appendChild(this.makeRow("등록 스티커 수",this.uploadImageCount.toString())),e.appendChild(this.makeLine()),e.appendChild(this.makeRow("등록일",A.DateUtil.toString(new Date(this.uploadDate),"yyyy/MM/dd HH:mm"))),e}},{key:"getTitle",value:function(){return this.imageId}},{key:"getDddot",value:function(){return this.dddotElem}},{key:"makeDddot",value:function(){var e=this,t=document.createElement("div");t.className=R.a.DDDOT_WRAP;var n=Object(K.setToolsIcon)(t,K.ToolsIcon.DDDOT);return t.appendChild(n),n.addEventListener("click",function(){var t=s()(a.a.mark(function t(i){var r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i.stopPropagation(),(r=$(n).offset()).left+=$(n).width()+6,e.open(r);case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()),t}}]),t}(Da),Ma=function(){function e(t){u()(this,e),this.resourceData=t}return p()(e,[{key:"render",value:function(){return this.element||(this.element=this.makeElement()),this.element}},{key:"getThumbUrlList",value:function(){return[this.resourceData.thumbnailUrl]}},{key:"isValid",value:function(){return!0}},{key:"removeElement",value:function(){$(this.element).remove()}},{key:"makeElement",value:function(){var e=document.createElement("li");e.draggable=!0;var t=this.makeThumbImg();e.appendChild(t);var n=this.makeImageHoverLayer();return n.style.backgroundImage="url(".concat(t.src,")"),e.appendChild(n),e}},{key:"makeThumbImg",value:function(){var e=An.a.getImageElementWithReplaceableThumbnail(),t=this.getThumbUrlList();return e.src=A.ArrayUtil.isEmpty(t)?null:t[0],e}},{key:"updateThumbImg",value:function(){if(this.thumb){var e=this.getThumbUrlList();this.thumb.src=A.ArrayUtil.isEmpty(e)?null:e[0]}}},{key:"makeImageHoverLayer",value:function(){var e=this,t=document.createElement("div");t.className=R.a.BTN_LAYER,Object(K.setToolsIcon)(t,K.ToolsIcon.DOWNLOAD,!0).addEventListener("click",function(){var t=s()(a.a.mark(function t(n){var i,r,s;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n.stopPropagation(),n.preventDefault(),i=o.a.instance.user.email.split("@")[0],r=e.resourceData.requestId.startsWith("uto_")?{designerId:i,utoIdList:[e.resourceData.requestId.replace("uto_","")]}:{designerId:i,gettyIdList:[e.resourceData.requestId.replace("get_","")]},s=!0,t.next=7,Oa.a.requestExternalStickerDownload(r).catch(function(){s=!1,alert("다운로드 요청에 실패하였습니다.")});case 7:s&&Ca.a.open({title:"다운로드 요청 완료",subTitle:"메일을 확인해주세요.",hideCancelBtn:!0});case 8:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}());var n=new Ra(this.resourceData.requestId,this.resourceData.designerId,this.resourceData.stickerWidth,this.resourceData.stickerHeight,this.resourceData.extension,Math.max(this.resourceData.stickerIdList.length,1),this.resourceData.createDate).getDddot();return t.appendChild(n),t}},{key:"getEECItemData",value:function(e,t,n){}},{key:"getTemplateSize",value:function(){return null}}]),e}();!function(e){e[e.NONE=0]="NONE",e[e.STICKER=1]="STICKER",e[e.DESIGNER=2]="DESIGNER"}(ka||(ka={}));var Na,xa=function(e){function t(){var e;return u()(this,t),e=y()(this,L()(t).call(this)),m()(_()(e),"searchType",ka.NONE),e}var n;return b()(t,e),p()(t,[{key:"setKeyword",value:function(e){e.startsWith("@")?(this.searchType=ka.DESIGNER,this.keyword=e.replace("@","")):e.startsWith("get_")||e.startsWith("uto_")?(this.searchType=ka.STICKER,this.keyword=e):this.searchType=ka.NONE}},{key:"requestList",value:(n=s()(a.a.mark(function e(t){var n,i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oa.a.getExternalStickerList(t);case 2:return n=e.sent,i=n.data?n.data:[],e.abrupt("return",{items:i.map(function(e){return new Ma(e)}),totalRow:n.totalCount});case 5:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)})},{key:"getRequestParam",value:function(e){return{pageNo:e.page,pageSize:e.pageSize,requestId:this.searchType===ka.STICKER?this.keyword:null,designerId:this.searchType===ka.DESIGNER?this.keyword:null}}},{key:"getLibType",value:function(){return Dt.b.IMAGE_DOWNLOAD}}]),t}(Dt.a),Ba=function(e){function t(){var e;return u()(this,t),e=y()(this,L()(t).call(this)),m()(_()(e),"keywordSearchInfoPopup",new Aa),e.init(),e}var n,i;return b()(t,e),p()(t,[{key:"makeLib",value:function(){return new xa}},{key:"makeElement",value:function(){var e=document.createElement("div");return e.classList.add(R.a.LIBRARY_IMAGE_SEARCH),e.appendChild(this.makeSearchTool()),e.appendChild(this.makeInfoBtn()),e.appendChild(this.paginationListTool.render()),e}},{key:"makeSearchTool",value:function(){var e=this;return this.searchTool=new Xt.a(function(t){return e.setKeyword(t)},A.CRM.get(H.a.TOOLS_LIB_KEYWORD_PLACEHOLDER)),this.searchTool.render()}},{key:"setKeyword",value:(i=s()(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.lib.setKeyword(t),e.next=3,this.loadList();case 3:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"makeInfoBtn",value:function(){var e=this,t=document.createElement("button");return t.className=R.a.BTN_IMAGE_SEARCH_INFO,Object(K.setToolsIcon)(t,K.ToolsIcon.OUTLINE),t.addEventListener("click",function(){var n=$(t).offset();n.left+=$(t).width()+6,e.keywordSearchInfoPopup.open(n)}),t}},{key:"loadList",value:(n=s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.paginationListTool.initList();case 2:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"getIcon",value:function(){return K.ToolsIcon.GOSTY}},{key:"getName",value:function(){return H.a.TOOLS_LIB_IMAGE_SEARCH_TITLE}},{key:"getLeftMenuType",value:function(){return ct.b.IMAGE_SEARCH}},{key:"getJustifiedListToolOption",value:function(){return null}}]),t}(Ot.a),Ua=function(e){function t(){var e;return u()(this,t),e=y()(this,L()(t).call(this)),m()(_()(e),"menuMap",new Map),m()(_()(e),"isReadyList",!1),e.isVisibleOnlyAdmin=!0,e.isVisibleOnlyDev=!0,e.element=e.makeElement(),e.initMenuList([new Pa,new Ba,new Sa]),e}var n,i,r,o;return b()(t,e),p()(t,[{key:"initMenuList",value:function(e){var t=this;e.forEach(function(e){return function(e){t.menuMap.set(e.getLeftMenuType(),e),t.radioTool.addBtn({label:"# ".concat(A.CRM.get(e.getName())),value:e.getLeftMenuType()}),t.contentsWrap.appendChild(e.getElement())}(e)})}},{key:"makeElement",value:function(){var e=document.createElement("div");return e.className=R.a.LIBRARY_BACKGROUND,e.appendChild(this.makeRadioTool()),e.appendChild(this.makeContentsWrap()),e}},{key:"makeRadioTool",value:function(){var e=this;return this.radioTool=new V.a(function(t){return e.selectMenu(t)}),this.radioTool.render()}},{key:"makeContentsWrap",value:function(){return this.contentsWrap=document.createElement("div"),this.contentsWrap.className=R.a.CONTENTS_WRAP,this.contentsWrap}},{key:"selectMenu",value:(o=s()(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.menuMap.get(t)){e.next=3;break}throw new Error("메뉴가 존재하지 않습니다");case 3:return this.radioTool.select(t,!1),this.selectedMenu&&this.selectedMenu.inactive(),this.selectedMenu=n.active(),e.next=8,this.load();case 8:case"end":return e.stop()}},e,this)})),function(e){return o.apply(this,arguments)})},{key:"load",value:(r=s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isReadyList){e.next=3;break}return e.next=3,this.setReadyList();case 3:if(this.selectedMenu){e.next=7;break}return e.next=6,this.selectMenu(this.menuMap.keys().next().value);case 6:return e.abrupt("return");case 7:if(this.selectedMenu.isLoaded){e.next=10;break}return e.next=10,this.selectedMenu.load();case 10:this.isLoaded=!0;case 11:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"setReadyList",value:(i=s()(a.a.mark(function e(){var t,n,i,r,s,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=!0,n=!1,i=void 0,e.prev=3,r=this.menuMap.values()[Symbol.iterator]();case 5:if(t=(s=r.next()).done){e.next=12;break}return o=s.value,e.next=9,o.setReady();case 9:t=!0,e.next=5;break;case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),n=!0,i=e.t0;case 18:e.prev=18,e.prev=19,t||null==r.return||r.return();case 21:if(e.prev=21,!n){e.next=24;break}throw i;case 24:return e.finish(21);case 25:return e.finish(18);case 26:this.isReadyList=!0;case 27:case"end":return e.stop()}},e,this,[[3,14,18,26],[19,,21,25]])})),function(){return i.apply(this,arguments)})},{key:"render",value:function(e,t){return this.menuMap.forEach(function(n){return n.render(e,t)}),this.element}},{key:"getIcon",value:function(){return K.ToolsIcon.GOSTY}},{key:"getName",value:function(){return H.a.TOOLS_LIB_ADMIN_TOOL_TITLE}},{key:"setReady",value:(n=s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)})},{key:"getLeftMenuType",value:function(){return ct.b.ADMIN_TOOL}},{key:"getRenderStatus",value:function(e,t){}},{key:"isChangeContentsStatus",value:function(e){return!1}},{key:"isChangePositionStatus",value:function(e){return!1}}]),t}(fn.a),Ha=n(231),Ga=function(e){function t(){var e;return u()(this,t),(e=y()(this,L()(t).call(this))).element=e.makeElement(),e}var n,i;return b()(t,e),p()(t,[{key:"setReady",value:(i=s()(a.a.mark(function e(){var t=this;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ot.a.instance.init();case 2:window.addEventListener("resize",s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isActive){e.next=5;break}return e.next=3,ot.a.instance.justifyList();case 3:e.next=6;break;case 5:ot.a.instance.setJustifyRequire();case 6:case"end":return e.stop()}},e)})));case 3:case"end":return e.stop()}},e)})),function(){return i.apply(this,arguments)})},{key:"load",value:(n=s()(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!1,e.prev=1,!this.checkLoginRequire()){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,ot.a.instance.loadList();case 6:this.isLoaded=!0,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t=!0;case 12:t&&alert("리스트를 가져오는 도중 오류가 발생하였습니다.");case 13:case"end":return e.stop()}},e,this,[[1,9]])})),function(){return n.apply(this,arguments)})},{key:"makeElement",value:function(){return ot.a.instance.getElement()}},{key:"getIcon",value:function(){return ot.a.instance.getIcon()}},{key:"getName",value:function(){return H.a.TOOLS_LIB_UPLOAD_TITLE}},{key:"getLeftMenuType",value:function(){return ct.b.UPLOAD_LIB}},{key:"active",value:function(){return ot.a.instance.isInRecycleBin()||ot.a.instance.changeModeAndRenderLib(new Ha.b),this.isLoaded&&o.a.dispatch(new l.c(function(e,t,n){n.renderItemTools(e,t,!0)})),B()(L()(t.prototype),"active",this).call(this),ot.a.instance.isJustifyRequire()&&ot.a.instance.justifyList().catch(function(e){return console.error(e)}),this}},{key:"render",value:function(e,t){var n=this.getRenderStatus(e,t);return this.isChangeContentsStatus(n.contents)&&(this.isLoaded=!1,ot.a.instance.updateUI(e,t)),this.lastRenderStatus=n,this.element}},{key:"getRenderStatus",value:function(e,t){var n=t.env;return{contents:{isAdminMode:n.adminMode,isDevMode:n.devMode,paginationMode:t.config.leftMenuPaginationMode,accountId:t.user.accountId},position:{}}}},{key:"isChangeContentsStatus",value:function(e){if(!this.lastRenderStatus)return!0;var t=this.lastRenderStatus.contents;return t.isAdminMode!==e.isAdminMode||t.isDevMode!==e.isDevMode||t.paginationMode!==e.paginationMode||t.accountId!==e.accountId}},{key:"isChangePositionStatus",value:function(e){return!1}}]),t}(fn.a),za=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];u()(this,e),m()(this,"menuMap",new Map),this.element=this.makeElement(),t.forEach(function(e){return n.addTopMenu(e)}),i.forEach(function(e){return n.addBottomMenu(e)}),this.makeExpandBtn()}var t,n,i,r,c,d,h;return p()(e,[{key:"makeExpandBtn",value:function(){var e=this,t=this.expandBtn=document.createElement("div");t.className="library_expend_button",t.classList.add(R.a.ACTIVE),t.addEventListener("click",s()(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.toggleExpandLibrary();case 2:case"end":return t.stop()}},t)}))),Object(K.setToolsIcon)(t,K.ToolsIcon.MUCH_GREATER_THAN),this.navBottomElement.appendChild(t)}},{key:"makeElement",value:function(){var e=document.getElementById(an.a.librarySection);return null==e&&((e=document.createElement("section")).id="librarySection"),e.classList.add("expand_library"),e.appendChild(this.makeBackground()),e.appendChild(this.makeNavElement()),e.appendChild(this.makeContentsElement()),e}},{key:"makeBackground",value:function(){var e=this,t=document.createElement("div");return t.className="library_background",t.addEventListener("click",function(){return e.toggleShowLibrary()}),t}},{key:"makeNavElement",value:function(){var e=document.createElement("div");e.className="library_list",e.setAttribute("data-split","3");var t=document.createElement("div");this.navTopElement=document.createElement("ul"),this.navTopElement.className="nav_top",t.appendChild(this.navTopElement);var n=new G.a(!1,!0,"calc(100% - 100px)").render(t);return n.style.minWidth="100%",e.appendChild(n),this.navBottomElement=document.createElement("ul"),this.navBottomElement.className="nav_bottom",e.appendChild(this.navBottomElement),e}},{key:"makeContentsElement",value:function(){return this.contentsElement=document.createElement("div"),this.contentsElement.className="library_contents",this.contentsElement}},{key:"addTopMenu",value:function(e){this.addMenuContents(e),this.navTopElement.appendChild(this.makeMenuBtn(e))}},{key:"addBottomMenu",value:function(e){this.addMenuContents(e),this.navBottomElement.appendChild(this.makeMenuBtn(e))}},{key:"addMenuContents",value:function(e){this.menuMap.set(e.getLeftMenuType(),e),e.isVisible()||e.hide(),e.hasContents()&&this.contentsElement.appendChild(e.getElement())}},{key:"makeMenuBtn",value:function(e){var t=this,n=document.createElement("li");return n.addEventListener("click",function(){!t.activeItemMenu&&t.selectedMenu&&t.selectedMenu.getLeftMenuType()===e.getLeftMenuType()?o.a.isMobileMode()?t.hideLibrary():t.toggleExpandLibrary():(t.expandLibrary(),t.activeMenu(e.getLeftMenuType()))}),n.appendChild(e.getMenuBtn()),n}},{key:"setReady",value:(h=s()(a.a.mark(function e(){var t,n,i,r,s,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=!0,n=!1,i=void 0,e.prev=3,r=this.menuMap.values()[Symbol.iterator]();case 5:if(t=(s=r.next()).done){e.next=18;break}return o=s.value,e.prev=7,e.next=10,o.setReady();case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(7),console.log(e.t0);case 15:t=!0,e.next=5;break;case 18:e.next=24;break;case 20:e.prev=20,e.t1=e.catch(3),n=!0,i=e.t1;case 24:e.prev=24,e.prev=25,t||null==r.return||r.return();case 27:if(e.prev=27,!n){e.next=30;break}throw i;case 30:return e.finish(27);case 31:return e.finish(24);case 32:case"end":return e.stop()}},e,this,[[3,20,24,32],[7,12],[25,,27,31]])})),function(){return h.apply(this,arguments)})},{key:"setActiveItemMenu",value:function(e){this.activeItemMenu=e}},{key:"activeMenu",value:(d=s()(a.a.mark(function e(t){var n,i,r=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],(i=this.getMenu(t))&&(!this.selectedMenu||this.selectedMenu.getLeftMenuType()!==t)){e.next=5;break}return i&&i.active(),e.abrupt("return",i);case 5:if(i.hasContents()&&(this.selectedMenu&&this.selectedMenu.inactive(),this.selectedMenu=i.active()),n||i.isLoaded){e.next=15;break}return e.prev=7,e.next=10,i.load();case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(7),console.error(e.t0);case 15:return e.abrupt("return",i);case 16:case"end":return e.stop()}},e,this,[[7,12]])})),function(e){return d.apply(this,arguments)})},{key:"getMenu",value:function(e){return this.menuMap.get(e)}},{key:"render",value:function(e,t){var n=this.getRenderStatus(t);this.isChangeContentsStatus(n.contents)&&this.menuMap.forEach(function(e){e.isVisible()?e.show():e.hide()}),this.menuMap.forEach(function(n){try{n.render(e,t)}catch(e){console.error(e)}}),this.lastRenderStatus=n}},{key:"getRenderStatus",value:function(e){return{contents:{isAdminMode:e.env.adminMode,isDevMode:e.env.devMode},position:{}}}},{key:"isChangeContentsStatus",value:function(e){if(!this.lastRenderStatus)return!0;var t=this.lastRenderStatus.contents;return t.isAdminMode!==e.isAdminMode||t.isDevMode!==e.isDevMode}},{key:"isChangePositionStatus",value:function(e){return!1}},{key:"getElement",value:function(){return this.element}},{key:"toggleShowLibrary",value:function(){this.activeLibrary()?this.hideLibrary():this.showLibrary()}},{key:"activeLibrary",value:function(){return!!this.element&&this.element.classList.contains(R.a.ACTIVE)}},{key:"showLibrary",value:function(){Ee.a.scrollOff(),this.element.classList.add(R.a.ACTIVE),o.a.dispatch(new l.c(function(){var e=s()(a.a.mark(function e(t,n,i){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.setRotateSpecialBtn(!0));case 1:case"end":return e.stop()}},e)}));return function(t,n,i){return e.apply(this,arguments)}}())),this.expandLibrary();var e=this.getActiveMenu();e&&e.active()}},{key:"hideLibrary",value:function(){Ee.a.scrollOn(),this.element.classList.remove(R.a.ACTIVE),o.a.dispatch(new l.c(function(){var e=s()(a.a.mark(function e(t,n,i){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.setRotateSpecialBtn(!1));case 1:case"end":return e.stop()}},e)}));return function(t,n,i){return e.apply(this,arguments)}}()))}},{key:"toggleExpandLibrary",value:(c=s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.element.classList.contains("expand_library")){e.next=5;break}return e.next=3,this.contractLibrary();case 3:e.next=7;break;case 5:return e.next=7,this.expandLibrary();case 7:o.a.instance.renderer.canvasRenderer.pagingManager.refreshCache();case 8:case"end":return e.stop()}},e,this)})),function(){return c.apply(this,arguments)})},{key:"expandLibrary",value:(r=s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.expandBtn.classList.add(R.a.ACTIVE),this.element.classList.add("expand_library"),e.next=4,this.expandAnimation(!0);case 4:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"contractLibrary",value:(i=s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.expandBtn.classList.remove(R.a.ACTIVE),this.element.classList.remove("expand_library"),e.next=4,this.expandAnimation(!1);case 4:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)})},{key:"expandAnimation",value:(n=s()(a.a.mark(function e(t){var n=this;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e){var i=t?0:-n.contentsElement.offsetWidth;$(n.contentsElement).stop().animate({"margin-left":"".concat(i,"px")},{duration:300,done:function(){return e()},fail:function(){return e()}})}));case 1:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)})},{key:"getActiveMenu",value:function(){return this.selectedMenu}},{key:"addDesignData",value:(t=s()(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.menuMap.get(ct.b.DESIGN_LIB),e.next=3,n.addDesignListItem(t);case 3:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"updateListItemThumbnail",value:function(e,t){this.menuMap.get(ct.b.DESIGN_LIB).updateListItemThumbnail(e,t)}}]),e}();!function(e){e.TITLE="title",e.MENU="help_popup_menu",e.MENU_LIST="help_popup_menu_list",e.MENU_ITEM="help_popup_menu_item"}(Na||(Na={}));var Fa=function(e){function t(){return u()(this,t),y()(this,L()(t).call(this,t.POPUP_ID))}return b()(t,e),p()(t,[{key:"setActionSet",value:function(e){this.actionSet=e}},{key:"makeMenuElement",value:function(){var e=this.makeMenuWrapperElement();return e.appendChild(this.makeTitleElement()),e.appendChild(this.makeMenuListElement()),e}},{key:"makeTitleElement",value:function(){var e=this,t=document.createElement("div");return t.className=Na.TITLE,t.innerText=A.CRM.get(H.a.HELP_CENTER_TITLE),Object(K.setToolsIcon)(t,K.ToolsIcon.CLOSE).addEventListener("click",function(){return e.close()}),t}},{key:"makeMenuListElement",value:function(){var e=document.createElement("div");return e.className=Na.MENU_LIST,this.appendMenuItemElementByOption(e),e}},{key:"appendMenuItemElementByOption",value:function(e){var t=ln.a.helpCenterOption;t.bizhowsCenter&&e.appendChild(this.makeBizhowsCustomerCenterMenuItemElement()),t.copyright&&e.appendChild(this.makeCopyrightMenuItemElement()),t.print&&e.appendChild(this.makePrintMenuItemElement()),t.faq&&e.appendChild(this.makeFaqMenuItemElement()),t.zendesk&&e.appendChild(this.makeZendeskMenuItemElement())}},{key:"makeMenuWrapperElement",value:function(){var e=this.menuWrap=document.createElement("div");return e.tabIndex=-1,e.className=Na.MENU,e.addEventListener("keydown",function(e){return e.stopPropagation()}),e}},{key:"makeBizhowsCustomerCenterMenuItemElement",value:function(){var e=this;return this.makeMenuButtonElement(H.a.HELP_CENTER_BIZHOWS_CUSTOMER_SERVICE,K.ToolsIcon.OUTLINE,function(){e.actionSet&&e.actionSet.openBizhowsCenter()})}},{key:"makeCopyrightMenuItemElement",value:function(){var e=this;return this.makeMenuButtonElement(H.a.HELP_CENTER_COPYRIGHT_INFO,K.ToolsIcon.COPYRIGHT,function(){e.actionSet&&e.actionSet.openCopyrightInfoPage()})}},{key:"makePrintMenuItemElement",value:function(){var e=this;return this.makeMenuButtonElement(H.a.HELP_CENTER_PRINT,K.ToolsIcon.PRINT,function(){e.actionSet&&e.actionSet.openPrintInfoPage()})}},{key:"makeFaqMenuItemElement",value:function(){var e=this;return this.makeMenuButtonElement(H.a.HELP_CENTER_FAQ,K.ToolsIcon.HELP,function(){e.actionSet&&e.actionSet.openFaqInfoPage()})}},{key:"makeZendeskMenuItemElement",value:function(){var e=this;return this.makeMenuButtonElement(H.a.HELP_CENTER_ZENDESK,K.ToolsIcon.MESSAGE_ROUNDED,function(){e.actionSet&&e.actionSet.showZendesk()})}},{key:"makeMenuButtonElement",value:function(e,t,n){var i=this,a=document.createElement("button");a.classList.add(Na.MENU_ITEM),a.addEventListener("click",function(){n(),i.close()}),Object(K.setToolsIcon)(a,t);var r=document.createElement("span");return r.innerText=A.CRM.get(e),a.appendChild(r),a}},{key:"open",value:function(e){var n=B()(L()(t.prototype),"open",this).call(this,e);return this.actionSet&&this.actionSet.isMobileMode()&&this.element.classList.remove(R.a.OFFSET_POPUP),n}},{key:"getContents",value:function(){var e=B()(L()(t.prototype),"getContents",this).call(this);return e.appendChild(this.makeMenuElement()),e}}]),t}(Ai);m()(Fa,"POPUP_ID","help_center_popup");var Wa=function(){function e(){u()(this,e),m()(this,"wrapperId","helpCenter"),this.helpPopup=new Fa}return p()(e,[{key:"setReady",value:function(){var e=this,t=this.element=document.getElementById(this.wrapperId);return null!=t&&t.hasChildNodes()||((t=document.createElement("div")).id=this.wrapperId,t.className=R.a.HELP_CENTER,Object(K.setToolsIcon)(t,K.ToolsIcon.MESSAGE_ROUNDED),document.body.appendChild(t),t.addEventListener("click",function(n){n.stopPropagation(),e.openHelpPopup(t)})),this}},{key:"setActionSet",value:function(e){this.actionSet=e,this.helpPopup.setActionSet(e)}},{key:"openHelpPopup",value:function(e){var t=e.getBoundingClientRect();this.helpPopup.open({left:t.left,top:t.top})}}]),e}(),Ka=function(){function e(){u()(this,e),this.guidelineToolBox=new Va,this.button=this.makeBtnShowGuidelineToolbox()}return p()(e,[{key:"getBtnShowGuidelineToolbox",value:function(){return this.button}},{key:"showPopup",value:function(){this.guidelineToolBox&&this.guidelineToolBox.open()}},{key:"makeBtnShowGuidelineToolbox",value:function(){var e=this,t=document.createElement("button");return t.className=R.a.RIGHT_FLOATING_MENU_GUIDELINE_BTN,t.innerText="가이드선",Object(K.setToolsIcon)(t,K.ToolsIcon.GREATER_THAN,!0),t.addEventListener("click",function(){e.guidelineToolBox.isOpen?e.guidelineToolBox.close():($(".".concat(R.a.RIGHT_MENU_POPUP)).removeClass(R.a.SHOW),e.guidelineToolBox.open({right:135,top:113}))}),t}}]),e}(),Va=function(e){function t(){var e;return u()(this,t),(e=y()(this,L()(t).call(this))).id="guidelineToolBox",e.contents=e.makeElement(),e}return b()(t,e),p()(t,[{key:"makeElement",value:function(){var e=document.createElement("div");e.className=R.a.CONTENTS,e.classList.add(R.a.DISABLE);var t=document.createElement("div");t.innerText="가이드선",t.className=R.a.TITLE_WRAP,e.appendChild(t);var n=document.createElement("div");return n.className=R.a.CONTENTS_WRAP,n.appendChild(this.makeToggleBtnWrap()),n.appendChild(this.makeBtnAddGuidelineWrap()),n.appendChild(this.makeBtnAllDelGuidelineWrap()),e.appendChild(n),e}},{key:"makeToggleBtnWrap",value:function(){var e=document.createElement("div");e.className=R.a.GUIDELINE_TOGGLE_BTN_WRAP;var n=document.createElement("div"),i=document.createElement("span");i.innerText="가이드선 보기",n.appendChild(i),this.showGuidelineSwitch=this.renderSliderSwitch(t.SHOW_GUIDELINE,function(){return o.a.dispatch(new Ni.b)}),n.appendChild(this.showGuidelineSwitch);var a=document.createElement("span");a.innerHTML="가이드선 잠금";var r=document.createElement("div");return r.appendChild(a),this.toggleLockSwitch=this.renderSliderSwitch(t.LOCK_GUIDELINE,function(){return o.a.dispatch(new Ni.a)}),r.appendChild(this.toggleLockSwitch),e.appendChild(n),e.appendChild(r),e}},{key:"makeBtnAddGuidelineWrap",value:function(){var e=this,t=document.createElement("div");t.className=R.a.GUIDELINE_ADD_BTN_WRAP;var n=document.createElement("button");n.innerText="가로 가이드선 추가",n.addEventListener("click",function(){e.contents.classList.contains(R.a.DISABLE)||(o.a.dispatch(new Ni.c(xi.c.HOR)),te.a.sendEvent("가이드선","가이드선 추가",n.innerText,!0))}),this.btnAppendHorGuideline=n;var i=document.createElement("button");return i.innerText="세로 가이드선 추가",i.addEventListener("click",function(){e.contents.classList.contains(R.a.DISABLE)||(o.a.dispatch(new Ni.c(xi.c.VER)),te.a.sendEvent("가이드선","가이드선 추가",i.innerText,!0))}),this.btnAppendVerGuideline=i,t.appendChild(n),t.appendChild(i),t}},{key:"makeBtnAllDelGuidelineWrap",value:function(){var e=this,t=document.createElement("div");t.className=R.a.GUIDELINE_ALL_DEL_BTN_WRAP;var n=document.createElement("button");return this.btnRemoveAllGuideline=n,n.innerText="가이드선 전체 삭제",n.addEventListener("click",function(){e.contents.classList.contains(R.a.DISABLE)||(o.a.dispatch(new Ni.d),te.a.sendEvent("가이드선","가이드선 전체 삭제",n.innerText,!0))}),t.appendChild(n),t}},{key:"renderSliderSwitch",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=document.createElement("label");n.classList.add("switch"),n.addEventListener("click",function(e){e.stopPropagation(),t&&t(i.checked)});var i=document.createElement("input");i.type="checkbox",e&&(i.id=String(e),i.name=String(e));var a=document.createElement("span");return a.classList.add("slider"),n.appendChild(i),n.appendChild(a),n}},{key:"getContents",value:function(){return this.contents}},{key:"getId",value:function(){return this.id}},{key:"updateUI",value:function(){}}]),t}(U.a);m()(Va,"SHOW_GUIDELINE","showGuideline"),m()(Va,"LOCK_GUIDELINE","lockGuideline");var Ya=function(){function e(){u()(this,e)}var t;return p()(e,[{key:"setReady",value:(t=s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.menuWrapElem=document.getElementById("rightFloatingMenu"),this.guidelineToolManager=new Ka,this.sheetSizeSelector=new Pi(mi.RIGHT_FLOATING_MENU);case 3:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"showGuideLinePopup",value:function(){this.guidelineToolManager&&this.guidelineToolManager.showPopup()}},{key:"makeContour",value:function(){var e=document.createElement("div");return e.className=R.a.CONTOUR,e}},{key:"render",value:function(e,t){var n=this.getRenderStatus(t);this.isChangeContentsStatus(n.contents)&&(t.env.adminMode?this.menuWrapElem.classList.add(R.a.ADMIN_MODE):this.menuWrapElem.classList.remove(R.a.ADMIN_MODE));this.sheetSizeSelector.render(e,t),this.lastRenderStatus=n}},{key:"getRenderStatus",value:function(e){return{contents:{adminMode:e.env.adminMode},position:{}}}},{key:"isChangeContentsStatus",value:function(e){return!this.lastRenderStatus||this.lastRenderStatus.contents.adminMode!==e.adminMode}},{key:"isChangePositionStatus",value:function(e){return!1}}]),e}(),ja=n(299),$a=function(e){function t(e,n,i){var a;return u()(this,t),a=y()(this,L()(t).call(this)),m()(_()(a),"btn",document.createElement("div")),m()(_()(a),"label",document.createElement("div")),m()(_()(a),"listWrap",document.createElement("div")),m()(_()(a),"leftUl",document.createElement("ul")),m()(_()(a),"rightUl",document.createElement("ul")),a.list=e,a.dataKeyMap=n,a.listener=i,a}return b()(t,e),p()(t,[{key:"render",value:function(){return this.element.className=R.a.TWO_LAYER_SELECT_TOOL,this.btn.appendChild(this.label),Object(K.setToolsIcon)(this.btn,K.ToolsIcon.CARET,!0),this.btn.className=R.a.BTN_SELECT,this.element.appendChild(this.btn),this.listWrap.className=R.a.SELECT_LIST_WRAP,this.listWrap.appendChild(this.leftUl),this.listWrap.appendChild(this.rightUl),this.element.appendChild(this.listWrap),this.renderComboList(),this.addEventListener(),this.element}},{key:"renderComboList",value:function(){var e=this,t=document.createDocumentFragment(),n=document.createDocumentFragment();this.list.forEach(function(i,a){var r=e.makeLi(i,a);0===a&&r.classList.add(R.a.ACTIVE),Object(K.setToolsIcon)(r,K.ToolsIcon.GREATER_THAN,!0),t.appendChild(r);var s=i[e.dataKeyMap.list];s&&s.forEach(function(t,i){var r=e.makeLi(t,a,i);0===a&&(r.classList.add(R.a.SHOW),0===i&&(r.classList.add(R.a.ACTIVE),e.title=t[e.dataKeyMap.label],e.label.innerText=e.title)),n.appendChild(r)})}),this.leftUl.appendChild(t),this.rightUl.appendChild(n)}},{key:"makeLi",value:function(e,n,i){var a=$("<li>".concat(e[this.dataKeyMap.label],"</li>"));return a.data(e),a.data(t.TAB_IDX_KEY,n),i&&a.data(t.DATA_IDX_KEY,i),a[0]}},{key:"expand",value:function(){var e=this;this.listWrap.classList.add(R.a.ACTIVE),$(document.body).off(t.CUSTOM_CLICK_EVENT_NAME).on(t.CUSTOM_CLICK_EVENT_NAME,function(n){var i=n.target;e.checkFold(i)&&(e.listWrap.classList.remove(R.a.ACTIVE),$(document.body).off(t.CUSTOM_CLICK_EVENT_NAME))})}},{key:"fold",value:function(){this.listWrap.classList.remove(R.a.ACTIVE),$(document.body).off(t.CUSTOM_CLICK_EVENT_NAME)}},{key:"checkFold",value:function(e){return e!==this.btn&&!$.contains(this.btn,e)&&e!==this.listWrap&&!$.contains(this.listWrap,e)}},{key:"addEventListener",value:function(){var e=this;$(this.btn).on("click",function(t){e.listWrap.classList.contains(R.a.ACTIVE)?e.fold():e.expand()}),$(this.leftUl).on("mouseover","li",function(n){var i=!0,a=!1,r=void 0;try{for(var s,o=e.leftUl.childNodes[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){s.value.classList.remove(R.a.HOVER)}}catch(e){a=!0,r=e}finally{try{i||null==o.return||o.return()}finally{if(a)throw r}}var l=n.currentTarget;l.classList.add(R.a.HOVER);var c=$(l).data(t.TAB_IDX_KEY),u=!0,d=!1,p=void 0;try{for(var h,m=e.rightUl.childNodes[Symbol.iterator]();!(u=(h=m.next()).done);u=!0){var g=h.value;t.showRightLi(g,c)}}catch(e){d=!0,p=e}finally{try{u||null==m.return||m.return()}finally{if(d)throw p}}}).on("click","li",function(n){var i=n.currentTarget,a=$(i).data(t.TAB_IDX_KEY),r=!0,s=!1,o=void 0;try{for(var l,c=e.rightUl.childNodes[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var u=l.value;if($(u).data(t.TAB_IDX_KEY)===a){e.select(u);break}}}catch(e){s=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(s)throw o}}}),$(this.rightUl).on("click","li",function(t){e.select(t.currentTarget)})}},{key:"select",value:function(e){var n=$(e).data(t.TAB_IDX_KEY),i=!0,a=!1,r=void 0;try{for(var s,o=this.rightUl.childNodes[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value;t.showRightLi(l,n),l.classList.remove(R.a.ACTIVE)}}catch(e){a=!0,r=e}finally{try{i||null==o.return||o.return()}finally{if(a)throw r}}e.classList.add(R.a.ACTIVE);var c=$(e).data(),u=!0,d=!1,p=void 0;try{for(var h,m=this.leftUl.childNodes[Symbol.iterator]();!(u=(h=m.next()).done);u=!0){var g=h.value,v=$(g).data();v[t.TAB_IDX_KEY]===c[t.TAB_IDX_KEY]?(g.classList.add(R.a.ACTIVE),g.classList.remove(R.a.HOVER),v[this.dataKeyMap.label]):g.classList.remove(R.a.ACTIVE)}}catch(e){d=!0,p=e}finally{try{u||null==m.return||m.return()}finally{if(d)throw p}}this.title=c[this.dataKeyMap.label],this.label.innerText=this.title,this.listener(c),this.fold()}},{key:"selectFirst",value:function(){this.selectIdx(0)}},{key:"selectIdx",value:function(e){var t=this.rightUl.childNodes.item(e);this.select(t)}},{key:"getList",value:function(){return this.list}},{key:"setGtmData",value:function(e){te.a.setGTMValue(this.listWrap,e)}},{key:"getTitle",value:function(){return this.title}}],[{key:"showRightLi",value:function(e,n){$(e).data(t.TAB_IDX_KEY)===n?e.classList.add(R.a.SHOW):e.classList.remove(R.a.SHOW)}}]),t}(ri.a);m()($a,"TAB_IDX_KEY","_tabIdx"),m()($a,"DATA_IDX_KEY","_dataIdx"),m()($a,"CUSTOM_CLICK_EVENT_NAME","click.DESIGN_TYPE_SELECT");var Xa=function(e){function t(){return u()(this,t),y()(this,L()(t).apply(this,arguments))}return b()(t,e),p()(t,[{key:"open",value:function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return n&&A.CooKey.BIZ_TEMPLATE_NOTICE===A.CookieUtil.getCookie(A.CooKey.BIZ_TEMPLATE_NOTICE)?this:(B()(L()(t.prototype),"open",this).call(this,e),this.checkboxCookieClose.checked=n,n?this.checkboxCookieCloseWrap.classList.add(R.a.ACTIVE):this.checkboxCookieCloseWrap.classList.remove(R.a.ACTIVE),this)}},{key:"getContents",value:function(){var e=document.createElement("div");return e.appendChild(this.makeBody()),e.appendChild(this.makeFooter()),e}},{key:"makeBody",value:function(){var e=document.createElement("div");e.className=R.a.BODY;var t=this.makeHTMLParagraph("비즈하우스 템플릿 안내");t.className=R.a.TITLE,e.appendChild(t),e.appendChild(this.makeHTMLParagraph("<b>비즈템플릿</b>을 사용하기 전 아래의 유의사항을 확인해주세요.",!0));var n=document.createElement("div");n.className=R.a.CONTENTS,n.appendChild(this.makeHTMLParagraph("① 일부 템플릿은 정상적으로 보이지 않을 수 있습니다.")),n.appendChild(this.makeHTMLParagraph("② 현재 인쇄출력 용도로는 제공하고 있지 않습니다. 인쇄출력용 디자인이"));var i=this.makeHTMLParagraph("");return i.appendChild(this.makeHTMLSpan("　필요한 경우 ")),i.appendChild(this.makeHTMLLink("비즈하우스","http://www.bizhows.com")),i.appendChild(this.makeHTMLSpan(" 서비스를 이용해주시기 바랍니다.")),n.appendChild(i),e.appendChild(n),e.appendChild(this.makeHTMLParagraph("현재 비즈템플릿은 미리캔버스에서 사용하기 위해")),e.appendChild(this.makeHTMLParagraph("최적화 변환 작업 중입니다.")),e}},{key:"makeFooter",value:function(){var e=this,t=document.createElement("div");t.className=R.a.FOOTER,this.checkboxCookieCloseWrap=document.createElement("label"),this.checkboxCookieClose=document.createElement("input"),this.checkboxCookieClose.type="checkbox",this.checkboxCookieCloseWrap.appendChild(this.checkboxCookieClose),Object(K.setToolsIcon)(this.checkboxCookieCloseWrap,K.ToolsIcon.CHECK,!0),this.checkboxCookieCloseWrap.appendChild(this.makeHTMLSpan("7일간 보지 않기")),t.appendChild(this.checkboxCookieCloseWrap);var n=document.createElement("button");return n.innerText="닫기",n.addEventListener("click",function(){e.checkboxCookieClose.checked&&A.CookieUtil.setCookie(A.CooKey.BIZ_TEMPLATE_NOTICE,A.CooKey.BIZ_TEMPLATE_NOTICE,7,0,0),e.close()}),t.appendChild(n),t}},{key:"makeHTMLParagraph",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=document.createElement("p");return t?n.innerHTML=e:n.innerText=e,n}},{key:"makeHTMLSpan",value:function(e){var t=document.createElement("span");return t.innerText=e,t}},{key:"makeHTMLLink",value:function(e,t){var n=document.createElement("a");return n.innerText=e,n.href=t,n.target="_blank",n}},{key:"getId",value:function(){return"bizTemplateNoticePopup"}},{key:"updateUI",value:function(){}}]),t}(U.a);m()(Xa,"instance",new Xa);var Za=function(e){function t(){return u()(this,t),y()(this,L()(t).apply(this,arguments))}var n;return b()(t,e),p()(t,[{key:"loadTemplateInfo",value:(n=s()(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ja.a.getBizhowsTemplate(this.openParam.designIdx);case 2:t=e.sent,this.templateInfoElementMap.title.innerText=t.designTitle,this.templateInfoElementMap.designerId&&(this.templateInfoElementMap.designerId.innerText="By ".concat(t.designerId)),this.templateInfoElementMap.keywords&&this.updateKeywordsUI(t.manualKeywords.concat(t.autoKeywords));case 6:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"makeElement",value:function(){B()(L()(t.prototype),"makeElement",this).call(this),this.makeHeader(),this.makeKeyword(),this.option.changeTemplate&&this.makeTemplateChangeBtn(),this.makeFavoritesBtn(),this.option.moveBiz&&this.makebtnMoveBiz()}},{key:"openTemplateInfo",value:function(e){B()(L()(t.prototype),"openTemplateInfo",this).call(this,e),!e.bizDetailSiteMapIdx&&this.contents.contains(this.bizBtnWrap)&&this.contents.removeChild(this.bizBtnWrap)}},{key:"makebtnMoveBiz",value:function(){var e=this,t=this.bizBtnWrap=document.createElement("div");t.className=R.a.BUTTON_WRAP,t.classList.add(aa.a.MOVE_BIZ);var n=document.createElement("button");n.className=R.a.BUTTON_BIZ,n.innerText="비즈하우스에서 보기",Object(K.setToolsIcon)(n,K.ToolsIcon.LIBRARY_DESIGN),n.addEventListener("click",function(){return e.moveBizDetailPage()}),t.appendChild(n),this.contents.appendChild(t)}},{key:"moveBizDetailPage",value:function(){var e=A.CRM.get(H.a.BIZ_DESIGN_DETAIL_PAGE).replace("${siteMapIdx}",String(this.openParam.bizDetailSiteMapIdx)).replace("${designIdx}",String(this.openParam.designIdx));window.open(e,"_blank")}},{key:"isTemplate",value:function(){return!0}},{key:"hasDesignerId",value:function(){return!0}},{key:"getId",value:function(){return"bizTemplateDddotPopup"}}]),t}(ra),qa=n(278),Qa=function(e){function t(e,n,i,a){var r;return u()(this,t),(r=y()(this,L()(t).call(this,new Nt.b(e,Gt.a.TEMPLATE,ve.a.BIZHOWS)))).sheetSize=n,r.openSubPage=i,r.openDddotPopup=a,r}return b()(t,e),p()(t,[{key:"getThumbUrlList",value:function(){if(this.thumbUrlList)return this.thumbUrlList;if(A.ArrayUtil.isEmpty(this.listItemData.resourceData.imgUrlList)){this.thumbUrlList=[];var e,t=0;do{(e=this.listItemData.resourceData["imgURL".concat(t++)])&&this.thumbUrlList.push(e)}while(null!=e)}else this.thumbUrlList=this.listItemData.resourceData.imgUrlList;return this.thumbUrlList}},{key:"doAction",value:function(){var e=this.getThumbUrlList();A.ArrayUtil.isEmpty(e)||e.length<2?(this.closeSubPage(),B()(L()(t.prototype),"doAction",this).call(this)):this.openSubPage(this)}},{key:"closeSubPage",value:function(){$(this.element.parentElement).children(".".concat(R.a.SUB_PAGE_OPENED)).removeClass(R.a.SUB_PAGE_OPENED)}},{key:"makeHoverLayer",value:function(){var e=B()(L()(t.prototype),"makeHoverLayer",this).call(this);e.appendChild(this.makeDddot());var n=this.getThumbUrlList();if(!A.ArrayUtil.isEmpty(n)&&n.length>1){var i=document.createElement("label");i.innerText=String(n.length),i.className=R.a.PAGE_CNT,e.appendChild(i)}return e}},{key:"makeDddot",value:function(){var e=this,t=Ut.a.makeDddotBtn(function(){At.a.sendDetailClick(e.listItemData.myCollectionPk),e.openDddotPopup(e,$(t).offset())});return t}},{key:"getEECItemData",value:function(e,t,n){var i=this.listItemData.resourceData.pkName||this.listItemData.resourceData.designIdx,a="비즈템플릿:".concat(i),r=e.split(">");return{name:a,id:a,price:0,brand:"템플릿",category:e,variant:3===r.length?r[1].length>10?r[2]:r[2].indexOf(r[1])>-1?r[2]:"".concat(r[1]," ").concat(r[2]):r.join(" "),list:t,position:n}}},{key:"getTemplateSize",value:function(){return{width:this.sheetSize.width,height:this.sheetSize.height}}}]),t}(ha),Ja=function(e){function t(){var e;return u()(this,t),e=y()(this,L()(t).call(this)),m()(_()(e),"initBizTemplateNoticeCookiePopup",!1),e.option=ln.a.templateLibMenuOption,e.init(),e.dddotPopup=new Za({searchKeywordCallback:function(t){return e.setKeyword(t)}}),e}var n,i,r,l,c;return b()(t,e),p()(t,[{key:"makeLib",value:function(){var e=this;return new ja.a({makeListItem:function(t){return e.makeListItem(t)}})}},{key:"setKeyword",value:(c=s()(a.a.mark(function e(t){var n,i=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!(i.length>1&&void 0!==i[1])||i[1],this.searchTool.updateUI(t),this.lib.setKeyword(t),!n){e.next=6;break}return e.next=6,this.loadList();case 6:case"end":return e.stop()}},e,this)})),function(e){return c.apply(this,arguments)})},{key:"setTemplateParam",value:(l=s()(a.a.mark(function e(t){var n,i=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!(i.length>1&&void 0!==i[1])||i[1],this.lib.setTemplateParam(t),!n){e.next=5;break}return e.next=5,this.loadList();case 5:case"end":return e.stop()}},e,this)})),function(e){return l.apply(this,arguments)})},{key:"setLinked",value:(r=s()(a.a.mark(function e(t){var n,i=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!(i.length>1&&void 0!==i[1])||i[1],this.linkedRadioTool.select(t,!1),this.lib.setLinked("true"===t),!n){e.next=6;break}return e.next=6,this.loadList();case 6:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"loadList",value:(i=s()(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.openBizTemplateNoticePopup(),this.setListColSize(),e.next=4,this.paginationListTool.initList();case 4:t=e.sent.totalRow;try{this.loadListAfter(t)}catch(e){0}case 6:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)})},{key:"loadListAfter",value:function(e){var t=this.lib.getKeyword()||"",n=this.templateTypeTool.getTitle();t&&te.a.sendSearchReport({type:te.b.BIZ_TEMPLATE,keyword:t,category:n,totalRow:e})}},{key:"setListColSize",value:function(){this.paginationListTool.listTool.element.setAttribute("data-cols",String(this.getListColSize())),this.paginationListTool.colCount=this.getListColSize()}},{key:"getListColSize",value:function(){var e=this.lib.getTemplateParam().sheetSize;return qa.a.getColsByRatio(e.width/e.height)}},{key:"makeElement",value:function(){var e=document.createElement("div");return e.className=R.a.LIBRARY_BIZ_TEMPLATE,this.option.header&&e.appendChild(this.makeHeader()),e.appendChild(this.makeAdminUI()),e.appendChild(this.makeSearchTool()),e.appendChild(this.makeTemplateTypeTool()),e.appendChild(this.makeListTool()),e}},{key:"makeHeader",value:function(){var e=this,t=document.createElement("div");t.className=R.a.HEADER;var n=document.createElement("a");n.href="http://www.bizhows.com",n.target="_blank",t.appendChild(n);var i=document.createElement("button");Object(K.setToolsIcon)(i,K.ToolsIcon.OUTLINE);var a=document.createElement("span");return a.innerText=A.CRM.get(H.a.TOOLS_LIB_BIZ_TEMPLATE_BTN_NOTICE),i.appendChild(a),i.addEventListener("click",function(){return e.openBizTemplateNoticePopup(!1)}),t.appendChild(i),t}},{key:"makeAdminUI",value:function(){var e=this;return this.adminUIElement=document.createElement("div"),this.adminUIElement.className=R.a.ADMIN_UI,this.linkedRadioTool=new V.a(function(t){return e.setLinked(t)},[{label:"호환",value:"true"},{label:"비호환",value:"false",selected:!0}]),this.adminUIElement.appendChild(this.linkedRadioTool.render()),this.adminUIElement}},{key:"makeSearchTool",value:function(){var e=this;return this.searchTool=new Xt.a(function(t){return e.setKeyword(t)},A.CRM.get(H.a.TOOLS_LIB_KEYWORD_PLACEHOLDER)),this.searchTool.render()}},{key:"makeTemplateTypeTool",value:function(){var e=this,t=Object(ja.b)(),n=ln.a.templateTypeInfo,i=n.name!==pi.a.NONE?t.filter(function(e){return e.name===n.name}):t;this.templateTypeTool=new $a(i,{label:"name",list:"templateParamList"},function(t){return e.setTemplateParam(t)}),this.templateTypeTool.setGtmData("lib_biz_template");var a=this.templateTypeTool.render();return this.option.templateTypeTool||a.classList.add(R.a.HIDE),a}},{key:"makeListTool",value:function(){var e=this;return this.subPagesTool=new ca.a(function(t,n){var i=t.listItemData.dropEventKey,a=P.b.getDesignParam(i,t.listItemData.myCollectionPk.repositoryType);o.a.dispatch(new la.a(a,n,o.a.instance.renderPageIdx,e.lib.getTemplateParam().sheetSize))}),this.subPagesTool.render(),this.paginationListTool.render()}},{key:"getJustifiedListToolOption",value:function(){return null}},{key:"setReady",value:(n=s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setLinked("false",!1);case 2:return e.next=4,this.setTemplateParam(this.getTemplateParam(),!1);case 4:return e.next=6,B()(L()(t.prototype),"setReady",this).call(this);case 6:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"getTemplateParam",value:function(){var e=this.templateTypeTool.getList()[0],t=ln.a.templateTypeInfo;return t.name!==pi.a.NONE&&t.size!==pi.b.NONE?e.templateParamList.find(function(e){return e.name===t.size}):e.templateParamList[0]}},{key:"openBizTemplateNoticePopup",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e&&this.initBizTemplateNoticeCookiePopup||(this.initBizTemplateNoticeCookiePopup=!0,Xa.instance.open(null,e))}},{key:"updateUI",value:function(){B()(L()(t.prototype),"updateUI",this).call(this),o.a.getEnv().adminMode?this.adminUIElement.classList.add(R.a.ACTIVE):this.adminUIElement.classList.remove(R.a.ACTIVE)}},{key:"makeListItem",value:function(e){var t=this;return new Qa(e,this.lib.getTemplateParam().sheetSize,function(e){return t.openSubPage(e)},function(e,n){return t.openDddotPopup(e,n)})}},{key:"openSubPage",value:function(e){var t=e.element;if($(this.subPagesTool.element).remove(),t.classList.contains(R.a.SUB_PAGE_OPENED))t.classList.remove(R.a.SUB_PAGE_OPENED);else{for(var n=t.parentNode.children,i=0,a=n.length;i<a;i++)n[i].classList.remove(R.a.SUB_PAGE_OPENED);t.classList.add(R.a.SUB_PAGE_OPENED),this.subPagesTool.updateUI({listItem:e,cols:this.getListColSize()}),this.paginationListTool.listTool.insertElement(this.subPagesTool.element,ca.a.getNextLineLiIdx(t)),this.paginationListTool.scrollElement.setScrollY($(t).position().top)}}},{key:"openDddotPopup",value:function(e,t){var n=e.listItemData.myCollectionPk;this.dddotPopup.openTemplateInfo({designIdx:Number(n.referenceKey),repositoryType:n.repositoryType,favoritesParam:{useFavorite:!0,myCollectionPk:n},offset:t,templateLoadKey:e.listItemData.dropEventKey,bizDetailSiteMapIdx:this.lib.getTemplateParam().siteMapIdx,sheetSize:this.lib.getTemplateParam().sheetSize})}},{key:"getIcon",value:function(){return K.ToolsIcon.BIZ}},{key:"getName",value:function(){return H.a.TOOLS_LIB_BIZ_TEMPLATE_TITLE}},{key:"getLeftMenuType",value:function(){return ct.b.BIZ_TEMPLATE_LIB}},{key:"getItemUseEventData",value:function(){var e=this.lib.getGTMLibData();return{type:te.b.BIZ_TEMPLATE,category:e.category,keyword:e.keyword}}}]),t}(Ot.a),er=function(e){function t(){return u()(this,t),y()(this,L()(t).apply(this,arguments))}var n;return b()(t,e),p()(t,[{key:"makeElement",value:function(){B()(L()(t.prototype),"makeElement",this).call(this),this.makeHeader(),this.makeKeyword(),this.option.changeTemplate&&this.makeTemplateChangeBtn(),this.makeFavoritesBtn()}},{key:"loadTemplateInfo",value:(n=s()(a.a.mark(function e(){var t,n,i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={title:"",updateDate:0,creatorAccountEmail:"",keywords:[]},e.next=3,ge.a.findOne(this.openParam.designIdx);case 3:n=e.sent,Object.assign(t,n),this.templateInfoElementMap.title.innerText=t.title,this.templateInfoElementMap.updateDate&&(this.templateInfoElementMap.updateDate.innerText="".concat(A.DateUtil.toString(new Date(t.updateDate),"yyyy-MM-dd HH:mm"))),this.templateInfoElementMap.designerId&&(i=t.creatorAccountEmail.slice(0,t.creatorAccountEmail.indexOf("@")),this.templateInfoElementMap.designerId.innerText="By ".concat(i)),this.templateInfoElementMap.keywords&&this.updateKeywordsUI(t.keywords);case 9:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"makeTemplateTitleElem",value:function(){var e=this,t=document.createElement("span");return t.addEventListener("click",function(){var t=e.openParam.templateType,n=(new A.RequestParam).set(A.RequestParamKey.TEMPLATE_IDX,String(e.openParam.designIdx)).set(A.RequestParamKey.SHEET_W,String(t.width)).set(A.RequestParamKey.SHEET_H,String(t.height)).set(A.RequestParamKey.TEMPLATE_TYPE_ID,String(t.id));window.open("".concat(A.CRM.getBasePath(),"design?").concat(n.serialize()),"_blank")}),this.option.openNewTab||t.classList.add(R.a.DISABLE),t}},{key:"isTemplate",value:function(){return!0}},{key:"hasDesignerId",value:function(){return!0}},{key:"getId",value:function(){return"unicornTemplateDddotPopup"}}]),t}(ra),tr=n(91),nr=function(e){function t(e,n,i){var a;return u()(this,t),(a=y()(this,L()(t).call(this,new Nt.b(e,Gt.a.TEMPLATE,ve.a.UNICORN)))).openSubPage=n,a.dddotPopup=i,a}return b()(t,e),p()(t,[{key:"setTemplateType",value:function(e){return this.templateType=e,this}},{key:"getTemplateType",value:function(){return this.templateType}},{key:"getThumbUrlList",value:function(){return this.listItemData.resourceData.pageList.map(function(e){return e.thumb300Url})}},{key:"doAction",value:function(){var e=this.getThumbUrlList();A.ArrayUtil.isEmpty(e)||e.length<2?(this.closeSubPage(),B()(L()(t.prototype),"doAction",this).call(this)):this.openSubPage(this)}},{key:"closeSubPage",value:function(){$(this.element.parentElement).children(".".concat(R.a.SUB_PAGE_OPENED)).removeClass(R.a.SUB_PAGE_OPENED)}},{key:"makeHoverLayer",value:function(){var e=this,n=B()(L()(t.prototype),"makeHoverLayer",this).call(this),i=Object(K.setToolsIcon)(n,K.ToolsIcon.SETTINGS,!0);i.addEventListener("click",function(t){t.stopPropagation(),o.a.dispatch(new l.c(function(){var t=s()(a.a.mark(function t(n,i,r){var s,o,l,c;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s=Number(e.listItemData.myCollectionPk.referenceKey),t.next=3,tr.a.instance.getTemplateProjectList("templateIdx=".concat(s));case 3:if(o=t.sent,!A.ArrayUtil.isEmpty(o.list)){t.next=7;break}return alert("프로젝트가 없는 템플릿입니다. (구 템플릿 데이터) idx = ".concat(s)),t.abrupt("return");case 7:return l=r.rightBar.templateProjectManagementMenu,t.next=10,l.loadProject(o.list[0].idx);case 10:if(c=l.moveTemplateListTab().getTemplateListView(),c.selectTemplate(s)){t.next=15;break}return t.next=15,c.searchTemplate(s);case 15:case"end":return t.stop()}},t)}));return function(e,n,i){return t.apply(this,arguments)}}()))}),n.appendChild(i),n.appendChild(this.makeDddot());var r=this.getThumbUrlList();if(!A.ArrayUtil.isEmpty(r)&&r.length>1){var c=document.createElement("label");c.innerText=String(r.length),c.className=R.a.PAGE_CNT,n.appendChild(c)}return n}},{key:"makeDddot",value:function(){var e=this,t=document.createElement("div");t.className=R.a.DDDOT_WRAP;var n=Object(K.setToolsIcon)(t,K.ToolsIcon.DDDOT);return t.appendChild(n),n.addEventListener("click",function(){var t=s()(a.a.mark(function t(i){var r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i.stopPropagation(),r=e.listItemData.myCollectionPk,e.dddotPopup.openTemplateInfo({designIdx:Number(r.referenceKey),repositoryType:r.repositoryType,favoritesParam:{useFavorite:!0,myCollectionPk:r},offset:$(n).offset(),templateLoadKey:e.listItemData.dropEventKey,templateType:e.getTemplateType()}),At.a.sendDetailClick(e.listItemData.myCollectionPk);case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()),t}},{key:"getEECItemData",value:function(e,t,n){var i=this.listItemData.myCollectionPk,a=Object(Gt.c)(i.resourceType),r=this.getVariant(),s="".concat(a,":").concat(i.referenceKey);return{name:s,id:s,price:0,brand:"템플릿",category:e,variant:r,list:t,position:n}}},{key:"getVariant",value:function(){var e=this.getTemplateType();return e.groupTitle?"".concat(e.groupTitle," ").concat(e.title):e.title}},{key:"makeElement",value:function(){var e=this.getMaxThumbCnt();if(e>1){var n=this.makeDefaultLi(),i=document.createDocumentFragment(),a=0,r=!0,s=!1,o=void 0;try{for(var l,c=this.getThumbUrlList()[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var u=l.value;if(++a>e)break;var d=An.a.getImageElementWithReplaceableThumbnail();d.src=u,i.appendChild(d)}}catch(e){s=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(s)throw o}}return n.appendChild(i),n.appendChild(this.makeHoverLayer()),n}return B()(L()(t.prototype),"makeElement",this).call(this)}},{key:"getMaxThumbCnt",value:function(){if(!this.templateType)return 1;switch(this.templateType.id){case"detail_page":return 3;default:return 1}}},{key:"getTemplateSize",value:function(){return{width:this.templateType.width,height:this.templateType.height}}}]),t}(ha),ir=function(e){function t(){var e;return u()(this,t),e=y()(this,L()(t).call(this)),m()(_()(e),"isReadyList",!1),e.init(),e.dddotPopup=new er({searchKeywordCallback:function(t){return e.setKeyword(t)}}),e}var n,i,r,l,c,d,h,g;return b()(t,e),p()(t,[{key:"setReady",value:(g=s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B()(L()(t.prototype),"setReady",this).call(this);case 2:return e.next=4,this.loadTemplateTypeList();case 4:case"end":return e.stop()}},e,this)})),function(){return g.apply(this,arguments)})},{key:"makeLib",value:function(){var e=this;return new qa.a({makeListItem:function(t){return e.makeListItem(t)}})}},{key:"active",value:function(){return B()(L()(t.prototype),"active",this).call(this),this.lib.isMultiType()&&this.multiTypeListTool.loadWaitQueue().catch(function(e){return console.error(e)}),this}},{key:"makeElement",value:function(){var e=document.createElement("div");return e.className=R.a.LIBRARY_TEMPLATE,e.appendChild(this.makeAdminUI()),e.appendChild(this.makeSearchTool()),e.appendChild(this.makeTemplateTypeTool()),e.appendChild(this.makeListTool()),e.appendChild(this.makeMultiTypeListTool()),e}},{key:"makeSearchTool",value:function(){var e=this;return this.searchTool=new Xt.a(function(t){return e.setKeyword(A.StringUtil.nvl(t))},A.CRM.get(H.a.TOOLS_LIB_KEYWORD_PLACEHOLDER)),this.searchTool.render()}},{key:"makeTemplateTypeTool",value:function(){var e=this;this.templateTypeTool=new hi(function(t){return e.setTemplateType(t)},Q.c.TEMPLATE_LIST,null,!0,!0),this.templateTypeTool.setGtmData("lib_template");var t=document.createElement("div");t.className=R.a.TEMPLATE_TYPE_SELECT,ln.a.templateLibMenuOption.templateTypeTool||t.classList.add(R.a.HIDE);var n=this.btnTemplateTypeSelect=document.createElement("button");n.className=R.a.BUTTON_TOOL_TAB_TOGGLE,n.addEventListener("click",function(){return e.templateTypeTool.setHeightAuto()}),this.btnLabelTemplateTypeSelect=document.createElement("span"),n.appendChild(this.btnLabelTemplateTypeSelect),Object(K.setToolsIcon)(n,K.ToolsIcon.CARET,!0),t.appendChild(n);var i=document.createElement("div");return i.className=R.a.TOOLS_TAB,i.appendChild(this.templateTypeTool.render()),t.appendChild(i),t}},{key:"makeListTool",value:function(){return this.subPagesTool=new ca.a(function(e,t){var n=e.listItemData.dropEventKey,i=P.b.getDesignParam(n,e.listItemData.myCollectionPk.repositoryType);o.a.dispatch(new la.a(i,t))}),this.subPagesTool.render(),this.paginationListTool.render()}},{key:"makeMultiTypeListTool",value:function(){return this.multiTypeListTool=new zn.a([]),this.multiTypeListTool.render()}},{key:"getJustifiedListToolOption",value:function(){return null}},{key:"makeAdminUI",value:function(){var e=this,t=this.adminUIElement=document.createElement("div");t.className=R.a.ADMIN_UI,this.statusBtnUl=document.createElement("ul");var n=document.createElement("li");n.className=R.a.ACTIVE,n.setAttribute("data-value",ge.b.ACTIVE),n.addEventListener("click",function(){return r(n)}),n.innerText="공개",this.statusBtnUl.appendChild(n);var i=document.createElement("li");i.setAttribute("data-value",ge.b.INACTIVE),i.addEventListener("click",function(){return r(i)}),i.innerText="비공개",this.statusBtnUl.appendChild(i),this.adminUIElement.appendChild(this.statusBtnUl);var r=function(){var t=s()(a.a.mark(function t(n){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return $(e.statusBtnUl).children().removeClass(R.a.ACTIVE),n.classList.add(R.a.ACTIVE),t.next=4,e.setTemplateStatus(n.getAttribute("data-value"));case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}();return t}},{key:"setReadyList",value:(h=s()(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setReadyMultiTypeList(),e.next=3,oi.a.getTemplateTypeFromRequestParam(Q.c.SHEET_SIZE);case 3:return(t=e.sent)||(t=Q.d.ALL_TYPE),e.next=7,this.setTemplateType(t,!1);case 7:this.isReadyList=!0;case 8:case"end":return e.stop()}},e,this)})),function(){return h.apply(this,arguments)})},{key:"loadTemplateTypeList",value:(d=s()(a.a.mark(function e(){var t,n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.a.getEnv().adminMode?Q.c.ADMIN:Q.c.TEMPLATE_LIST,e.next=3,this.templateTypeTool.loadTemplateTypeList(t,"",null,ln.a.templateTypeInfo);case 3:this.templateTypeTool.setHeightAuto(),1===(n=this.templateTypeTool.getList()).length&&this.setTemplateType(n[0]);case 6:case"end":return e.stop()}},e,this)})),function(){return d.apply(this,arguments)})},{key:"setReadyMultiTypeList",value:function(){var e=this,t=[];this.templateTypeTool.getList().filter(function(e){return A.StringUtil.isEmpty(e.productTypeId)}).forEach(function(n){return t.push(e.makeMultiTypeListParam(n))}),this.multiTypeListTool.setResourceListRenderers(t)}},{key:"makeMultiTypeListParam",value:function(e){var n,i,r=this,o=qa.a.getColsByTemplateType(e);return{title:t.getTemplateTypeTitle(e),getList:(i=s()(a.a.mark(function n(){var i;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(t.HIDDEN_TYPE_IN_ALL_LIST.indexOf(e.id)>=0)){n.next=4;break}return n.abrupt("return",{items:[],totalRow:0});case 4:return n.next=6,r.lib.loadMultiTypeList(e);case 6:return i=n.sent,n.next=9,r.lib.addItems(i.items);case 9:return n.abrupt("return",i);case 10:case"end":return n.stop()}},n)})),function(){return i.apply(this,arguments)}),getListWithKeyword:(n=s()(a.a.mark(function t(){var n;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.lib.loadMultiTypeList(e);case 2:return n=t.sent,t.next=5,r.lib.addItems(n.items);case 5:return t.abrupt("return",n);case 6:case"end":return t.stop()}},t)})),function(){return n.apply(this,arguments)}),moveDetail:function(){return r.setTemplateType(e)},justifyOption:null,simpleLayoutOption:{cols:o}}}},{key:"setTemplateType",value:(c=s()(a.a.mark(function e(n){var i,r=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=!(r.length>1&&void 0!==r[1])||r[1],n=this.templateTypeTool.select(n,!1),this.btnLabelTemplateTypeSelect.innerText=t.getTemplateTypeTitle(n),this.btnTemplateTypeSelect.classList.remove(R.a.ACTIVE),this.lib.setTemplateType(n),!i){e.next=8;break}return e.next=8,this.loadList();case 8:case"end":return e.stop()}},e,this)})),function(e){return c.apply(this,arguments)})},{key:"setKeyword",value:(l=s()(a.a.mark(function e(t){var n,i=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!(i.length>1&&void 0!==i[1])||i[1],this.searchTool.updateUI(t),this.lib.setKeyword(t),!n){e.next=6;break}return e.next=6,this.loadList();case 6:case"end":return e.stop()}},e,this)})),function(e){return l.apply(this,arguments)})},{key:"setTemplateStatus",value:(r=s()(a.a.mark(function e(t){var n,i=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!(i.length>1&&void 0!==i[1])||i[1],this.lib.setTemplateStatus(t),!n){e.next=5;break}return e.next=5,this.loadList();case 5:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"updateUI",value:function(){B()(L()(t.prototype),"updateUI",this).call(this),o.a.getEnv().adminMode?(this.adminUIElement.classList.add(R.a.ACTIVE),this.templateTypeTool.element.classList.add(R.a.ADMIN_MODE),this.multiTypeListTool&&this.multiTypeListTool.element.classList.add(R.a.ADMIN_MODE)):(this.adminUIElement.classList.remove(R.a.ACTIVE),this.templateTypeTool.element.classList.remove(R.a.ADMIN_MODE),this.multiTypeListTool&&this.multiTypeListTool.element.classList.remove(R.a.ADMIN_MODE)),o.a.getEnv().devMode?this.templateTypeTool.element.classList.add(R.a.DEV_MODE):this.templateTypeTool.element.classList.remove(R.a.DEV_MODE),this.loadTemplateTypeList().catch(function(e){return console.error(e)})}},{key:"setListColSize",value:function(){var e=this.getListColSize();e>0&&(this.paginationListTool.listTool.element.setAttribute("data-cols",String(e)),this.paginationListTool.colCount=e)}},{key:"getListColSize",value:function(){return qa.a.getColsByTemplateType(this.lib.getTemplateType())}},{key:"makeListItem",value:function(e){var t=this,n=new nr(e,function(e){return t.openSubPage(e)},this.dddotPopup);return this.lib.isMultiType()||n.setTemplateType(this.lib.getTemplateType()),n}},{key:"openSubPage",value:function(e){if(!this.lib.isMultiType()){var t=e.element;if($(this.subPagesTool.element).remove(),t.classList.contains(R.a.SUB_PAGE_OPENED))t.classList.remove(R.a.SUB_PAGE_OPENED);else{for(var n=t.parentNode.children,i=0,a=n.length;i<a;i++)n[i].classList.remove(R.a.SUB_PAGE_OPENED);t.classList.add(R.a.SUB_PAGE_OPENED),this.subPagesTool.updateUI({listItem:e,cols:this.getListColSize()}),this.paginationListTool.listTool.insertElement(this.subPagesTool.element,ca.a.getNextLineLiIdx(t)),this.paginationListTool.scrollElement.setScrollY($(t).position().top)}}}},{key:"loadList",value:(i=s()(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isReadyList){e.next=3;break}return e.next=3,this.setReadyList();case 3:if(t=0,!this.lib.isMultiType()){e.next=11;break}return this.element.classList.add(R.a.MULTI_TYPE),e.next=8,this.loadMultiTypeList();case 8:t=e.sent.totalRow,e.next=16;break;case 11:return this.element.classList.remove(R.a.MULTI_TYPE),this.setListColSize(),e.next=15,this.paginationListTool.initList();case 15:t=e.sent.totalRow;case 16:try{this.loadListAfter(t)}catch(e){0}case 17:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)})},{key:"loadListAfter",value:function(e){var t=this.templateTypeTool.getSelectedTypeTitle(),n=t.groupTitle,i=t.title,a=this.lib.getKeyword()||"",r=(null!=n?n+" ":"")+i;a&&te.a.sendSearchReport({type:te.b.TEMPLATE,keyword:a,category:r,totalRow:e})}},{key:"loadMultiTypeList",value:(n=s()(a.a.mark(function e(){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.lib.clearItems(),e.next=3,this.multiTypeListTool.loadList(!A.StringUtil.isEmpty(this.lib.getKeyword()));case 3:(n=e.sent).forEach(function(e){return e.render()}),this.lib.setGTMLibDataForce(A.StringUtil.nvl(this.lib.getKeyword()));try{At.a.sendImpressions({items:n,category:t.ALL_TYPE_CATEGORY,listTitle:t.ALL_TYPE_TITLE,pageNo:1,pageSize:10})}catch(e){}return e.abrupt("return",{totalRow:this.multiTypeListTool.getRenderedTotalRows()});case 8:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"getIcon",value:function(){return K.ToolsIcon.LIBRARY_DESIGN}},{key:"getName",value:function(){return H.a.TOOLS_LIB_TEMPLATE_TITLE}},{key:"getLeftMenuType",value:function(){return ct.b.TEMPLATE_LIB}},{key:"getItemUseEventData",value:function(){var e=this.lib.getGTMLibData();return{type:te.b.TEMPLATE,category:e.category,keyword:e.keyword}}}],[{key:"getTemplateTypeTitle",value:function(e){return A.StringUtil.isEmpty(e.groupTitle)?e.title:"".concat(e.groupTitle," ").concat(e.title)}}]),t}(Ot.a);m()(ir,"HIDDEN_TYPE_IN_ALL_LIST",["fancy_banner_circle","fancy_banner_oval","youtube_cover","groobee_normal","groobee_small"]),m()(ir,"ALL_TYPE_CATEGORY","템플릿>전체"),m()(ir,"ALL_TYPE_TITLE","템플릿 > 전체");var ar,rr=function(e){function t(e){var n;return u()(this,t),(n=y()(this,L()(t).call(this))).param=e,n.addFavoriteEvent(Gt.a.IMAGE),n}return b()(t,e),p()(t,[{key:"categoryParam",value:function(){return[En.a.IMAGE]}},{key:"getLibType",value:function(){return Dt.b.IMAGE}}]),t}(yn),sr=function(e){function t(e){return u()(this,t),y()(this,L()(t).call(this,e,Gt.a.IMAGE))}return b()(t,e),p()(t,[{key:"getOriginPhotoType",value:function(){return Ne.b.Image}}]),t}(_n),or=function(e){function t(e){var n;return u()(this,t),(n=y()(this,L()(t).call(this))).param=e,n.init(),n}return b()(t,e),p()(t,[{key:"makeLib",value:function(){return new rr(this.getLibParam())}},{key:"getName",value:function(){return H.a.TOOLS_LIB_ITEM_IMAGE_TITLE}},{key:"makeListItem",value:function(e){return new sr(this.getStickerListItemParam(e))}},{key:"getElementClass",value:function(){return R.a.LIBRARY_PHOTO}},{key:"getLeftMenuType",value:function(){return ct.b.IMAGE_LIB}}]),t}(Ln),lr=function(e){function t(e){var n;return u()(this,t),(n=y()(this,L()(t).call(this))).param=e,n.addFavoriteEvent(Gt.a.BITMAP),n}return b()(t,e),p()(t,[{key:"categoryParam",value:function(){return[En.a.ILLUST,En.a.ICON,En.a.FIGURE,En.a.ETC]}},{key:"getLibType",value:function(){return Dt.b.BITMAP}}]),t}(yn),cr=function(e){function t(e){return u()(this,t),y()(this,L()(t).call(this,e,Gt.a.BITMAP))}return b()(t,e),p()(t,[{key:"getOriginPhotoType",value:function(){return Ne.b.Sticker}}]),t}(_n),ur=function(e){function t(e){var n;return u()(this,t),(n=y()(this,L()(t).call(this))).param=e,n.init(),n}return b()(t,e),p()(t,[{key:"makeLib",value:function(){return new lr(this.getLibParam())}},{key:"getName",value:function(){return H.a.TOOLS_LIB_ITEM_BITMAP_TITLE}},{key:"makeListItem",value:function(e){return new cr(this.getStickerListItemParam(e))}},{key:"getElementClass",value:function(){return R.a.LIBRARY_BITMAP}},{key:"getLeftMenuType",value:function(){return ct.b.BITMAP_LIB}}]),t}(Ln),dr=n(88),pr=function(e){function t(e){var n;return u()(this,t),(n=y()(this,L()(t).call(this))).param=e,n.addFavoriteEvent(Gt.a.FRAME),n}var n,i,r;return b()(t,e),p()(t,[{key:"requestList",value:(r=s()(a.a.mark(function e(t){var n,i,r,s,o,l,c=this;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setGTMLibDataAuto(t.keyword),e.next=3,dr.c.getImageframeDataResponse(t);case 3:if(n=e.sent,i=A.ArrayUtil.nvl(n.imageframeDataList).map(function(e){return c.param.makeListItem(e,!1)}),r={items:i,totalRow:n.totalRow},i.length>0)try{s=this.getGTMLibData(),o=s.listTitle,l=s.category,At.a.sendImpressions({items:i,category:l,listTitle:o,pageNo:t.page,pageSize:t.pageSize})}catch(e){}return e.abrupt("return",r);case 8:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"loadRecommendList",value:(i=s()(a.a.mark(function e(t){var n,i,r=this;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=7;break}return e.next=3,this.loadRecommendDataList();case 3:return n=e.sent,e.abrupt("return",n.map(function(e){return r.param.makeListItem(e,!1)}));case 7:if(this.recommendList){e.next=12;break}return e.next=10,this.loadRecommendDataList();case 10:i=e.sent,this.recommendList=i.map(function(e){return r.param.makeListItem(e,!0)});case 12:return e.abrupt("return",this.recommendList);case 13:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"loadRecommendDataList",value:(n=s()(a.a.mark(function e(){var t,n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.recommendDataList){e.next=7;break}return(t=this.getRequestParam({page:1,pageSize:20})).recommend=!0,e.next=5,dr.c.getImageframeDataResponse(t);case 5:n=e.sent,this.recommendDataList=n.imageframeDataList;case 7:return e.abrupt("return",this.recommendDataList);case 8:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"getRequestParam",value:function(e){return{type:dr.f.FRAME.value,page:e.page,pageSize:e.pageSize,status:this.getStatusParam().value,keyword:A.StringUtil.nvl(this.param.getKeyword())}}},{key:"getStatusParam",value:function(){switch(this.param.getItemAccessType()){case ct.a.PUBLIC:return Sn.h.ACTIVE;case ct.a.PRIVATE:return Sn.h.INACTIVE;default:return Sn.h.DISABLED}}},{key:"getLibType",value:function(){return Dt.b.FRAME}}]),t}(Dt.a),hr=function(e){function t(e){var n;return u()(this,t),(n=y()(this,L()(t).call(this,new Nt.b(e.resourceData,Gt.a.FRAME,ve.a.UNICORN)))).param=e,n.useFavorite=!e.recommend,n}return b()(t,e),p()(t,[{key:"getThumbUrlList",value:function(){return[this.listItemData.resourceData.thumb]}},{key:"makeElement",value:function(){var e=B()(L()(t.prototype),"makeElement",this).call(this);return e.setAttribute("data-ratio",String(this.listItemData.resourceData.width/this.listItemData.resourceData.height)),e}},{key:"makeHoverLayer",value:function(){var e=this,n=B()(L()(t.prototype),"makeHoverLayer",this).call(this),i=Object(K.setToolsIcon)(n,K.ToolsIcon.SETTINGS,!0);if(i.addEventListener("click",function(){var t=s()(a.a.mark(function t(n){var i,r,s;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n.stopPropagation(),i=e.listItemData.myCollectionPk,t.next=4,dr.c.getImageframeDataByKey(i.referenceKey);case 4:r=t.sent,s=new He.b("",r,0,0,0,0,0,!0,!0,!0,!0,!0,!0),o.a.dispatch(new l.c(function(e,t,n){Se.a.unselectAllItems(),n.renderHandler(e,t),n.renderItemToolsByItem([s],t,{type:Bt.b.ADMIN})}));case 7:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()),n.appendChild(i),!this.param.recommend){var r=new xt.a({itemType:xt.b.FRAME,itemReferenceKey:this.listItemData.myCollectionPk.referenceKey}),c=Ut.a.makeDddotBtn(s()(a.a.mark(function t(){var n;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:At.a.sendDetailClick(e.listItemData.myCollectionPk),n={useFavorite:e.useFavorite,myCollectionPk:e.listItemData.myCollectionPk},r.openItemInfo(n,$(c).offset());case 3:case"end":return t.stop()}},t)})));n.appendChild(c)}return n}}]),t}(Nt.a),mr=n(59),gr=function(e){function t(e){var n;return u()(this,t),n=y()(this,L()(t).call(this)),m()(_()(n),"isReadyList",!1),n.param=e,n.init(),n}var n,i,r;return b()(t,e),p()(t,[{key:"makeLib",value:function(){var e=this;return new pr({makeListItem:function(t,n){return e.makeListItem(t,n)},getItemAccessType:function(){return e.param.getItemAccessType()},getKeyword:function(){return e.param.getKeyword()}})}},{key:"makeListItem",value:function(e,t){return new hr({recommend:t,resourceData:e,setKeyword:this.param.setKeyword})}},{key:"makeElement",value:function(){var e=document.createElement("div");return e.className=R.a.LIBRARY_FRAME,e.appendChild(this.paginationListTool.render()),e}},{key:"setReady",value:(r=s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mr.b.setUrlImage("imageframe_basic_png","/resources/image/imageframe_basic.png");case 2:return e.next=4,B()(L()(t.prototype),"setReady",this).call(this);case 4:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"loadList",value:(i=s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isReadyList){e.next=3;break}return e.next=3,this.setReadyList();case 3:return e.next=5,this.paginationListTool.initList();case 5:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)})},{key:"setReadyList",value:(n=s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this.paginationListTool,e.next=3,this.lib.loadRecommendList();case 3:e.t1=e.sent,e.t0.setRecommendList.call(e.t0,e.t1),this.isReadyList=!0;case 6:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"getIcon",value:function(){return K.ToolsIcon.FRAME}},{key:"getName",value:function(){return H.a.TOOLS_LIB_ITEM_FRAME_TITLE}},{key:"getLeftMenuType",value:function(){return ct.b.FRAME_LIB}}]),t}(Ot.a),vr=function(e){function t(e){return u()(this,t),y()(this,L()(t).call(this,e,Gt.a.FIGURE))}return b()(t,e),t}(Pn.a),fr=function(e){function t(e){var n;return u()(this,t),(n=y()(this,L()(t).call(this))).param=e,n.addFavoriteEvent(Gt.a.FIGURE),n}return b()(t,e),p()(t,[{key:"getLibType",value:function(){return Dt.b.FIGURE}},{key:"getSvgMetaType",value:function(){return Sn.g.FIGURE}}]),t}(Cn),Er=function(e){function t(e){var n;return u()(this,t),(n=y()(this,L()(t).call(this))).param=e,n.init(),n}return b()(t,e),p()(t,[{key:"makeLib",value:function(){return new fr(this.getLibParam())}},{key:"getName",value:function(){return H.a.TOOLS_LIB_ITEM_FIGURE_TITLE}},{key:"makeListItem",value:function(e,t){return new vr(this.getSvgListItemParam(e,t))}},{key:"getElementClass",value:function(){return R.a.LIBRARY_FIGURE}},{key:"getLeftMenuType",value:function(){return ct.b.FIGURE_LIB}}]),t}(Nn),Tr=function(e){function t(e){var n;return u()(this,t),(n=y()(this,L()(t).call(this))).param=e,n.addFavoriteEvent(Gt.a.LINE),n}return b()(t,e),p()(t,[{key:"getLibType",value:function(){return Dt.b.LINE}},{key:"getSvgMetaType",value:function(){return Sn.g.LINE}}]),t}(Cn),yr=n(360),Ir=function(e){function t(e){var n;return u()(this,t),(n=y()(this,L()(t).call(this))).param=e,n.init(),n}return b()(t,e),p()(t,[{key:"makeLib",value:function(){return new Tr(this.getLibParam())}},{key:"getName",value:function(){return H.a.TOOLS_LIB_ITEM_LINE_TITLE}},{key:"makeListItem",value:function(e,t){return new yr.a(this.getSvgListItemParam(e,t))}},{key:"getElementClass",value:function(){return R.a.LIBRARY_LINE}},{key:"getLeftMenuType",value:function(){return ct.b.LINE_LIB}}]),t}(Nn),Lr=function(e){function t(e){var n;return u()(this,t),(n=y()(this,L()(t).call(this))).param=e,n.addFavoriteEvent(Gt.a.ILLUST),n}return b()(t,e),p()(t,[{key:"getLibType",value:function(){return Dt.b.ILLUST}},{key:"getSvgMetaType",value:function(){return Sn.g.ILLUST}}]),t}(Cn),kr=function(e){function t(e){return u()(this,t),y()(this,L()(t).call(this,e,Gt.a.ILLUST))}return b()(t,e),t}(Pn.a),_r=function(e){function t(e){var n;return u()(this,t),(n=y()(this,L()(t).call(this))).param=e,n.init(),n}return b()(t,e),p()(t,[{key:"makeLib",value:function(){return new Lr(this.getLibParam())}},{key:"getName",value:function(){return H.a.TOOLS_LIB_ITEM_ILLUST_TITLE}},{key:"makeListItem",value:function(e,t){return new kr(this.getSvgListItemParam(e,t))}},{key:"getElementClass",value:function(){return R.a.LIBRARY_ILLUST}},{key:"getLeftMenuType",value:function(){return ct.b.ILLUST_LIB}}]),t}(Nn),wr=n(137),br=function(e){function t(e){var n;return u()(this,t),(n=y()(this,L()(t).call(this))).param=e,n}var n;return b()(t,e),p()(t,[{key:"requestList",value:(n=s()(a.a.mark(function e(n){var i,r,s,o,l,c,u=this;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setGTMLibDataAuto(n.keyword),e.next=3,wr.d.fetchImages(t._getRequestParam(n));case 3:if(i=e.sent,r=i.imageInfoList().map(function(e){return u.param.makeListItem(e)}),s={items:r,totalRow:i.total},r.length>0)try{o=this.getGTMLibData(),l=o.listTitle,c=o.category,At.a.sendImpressions({items:r,category:c,listTitle:l,pageNo:n.page,pageSize:n.perPage})}catch(e){}return e.abrupt("return",s);case 8:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"getRequestParam",value:function(e){return{keyword:A.StringUtil.nvl(this.param.getKeyword()),page:e.page,perPage:e.pageSize}}},{key:"getLibType",value:function(){return Dt.b.PIXABAY}},{key:"setGTMLibDataAuto",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.setGTMLibData({listTitle:"픽사베이 > ".concat(e),category:"픽사베이>".concat(e),keyword:e})}}],[{key:"_getRequestParam",value:function(e){return(new wr.c).setKeyword(e.keyword).setPage(e.page).setPerPage(e.perPage)}}]),t}(Dt.a),Sr=n(269),Or=function(e){function t(e){var n;return u()(this,t),(n=y()(this,L()(t).call(this,new Nt.b(e,Gt.a.PIXABAY,ve.a.UNICORN)))).useFavorite=!1,n}return b()(t,e),p()(t,[{key:"getThumbUrlList",value:function(){return[this.listItemData.resourceData.previewURL]}},{key:"makeElement",value:function(){var e=B()(L()(t.prototype),"makeElement",this).call(this),n=Number(this.listItemData.resourceData.imageWidth),i=Number(this.listItemData.resourceData.imageHeight);return e.setAttribute("data-ratio",String(n/i)),e}},{key:"makeHoverLayer",value:function(){var e=B()(L()(t.prototype),"makeHoverLayer",this).call(this);return e.appendChild(this.makeDddot()),e}},{key:"makeDddot",value:function(){var e=this,t=document.createElement("div");t.className=R.a.DDDOT_WRAP;var n=Object(K.setToolsIcon)(t,K.ToolsIcon.DDDOT);return t.appendChild(n),n.addEventListener("click",function(){var n=s()(a.a.mark(function n(i){return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:i.stopPropagation(),Sr.a.open(e.makeInfoLayer(),t,$(t).offset(),!0);case 2:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()),t}},{key:"makeInfoLayer",value:function(){var e=document.createElement("div");e.classList.add(R.a.DDDOT_INFO_LAYER,R.a.PIXABAY_INFO_LAYER);var t=this.listItemData.resourceData,n=document.createElement("div"),i=document.createElement("span");i.className=R.a.TITLE,i.innerText="Pixabay";var a=document.createElement("span");a.innerText=" by ";var r=document.createElement("span");r.className=R.a.PIXABAY_UPLOAD_USER_ID,r.innerText=t.uploadUser,n.appendChild(i),n.appendChild(a),n.appendChild(r);var s=document.createElement("span");return s.className=R.a.PIXABAY_IMG_SIZE_INFO,s.innerText="".concat(t.imageWidth," px X ").concat(t.imageHeight," px"),e.appendChild(n),e.appendChild(s),e}},{key:"getEECItemData",value:function(e,t,n){var i="픽사베이:".concat(this.listItemData.resourceData.id);return{name:i,id:i,price:0,brand:"요소",category:e,variant:"픽사베이-".concat(this.listItemData.resourceData.type),list:t,position:n}}}]),t}(Nt.a),Cr=function(e){function t(e){var n;return u()(this,t),(n=y()(this,L()(t).call(this))).param=e,n.init(),n.showInitLayer(),n}var n;return b()(t,e),p()(t,[{key:"makeLib",value:function(){return new br({makeListItem:function(e){return new Or(e)},getKeyword:this.param.getKeyword})}},{key:"makeElement",value:function(){var e=document.createElement("div");return e.className=R.a.PIXABAY_PHOTO,e.appendChild(this.makeInitLayer()),e.appendChild(this.paginationListTool.render()),e}},{key:"makeInitLayer",value:function(){var e=this,t=this.initLayer=document.createElement("div");t.className=R.a.PIXABAY_INIT_LAYER;var n=document.createElement("p");n.classList.add(R.a.PIXABAY_INIT_TITLE),n.innerHTML=A.CRM.get(H.a.PIXABAY_INIT_TITLE),t.appendChild(n);var i=document.createElement("div");i.className=R.a.PIXABAY_RECOMMEND_WRAP;var a=document.createElement("span");a.className=R.a.PIXABAY_RECOMMEND_TITLE,a.innerHTML=A.CRM.get(H.a.PIXABAY_RECOMMEND_TITLE);var r=document.createElement("div");r.className=R.a.PIXABAY_RECOMMENT_KEYWORDS;var s=A.CRM.get(H.a.PIXABAY_RECOMMEND_KEYWORDS);r.innerHTML=s.map(function(e){var t=document.createElement("span");return t.innerHTML=e,t.outerHTML}).join(" , "),i.appendChild(a).appendChild(r);for(var o=r.getElementsByTagName("span"),l=function(t){var n=o.item(t).innerHTML;o.item(t).addEventListener("click",function(){return e.param.setKeyword(n)})},c=0;c<o.length;c++)l(c);return t.appendChild(i),t}},{key:"loadList",value:(n=s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!A.StringUtil.isEmpty(this.param.getKeyword())){e.next=3;break}return this.showInitLayer(),e.abrupt("return");case 3:return this.hideInitLayer(),e.next=6,this.paginationListTool.initList();case 6:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"showInitLayer",value:function(){this.initLayer.hidden=!1,this.paginationListTool.element.hidden=!0}},{key:"hideInitLayer",value:function(){this.initLayer.hidden=!0,this.paginationListTool.element.hidden=!1}},{key:"getIcon",value:function(){return null}},{key:"getName",value:function(){return H.a.TOOLS_LIB_ITEM_PIXABAY_TITLE}},{key:"getLeftMenuType",value:function(){return ct.b.PIXABAY_LIB}}]),t}(Ot.a),Pr=function(e){function t(){var e;u()(this,t),e=y()(this,L()(t).call(this)),m()(_()(e),"menuMap",new Map),m()(_()(e),"isReadyList",!1),e.element=e.makeElement();var n={getKeyword:function(){return e.keyword},setKeyword:function(t){return e.setKeyword(t)},getItemAccessType:function(){return e.itemAccessType}};return e.initMenuList([new or(n),new Cr(n),new ur(n),new Ir(n),new Er(n),new _r(n),new gr(n)]),e}var n,i,r,l,c;return b()(t,e),p()(t,[{key:"active",value:function(){return B()(L()(t.prototype),"active",this).call(this),this.selectedMenu&&this.selectedMenu.active(),this}},{key:"inactive",value:function(){return B()(L()(t.prototype),"inactive",this).call(this),this.selectedMenu.inactive(),this}},{key:"initMenuList",value:function(e){var t=this,n=function(e){t.menuMap.set(e.getLeftMenuType(),e),t.radioTool.addBtn({label:"# ".concat(A.CRM.get(e.getName())),value:e.getLeftMenuType()}),t.radioTool.setGtmData("lib_item"),t.contentsWrap.appendChild(e.getElement())},i=new Fn(e,function(){return t.keyword},function(e){return t.selectMenu(e)});n(i),e.forEach(function(e){return n(e)})}},{key:"makeElement",value:function(){var e=document.createElement("div");return e.className=R.a.LIBRARY_ITEM,e.appendChild(this.makeAdminUI()),e.appendChild(this.makeSearchTool()),e.appendChild(this.makeRadioTool()),e.appendChild(this.makeContentsWrap()),e}},{key:"makeSearchTool",value:function(){var e=this;return this.searchTool=new Xt.a(function(t){return e.setKeyword(t)},A.CRM.get(H.a.TOOLS_LIB_KEYWORD_PLACEHOLDER)),this.searchTool.render()}},{key:"makeRadioTool",value:function(){var e=this;return this.radioTool=new V.a(function(t){return e.selectMenu(t)},null,R.a.ITEM_MENU_RADIO_TOOL),this.radioTool.render()}},{key:"makeContentsWrap",value:function(){return this.contentsWrap=document.createElement("div"),this.contentsWrap.className=R.a.CONTENTS_WRAP,this.contentsWrap}},{key:"selectMenu",value:(c=s()(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.menuMap.get(t)){e.next=3;break}throw new Error("메뉴가 존재하지 않습니다");case 3:return this.radioTool.select(t,!1),this.selectedMenu&&this.selectedMenu.inactive(),this.selectedMenu=n.active(),e.next=8,this.load();case 8:case"end":return e.stop()}},e,this)})),function(e){return c.apply(this,arguments)})},{key:"setKeyword",value:(l=s()(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.keyword!==t){e.next=2;break}return e.abrupt("return");case 2:return this.keyword=t,this.searchTool.updateUI(t),this.resetMenuListLoadFlag(),e.next=7,this.load();case 7:case"end":return e.stop()}},e,this)})),function(e){return l.apply(this,arguments)})},{key:"load",value:(r=s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isReadyList){e.next=3;break}return e.next=3,this.setReadyList();case 3:if(this.selectedMenu){e.next=7;break}return e.next=6,this.selectMenu(this.menuMap.keys().next().value);case 6:return e.abrupt("return");case 7:if(this.selectedMenu.isLoaded){e.next=10;break}return e.next=10,this.selectedMenu.load();case 10:this.isLoaded=!0;try{this.loadAfter()}catch(e){0}case 12:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"loadAfter",value:function(){var e=this.keyword||"",t=this.selectedMenu.getName();if(e){var n=0;if(this.selectedMenu instanceof Fn)n=this.selectedMenu.getItemsCount();else try{n=this.selectedMenu.lib.lastListResult.totalRow}catch(e){0}te.a.sendSearchReport({type:te.b.ITEM,keyword:e,category:A.CRM.get(t),totalRow:n})}}},{key:"setReadyList",value:(i=s()(a.a.mark(function e(){var t,n,i,r,s,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=!0,n=!1,i=void 0,e.prev=3,r=this.menuMap.values()[Symbol.iterator]();case 5:if(t=(s=r.next()).done){e.next=12;break}return o=s.value,e.next=9,o.setReady();case 9:t=!0,e.next=5;break;case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),n=!0,i=e.t0;case 18:e.prev=18,e.prev=19,t||null==r.return||r.return();case 21:if(e.prev=21,!n){e.next=24;break}throw i;case 24:return e.finish(21);case 25:return e.finish(18);case 26:this.isReadyList=!0;case 27:case"end":return e.stop()}},e,this,[[3,14,18,26],[19,,21,25]])})),function(){return i.apply(this,arguments)})},{key:"resetMenuListLoadFlag",value:function(){this.menuMap.forEach(function(e){return e.isLoaded=!1})}},{key:"render",value:function(e,t){var n=this,i=this.getRenderStatus();this.isChangeContentsStatus(i.contents)&&(o.a.getEnv().adminMode?this.adminUIElement.classList.add(R.a.ACTIVE):this.adminUIElement.classList.remove(R.a.ACTIVE),this.menuMap.forEach(function(e){var t=e.getLeftMenuType();e.isVisible()?(n.radioTool.showButton(t),e.show()):(n.radioTool.hideButton(t),e.hide())}));return this.menuMap.forEach(function(n){return n.render(e,t)}),this.lastRenderStatus=i,this.element}},{key:"makeMenuBtn",value:function(){var e=document.createElement("div");Object(K.setToolsIcon)(e,K.ToolsIcon.LIBRARY_ELEMENT);var t=document.createElement("p");return t.innerText=A.CRM.get(H.a.TOOLS_LIB_ITEM_TITLE),e.appendChild(t),e}},{key:"getIcon",value:function(){return K.ToolsIcon.LIBRARY_ELEMENT}},{key:"getName",value:function(){return H.a.TOOLS_LIB_ITEM_TITLE}},{key:"setReady",value:(n=s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)})},{key:"getLeftMenuType",value:function(){return ct.b.ITEM_LIB}},{key:"getRenderStatus",value:function(){var e=o.a.getEnv();return{contents:{isAdminMode:e.adminMode,isDevMode:e.devMode},position:null}}},{key:"isChangeContentsStatus",value:function(e){return!this.lastRenderStatus||this.lastRenderStatus.contents.isAdminMode!==e.isAdminMode||this.lastRenderStatus.contents.isDevMode!==e.isDevMode}},{key:"isChangePositionStatus",value:function(e){return!1}},{key:"getGTMItemData",value:function(e){return this.selectedMenu.getGTMItemData(e)}},{key:"getItemUseEventData",value:function(){return this.selectedMenu.getItemUseEventData()}}]),t}(fn.a),Dr=n(260),Ar=function(){function e(){u()(this,e)}return p()(e,null,[{key:"unfoldAllGroupWrapperElementAttachedElement",value:function(e){var t=this.getMostHigherGroupWrapperElement(e);t&&(this.removeFoldClassName(t),this.unfoldAllChildGroupWrapperElement(t))}},{key:"unfoldGroupWrapperElementToAttachedElement",value:function(e){this.unfoldAllParentGroupWrapperElement(e)}},{key:"getMostHigherGroupWrapperElement",value:function(e){return e.parentElement&&this.isWrapperElement(e.parentElement)?this.getMostHigherGroupWrapperElement(e.parentElement):this.isWrapperElement(e)?e:null}},{key:"unfoldAllChildGroupWrapperElement",value:function(e){var t=!0,n=!1,i=void 0;try{for(var a,r=e.children[Symbol.iterator]();!(t=(a=r.next()).done);t=!0){var s=a.value;this.isWrapperElement(s)&&(this.removeFoldClassName(s),this.unfoldAllChildGroupWrapperElement(s))}}catch(e){n=!0,i=e}finally{try{t||null==r.return||r.return()}finally{if(n)throw i}}}},{key:"unfoldAllParentGroupWrapperElement",value:function(e){var t=e.parentElement;t&&this.isWrapperElement(t)&&(this.removeFoldClassName(t),this.unfoldAllParentGroupWrapperElement(t))}},{key:"isWrapperElement",value:function(e){return e.classList.contains(R.a.LAYER_WRAP)}},{key:"removeFoldClassName",value:function(e){e.classList.remove(R.a.FOLD)}}]),e}(),Rr=function(){function e(){u()(this,e),m()(this,"tooltipElems",[]),m()(this,"itemElementMap",new Map),m()(this,"thumbMap",new Map),m()(this,"thumbRevisionMap",new Map),m()(this,"debounceMap",new Map),m()(this,"lastRenderStatus",{contents:{revKey:null},style:{selectKey:null,lockKey:null,selCount:0,activeBtnGroup:!1,activeBtnLock:!1,activeBtnDelete:!1,fakeSelectSolidSkin:!1},position:{key:null}}),m()(this,"setReady",null),m()(this,"isSelectLayerInContent",!1);var t=document.getElementById("layerToolBox");t||((t=document.createElement("div")).id="layerToolBox"),this.layerToolboxElem=t,this.makeToolBox(),this.addEventListeners()}var t;return p()(e,[{key:"getRenderStatus",value:function(e){var t=e.pageId,n="",i="",a="",r=0,s=!1,o=e.background.backgroundItem,l=o&&o.select;return e.getAllSingleItems().forEach(function(e){var o=be.b.getRootGroup(e.groupId);if(o){var l="_rootGroupId_".concat(o.getGroupId());t.includes(l)||(t+=l)}t+=e.tbpeId+e.groupId,e.select&&(n+=e.tbpeId,r++),e.isLock()?i+="1":i+="0",e.select&&e.isLock()&&(s=!0),a+=e.props.getRevision()+"|"+e.props.getStyleRevision()}),(l||0===r)&&(s=!0),{position:{key:t},style:{selectKey:n,lockKey:i,selCount:r,activeBtnGroup:!l&&r>1,activeBtnLock:!l&&r>0,activeBtnDelete:!1===s,fakeSelectSolidSkin:null==o&&0===r},contents:{revKey:a}}}},{key:"isChangeContentsStatus",value:function(e){return this.lastRenderStatus.contents.revKey!==e.revKey}},{key:"isChangePositionStatus",value:function(e){return this.lastRenderStatus.position.key!==e.key}},{key:"isChangeStyleStatus",value:function(e){var t=this.lastRenderStatus.style;return t.selectKey!==e.selectKey||t.lockKey!==e.lockKey||t.fakeSelectSolidSkin!==e.fakeSelectSolidSkin}},{key:"isChangeFooterStyleStatus",value:function(e){var t=this.lastRenderStatus.style;return t.selectKey!==e.selectKey||t.selCount!==e.selCount||t.activeBtnGroup!==e.activeBtnGroup||t.activeBtnLock!==e.activeBtnLock||t.activeBtnDelete!==e.activeBtnDelete||t.fakeSelectSolidSkin!==e.fakeSelectSolidSkin}},{key:"toggleLayerToolboxEvent",value:function(e){null!=e?e?this.showLayer():this.hideLayer():this.isShowLayerToolbox()?this.hideLayer():this.showLayer(),o.a.dispatch(new gt.a)}},{key:"showLayer",value:function(){o.a.dispatch(new l.c(function(e,t,n){return n.rightSection.printoutFinalConfirm.hide()})),this.layerToolboxElem.classList.add("show")}},{key:"hideLayer",value:function(){this.layerToolboxElem.classList.remove("show")}},{key:"isShowLayerToolbox",value:function(){return this.layerToolboxElem.classList.contains("show")}},{key:"makeToolBox",value:function(){this.layerToolboxElem.appendChild(this.makeHeader()),this.layerToolboxElem.appendChild(this.makeBody().element),this.layerToolboxElem.appendChild(this.makeFooter())}},{key:"makeHeader",value:function(){var e=this,t=document.createElement("div");t.className=R.a.HEADER;var n=document.createElement("label");n.className=R.a.TITLE,n.innerText="레이어";var i=document.createElement("button");return Object(K.setToolsIcon)(i,K.ToolsIcon.CLOSE),i.addEventListener("click",function(){e.toggleLayerToolboxEvent(!1)}),t.appendChild(n),t.appendChild(i),t}},{key:"makeBody",value:function(){return this.layerBody=new G.a(!1,!0,"calc(100% - 108px)"),this.layerBody.element.classList.add(R.a.BODY),this.layerBody}},{key:"makeFooter",value:function(){var t=document.createElement("div");return t.className=R.a.FOOTER,this.selectInfo=document.createElement("span"),this.selectInfo.className=R.a.LAYER_SELECT_INFO,this.selectInfo.innerText="0개의 요소 선택",t.appendChild(this.selectInfo),this.groupBtn=e.makeBtn(K.ToolsIcon.ITEM_GROUP,R.a.BTN_GROUP),z.a.createTooltip(this.groupBtn,z.b.T,{title:{name:"그룹"}}),this.groupBtn.addEventListener("click",function(e){if($(e.currentTarget).hasClass(R.a.ACTIVE)){var t=o.a.instance.activeItems.slice();be.b.isSameGroup(t)?o.a.dispatch(new Ue.d):o.a.dispatch(new Ue.a)}}),this.lockBtn=e.makeBtn(K.ToolsIcon.LOCK_ON,R.a.BTN_LOCK),z.a.createTooltip(this.lockBtn,z.b.T,{title:{name:"잠금"}}),this.lockBtn.addEventListener("click",function(e){$(e.currentTarget).hasClass(R.a.ACTIVE)&&(o.a.instance.activeItems.slice().filter(function(e){return!e.isLock()}).length?o.a.dispatch(new Ue.k):o.a.dispatch(new Ue.n))}),this.delBtn=e.makeBtn(K.ToolsIcon.DELETE,R.a.BTN_DELETE),z.a.createTooltip(this.delBtn,z.b.T,{title:{name:"삭제"}}),this.delBtn.addEventListener("click",function(e){$(e.currentTarget).hasClass(R.a.ACTIVE)&&o.a.dispatch(new Ge.a)}),t.appendChild(this.lockBtn),t.appendChild(this.groupBtn),t.appendChild(this.delBtn),t}},{key:"render",value:(t=s()(a.a.mark(function e(t,n){var i,r,s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!o.a.isMobileMode()){e.next=2;break}return e.abrupt("return");case 2:i=t.pages[n.renderPageIdx],r=this.getRenderStatus(i),(s=this.isChangePositionStatus(r.position))&&this.renderLayerTree(i),(s||this.isChangeStyleStatus(r.style))&&(this.renderLayerStyle(i,r.style),!this.isSelectLayerInContent&&this.isShowLayerToolbox()&&this.moveScrollToSelectedLayerByCenter()),(s||this.isChangeFooterStyleStatus(r.style))&&this.renderFooter(r.style),(s||this.isChangeContentsStatus(r.contents))&&this.renderContents(i.getAllSingleItems()),this.lastRenderStatus=r,this.isSelectLayerInContent=!1;case 11:case"end":return e.stop()}},e,this)})),function(e,n){return t.apply(this,arguments)})},{key:"renderLayerTree",value:function(e){var t=this,n=document.createDocumentFragment(),i=e.background.backgroundItem;this.itemElementMap.clear();for(var a=e.items,r=a.length-1;r>-1;r--){var s=a[r];if(s!==i){var o=this.renderLayerTreeItem(s);n.appendChild(o)}}var l=this.renderBackgroundLayer(e);n.appendChild(l),this.layerBody.contents.innerHTML="",this.layerBody.contents.appendChild(n);var c=e.getAllSingleItems();a.forEach(function(e,n){if(e instanceof be.a){var i=[];e.getAllSingleMembers().forEach(function(e){i.push(c.indexOf(e))}),i.sort(function(e,t){return e-t}),$(t.itemElementMap.get(e.getItemKey())).parent().data("itemIdxList",i)}else $(t.itemElementMap.get(e.getItemKey())).data("itemIdxList",[c.indexOf(e)])})}},{key:"renderFooter",value:function(e){e.activeBtnGroup?this.groupBtn.classList.add(R.a.ACTIVE):this.groupBtn.classList.remove(R.a.ACTIVE),e.activeBtnLock?this.lockBtn.classList.add(R.a.ACTIVE):this.lockBtn.classList.remove(R.a.ACTIVE),e.activeBtnDelete?this.delBtn.classList.add(R.a.ACTIVE):this.delBtn.classList.remove(R.a.ACTIVE);var t=e.fakeSelectSolidSkin?1:e.selCount;this.selectInfo.innerText="".concat(t,"개의 요소 선택")}},{key:"addEventListeners",value:function(){var t=$(this.layerBody.contents);e.addTextEditEventListener(t),e.addLayerEventListener(t),this.addLayerCommonEventListener(t),e.addDragEventListener(t)}},{key:"addLayerCommonEventListener",value:function(e){var t=this;e.on("click",".layer",function(){return t.isSelectLayerInContent=!0})}},{key:"renderLayerTreeItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=null;return n=e instanceof be.a?this.renderGroupItemLayer(e,t):this.renderSingleItemLayer(e,t),0===t&&n.classList.add(R.a.NOT_DEEP),n}},{key:"renderSingleItemLayer",value:function(t,n){var i,a,r;t instanceof Le.b?(r=K.ToolsIcon.ITEM_TEXT,i=t.props.getText().replace("\n"," ")):(t instanceof _e.b?r=K.ToolsIcon.ITEM_GRID:this.thumbMap.has(t.getItemKey())?a=this.thumbMap.get(t.getItemKey()):(a=t instanceof He.b?document.createElement("div"):new Image,this.thumbMap.set(t.getItemKey(),a)),i=Gt.b.getText(t.getResourceType())),t.layerName&&(i=t.layerName);var s=e.renderLayerRow(i,n,a,r);return s.classList.add(R.a.SINGLE),$(s).data("itemKey",t.getItemKey()),this.itemElementMap.set(t.getItemKey(),s),s}},{key:"renderGroupItemLayer",value:function(t,n){var i=e.renderLayerRow(t.layerName?t.layerName:"그룹",n,null,K.ToolsIcon.FOLDER_FILL);Object(K.setToolsIcon)(i,K.ToolsIcon.GREATER_THAN,!1,"left");Object(K.getToolsIconName)(K.ToolsIcon.GREATER_THAN);i.childNodes.forEach(function(e){e.classList.contains(R.a.THUMB)&&Object(K.setToolsIcon)(e,K.ToolsIcon.FOLDER_OUTLINE)}),i.classList.add(R.a.GROUP);var a=document.createElement("div");a.className=R.a.LAYER_WRAP,$(a).data("groupId",t.getGroupId()),$(i).data("groupId",t.getGroupId()),a.appendChild(i);for(var r=t.getMembers(),s=r.length-1;s>=0;s--){var o=this.renderLayerTreeItem(r[s],n+1);a.appendChild(o)}return a.classList.add(R.a.FOLD),this.itemElementMap.set(t.getItemKey(),i),a}},{key:"renderBackgroundLayer",value:function(t){var n,i,a=t.background,r=a.backgroundItem;r?(this.thumbMap.has(r.getItemKey())?n=this.thumbMap.get(r.getItemKey()):((n=document.createElement("img")).setAttribute("data-bg","true"),this.thumbMap.set(r.getItemKey(),n)),i=r instanceof Ne.e?"사진 배경":"패턴 배경"):((n=document.createElement("div")).style.backgroundColor=a.color,i="단색 배경"),a.layerName&&(i=a.layerName);var s=e.renderLayerRow(i,0,n,null,!1);return s.classList.add(R.a.BACKGROUND),this.itemElementMap.set(a.getItemKey(),s),$(s).data("itemKey",a.getItemKey()),s}},{key:"renderLayerStyle",value:function(e,t){var n=e.background,i=this.itemElementMap.get(n.getItemKey());this.updateLayerStyles(e.items),this.unfoldGroupDepth(e.items),t.fakeSelectSolidSkin||n.backgroundItem&&n.backgroundItem.select?i.classList.add(R.a.SELECTED):i.classList.remove(R.a.SELECTED)}},{key:"updateLayerStyles",value:function(e){var t=this;e.forEach(function(e){e instanceof be.a?t.updateGroupLayerStyle(e):e instanceof we.e&&t.updateSingleLayerStyle(e)})}},{key:"updateGroupLayerStyle",value:function(e){var t=e.getMembers(),n=t.filter(function(e){return e instanceof be.a}),i=t.filter(function(e){return e instanceof we.e}),a=n.concat(i);this.updateLayerStyles(a);var r=this.itemElementMap.get(e.getItemKey());if(r){var s=be.b.convertItemsToSingles(t);s.every(function(e){return e.select})?r.classList.add(R.a.SELECTED):r.classList.remove(R.a.SELECTED);var o=s.some(function(e){return e.isLock()});o?r.classList.add(R.a.ITEM_LOCKED):r.classList.remove(R.a.ITEM_LOCKED),r.draggable=!o}}},{key:"updateSingleLayerStyle",value:function(e){var t=this.itemElementMap.get(e.getItemKey());t&&(e.select?t.classList.add(R.a.SELECTED):t.classList.remove(R.a.SELECTED),e.isLock()?t.classList.add(R.a.ITEM_LOCKED):t.classList.remove(R.a.ITEM_LOCKED),t.draggable=!e.isLock())}},{key:"unfoldGroupDepth",value:function(e){var t=this,n=Kn.a.getAllSingleItems(e).filter(function(e){return e.select});n.length>1||n.forEach(function(e){if(e.select&&e.groupId){var n=t.itemElementMap.get(e.tbpeId);n&&Ar.unfoldGroupWrapperElementToAttachedElement(n)}})}},{key:"renderContents",value:function(t){var n=this;t.forEach(function(t){var i=n.thumbMap.get(t.getItemKey());if(null!=i){var a=t.props.getRevision()+"|"+t.props.getStyleRevision();n.thumbRevisionMap.get(t.getItemKey())!==a&&(n.thumbRevisionMap.set(t.getItemKey(),a),t instanceof He.b?null!=t.svgElements.imageElement.getAttributeNS(Tt.a.XLINK,"href")?e.setImageFrameThumb(i,t.getThumbString(36)):(n.thumbRevisionMap.set(t.getItemKey(),"1"),setTimeout(function(){n.renderContents([t])},500)):(i.getAttribute("data-bg")?t.getFillFullThumbUrl(36,36):t.getThumbUrl(36,36)).then(function(e){i&&(i.src=e)}))}})}},{key:"updateThumbs",value:function(e){this.debounce(e)}},{key:"debounce",value:function(e){var t=this,n=e.reduce(function(e,t){return e+t.getItemKey()},"");this.debounceMap.has(n)&&clearTimeout(this.debounceMap.get(n));var i=setTimeout(function(){t.debounceMap.delete(n),t.renderContents(e),e=null},200);this.debounceMap.set(n,i)}},{key:"containsClass",value:function(e,t){return e.classList.contains(t)}},{key:"moveScrollToSelectedLayerByCenter",value:function(){var e=this.layerBody,t=e.contents,n=t.querySelector(".".concat(R.a.SELECTED));if(n&&t.querySelectorAll(".layer")){var i=n.offsetHeight,a=(t.offsetHeight-i)/2;e.setScrollY(this.getOffsetTop(n)-a)}}},{key:"getOffsetTop",value:function(e){var t;if(this.containsClass(e,"group")&&e.parentElement)t=e.parentElement.offsetTop;else{t=e.offsetTop;for(var n=e.parentElement;n&&this.containsClass(n,"layer_wrap");)t+=n.offsetTop,n=n.parentElement}return t}}],[{key:"makeBtn",value:function(e,t){var n=document.createElement("button");return Object(K.setToolsIcon)(n,e),n.className=t,n}},{key:"addTextEditEventListener",value:function(e){var t=".".concat(R.a.TITLE);e.on("click",t,function(e){var t=$(e.currentTarget),n=t[0];t.parent().parent().hasClass(R.a.SELECTED)&&(e.stopPropagation(),"true"!==n.contentEditable&&(t.data("lastTitle",n.innerText),n.contentEditable="true",n.focus(),$(document.body).one("click",function(){n.blur()})))}).on("keydown keyup",t,function(e){var t=$(e.currentTarget)[0];e.stopPropagation(),13!==e.keyCode&&27!==e.keyCode||t.blur(),t.innerText.length>=255&&(t.innerText=t.innerText.substr(0,255))}).on("focus",t,function(e){var t=$(e.currentTarget)[0];e.stopPropagation(),t.parentElement.classList.add(R.a.ACTIVE),document.execCommand("selectAll")}).on("blur",t,function(e){var t=$(e.currentTarget),n=t[0],i=t.parent().parent(),a=t.data("lastTitle");if(n.contentEditable="false",n.scrollLeft=0,n.innerText.length||(n.innerText=a),a!==n.innerText){var r=i.data("itemKey");o.a.dispatch(new Gi.a(r,n.innerText)),t.data("lastTitle",n.innerText)}})}},{key:"addLayerEventListener",value:function(e){var t=Object(K.getToolsIconName)(K.ToolsIcon.GREATER_THAN);e.on("click",".layer.single",function(e){var t=$(e.currentTarget).data("itemKey");o.a.dispatch(new l.c(function(n,i){var a=n.pages[i.renderPageIdx],r=e.ctrlKey||e.shiftKey,s=a.background.backgroundItem;if(!(r&&s&&s.select)){var o=a.getAllSingleItems(),l=o.find(function(e){return e.getItemKey()===t});if(e.ctrlKey)l.select?Se.a.unselectItem(l):Se.a.appendSelectedItem(l);else if(e.shiftKey){var c=[],u=o.indexOf(i.activeItems[i.activeItems.length-1]),d=o.indexOf(i.activeItems[0]),p=o.indexOf(l),h=!0,m=!1,g=void 0;try{for(var v,f=o[Symbol.iterator]();!(h=(v=f.next()).done);h=!0){var E=v.value,T=o.indexOf(E);d>T&&(T>=d||T<p)||u<T&&(T<=u||T>p)||E.isOnlyOneItem()||c.push(E)}}catch(e){m=!0,g=e}finally{try{h||null==f.return||f.return()}finally{if(m)throw g}}Se.a.appendSelectedItems(c)}else{Se.a.selectItem(l);var y=i.pageController.getPageRenderer(a);y&&y.updateHoverLayer()}}},!0))}).on("click",".layer.single .lock",function(e){var t=$(e.currentTarget).parent().data("itemKey");t&&o.a.dispatch(new l.c(function(e,n){var i=e.pages[n.renderPageIdx].getAllSingleItems().find(function(e){return e.getItemKey()===t});i.isLock()?o.a.dispatch(new Ue.n(be.b.getGroupItemsAddedArray([i]))):o.a.dispatch(new Ue.k(be.b.getGroupItemsAddedArray([i])))}))}).on("click",".layer.background",function(e){o.a.dispatch(new l.c(function(t,n,i){if(!(e.ctrlKey||e.shiftKey)||!n.activeItems.length){var a=t.pages[n.renderPageIdx].background.backgroundItem;a?(Se.a.selectItem(a),i.renderItemTools(t,n)):Se.a.unselectAllItems()}},!0))}).on("click",".layer.group",function(e){var n=$(e.target),i=$(e.currentTarget),a=i.data("groupId");if(n.hasClass(R.a.THUMB)||n.parent().hasClass(R.a.THUMB)||n.hasClass(t))i.parent().toggleClass(R.a.FOLD);else if(n.hasClass(R.a.LOCK)||n.parent().hasClass(R.a.LOCK)){var r=be.b.getRootGroup(a).getAllSingleMembers(),s=r.filter(function(e){return!e.isLock()});s.length?o.a.dispatch(new Ue.k(s)):o.a.dispatch(new Ue.n(r))}else o.a.dispatch(new l.c(function(t,n){var i=e.ctrlKey||e.shiftKey,r=t.pages[n.renderPageIdx].background.backgroundItem;if(!(i&&r&&r.select)){var s=be.b.getRootGroup(a).getAllSingleMembers();if(e.ctrlKey)s.every(function(e){return e.select})?Se.a.unselectItem(s[0]):Se.a.appendSelectedItems(s);else if(e.shiftKey){var o=[],l=t.pages[n.renderPageIdx].getAllSingleItems(),c=l.indexOf(n.activeItems[n.activeItems.length-1]),u=l.indexOf(n.activeItems[0]),d=l.indexOf(s[0]),p=l.indexOf(s[s.length-1]),h=!0,m=!1,g=void 0;try{for(var v,f=l[Symbol.iterator]();!(h=(v=f.next()).done);h=!0){var E=v.value,T=l.indexOf(E);u>T&&(T>=u||T<p)||c<T&&(T<=c||T>d)||E.isOnlyOneItem()||o.push(E)}}catch(e){m=!0,g=e}finally{try{h||null==f.return||f.return()}finally{if(m)throw g}}Se.a.appendSelectedItems(o)}else{Se.a.unselectAllItems();var y=be.b.getGroup(a);Se.a.appendSelectedItems(y.getAllSingleMembers())}}},!0))})}},{key:"addDragEventListener",value:function(e){var t,n=-1,i=-1,a=null,r=null;e.on("dragstart",".".concat(R.a.NOT_DEEP),function(e){(t=$(e.currentTarget)).attr("style","opacity:.5 !important;").addClass("target"),i=t.index(),n=i,r=t.data("itemIdxList"),e.originalEvent.dataTransfer.setData("text",r.join(",")),e.originalEvent.dataTransfer.dropEffect="move"}).on("dragover",".".concat(R.a.NOT_DEEP),function(e){var n=$(e.currentTarget),s=n.index();if(e.preventDefault(),e.originalEvent.dataTransfer.dropEffect="move",i!==s){var o=n.data("itemIdxList");if(o&&o[0]===r[0])return;i<s?n.after(t):n.before(t),i=t.index(),a=o}}).on("drop",".".concat(R.a.NOT_DEEP),function(e){e.preventDefault()}).on("dragend",".".concat(R.a.NOT_DEEP),function(){t.removeAttr("style").removeClass("target"),o.a.dispatch(new Dr.e(n,i,a,r))})}},{key:"setImageFrameThumb",value:function(e,t){e.innerHTML=t;var n=e.firstElementChild;n.style.top="50%",n.style.left="50%",n.style.transform="translate(-50%, -50%)"}},{key:"renderLayerRow",value:function(e,t,n,i){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],r=document.createElement("div");r.className=R.a.LAYER,t>0&&(t<11?(r.classList.add(R.a.DEEP),r.style.paddingLeft="".concat(32+16*t,"px")):(r.classList.add(R.a.DEEP,R.a.VERY_DEEP),r.style.paddingLeft="".concat(192,"px")));var s=document.createElement("div");s.className=R.a.THUMB,n?(n.draggable=!1,s.appendChild(n)):i&&(Object(K.setToolsIcon)(s,i),s.classList.add("icon")),r.appendChild(s);var o=document.createElement("div");o.className=R.a.TITLE_WRAP;var l=document.createElement("div");l.className=R.a.TITLE,l.innerText=e;var c=t<11?16*t:170;l.style.maxWidth="calc(78% - ".concat(c,"px)"),o.style.maxWidth="calc(56% - ".concat(c-24,"px)"),o.appendChild(l),Object(K.setToolsIcon)(o,K.ToolsIcon.PENCIL,!0),r.appendChild(o);var u=document.createElement("div");return Object(K.setToolsIcon)(u,K.ToolsIcon.LOCK_ON),u.className=R.a.LOCK,a?Object(K.setToolsIcon)(u,K.ToolsIcon.LOCK_OFF):u.classList.add(R.a.DISABLE),r.appendChild(u),r}}]),e}(),Mr=n(498),Nr=function(){function e(){u()(this,e),this.element=this.makeElement()}return p()(e,[{key:"editorAreaResizeAction",value:function(){o.a.dispatch(new gt.a)}},{key:"makeElement",value:function(){var e=this,t=document.getElementById(an.a.rightSection);null==t&&((t=document.createElement("section")).id=an.a.rightSection);var n=document.createElement("section");return n.id=an.a.rightBar,t.appendChild(n),this.printoutFinalConfirm=new Mr.a(function(){return e.editorAreaResizeAction()}),t.appendChild(this.printoutFinalConfirm.getElement()),this.layerToolManager=new Rr,t.appendChild(this.layerToolManager.layerToolboxElem),t}},{key:"render",value:function(){}},{key:"getElement",value:function(){return this.element}},{key:"setActionSet",value:function(e){this.actionSet=e,this.printoutFinalConfirm.setActionSet({saveDesignToCart:e.createDesignToCart,updateDesign:e.updateDesignToCart,checkIncludePhotoItem:e.checkIncludePhotoItem})}}]),e}(),xr=function(e){function t(e,n,i){var a;return u()(this,t),a=y()(this,L()(t).call(this)),m()(_()(a),"elemId","designProjectItemDddotPopup".concat(A.StringUtil.random())),a.addAction=e,a.copyAction=n,a.deleteAction=i,a.makeElement(),a}return b()(t,e),p()(t,[{key:"makeElement",value:function(){return this.contents=document.createElement("div"),this.contents.className=R.a.DESIGN_PROJECT_ITEM_DDDOT_POPUP_CONTENTS,this.makeRow1(),this.makeRow2(),this.makeRow3(),this.contents}},{key:"getContents",value:function(){return this.contents}},{key:"makeRow1",value:function(){var e=document.createElement("div");e.className=R.a.TOOLS_ROW,this.titleElem=document.createElement("div"),this.titleElem.className=R.a.TITLE,e.appendChild(this.titleElem),this.sizeElem=document.createElement("div"),this.sizeElem.className=R.a.SIZE_LABEL,e.appendChild(this.sizeElem),this.contents.appendChild(e)}},{key:"makeRow2",value:function(){var e=this,t=document.createElement("div");t.className=R.a.TOOLS_ROW;var n=document.createElement("button");n.innerText="새 문서 추가하기",Object(K.setToolsIcon)(n,K.ToolsIcon.NEW_FILE),n.addEventListener("click",function(){e.close(),e.addAction()}),t.appendChild(n);var i=document.createElement("button");i.innerText="복제하기",Object(K.setToolsIcon)(i,K.ToolsIcon.COPY),i.addEventListener("click",function(){e.close(),e.copyAction()}),t.appendChild(i);var a=this.btnDelete=document.createElement("button");a.innerText="삭제하기",Object(K.setToolsIcon)(a,K.ToolsIcon.DELETE),a.addEventListener("click",function(){confirm("삭제한 문서는 다시 복구할 수 없습니다. 정말로 삭제하시겠습니까?")&&(e.close(),e.deleteAction())}),t.appendChild(a),this.contents.appendChild(t)}},{key:"makeRow3",value:function(){var e=document.createElement("div");e.className=R.a.TOOLS_ROW;var t=document.createElement("div");this.profileElem=Object(K.setToolsIcon)(t,K.ToolsIcon.USER_PROFILE),this.updateDateElem=document.createElement("span"),this.updateDateElem.className=R.a.UPDATE_DATE,t.appendChild(this.updateDateElem),e.appendChild(t),this.contents.appendChild(e)}},{key:"getId",value:function(){return this.elemId}},{key:"updateUI",value:function(){}},{key:"updateContents",value:function(e){this.titleElem.innerText=e.title;var t=e.pageList[0];this.sizeElem.innerText="".concat(t.width,"px × ").concat(t.height,"px"),z.a.createTooltip(this.profileElem,z.b.T,{title:{name:e.accountName}}),this.updateDateElem.innerText=A.DateUtil.toString(new Date(e.updateDate),"yyyy-MM-dd HH:mm")}},{key:"setDeletable",value:function(e){e?this.btnDelete.removeAttribute("disabled"):this.btnDelete.setAttribute("disabled","disabled")}}]),t}(U.a),Br=n(157),Ur=function(){function e(t,n,i,a){u()(this,e),this.selectAction=t,this.dddotPopup=new xr(n,i,a),this.makeElement()}return p()(e,[{key:"makeElement",value:function(){var e=this;this.element=document.createElement("div"),this.element.className=R.a.DESIGN_PROJECT_ITEM,this.element.addEventListener("click",s()(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.selectAction();case 1:case"end":return t.stop()}},t)})));var t=document.createElement("div");t.className=R.a.THUMB;var n=this.thumbImg=document.createElement("img");t.appendChild(n),this.pageCntLabel=document.createElement("div"),this.pageCntLabel.className=R.a.PAGE_CNT,t.appendChild(this.pageCntLabel),this.dddot=Object(K.setToolsIcon)(t,K.ToolsIcon.DDDOT,!0),this.dddot.addEventListener("click",function(t){t.stopPropagation(),e.dddotPopup.open(e.getDddotOffset())}),this.loadingUI=new Br.a(t),this.element.appendChild(t);var i=document.createElement("div");i.className=R.a.FOOTER,this.designNoLabel=document.createElement("span"),this.designNoLabel.className=R.a.NUMBER_LABEL,i.appendChild(this.designNoLabel),this.templateTypeLabel=document.createElement("span"),this.templateTypeLabel.className=R.a.TYPE_NAME,i.appendChild(this.templateTypeLabel),this.element.appendChild(i)}},{key:"render",value:function(e){if(e.designNo&&e.designNo>0&&(this.designNo=e.designNo,this.designNoLabel.innerText=String(e.designNo)),e.designData){(null==this.designData||this.designData.idx!==e.designData.idx||this.designData.updateDate<e.designData.updateDate||this.designData.pageList[0].thumbKey!==e.designData.pageList[0].thumbKey)&&(this.designData=Object.assign({},e.designData),this.thumbImg.src=sa.a.makeThumbUrl(e.designData.pageList[0].thumbKey),this.designData.pageList.length>1?(this.pageCntLabel.classList.add(R.a.ACTIVE),this.pageCntLabel.innerText=String(this.designData.pageList.length)):this.pageCntLabel.classList.remove(R.a.ACTIVE),this.dddotPopup.updateContents(this.designData));var t,n=e.designData.templateType;if(n)t=A.StringUtil.isEmpty(n.groupTitle)?n.title:"".concat(n.groupTitle," ").concat(n.title);else{var i;A.StringUtil.isEmpty(this.designData.sizeOption)||(i=JSON.parse(this.designData.sizeOption));var a=this.designData.pageList[0];Qn.a.isValidSizeOption(i)&&Qn.a.isSamePixel(i,{width:a.width,height:a.height})||(i={width:a.width,height:a.height,unit:Q.b.PX});var r=i.unit.toLowerCase(),s=De.b.floorFromDecimalPlace(i.width,1),o=De.b.floorFromDecimalPlace(i.height,1);t="".concat(s).concat(r," × ").concat(o).concat(r)}this.templateTypeLabel.innerText=t,this.templateTypeLabel.title=t}return e.active?this.element.classList.add(R.a.ACTIVE):this.element.classList.remove(R.a.ACTIVE),this.setDeletable(!0),this.element}},{key:"setDeletable",value:function(e){this.dddotPopup.setDeletable(e)}},{key:"getDesignNo",value:function(){return this.designNo}},{key:"getDesignData",value:function(){return this.designData}},{key:"getDddotOffset",value:function(){return $(this.dddot).offset()}},{key:"showLoading",value:function(){return this.loadingUI.show(),this}},{key:"hideLoading",value:function(){return this.loadingUI.hide(),this}},{key:"getElementPos",value:function(){return $(this.element).position()}},{key:"getElementRect",value:function(){return this.element.getBoundingClientRect()}}]),e}(),Hr=function(e){function t(e){var n;return u()(this,t),n=y()(this,L()(t).call(this)),m()(_()(n),"elemId","designTypeSelectorPopup".concat(A.StringUtil.random())),m()(_()(n),"designNo",-1),n.selectAction=e,n.makeContents(),n}var n;return b()(t,e),p()(t,[{key:"setReady",value:(n=s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.templateTypeTool.loadTemplateTypeList();case 2:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"makeContents",value:function(){var e=this,t=function(){var t=s()(a.a.mark(function t(n,i){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.close(),e.selectAction(n,i,e.designNo);case 2:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}();this.templateTypeTool=new hi(function(e){return t(null,e)},Q.c.SHEET_SIZE,{btnText:"새 문서 추가",callback:function(e){return t(e)}},!1),this.contents=this.templateTypeTool.render(),this.contents.classList.add(R.a.DESIGN_TYPE_SELECTOR)}},{key:"getContents",value:function(){return this.contents}},{key:"getId",value:function(){return this.elemId}},{key:"updateUI",value:function(){}},{key:"openWithData",value:function(e,t){this.designNo=t,this.templateTypeTool.updateDOMCustomSizeInputs(),this.open(e)}}]),t}(U.a),Gr=function(){function e(){u()(this,e),m()(this,"designProjectItems",[])}var t,n,i,r,c,d,h,g,v;return p()(e,[{key:"setReady",value:(v=s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.makeElement(),e.next=3,this.designTypeSelectorPopup.setReady();case 3:case"end":return e.stop()}},e,this)})),function(){return v.apply(this,arguments)})},{key:"makeElement",value:function(){var e=this;this.element=document.getElementById("designProjectMenu"),this.designTypeSelectorPopup=new Hr(function(t,n,i){return e.addDesign(t,n,i)}),this.makeHeader(),this.makeBody()}},{key:"makeHeader",value:function(){var t=this,n=document.createElement("div");n.className=R.a.HEADER;var i=document.createElement("input");i.type="checkbox",i.checked=!0,this.element.classList.add(R.a.OPEN),this.element.appendChild(i);var a=document.createElement("div");a.className=R.a.LEFT_SIDE;var r=Object(K.setToolsIcon)(n,K.ToolsIcon.GREATER_THAN);r.addEventListener("click",function(){i.checked=!i.checked,i.checked?t.element.classList.add(R.a.OPEN):t.element.classList.remove(R.a.OPEN),e.refreshCanvasSize()}),a.appendChild(r),this.projectTitleElem=new Ii(function(e){A.StringUtil.isEmpty(e)&&(e="제목없음",t.projectTitleElem.render(e)),Li.a.update(o.a.instance.designProject.getDesignProjectData().idx,{title:e})}),a.appendChild(this.projectTitleElem.render("제목없음")),n.appendChild(a);var s=document.createElement("div");s.className=R.a.RIGHT_SIDE;var l=this.prevBtn=Object(K.setToolsIcon)(s,K.ToolsIcon.GREATER_THAN,!0);l.classList.add(R.a.PREV),l.addEventListener("click",function(){return t.prevItem()}),z.a.createTooltip(l,z.b.T,{title:{name:H.a.DESIGN_PROJECT_MENU_PREV_BTN}});var c=this.currentDesignNoLabel=document.createElement("span");c.innerText="0",s.appendChild(c);var u=document.createElement("span");u.innerText="/",s.appendChild(u);var d=this.lastDesignNoLabel=document.createElement("span");d.innerText="0",s.appendChild(d);var p=this.nextBtn=Object(K.setToolsIcon)(s,K.ToolsIcon.GREATER_THAN,!0);p.classList.add(R.a.NEXT),p.addEventListener("click",function(){return t.nextItem()}),z.a.createTooltip(p,z.b.T,{title:{name:H.a.DESIGN_PROJECT_MENU_NEXT_BTN}});var h=document.createElement("div");h.className=R.a.BTN_ADD_DESIGN;var m=Object(K.setToolsIcon)(h,K.ToolsIcon.ADD,!0);z.a.createTooltip(m,z.b.TL,{title:{name:H.a.DESIGN_PROJECT_MENU_ADD_DESIGN_BTN}}),m.addEventListener("click",function(){return t.openDesignTypeSelectorPopup($(m).offset())}),s.appendChild(h),n.appendChild(s),this.element.appendChild(n)}},{key:"openDesignTypeSelectorPopup",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this.designProjectItems.length>=Li.a.MAX_DESIGN_CNT?alert("한 프로젝트당 디자인은 20개까지 추가할 수 있습니다."):this.designTypeSelectorPopup.openWithData(e,t)}},{key:"addDesign",value:(g=s()(a.a.mark(function e(t,n){var i,r,s,l,c=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=c.length>2&&void 0!==c[2]?c[2]:-1,e.next=3,this.saveDesign();case 3:return n&&(r=n.id,t={width:n.width,height:n.height,unit:n.unit,dpi:Q.d.DEFAULT_DPI}),e.next=6,o.a.instance.designProject.addDesign(t,r,i);case 6:return s=e.sent,l=this.addDesignProjectItem(s,i,!0),e.next=10,this.activeItem(l);case 10:case"end":return e.stop()}},e,this)})),function(e,t){return g.apply(this,arguments)})},{key:"prevItem",value:(h=s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.activeDesignProjectItem){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.activeItemByArrayIdx(this.activeDesignProjectItem.getDesignNo()-2);case 4:case"end":return e.stop()}},e,this)})),function(){return h.apply(this,arguments)})},{key:"nextItem",value:(d=s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.activeDesignProjectItem){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.activeItemByArrayIdx(this.activeDesignProjectItem.getDesignNo());case 4:case"end":return e.stop()}},e,this)})),function(){return d.apply(this,arguments)})},{key:"activeItemByArrayIdx",value:(c=s()(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t>=0&&this.designProjectItems.length>t)){e.next=5;break}return e.next=3,this.saveDesign();case 3:return e.next=5,this.activeItem(this.designProjectItems[t]);case 5:case"end":return e.stop()}},e,this)})),function(e){return c.apply(this,arguments)})},{key:"activeItem",value:(r=s()(a.a.mark(function e(t){var n,i,r,c;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.checkScroll(t),n=t.getDesignData().idx,!this.activeDesignProjectItem||this.activeDesignProjectItem.getDesignData().idx!==n){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,P.b.load(n,o.a.instance.designProject.getDesignProjectData().idx);case 6:this.activeDesignProjectItem&&this.activeDesignProjectItem.render({active:!1}),t.render({active:!0}),this.activeDesignProjectItem=t,this.renderDesignNavigator(),i=t.getDesignData(),(r=Object.assign({},i.templateType))||(c=i.pageList[0],r={width:c.width,height:c.height}),o.a.dispatch(new l.c(function(){var e=s()(a.a.mark(function e(t,n,i){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.leftBar.getMenu(ct.b.TEMPLATE_LIB).setTemplateType(r);case 2:case"end":return e.stop()}},e)}));return function(t,n,i){return e.apply(this,arguments)}}()));case 14:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"saveDesign",value:(i=s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!o.a.instance.changeDesign){e.next=5;break}return this.activeDesignProjectItem.showLoading(),e.next=4,P.b.save({isAutoSaved:!0});case 4:this.activeDesignProjectItem.hideLoading();case 5:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)})},{key:"checkScroll",value:function(e){if(this.designProjectItems.indexOf(e)<0)throw new Error("스크롤 타겟이 존재하지 않습니다");var t=e.getElementPos().left,n=e.getElementRect().width,i=this.scrollElement.getScrollX(),a=this.scrollElement.contents.clientWidth;t<i?this.scrollElement.setScrollX(t):t+n>i+a&&this.scrollElement.setScrollX(t+n-a)}},{key:"makeBody",value:function(){var e=this,t=document.createElement("div");t.className=R.a.BODY;var n=document.createElement("div");n.className=R.a.LIST_WRAP,this.designListElem=document.createElement("div"),this.designListElem.className=R.a.DESIGN_LIST,n.appendChild(this.designListElem);var i=document.createElement("div");i.className=R.a.BTN_ADD_DESIGN,Object(K.setToolsIcon)(i,K.ToolsIcon.ADD),i.addEventListener("click",function(){return e.openDesignTypeSelectorPopup($(i).offset())}),n.appendChild(i),z.a.createTooltip(i,z.b.T,{title:{name:H.a.DESIGN_PROJECT_MENU_ADD_DESIGN_BTN_2}});var a=this.scrollElement=new G.a(!0,!1,"100%");t.appendChild(a.render(n)),this.element.appendChild(t)}},{key:"addDesignProjectItem",value:function(e,t,n){var i=this.makeDesignProjectItem();if(t<0||t>=this.designProjectItems.length){this.designProjectItems.push(i);var a=i.render({designData:e,designNo:this.designProjectItems.length,active:n});this.designListElem.appendChild(a)}else{this.designProjectItems.splice(t,0,i);var r=i.render({designData:e,designNo:t+1,active:n});$(this.designListElem).children().eq(t).before(r)}return i}},{key:"makeDesignProjectItem",value:function(){var e=this,t=new Ur(s()(a.a.mark(function n(){return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.saveDesign();case 2:return n.next=4,e.activeItem(t);case 4:case"end":return n.stop()}},n)})),function(){return e.openDesignTypeSelectorPopup(t.getDddotOffset(),t.getDesignNo())},function(){return e.copyDesignProjectItem(t)},function(){return e.deleteDesignProjectItem(t)});return t}},{key:"copyDesignProjectItem",value:(n=s()(a.a.mark(function e(t){var n,i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.designProjectItems.length>=Li.a.MAX_DESIGN_CNT)){e.next=3;break}return alert("디자인 생성 개수가 초과되었습니다"),e.abrupt("return");case 3:return e.next=5,this.saveDesign();case 5:return e.next=7,o.a.instance.designProject.copyDesign(t.getDesignData().idx);case 7:return n=e.sent,i=this.addDesignProjectItem(n,this.designProjectItems.indexOf(t)+1,!0),e.next=11,this.activeItem(i);case 11:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"deleteDesignProjectItem",value:(t=s()(a.a.mark(function e(t){var n,i,r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==this.designProjectItems.length){e.next=2;break}throw new Error("디자인이 한개일 때에는 삭제할 수 없습니다");case 2:return n=t.getDesignData().idx,e.next=5,o.a.instance.designProject.deleteDesign(n);case 5:if(n!==this.activeDesignProjectItem.getDesignData().idx){e.next=10;break}return i=this.designProjectItems.indexOf(this.activeDesignProjectItem),r=i>0?this.designProjectItems[i-1]:this.designProjectItems[i+1],e.next=10,this.activeItem(r);case 10:this.render();case 11:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.a.instance,t=this.getRenderStatus(e);this.renderContents(t.contents),this.renderPosition(t.position),this.lastRenderStatus=t}},{key:"renderContents",value:function(t){var n=this;if(this.isChangeContentsStatus(t)){if(!t.loaded)return this.element.classList.remove(R.a.ACTIVE),void e.refreshCanvasSize();this.element.classList.add(R.a.ACTIVE),e.refreshCanvasSize();var i=o.a.instance.designProject.getDesignProjectData();this.projectTitleElem.render(i.title);var a=P.b.getDesignInfo().getIdx();this.activeDesignProjectItem=null,this.isChangeStatusDesignCnt(t)?(this.designProjectItems=[],this.designListElem.innerHTML="",i.designList.forEach(function(e,t){var i=!n.activeDesignProjectItem&&a===e.idx,r=n.addDesignProjectItem(e,t,i);i&&(n.activeDesignProjectItem=r)})):this.designProjectItems.forEach(function(e,t){var r=i.designList[t],s=!n.activeDesignProjectItem&&a===r.idx;s&&(n.activeDesignProjectItem=e),e.render({designData:r,active:s,designNo:t+1})}),this.activeDesignProjectItem||console.error("에디터에 로드된 디자인이 프로젝트에 존재하지 않음."),1===this.designProjectItems.length&&this.designProjectItems[0].setDeletable(!1),this.renderDesignNavigator()}}},{key:"renderDesignNavigator",value:function(){this.lastDesignNoLabel.innerText=String(this.designProjectItems.length);var e=this.activeDesignProjectItem?this.activeDesignProjectItem.getDesignNo():0;this.currentDesignNoLabel.innerText=String(e),e>1?this.prevBtn.classList.remove(R.a.DISABLE):this.prevBtn.classList.add(R.a.DISABLE),e<this.designProjectItems.length?this.nextBtn.classList.remove(R.a.DISABLE):this.nextBtn.classList.add(R.a.DISABLE)}},{key:"renderPosition",value:function(e){this.isChangePositionStatus(e)}},{key:"getRenderStatus",value:function(e){var t=e.designProject,n=t.getDesignProjectData().designList;return{contents:{loaded:t.isLoaded(),designCnt:n.length,designLastUpdateDate:Math.max.apply(Math,je()(n.map(function(e){return isNaN(e.updateDate)?0:e.updateDate})))},position:{}}}},{key:"isChangeContentsStatus",value:function(e){if(!this.lastRenderStatus)return!0;var t=this.lastRenderStatus.contents;return e.loaded!==t.loaded||this.isChangeStatusDesignCnt(e)||e.designLastUpdateDate!==t.designLastUpdateDate}},{key:"isChangeStatusDesignCnt",value:function(e){return!this.lastRenderStatus||(e.designCnt!==this.lastRenderStatus.contents.designCnt||e.designCnt!==this.designProjectItems.length)}},{key:"isChangePositionStatus",value:function(e){return!1}}],[{key:"refreshCanvasSize",value:function(){o.a.dispatch(new l.c(function(){var e=s()(a.a.mark(function e(t,n,i){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i.canvasRenderer.updateCanvasSize(),e.next=3,i.canvasRenderer.renderAuto(t,n);case 3:i.renderHandler(t,n);case 4:case"end":return e.stop()}},e)}));return function(t,n,i){return e.apply(this,arguments)}}()))}}]),e}(),zr=n(205),Fr=function(e){function t(e,n,i){var a;return u()(this,t),(a=y()(this,L()(t).call(this,new Nt.b(e,n,i)))).resourceType=n,a.resourceDataGetter=zr.a.createInstance(n,i),a}return b()(t,e),p()(t,[{key:"getThumbUrlList",value:function(){return[this.resourceDataGetter.getThumb(this.listItemData.resourceData)]}},{key:"makeHoverLayer",value:function(){var e=this,n=B()(L()(t.prototype),"makeHoverLayer",this).call(this),i=Ut.a.resourceTypeToItemType(this.resourceType);if(null===i)return n;var r={itemType:i,itemReferenceKey:this.listItemData.myCollectionPk.referenceKey};i===xt.b.MOCKUP&&(r.itemIdx=this.listItemData.resourceData.idx);var o=new xt.a(r),l=Ut.a.makeDddotBtn(s()(a.a.mark(function t(){var n;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:At.a.sendDetailClick(e.listItemData.myCollectionPk),n={useFavorite:e.useFavorite,myCollectionPk:e.listItemData.myCollectionPk},o.openItemInfo(n,$(l).offset());case 3:case"end":return t.stop()}},t)})));return n.appendChild(l),n}}]),t}(Nt.a),Wr=n(328),Kr=function(e){function t(e){var n;return u()(this,t),(n=y()(this,L()(t).call(this))).makeListItem=e,n.useFavorite=!0,n}var n,i;return b()(t,e),p()(t,[{key:"setResourceType",value:function(e){this.resourceType=e}},{key:"getResourceType",value:function(){return this.resourceType}},{key:"addItem",value:function(e){this.items.push(e),this.clearCache()}},{key:"removeItem",value:function(e){var t=this,n=this.findItems(e);n.reverse(),n.forEach(function(e){e.item.removeElement(),t.items.splice(t.items.indexOf(e.item),1)}),this.clearCache()}},{key:"requestList",value:(i=s()(a.a.mark(function e(t){var n,i,r,s,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setGTMLibDataAuto(),e.next=3,Wr.a.getList(t);case 3:return n=e.sent,e.next=6,this.makeItems(n.list);case 6:if((i=e.sent).length>0)try{r=this.getGTMLibData(),s=r.listTitle,o=r.category,At.a.sendImpressions({items:i,category:o,listTitle:s,pageNo:t.page,pageSize:t.pageSize})}catch(e){}return e.abrupt("return",{items:i,totalRow:n.pagination.totalRow});case 9:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"getRequestParam",value:function(e){return{resourceType:this.resourceType,page:e.page,pageSize:e.pageSize,category:null}}},{key:"makeItems",value:(n=s()(a.a.mark(function e(t){var n,i=this;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!A.ArrayUtil.isEmpty(t)){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,On.a.setMyCollectionList(t);case 4:return n=[],t.forEach(function(e){var t=On.a.makeMyCollectionPk(e);if(On.a.has(t)){var a=On.a.get(t);n.push(i.makeListItem(a.getResourceData(),t.resourceType,t.repositoryType))}else console.error("유효하지 않은 찜 데이터입니다.",e)}),e.abrupt("return",n);case 7:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)})},{key:"getLibType",value:function(){return Dt.b.FAVORITES}},{key:"setGTMLibDataAuto",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.setGTMLibData({listTitle:"찜하기",category:"찜하기",keyword:e})}}]),t}(Dt.a),Vr=function(e){function t(){var e,n;u()(this,t);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return n=y()(this,(e=L()(t)).call.apply(e,[this].concat(a))),m()(_()(n),"isMultiPage",!1),n}return b()(t,e),p()(t,[{key:"checkMultiPage",value:function(){var e=this.getThumbUrlList();this.isMultiPage=A.ArrayUtil.isEmpty(e)||e.length<2}},{key:"doAction",value:function(){this.isMultiPage?(this.closeSubPage(),B()(L()(t.prototype),"doAction",this).call(this)):this.toggleSubPage()}},{key:"toggleSubPage",value:function(){t.initSubPagesTool();var e=t.subPagesTool,n=this.element;if(n.classList.contains(R.a.SUB_PAGE_OPENED)&&e.element.parentElement)this.closeSubPage();else{this.closeSubPage(),n.classList.add(R.a.SUB_PAGE_OPENED),e.updateUI({listItem:this});var i=ca.a.getNextLineLiIdx(n),a=$(n.parentElement).children("li");i<a.length?a.eq(i).before(e.element):a.eq(a.length-1).after(e.element),this.setListScrollY($(n).position().top)}}},{key:"closeSubPage",value:function(){t.removeSubPagesToolElement(),$(this.element.parentElement).children(".".concat(R.a.SUB_PAGE_OPENED)).removeClass(R.a.SUB_PAGE_OPENED)}},{key:"makeHoverLayer",value:function(){var e=B()(L()(t.prototype),"makeHoverLayer",this).call(this),n=this.getThumbUrlList();if(!A.ArrayUtil.isEmpty(n)&&n.length>1){var i=document.createElement("label");i.innerText=String(n.length),i.className=R.a.PAGE_CNT,e.appendChild(i)}return e}}],[{key:"initSubPagesTool",value:function(){this.subPagesTool||(this.subPagesTool=new ca.a(function(e,t){var n=e.listItemData.dropEventKey,i=P.b.getDesignParam(n,e.listItemData.myCollectionPk.repositoryType,e.listItemData.myCollectionPk.resourceType===Gt.a.TEMPLATE);o.a.dispatch(new la.a(i,t))}),this.subPagesTool.render())}},{key:"removeSubPagesToolElement",value:function(){this.subPagesTool&&(this.subPagesTool.element.parentElement&&$(this.subPagesTool.element.parentElement).children(".".concat(R.a.SUB_PAGE_OPENED)).removeClass(R.a.SUB_PAGE_OPENED),$(this.subPagesTool.element).remove())}}]),t}(ha),Yr=function(e){function t(e,n){var i;return u()(this,t),(i=y()(this,L()(t).call(this,new Nt.b(e,Gt.a.TEMPLATE,ve.a.UNICORN)))).setListScrollY=n,i.checkMultiPage(),i}return b()(t,e),p()(t,[{key:"getThumbUrlList",value:function(){return this.listItemData.resourceData.pageList.map(function(e){return sa.a.makeThumbUrl(e.thumbKey)})}},{key:"makeHoverLayer",value:function(){var e=this,n=B()(L()(t.prototype),"makeHoverLayer",this).call(this),i=new er({}),a=Ut.a.makeDddotBtn(function(){var t=e.listItemData.myCollectionPk;i.openTemplateInfo({designIdx:Number(t.referenceKey),repositoryType:t.repositoryType,favoritesParam:{useFavorite:!0,myCollectionPk:t},offset:$(a).offset(),templateLoadKey:e.listItemData.dropEventKey}),At.a.sendDetailClick(e.listItemData.myCollectionPk)});return n.appendChild(a),n}}]),t}(Vr),jr=function(e){function t(e,n){var i;return u()(this,t),(i=y()(this,L()(t).call(this,new Nt.b(e,Gt.a.TEMPLATE,ve.a.BIZHOWS)))).setListScrollY=n,i.checkMultiPage(),i}return b()(t,e),p()(t,[{key:"getThumbUrlList",value:function(){if(!this.thumbUrlList){this.thumbUrlList=[];var e,t=0;do{(e=this.listItemData.resourceData["imgURL".concat(t++)])&&this.thumbUrlList.push(e)}while(null!=e)}return this.thumbUrlList}},{key:"makeHoverLayer",value:function(){var e=this,n=B()(L()(t.prototype),"makeHoverLayer",this).call(this),i=new Za({}),a=Ut.a.makeDddotBtn(function(){var t=e.listItemData.myCollectionPk;i.openTemplateInfo({designIdx:Number(t.referenceKey),repositoryType:t.repositoryType,favoritesParam:{useFavorite:!0,myCollectionPk:t},offset:$(a).offset(),templateLoadKey:e.listItemData.dropEventKey,bizDetailSiteMapIdx:null,sheetSize:null})});return n.appendChild(a),n}}]),t}(Vr),$r=function(e){function t(e,n){var i;return u()(this,t),(i=y()(this,L()(t).call(this,new Nt.b(e,Gt.a.DESIGN,ve.a.UNICORN)))).setListScrollY=n,i.checkMultiPage(),i}return b()(t,e),p()(t,[{key:"getThumbUrlList",value:function(){return this.listItemData.resourceData.pageList.map(function(e){return sa.a.makeThumbUrl(e.thumbKey)})}},{key:"makeHoverLayer",value:function(){var e=this,n=B()(L()(t.prototype),"makeHoverLayer",this).call(this),i=new oa({}),a=Ut.a.makeDddotBtn(function(){var t=e.listItemData.myCollectionPk;i.openTemplateInfo({designIdx:Number(t.referenceKey),favoritesParam:{useFavorite:!0,myCollectionPk:t},repositoryType:t.repositoryType,offset:$(a).offset()})});return n.appendChild(a),n}}]),t}(Vr),Xr=function(e){function t(){var e;u()(this,t),(e=y()(this,L()(t).call(this))).isLoginRequire=!0,e.init();var n=!0,i=!1,a=void 0;try{for(var r,s=Gt.b.values()[Symbol.iterator]();!(n=(r=s.next()).done);n=!0){var o=r.value;On.a.addRegisterListener(o,function(t){return e.addItemByFavoritePk(t)}).addUnregisterListener(o,function(t){return e.removeItemByFavoritePk(t)})}}catch(e){i=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return e}var n,i,r,o,l;return b()(t,e),p()(t,[{key:"addItemByFavoritePk",value:(l=s()(a.a.mark(function e(t){var n,i,r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=On.a.get(t),this.isLoaded&&n){e.next=3;break}return e.abrupt("return");case 3:if(Vr.removeSubPagesToolElement(),this.updateUIRadioTool(),i=this.lib.getResourceType(),!A.StringUtil.isEmpty(i)&&i!==t.resourceType){e.next=17;break}return r=this.makeListItem(n.getResourceData(),t.resourceType,t.repositoryType),this.lib.addItem(r),e.next=11,this.paginationListTool.prependItem(r);case 11:if(!this.isActive){e.next=16;break}return e.next=14,this.paginationListTool.justifyList();case 14:e.next=17;break;case 16:this.paginationListTool.setJustifyRequire(!0);case 17:case"end":return e.stop()}},e,this)})),function(e){return l.apply(this,arguments)})},{key:"removeItemByFavoritePk",value:(o=s()(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.lib.removeItem(t),Vr.removeSubPagesToolElement(),this.updateUIRadioTool(),n=this.lib.getResourceType(),!A.StringUtil.isEmpty(n)&&n!==t.resourceType){e.next=13;break}if(!On.a.hasFavorite(n)){e.next=10;break}return e.next=8,this.justifyList();case 8:e.next=13;break;case 10:return e.next=12,this.setResourceType(null,!0);case 12:this.isActive||this.paginationListTool.setJustifyRequire(!0);case 13:case"end":return e.stop()}},e,this)})),function(e){return o.apply(this,arguments)})},{key:"justifyList",value:(r=s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isActive){e.next=5;break}return e.next=3,this.paginationListTool.justifyList();case 3:e.next=6;break;case 5:this.paginationListTool.setJustifyRequire(!0);case 6:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"makeLib",value:function(){var e=this;return new Kr(function(t,n,i){return e.makeListItem(t,n,i)})}},{key:"makeListItem",value:function(e,t,n){var i=this;switch(t){case Gt.a.TEMPLATE:switch(n){case ve.a.UNICORN:return new Yr(e,function(e){return i.setListScrollY(e)});case ve.a.BIZHOWS:return new jr(e,function(e){return i.setListScrollY(e)});default:throw new Error("잘못된 타입입니다. - ".concat(t,", ").concat(n))}case Gt.a.DESIGN:return new $r(e,function(e){return i.setListScrollY(e)});default:return new Fr(e,t,n)}}},{key:"setListScrollY",value:function(e){this.paginationListTool.scrollElement.setScrollY(e)}},{key:"makeElement",value:function(){var e=this,n=document.createElement("div");return n.className=R.a.LIBRARY_FAVORITES,this.radioTool=new V.a(function(t){return e.setResourceType(t)}),n.appendChild(this.radioTool.render()),this.paginationListTool.setListEmptyView(t.makeEmptyListView()),n.appendChild(this.paginationListTool.render()),n}},{key:"setResourceType",value:(i=s()(a.a.mark(function e(t){var n=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.length>1&&void 0!==n[1]&&n[1]||this.lib.getResourceType()!==t){e.next=3;break}return e.abrupt("return");case 3:return this.lib.setResourceType(t),e.next=6,this.loadList();case 6:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"loadList",value:(n=s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isLoaded){e.next=4;break}return e.next=3,On.a.initSizeMap();case 3:this.updateUIRadioTool();case 4:return e.next=6,this.paginationListTool.initList();case 6:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"updateUIRadioTool",value:function(){var e=this.lib.getResourceType(),t=[],n=!0,i=!1,a=void 0;try{for(var r,s=Gt.b.values()[Symbol.iterator]();!(n=(r=s.next()).done);n=!0){var o=r.value;if(On.a.hasFavorite(o))if("continue"===function(){var n="# ".concat(Gt.b.getText(o));if(t.find(function(e){return e.label===n}))return"continue";t.push({label:n,value:o,selected:o===e})}())continue}}catch(e){i=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}t.length>0&&t.unshift({label:"# 전체",value:"",selected:!t.some(function(e){return e.selected})}),this.radioTool.updateUI(t)}},{key:"getIcon",value:function(){return K.ToolsIcon.HEART_FILL}},{key:"getName",value:function(){return H.a.TOOLS_LIB_FAVORITES_TITLE}},{key:"getLeftMenuType",value:function(){return ct.b.FAVORITE_LIB}}],[{key:"makeEmptyListView",value:function(){var e=document.createElement("div");e.className=R.a.EMPTY_LIST_NOTI_LAYER;var t=document.createElement("div");Object(K.setToolsIcon)(t,K.ToolsIcon.HEART).classList.add("empty_list_notify_favorite_img");var n=document.createElement("p");n.classList.add(R.a.TITLE),n.innerHTML=A.CRM.get(H.a.TOOLS_LIB_FAVORITES_EMPTY_LIST_MSG),t.appendChild(n);var i=document.createElement("p");return i.innerHTML=A.CRM.get(H.a.TOOLS_LIB_FAVORITES_EMPTY_LIST_MSG_2),t.appendChild(i),e.appendChild(t),e}}]),t}(Ot.a),Zr=function(){function e(){u()(this,e)}return p()(e,[{key:"getActionSet",value:function(){return{createDesignToCart:(t=s()(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.b.save({categoryIdx:Ei.a.getSaveCategoryIdx(),isCreateToCart:!0,afterSaveCallback:t});case 2:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),updateDesignToCart:(e=s()(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.b.save({categoryIdx:Ei.a.getSaveCategoryIdx(),isUpdateToCart:!0,afterSaveCallback:t});case 2:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)}),checkIncludePhotoItem:function(){return o.a.checkIncludePhotoItem()}};var e,t}}]),e}(),qr=n(383),Qr=function(){function e(){u()(this,e)}return p()(e,[{key:"getActionSet",value:function(){return{isMobileMode:function(){return fa.a.isMobilePortraitSize()},openBizhowsCenter:function(){return window.open(A.CRM.get(H.a.HELP_CENTER_BIZHOWS_CUSTOMER_SERVICE_URL))},openCopyrightInfoPage:function(){return window.open(A.CRM.get(H.a.HELP_CENTER_COPYRIGHT_INFO_URL))},openPrintInfoPage:function(){return window.open(A.CRM.get(H.a.HELP_CENTER_PRINT_URL))},openFaqInfoPage:function(){return window.open(A.CRM.get(H.a.HELP_CENTER_FAQ_URL))},showZendesk:function(){return qr.a.instance.show()}}}}]),e}(),Jr=function e(){u()(this,e),m()(this,"rightSectionActions",new Zr),m()(this,"helpCenterAction",new Qr)},es=function(){function e(){u()(this,e)}return p()(e,[{key:"makeMenuList",value:function(){var e=[];e.push(new ir),ln.a.leftBarOption.showBizTemplate&&e.push(new Ja);var t=new _a;return e.push(t),e.push(new Pr),e.push(new qt),e.push(new Wn),e.push(new Yt),e.push(new Ga),e.push(new Xr),e.push(new Ua),e}},{key:"getRenderer",value:function(){var e=new za(this.makeMenuList(),[]);e.activeMenu(ct.b.TEMPLATE_LIB,!0);var t=new Jr,n=new Nr;n.setActionSet(t.rightSectionActions.getActionSet());var i=new Wa;return i.setActionSet(t.helpCenterAction.getActionSet()),new cn(new Zi,e,new Jt,new hn,new st.a,new Ya,new wa,new bt,new ti,new ft.UnicornNotificationMessageBox(A.CRM.get(H.a.NOTIFICATION_HOST),3e5,!1),i,new Gr,n,null)}}]),e}(),ts=n(487),ns=n(241),is=n(376),as=function(e){function t(){var e,n;u()(this,t);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return n=y()(this,(e=L()(t)).call.apply(e,[this].concat(r))),m()(_()(n),"actionType",l.a.ONE_TIME),m()(_()(n),"doSaveQueue",!1),m()(_()(n),"renderAuto",!1),m()(_()(n),"changeDesign",function(){return!1}),m()(_()(n),"commitAction",function(){var e=s()(a.a.mark(function e(n,i,r){var s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((s=i.launcherOption)&&s.hasOption()){e.next=3;break}return e.abrupt("return");case 3:"REDIRECT"===s.parameter.actionOnSuccess.type&&ji.b.setRedirectUrl(s.parameter.actionOnSuccess.url),r.canvasRenderer.setPageTitles(s.parameter.globalTitles),t.updateFontSizeListByDpi(r,i.option.size.dpi/Q.d.DEFAULT_DPI),P.b.setExtraOption({copyWithCurrentTask:!s.isDesignRelatedBizhows()});case 7:case"end":return e.stop()}},e)}));return function(t,n,i){return e.apply(this,arguments)}}()),m()(_()(n),"rollbackAction",function(){}),m()(_()(n),"recycle",function(){}),n}return b()(t,e),p()(t,null,[{key:"updateFontSizeListByDpi",value:function(e,t){var n=e.itemToolsRenderer.getToolRenderers().find(function(e){return e instanceof ns.a}),i=e.itemToolsRenderer.getToolRenderers().find(function(e){return e instanceof is.a});n.changeFontSizeListByDpi(t),i.changeFontSizeListByDpi(t)}}]),t}(l.b),rs=n(488),ss=function(){function e(){u()(this,e)}return p()(e,null,[{key:"checkMetaSizeOption",value:function(e,t,n){t&&!n.equalsSizeOption(t)&&this.changeSheetSizeBySizeOption(e,n.size)}},{key:"changeSheetSizeBySizeOption",value:function(e,t){rs.a.changeAllPageSheetSizeBySizeOption(e,t),o.a.changeMeta(e)}}]),e}();!function(e){function t(){return(t=s()(a.a.mark(function e(t){var i,r,s,l,c;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d(),i=!0===t.user.isEditMode,o.a.setUnicornParam(t),ln.a.initOption(t.launcherOption.parameter),ln.a.templateLibMenuOption.bizhowsTabMenu=o.a.instance.user.hasBizAuth,(r=(new es).getRenderer()).rightSection.printoutFinalConfirm.setInspectionResult(r.canvasRenderer.printout.inspectionResult),e.prev=7,e.next=10,t.design.load(i,E.a.LOADING_ITEM);case 10:if(s=e.sent,o.a.STOP_WATCH.split("designMeta loaded."),P.b.isTemplate(t.design)||P.b.setUserDesign(t.design.designBean,!0===t.launcherOption.isLauncherUpdateMode()),!s.pages[0].reference){e.next=24;break}if(s.pages[0].reference.templateRepositoryType!==ve.a.UNICORN){e.next=22;break}return e.next=17,ge.a.findOne(Number(s.pages[0].reference.templateKey));case 17:l=e.sent,fe.a.setTemplateTypeList(l.templateTypeList),fe.a.setRefTemplateKey(String(l.idx)),e.next=24;break;case 22:fe.a.setTemplateTypeList([{id:null,title:"타입없음-비즈하우스"}]),fe.a.setRefTemplateKey(s.pages[0].reference.templateKey);case 24:e.next=34;break;case 26:return e.prev=26,e.t0=e.catch(7),console.error(e.t0),alert("디자인 로드중 에러가 발생하였습니다.\n빈 페이지를 로드합니다."),e.next=32,M.a.make().load(i);case 32:s=e.sent,o.a.instance.designProject.unload();case 34:t.launcherOption.hasOption()||o.a.instance.option.size||o.a.instance.option.initSizeByMeta(s),o.a.setMetaData(s,r),(c=o.a.instance.launcherOption)&&(p(c),c.hasOption()&&c.isDesignRelatedBizhows()&&P.b.enableSaveToBizDesignLibrary()),n(t.design,s),o.a.addActionListener(function(e){P.b.saveAuto(e)});case 40:case"end":return e.stop()}},e,null,[[7,26]])}))).apply(this,arguments)}function n(e,t){var n=e.designBean;if(n){var i=JSON.parse(n.sizeOption);ss.checkMetaSizeOption(t,i,o.a.instance.option)}else P.b.isTemplate(e)&&ss.changeSheetSizeBySizeOption(t,o.a.instance.option.size)}function i(){return(i=s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.instance.renderer.setReady();case 2:return D.a.createProgram(),o.a.dispatch(new me),o.a.dispatch(new N.a),o.a.dispatch(new ts.a),o.a.dispatch(new as),e.next=9,r();case 9:P.b.getDesignInfo().isLoaded()||o.a.dispatch(new l.c(function(e){Te.a.applyPresetToMeta(e)}));case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function r(){return c.apply(this,arguments)}function c(){return(c=s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u(),e.abrupt("return",new Promise(function(e){o.a.dispatch(new l.c(function(){var t=s()(a.a.mark(function t(n,i,r){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.renderAuto(n,i,function(){ye.a.loadDesignMetaResource(n).catch(function(e){return console.error(e)}),e()});case 2:case"end":return t.stop()}},t)}));return function(e,n,i){return t.apply(this,arguments)}}(),!1))}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function u(){window.onbeforeunload=function(){if(o.a.instance.changeDesign)return"변경사항이 저장되지 않을 수 있습니다."},g.instance.addEventListener("keydown",function(e){o.a.dispatch(new f.c(e))}),g.instance.addEventListener("keyup",function(e){o.a.dispatch(new C(e))}),g.instance.addEventListener("paste",function(e){o.a.dispatch(new f.b(e))}),g.instance.addEventListener("drop",function(e){e.preventDefault()}),g.instance.addEventListener("dragover",function(e){e.preventDefault()});var e="click.".concat(A.StringUtil.random()),t="mousedown.".concat(A.StringUtil.random()),n="mousedown.".concat(A.StringUtil.random());$("body").on("click",".".concat(R.a.BUTTON_TOOL_TAB_TOGGLE),function(i){i.stopPropagation();var a=!this.classList.contains(R.a.ACTIVE);if($(document.body).trigger("click"),!this.classList.contains(R.a.DISABLE)&&a){var r=$(this).next(".".concat(R.a.TOOLS_TAB));if(0===r.length)return;this.classList.add(R.a.ACTIVE);var s=!1;r.on(n,function(e){e.stopPropagation(),s=!0}).attr("tabindex",-1),r[0].focus({preventScroll:!0}),$(document.body).on(t,function(){s=!1}),$(document.body).on(e,function(){s||(Ee.a.scrollOn(),$(".".concat(R.a.BUTTON_TOOL_TAB_TOGGLE,".").concat(R.a.ACTIVE)).removeClass(R.a.ACTIVE),$(document.body).off(e).off(t),r.off(n))})}}).on("click keydown",".".concat(R.a.TOOLS_TAB),function(e){e.stopPropagation()})}function d(){if(Array.isArray||(window.Array.isArray=function(e){return"[object array]"===Object.prototype.toString.call(e)}),"function"!=typeof window.CustomEvent){var e=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n};e.prototype=window.Event.prototype,window.CustomEvent=e}}function p(e){e.output&&(o.a.instance.option.size=e.output.printSize)}e.init=function(e){return t.apply(this,arguments)},e.setReady=function(){return i.apply(this,arguments)}}(ar||(ar={}));var os,ls=function e(t){u()(this,e),this.logo=t.logo||"MIRI.DIH",this.partnerId=t.partnerId||"miridih",this.showDesignGuide=!0===t.showDesignGuide,this.showPhotoGuide=!0===t.showPhotoGuide,this.showPrintOutGuide=!0===t.showPrintOutGuide,this.showPageMaskGuide=!0===t.showPageMaskGuide,this.useSnap=!0,this.showSnapLIne=!0,this.leftMenuPaginationMode=t.leftMenuPaginationMode||Ri.b.SCROLL},cs=n(67),us=n(240),ds=function(){function e(t){u()(this,e),m()(this,"printoutOption",{productType:cs.d.NO_SELECTION,optionType:cs.c.NONE,margin:{safety:0}}),this.desc="지금은아마그냥 웹용 편집",this.initSizeOptionFromUrlParam()}return p()(e,[{key:"size",get:function(){return this._size},set:function(e){this._size=e?{width:e.width,height:e.height,unit:e.unit,dpi:e.dpi}:null}}]),p()(e,[{key:"initByDesignBean",value:function(e){if(!A.StringUtil.isEmpty(e.sizeOption)){var t=JSON.parse(e.sizeOption),n=e.pageList[0];t.unit!==Q.b.PX||Qn.a.isSamePixel(t,n)?this.size=t:(console.log("잘못된 사이즈 옵션값을 초기화합니다"),this.size={width:n.width,height:n.height,unit:Q.b.PX})}A.StringUtil.isEmpty(e.printoutOption)||(this.printoutOption=us.a.getPrintoutOptionByMeta(JSON.parse(e.printoutOption)))}},{key:"initSizeByMeta",value:function(e){var t=e.pages[0].sheetSize;this.size={width:t.width,height:t.height,unit:Q.b.PX,dpi:Q.d.DEFAULT_DPI}}},{key:"initSizeOptionFromUrlParam",value:function(){var e=A.RequestUtil.get(A.RequestParamKey.SIZE_UNIT),t=Number(A.RequestUtil.get(A.RequestParamKey.DPI));if(!(!e||isNaN(t)||t<=0)){var n=Number(A.RequestUtil.get(A.RequestParamKey.SHEET_W)),i=Number(A.RequestUtil.get(A.RequestParamKey.SHEET_H)),a=di.getMaxDecimalPlaces(e)+1;this.size={width:De.b.round(Qn.a.getSizeFromPixel(n,t,e),a),height:De.b.round(Qn.a.getSizeFromPixel(i,t,e),a),unit:e,dpi:t}}}},{key:"equalsSizeOption",value:function(e){var t=this.size;return t.dpi===e.dpi&&t.unit===e.unit&&t.width===e.width&&t.height===e.height}}]),e}(),ps=n(129),hs=n(93);!function(e){e.CHROME="https://www.google.com/chrome/",e.FIREFOX="https://www.firefox.com/",e.SAFARI="https://www.apple.com/safari/",e.EDGE="https://www.microsoft.com/windows/microsoft-edge/"}(os||(os={}));var ms=function(e){function t(){var e;return u()(this,t),e=y()(this,L()(t).call(this)),m()(_()(e),"wrapper",document.createElement("div")),m()(_()(e),"input",document.createElement("input")),e}return b()(t,e),p()(t,[{key:"close",value:function(){return B()(L()(t.prototype),"close",this).call(this)}},{key:"getContents",value:function(){var e=document.createElement("div");e.className="header",t.addText(e,H.a.TOOLS_POPUP_BROWSER_TITLE),this.wrapper.appendChild(e);var n=document.createElement("div");n.className="contents",n.innerHTML=A.CRM.get(H.a.TOOLS_POPUP_BROWSER_CONTENTS),this.wrapper.appendChild(n);var i=document.createElement("div");i.className="link",i.appendChild(t.createInstallLink(A.BrowserType.CHROME)),i.appendChild(t.createInstallLink(A.BrowserType.FIREFOX)),i.appendChild(t.createInstallLink(A.BrowserType.SAFARI)),i.appendChild(t.createInstallLink(A.BrowserType.EDGE)),this.wrapper.appendChild(i);var a=document.createElement("div");a.className="footer";var r=t.createLink(t.DESC_LINK);return t.addText(r,H.a.TOOLS_POPUP_BROWSER_DESC_LINK),a.appendChild(r),this.wrapper.appendChild(a),this.wrapper}},{key:"getId",value:function(){return"recommendChrome"}},{key:"updateUI",value:function(){}}],[{key:"open",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(this.canOpen()||e)&&this.instance.open()}},{key:"canOpen",value:function(){switch(o.a.getEnv().browser.getType()){case A.BrowserType.CHROME:case A.BrowserType.FIREFOX:case A.BrowserType.SAFARI:case A.BrowserType.EDGE:case A.BrowserType.MOBILE_DEFAULT:return!1;default:return!0}}},{key:"setCookie",value:function(){A.CookieUtil.setCookie(A.CooKey.RECOMMEND_CHROME,A.CooKey.RECOMMEND_CHROME,7,0,0)}},{key:"createInstallLink",value:function(e){var t=this.getInstallLinkInfo(e),n=t.url,i=t.textKey,a=this.createLink(n);a.setAttribute("data-type",e),a.appendChild(document.createElement("div"));var r=document.createElement("p");return r.innerHTML=A.CRM.get(i),a.appendChild(r),a}},{key:"createLink",value:function(e){var t=document.createElement("a");return t.target="_blank",t.href=e,t}},{key:"getInstallLinkInfo",value:function(e){switch(e){case A.BrowserType.CHROME:return{url:os.CHROME,textKey:H.a.TOOLS_POPUP_BROWSER_CHROME};case A.BrowserType.FIREFOX:return{url:os.FIREFOX,textKey:H.a.TOOLS_POPUP_BROWSER_FIREFOX};case A.BrowserType.SAFARI:return{url:os.SAFARI,textKey:H.a.TOOLS_POPUP_BROWSER_SAFARI};case A.BrowserType.EDGE:return{url:os.EDGE,textKey:H.a.TOOLS_POPUP_BROWSER_EDGE};default:throw new Error("invalid browser")}}},{key:"addText",value:function(e,t){var n=document.createTextNode(A.CRM.get(t));e.appendChild(n)}}]),t}(U.a);m()(ms,"instance",new ms),m()(ms,"DESC_LINK","https://miricanvassupport.zendesk.com/hc/ko/articles/360022331272");var gs=n(125),vs=n(324),fs=function(){function e(t){u()(this,e),m()(this,"projectData",e.NULL_OBJECT),this.param=t}var t,n,i,r,c;return p()(e,[{key:"load",value:(c=s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.param&&this.param.idx>0)){e.next=11;break}return e.prev=1,e.next=4,Li.a.findOne(this.param.idx);case 4:this.projectData=e.sent,e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),alert("디자인 프로젝트 로드 실패"),console.error(e.t0);case 11:return e.abrupt("return",this);case 12:case"end":return e.stop()}},e,this,[[1,7]])})),function(){return c.apply(this,arguments)})},{key:"isLoaded",value:function(){return this.projectData.idx>0}},{key:"getFirstUnicornDesign",value:(r=s()(a.a.mark(function t(){var n;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!A.ArrayUtil.isEmpty(this.projectData.designList)){t.next=7;break}return t.next=4,this.addDesign();case 4:t.t0=t.sent,t.next=8;break;case 7:t.t0=this.projectData.designList[0];case 8:return n=t.t0,t.abrupt("return",this.makeUnicornDesign(n));case 12:return t.prev=12,t.t1=t.catch(0),console.error(t.t1),this.projectData=e.NULL_OBJECT,t.abrupt("return",M.a.make());case 17:case"end":return t.stop()}},t,this,[[0,12]])})),function(){return r.apply(this,arguments)})},{key:"addDesign",value:(i=s()(a.a.mark(function e(t,n){var i,r,s,o,l,c=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=c.length>2&&void 0!==c[2]?c[2]:-1,r=new vs.a,s=t?Qn.a.getPixelLimitMax(t,si.a.getMaxSheetSize(!1)):{width:si.a.DEFAULT_SHEET_SIZE,height:si.a.DEFAULT_SHEET_SIZE},si.c.setBlank(r,s,n),t||(t={width:s.width,height:s.height,unit:Q.b.PX,dpi:Q.d.DEFAULT_DPI}),e.next=7,P.b.makeSaveParam({meta:r,categoryIdx:0,title:P.a.getDefaultTitle(),sizeOption:t});case 7:return o=e.sent,e.next=10,Li.a.createDesign(this.projectData.idx,o,i);case 10:return l=e.sent,this.addDesignDataToArray(l,i),e.abrupt("return",l);case 13:case"end":return e.stop()}},e,this)})),function(e,t){return i.apply(this,arguments)})},{key:"copyDesign",value:(n=s()(a.a.mark(function e(t){var n,i,r,s,o,l,c;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=0,r=!0,s=!1,o=void 0,e.prev=4,l=this.projectData.designList[Symbol.iterator]();case 6:if(r=(c=l.next()).done){e.next=17;break}if(c.value.idx!==t){e.next=13;break}return e.next=11,Li.a.copyDesign(this.projectData.idx,t);case 11:return n=e.sent,e.abrupt("break",17);case 13:i++;case 14:r=!0,e.next=6;break;case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(4),s=!0,o=e.t0;case 23:e.prev=23,e.prev=24,r||null==l.return||l.return();case 26:if(e.prev=26,!s){e.next=29;break}throw o;case 29:return e.finish(26);case 30:return e.finish(23);case 31:if(n){e.next=33;break}throw new Error("복사 실패");case 33:return this.addDesignDataToArray(n,i+1),e.abrupt("return",n);case 35:case"end":return e.stop()}},e,this,[[4,19,23,31],[24,,26,30]])})),function(e){return n.apply(this,arguments)})},{key:"deleteDesign",value:(t=s()(a.a.mark(function e(t){var n,i,r,s,o,l;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=0,i=!0,r=!1,s=void 0,e.prev=4,o=this.projectData.designList[Symbol.iterator]();case 6:if(i=(l=o.next()).done){e.next=17;break}if(l.value.idx!==t){e.next=13;break}return e.next=11,Li.a.deleteDesign(this.projectData.idx,t);case 11:return this.projectData.designList.splice(n,1),e.abrupt("break",17);case 13:n++;case 14:i=!0,e.next=6;break;case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(4),r=!0,s=e.t0;case 23:e.prev=23,e.prev=24,i||null==o.return||o.return();case 26:if(e.prev=26,!r){e.next=29;break}throw s;case 29:return e.finish(26);case 30:return e.finish(23);case 31:case"end":return e.stop()}},e,this,[[4,19,23,31],[24,,26,30]])})),function(e){return t.apply(this,arguments)})},{key:"updateDesignData",value:function(e){var t=0,n=!0,i=!1,a=void 0;try{for(var r,s=this.projectData.designList[Symbol.iterator]();!(n=(r=s.next()).done);n=!0){if(r.value.idx===e.idx){this.projectData.designList.splice(t,1,e);break}t++}}catch(e){i=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}o.a.dispatch(new l.c(function(e,t,n){return n.renderDesignProjectMenu(t)}))}},{key:"addDesignDataToArray",value:function(e,t){t<0||t>=this.projectData.designList.length?this.projectData.designList.push(e):this.projectData.designList.splice(t,0,e)}},{key:"makeUnicornDesign",value:function(e){return M.a.make({repositoryType:ve.a.UNICORN,resourceType:Gt.a.DESIGN,idx:e.idx,designProjectIdx:this.projectData.idx})}},{key:"getDesignProjectData",value:function(){return this.projectData}},{key:"unload",value:function(){this.projectData=e.NULL_OBJECT}}]),e}();m()(fs,"NULL_OBJECT",{idx:0,title:"",designList:[]});var Es=n(277),Ts=n(373),ys=function(){function e(t){u()(this,e),this.initByParameter(t)}return p()(e,[{key:"initByParameter",value:function(e){e&&"PRINT"===e.type&&e.shape&&(this.outputShape=e.shape)}},{key:"existOption",value:function(){return Boolean(this.outputShape)}},{key:"isVector",value:function(){return this.existOption()&&"VECTOR"===this.outputShape.type}},{key:"isCircle",value:function(){return this.existOption()&&"CIRCLE"===this.outputShape.type}},{key:"isSquare",value:function(){return this.existOption()&&"SQUARE"===this.outputShape.type}},{key:"isRoundSquare",value:function(){return this.existOption()&&"ROUND_SQUARE"===this.outputShape.type}},{key:"getVectorOption",value:function(){return this.isVector()?this.outputShape:null}},{key:"getCircleOption",value:function(){return this.isCircle()?this.outputShape:null}},{key:"getSquareOption",value:function(){return this.isSquare()?this.outputShape:null}},{key:"getRoundSquareOption",value:function(){return this.isRoundSquare()?this.outputShape:null}}]),e}(),Is=function(){function e(t){u()(this,e),this.init(t)}return p()(e,[{key:"init",value:function(e){"PRINT"===e.type?this.initByPrint(e):this.initByScreen(e)}},{key:"initByPrint",value:function(e){this.initPrintSize(e.size),this.initAllowTemplate(e)}},{key:"initByScreen",value:function(e){this.initScreenSize(e.width,e.height)}},{key:"initPrintSize",value:function(e){this._printSize={width:e.width,height:e.height,dpi:Boolean(e.dpi)?e.dpi:Q.d.DEFAULT_DPI,unit:"MM"===e.unit?ft.SizeUnit.MM:ft.SizeUnit.PX}}},{key:"initAllowTemplate",value:function(e){if("PRINT"===e.type){var t=e.guides[0];"AREA"===t.type&&(this._ignoreWhenPureTemplateLoad=e.guides&&e.guides.length&&t.inspection.ignoreWhenPureTemplateLoad)}}},{key:"initScreenSize",value:function(e,t){this._screenSize={width:e,height:t}}},{key:"printSize",get:function(){return this._printSize}},{key:"screenSize",get:function(){return this._screenSize}},{key:"ignoreWhenPureTemplateLoad",get:function(){return this._ignoreWhenPureTemplateLoad}}]),e}(),Ls=function(){function e(t){u()(this,e),m()(this,"_commodityIndex",0),m()(this,"_designIndex",0),m()(this,"_pageNumbers",[]),this.init(t)}return p()(e,[{key:"type",get:function(){return this._type}},{key:"templateId",get:function(){return this._templateId}},{key:"fromCommodity",get:function(){return this._fromCommodity}},{key:"id",get:function(){return this._id}},{key:"commodityIndex",get:function(){return this._commodityIndex}},{key:"designIdx",get:function(){return this._designIndex}},{key:"pageNumbers",get:function(){return this._pageNumbers}}]),p()(e,[{key:"init",value:function(e){if("BIZHOWS-TEMPLATE"===e.canvasOpenMode)e.bizhowsTemplate||e.bizhowsDesign?this.initByTemplate(e):e.templateId&&(this._templateId=e.templateId);else{if("BIZHOWS-DESIGN"!==e.canvasOpenMode)throw new Error("param is not for bizhows.");this.initByDesign(e)}}},{key:"initByTemplate",value:function(e){e.bizhowsTemplate&&this.initBizhowsTemplate(e.bizhowsTemplate),e.bizhowsDesign&&this.initBizhowsDesign(e.bizhowsDesign)}},{key:"initBizhowsTemplate",value:function(e){this._bizhowsTemplate=e,this._fromCommodity=e.fromCommodity,this._id=e.id,this._commodityIndex=e.commodityIndex,this._designIndex=e.designIndex,this._pageNumbers=e.pageNumbers,this._type=e.type.toString()}},{key:"initBizhowsDesign",value:function(e){this._bizhowsDesign=e,this._commodityIndex=e.commodityIndex}},{key:"initByDesign",value:function(e){this._commodityIndex=e.commodityIndex}}]),e}(),ks=function e(t,n,i,a,r){u()(this,e),this.type=t,this.radius=n,this.roundDepth=i,this.vectorFormat=a,this.vector=r},_s=function(){function e(t,n,i,a){if(u()(this,e),this.parameter=t,this.useOverWrite=!1,null==this.parameter){if(!i||!i.rawData)return;if(this.parameter=Object.assign({},JSON.parse(i.rawData).launcherParam),!this.parameter.mode)return;var r=i.designHistoryIdx||i.historyIdx;if(a&&a.rawData){var s=Object.assign({},JSON.parse(a.rawData).launcherParam);s.mode&&("NEW"===s.mode?(r=a.designHistoryIdx||a.historyIdx,this.parameter=s):"UPDATE"===s.mode&&(this.useOverWrite=!0,s.mode!==this.parameter.mode&&(this.parameter.mode=s.mode,this.parameter=s)))}this.parameter.design={id:n.idx,revision:r}}this.init()}return p()(e,[{key:"init",value:function(){var t=this.parameter;if(t){if(this.isBizhowsDesign()){var n=t.templateId;this.unicornTemplateIdx=e.getUnicornTemplateIndex(n);var i=(!isNaN(this.unicornTemplateIdx)&&this.unicornTemplateIdx)>0;try{this.bizTemplate=new Ls(t)}catch(e){if(!1===i)throw e}}if(t.output){var a=t.output;this.initOutput(a),this.masking=new ys(a),this.output=new Is(a),this.printGuides="PRINT"===a.type?a.guides:null}}}},{key:"initOutput",value:function(e){if("PRINT"===e.type&&e.shape){var t,n=e.shape;"SQUARE"===n.type?t=new ks(It.a.SQUARE):"ROUND_SQUARE"===n.type?(t=new ks(It.a.ROUND_SQUARE)).roundDepth=n.roundDepth:"CIRCLE"===n.type?(t=new ks(It.a.CIRCLE)).radius=n.radius:"VECTOR"===n.type?((t=new ks(It.a.VECTOR)).vectorFormat=mt[n.vectorFormat],t.vector=n.vector):"LINE"===n.type&&(t=new ks(It.a.LINE)),wt.initMask(t,{width:e.size.width,height:e.size.height})}}},{key:"isBizhowsDesign",value:function(){if(!this.hasOption())return!1;var e=this.parameter.canvasOpenMode;return"BIZHOWS-TEMPLATE"===e||"BIZHOWS-DESIGN"===e}},{key:"getDesignMode",value:function(){return this.isDesignRelatedBizhows()?ua.a.BIZHOWS:ua.a.MIRICANVAS}},{key:"isUnicornDesignFromBizhows",value:function(){return!!this.hasOption()&&"UNICORN-DESIGN"===this.parameter.canvasOpenMode}},{key:"isDesignRelatedBizhows",value:function(){return this.isBizhowsDesign()||this.isUnicornDesignFromBizhows()}},{key:"hasOption",value:function(){return!!this.parameter&&!!this.parameter.mode}},{key:"isLauncherUpdateMode",value:function(){return this.hasOption()&&"UPDATE"===this.parameter.mode}}],[{key:"getUnicornTemplateIndex",value:function(e){if(!e)return 0;var t=e.split(";");return Number(t[0])}}]),e}(),ws=n(291),bs=n(297),Ss=function(){function e(){u()(this,e)}var t;return p()(e,null,[{key:"getDesignIndexFromHistoryDesign",value:(t=s()(a.a.mark(function e(t,n){var i,r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=A.CRM.get(H.a.DESIGN_HISTORY_OVERWRITE_REVISION).replace("{designIdx}",t.toString()).replace("{revisionIdx}",n.toString()),e.prev=1,e.next=4,ft.UnicornApiRequest.post(i,{contentType:"application/json"});case 4:return r=e.sent.data,e.abrupt("return",r.idx);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",t);case 12:case"end":return e.stop()}},e,null,[[1,8]])})),function(e,n){return t.apply(this,arguments)})}]),e}(),Os=function(){function e(){u()(this,e)}var t,n,i;return p()(e,null,[{key:"getDesign",value:(i=s()(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.hasOption()){e.next=6;break}return e.next=3,this.getDesignByLauncherOption(t);case 3:n=e.sent,e.next=9;break;case 6:return e.next=8,this.getUnicornDesign();case 8:n=e.sent;case 9:return e.abrupt("return",M.a.make(n));case 10:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"getUnicornDesign",value:(n=s()(a.a.mark(function e(){var t,n,i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t=Number(A.RequestUtil.get(A.RequestParamKey.TEMPLATE_IDX)))>0)){e.next=5;break}return e.abrupt("return",{idx:t,repositoryType:ve.a.UNICORN,resourceType:Gt.a.TEMPLATE,width:Number(A.RequestUtil.get(A.RequestParamKey.SHEET_W)),height:Number(A.RequestUtil.get(A.RequestParamKey.SHEET_H)),templateTypeId:A.RequestUtil.get(A.RequestParamKey.TEMPLATE_TYPE_ID)});case 5:if(n={blank:!0,idx:0,repositoryType:ve.a.UNICORN,resourceType:Gt.a.TEMPLATE,width:Number(A.RequestUtil.get(A.RequestParamKey.SHEET_W)),height:Number(A.RequestUtil.get(A.RequestParamKey.SHEET_H)),templateTypeId:A.RequestUtil.get(A.RequestParamKey.TEMPLATE_TYPE_ID)},Qn.a.isValidSize(n.width)||Qn.a.isValidSize(n.height)||A.StringUtil.isEmpty(n.templateTypeId)){e.next=11;break}return e.next=9,oi.a.getTemplateTypeFromRequestParam(Q.c.SHEET_SIZE);case 9:(i=e.sent)&&(n.width=i.width,n.height=i.height);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)})},{key:"getDesignByLauncherOption",value:(t=s()(a.a.mark(function e(t){var n,i,r,s,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("BIZHOWS-TEMPLATE"!==t.parameter.canvasOpenMode){e.next=19;break}if(!(t.unicornTemplateIdx>0)){e.next=5;break}return e.abrupt("return",{repositoryType:ve.a.UNICORN,idx:t.unicornTemplateIdx,resourceType:Gt.a.TEMPLATE});case 5:if(!((n=t.bizTemplate.designIdx||0)>0)){e.next=19;break}return e.prev=7,i=A.CRM.get(H.a.TEMPLATE_LINK_BIZHOWS).replace("${designIdx}",""+n),e.next=11,ft.UnicornApiRequest.get(i);case 11:if(!((r=e.sent).data.templateIdx>0)){e.next=14;break}return e.abrupt("return",{repositoryType:ve.a.UNICORN,idx:r.data.templateIdx,resourceType:Gt.a.TEMPLATE});case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(7);case 19:if(s=0,"UNICORN-DESIGN"!==t.parameter.canvasOpenMode){e.next=24;break}return e.next=23,Ss.getDesignIndexFromHistoryDesign(t.parameter.design.id,t.parameter.design.revision);case 23:s=e.sent;case 24:return o=s?{repositoryType:ve.a.UNICORN,idx:s}:{repositoryType:ve.a.BIZHOWS,code1:0,code2:0,code3:0,copyIdx:t.bizTemplate.commodityIndex,pkName:t.bizTemplate.type},e.abrupt("return",o);case 26:case"end":return e.stop()}},e,null,[[7,16]])})),function(e){return t.apply(this,arguments)})}]),e}(),Cs=function(e){function t(e){var n;return u()(this,t),(n=y()(this,L()(t).call(this,t.MOBILE_POPUP_ID))).closeAfterHandler=e,n.getContents().appendChild(n.makeElements()),n.getContents().appendChild(n.makeFooter()),Object(K.setToolsIcon)(n.getContents(),K.ToolsIcon.CLOSE,!0).addEventListener("click",function(){return n.close()}),n}return b()(t,e),p()(t,[{key:"open",value:function(e){return A.CooKey.WIFI_RECOMMEND_NOTICE===A.CookieUtil.getCookie(A.CooKey.WIFI_RECOMMEND_NOTICE)?this.close():(B()(L()(t.prototype),"open",this).call(this,e),this)}},{key:"makeElements",value:function(){var e=document.createElement("div");e.className=R.a.BODY;var t=document.createElement("div");t.className="mobile_popup_image",e.appendChild(t);var n=document.createElement("p");n.className="mobile_popup_title",n.innerText=A.CRM.get(H.a.TOOLS_POPUP_MOBILE_TITLE),e.appendChild(n);var i=document.createElement("p");return i.className="mobile_popup_contents",i.innerHTML=A.CRM.get(H.a.TOOLS_POPUP_MOBILE_CONTENTS),e.appendChild(i),e}},{key:"makeFooter",value:function(){var e=this,t=document.createElement("div");t.className=R.a.FOOTER,this.checkboxCookieCloseWrap=document.createElement("label"),this.checkboxCookieClose=document.createElement("input"),this.checkboxCookieClose.type="checkbox",this.checkboxCookieCloseWrap.appendChild(this.checkboxCookieClose),Object(K.setToolsIcon)(this.checkboxCookieCloseWrap,K.ToolsIcon.CHECK,!0);var n=document.createElement("span");n.innerText="하루 동안 보지 않기",this.checkboxCookieCloseWrap.appendChild(n),t.appendChild(this.checkboxCookieCloseWrap);var i=document.createElement("button");return i.innerText=A.CRM.get(H.a.TOOLS_POPUP_MOBILE_CONFIRM),i.addEventListener("click",function(){if(e.checkboxCookieClose.checked){var t=new Date;A.CookieUtil.setCookie(A.CooKey.WIFI_RECOMMEND_NOTICE,A.CooKey.WIFI_RECOMMEND_NOTICE,0,23-t.getHours(),60-t.getMinutes())}e.close()}),t.appendChild(i),t}},{key:"close",value:function(){var e=B()(L()(t.prototype),"close",this).call(this);return this.closeAfterHandler&&this.closeAfterHandler(),e}}]),t}(Ai);m()(Cs,"MOBILE_POPUP_ID","mobileInfoPopup");var Ps=function(){function e(){u()(this,e)}return p()(e,null,[{key:"showAutoSaveInfoPusher",value:function(t){if(t){e.showLoaderPusher("자동저장 안내","편집중인 디자인은 나의 디자인함에 자동으로 저장됩니다.")}}},{key:"showUpdateButtonInfoPusher",value:function(t){if(t){e.showLoaderPusher("수정 후 수정완료 버튼 클릭!","디자인 수정을 완료하였다면 반드시 수정완료 버튼을 클릭해주세요!")}}},{key:"showLoaderPusher",value:function(e,t){var n=document.createElement("span");Object(K.setToolsIcon)(n,K.ToolsIcon.INFO).classList.add("loader_popup_icon");var i=new ft.NotificationPusher({}),a={type:ft.PusherPopupType.CUSTOM,customTypeElement:n,title:e,content:t};i.pushNotification(a,5e3)}},{key:"showMobilePopupAndMessageBox",value:function(){var e=o.a.instance.renderer.messageBox;o.a.getEnv().browser.isMobile()?new Cs(function(){en.ready(),e.setActive(!0)}).open():e.setActive(!0)}},{key:"showPopupsAfterLoading",value:function(){A.ScheduledMaintenancePopup.isAlreadyOpened()?A.ScheduledMaintenancePopup.addAfterCloseHandler(function(){e.showMobilePopupAndMessageBox()}):new A.ScheduledMaintenancePopup("/resources/image/popup/scheduled_maintenance_popup.png","https://miricanvas.zendesk.com/hc/ko/articles/360039384711",function(){var e=new Date(2020,1,16,2);return new Date<e&&o.a.instance.user.isLogin()},function(){e.showMobilePopupAndMessageBox()}).open()}}]),e}(),Ds=function(e){function t(e,n){var i;return u()(this,t),(i=y()(this,L()(t).call(this,t.POPUP_ID))).temporaryDesignLoadHandler=e,i.tempSaveTime=n,i.getContents().appendChild(i.makeElements()),i.getContents().appendChild(i.makeFooter()),i}return b()(t,e),p()(t,[{key:"makeElements",value:function(){var e=document.createElement("div");e.className=R.a.BODY;var t=document.createElement("div");t.className="info_image",e.appendChild(t);var n=document.createElement("p");n.className="info_title",n.innerText="수정완료 후 임시저장된 디자인이 있습니다.",e.appendChild(n);var i=document.createElement("p");return i.className="info_contents",i.innerHTML="마지막 수정완료 디자인이 주문에 반영됩니다. </br>\n                              <span>상단바 > 파일 > 작업내역</span>에서 작업한 디자인을 다시 불러올 수 있습니다.",e.appendChild(i),e}},{key:"makeButton",value:function(e,t,n){var i=document.createElement("div");i.className="button",i.classList.add(e);var a=document.createElement("div");if(a.className="label",a.innerText=t,i.appendChild(a),n){var r=document.createElement("div");r.className="label_time",r.innerText=n,i.appendChild(r)}return i}},{key:"makeFooter",value:function(){var e=this,t=document.createElement("div");t.className=R.a.FOOTER;var n=this.makeButton("update_completed_design_load_button","수동 저장한 디자인 불러옴");n.addEventListener("click",function(t){t.stopPropagation(),t.preventDefault(),e.close()});var i=this.makeButton("temporary_design_load_button","임시저장 디자인 불러오기",this.tempSaveTime);return i.addEventListener("click",function(t){t.stopPropagation(),t.preventDefault(),e.close(),e.temporaryDesignLoadHandler()}),t.appendChild(n),t.appendChild(i),t}},{key:"isPreventBackgroundCloseEvent",value:function(){return!0}}]),t}(Ai);m()(Ds,"POPUP_ID","temporaryStorageInfoPopup");var As,Rs,Ms=function(e){function t(){var e,n;u()(this,t);for(var i=arguments.length,r=new Array(i),c=0;c<i;c++)r[c]=arguments[c];return n=y()(this,(e=L()(t)).call.apply(e,[this].concat(r))),m()(_()(n),"actionType",l.a.ONE_TIME),m()(_()(n),"doSaveQueue",!1),m()(_()(n),"renderAuto",!1),m()(_()(n),"changeDesign",function(){return!1}),m()(_()(n),"commitAction",function(){var e=s()(a.a.mark(function e(t,n,i){var r,l,c,u,d,p,h;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.launcherOption.hasOption()&&n.user.isLogin()){e.next=2;break}return e.abrupt("return");case 2:if("UNICORN-DESIGN"===n.launcherOption.parameter.canvasOpenMode){e.next=4;break}return e.abrupt("return");case 4:return r=n.launcherOption.parameter,l=r.design.id,e.next=8,fi.a.getHistoryLogList(l);case 8:if(c=e.sent,u=P.b.getDesignInfo().getLatestDesignHistoryIdx(),d="",(p=c.list.find(function(e){return e.designHistoryIdx===u}))&&(d=fi.a.formattedDateWithSecond(p.createdDate)),(h=c.list.find(function(e){return e.autoSaved}))&&(u=h.designHistoryIdx),h&&!(r.design.revision>=u)){e.next=17;break}return e.abrupt("return");case 17:new Ds(function(){var e=s()(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ss.getDesignIndexFromHistoryDesign(l,u);case 2:return t=e.sent,e.next=5,P.b.load(t);case 5:o.a.dispatch(new Ce.d);case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),d).open();case 20:case"end":return e.stop()}},e)}));return function(t,n,i){return e.apply(this,arguments)}}()),m()(_()(n),"rollbackAction",function(){}),m()(_()(n),"recycle",function(){}),n}return b()(t,e),t}(l.b),Ns=function(){function e(){u()(this,e)}return p()(e,null,[{key:"getLoader",value:function(e){switch(e.editorInitType){case"BLANK":return new xs(e);case"USER_DESIGN":return new Bs(e);case"DESIGN_PROJECT":return new Us(e);case"LAUNCHER_GET":return new Gs(e);case"LAUNCHER_POST":return new Hs(e)}}}]),e}(),xs=function(e){function t(e){return u()(this,t),y()(this,L()(t).call(this))}var n;return b()(t,e),p()(t,[{key:"load",value:(n=s()(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ft.UnicornApiRequest.get(t);case 2:return n=e.sent.data,e.abrupt("return",{editorConfig:n.editorConfig,unicornProfile:n.profile});case 4:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)})}]),t}(Ns),Bs=function(e){function t(e){var n;return u()(this,t),(n=y()(this,L()(t).call(this))).designKey=e.designKey,n}var n;return b()(t,e),p()(t,[{key:"load",value:(n=s()(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ft.UnicornApiRequest.get(t,{data:{designKey:this.designKey}});case 2:return n=e.sent.data,e.abrupt("return",{editorConfig:n.editorConfig,unicornProfile:n.profile,designData:{repositoryType:ve.a.UNICORN,idx:n.designIdx},designHistoryExtraData:n.designHistoryExtraData,designHistoryExtraDataLatest:n.designHistoryExtraDataLatest});case 4:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})}]),t}(Ns),Us=function(e){function t(e){var n;return u()(this,t),(n=y()(this,L()(t).call(this))).projectKey=e.projectKey,n}var n;return b()(t,e),p()(t,[{key:"load",value:(n=s()(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ft.UnicornApiRequest.get(t,{data:{projectKey:this.projectKey}});case 2:return n=e.sent.data,e.abrupt("return",{editorConfig:n.editorConfig,unicornProfile:n.profile,designProjectData:{idx:n.projectIdx}});case 4:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})}]),t}(Ns),Hs=function(e){function t(e){var n;return u()(this,t),(n=y()(this,L()(t).call(this))).launcherParameter=e.launcherParameter.launcherParam,n.authorization=e.launcherParameter.authorization,n.process=e.launcherParameter.process,n.processR=e.launcherParameter.processR,n}var n;return b()(t,e),p()(t,[{key:"load",value:(n=s()(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ft.UnicornApiRequest.post(t,{data:{launcherParameter:JSON.stringify(this.launcherParameter),authorization:this.authorization,process:this.process,r:this.processR}});case 2:return n=e.sent.data,e.abrupt("return",{editorConfig:n.editorConfig,unicornProfile:n.profile,launcherParameter:this.launcherParameter});case 4:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})}]),t}(Ns),Gs=function(e){function t(e){var n;return u()(this,t),(n=y()(this,L()(t).call(this))).process=e.process,n.processR=e.processR,n}var n;return b()(t,e),p()(t,[{key:"load",value:(n=s()(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ft.UnicornApiRequest.post(t,{data:{process:this.process,r:this.processR}});case 2:return n=e.sent.data,e.abrupt("return",{editorConfig:n.editorConfig,unicornProfile:n.profile,launcherParameter:n.launcherParameter});case 4:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})}]),t}(Ns);!function(e){function t(){return(t=s()(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("init new API",t),o.a.STOP_WATCH.start(),A.CRM.init([{key:"config.common",data:{type:"prod",debug:!1,serverPath:{basePath:"/",defaultHost:"https://www.miricanvas.com",editor:"/design",designPath:"/design/{idx}?repositoryType={repositoryType}",designPathUnicorn:"/design/{idx}",shareHost:"https://www.miricanvas.com",designApi:"https://www.bizhows.com/servlet/com.sure.smilecat.design.DesignApiServlet",designCategory:"https://www.miricanvas.com/api/design/category",designCategoryLink:"https://www.miricanvas.com/api/design/${designIdx}/category",designCopy:"https://www.miricanvas.com/api/design/${designIdx}/copy",designRepoHost:"https://www.miricanvas.com",loadPhotoHost:"https://www.miricanvas.com",svgHost:"https://www.miricanvas.com",svgToImage:"https://www.miricanvas.com/svgToImg",myCollectionFilterHost:"https://www.miricanvas.com",myCollectionInsert:"https://www.miricanvas.com/api/my-collection",myCollectionDelete:"https://www.miricanvas.com/api/my-collection/delete",myCollectionListByReferenceKeyList:"https://www.miricanvas.com/api/my-collection/list-by-reference-key-list",stickerThumbHost:"https://img1.smilecat.com/web1/__TBPE.STIKERS",stickerCategory:"https://www.bizhows.com/servlet/api/miridih/sticker/category",stickerList:"https://www.bizhows.com/servlet/api/miridih/sticker/list",stickerApi:"https://www.bizhows.com/servlet/api/miridih/sticker?id=${id}",stickerUploadApi:"https://www.miricanvas.com/sticker/upload",stickerUpdateApi:"http://intra.smilecat.com/servlet/api/miridih/sticker/update",stickerKeywordApi:"https://www.smilecat.com/servlet/api/smilecat/search/sticker/increase-word-weight?stickerId=${stickerId}&words=${words}",stickerKeywordUpdateApi:"http://intra.smilecat.com/servlet/api/miridih/sticker/keyword/update",stickerBackgroundInfoApi:"https://www.bizhows.com/servlet/api/miridih/sticker/background-info?stickerId=${stickerId}",stickerBackgroundInfoUpdateApi:"https://www.bizhows.com/servlet/api/miridih/sticker/background-info/update",stickerBackgroundInfoDeleteApi:"https://www.bizhows.com/servlet/api/miridih/sticker/background-info/delete",stickerCategoryPopupBizhows:"http://intra.smilecat.com/admin/cate/cm_cate_link_cfg.jsp?cmd=procSrchCmCate&ccl_src_grp=1020&cci_root_idx=170&ccl_src_idx=${tsIdx}&cci_top_idx=3010",stickerCategoryPopupSmilecat:"http://intra.smilecat.com/admin/cate/cm_cate_link_cfg.jsp?cmd=procSrchCmCate&ccl_src_grp=1020&cci_root_idx=170&ccl_src_idx=${tsIdx}&cci_top_idx=4010",externalStickerListApi:"https://www.smilecat.com/servlet/api/smilecat/sticker/external/download",externalStickerApi:"https://www.smilecat.com/servlet/api/smilecat/sticker/external",tbpeStickerInfo:"https://www.smilecat.com/tbpe30/sticker-info.jsp",templateDesignRepoHost:"https://www.miricanvas.com",templateStyleRepoHost:"https://www.miricanvas.com",userImageUploadApi:"https://www.miricanvas.com/api/my-collection/photo",imagePreviewApi:"https://www.miricanvas.com/file/thumbnails",commonFileDownloadApi:"https://www.miricanvas.com/file/${uuid}",downloadLog:"https://www.miricanvas.com/api/download/log",imageProcessApiBase:"https://www.miricanvas.com/imp",designPreFlightApi:"https://api.miricanvas.com/api/v1/imp/preflight",designIMPRequestApi:"https://api.miricanvas.com/api/v1/imp/process",designStatusApi:"https://api.miricanvas.com/api/v1/imp/status/${requestIdx}",categoryApi:"https://www.miricanvas.com/api/category",categoryEditApi:"https://www.miricanvas.com/api/category/edit",noticePath:"https://www.miricanvas.com/notice",userConfigApi:"https://www.miricanvas.com/api/user-editor-config",designCheckEditable:"/api/design/check-editable/{designIdx}",designCheckUpdatable:"/api/design/check-updatable/{designIdx}/{historyIdx}",notificationHost:"https://www.miricanvas.com",account:{checkIdentity:"https://www.miricanvas.com/accounts/me",signOut:"https://www.miricanvas.com/accounts/enduser/logout",changeInfo:"https://www.miricanvas.com/accounts/enduser/update",checkPassword:"https://www.miricanvas.com/accounts/password/check",makePassword:"https://www.miricanvas.com/accounts/miricanvas",checkEmailExistence:"https://www.miricanvas.com/accounts/email/${userMail}/",setAutoLogin:"https://www.miricanvas.com/auth/auto",authMiricanvas:"/auth/miricanvas",authWithMrsOh:"https://www.miricanvas.com/auth/mrsoh",thirdParty:{signInAsGoogle:"https://www.miricanvas.com/auth/google/auth-url",signInAsBizhows:"https://www.miricanvas.com/auth/bizhows/auth-url",signInAsNaver:"https://www.miricanvas.com/auth/naver/auth-url",signInAsKakao:"https://www.miricanvas.com/auth/kakao/auth-url",signInAsFacebook:"https://www.miricanvas.com/auth/facebook/auth-url"},adminTemplateDesigner:"https://www.miricanvas.com/api/admin/user/templateDesigner",bizhowsAdminUser:"https://www.miricanvas.com/api/bizhows/admin/user"},templateLink:{bizhows:"https://www.miricanvas.com/api/template/biz-template/${designIdx}"},pixabay:{api:{endpoint:"https://www.miricanvas.com/pixabay-resources"},downloadStatusAll:"https://www.miricanvas.com/pixabay-resources/download-status-all",downloadStatus:"https://www.miricanvas.com/pixabay-resources/${key}/download-status",image:"https://www.miricanvas.com/pixabay-resources/image",imageInfo:"https://www.miricanvas.com/pixabay-resources/${id}/info"},myspace:{pagePath:"/myspace",list:"https://www.miricanvas.com/api/myspace",delete:"https://www.miricanvas.com/api/myspace/delete",copy:"https://www.miricanvas.com/api/myspace/copy",link:"https://www.miricanvas.com/api/myspace/link",deleteLink:"https://www.miricanvas.com/api/myspace/delete-link",deletePermanently:"https://www.miricanvas.com/api/myspace/delete-permanently",restore:"https://www.miricanvas.com/api/myspace/restore",category:"https://www.miricanvas.com/api/myspace/category",updateTitle:"https://www.miricanvas.com/api/myspace/update-title",userInfo:"https://www.miricanvas.com/myspace#/user-info"},userResource:{userResources:"https://www.miricanvas.com/user-resources",newFolder:"https://www.miricanvas.com/user-resources/folder",folders:"https://www.miricanvas.com/user-resources/folders",photoInFolder:"https://www.miricanvas.com/user-resources/${folderIdx}/photos",movePhotoToFolder:"https://www.miricanvas.com/user-resources/photo/folder",foldersPhotos:"https://www.miricanvas.com/user-resources/folders-photos",updateStatusFoldersPhotos:"https://www.miricanvas.com/user-resources/folders-photos/status",updateStatusFoldersPhotosAll:"https://www.miricanvas.com/user-resources/folders-photos/status/all",changeFolderName:"https://www.miricanvas.com/user-resources/folder/name",reserveFileKey:"https://www.miricanvas.com/user-resources/key",uploadWithKey:"https://www.miricanvas.com/user-resources/${type}",removeWithKey:"https://www.miricanvas.com/user-resources/${key}",checkMyCapacity:"https://www.miricanvas.com/user-resources/capacity",fileInfo:"https://www.miricanvas.com/user-resources/${key}",userResourcesV0:"https://www.miricanvas.com/api/v0/files",reserveFileKeyV0:"https://www.miricanvas.com/api/v0/files/key",uploadWithKeyV0:"https://www.miricanvas.com/api/v0/files/${type}",removeWithKeyV0:"https://www.miricanvas.com/api/v0/files/${key}",checkMyCapacityV0:"https://www.miricanvas.com/api/v0/files/capacity",fileInfoV0:"https://www.miricanvas.com/api/v0/files/${type}/${key}",copy:"https://www.miricanvas.com/user-resources/copy"},file:{info:"https://www.miricanvas.com/file/${key}/info"},share:{inActiveShareDesignUrl:"https://www.miricanvas.com/api/share/design-url/inactive",inActiveShareDesign:"https://www.miricanvas.com/api/share/design/inactive"},newShare:{getPublicVisibility:"https://www.miricanvas.com/api/design/share/public/${designIdx}",setPublicShare:"https://www.miricanvas.com/api/design/share/public",getSharedUserList:"https://www.miricanvas.com/api/design/share/private/${designIdx}",inviteList:"https://www.miricanvas.com/api/design/share/private/${designIdx}",updateList:"https://www.miricanvas.com/api/design/share/private/${designIdx}",removeList:"https://www.miricanvas.com/api/design/share/private/${designIdx}",copyDesign:"https://www.miricanvas.com/api/design/share/${designIdx}/copy"},typeFilter:{mockList:"https://www.miricanvas.com/api/template/design",imageList:"https://www.bizhows.com/servlet/api/miridih/sticker/list-by-idxes",bizTemplateList:"https://www.bizhows.com/servlet/com.sure.smilecat.design.DesignApiServlet",templateList:"https://www.miricanvas.com/api/template/favorite-list",designList:"https://www.miricanvas.com/api/design/favorite-list",skinList:"https://www.bizhows.com/servlet/api/miridih/skin/ratio-item/list-by-idxes",photoList:"https://www.miricanvas.com/file/thumbnails"},smilecat:{instance:"https://www.smilecat.com/tbpe30/commodity_instance.jsp?comm_idx=${commodityIdx}",skin:"https://img1.smilecat.com/web1/__ADMIN.SKIN/${skinId}/${ratioId}/thumb400.png",skinList:"https://www.smilecat.com/tbpe30/list/skins2.jsp?ratio_id=${ratioId}",templateMeta:"https://www.smilecat.com/tbpe30/template_meta.jsp?name=${designName}",themeMeta:"https://www.smilecat.com/tbpe30/theme_meta.jsp?name=${designName}",layout:"https://www.smilecat.com/tbpe30/template_layout.jsp?id=${layoutId}",layoutList:"https://www.smilecat.com/tbpe30/layout_list.jsp?ratio_id=${ratioId}&layout_type=${layoutType}",layoutThumb:"https://img1.smilecat.com/web1/__ADMIN.LAYOUT/${layoutId}/thumb200.png"},bizhows:{instance:"https://www.bizhows.com/tbpe30/commodity_instance.jsp?comm_idx=${commodityIdx}",skin:"https://img1.bizhows.com/bhfile01/__ADMIN.SKIN/${skinId}/${ratioId}/thumb400.png",skinList:"https://www.bizhows.com/tbpe30/list/skins2.jsp?ratio_id=${ratioId}",templateMeta:"https://www.bizhows.com/tbpe30/template_meta.jsp?name=${designName}",themeMeta:"https://www.bizhows.com/tbpe30/theme_meta.jsp?name=${designName}",layout:"https://www.bizhows.com/tbpe30/template_layout.jsp?id=${layoutId}",layoutList:"https://www.bizhows.com/tbpe30/layout_list.jsp?ratio_id=${ratioId}&layout_type=${layoutType}",layoutThumb:"https://img1.bizhows.com/bhfile01/__ADMIN.LAYOUT/${layoutId}/thumb400.png",insertTemplateLink:"https://www.bizhows.com/servlet/api/miridih/miricanvas/template/link",deleteTemplateLink:"https://www.bizhows.com/servlet/api/miridih/miricanvas/template/link/delete",linkedDesignList:"https://www.bizhows.com/servlet/api/miridih/miricanvas/template/link/design?miricanvasTemplateIdx=${templateIdx}",designDetailPage:"https://www.bizhows.com/mall/design/design_detail.jsp?site_map_idx=${siteMapIdx}&design_idx=${designIdx}"},template:{list:"https://www.miricanvas.com/api/template",listAllType:"https://www.miricanvas.com/api/template/all-type",create:"https://www.miricanvas.com/api/template",findOne:"https://www.miricanvas.com/api/template/${idx}",update:"https://www.miricanvas.com/api/template/${idx}/update",delete:"https://www.miricanvas.com/api/template/${idx}/delete",unlinkTemplate:"https://www.miricanvas.com/api/template/${idx}/unlink-template",blacklist:"https://www.miricanvas.com/api/template/blacklist",type:"https://www.miricanvas.com/api/template/type",size:"https://www.miricanvas.com/api/template/size"},templateProject:{create:"https://www.miricanvas.com/api/template/project",findOne:"https://www.miricanvas.com/api/template/project/${idx}",update:"https://www.miricanvas.com/api/template/project/${idx}/update",delete:"https://www.miricanvas.com/api/template/project/${idx}/delete",list:"https://www.miricanvas.com/api/template/project",createTemplatePage:"https://www.miricanvas.com/api/template/project/${idx}/page",templatePageList:"https://www.miricanvas.com/api/template/project/${idx}/page",createTemplate:"https://www.miricanvas.com/api/template/project/${idx}/template",templateList:"https://www.miricanvas.com/api/template/project/${idx}/template"},templatePage:{update:"https://www.miricanvas.com/api/template/page/${idx}/update",delete:"https://www.miricanvas.com/api/template/page/${idx}/delete",deleteMulti:"https://www.miricanvas.com/api/template/page",recovery:"https://www.miricanvas.com/api/template/page/recovery",history:"https://www.miricanvas.com/api/template/page/${idx}/history",findOne:"https://www.miricanvas.com/api/template/page/${idx}"},helpCenter:{miridiCustomerService:"http://help.miricanvas.com",bizhowsCustomerService:"http://www.bizhows.com/cms/%EA%B3%A0%EA%B0%9D%EC%84%BC%ED%84%B0/",copyrightInfo:"https://www.miricanvas.com/s/41",print:"https://www.miricanvas.com/s/42",faq:"https://www.miricanvas.com/s/44"},hqImage:{process:"/api/v1/hq-image",process2:"/api/v0/printing-image",progress:"/api/v0/printing-image/progress"},designHistory:{log:"/api/design/history/{designIdx}",copyRevision:"/api/design/{designIdx}/revision/{revisionIdx}/copy",overwriteRevision:"/api/design/{designIdx}/revision/{revisionIdx}/overwrite"},designEditLog:{editLog:"/api/design/edit-log/{designIdx}"},editorResourcePath:{disabledOriginItem:"https://www.miricanvas.com/resources/image/common/disabled_resource.png",notFoundOriginItem:"https://www.miricanvas.com/resources/image/common/not_found_resource.png",disabledOriginItemBackground:"https://www.miricanvas.com/resources/image/common/disabled_resource_background.png",disabledUserImage:"https://www.miricanvas.com/resources/image/common/disabled_user_resource.png",fetchError:"https://www.miricanvas.com/resources/image/common/warning.png"},printout:{metaList:"/api/printout/meta/list",saveMeta:"/api/printout/meta/save"},designProject:{create:"https://www.miricanvas.com/api/project",list:"https://www.miricanvas.com/api/project",findOne:"https://www.miricanvas.com/api/project/${designProjectIdx}",update:"https://www.miricanvas.com/api/project/${designProjectIdx}",createDesign:"https://www.miricanvas.com/api/project/${designProjectIdx}/design",findDesign:"https://www.miricanvas.com/api/project/${designProjectIdx}/design/${designIdx}",addDesign:"https://www.miricanvas.com/api/project/${designProjectIdx}/design/${designIdx}",deleteDesign:"https://www.miricanvas.com/api/project/${designProjectIdx}/design/${designIdx}",copyDesign:"https://www.miricanvas.com/api/project/${designProjectIdx}/design/${designIdx}/copy"},myCollection:{deleteByPk:"https://www.miricanvas.com/api/my-collection",sizeByResourceType:"https://www.miricanvas.com/api/my-collection/size-by-resource-type"},design:{category:"https://www.miricanvas.com/api/design/category"}},test:{version:1,url:"",pAtH:"",array:[],memo:""}}},{key:"header",data:{content:{undo:"실행 취소",redo:"재실행",actionList:"실행목록",itemList:"아이템 순서",settings:"설정",messageBox:"우편함",help:"도움말",save:"저장하기",share:"공유하기",presentation:"슬라이드 쇼",download:"다운로드",cart:"장바구니 가기",workComplete:"작업완료",designHistory:"작업내역",revertDesign:"이 작업으로 덮어쓰기",copyThisDesign:"이 작업으로 사본 만들기",editSize:"편집 사이즈 설정",designGuide:"편집영역만 보기",photoGuide:"사진중복 안내 보기",themeSet:"에디터 테마",adminMode:"관리자 모드",devMode:"개발 모드",debugMode:"디버그용",snapMode:"스냅 'ㅡ'",saveRequest:"저장 중...",saveRequire:"변경사항 있음",saveFailed:"저장 실패",saveComplete:"저장완료",saveTempComplete:"임시저장완료",designSettings:"파일",makeNewDesign:"새 문서 만들기",loadDesign:"열기...",copyDesign:"복사본 만들기",newProject:"새 프로젝트 만들기",mySpace:"마이 스페이스",copyDesignNameSuffix:" - 복사본",loadDesignShortcut:"Ctrl + O",saveDesignShortcut:"Ctrl + S",newDesignShortcut:"Ctrl + N",resizeSheet:"크기조정",guideLine:"가이드선",editorSetting:"에디터 환경",setting:"설정",pageMaskGuide:"페이지 마스크",saveMyLibrary:"저장",saveCart:"장바구니 추가",doneUpdate:"수정 완료"},user:{alert:"알림",collection:"보관함",mySpace:"마이 스페이스",editProfile:"나의 정보",signIn:"로그인",signOut:"로그아웃",ltHour:"한시간이내",ltDay:"시간 전",ltMonth:"일 전",ltYear:"개월 전",gtYear:"년 전",message:{title:"메시지함",exp:" 님이 ${data}을 공유하였습니다.",item:"아이템",collection:"보관함",design:"디자인",unknown:"무엇인가"}},tooltip:{undo:{shortcut:"Ctrl + Z"},redo:{shortcut:"Ctrl + Shift + Z"},lock:{title:"잠금"},unlock:{title:"잠금해제"},delete:{title:"삭제하기"},projectName:{title:"디자인 이름 변경하기"},userAccount:{title:"나의 계정"},editProfile:{title:"프로필 수정하기"},present:{title:"슬라이드 쇼"},present_setting:{title:"준비중입니다."},present_exit:{title:"슬라이드 쇼 종료"}},guideline:{show:"가이드선 보기",lock:"가이드선 잠금"}}},{key:"tools",data:{common:{content:{opacity:"투명도",multiColor:"색상",flip:"반전",lock:"잠금",unlock:"잠금",group:"그룹",ungroup:"그룹",flipH:"좌우 반전",flipV:"상하 반전",hyperlink:"링크",hyperlinkDesc:"하이퍼링크 연결",hyperlinkAccept:"적용",hyperlinkPlaceholder:"유니콘ㅇㅇ;",align:"정렬",alignLeft:"왼쪽 맞춤",alignCenter:"가운데 맞춤",alignRight:"오른쪽 맞춤",alignTop:"위쪽 맞춤",alignMiddle:"중간 맞춤",alignBottom:"아래쪽 맞춤",distributeVertical:"세로 간격 맞춤",distributeHorizon:"가로 간격 맞춤",order:"순서",saveStyle:"효과 저장하기",saveMockUp:"조합요소 등록하기",saveDefaultText:"기본 텍스트로 등록하기",cut:"잘라내기",copy:"복사하기",paste:"붙여넣기",delete:"삭제하기",selectNone:"아이템을 선택하고<br/>세부 설정을 할 수 있습니다.",selectLock:"잠금 해제 후<br>세부 설정을 할 수 있습니다.",selectMulti:"${length}개 아이템을 선택했습니다.<br/>세부 효과는 1개씩 적용가능합니다."},tooltip:{progress:{inProgress:"다운로드 준비중",cancel:"다운로드 취소"},bitmap:{search:"비트맵 ID 검색 : #biz_181108_st_yjs_0<br>디자이너 ID 검색 : @yjson"},hyperlink:{shortcut:"Ctrl + K"},lock:{title:"잠금",shortcut:"Ctrl + L"},unlock:{title:"잠금해제",shortcut:"Ctrl + L"},group:{title:"그룹",shortcut:"Ctrl + G"},ungroup:{title:"그룹해제",shortcut:"Ctrl + Shift + G"},cut:{shortcut:"Ctrl + X"},clone:{title:"복제하기",shortcut:"Ctrl + D"},paste:{shortcut:"Ctrl + V"},delete:{title:"삭제하기",shortcut:"Delete"},align:{left:"왼쪽 정렬",center:"가운데 정렬",right:"오른쪽 정렬",dhc:"가로간격 맞춤",top:"상단 정렬",middle:"중간 정렬",bottom:"하단 정렬",dvc:"세로간격 맞춤",first:{title:"맨 앞으로",shortcut:"Ctrl + Shift + ]"},forward:{title:"앞으로",shortcut:"Ctrl + ]"},backward:{title:"뒤로",shortcut:"Ctrl + ["},last:{title:"맨 뒤로",shortcut:"Ctrl + Shift + ["},flipH:"좌우 반전",flipV:"상하 반전"}}},toolboxHeader:{tooltip:{fixRight:{title:"우측에 고정하기"},unfixRight:{title:"우측고정 해제하기"},close:{title:"닫기"}}},multiSelect:{row:{color:"색상",colors:"색상"}},text:{headerTitle:"텍스트",row:{fontDefault:"글자 조정",outline:"외곽선",curve:"곡선",shadow:"그림자",gradient:"그라데이션",textPreset:"텍스트 프리셋",fontColor:"글자색",bgColor:"배경색"},content:{fontSize:"글자 크기",letterSpacing:"자간",lineHeight:"행간",fontStretch:"장평",curve:"곡선",outlineColor:"색상",outlineSize:"두께",shadowColor:"색상",shadowDistance:"거리",shadowAlpha:"투명도",shadowAngle:"방향",shadowSize:"크기",shadowSpread:"흐림",gradientType:"타입",gradientAngle:"방향",gradientColor:"색상",preset:"프리셋",suffixSolidLine:"테두리",suffixBitmapMask:"모양틀",suffixStickerFrame:"디자인액자",suffixGradient:"그라데이션",noneSelect:"선택안함",userStyle:"사용자 스타일"},tooltip:{fontFamily:{title:"글꼴",recommendListTitle:"사용중인 폰트"},fontSize:{title:"글자 크기",subtitle1:"크게",shortcut1:"Ctrl + Shift + .",subtitle2:"작게",shortcut2:"Ctrl + Shift + ,"},fontColor:{title:"글자 색상"},fontBoxColor:{title:"글상자 색상"},alignLeft:{title:"왼쪽 정렬"},alignCenter:{title:"가운데 정렬"},alignRight:{title:"오른쪽 정렬"},alignTop:{title:"상단 정렬"},alignMiddle:{title:"중앙 정렬"},alignBottom:{title:"하단 정렬"},bold:{title:"굵게",shortcut:"Ctrl + B"},italic:{title:"기울임",shortcut:"Ctrl + I"},underline:{title:"밑줄",shortcut:"Ctrl + U"},stroke:{title:"취소선",shortcut:"Alt + Shift + S"},uppercase:{title:"대문자 변환",shortcut:"Ctrl + Shift + K"},listBullet:{title:"단추형 목록",shortcut:"Ctrl + Shift + 7"},listNumber:{title:"번호형 목록",shortcut:"Ctrl + Shift + 8"},curve:{cwtitle:"바깥쪽 쓰기",ccwtitle:"안쪽 쓰기"}}},image:{headerTitleImage:"이미지",headerTitleBitmap:"비트맵",headerTitlePhotoBackground:"사진 배경",row:{filter:"필터 효과",filterAccordion:"필터",directAdjustment:"직접 조정",solidLine:"사진 테두리",bitmapMask:"모양 오리기",stickerFrame:"디자인 액자",gradient:"그라데이션 마스크"},content:{crop:"이미지 자르기",toBackground:"배경으로 사용",backgroundColor:"색상",solidLineColor:"색상",solidLineThickness:"두께",solidLineAlpha:"투명도",gradationDirection:"방향",gradationT:"상 -> 하",gradationB:"하 -> 상",gradationL:"좌 -> 우",gradationR:"우 -> 좌",gradationDepth:"범위",intensity:"강도",brightness:"밝기",lightness:"명도",contrast:"대비",saturation:"채도",colorTone:"컬러톤",tint:"* 색상 (관리자용)",temperature:"온도",blur:"흐리기",vignette:"비네트",presetNormal:"NORMAL",presetCali:"CALI"},tooltip:{reset:"속성 초기화",toSkin:"배경으로 만들기",crop:{title:"자르기",shortcut:"더블클릭"},bgCrop:{title:"사진 위치조정",shortcut:"더블클릭"},export:"사진 빼내기"},preset:{default:"없음"}},background:{row:{solidColor:"색상"}},grid:{headerTitle:"표",tab:{cell:"셀 설정",text:"글자 설정",image:"이미지 설정"},row:{cellBackground:"셀 배경",cellBackgroundColor:"색상",cellBackgroundAlpha:"투명도",cellBorder:"셀 테두리",cellBorderColor:"색상",cellBorderAlpha:"투명도",cellBorderThickness:"두께"},tooltip:{addRowTop:{title:"위쪽 행 추가"},addRowBottom:{title:"아래쪽 행 추가"},removeRow:{title:"행 삭제하기"},addColumnLeft:{title:"왼쪽 열 추가"},addColumnRight:{title:"오른쪽 열 추가"},removeColumn:{title:"열 삭제하기"},cellConcat:{title:"셀 합치기"},cellSplit:{title:"셀 나누기"},cellDistributeVertical:{title:"행 간격 맞추기"},cellDistributeHorizon:{title:"열 간격 맞추기"},noneBorders:{title:"테두리 모두 지우기"},allBorders:{title:"모든 테두리 적용"},outerBorders:{title:"바깥쪽 테두리 적용"},innerBorder:{title:"안쪽 테두리 적용"},downDiagonalBorders:{title:"하향 대각선 테두리 적용"},upDiagonalBorder:{title:"상향 대각선 테두리 적용"},topBorder:{title:"위쪽 테두리 적용"},bottomBorder:{title:"아래쪽 테두리 적용"},leftBorder:{title:"왼쪽 테두리 적용"},rightBorder:{title:"오른쪽 테두리 적용"},innerHorBorders:{title:"안쪽 가로 테두리 적용"},innerVerBorders:{title:"안쪽 세로 테두리 적용"}}},svg:{headerTitle:{svg:"SVG",graphic:"그래픽",line:"선",figure:"도형",illust:"일러스트",background_pattern:"패턴 배경",background_image:"사진형 배경"},color:"색상",patternSize:"패턴 크기",row:{svg:"그래픽 기본 설정",layer:"그래픽 구성요소"},content:{toImageframe:"이미지 프레임으로 변경",registUserSvg:"선, 도형, 일러스트, 패턴배경 요소로 등록하기",registUserImageframe:"이미지 프레임 요소로 등록하기"},toolbox:{infoTab:"등록 정보",settingTab:"요소 설정",saveConfirmMsg1:"주의)<br>이 그래픽을 사용한 모든 디자인에 적용됩니다.<br>설정을 저장하시겠습니까?",saveConfirmMsg2:"해당 요소를 사용한 템플릿이 있을 경우 정상적으로 나오지 않습니다.<br>계속 진행하시겠습니까?"}},pageListNavigator:{listTitle:"페이지 리스트",tooltip:{moveScreenHandle:{title:"화면이동 핸들",shortcut:"Ctrl + Space + 드래그"},fullScreenMode:{title:"전체화면모드",shortcut:"Ctrl + F5"},reduceScreen:{title:"화면 축소",shortcut:"Ctrl + Alt + -"},screenRatio:{title:"화면 비율",shortcut:"Fit : Ctrl + Alt + ["},expandScreen:{title:"화면 확대",shortcut:"Ctrl + Alt + +"},showPageList:{title:"페이지 리스트 보기"},removePage:{title:"페이지 삭제하기"},addClonePage:{title:"페이지 추가/복제",subtitle1:"빈 페이지",shortcut1:"Ctrl + M",subtitle2:"페이지 복제",shortcut2:"Ctrl + D"},previousPage:{title:"이전 페이지",shortcut:"Page Up"},nextPage:{title:"다음 페이지",shortcut:"Page Down"}}},pageZoomNavigator:{popup:{screenFit:"화면 맞춤",screenFull:"화면 채우기"}},imageframe:{headerTitle:"프레임",content:{toSvg:"그래픽으로 변경",clearFrame:"이미지 비우기"},color:"색상",frameColor:"색상(프레임 영역 선택)",tooltip:{reset:"속성 초기화",crop:{title:"사진 위치조정",shortcut:"더블클릭"},export:"사진 빼내기",delete:"사진 삭제"}},lib:{template:{title:"템플릿",manager:{type:"타입",active:"활성",templateId:"템플릿 ID",templateTitle:"템플릿 이름",designerId:"디자이너 ID",autoKeyword:"자동 키워드",manualKeyword:"수동 키워드",copyToUnicornTemplate:"유니콘 템플릿으로 복제하기",keyword:"키워드",memo:"메모",unlink:"해제",link:"적용",saveInfo:"정보 저장",saveDesign:"디자인 적용",copyTemplate:"템플릿 복제",deleteTemplate:"삭제"}},bizTemplate:{title:"비즈템플릿",btnNotice:"템플릿 안내"},design:{title:"나의 템플릿",emptyListMsg:"앗, 아직 내 디자인이 없어요...",emptyListMsg2:"템플릿을 활용하여<br>나만의 디자인을 만들어보세요.",btnMoveTemplate:"템플릿으로 이동하기",folder:{emptyListMsg:"앗, 내 폴더가 없어요...",emptyListMsg2:"폴더 생성 및 관리는 <br>마이스페이스에서 이용할 수 있어요."},folderDesign:{emptyListMsg:"앗, 폴더가 비어있어요...",emptyListMsg2:"내 디자인 분류 및 관리는<br>마이스페이스에서 이용할 수 있어요."},biz:{emptyListMsg:"앗, 저장한 디자인이 없어요...",emptyListMsg2:"<a>비즈하우스</a>에서<br/>미리캔버스로 편집한 디자인은<br/>여기에서 볼 수 있어요!"}},item:{title:"요소",templateTitle:"템플릿",designTitle:"나의 템플릿",bitmapTitle:"비트맵",imageTitle:"사진",lineTitle:"선",figureTitle:"도형",illustTitle:"일러스트",frameTitle:"프레임",textTitle:"텍스트",pixabay:"Pixabay",grid:"표"},mockup:{title:"조합"},svg:{title:"그래픽"},image:{title:"이미지"},grid:{title:"표"},all:{title:"전체"},text:{title:"텍스트",btnAdd:"텍스트추가",defaultTextTitle:"기본 텍스트"},simpleText:{title:"심플"},styleText:{title:"스타일"},specialText:{title:"스페셜"},upload:{title:"내 이미지",emptyListMsg:"업로드한 이미지가 없어요.",emptyListMsg2:"사진 추가하기 버튼을 클릭하여<br>사진, SVG 파일을 올려보세요!"},uploadGuide:{title:"이미지 업로드",uploadGuideMsg1:"여러개의 이미지를 업로드 할 수 있습니다.",uploadGuideMsg2:"JPG, PNG, SVG"},favorites:{title:"찜하기",emptyListMsg:"아직 찜한 디자인이 없어요.",emptyListMsg2:"마음에 드는 템플릿이나<br>디자인 요소를 담아주세요."},background:{title:"배경",patternTitle:"패턴",imageTitle:"사진"},layout:{title:"레이아웃"},collection:{title:"보관함"},adminTool:{title:"관리자툴"},devTool:{title:"DevTools",toggleBtn:{finalConfirm:"최종확인 활성화"}},imageDownload:{title:"이미지 다운로드"},imageSearch:{title:"이미지 검색"},loginBtn:"로그인 하기",loginNotiMsg:{default:"로그인 후 이용 가능해요.",uploadLib:"이미지 업로드, 스크린샷 복사/붙여넣기는\n로그인 후 이용 가능합니다."},keywordPlaceholder:"검색어를 입력하세요.",designSearchPlaceholder:"내 디자인 문서 찾기",listEmptyMessage:"검색 결과가 없어요...",listEmptyMessage2:"다른 검색어를 입력해주세요.",tooltip:{deleteKeyword:{title:"키워드 삭제"},rollbackSelection:{title:"선택 초기화"},useDesign:{title:"디자인 사용하기"},useMockUp:{title:"목업 사용하기"},useGraphic:{title:"그래픽 사용하기"},useImage:{title:"이미지 사용하기"},useText:{title:"글자 사용하기"},useBackground:{title:"배경 사용하기"},share:{title:"공유하기"},bookmark:{title:"찜하기"},previousPage:{title:"이전 페이지"},nextPage:{title:"다음 페이지"},selectColor:{title:"다른색 선택하기"},sharingFolder:{title:"공유중인 폴더입니다."},createFolder:{title:"새 폴더 추가"},changeName:{title:"이름 변경"},removeFolder:{title:"폴더 삭제"},use:{title:"사용하기"},remove:{title:"삭제하기"},isUsableAfterLogin:{title:"로그인 후 사용가능합니다."},managePalette:{title:"팔레트 관리"},edit:{title:"수정하기"},delete:{title:"삭제하기"},addColor:{title:"색상 추가"},sameColor:{title:"동일 색상"}}},templateProject:{arrangeType:{overWidth:"가로가 더 긴 타입",overHeight:"세로가 더 긴 타입",fillDesc:"원본 디자인의 ${direction}가 잘립니다.",fitDesc:"원본 디자인보다 ${direction} 배경 공간이 생깁니다."}},preview:{saveConfirmTitle:"보관함 담기",saveConfirmText1:"님의 보관함을 저장하시겠습니까?",saveConfirmText2:"나의 보관함에서 이 디자인들을 사용할 수 있습니다",saveConfirmAccept:"확인",saveConfirmCancel:"취소"},popup:{login:{description:"<span>${platform}</span>(으)로 가입하셨네요! 해당 소셜 계정으로 로그인해보세요."},logout:{title:"로그인이 해제되었어요",btnLogin:"다시 로그인",default:{contents:"작업을 계속 하시려면 다시 로그인해주세요."},timeout:{contents:"안전한 보안을 위하여 30분간 사용내역이 없을 경우<br>로그아웃 돼요. 작업을 계속 하시려면 다시 로그인해주세요.",tip:"TIP. '로그인 상태 유지하기'를 체크하고 로그인하면<br>시간이 지나도 로그아웃되지 않아요!"}},browser:{title:"다른 브라우저를 사용해보세요.",contents:"아쉽지만 현재 미리캔버스는 아래의 브라우저만 지원하고 있습니다.<br/>계속해서 이용하시려면 아래의 브라우저 중 원하는 브라우저를 설치후, 이용해주시길 바랍니다.<br/>아래의 아이콘을 클릭하면 해당 브라우저의 설치 화면으로 이동합니다.",chrome:"Chrome",firefox:"Firefox",safari:"Safari<br/><span>(macOS에서만)</span>",edge:"Edge<br/><span>(Windows에서만)</span>",descLink:"더 자세히 알아보려면 여기를 클릭하세요."},profile:{title:"나의 정보",name:"이름",saveProfile:"프로필 변경",password:"현재 비밀번호",newPassword:"새 비밀번호",newPasswordConfirm:"새 비밀번호 확인",savePassword:"비밀번호 변경",noticeEmail:"이메일 알림",noticeEmailBtn:"미리캔버스의 이메일 알림 받기",makePassword:"비밀번호",makePasswordConfirm:"비밀번호 확인",registerPassword:"비밀번호 등록"},saveBtnLabel:"저장하기",updateBtnLabel:"수정하기",privateResourceType:"미노출",confirmBtn:"확인",deleteBtn:"삭제",updateConfirmMsg:"${name} 에 덮어씌우시겠습니까?",createConfirmMsg:"${name} (으)로 저장하시겠습니까?",deleteConfirmMsg:"${name} (을)를 삭제하시겠습니까?",defaultTextSave:{title:"새 기본 텍스트 ",confirm:{title:"등록하기",subTitle:"선택한 텍스트 요소를 기본 텍스트로 등록하시겠습니까?"}},templateDesignSave:{titleLabel:"아이템 조합",defaultTitlePrefix:"나의 목업 ",selectItemNewLabel:"새로운 조합 만들기",selectItemNewTitle:"새 조합",createFailMsg:"아이템 조합 저장중에 오류가 발생하였습니다.",saveSuccessMsg:"조합요소 등록이 완료되었습니다.",saveDefaultTextSuccessMsg:"기본 텍스트 등록이 완료되었습니다.",updateSuccessMsg:"아이템 조합이 수정되었습니다.",updateFailMsg:"아이템 조합 수정중에 오류가 발생하였습니다.",loadFailMsg:"아이템 조합을 불러오는 중에 오류가 발생하였습니다.",deleteSuccessMsg:"아이템 조합이 삭제되었습니다.",deleteFailMsg:"아이템 조합 삭제중에 오류가 발생하였습니다..",InvalidResourceMsg:"미등록 또는 비활성 상태의 요소가 포함되어 있습니다."},designSave:{titleLabel:"디자인 저장",defaultTitlePrefix:"나의 디자인 ",saveTypeUpdateLabel:"디자인 수정",saveTypeCreateLabel:"새 디자인 저장",createFailMsg:"디자인 저장중에 오류가 발생하였습니다.",updateSuccessMsg:"디자인이 수정되었습니다.",updateFailMsg:"디자인 수정중에 오류가 발생하였습니다.",loadFailMsg:"디자인을 불러오는 중에 오류가 발생하였습니다.",deleteSuccessMsg:"디자인이 삭제되었습니다.",deleteFailMsg:"디자인 삭제중에 오류가 발생하였습니다.."},designLoad:{titleLabel:"디자인 적용 방법을 선택해주세요.",initBtn:"선택한 디자인으로 새로 만들기",overrideBtn:"선택한 디자인으로 덮어쓰기",addBtn:"현재 페이지 뒤에 추가하기",maintainSize:"현재 페이지와 동일한 비율로 추가",loadingMsg:"디자인을 불러오고 있습니다.<br/>잠시만 기다려주세요.",loadingCancel:"적용 취소",title:"선택한 ${label}으로 교체하기",desc:"${label} 교체시 현재 페이지의 작업 내용이 교체됩니다.<br>교체된 페이지는 실행 취소로 복구 가능합니다. <span>(Ctrl + Z)<span>",btn:"${label} 교체",designLabel:"디자인",templateLabel:"템플릿"},templateStyleSave:{titleLabel:"아이템 효과",defaultTitlePrefix:"나의 아이템 효과 ",selectItemNewLabel:"새로운 효과 만들기",createFailMsg:"아이템 효과 저장중에 오류가 발생하였습니다.",updateSuccessMsg:"아이템 효과가 수정되었습니다.",updateFailMsg:"아이템 효과 수정중에 오류가 발생하였습니다.",loadFailMsg:"아이템 효과를 불러오는 중에 오류가 발생하였습니다.",deleteSuccessMsg:"아이템 효과가 삭제되었습니다.",deleteFailMsg:"아이템 효과 삭제중에 오류가 발생하였습니다.."},imageProcessing:{downloadingGuide:"이미지를 준비중입니다.",cancelDownload:"다운로드 취소"},page:{addNewPage:"새 페이지 추가",copyPage:"페이지 복제",moveUpPage:"페이지 위로 이동",moveDownPage:"페이지 아래로 이동",deletePage:"페이지 삭제"},printoutOption:{title:"인쇄용 가이드 보기 설정",showGuide:{title:"인쇄/출력 가이드보기"},commodity:{title:"인쇄/출력 상품",none:"선택 안함",placard:"현수막",banner:"배너",realPrint:"실사출력",nameCard:"명함",poster:"포스터",flyers:"전단지"},optionType:{title:"추가 옵션 선택",none:"없음",placard:{default:"열재단 또는 끈고리가공",bar:"막대 가공",metalRing:"금속링 또는 유리접착고무",rodSewing:"봉미싱 가공"},banner:{default:"열재단 또는 끈고리가공",metalRing:"금속링 또는 유리접착고무"},nameCard:{default:"선택 안함",edgeRounding:"모서리 라운딩"}},margin:{title:"재단 및 안전 여백 (자동 권장)",safetyMargin:"안전 여백 :"},applyButton:"가이드 적용하기"},download:{title:"다운로드",infoTooltip:{webType:{fileTypeTitle:"파일 형식",pngTitle:"PNG (권장)",pngDescription:"고품질의 이미지이며 투명한 배경을 지원합니다.",jpgTitle:"JPG",jpgDescription:"용량이 작지만 이미지손상이 다소 있습니다.",downloadTypeTitle:"다운로드 방식",quickTitle:"빠른 다운로드",quickDescription:"크기가 작은 디자인 문서를 빠르고 효율적으로<br/>다운로드합니다.",quickDescriptionHighlight:"빠른 다운로드 결과물의 화질이 좋지 않다면,<br/>고해상도 다운로드를 이용해보세요.",highResolutionTitle:"고해상도 다운로드",highResolutionDescription:"디자인 문서 크기가 크거나 큰 사이즈의 이미지<br/>사용시 고품질로 다운받으실 수 있습니다."},printType:{fileTypeTitle:"파일 형식",jpgTitle:"JPG (인쇄용)",jpgDescription:"고품질 이미지를 포함한 인쇄용 포맷입니다.",pdfTitle:"PDF (인쇄용)",pdfDescription:"백터 요소가 포함된 인쇄용 PDF 포맷입니다.",marginTitle:"재단 여백 포함",printTitle:"인쇄용 (권장)",printDescription:"재단 여백을 포함한 작업 사이즈 기준으로<br/>다운로드 파일이 만들어집니다.",printDescriptionHighlight:"실제 인쇄 업체에 전달을 목적으로 한다면<br/>인쇄용 (권장) 옵션을 활성하세요.",checkTitle:"확인 검토용",checkDescription:"재단 여백을 포함하지 않은 재단 사이즈 기준<br/>으로 다운로드 파일이 만들어집니다."}},outputType:{web:"웹용",print:"인쇄용"},fileType:{title:"파일 형식",tooltip:{png:"PNG",pngTransparent:"PNG (투명배경)",jpgWeb:"JPG",jpgPrint:"JPG (인쇄용)",pdfWeb:"PDF (웹용)",pdfPrint:"PDF (인쇄용)"}},downloadType:{quick:"빠른 다운로드",highRes:"고해상도 다운로드"},selectPage:{title:"페이지 선택",defaultPage:"페이지 선택",allPage:"모든 페이지",page:"페이지",done:"선택 완료"},outputInfo:{title:"최종 다운로드 정보",pageCount:"총 페이지수 : ${pageCount} 페이지",workSize:"작업사이즈 : ${width} × ${height}",dpi:"DPI 해상도 : ${dpi}DPI",pageNotSelected:"페이지를 선택해주세요.",pageConfirm:"페이지를 확인해주세요.",imgCombineMaxPageSize:"※ 이미지 세로 최대 크기는 65000px 입니다.",tip:"※ 현재 인쇄용은 개인/사무용 프린터에 적합합니다.",iosRestrict:"※ 현재 사용중인 기기에서 빠른 다운로드는 4096px X 4096px 이하일 때 사용이 가능해요."},license:{description:"저작권 보호를 위해 1개의 요소만 존재하는<br/>페이지는 다운로드가 불가능합니다.",linkURL:"https://miricanvas.zendesk.com/hc/ko/articles/360021768332-미리캔버스-저작권-라이선스-규정",linkText:"미리캔버스 저작권안내"},downloadBtn:{default:"다운로드",login:"로그인이 필요합니다"},highResolution:"고해상도용",imgCombine:"한 장의 이미지로 합치기"},warning:{downloadFailure:{title:"다운로드 실패",description1:"다운로드 준비 중 오류가 발생하였습니다.",description2:"다운로드를 다시 시도해주세요.",subTitleIE:"다운로드 준비 중 오류가 발생하였습니다",descriptionIE1:"재시도 후에도 다운로드가 계속 되지 않는다면",descriptionIE2:"구글 크롬 브라우저",descriptionIE3:"에서 다시 시도해주시거나",descriptionIE4:"1:1 문의하기를 통해 문의 부탁드립니다.",confirm:"확인"}},waiting:{title:"다운로드 준비중입니다.",description:"잠시만 기다려주세요.<br/>다운로드를 준비하는 동안 브라우저가 멈출 수 있습니다."},mobile:{title:"Wifi로 접속하셨나요?",contents:"3G/LTE 환경에서는<br/>데이터 사용료가 발생할 수 있어요.<br/>Wifi 이용을 권장합니다!",confirm:"확인"},downloadReady:{title:"다운로드 준비 완료",contents:"하단 버튼은 클릭하여 디자인을 확인해주세요!",buttonText:"다운로드"},downloadProgress:{running:{title:"작품을 만드는 중...",dividePage:"많이 느린가요? 페이지를 나눠서 받아보세요.",receiveEmail:"너무 오래걸리면 이메일로 보내드릴게요!"},success:{title:"멋진 디자인이 완성됐어요!",downloadPathInfo:"파일이 어디 저장됐는지 모르겠어요",btnClose:"닫기",btnDownload:"다운로드"},failure:{title:"다운로드가 실패했어요...",subTitle:"다운로드 준비 중 오류가 발생했어요. 불편을 드려 죄송합니다.",downloadFailInfo:"다운로드는 어떤 경우에 실패하나요?",btnConfirm:"확인"},receiveEmail:{success:{title:"이메일로 받기 신청 완료",subTitle:"파일을 준비중이에요. 완료되면 고객님의 이메일로 보내드릴게요!\n30분 정도 소요될 수 있으니, 마음 편히 작업하고 계세요.",btnConfirm:"확인"},failure:{title:"이메일로 받기 실패",subTitle:"인증되지 않은 이메일이라 받아볼 수 없어요. \n이메일 인증을 먼저 완료한 후 다시 시도해주세요.",certificationInfo:"이메일 인증하러 가기",btnConfirm:"확인"}}}},handler:{lockTitle:"아이템 잠금 상태",lockDesc:"클릭시 아이템 잠금 해제",alignFirst:"맨 앞으로",alignForward:"앞으로",alignBackward:"뒤로",alignLast:"맨 뒤로",unlockTitle:"아이템 잠금 상태",unlockDesc:"클릭시 아이템 잠금 해제",copyItem:"복제하기",groupItem:"그룹화",unGroupItem:"그룹해제",photoCrop:"이미지 영역 설정",dblclick:"더블 클릭",tooltip:{diagonal:{title:"대각선",subtitle1:"확대",shortcut1:"Ctrl + Alt + K",subtitle2:"축소",shortcut2:"Ctrl + Alt + J"},topBottom:{title:"상하",subtitle1:"확대",shortcut1:"Ctrl + Alt + I",subtitle2:"축소",shortcut2:"Ctrl + Alt + Q"},leftRight:{title:"좌우",subtitle1:"확대",shortcut1:"Ctrl + Alt + B",subtitle2:"축소",shortcut2:"Ctrl + Alt + W"},moveItem:{title:"이동",shortcut:"↑ → ↓ ←"},rotateItem:{title:"회전",subtitle1:"시계방향",shortcut1:"Ctrl + →",subtitle2:"반시계방향",shortcut2:"Ctrl + ←"},setItem:{title:"아이템 설정",description:"클릭 시 설정메뉴 보기"},lock:{title:"아이템 잠금 상태",description:"클릭 시 아이템 잠금 해제"},photoCropAccept:{title:"이미지 영역 적용하기"},photoCropCancel:{title:"취소하기"}}},southwest:{settings:{btn:"설정",label:{theme:"테마",guide:"편집영역",leftMenu:"좌측 사이드 메뉴",admin:"관리자"},toggleBtn:{dark:"다크모드",snap:"스냅 가이드",guideLine:"가이드 라인",paginationMode:"좌측 리스트 방식",layer:"레이어",admin:"관리자 모드",dev:"개발 모드",pageScrollMode:"페이지 스크롤 모드"}}},itemArrangeTypeSelector:{fill:"채우기",fit:"맞추기",original:"원본크기",tooltip:{applyBtn:"적용하기"}},helpCenter:{title:"도움말",zendesk:"1:1 문의하기",copyrightInfo:"저작권이 궁금해요!",print:"인쇄를 원하세요?",faq:"자주 묻는 질문",customerService:"고객센터",bizhowsCustomerService:"비즈하우스 고객센터"},designShare:{header:"공유하기",tab:{public:"공개 공유",private:"사용자 공유"},common:{shareLink:{title:"공유 링크",copyLink:"링크 복사",copyMessage:"주소가 복사되었습니다. 소중한 디자인을 함께 공유해보세요."},visibleOption:{readonly:"보기 전용",copyAllowed:"복제 가능",editable:"편집 가능"}},publicTab:{descriptionFlashPublic:"이 디자인 문서는 공개로 설정되어 있습니다.<br/>링크 공유가 가능한 상태입니다.",descriptionFlashPrivate:"이 디자인 문서는 비공개로 설정되어 있습니다.<br/>다른 사람과 디자인을 공유하시려면 '디자인 문서 공개'로 설정해주세요.",lsExposeToPublic:"디자인 문서 공개",lsUsePassword:"비밀번호 사용",btnConfirm:"확인"},privateTab:{sharedUserCount:"공유중인 사용자(${length})"}},designProjectMenu:{prevBtn:"이전 문서 보기",nextBtn:"다음 문서 보기",addDesignBtn:"새 문서 추가하기",addDesignBtn2:"새 문서 추가"},pixabay:{init:{title:"픽사베이(Pixabay) 에서 제공하는 무료 이미지를 사용해보세요."},recommend:{title:"추천 검색어",keywords:["바이러스","청결","기념일","꽃","학교"]},search:{placeholder:"Pixabay 검색"},downloadWarningPopup:{title:" 잠시 후 다시 시도해주세요.",description1:"픽사베이로부터 고해상도 이미지를 전송받고 있습니다.",description2:"잠시 후 고해상도 다운로드를 다시 시도해주세요.",description3:"빠른 다운로드를 이용하시면 바로 다운로드가 가능합니다."}},printout:{tooltip:{warning:{safetyLine:"안전선 바깥 영역에 걸친 요소는<br/>인쇄 후 재단시 잘릴 위험이 있습니다.",imgMinDPI:"이미지 해상도가 너무 낮아서<br/>인쇄시 깨지거나 흐려보일 수 있습니다.",fontMinHeight:"텍스트 크기가 너무 작아서<br/>인쇄시 깨져보일 수 있습니다."},template:{notChangeable:"해당 기능은 작업사이즈 변경 우려로<br/>인쇄용 작업시 제공되지 않습니다."}},alert:{levelName:{warning:"경고",caution:"주의",recommend:"권장",hold:"보류"},restrictionName:{overflowSafetyZone:"안전영역 침범 경고",lowResImage:"이미지 요소 해상도 주의",minFontSize:"텍스트 최소사이즈 주의",minElementSize:"최소 요소 사이즈 주의",overlapPostManu:"후가공 위치 주의",uninputText:"미수정 텍스트 알림"},tooltip:{holdBtn:{hold:"보류하기",held:"보류됨"},overflowSafetyZone:{title:"재단 시 잘릴 수 있습니다.",desc:"글자나 로고 같은 중요한 정보는 안전선 안쪽<br/>으로 배치해 주세요."},lowResImage:{title:"이미지 해상도가 낮습니다.",desc:"이미지 크기를 줄이거나 더 고해상도의<br/>이미지를 사용해주세요."},minFontSize:{title:"글자의 크기가 너무 작습니다.",desc:"글자의 크기가 너무 작으면 인쇄 시 깨져 보일<br/>수 있으니, 글자의 크기를 키워주세요."},minElementSize:{title:"요소의 크기가 너무 작습니다.",desc:"요소의 크기가 너무 작으면 인쇄 시 깨져 보일<br/>수 있으니, 요소의 크기를 키워주세요."},overlapPostManu:{title:"후가공 시 겹칠 수 있는 위치입니다.",desc:"글자나 로고와 같은 중요한 정보는 후가공<br/>영역을 피해 배치해주세요."},uninputText:{title:"기본 텍스트 내용으로 인쇄됩니다.",desc:"아직 입력하지 않은 텍스트 요소의 내용을<br/>수정해주세요."}}},popup:{hold:"보류됨",unHold:"보류하기",factorReview:{title:"인쇄용 검토 요소",noFactor:"검토가 필요한 요소가 없습니다.",contents:"· 검토가 필요한 요소 : 총 ${unHold}개</br>· 보류된 요소 : ${hold}개"},marginInfo:{nextButton:"다음",prevButton:"이전",printArea:{title:"인쇄 영역",contents:"인쇄 영역 밖의 영역은 인쇄가 되지 않습니다.<br>인쇄물에 이미지가 여백없이 깨끗하게 재단되길 원하시면 <br>인쇄 영역까지 이미지를 이동시키거나 크기를 키워 가득차게 <br>배치해 주세요.<br><br>(가득 채우지 않을 경우, 재단시 하얀 여백이 생길 수 있습니다.)"},safetyArea:{title:"안전선 / 디자인 안전 영역",contents:'<span class="green_text">안전선</span> 안쪽 영역은 재단시 안전한 영역입니다.<br>글자나 로고와 같은 중요한 요소는 가급적 이 안전선 안쪽의 <br><span class="green_box">디자인 안전 영역</span> 안에 배치해주세요. <br><br>(안전선 바깥의 재단선에 가까운 곳에 배치된 요소는 재단시<br>잘릴 위험이 있습니다.)'}},downloadReview:{pdfIcon:"PDF",title:"인쇄용 파일 다운로드 전 검토 단계",subTitle:"현재 문서 내에 총 ${count}개의 수정이 필요한 디자인 요소가 남아있습니다.",modifyBtn:"디자인 수정하기",ignoreBtn:"무시하고 진행하기",needToFix:"수정 필요",contents:"안전한 인쇄/출력용 파일 다운로드를 위해 경고 아이콘(     ,     )이 표시된 요소를 확인하고</br>각각의 가이드에 맞게 수정한 후 다시                    를 시도해주세요.",span:"(디자인 수정 중 경고 표시된 요소들 중 의도한 디자인일 경우 '경고 무시하기' 를 클릭해주세요.)",confirm:"수정이 필요한 요소가 ${count}개 존재합니다. 그냥 다운로드를 진행하시겠습니까?"}},topTools:{showGuide:"인쇄용 가이드 보기",showFactorReview:"인쇄용 검토 요소",safetyLine:"안전선",marginInfo:"재단/안전선 안내"}},designHistory:{header:"작업내역"},rightBar:{tooltip:{deleteTemplatePage:"페이지 삭제"}},mobile:{tutorial:"템플릿&요소 추가하기!"},presentationPlayer:{controller:{pageNavigator:{pageName:"${idx}페이지"},configManager:{title:"설정",effectOptionSection:{title:"화면전환 효과",fadeOptionName:"페이드 효과",directionOption:{name:"방향",none:"없음",horizon:"좌/우",vertical:"상/하"},styleOption:{name:"스타일",slide:"슬라이드",scale:"스케일"}},playOptionSection:{title:"재생",intervalTimeOptionName:"화면전환 시간",intervalTimeOptionValueName:"${sec}초"}}}},socialName:{social:"소셜",google:"구글",facebook:"페이스북",naver:"네이버",kakao:"카카오",bizhows:"비즈하우스"}}}],!0,!0),ft.MyspaceUtil.init({pageUrl:A.CRM.get(H.a.MYSPACE_PAGE_PATH)}),fe.a.setUserInfoText(),fe.a.setIp(),o.a.STOP_WATCH.split("CRM initialized."),e.next=9,r(t);case 9:A.CRM.get("config.common.test.memo")&&(console.info("*****************\n".concat(A.CRM.get("config.common.test.memo"),"\n*****************")),console.log(Object(Ts.hello)()));case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function n(e){return i.apply(this,arguments)}function i(){return(i=s()(a.a.mark(function e(t){var n,i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="/api/front/editor-config",e.prev=1,e.next=4,Ns.getLoader(t).load(n);case 4:i=e.sent,e.next=15;break;case 7:return e.prev=7,e.t0=e.catch(1),console.log("오류다오류",e.t0),alert("디자인 로드중 에러가 발생하였습니다.\n빈 페이지를 로드합니다."),t.editorInitType="BLANK",e.next=14,Ns.getLoader(t).load(n);case 14:i=e.sent;case 15:return e.abrupt("return",i);case 16:case"end":return e.stop()}},e,null,[[1,7]])}))).apply(this,arguments)}function r(e){return l.apply(this,arguments)}function l(){return(l=s()(a.a.mark(function e(t){var i,r,s,l,u,d,p,h,m,g,v,E,T,y,I,L,k,_,w,b;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.info("new loader init",t),e.next=3,n(t);case 3:return i=e.sent,r=i.editorConfig,s=i.unicornProfile,l=i.designData,u=i.option,d=i.launcherParameter,p=i.designHistoryExtraData,h=i.designHistoryExtraDataLatest,m=i.designProjectData,e.prev=13,e.next=16,hs.a.load();case 16:return o.a.STOP_WATCH.split("template style loaded."),g=new _s(d,l,p,h),v=new ps.a(s),e.next=21,new fs(m).load();case 21:if(!(E=e.sent).isLoaded()){e.next=28;break}return e.next=25,E.getFirstUnicornDesign();case 25:T=e.sent,e.next=35;break;case 28:if(!l||g.useOverWrite){e.next=32;break}T=M.a.make(l),e.next=35;break;case 32:return e.next=34,Os.getDesign(g);case 34:T=e.sent;case 35:if(y={config:new ls(r),design:T,option:new ds(u),user:v,designProject:E,launcherOption:g},fe.a.setDesignIdx(l?btoa(String(l.idx)).replace(/=/g,""):null),!v.isLogin()){e.next=68;break}if(l){e.next=51;break}if(!(I=Number(A.RequestUtil.get(A.RequestParamKey.TEAM_IDX)))){e.next=45;break}return e.next=43,Ti.a.changeTeam(I);case 43:e.next=47;break;case 45:return e.next=47,Ti.a.setDefaultTeam();case 47:(L=A.RequestUtil.get(A.RequestParamKey.TEAM_SCOPE))?Ti.a.changeTeamScope(L):Ti.a.setDefaultScope(),e.next=68;break;case 51:if(m){e.next=61;break}return e.next=54,Ti.a.getTeamDesign(l.idx);case 54:if(!(k=e.sent)){e.next=59;break}return e.next=58,Ti.a.changeTeam(k.teamIdx);case 58:Ti.a.changeTeamScope(k.scope);case 59:e.next=68;break;case 61:return e.next=63,Ti.a.getTeamDesignProject(m.idx);case 63:if(!(_=e.sent)){e.next=68;break}return e.next=67,Ti.a.changeTeam(_.teamIdx);case 67:Ti.a.changeTeamScope(_.scope);case 68:return e.next=70,ar.init(y);case 70:return o.a.STOP_WATCH.split("unicorn initialized."),vi.a.loadCookieConfig(),e.next=74,v.doLoginAfter();case 74:return o.a.STOP_WATCH.split("doLoginAfter."),e.prev=75,e.next=78,c();case 78:e.next=83;break;case 80:e.prev=80,e.t0=e.catch(75),console.log(e.t0);case 83:return o.a.STOP_WATCH.split("static resources loaded."),e.next=86,ar.setReady();case 86:g.isLauncherUpdateMode()?o.a.dispatch(new Ce.d):o.a.dispatch(new Ce.e),o.a.STOP_WATCH.split("unicorn ready."),ms.open(),Ps.showPopupsAfterLoading(),w=ln.a.unicornLoaderOption,Ps.showAutoSaveInfoPusher(w.showAutoSaveInfoPusher),Ps.showUpdateButtonInfoPusher(w.showUpdateButtonInfoPusher),e.next=98;break;case 95:e.prev=95,e.t1=e.catch(13),e.t1 instanceof ft.UnicornError?te.a.sendEvent("에디터 오류보고",e.t1.gaData||"-",e.t1.message):console.log("init error",e.t1);case 98:return window.s=o.a.instance,window.store=o.a.instance,window.ResourceManager=mr.b,window.loadedTime=(new Date).getTime(),window.miriLogin=function(e){!0===e&&te.a.moveVirtualPage(te.c.SIGNUP_COMPLETE),o.a.dispatch(new f.d(function(){Wi.a.instance.close()}))},e.next=106,Object(bs.a)();case 106:o.a.instance.user.isAdmin()&&(b=o.a.STOP_WATCH.split("complete.").report(),window.location.search.indexOf("skaksTmsmsdlatlvkfkalxj")>=0&&setTimeout(function(){return alert(b)},0)),o.a.dispatch(new Ms);case 108:case"end":return e.stop()}},e,null,[[13,95],[75,80]])}))).apply(this,arguments)}function c(){return u.apply(this,arguments)}function u(){return(u=s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,t){Promise.all([Es.a.init(),ws.a.init()]).then(function(){return gs.a.instance.loadDefault().then(function(){return e()}).catch(function(e){return t(e)})}).catch(function(e){return t(e)})}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}(As||(As={})).init=function(e){return t.apply(this,arguments)}}(),n.d(t,"UnicornLoader",function(){return Rs}),function(e){function t(){return(t=s()(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=window.newAPI)){e.next=7;break}return console.log("newAPI!! v2 set!",t),ft.ApiClientManager.init(t.API_CLIENT),e.next=6,As.init(t);case 6:return e.abrupt("return");case 7:return console.log("init module"),o.a.STOP_WATCH.start(),A.CRM.init([{key:"config.common",data:{type:"prod",debug:!1,serverPath:{basePath:"/",defaultHost:"https://www.miricanvas.com",editor:"/design",designPath:"/design/{idx}?repositoryType={repositoryType}",designPathUnicorn:"/design/{idx}",shareHost:"https://www.miricanvas.com",designApi:"https://www.bizhows.com/servlet/com.sure.smilecat.design.DesignApiServlet",designCategory:"https://www.miricanvas.com/api/design/category",designCategoryLink:"https://www.miricanvas.com/api/design/${designIdx}/category",designCopy:"https://www.miricanvas.com/api/design/${designIdx}/copy",designRepoHost:"https://www.miricanvas.com",loadPhotoHost:"https://www.miricanvas.com",svgHost:"https://www.miricanvas.com",svgToImage:"https://www.miricanvas.com/svgToImg",myCollectionFilterHost:"https://www.miricanvas.com",myCollectionInsert:"https://www.miricanvas.com/api/my-collection",myCollectionDelete:"https://www.miricanvas.com/api/my-collection/delete",myCollectionListByReferenceKeyList:"https://www.miricanvas.com/api/my-collection/list-by-reference-key-list",stickerThumbHost:"https://img1.smilecat.com/web1/__TBPE.STIKERS",stickerCategory:"https://www.bizhows.com/servlet/api/miridih/sticker/category",stickerList:"https://www.bizhows.com/servlet/api/miridih/sticker/list",stickerApi:"https://www.bizhows.com/servlet/api/miridih/sticker?id=${id}",stickerUploadApi:"https://www.miricanvas.com/sticker/upload",stickerUpdateApi:"http://intra.smilecat.com/servlet/api/miridih/sticker/update",stickerKeywordApi:"https://www.smilecat.com/servlet/api/smilecat/search/sticker/increase-word-weight?stickerId=${stickerId}&words=${words}",stickerKeywordUpdateApi:"http://intra.smilecat.com/servlet/api/miridih/sticker/keyword/update",stickerBackgroundInfoApi:"https://www.bizhows.com/servlet/api/miridih/sticker/background-info?stickerId=${stickerId}",stickerBackgroundInfoUpdateApi:"https://www.bizhows.com/servlet/api/miridih/sticker/background-info/update",stickerBackgroundInfoDeleteApi:"https://www.bizhows.com/servlet/api/miridih/sticker/background-info/delete",stickerCategoryPopupBizhows:"http://intra.smilecat.com/admin/cate/cm_cate_link_cfg.jsp?cmd=procSrchCmCate&ccl_src_grp=1020&cci_root_idx=170&ccl_src_idx=${tsIdx}&cci_top_idx=3010",stickerCategoryPopupSmilecat:"http://intra.smilecat.com/admin/cate/cm_cate_link_cfg.jsp?cmd=procSrchCmCate&ccl_src_grp=1020&cci_root_idx=170&ccl_src_idx=${tsIdx}&cci_top_idx=4010",externalStickerListApi:"https://www.smilecat.com/servlet/api/smilecat/sticker/external/download",externalStickerApi:"https://www.smilecat.com/servlet/api/smilecat/sticker/external",tbpeStickerInfo:"https://www.smilecat.com/tbpe30/sticker-info.jsp",templateDesignRepoHost:"https://www.miricanvas.com",templateStyleRepoHost:"https://www.miricanvas.com",userImageUploadApi:"https://www.miricanvas.com/api/my-collection/photo",imagePreviewApi:"https://www.miricanvas.com/file/thumbnails",commonFileDownloadApi:"https://www.miricanvas.com/file/${uuid}",downloadLog:"https://www.miricanvas.com/api/download/log",imageProcessApiBase:"https://www.miricanvas.com/imp",designPreFlightApi:"https://api.miricanvas.com/api/v1/imp/preflight",designIMPRequestApi:"https://api.miricanvas.com/api/v1/imp/process",designStatusApi:"https://api.miricanvas.com/api/v1/imp/status/${requestIdx}",categoryApi:"https://www.miricanvas.com/api/category",categoryEditApi:"https://www.miricanvas.com/api/category/edit",noticePath:"https://www.miricanvas.com/notice",userConfigApi:"https://www.miricanvas.com/api/user-editor-config",designCheckEditable:"/api/design/check-editable/{designIdx}",designCheckUpdatable:"/api/design/check-updatable/{designIdx}/{historyIdx}",notificationHost:"https://www.miricanvas.com",account:{checkIdentity:"https://www.miricanvas.com/accounts/me",signOut:"https://www.miricanvas.com/accounts/enduser/logout",changeInfo:"https://www.miricanvas.com/accounts/enduser/update",checkPassword:"https://www.miricanvas.com/accounts/password/check",makePassword:"https://www.miricanvas.com/accounts/miricanvas",checkEmailExistence:"https://www.miricanvas.com/accounts/email/${userMail}/",setAutoLogin:"https://www.miricanvas.com/auth/auto",authMiricanvas:"/auth/miricanvas",authWithMrsOh:"https://www.miricanvas.com/auth/mrsoh",thirdParty:{signInAsGoogle:"https://www.miricanvas.com/auth/google/auth-url",signInAsBizhows:"https://www.miricanvas.com/auth/bizhows/auth-url",signInAsNaver:"https://www.miricanvas.com/auth/naver/auth-url",signInAsKakao:"https://www.miricanvas.com/auth/kakao/auth-url",signInAsFacebook:"https://www.miricanvas.com/auth/facebook/auth-url"},adminTemplateDesigner:"https://www.miricanvas.com/api/admin/user/templateDesigner",bizhowsAdminUser:"https://www.miricanvas.com/api/bizhows/admin/user"},templateLink:{bizhows:"https://www.miricanvas.com/api/template/biz-template/${designIdx}"},pixabay:{api:{endpoint:"https://www.miricanvas.com/pixabay-resources"},downloadStatusAll:"https://www.miricanvas.com/pixabay-resources/download-status-all",downloadStatus:"https://www.miricanvas.com/pixabay-resources/${key}/download-status",image:"https://www.miricanvas.com/pixabay-resources/image",imageInfo:"https://www.miricanvas.com/pixabay-resources/${id}/info"},myspace:{pagePath:"/myspace",list:"https://www.miricanvas.com/api/myspace",delete:"https://www.miricanvas.com/api/myspace/delete",copy:"https://www.miricanvas.com/api/myspace/copy",link:"https://www.miricanvas.com/api/myspace/link",deleteLink:"https://www.miricanvas.com/api/myspace/delete-link",deletePermanently:"https://www.miricanvas.com/api/myspace/delete-permanently",restore:"https://www.miricanvas.com/api/myspace/restore",category:"https://www.miricanvas.com/api/myspace/category",updateTitle:"https://www.miricanvas.com/api/myspace/update-title",userInfo:"https://www.miricanvas.com/myspace#/user-info"},userResource:{userResources:"https://www.miricanvas.com/user-resources",newFolder:"https://www.miricanvas.com/user-resources/folder",folders:"https://www.miricanvas.com/user-resources/folders",photoInFolder:"https://www.miricanvas.com/user-resources/${folderIdx}/photos",movePhotoToFolder:"https://www.miricanvas.com/user-resources/photo/folder",foldersPhotos:"https://www.miricanvas.com/user-resources/folders-photos",updateStatusFoldersPhotos:"https://www.miricanvas.com/user-resources/folders-photos/status",updateStatusFoldersPhotosAll:"https://www.miricanvas.com/user-resources/folders-photos/status/all",changeFolderName:"https://www.miricanvas.com/user-resources/folder/name",reserveFileKey:"https://www.miricanvas.com/user-resources/key",uploadWithKey:"https://www.miricanvas.com/user-resources/${type}",removeWithKey:"https://www.miricanvas.com/user-resources/${key}",checkMyCapacity:"https://www.miricanvas.com/user-resources/capacity",fileInfo:"https://www.miricanvas.com/user-resources/${key}",userResourcesV0:"https://www.miricanvas.com/api/v0/files",reserveFileKeyV0:"https://www.miricanvas.com/api/v0/files/key",uploadWithKeyV0:"https://www.miricanvas.com/api/v0/files/${type}",removeWithKeyV0:"https://www.miricanvas.com/api/v0/files/${key}",checkMyCapacityV0:"https://www.miricanvas.com/api/v0/files/capacity",fileInfoV0:"https://www.miricanvas.com/api/v0/files/${type}/${key}",copy:"https://www.miricanvas.com/user-resources/copy"},file:{info:"https://www.miricanvas.com/file/${key}/info"},share:{inActiveShareDesignUrl:"https://www.miricanvas.com/api/share/design-url/inactive",inActiveShareDesign:"https://www.miricanvas.com/api/share/design/inactive"},newShare:{getPublicVisibility:"https://www.miricanvas.com/api/design/share/public/${designIdx}",setPublicShare:"https://www.miricanvas.com/api/design/share/public",getSharedUserList:"https://www.miricanvas.com/api/design/share/private/${designIdx}",inviteList:"https://www.miricanvas.com/api/design/share/private/${designIdx}",updateList:"https://www.miricanvas.com/api/design/share/private/${designIdx}",removeList:"https://www.miricanvas.com/api/design/share/private/${designIdx}",copyDesign:"https://www.miricanvas.com/api/design/share/${designIdx}/copy"},typeFilter:{mockList:"https://www.miricanvas.com/api/template/design",imageList:"https://www.bizhows.com/servlet/api/miridih/sticker/list-by-idxes",bizTemplateList:"https://www.bizhows.com/servlet/com.sure.smilecat.design.DesignApiServlet",templateList:"https://www.miricanvas.com/api/template/favorite-list",designList:"https://www.miricanvas.com/api/design/favorite-list",skinList:"https://www.bizhows.com/servlet/api/miridih/skin/ratio-item/list-by-idxes",photoList:"https://www.miricanvas.com/file/thumbnails"},smilecat:{instance:"https://www.smilecat.com/tbpe30/commodity_instance.jsp?comm_idx=${commodityIdx}",skin:"https://img1.smilecat.com/web1/__ADMIN.SKIN/${skinId}/${ratioId}/thumb400.png",skinList:"https://www.smilecat.com/tbpe30/list/skins2.jsp?ratio_id=${ratioId}",templateMeta:"https://www.smilecat.com/tbpe30/template_meta.jsp?name=${designName}",themeMeta:"https://www.smilecat.com/tbpe30/theme_meta.jsp?name=${designName}",layout:"https://www.smilecat.com/tbpe30/template_layout.jsp?id=${layoutId}",layoutList:"https://www.smilecat.com/tbpe30/layout_list.jsp?ratio_id=${ratioId}&layout_type=${layoutType}",layoutThumb:"https://img1.smilecat.com/web1/__ADMIN.LAYOUT/${layoutId}/thumb200.png"},bizhows:{instance:"https://www.bizhows.com/tbpe30/commodity_instance.jsp?comm_idx=${commodityIdx}",skin:"https://img1.bizhows.com/bhfile01/__ADMIN.SKIN/${skinId}/${ratioId}/thumb400.png",skinList:"https://www.bizhows.com/tbpe30/list/skins2.jsp?ratio_id=${ratioId}",templateMeta:"https://www.bizhows.com/tbpe30/template_meta.jsp?name=${designName}",themeMeta:"https://www.bizhows.com/tbpe30/theme_meta.jsp?name=${designName}",layout:"https://www.bizhows.com/tbpe30/template_layout.jsp?id=${layoutId}",layoutList:"https://www.bizhows.com/tbpe30/layout_list.jsp?ratio_id=${ratioId}&layout_type=${layoutType}",layoutThumb:"https://img1.bizhows.com/bhfile01/__ADMIN.LAYOUT/${layoutId}/thumb400.png",insertTemplateLink:"https://www.bizhows.com/servlet/api/miridih/miricanvas/template/link",deleteTemplateLink:"https://www.bizhows.com/servlet/api/miridih/miricanvas/template/link/delete",linkedDesignList:"https://www.bizhows.com/servlet/api/miridih/miricanvas/template/link/design?miricanvasTemplateIdx=${templateIdx}",designDetailPage:"https://www.bizhows.com/mall/design/design_detail.jsp?site_map_idx=${siteMapIdx}&design_idx=${designIdx}"},template:{list:"https://www.miricanvas.com/api/template",listAllType:"https://www.miricanvas.com/api/template/all-type",create:"https://www.miricanvas.com/api/template",findOne:"https://www.miricanvas.com/api/template/${idx}",update:"https://www.miricanvas.com/api/template/${idx}/update",delete:"https://www.miricanvas.com/api/template/${idx}/delete",unlinkTemplate:"https://www.miricanvas.com/api/template/${idx}/unlink-template",blacklist:"https://www.miricanvas.com/api/template/blacklist",type:"https://www.miricanvas.com/api/template/type",size:"https://www.miricanvas.com/api/template/size"},templateProject:{create:"https://www.miricanvas.com/api/template/project",findOne:"https://www.miricanvas.com/api/template/project/${idx}",update:"https://www.miricanvas.com/api/template/project/${idx}/update",delete:"https://www.miricanvas.com/api/template/project/${idx}/delete",list:"https://www.miricanvas.com/api/template/project",createTemplatePage:"https://www.miricanvas.com/api/template/project/${idx}/page",templatePageList:"https://www.miricanvas.com/api/template/project/${idx}/page",createTemplate:"https://www.miricanvas.com/api/template/project/${idx}/template",templateList:"https://www.miricanvas.com/api/template/project/${idx}/template"},templatePage:{update:"https://www.miricanvas.com/api/template/page/${idx}/update",delete:"https://www.miricanvas.com/api/template/page/${idx}/delete",deleteMulti:"https://www.miricanvas.com/api/template/page",recovery:"https://www.miricanvas.com/api/template/page/recovery",history:"https://www.miricanvas.com/api/template/page/${idx}/history",findOne:"https://www.miricanvas.com/api/template/page/${idx}"},helpCenter:{miridiCustomerService:"http://help.miricanvas.com",bizhowsCustomerService:"http://www.bizhows.com/cms/%EA%B3%A0%EA%B0%9D%EC%84%BC%ED%84%B0/",copyrightInfo:"https://www.miricanvas.com/s/41",print:"https://www.miricanvas.com/s/42",faq:"https://www.miricanvas.com/s/44"},hqImage:{process:"/api/v1/hq-image",process2:"/api/v0/printing-image",progress:"/api/v0/printing-image/progress"},designHistory:{log:"/api/design/history/{designIdx}",copyRevision:"/api/design/{designIdx}/revision/{revisionIdx}/copy",overwriteRevision:"/api/design/{designIdx}/revision/{revisionIdx}/overwrite"},designEditLog:{editLog:"/api/design/edit-log/{designIdx}"},editorResourcePath:{disabledOriginItem:"https://www.miricanvas.com/resources/image/common/disabled_resource.png",notFoundOriginItem:"https://www.miricanvas.com/resources/image/common/not_found_resource.png",disabledOriginItemBackground:"https://www.miricanvas.com/resources/image/common/disabled_resource_background.png",disabledUserImage:"https://www.miricanvas.com/resources/image/common/disabled_user_resource.png",fetchError:"https://www.miricanvas.com/resources/image/common/warning.png"},printout:{metaList:"/api/printout/meta/list",saveMeta:"/api/printout/meta/save"},designProject:{create:"https://www.miricanvas.com/api/project",list:"https://www.miricanvas.com/api/project",findOne:"https://www.miricanvas.com/api/project/${designProjectIdx}",update:"https://www.miricanvas.com/api/project/${designProjectIdx}",createDesign:"https://www.miricanvas.com/api/project/${designProjectIdx}/design",findDesign:"https://www.miricanvas.com/api/project/${designProjectIdx}/design/${designIdx}",addDesign:"https://www.miricanvas.com/api/project/${designProjectIdx}/design/${designIdx}",deleteDesign:"https://www.miricanvas.com/api/project/${designProjectIdx}/design/${designIdx}",copyDesign:"https://www.miricanvas.com/api/project/${designProjectIdx}/design/${designIdx}/copy"},myCollection:{deleteByPk:"https://www.miricanvas.com/api/my-collection",sizeByResourceType:"https://www.miricanvas.com/api/my-collection/size-by-resource-type"},design:{category:"https://www.miricanvas.com/api/design/category"}},test:{version:1,url:"",pAtH:"",array:[],memo:""}}},{key:"header",data:{content:{undo:"실행 취소",redo:"재실행",actionList:"실행목록",itemList:"아이템 순서",settings:"설정",messageBox:"우편함",help:"도움말",save:"저장하기",share:"공유하기",presentation:"슬라이드 쇼",download:"다운로드",cart:"장바구니 가기",workComplete:"작업완료",designHistory:"작업내역",revertDesign:"이 작업으로 덮어쓰기",copyThisDesign:"이 작업으로 사본 만들기",editSize:"편집 사이즈 설정",designGuide:"편집영역만 보기",photoGuide:"사진중복 안내 보기",themeSet:"에디터 테마",adminMode:"관리자 모드",devMode:"개발 모드",debugMode:"디버그용",snapMode:"스냅 'ㅡ'",saveRequest:"저장 중...",saveRequire:"변경사항 있음",saveFailed:"저장 실패",saveComplete:"저장완료",saveTempComplete:"임시저장완료",designSettings:"파일",makeNewDesign:"새 문서 만들기",loadDesign:"열기...",copyDesign:"복사본 만들기",newProject:"새 프로젝트 만들기",mySpace:"마이 스페이스",copyDesignNameSuffix:" - 복사본",loadDesignShortcut:"Ctrl + O",saveDesignShortcut:"Ctrl + S",newDesignShortcut:"Ctrl + N",resizeSheet:"크기조정",guideLine:"가이드선",editorSetting:"에디터 환경",setting:"설정",pageMaskGuide:"페이지 마스크",saveMyLibrary:"저장",saveCart:"장바구니 추가",doneUpdate:"수정 완료"},user:{alert:"알림",collection:"보관함",mySpace:"마이 스페이스",editProfile:"나의 정보",signIn:"로그인",signOut:"로그아웃",ltHour:"한시간이내",ltDay:"시간 전",ltMonth:"일 전",ltYear:"개월 전",gtYear:"년 전",message:{title:"메시지함",exp:" 님이 ${data}을 공유하였습니다.",item:"아이템",collection:"보관함",design:"디자인",unknown:"무엇인가"}},tooltip:{undo:{shortcut:"Ctrl + Z"},redo:{shortcut:"Ctrl + Shift + Z"},lock:{title:"잠금"},unlock:{title:"잠금해제"},delete:{title:"삭제하기"},projectName:{title:"디자인 이름 변경하기"},userAccount:{title:"나의 계정"},editProfile:{title:"프로필 수정하기"},present:{title:"슬라이드 쇼"},present_setting:{title:"준비중입니다."},present_exit:{title:"슬라이드 쇼 종료"}},guideline:{show:"가이드선 보기",lock:"가이드선 잠금"}}},{key:"tools",data:{common:{content:{opacity:"투명도",multiColor:"색상",flip:"반전",lock:"잠금",unlock:"잠금",group:"그룹",ungroup:"그룹",flipH:"좌우 반전",flipV:"상하 반전",hyperlink:"링크",hyperlinkDesc:"하이퍼링크 연결",hyperlinkAccept:"적용",hyperlinkPlaceholder:"유니콘ㅇㅇ;",align:"정렬",alignLeft:"왼쪽 맞춤",alignCenter:"가운데 맞춤",alignRight:"오른쪽 맞춤",alignTop:"위쪽 맞춤",alignMiddle:"중간 맞춤",alignBottom:"아래쪽 맞춤",distributeVertical:"세로 간격 맞춤",distributeHorizon:"가로 간격 맞춤",order:"순서",saveStyle:"효과 저장하기",saveMockUp:"조합요소 등록하기",saveDefaultText:"기본 텍스트로 등록하기",cut:"잘라내기",copy:"복사하기",paste:"붙여넣기",delete:"삭제하기",selectNone:"아이템을 선택하고<br/>세부 설정을 할 수 있습니다.",selectLock:"잠금 해제 후<br>세부 설정을 할 수 있습니다.",selectMulti:"${length}개 아이템을 선택했습니다.<br/>세부 효과는 1개씩 적용가능합니다."},tooltip:{progress:{inProgress:"다운로드 준비중",cancel:"다운로드 취소"},bitmap:{search:"비트맵 ID 검색 : #biz_181108_st_yjs_0<br>디자이너 ID 검색 : @yjson"},hyperlink:{shortcut:"Ctrl + K"},lock:{title:"잠금",shortcut:"Ctrl + L"},unlock:{title:"잠금해제",shortcut:"Ctrl + L"},group:{title:"그룹",shortcut:"Ctrl + G"},ungroup:{title:"그룹해제",shortcut:"Ctrl + Shift + G"},cut:{shortcut:"Ctrl + X"},clone:{title:"복제하기",shortcut:"Ctrl + D"},paste:{shortcut:"Ctrl + V"},delete:{title:"삭제하기",shortcut:"Delete"},align:{left:"왼쪽 정렬",center:"가운데 정렬",right:"오른쪽 정렬",dhc:"가로간격 맞춤",top:"상단 정렬",middle:"중간 정렬",bottom:"하단 정렬",dvc:"세로간격 맞춤",first:{title:"맨 앞으로",shortcut:"Ctrl + Shift + ]"},forward:{title:"앞으로",shortcut:"Ctrl + ]"},backward:{title:"뒤로",shortcut:"Ctrl + ["},last:{title:"맨 뒤로",shortcut:"Ctrl + Shift + ["},flipH:"좌우 반전",flipV:"상하 반전"}}},toolboxHeader:{tooltip:{fixRight:{title:"우측에 고정하기"},unfixRight:{title:"우측고정 해제하기"},close:{title:"닫기"}}},multiSelect:{row:{color:"색상",colors:"색상"}},text:{headerTitle:"텍스트",row:{fontDefault:"글자 조정",outline:"외곽선",curve:"곡선",shadow:"그림자",gradient:"그라데이션",textPreset:"텍스트 프리셋",fontColor:"글자색",bgColor:"배경색"},content:{fontSize:"글자 크기",letterSpacing:"자간",lineHeight:"행간",fontStretch:"장평",curve:"곡선",outlineColor:"색상",outlineSize:"두께",shadowColor:"색상",shadowDistance:"거리",shadowAlpha:"투명도",shadowAngle:"방향",shadowSize:"크기",shadowSpread:"흐림",gradientType:"타입",gradientAngle:"방향",gradientColor:"색상",preset:"프리셋",suffixSolidLine:"테두리",suffixBitmapMask:"모양틀",suffixStickerFrame:"디자인액자",suffixGradient:"그라데이션",noneSelect:"선택안함",userStyle:"사용자 스타일"},tooltip:{fontFamily:{title:"글꼴",recommendListTitle:"사용중인 폰트"},fontSize:{title:"글자 크기",subtitle1:"크게",shortcut1:"Ctrl + Shift + .",subtitle2:"작게",shortcut2:"Ctrl + Shift + ,"},fontColor:{title:"글자 색상"},fontBoxColor:{title:"글상자 색상"},alignLeft:{title:"왼쪽 정렬"},alignCenter:{title:"가운데 정렬"},alignRight:{title:"오른쪽 정렬"},alignTop:{title:"상단 정렬"},alignMiddle:{title:"중앙 정렬"},alignBottom:{title:"하단 정렬"},bold:{title:"굵게",shortcut:"Ctrl + B"},italic:{title:"기울임",shortcut:"Ctrl + I"},underline:{title:"밑줄",shortcut:"Ctrl + U"},stroke:{title:"취소선",shortcut:"Alt + Shift + S"},uppercase:{title:"대문자 변환",shortcut:"Ctrl + Shift + K"},listBullet:{title:"단추형 목록",shortcut:"Ctrl + Shift + 7"},listNumber:{title:"번호형 목록",shortcut:"Ctrl + Shift + 8"},curve:{cwtitle:"바깥쪽 쓰기",ccwtitle:"안쪽 쓰기"}}},image:{headerTitleImage:"이미지",headerTitleBitmap:"비트맵",headerTitlePhotoBackground:"사진 배경",row:{filter:"필터 효과",filterAccordion:"필터",directAdjustment:"직접 조정",solidLine:"사진 테두리",bitmapMask:"모양 오리기",stickerFrame:"디자인 액자",gradient:"그라데이션 마스크"},content:{crop:"이미지 자르기",toBackground:"배경으로 사용",backgroundColor:"색상",solidLineColor:"색상",solidLineThickness:"두께",solidLineAlpha:"투명도",gradationDirection:"방향",gradationT:"상 -> 하",gradationB:"하 -> 상",gradationL:"좌 -> 우",gradationR:"우 -> 좌",gradationDepth:"범위",intensity:"강도",brightness:"밝기",lightness:"명도",contrast:"대비",saturation:"채도",colorTone:"컬러톤",tint:"* 색상 (관리자용)",temperature:"온도",blur:"흐리기",vignette:"비네트",presetNormal:"NORMAL",presetCali:"CALI"},tooltip:{reset:"속성 초기화",toSkin:"배경으로 만들기",crop:{title:"자르기",shortcut:"더블클릭"},bgCrop:{title:"사진 위치조정",shortcut:"더블클릭"},export:"사진 빼내기"},preset:{default:"없음"}},background:{row:{solidColor:"색상"}},grid:{headerTitle:"표",tab:{cell:"셀 설정",text:"글자 설정",image:"이미지 설정"},row:{cellBackground:"셀 배경",cellBackgroundColor:"색상",cellBackgroundAlpha:"투명도",cellBorder:"셀 테두리",cellBorderColor:"색상",cellBorderAlpha:"투명도",cellBorderThickness:"두께"},tooltip:{addRowTop:{title:"위쪽 행 추가"},addRowBottom:{title:"아래쪽 행 추가"},removeRow:{title:"행 삭제하기"},addColumnLeft:{title:"왼쪽 열 추가"},addColumnRight:{title:"오른쪽 열 추가"},removeColumn:{title:"열 삭제하기"},cellConcat:{title:"셀 합치기"},cellSplit:{title:"셀 나누기"},cellDistributeVertical:{title:"행 간격 맞추기"},cellDistributeHorizon:{title:"열 간격 맞추기"},noneBorders:{title:"테두리 모두 지우기"},allBorders:{title:"모든 테두리 적용"},outerBorders:{title:"바깥쪽 테두리 적용"},innerBorder:{title:"안쪽 테두리 적용"},downDiagonalBorders:{title:"하향 대각선 테두리 적용"},upDiagonalBorder:{title:"상향 대각선 테두리 적용"},topBorder:{title:"위쪽 테두리 적용"},bottomBorder:{title:"아래쪽 테두리 적용"},leftBorder:{title:"왼쪽 테두리 적용"},rightBorder:{title:"오른쪽 테두리 적용"},innerHorBorders:{title:"안쪽 가로 테두리 적용"},innerVerBorders:{title:"안쪽 세로 테두리 적용"}}},svg:{headerTitle:{svg:"SVG",graphic:"그래픽",line:"선",figure:"도형",illust:"일러스트",background_pattern:"패턴 배경",background_image:"사진형 배경"},color:"색상",patternSize:"패턴 크기",row:{svg:"그래픽 기본 설정",layer:"그래픽 구성요소"},content:{toImageframe:"이미지 프레임으로 변경",registUserSvg:"선, 도형, 일러스트, 패턴배경 요소로 등록하기",registUserImageframe:"이미지 프레임 요소로 등록하기"},toolbox:{infoTab:"등록 정보",settingTab:"요소 설정",saveConfirmMsg1:"주의)<br>이 그래픽을 사용한 모든 디자인에 적용됩니다.<br>설정을 저장하시겠습니까?",saveConfirmMsg2:"해당 요소를 사용한 템플릿이 있을 경우 정상적으로 나오지 않습니다.<br>계속 진행하시겠습니까?"}},pageListNavigator:{listTitle:"페이지 리스트",tooltip:{moveScreenHandle:{title:"화면이동 핸들",shortcut:"Ctrl + Space + 드래그"},fullScreenMode:{title:"전체화면모드",shortcut:"Ctrl + F5"},reduceScreen:{title:"화면 축소",shortcut:"Ctrl + Alt + -"},screenRatio:{title:"화면 비율",shortcut:"Fit : Ctrl + Alt + ["},expandScreen:{title:"화면 확대",shortcut:"Ctrl + Alt + +"},showPageList:{title:"페이지 리스트 보기"},removePage:{title:"페이지 삭제하기"},addClonePage:{title:"페이지 추가/복제",subtitle1:"빈 페이지",shortcut1:"Ctrl + M",subtitle2:"페이지 복제",shortcut2:"Ctrl + D"},previousPage:{title:"이전 페이지",shortcut:"Page Up"},nextPage:{title:"다음 페이지",shortcut:"Page Down"}}},pageZoomNavigator:{popup:{screenFit:"화면 맞춤",screenFull:"화면 채우기"}},imageframe:{headerTitle:"프레임",content:{toSvg:"그래픽으로 변경",clearFrame:"이미지 비우기"},color:"색상",frameColor:"색상(프레임 영역 선택)",tooltip:{reset:"속성 초기화",crop:{title:"사진 위치조정",shortcut:"더블클릭"},export:"사진 빼내기",delete:"사진 삭제"}},lib:{template:{title:"템플릿",manager:{type:"타입",active:"활성",templateId:"템플릿 ID",templateTitle:"템플릿 이름",designerId:"디자이너 ID",autoKeyword:"자동 키워드",manualKeyword:"수동 키워드",copyToUnicornTemplate:"유니콘 템플릿으로 복제하기",keyword:"키워드",memo:"메모",unlink:"해제",link:"적용",saveInfo:"정보 저장",saveDesign:"디자인 적용",copyTemplate:"템플릿 복제",deleteTemplate:"삭제"}},bizTemplate:{title:"비즈템플릿",btnNotice:"템플릿 안내"},design:{title:"나의 템플릿",emptyListMsg:"앗, 아직 내 디자인이 없어요...",emptyListMsg2:"템플릿을 활용하여<br>나만의 디자인을 만들어보세요.",btnMoveTemplate:"템플릿으로 이동하기",folder:{emptyListMsg:"앗, 내 폴더가 없어요...",emptyListMsg2:"폴더 생성 및 관리는 <br>마이스페이스에서 이용할 수 있어요."},folderDesign:{emptyListMsg:"앗, 폴더가 비어있어요...",emptyListMsg2:"내 디자인 분류 및 관리는<br>마이스페이스에서 이용할 수 있어요."},biz:{emptyListMsg:"앗, 저장한 디자인이 없어요...",emptyListMsg2:"<a>비즈하우스</a>에서<br/>미리캔버스로 편집한 디자인은<br/>여기에서 볼 수 있어요!"}},item:{title:"요소",templateTitle:"템플릿",designTitle:"나의 템플릿",bitmapTitle:"비트맵",imageTitle:"사진",lineTitle:"선",figureTitle:"도형",illustTitle:"일러스트",frameTitle:"프레임",textTitle:"텍스트",pixabay:"Pixabay",grid:"표"},mockup:{title:"조합"},svg:{title:"그래픽"},image:{title:"이미지"},grid:{title:"표"},all:{title:"전체"},text:{title:"텍스트",btnAdd:"텍스트추가",defaultTextTitle:"기본 텍스트"},simpleText:{title:"심플"},styleText:{title:"스타일"},specialText:{title:"스페셜"},upload:{title:"내 이미지",emptyListMsg:"업로드한 이미지가 없어요.",emptyListMsg2:"사진 추가하기 버튼을 클릭하여<br>사진, SVG 파일을 올려보세요!"},uploadGuide:{title:"이미지 업로드",uploadGuideMsg1:"여러개의 이미지를 업로드 할 수 있습니다.",uploadGuideMsg2:"JPG, PNG, SVG"},favorites:{title:"찜하기",emptyListMsg:"아직 찜한 디자인이 없어요.",emptyListMsg2:"마음에 드는 템플릿이나<br>디자인 요소를 담아주세요."},background:{title:"배경",patternTitle:"패턴",imageTitle:"사진"},layout:{title:"레이아웃"},collection:{title:"보관함"},adminTool:{title:"관리자툴"},devTool:{title:"DevTools",toggleBtn:{finalConfirm:"최종확인 활성화"}},imageDownload:{title:"이미지 다운로드"},imageSearch:{title:"이미지 검색"},loginBtn:"로그인 하기",loginNotiMsg:{default:"로그인 후 이용 가능해요.",uploadLib:"이미지 업로드, 스크린샷 복사/붙여넣기는\n로그인 후 이용 가능합니다."},keywordPlaceholder:"검색어를 입력하세요.",designSearchPlaceholder:"내 디자인 문서 찾기",listEmptyMessage:"검색 결과가 없어요...",listEmptyMessage2:"다른 검색어를 입력해주세요.",tooltip:{deleteKeyword:{title:"키워드 삭제"},rollbackSelection:{title:"선택 초기화"},useDesign:{title:"디자인 사용하기"},useMockUp:{title:"목업 사용하기"},useGraphic:{title:"그래픽 사용하기"},useImage:{title:"이미지 사용하기"},useText:{title:"글자 사용하기"},useBackground:{title:"배경 사용하기"},share:{title:"공유하기"},bookmark:{title:"찜하기"},previousPage:{title:"이전 페이지"},nextPage:{title:"다음 페이지"},selectColor:{title:"다른색 선택하기"},sharingFolder:{title:"공유중인 폴더입니다."},createFolder:{title:"새 폴더 추가"},changeName:{title:"이름 변경"},removeFolder:{title:"폴더 삭제"},use:{title:"사용하기"},remove:{title:"삭제하기"},isUsableAfterLogin:{title:"로그인 후 사용가능합니다."},managePalette:{title:"팔레트 관리"},edit:{title:"수정하기"},delete:{title:"삭제하기"},addColor:{title:"색상 추가"},sameColor:{title:"동일 색상"}}},templateProject:{arrangeType:{overWidth:"가로가 더 긴 타입",overHeight:"세로가 더 긴 타입",fillDesc:"원본 디자인의 ${direction}가 잘립니다.",fitDesc:"원본 디자인보다 ${direction} 배경 공간이 생깁니다."}},preview:{saveConfirmTitle:"보관함 담기",saveConfirmText1:"님의 보관함을 저장하시겠습니까?",saveConfirmText2:"나의 보관함에서 이 디자인들을 사용할 수 있습니다",saveConfirmAccept:"확인",saveConfirmCancel:"취소"},popup:{login:{description:"<span>${platform}</span>(으)로 가입하셨네요! 해당 소셜 계정으로 로그인해보세요."},logout:{title:"로그인이 해제되었어요",btnLogin:"다시 로그인",default:{contents:"작업을 계속 하시려면 다시 로그인해주세요."},timeout:{contents:"안전한 보안을 위하여 30분간 사용내역이 없을 경우<br>로그아웃 돼요. 작업을 계속 하시려면 다시 로그인해주세요.",tip:"TIP. '로그인 상태 유지하기'를 체크하고 로그인하면<br>시간이 지나도 로그아웃되지 않아요!"}},browser:{title:"다른 브라우저를 사용해보세요.",contents:"아쉽지만 현재 미리캔버스는 아래의 브라우저만 지원하고 있습니다.<br/>계속해서 이용하시려면 아래의 브라우저 중 원하는 브라우저를 설치후, 이용해주시길 바랍니다.<br/>아래의 아이콘을 클릭하면 해당 브라우저의 설치 화면으로 이동합니다.",chrome:"Chrome",firefox:"Firefox",safari:"Safari<br/><span>(macOS에서만)</span>",edge:"Edge<br/><span>(Windows에서만)</span>",descLink:"더 자세히 알아보려면 여기를 클릭하세요."},profile:{title:"나의 정보",name:"이름",saveProfile:"프로필 변경",password:"현재 비밀번호",newPassword:"새 비밀번호",newPasswordConfirm:"새 비밀번호 확인",savePassword:"비밀번호 변경",noticeEmail:"이메일 알림",noticeEmailBtn:"미리캔버스의 이메일 알림 받기",makePassword:"비밀번호",makePasswordConfirm:"비밀번호 확인",registerPassword:"비밀번호 등록"},saveBtnLabel:"저장하기",updateBtnLabel:"수정하기",privateResourceType:"미노출",confirmBtn:"확인",deleteBtn:"삭제",updateConfirmMsg:"${name} 에 덮어씌우시겠습니까?",createConfirmMsg:"${name} (으)로 저장하시겠습니까?",deleteConfirmMsg:"${name} (을)를 삭제하시겠습니까?",defaultTextSave:{title:"새 기본 텍스트 ",confirm:{title:"등록하기",subTitle:"선택한 텍스트 요소를 기본 텍스트로 등록하시겠습니까?"}},templateDesignSave:{titleLabel:"아이템 조합",defaultTitlePrefix:"나의 목업 ",selectItemNewLabel:"새로운 조합 만들기",selectItemNewTitle:"새 조합",createFailMsg:"아이템 조합 저장중에 오류가 발생하였습니다.",saveSuccessMsg:"조합요소 등록이 완료되었습니다.",saveDefaultTextSuccessMsg:"기본 텍스트 등록이 완료되었습니다.",updateSuccessMsg:"아이템 조합이 수정되었습니다.",updateFailMsg:"아이템 조합 수정중에 오류가 발생하였습니다.",loadFailMsg:"아이템 조합을 불러오는 중에 오류가 발생하였습니다.",deleteSuccessMsg:"아이템 조합이 삭제되었습니다.",deleteFailMsg:"아이템 조합 삭제중에 오류가 발생하였습니다..",InvalidResourceMsg:"미등록 또는 비활성 상태의 요소가 포함되어 있습니다."},designSave:{titleLabel:"디자인 저장",defaultTitlePrefix:"나의 디자인 ",saveTypeUpdateLabel:"디자인 수정",saveTypeCreateLabel:"새 디자인 저장",createFailMsg:"디자인 저장중에 오류가 발생하였습니다.",updateSuccessMsg:"디자인이 수정되었습니다.",updateFailMsg:"디자인 수정중에 오류가 발생하였습니다.",loadFailMsg:"디자인을 불러오는 중에 오류가 발생하였습니다.",deleteSuccessMsg:"디자인이 삭제되었습니다.",deleteFailMsg:"디자인 삭제중에 오류가 발생하였습니다.."},designLoad:{titleLabel:"디자인 적용 방법을 선택해주세요.",initBtn:"선택한 디자인으로 새로 만들기",overrideBtn:"선택한 디자인으로 덮어쓰기",addBtn:"현재 페이지 뒤에 추가하기",maintainSize:"현재 페이지와 동일한 비율로 추가",loadingMsg:"디자인을 불러오고 있습니다.<br/>잠시만 기다려주세요.",loadingCancel:"적용 취소",title:"선택한 ${label}으로 교체하기",desc:"${label} 교체시 현재 페이지의 작업 내용이 교체됩니다.<br>교체된 페이지는 실행 취소로 복구 가능합니다. <span>(Ctrl + Z)<span>",btn:"${label} 교체",designLabel:"디자인",templateLabel:"템플릿"},templateStyleSave:{titleLabel:"아이템 효과",defaultTitlePrefix:"나의 아이템 효과 ",selectItemNewLabel:"새로운 효과 만들기",createFailMsg:"아이템 효과 저장중에 오류가 발생하였습니다.",updateSuccessMsg:"아이템 효과가 수정되었습니다.",updateFailMsg:"아이템 효과 수정중에 오류가 발생하였습니다.",loadFailMsg:"아이템 효과를 불러오는 중에 오류가 발생하였습니다.",deleteSuccessMsg:"아이템 효과가 삭제되었습니다.",deleteFailMsg:"아이템 효과 삭제중에 오류가 발생하였습니다.."},imageProcessing:{downloadingGuide:"이미지를 준비중입니다.",cancelDownload:"다운로드 취소"},page:{addNewPage:"새 페이지 추가",copyPage:"페이지 복제",moveUpPage:"페이지 위로 이동",moveDownPage:"페이지 아래로 이동",deletePage:"페이지 삭제"},printoutOption:{title:"인쇄용 가이드 보기 설정",showGuide:{title:"인쇄/출력 가이드보기"},commodity:{title:"인쇄/출력 상품",none:"선택 안함",placard:"현수막",banner:"배너",realPrint:"실사출력",nameCard:"명함",poster:"포스터",flyers:"전단지"},optionType:{title:"추가 옵션 선택",none:"없음",placard:{default:"열재단 또는 끈고리가공",bar:"막대 가공",metalRing:"금속링 또는 유리접착고무",rodSewing:"봉미싱 가공"},banner:{default:"열재단 또는 끈고리가공",metalRing:"금속링 또는 유리접착고무"},nameCard:{default:"선택 안함",edgeRounding:"모서리 라운딩"}},margin:{title:"재단 및 안전 여백 (자동 권장)",safetyMargin:"안전 여백 :"},applyButton:"가이드 적용하기"},download:{title:"다운로드",infoTooltip:{webType:{fileTypeTitle:"파일 형식",pngTitle:"PNG (권장)",pngDescription:"고품질의 이미지이며 투명한 배경을 지원합니다.",jpgTitle:"JPG",jpgDescription:"용량이 작지만 이미지손상이 다소 있습니다.",downloadTypeTitle:"다운로드 방식",quickTitle:"빠른 다운로드",quickDescription:"크기가 작은 디자인 문서를 빠르고 효율적으로<br/>다운로드합니다.",quickDescriptionHighlight:"빠른 다운로드 결과물의 화질이 좋지 않다면,<br/>고해상도 다운로드를 이용해보세요.",highResolutionTitle:"고해상도 다운로드",highResolutionDescription:"디자인 문서 크기가 크거나 큰 사이즈의 이미지<br/>사용시 고품질로 다운받으실 수 있습니다."},printType:{fileTypeTitle:"파일 형식",jpgTitle:"JPG (인쇄용)",jpgDescription:"고품질 이미지를 포함한 인쇄용 포맷입니다.",pdfTitle:"PDF (인쇄용)",pdfDescription:"백터 요소가 포함된 인쇄용 PDF 포맷입니다.",marginTitle:"재단 여백 포함",printTitle:"인쇄용 (권장)",printDescription:"재단 여백을 포함한 작업 사이즈 기준으로<br/>다운로드 파일이 만들어집니다.",printDescriptionHighlight:"실제 인쇄 업체에 전달을 목적으로 한다면<br/>인쇄용 (권장) 옵션을 활성하세요.",checkTitle:"확인 검토용",checkDescription:"재단 여백을 포함하지 않은 재단 사이즈 기준<br/>으로 다운로드 파일이 만들어집니다."}},outputType:{web:"웹용",print:"인쇄용"},fileType:{title:"파일 형식",tooltip:{png:"PNG",pngTransparent:"PNG (투명배경)",jpgWeb:"JPG",jpgPrint:"JPG (인쇄용)",pdfWeb:"PDF (웹용)",pdfPrint:"PDF (인쇄용)"}},downloadType:{quick:"빠른 다운로드",highRes:"고해상도 다운로드"},selectPage:{title:"페이지 선택",defaultPage:"페이지 선택",allPage:"모든 페이지",page:"페이지",done:"선택 완료"},outputInfo:{title:"최종 다운로드 정보",pageCount:"총 페이지수 : ${pageCount} 페이지",workSize:"작업사이즈 : ${width} × ${height}",dpi:"DPI 해상도 : ${dpi}DPI",pageNotSelected:"페이지를 선택해주세요.",pageConfirm:"페이지를 확인해주세요.",imgCombineMaxPageSize:"※ 이미지 세로 최대 크기는 65000px 입니다.",tip:"※ 현재 인쇄용은 개인/사무용 프린터에 적합합니다.",iosRestrict:"※ 현재 사용중인 기기에서 빠른 다운로드는 4096px X 4096px 이하일 때 사용이 가능해요."},license:{description:"저작권 보호를 위해 1개의 요소만 존재하는<br/>페이지는 다운로드가 불가능합니다.",linkURL:"https://miricanvas.zendesk.com/hc/ko/articles/360021768332-미리캔버스-저작권-라이선스-규정",linkText:"미리캔버스 저작권안내"},downloadBtn:{default:"다운로드",login:"로그인이 필요합니다"},highResolution:"고해상도용",imgCombine:"한 장의 이미지로 합치기"},warning:{downloadFailure:{title:"다운로드 실패",description1:"다운로드 준비 중 오류가 발생하였습니다.",description2:"다운로드를 다시 시도해주세요.",subTitleIE:"다운로드 준비 중 오류가 발생하였습니다",descriptionIE1:"재시도 후에도 다운로드가 계속 되지 않는다면",descriptionIE2:"구글 크롬 브라우저",descriptionIE3:"에서 다시 시도해주시거나",descriptionIE4:"1:1 문의하기를 통해 문의 부탁드립니다.",confirm:"확인"}},waiting:{title:"다운로드 준비중입니다.",description:"잠시만 기다려주세요.<br/>다운로드를 준비하는 동안 브라우저가 멈출 수 있습니다."},mobile:{title:"Wifi로 접속하셨나요?",contents:"3G/LTE 환경에서는<br/>데이터 사용료가 발생할 수 있어요.<br/>Wifi 이용을 권장합니다!",confirm:"확인"},downloadReady:{title:"다운로드 준비 완료",contents:"하단 버튼은 클릭하여 디자인을 확인해주세요!",buttonText:"다운로드"},downloadProgress:{running:{title:"작품을 만드는 중...",dividePage:"많이 느린가요? 페이지를 나눠서 받아보세요.",receiveEmail:"너무 오래걸리면 이메일로 보내드릴게요!"},success:{title:"멋진 디자인이 완성됐어요!",downloadPathInfo:"파일이 어디 저장됐는지 모르겠어요",btnClose:"닫기",btnDownload:"다운로드"},failure:{title:"다운로드가 실패했어요...",subTitle:"다운로드 준비 중 오류가 발생했어요. 불편을 드려 죄송합니다.",downloadFailInfo:"다운로드는 어떤 경우에 실패하나요?",btnConfirm:"확인"},receiveEmail:{success:{title:"이메일로 받기 신청 완료",subTitle:"파일을 준비중이에요. 완료되면 고객님의 이메일로 보내드릴게요!\n30분 정도 소요될 수 있으니, 마음 편히 작업하고 계세요.",btnConfirm:"확인"},failure:{title:"이메일로 받기 실패",subTitle:"인증되지 않은 이메일이라 받아볼 수 없어요. \n이메일 인증을 먼저 완료한 후 다시 시도해주세요.",certificationInfo:"이메일 인증하러 가기",btnConfirm:"확인"}}}},handler:{lockTitle:"아이템 잠금 상태",lockDesc:"클릭시 아이템 잠금 해제",alignFirst:"맨 앞으로",alignForward:"앞으로",alignBackward:"뒤로",alignLast:"맨 뒤로",unlockTitle:"아이템 잠금 상태",unlockDesc:"클릭시 아이템 잠금 해제",copyItem:"복제하기",groupItem:"그룹화",unGroupItem:"그룹해제",photoCrop:"이미지 영역 설정",dblclick:"더블 클릭",tooltip:{diagonal:{title:"대각선",subtitle1:"확대",shortcut1:"Ctrl + Alt + K",subtitle2:"축소",shortcut2:"Ctrl + Alt + J"},topBottom:{title:"상하",subtitle1:"확대",shortcut1:"Ctrl + Alt + I",subtitle2:"축소",shortcut2:"Ctrl + Alt + Q"},leftRight:{title:"좌우",subtitle1:"확대",shortcut1:"Ctrl + Alt + B",subtitle2:"축소",shortcut2:"Ctrl + Alt + W"},moveItem:{title:"이동",shortcut:"↑ → ↓ ←"},rotateItem:{title:"회전",subtitle1:"시계방향",shortcut1:"Ctrl + →",subtitle2:"반시계방향",shortcut2:"Ctrl + ←"},setItem:{title:"아이템 설정",description:"클릭 시 설정메뉴 보기"},lock:{title:"아이템 잠금 상태",description:"클릭 시 아이템 잠금 해제"},photoCropAccept:{title:"이미지 영역 적용하기"},photoCropCancel:{title:"취소하기"}}},southwest:{settings:{btn:"설정",label:{theme:"테마",guide:"편집영역",leftMenu:"좌측 사이드 메뉴",admin:"관리자"},toggleBtn:{dark:"다크모드",snap:"스냅 가이드",guideLine:"가이드 라인",paginationMode:"좌측 리스트 방식",layer:"레이어",admin:"관리자 모드",dev:"개발 모드",pageScrollMode:"페이지 스크롤 모드"}}},itemArrangeTypeSelector:{fill:"채우기",fit:"맞추기",original:"원본크기",tooltip:{applyBtn:"적용하기"}},helpCenter:{title:"도움말",zendesk:"1:1 문의하기",copyrightInfo:"저작권이 궁금해요!",print:"인쇄를 원하세요?",faq:"자주 묻는 질문",customerService:"고객센터",bizhowsCustomerService:"비즈하우스 고객센터"},designShare:{header:"공유하기",tab:{public:"공개 공유",private:"사용자 공유"},common:{shareLink:{title:"공유 링크",copyLink:"링크 복사",copyMessage:"주소가 복사되었습니다. 소중한 디자인을 함께 공유해보세요."},visibleOption:{readonly:"보기 전용",copyAllowed:"복제 가능",editable:"편집 가능"}},publicTab:{descriptionFlashPublic:"이 디자인 문서는 공개로 설정되어 있습니다.<br/>링크 공유가 가능한 상태입니다.",descriptionFlashPrivate:"이 디자인 문서는 비공개로 설정되어 있습니다.<br/>다른 사람과 디자인을 공유하시려면 '디자인 문서 공개'로 설정해주세요.",lsExposeToPublic:"디자인 문서 공개",lsUsePassword:"비밀번호 사용",btnConfirm:"확인"},privateTab:{sharedUserCount:"공유중인 사용자(${length})"}},designProjectMenu:{prevBtn:"이전 문서 보기",nextBtn:"다음 문서 보기",addDesignBtn:"새 문서 추가하기",addDesignBtn2:"새 문서 추가"},pixabay:{init:{title:"픽사베이(Pixabay) 에서 제공하는 무료 이미지를 사용해보세요."},recommend:{title:"추천 검색어",keywords:["바이러스","청결","기념일","꽃","학교"]},search:{placeholder:"Pixabay 검색"},downloadWarningPopup:{title:" 잠시 후 다시 시도해주세요.",description1:"픽사베이로부터 고해상도 이미지를 전송받고 있습니다.",description2:"잠시 후 고해상도 다운로드를 다시 시도해주세요.",description3:"빠른 다운로드를 이용하시면 바로 다운로드가 가능합니다."}},printout:{tooltip:{warning:{safetyLine:"안전선 바깥 영역에 걸친 요소는<br/>인쇄 후 재단시 잘릴 위험이 있습니다.",imgMinDPI:"이미지 해상도가 너무 낮아서<br/>인쇄시 깨지거나 흐려보일 수 있습니다.",fontMinHeight:"텍스트 크기가 너무 작아서<br/>인쇄시 깨져보일 수 있습니다."},template:{notChangeable:"해당 기능은 작업사이즈 변경 우려로<br/>인쇄용 작업시 제공되지 않습니다."}},alert:{levelName:{warning:"경고",caution:"주의",recommend:"권장",hold:"보류"},restrictionName:{overflowSafetyZone:"안전영역 침범 경고",lowResImage:"이미지 요소 해상도 주의",minFontSize:"텍스트 최소사이즈 주의",minElementSize:"최소 요소 사이즈 주의",overlapPostManu:"후가공 위치 주의",uninputText:"미수정 텍스트 알림"},tooltip:{holdBtn:{hold:"보류하기",held:"보류됨"},overflowSafetyZone:{title:"재단 시 잘릴 수 있습니다.",desc:"글자나 로고 같은 중요한 정보는 안전선 안쪽<br/>으로 배치해 주세요."},lowResImage:{title:"이미지 해상도가 낮습니다.",desc:"이미지 크기를 줄이거나 더 고해상도의<br/>이미지를 사용해주세요."},minFontSize:{title:"글자의 크기가 너무 작습니다.",desc:"글자의 크기가 너무 작으면 인쇄 시 깨져 보일<br/>수 있으니, 글자의 크기를 키워주세요."},minElementSize:{title:"요소의 크기가 너무 작습니다.",desc:"요소의 크기가 너무 작으면 인쇄 시 깨져 보일<br/>수 있으니, 요소의 크기를 키워주세요."},overlapPostManu:{title:"후가공 시 겹칠 수 있는 위치입니다.",desc:"글자나 로고와 같은 중요한 정보는 후가공<br/>영역을 피해 배치해주세요."},uninputText:{title:"기본 텍스트 내용으로 인쇄됩니다.",desc:"아직 입력하지 않은 텍스트 요소의 내용을<br/>수정해주세요."}}},popup:{hold:"보류됨",unHold:"보류하기",factorReview:{title:"인쇄용 검토 요소",noFactor:"검토가 필요한 요소가 없습니다.",contents:"· 검토가 필요한 요소 : 총 ${unHold}개</br>· 보류된 요소 : ${hold}개"},marginInfo:{nextButton:"다음",prevButton:"이전",printArea:{title:"인쇄 영역",contents:"인쇄 영역 밖의 영역은 인쇄가 되지 않습니다.<br>인쇄물에 이미지가 여백없이 깨끗하게 재단되길 원하시면 <br>인쇄 영역까지 이미지를 이동시키거나 크기를 키워 가득차게 <br>배치해 주세요.<br><br>(가득 채우지 않을 경우, 재단시 하얀 여백이 생길 수 있습니다.)"},safetyArea:{title:"안전선 / 디자인 안전 영역",contents:'<span class="green_text">안전선</span> 안쪽 영역은 재단시 안전한 영역입니다.<br>글자나 로고와 같은 중요한 요소는 가급적 이 안전선 안쪽의 <br><span class="green_box">디자인 안전 영역</span> 안에 배치해주세요. <br><br>(안전선 바깥의 재단선에 가까운 곳에 배치된 요소는 재단시<br>잘릴 위험이 있습니다.)'}},downloadReview:{pdfIcon:"PDF",title:"인쇄용 파일 다운로드 전 검토 단계",subTitle:"현재 문서 내에 총 ${count}개의 수정이 필요한 디자인 요소가 남아있습니다.",modifyBtn:"디자인 수정하기",ignoreBtn:"무시하고 진행하기",needToFix:"수정 필요",contents:"안전한 인쇄/출력용 파일 다운로드를 위해 경고 아이콘(     ,     )이 표시된 요소를 확인하고</br>각각의 가이드에 맞게 수정한 후 다시                    를 시도해주세요.",span:"(디자인 수정 중 경고 표시된 요소들 중 의도한 디자인일 경우 '경고 무시하기' 를 클릭해주세요.)",confirm:"수정이 필요한 요소가 ${count}개 존재합니다. 그냥 다운로드를 진행하시겠습니까?"}},topTools:{showGuide:"인쇄용 가이드 보기",showFactorReview:"인쇄용 검토 요소",safetyLine:"안전선",marginInfo:"재단/안전선 안내"}},designHistory:{header:"작업내역"},rightBar:{tooltip:{deleteTemplatePage:"페이지 삭제"}},mobile:{tutorial:"템플릿&요소 추가하기!"},presentationPlayer:{controller:{pageNavigator:{pageName:"${idx}페이지"},configManager:{title:"설정",effectOptionSection:{title:"화면전환 효과",fadeOptionName:"페이드 효과",directionOption:{name:"방향",none:"없음",horizon:"좌/우",vertical:"상/하"},styleOption:{name:"스타일",slide:"슬라이드",scale:"스케일"}},playOptionSection:{title:"재생",intervalTimeOptionName:"화면전환 시간",intervalTimeOptionValueName:"${sec}초"}}}},socialName:{social:"소셜",google:"구글",facebook:"페이스북",naver:"네이버",kakao:"카카오",bizhows:"비즈하우스"}}}]),ft.MyspaceUtil.init({pageUrl:A.CRM.get(H.a.MYSPACE_PAGE_PATH)}),o.a.STOP_WATCH.split("CRM initialized."),e.next=14,n();case 14:A.CRM.get("config.common.test.memo")&&(console.info("*****************\n".concat(A.CRM.get("config.common.test.memo"),"\n*****************")),console.log(Object(Ts.hello)()));case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}function n(){return i.apply(this,arguments)}function i(){return(i=s()(a.a.mark(function e(){var t,n,i,s,l,c,u,d,p,h,m,g,v,E,T,y,I,L,k,_;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return fe.a.setUserInfoText(),fe.a.setIp(),e.next=4,ft.UnicornApiRequest.get("/api/front/editor-config");case 4:return t=e.sent,n=t.data.editorConfig,console.log(n),i=window.unicornDesign,s=window.designProject,l=window.unicornOption,c=window.unicornProfile,u=window.launcherParameter,d=window.designExtraData,p=window.designExtraDataLatest,e.prev=14,e.next=17,hs.a.load();case 17:if(o.a.STOP_WATCH.split("template style loaded."),h=new _s(u,i,d,p),!c){e.next=23;break}e.t0=new ps.a(c),e.next=26;break;case 23:return e.next=25,ps.b.make();case 25:e.t0=e.sent;case 26:return m=e.t0,e.next=29,new fs(s).load();case 29:if(!(g=e.sent).isLoaded()){e.next=36;break}return e.next=33,g.getFirstUnicornDesign();case 33:v=e.sent,e.next=43;break;case 36:if(!i||h.useOverWrite){e.next=40;break}v=M.a.make(i),e.next=43;break;case 40:return e.next=42,Os.getDesign(h);case 42:v=e.sent;case 43:if(E={config:new ls(n),design:v,option:new ds(l),user:m,designProject:g,launcherOption:h},fe.a.setDesignIdx(i?btoa(String(i.idx)).replace(/=/g,""):null),!m.isLogin()){e.next=76;break}if(i){e.next=59;break}if(!(T=Number(A.RequestUtil.get(A.RequestParamKey.TEAM_IDX)))){e.next=53;break}return e.next=51,Ti.a.changeTeam(T);case 51:e.next=55;break;case 53:return e.next=55,Ti.a.setDefaultTeam();case 55:(y=A.RequestUtil.get(A.RequestParamKey.TEAM_SCOPE))?Ti.a.changeTeamScope(y):Ti.a.setDefaultScope(),e.next=76;break;case 59:if(s){e.next=69;break}return e.next=62,Ti.a.getTeamDesign(i.idx);case 62:if(!(I=e.sent)){e.next=67;break}return e.next=66,Ti.a.changeTeam(I.teamIdx);case 66:Ti.a.changeTeamScope(I.scope);case 67:e.next=76;break;case 69:return e.next=71,Ti.a.getTeamDesignProject(s.idx);case 71:if(!(L=e.sent)){e.next=76;break}return e.next=75,Ti.a.changeTeam(L.teamIdx);case 75:Ti.a.changeTeamScope(L.scope);case 76:return e.next=78,ar.init(E);case 78:return o.a.STOP_WATCH.split("unicorn initialized."),vi.a.loadCookieConfig(),e.next=82,m.doLoginAfter();case 82:return o.a.STOP_WATCH.split("doLoginAfter."),e.prev=83,e.next=86,r();case 86:e.next=91;break;case 88:e.prev=88,e.t1=e.catch(83),console.log(e.t1);case 91:return o.a.STOP_WATCH.split("static resources loaded."),e.next=94,ar.setReady();case 94:h.isLauncherUpdateMode()?o.a.dispatch(new Ce.d):o.a.dispatch(new Ce.e),o.a.STOP_WATCH.split("unicorn ready."),ms.open(),Ps.showPopupsAfterLoading(),k=ln.a.unicornLoaderOption,Ps.showAutoSaveInfoPusher(k.showAutoSaveInfoPusher),Ps.showUpdateButtonInfoPusher(k.showUpdateButtonInfoPusher),e.next=106;break;case 103:e.prev=103,e.t2=e.catch(14),e.t2 instanceof ft.UnicornError?te.a.sendEvent("에디터 오류보고",e.t2.gaData||"-",e.t2.message):console.log("init error",e.t2);case 106:return window.s=o.a.instance,window.store=o.a.instance,window.ResourceManager=mr.b,window.loadedTime=(new Date).getTime(),window.miriLogin=function(e){!0===e&&te.a.moveVirtualPage(te.c.SIGNUP_COMPLETE),o.a.dispatch(new f.d(function(){Wi.a.instance.close()}))},e.next=114,Object(bs.a)();case 114:o.a.instance.user.isAdmin()&&(_=o.a.STOP_WATCH.split("complete.").report(),window.location.search.indexOf("skaksTmsmsdlatlvkfkalxj")>=0&&setTimeout(function(){return alert(_)},0)),o.a.dispatch(new Ms);case 116:case"end":return e.stop()}},e,null,[[14,103],[83,88]])}))).apply(this,arguments)}function r(){return l.apply(this,arguments)}function l(){return(l=s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,t){Promise.all([Es.a.init(),ws.a.init()]).then(function(){return gs.a.instance.loadDefault().then(function(){return e()}).catch(function(e){return t(e)})}).catch(function(e){return t(e)})}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}(Rs||(Rs={})).init=function(){return t.apply(this,arguments)}}()},366:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(35),a=n.n(i),r=function e(t,n,i){a()(this,e),this.type=t,this.title=n,this.contents=i}},367:function(e,t,n){"use strict";n.d(t,"a",function(){return E});var i=n(35),a=n.n(i),r=n(39),s=n.n(r),o=n(38),l=n.n(o),c=n(44),u=n.n(c),d=n(40),p=n.n(d),h=n(37),m=n.n(h),g=n(45),v=n(42),f=n(56),E=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v.a.instance.activeItems.slice();return a()(this,t),e=s()(this,l()(t).call(this)),m()(u()(e),"isActionGroupEquals",function(e){return!1}),m()(u()(e),"changeDesign",function(){return!0}),m()(u()(e),"movePositions",[]),m()(u()(e),"doSaveQueue",!0),m()(u()(e),"commitAction",function(t,n,i){if(e.doSaveQueue){var a=t.pages[e.pageIdx];e.pageId=a.pageId,e.pageWidth=a.sheetSize.width,e.pageHeight=a.sheetSize.height,e.movePositions=[],e.commitAlignAction(e.selectedItems,i.handler.getLTRB())}}),m()(u()(e),"rollbackAction",function(t,n,i){if(e.movePositions.length===e.selectedItems.length){for(var a=0;a<e.movePositions.length;a++)e.selectedItems[a].move(-e.movePositions[a].x,-e.movePositions[a].y);var r=t.pages[n.renderPageIdx];e.pageId===r.pageId&&f.a.selectItems(e.selectedItems)}}),m()(u()(e),"recycle",function(){e.movePositions=null,e.selectedItems=null}),e.selectedItems=n,e.pageIdx=v.a.instance.renderPageIdx,e}return p()(t,e),t}(g.b)},370:function(e,t,n){"use strict";n.d(t,"c",function(){return y}),n.d(t,"d",function(){return I}),n.d(t,"f",function(){return L}),n.d(t,"e",function(){return k}),n.d(t,"a",function(){return _}),n.d(t,"b",function(){return w});var i=n(35),a=n.n(i),r=n(39),s=n.n(r),o=n(38),l=n.n(o),c=n(44),u=n.n(c),d=n(40),p=n.n(d),h=n(37),m=n.n(h),g=n(45),v=n(42),f=n(126),E=n(140),T=n(51),y=function(e){function t(e,n){var i;return a()(this,t),i=s()(this,l()(t).call(this)),m()(u()(i),"actionType",g.a.GRID_INSERT_COL_LEFT),m()(u()(i),"commitAction",function(e,t,n){i.gridItem.sizeTool.insertColWithStyle(i.colNum,i.colNum),i.gridItem.sizeTool.synchronizeCells(),i.gridItem.adjustSize(),i.gridItem.unselectAllCell(),n.renderCanvas(e,t,[i.gridItem]),n.renderHandler(e,t)}),m()(u()(i),"rollbackAction",function(e,t,n){for(var a=0;a<i.gridItem.row;a++){var r=i.gridItem.cells[a][i.colNum],s=i.gridItem.cells[a][i.colNum+1];s.assignCellStyle(r),s.assignFontStyle(r),s.assignBorderStyle(r)}i.gridItem.sizeTool.deleteCol(i.colNum),i.gridItem.sizeTool.synchronizeCells(),i.gridItem.adjustSize(),i.gridItem.unselectAllCell(),n.renderCanvas(e,t,[i.gridItem]),n.renderHandler(e,t)}),m()(u()(i),"recycle",function(){i.gridItem=null}),i.gridItem=e,i.colNum=n,i}return p()(t,e),t}(E.a),I=function(e){function t(e,n){var i;return a()(this,t),i=s()(this,l()(t).call(this)),m()(u()(i),"actionType",g.a.GRID_INSERT_COL_RIGHT),m()(u()(i),"commitAction",function(e,t,n){i.gridItem.sizeTool.insertColWithStyle(i.colNum-1,i.colNum),i.gridItem.sizeTool.synchronizeCells(),i.gridItem.adjustSize(),i.gridItem.unselectAllCell(),n.renderCanvas(e,t,[i.gridItem]),n.renderHandler(e,t)}),m()(u()(i),"rollbackAction",function(e,t,n){for(var a=0;a<i.gridItem.row;a++){var r=i.gridItem.cells[a][i.colNum],s=i.gridItem.cells[a][i.colNum-1];s.assignCellStyle(r),s.assignFontStyle(r),s.assignBorderStyle(r)}i.gridItem.sizeTool.deleteCol(i.colNum),i.gridItem.sizeTool.synchronizeCells(),i.gridItem.adjustSize(),i.gridItem.unselectAllCell(),n.renderCanvas(e,t,[i.gridItem]),n.renderHandler(e,t)}),m()(u()(i),"recycle",function(){i.gridItem=null}),i.gridItem=e,i.colNum=n,i}return p()(t,e),t}(E.a),L=function(e){function t(e,n){var i;return a()(this,t),i=s()(this,l()(t).call(this)),m()(u()(i),"actionType",g.a.GRID_INSERT_ROW_TOP),m()(u()(i),"commitAction",function(e,t,n){i.gridItem.sizeTool.insertRowWithStyle(i.rowNum,i.rowNum),i.gridItem.sizeTool.synchronizeCells(),i.gridItem.adjustSize(),i.gridItem.unselectAllCell(),n.renderCanvas(e,t,[i.gridItem]),n.renderHandler(e,t)}),m()(u()(i),"rollbackAction",function(e,t,n){for(var a=0;a<i.gridItem.col;a++){var r=i.gridItem.cells[i.rowNum][a],s=i.gridItem.cells[i.rowNum+1][a];s.assignCellStyle(r),s.assignFontStyle(r),s.assignBorderStyle(r)}i.gridItem.sizeTool.deleteRow(i.rowNum),i.gridItem.sizeTool.synchronizeCells(),i.gridItem.adjustSize(),i.gridItem.unselectAllCell(),n.renderCanvas(e,t,[i.gridItem]),n.renderHandler(e,t)}),m()(u()(i),"recycle",function(){i.gridItem=null}),i.gridItem=e,i.rowNum=n,i}return p()(t,e),t}(E.a),k=function(e){function t(e,n){var i;return a()(this,t),i=s()(this,l()(t).call(this)),m()(u()(i),"actionType",g.a.GRID_INSERT_ROW_BOTTOM),m()(u()(i),"commitAction",function(e,t,n){i.gridItem.sizeTool.insertRowWithStyle(i.rowNum-1,i.rowNum),i.gridItem.sizeTool.synchronizeCells(),i.gridItem.adjustSize(),i.gridItem.unselectAllCell(),n.renderCanvas(e,t,[i.gridItem]),n.renderHandler(e,t)}),m()(u()(i),"rollbackAction",function(e,t,n){for(var a=0;a<i.gridItem.col;a++){var r=i.gridItem.cells[i.rowNum][a],s=i.gridItem.cells[i.rowNum-1][a];s.assignCellStyle(r),s.assignFontStyle(r),s.assignBorderStyle(r)}i.gridItem.sizeTool.deleteRow(i.rowNum),i.gridItem.sizeTool.synchronizeCells(),i.gridItem.adjustSize(),i.gridItem.unselectAllCell(),n.renderCanvas(e,t,[i.gridItem]),n.renderHandler(e,t)}),m()(u()(i),"recycle",function(){i.gridItem=null}),i.gridItem=e,i.rowNum=n,i}return p()(t,e),t}(E.a),_=function(e){function t(e){var n;a()(this,t),n=s()(this,l()(t).call(this)),m()(u()(n),"deleteCells",[]),m()(u()(n),"deleteCols",[]),m()(u()(n),"deleteColNum",[]),m()(u()(n),"actionType",g.a.GRID_DELETE_COL),m()(u()(n),"commitAction",function(e,t,i){if(n.isDeleteItem)n.gridItem.unselectAllCell(),v.a.dispatch(new f.a([n.gridItem]));else if(n.deleteColNum.length>0){var a=n.deleteColNum.slice().reverse(),r=!0,s=!1,o=void 0;try{for(var l,c=a[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var u=l.value,d=[],p=!0,h=!1,m=void 0;try{for(var g,E=n.gridItem.cells[Symbol.iterator]();!(p=(g=E.next()).done);p=!0){var y=g.value;d.push(y[u])}}catch(e){h=!0,m=e}finally{try{p||null==E.return||E.return()}finally{if(h)throw m}}n.deleteCells.push(d),n.deleteCols.push(n.gridItem.cols[u]),n.gridItem.sizeTool.deleteCol(u)}}catch(e){s=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(s)throw o}}var I=[],L=n.deleteColNum[0];if(n.gridItem.col>L)for(var k=0;k<n.gridItem.rows.length;k++)I.push({row:k,col:L});else for(var _=0;_<n.gridItem.rows.length;_++)I.push({row:_,col:n.gridItem.col-1});n.gridItem.sizeTool.synchronizeCells(),n.gridItem.selectCells(I),n.gridItem.adjustSize(),n.gridItem.setStatus(T.d.CHANGE),i.renderCanvas(e,t,[n.gridItem]),i.renderHandler(e,t)}}),m()(u()(n),"rollbackAction",function(e,t,i){var a=!0,r=!1,s=void 0;try{for(var o,l=n.deleteColNum[Symbol.iterator]();!(a=(o=l.next()).done);a=!0){var c=o.value;n.gridItem.sizeTool.insertColWithCol(n.deleteCols.pop(),n.deleteCells.pop(),c)}}catch(e){r=!0,s=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw s}}n.gridItem.sizeTool.synchronizeCells(),n.gridItem.adjustSize(),n.gridItem.setStatus(T.d.CHANGE),i.renderCanvas(e,t,[n.gridItem]),i.renderHandler(e,t)}),m()(u()(n),"recycle",function(){n.gridItem=null,n.deleteCellsPos=null,n.deleteCells=[],n.deleteCols=[]}),n.gridItem=e,n.deleteCellsPos=e.selectedCells;var i=!0,r=!1,o=void 0;try{for(var c,d=n.deleteCellsPos[Symbol.iterator]();!(i=(c=d.next()).done);i=!0)for(var p=c.value,h=n.gridItem.cells[p.row][p.col].childCellsPos,E=h.startPos.col;E<=h.endPos.col;E++)n.deleteColNum.indexOf(E)<0&&n.deleteColNum.push(E)}catch(e){r=!0,o=e}finally{try{i||null==d.return||d.return()}finally{if(r)throw o}}return n.deleteColNum.sort(function(e,t){return e>t?1:e<t?-1:0}),n.deleteColNum.length===n.gridItem.col&&(n.isDeleteItem=!0,n.doSaveQueue=!1),n.gridItem.unselectAllCell(),n}return p()(t,e),t}(E.a),w=function(e){function t(e){var n;a()(this,t),n=s()(this,l()(t).call(this)),m()(u()(n),"deleteCells",[]),m()(u()(n),"deleteRows",[]),m()(u()(n),"deleteRowNum",[]),m()(u()(n),"actionType",g.a.GRID_DELETE_ROW),m()(u()(n),"commitAction",function(e,t,i){if(n.isDeleteItem)n.gridItem.unselectAllCell(),v.a.dispatch(new f.a([n.gridItem]));else if(n.deleteRowNum.length>0){var a=n.deleteRowNum.slice().reverse(),r=!0,s=!1,o=void 0;try{for(var l,c=a[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var u=l.value;n.deleteCells.push(n.gridItem.cells[u].concat()),n.deleteRows.push(n.gridItem.rows[u]),n.gridItem.sizeTool.deleteRow(u)}}catch(e){s=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(s)throw o}}var d=[],p=n.deleteRowNum[0];if(n.gridItem.row>p)for(var h=0;h<n.gridItem.cols.length;h++)d.push({row:p,col:h});else for(var m=0;m<n.gridItem.cols.length;m++)d.push({row:n.gridItem.row-1,col:m});n.gridItem.sizeTool.synchronizeCells(),n.gridItem.selectCells(d),n.gridItem.adjustSize(),n.gridItem.setStatus(T.d.CHANGE),i.renderCanvas(e,t,[n.gridItem]),i.renderHandler(e,t)}}),m()(u()(n),"rollbackAction",function(e,t,i){var a=!0,r=!1,s=void 0;try{for(var o,l=n.deleteRowNum[Symbol.iterator]();!(a=(o=l.next()).done);a=!0){var c=o.value;n.gridItem.sizeTool.insertRowWithRow(n.deleteRows.pop(),n.deleteCells.pop(),c)}}catch(e){r=!0,s=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw s}}n.gridItem.sizeTool.synchronizeCells(),n.gridItem.adjustSize(),n.gridItem.setStatus(T.d.CHANGE),i.renderCanvas(e,t,[n.gridItem]),i.renderHandler(e,t)}),m()(u()(n),"recycle",function(){n.gridItem=null,n.deleteCellsPos=null,n.deleteCells=null,n.deleteRows=null}),n.gridItem=e,n.deleteCellsPos=e.selectedCells;var i=!0,r=!1,o=void 0;try{for(var c,d=n.deleteCellsPos[Symbol.iterator]();!(i=(c=d.next()).done);i=!0)for(var p=c.value,h=n.gridItem.cells[p.row][p.col].childCellsPos,E=h.startPos.row;E<=h.endPos.row;E++)n.deleteRowNum.indexOf(E)<0&&n.deleteRowNum.push(E)}catch(e){r=!0,o=e}finally{try{i||null==d.return||d.return()}finally{if(r)throw o}}return n.deleteRowNum.sort(function(e,t){return e>t?1:e<t?-1:0}),n.deleteRowNum.length===n.gridItem.row&&(n.isDeleteItem=!0,n.doSaveQueue=!1),n.gridItem.unselectAllCell(),n}return p()(t,e),t}(E.a)},477:function(e,t,n){"use strict";n.d(t,"c",function(){return y}),n.d(t,"e",function(){return I}),n.d(t,"f",function(){return L}),n.d(t,"a",function(){return k}),n.d(t,"b",function(){return _}),n.d(t,"d",function(){return w});var i=n(44),a=n.n(i),r=n(37),s=n.n(r),o=n(35),l=n.n(o),c=n(39),u=n.n(c),d=n(38),p=n.n(d),h=n(40),m=n.n(h),g=n(367),v=n(42),f=n(45),E=n(54),T=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v.a.instance.activeItems.slice();if(l()(this,t),(e=u()(this,p()(t).call(this))).selectedItems=n,1===n.length||E.b.isSameGroup(n)){if(1===n.length){var i=E.b.getRootGroup(n[0].groupId);i&&i.getAllSingleMembers().forEach(function(e){n.indexOf(e)<0&&n.push(e)})}}else e.doSaveQueue=!1;return e}return m()(t,e),t}(g.a),y=function(e){function t(){var e,n;l()(this,t);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return n=u()(this,(e=p()(t)).call.apply(e,[this].concat(r))),s()(a()(n),"actionType",f.a.ALIGN_LEFT),s()(a()(n),"commitAlignAction",function(e,t){var i=Number.MAX_VALUE,a=!0,r=!1,s=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done);a=!0){var c=o.value.getLTRBCoordinate(!0).left;i=i<c?i:c}}catch(e){r=!0,s=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw s}}var u=-i,d=!0,p=!1,h=void 0;try{for(var m,g=e[Symbol.iterator]();!(d=(m=g.next()).done);d=!0){var v=m.value;n.movePositions.push({x:u,y:0}),v.move(u,0)}}catch(e){p=!0,h=e}finally{try{d||null==g.return||g.return()}finally{if(p)throw h}}}),n}return m()(t,e),t}(T),I=function(e){function t(){var e,n;l()(this,t);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return n=u()(this,(e=p()(t)).call.apply(e,[this].concat(r))),s()(a()(n),"actionType",f.a.ALIGN_RIGHT),s()(a()(n),"commitAlignAction",function(e,t){var i=Number.MIN_VALUE,a=!0,r=!1,s=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done);a=!0){var c=o.value.getLTRBCoordinate(!0).right;i=i>c?i:c}}catch(e){r=!0,s=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw s}}var u=n.pageWidth-i,d=!0,p=!1,h=void 0;try{for(var m,g=e[Symbol.iterator]();!(d=(m=g.next()).done);d=!0){var v=m.value;n.movePositions.push({x:u,y:0}),v.move(u,0)}}catch(e){p=!0,h=e}finally{try{d||null==g.return||g.return()}finally{if(p)throw h}}}),n}return m()(t,e),t}(T),L=function(e){function t(){var e,n;l()(this,t);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return n=u()(this,(e=p()(t)).call.apply(e,[this].concat(r))),s()(a()(n),"actionType",f.a.ALIGN_TOP),s()(a()(n),"commitAlignAction",function(e,t){var i=Number.MAX_VALUE,a=!0,r=!1,s=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done);a=!0){var c=o.value.getLTRBCoordinate(!0).top;i=i<c?i:c}}catch(e){r=!0,s=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw s}}var u=-i,d=!0,p=!1,h=void 0;try{for(var m,g=e[Symbol.iterator]();!(d=(m=g.next()).done);d=!0){var v=m.value;n.movePositions.push({x:0,y:u}),v.move(0,u)}}catch(e){p=!0,h=e}finally{try{d||null==g.return||g.return()}finally{if(p)throw h}}}),n}return m()(t,e),t}(T),k=function(e){function t(){var e,n;l()(this,t);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return n=u()(this,(e=p()(t)).call.apply(e,[this].concat(r))),s()(a()(n),"actionType",f.a.ALIGN_BOTTOM),s()(a()(n),"commitAlignAction",function(e,t){var i=Number.MIN_VALUE,a=!0,r=!1,s=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done);a=!0){var c=o.value.getLTRBCoordinate(!0).bottom;i=i>c?i:c}}catch(e){r=!0,s=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw s}}var u=n.pageHeight-i,d=!0,p=!1,h=void 0;try{for(var m,g=e[Symbol.iterator]();!(d=(m=g.next()).done);d=!0){var v=m.value;n.movePositions.push({x:0,y:u}),v.move(0,u)}}catch(e){p=!0,h=e}finally{try{d||null==g.return||g.return()}finally{if(p)throw h}}}),n}return m()(t,e),t}(T),_=function(e){function t(){var e,n;l()(this,t);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return n=u()(this,(e=p()(t)).call.apply(e,[this].concat(r))),s()(a()(n),"actionType",f.a.ALIGN_CENTER),s()(a()(n),"commitAlignAction",function(e){var t=Number.MAX_VALUE,i=Number.MIN_VALUE,a=!0,r=!1,s=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done);a=!0){var c=o.value.getLTRBCoordinate(!0),u=c.left;t=t<u?t:u;var d=c.right;i=i>d?i:d}}catch(e){r=!0,s=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw s}}var p=(t+i)/2,h=n.pageWidth/2-p,m=!0,g=!1,v=void 0;try{for(var f,E=e[Symbol.iterator]();!(m=(f=E.next()).done);m=!0){var T=f.value;n.movePositions.push({x:h,y:0}),T.move(h,0)}}catch(e){g=!0,v=e}finally{try{m||null==E.return||E.return()}finally{if(g)throw v}}}),n}return m()(t,e),t}(T),w=function(e){function t(){var e,n;l()(this,t);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return n=u()(this,(e=p()(t)).call.apply(e,[this].concat(r))),s()(a()(n),"actionType",f.a.ALIGN_MIDDLE),s()(a()(n),"commitAlignAction",function(e){var t=Number.MAX_VALUE,i=Number.MIN_VALUE,a=!0,r=!1,s=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done);a=!0){var c=o.value.getLTRBCoordinate(!0),u=c.top;t=t<u?t:u;var d=c.bottom;i=i>d?i:d}}catch(e){r=!0,s=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw s}}var p=(t+i)/2,h=n.pageHeight/2-p,m=!0,g=!1,v=void 0;try{for(var f,E=e[Symbol.iterator]();!(m=(f=E.next()).done);m=!0){var T=f.value;n.movePositions.push({x:0,y:h}),T.move(0,h)}}catch(e){g=!0,v=e}finally{try{m||null==E.return||E.return()}finally{if(g)throw v}}}),n}return m()(t,e),t}(T)},478:function(e,t,n){"use strict";n.d(t,"a",function(){return S});var i=n(0),a=n.n(i),r=n(1),s=n.n(r),o=n(35),l=n.n(o),c=n(36),u=n.n(c),d=n(39),p=n.n(d),h=n(38),m=n.n(h),g=n(44),v=n.n(g),f=n(40),E=n.n(f),T=n(37),y=n.n(T),I=n(45),L=n(50),k=n(118),_=n(56),w=n(59),b=n(54),S=function(e){function t(e){var n;return l()(this,t),n=p()(this,m()(t).call(this)),y()(v()(n),"actionType",I.a.EXPORT_PHOTO),y()(v()(n),"changeDesign",function(){return!0}),y()(v()(n),"renderAuto",!1),y()(v()(n),"commitAction",function(){var e=s()(a.a.mark(function e(i,r,s){var o,l;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((o=n.item)&&o.isBackground&&!b.b.isInGroup(o)){e.next=3;break}return e.abrupt("return");case 3:if(l=n.backupPage?n.backupPage:n.backupPage=k.a.getItemIncludedPage(i.pages,o)){e.next=6;break}return e.abrupt("return");case 6:return n.doExport(l.sheetSize,l.editScale),t.changeItemOrderToLast(l,o),_.a.selectItem(o),n.backupBgColor=l.background.color,r.pageController.getPageRenderer(l).backgroundRenderer.initDefaultColor(),e.next=14,s.renderAuto(i,r);case 14:s.renderHandler(i,r),s.renderLayerThumb([o]);case 16:case"end":return e.stop()}},e)}));return function(t,n,i){return e.apply(this,arguments)}}()),y()(v()(n),"rollbackAction",function(){var e=s()(a.a.mark(function e(i,r,s){var o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(o=n.item).setLTRBCoordinate(n.backupLTRB),o.itemPosition=n.backupImgLTRB.clone(),o.orgType=n.backupOriginType,o.backgroundState=n.backupBackgroundState,o.photoCrop.isCropped=n.backupIsCropped,t.changeItemOrderToFirst(n.backupPage,o),o.props.updateRevision(),_.a.selectItem(o),r.pageController.getPageRenderer(n.backupPage).backgroundRenderer.updateColor(n.backupBgColor),e.next=13,s.renderAuto(i,r);case 13:s.renderHandler(i,r),s.renderLayerThumb([o]);case 15:case"end":return e.stop()}},e)}));return function(t,n,i){return e.apply(this,arguments)}}()),y()(v()(n),"recycle",function(){n.item=null,n.backupLTRB=null,n.backupImgLTRB=null,n.backupPage=null}),n.item=e,n.item&&(n.backupLTRB=e.getLTRBCoordinate(),n.backupImgLTRB=e.itemPosition.clone(),n.backupOriginType=e.orgType,n.backupBackgroundState=e.backgroundState,n.backupIsCropped=e.photoCrop.isCropped),n}return E()(t,e),u()(t,[{key:"doExport",value:function(e,t){var n=this.item,i=w.b.getData(n.props.getPhotoKey()),a={width:i.width,height:i.height},r=k.a.getOffsetBaseRect(!1,e,t,0,0,a.width,a.height);n.setLTRBCoordinate(r),n.itemPosition=r.clone(),n.disableCrop(),n.backgroundState=L.a.BACKGROUND_TO_PHOTO,n.props.updateRevision()}}],[{key:"changeItemOrderToLast",value:function(e,t){var n=e.background.backgroundItem?e.background.backgroundItem:t;e.removeItem(n),e.addItem(t)}},{key:"changeItemOrderToFirst",value:function(e,t){e.removeItem(t);var n=e.background.backgroundItem?e.background.backgroundItem:t;e.addItem(n,0)}}]),t}(I.b)},479:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n(35),a=n.n(i),r=n(36),s=n.n(r),o=n(136),l=function(){function e(){a()(this,e)}return s()(e,null,[{key:"canChangeOrderToForward",value:function(e,t){return this.canChangeOrder(e,t,function(e,t,n,i){return e!==t&&n<i})}},{key:"canChangeOrderToBackward",value:function(e,t){return this.canChangeOrder(e,t,function(e,t,n,i){return e!==t&&n>i&&!t.isOnlyOneItem()})}},{key:"canChangeOrder",value:function(e,t,n){var i=this;if(1===t.length)return!1;var a=o.a.getAllSingleItems(e),r=o.a.getAllSingleItems(t);return a.some(function(e){var t=r.indexOf(e),s=r.filter(function(i,a){return n(e,i,t,a)});return i.existNotIncludeTargetItems(s,a)})}},{key:"existNotIncludeTargetItems",value:function(e,t){return e.filter(function(e){return!t.includes(e)}).length>0}}]),e}()},480:function(e,t,n){"use strict";n.d(t,"a",function(){return y});var i=n(35),a=n.n(i),r=n(36),s=n.n(r),o=n(39),l=n.n(o),c=n(38),u=n.n(c),d=n(44),p=n.n(d),h=n(40),m=n.n(h),g=n(37),v=n.n(g),f=n(63),E=n(41),T=n(72),y=function(e){function t(e,n,i){var r;return a()(this,t),r=l()(this,u()(t).call(this)),v()(p()(r),"tooltipElems",[]),r.elemId=e,r.itemList=n,r.listener=i,r.contents=r.makeElement(),r.makeBtnClose=!1,r.addEventListener(),r}return m()(t,e),s()(t,[{key:"makeElement",value:function(){var e=this,n=document.createElement("div");return n.className=E.a.CONTENTS,this.itemList.forEach(function(i){var a=document.createElement("div");a.className=E.a.COLOR_CHIP,$(a).data(t.VALUE_KEY,i.value),a.style.background="linear-gradient(".concat(90-i.angle,"deg,").concat(i.first_color,",").concat(i.second_color,")"),n.appendChild(a);var r=T.a.createTooltip(a,T.b.T,{description:i.title});e.tooltipElems.push(r)}),n}},{key:"addEventListener",value:function(){var e=this;$(this.contents).on("click",".".concat(E.a.COLOR_CHIP),function(n){e.listener($(n.currentTarget).data(t.VALUE_KEY)),e.tooltipElems.forEach(function(e){return e.hide()})})}},{key:"getContents",value:function(){return this.contents}},{key:"getId",value:function(){return this.elemId}},{key:"updateUI",value:function(){}}]),t}(f.a);v()(y,"VALUE_KEY","value_key")},482:function(e,t,n){"use strict";n.d(t,"b",function(){return f}),n.d(t,"a",function(){return E});var i=n(35),a=n.n(i),r=n(39),s=n.n(r),o=n(38),l=n.n(o),c=n(44),u=n.n(c),d=n(40),p=n.n(d),h=n(37),m=n.n(h),g=n(45),v=n(140),f=function(e){function t(e){var n;a()(this,t),n=s()(this,l()(t).call(this)),m()(u()(n),"widths",[]),m()(u()(n),"cols",[]),m()(u()(n),"actionType",g.a.GRID_CELLS_WIDTH_EQUAL),m()(u()(n),"commitAction",function(e,t,i){if(n.doSaveQueue){var a=0,r=!0,s=!1,o=void 0;try{for(var l,c=n.cols[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var u=l.value,d=n.gridItem.cols[u].thickness;n.widths.push(d),a+=d}}catch(e){s=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(s)throw o}}var p=a/n.cols.length,h=!0,m=!1,g=void 0;try{for(var v,f=n.gridItem.cols[Symbol.iterator]();!(h=(v=f.next()).done);h=!0){var E=v.value;p=Math.max(p,E.minThickness)}}catch(e){m=!0,g=e}finally{try{h||null==f.return||f.return()}finally{if(m)throw g}}var T=!0,y=!1,I=void 0;try{for(var L,k=n.cols[Symbol.iterator]();!(T=(L=k.next()).done);T=!0){var _=L.value;n.gridItem.cols[_].thickness=p}}catch(e){y=!0,I=e}finally{try{T||null==k.return||k.return()}finally{if(y)throw I}}n.gridItem.adjustSize(),i.renderCanvas(e,t,[n.gridItem]),i.renderHandler(e,t)}}),m()(u()(n),"rollbackAction",function(e,t,i){for(var a=0;a<n.cols.length;a++){var r=n.cols[a],s=n.widths[a];n.gridItem.cols[r].thickness=s}n.gridItem.adjustSize(),i.renderCanvas(e,t,[n.gridItem]),i.renderHandler(e,t)}),m()(u()(n),"recycle",function(){n.gridItem=null,n.widths=[]}),n.gridItem=e;var i=e.selectedCells;if(0===i.length)for(var r=0;r<e.cols.length;r++)n.cols.push(r);else{var o=!0,c=!1,d=void 0;try{for(var p,h=i[Symbol.iterator]();!(o=(p=h.next()).done);o=!0){var v=p.value;n.cols.indexOf(v.col)<0&&n.cols.push(v.col)}}catch(e){c=!0,d=e}finally{try{o||null==h.return||h.return()}finally{if(c)throw d}}}return n}return p()(t,e),t}(v.a),E=function(e){function t(e){var n;a()(this,t),n=s()(this,l()(t).call(this)),m()(u()(n),"rows",[]),m()(u()(n),"heights",[]),m()(u()(n),"actionType",g.a.GRID_CELLS_HEIGHT_EQUAL),m()(u()(n),"commitAction",function(e,t,i){if(n.doSaveQueue){var a=0,r=!0,s=!1,o=void 0;try{for(var l,c=n.rows[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var u=l.value,d=n.gridItem.rows[u].thickness;n.heights.push(d),a+=d}}catch(e){s=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(s)throw o}}var p=a/n.rows.length,h=!0,m=!1,g=void 0;try{for(var v,f=n.gridItem.rows[Symbol.iterator]();!(h=(v=f.next()).done);h=!0){var E=v.value;p=Math.max(p,E.minThickness)}}catch(e){m=!0,g=e}finally{try{h||null==f.return||f.return()}finally{if(m)throw g}}var T=!0,y=!1,I=void 0;try{for(var L,k=n.rows[Symbol.iterator]();!(T=(L=k.next()).done);T=!0){var _=L.value;n.gridItem.rows[_].thickness=p}}catch(e){y=!0,I=e}finally{try{T||null==k.return||k.return()}finally{if(y)throw I}}n.gridItem.adjustSize(),i.renderCanvas(e,t,[n.gridItem]),i.renderHandler(e,t)}}),m()(u()(n),"rollbackAction",function(e,t,i){for(var a=0;a<n.rows.length;a++){var r=n.rows[a],s=n.heights[a];n.gridItem.rows[r].thickness=s}n.gridItem.adjustSize(),i.renderCanvas(e,t,[n.gridItem]),i.renderHandler(e,t)}),m()(u()(n),"recycle",function(){n.gridItem=null,n.heights=[]}),n.gridItem=e;var i=e.selectedCells;if(0===i.length)for(var r=0;r<e.rows.length;r++)n.rows.push(r);else{var o=!0,c=!1,d=void 0;try{for(var p,h=i[Symbol.iterator]();!(o=(p=h.next()).done);o=!0){var v=p.value;n.rows.indexOf(v.row)<0&&n.rows.push(v.row)}}catch(e){c=!0,d=e}finally{try{o||null==h.return||h.return()}finally{if(c)throw d}}}return n}return p()(t,e),t}(v.a)},483:function(e,t,n){"use strict";n.d(t,"a",function(){return T}),n.d(t,"b",function(){return y});var i=n(35),a=n.n(i),r=n(39),s=n.n(r),o=n(38),l=n.n(o),c=n(44),u=n.n(c),d=n(40),p=n.n(d),h=n(37),m=n.n(h),g=n(116),v=n(45),f=n(140),E=n(51),T=function(e){function t(e){var n;a()(this,t),n=s()(this,l()(t).call(this)),m()(u()(n),"originTexts",[]),m()(u()(n),"mergedCellsPoses",[]),m()(u()(n),"actionType",v.a.GRID_MERGE_CELLS),m()(u()(n),"commitAction",function(e,t,i){n.doSaveQueue&&(n.gridItem.mergeTool.mergeCells(n.cellsPos),n.gridItem.adjustColThickness(),n.gridItem.adjustRowThickness(),n.gridItem.adjustSize(),n.gridItem.setStatus(E.d.CHANGE),i.renderCanvas(e,t,[n.gridItem]),i.renderHandler(e,t),i.renderItemTools(e,t))}),m()(u()(n),"rollbackAction",function(e,t,i){var a=0,r=n.gridItem.positionTool.getRectCells(n.cellsPos),s=!0,o=!1,l=void 0;try{for(var c,u=r[Symbol.iterator]();!(s=(c=u.next()).done);s=!0){var d=c.value,p=!0,h=!1,m=void 0;try{for(var g,v=d[Symbol.iterator]();!(p=(g=v.next()).done);p=!0){g.value.textProps.setText(n.originTexts[a]),a++}}catch(e){h=!0,m=e}finally{try{p||null==v.return||v.return()}finally{if(h)throw m}}}}catch(e){o=!0,l=e}finally{try{s||null==u.return||u.return()}finally{if(o)throw l}}n.gridItem.mergeTool.splitCells(n.cellsPos);var f=!0,T=!1,y=void 0;try{for(var I,L=n.mergedCellsPoses[Symbol.iterator]();!(f=(I=L.next()).done);f=!0){var k=I.value;n.gridItem.mergeTool.mergeCells(k)}}catch(e){T=!0,y=e}finally{try{f||null==L.return||L.return()}finally{if(T)throw y}}n.gridItem.cols.forEach(function(e,t){e.thickness=n.colThickness[t]}),n.gridItem.rows.forEach(function(e,t){e.thickness=n.rowThickness[t]}),n.gridItem.adjustSize(),n.gridItem.setStatus(E.d.CHANGE),i.renderCanvas(e,t,[n.gridItem]),i.renderHandler(e,t),i.renderItemTools(e,t)}),m()(u()(n),"recycle",function(){n.gridItem=null,n.cellsPos=null,n.originTexts=[],n.mergedCellsPoses=[],n.colThickness=[],n.rowThickness=[]}),n.gridItem=e;var i=n.gridItem.selectedCells,r=n.gridItem.positionTool.isRectSelectedCells(i);if(n.doSaveQueue=r,r){n.cellsPos=n.gridItem.positionTool.arrayOfCellPosToCellsPos(i);var o=n.gridItem.positionTool.getRectCells(n.cellsPos),c=!0,d=!1,p=void 0;try{for(var h,f=o[Symbol.iterator]();!(c=(h=f.next()).done);c=!0){var T=h.value,y=!0,I=!1,L=void 0;try{for(var k,_=T[Symbol.iterator]();!(y=(k=_.next()).done);y=!0){var w=k.value;n.originTexts.push(w.innerText),w.cellType===g.c.MASTER&&n.mergedCellsPoses.push(w.childCellsPos)}}catch(e){I=!0,L=e}finally{try{y||null==_.return||_.return()}finally{if(I)throw L}}}}catch(e){d=!0,p=e}finally{try{c||null==f.return||f.return()}finally{if(d)throw p}}n.rowThickness=[],n.colThickness=[];var b=!0,S=!1,O=void 0;try{for(var C,P=e.rows[Symbol.iterator]();!(b=(C=P.next()).done);b=!0){var D=C.value;n.rowThickness.push(D.thickness)}}catch(e){S=!0,O=e}finally{try{b||null==P.return||P.return()}finally{if(S)throw O}}var A=!0,R=!1,M=void 0;try{for(var N,x=e.cols[Symbol.iterator]();!(A=(N=x.next()).done);A=!0){var B=N.value;n.colThickness.push(B.thickness)}}catch(e){R=!0,M=e}finally{try{A||null==x.return||x.return()}finally{if(R)throw M}}}return n}return p()(t,e),t}(f.a),y=function(e){function t(e){var n;a()(this,t),n=s()(this,l()(t).call(this)),m()(u()(n),"mergedCellsPoses",[]),m()(u()(n),"actionType",v.a.GRID_SPLIT_CELLS),m()(u()(n),"commitAction",function(e,t,i){if(n.doSaveQueue){var a=!0,r=!1,s=void 0;try{for(var o,l=n.mergedCellsPoses[Symbol.iterator]();!(a=(o=l.next()).done);a=!0){var c=o.value;n.gridItem.mergeTool.splitCells(c)}}catch(e){r=!0,s=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw s}}n.gridItem.adjustSize(),n.gridItem.setStatus(E.d.CHANGE),i.renderCanvas(e,t,[n.gridItem]),i.renderHandler(e,t),i.renderItemTools(e,t)}}),m()(u()(n),"rollbackAction",function(e,t,i){var a=!0,r=!1,s=void 0;try{for(var o,l=n.mergedCellsPoses[Symbol.iterator]();!(a=(o=l.next()).done);a=!0){var c=o.value;n.gridItem.mergeTool.mergeCells(c)}}catch(e){r=!0,s=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw s}}n.gridItem.adjustSize(),n.gridItem.setStatus(E.d.CHANGE),i.renderCanvas(e,t,[n.gridItem]),i.renderHandler(e,t),i.renderItemTools(e,t)}),m()(u()(n),"recycle",function(){n.gridItem=null,n.mergedCellsPoses=null}),n.gridItem=e;var i=n.gridItem.selectedCells,r=n.gridItem.positionTool.isRectSelectedCells(i);if(n.doSaveQueue=r,r){var o=n.gridItem.positionTool.arrayOfCellPosToCellsPos(i),c=n.gridItem.positionTool.getRectCells(o),d=!0,p=!1,h=void 0;try{for(var f,T=c[Symbol.iterator]();!(d=(f=T.next()).done);d=!0){var y=f.value,I=!0,L=!1,k=void 0;try{for(var _,w=y[Symbol.iterator]();!(I=(_=w.next()).done);I=!0){var b=_.value;b.cellType===g.c.MASTER&&n.mergedCellsPoses.push(b.childCellsPos)}}catch(e){L=!0,k=e}finally{try{I||null==w.return||w.return()}finally{if(L)throw k}}}}catch(e){p=!0,h=e}finally{try{d||null==T.return||T.return()}finally{if(p)throw h}}}return n}return p()(t,e),t}(f.a)},484:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var i=n(35),a=n.n(i),r=n(39),s=n.n(r),o=n(38),l=n.n(o),c=n(40),u=n.n(c),d=n(45),p=n(54),h=n(56),m=function(e){function t(){return a()(this,t),s()(this,l()(t).call(this,function(e,t){if(1===t.activeItems.length){var n=p.b.getGroup(t.activeItems[0].groupId);n.clearSelectedItem();var i=n.getRootGroup();i.clearSelectedItem();var a=i.getAllSingleMembers(),r=e.pages[t.renderPageIdx].getAllSingleItems().filter(function(e){return a.find(function(t){return t.tbpeId===e.tbpeId})});r.forEach(function(e){e.hover=!1,t.pageController.getItemRenderer(e).updateBorderStyle(0)}),e.pages.forEach(function(e){t.pageController.getPageRenderer(e).updateHoverLayer()}),h.a.selectItems(r)}},!0))}return u()(t,e),t}(d.c)},493:function(e,t,n){"use strict";var i=n(0),a=n.n(i),r=n(1),s=n.n(r),o=n(35),l=n.n(o),c=n(36),u=n.n(c),d=n(37),p=n.n(d),h=n(84),m=n(365),g=n(67),v=n(471),f=n(41),E=function(){function e(){l()(this,e)}return u()(e,null,[{key:"makeItemBoundingArea",value:function(e,t){var n=h.a.makeDiv(m.a.HIGHLIGHT_BOUNDING_AREA),i=v.a.getItemPurePos(t.itemLTRB,t.pureBound),a=i.left,r=i.top,s=v.a.getItemMBRInfos(n,a,r,e,-t.degree,t.scale);return h.a.setRotatedLTPosition(s),n}},{key:"addHighlightElement",value:function(e,t,n,i){if(n>0&&i>0){var a=h.a.makeDiv(t);h.a.setElementSize(a,n,i),e.appendChild(a)}}},{key:"makePureWrapper",value:function(e,t,n){var i=h.a.makeDiv(m.a.HIGHLIGHT_PURE_GUIDE_WRAPPER),a=v.a.getPureInfos(i,e,t,n);return h.a.setLTPosition(a),i}},{key:"setItemPos",value:function(e){h.a.setRotatedLTPosition(v.a.getLtrbToRotatedInfos(e.element,e.itemLTRB,e.degree,e.scale))}},{key:"getAlertTypeItemList",value:function(t){var n=h.a.getInspectionAllResult();return n?e.getAlertItemListOfResultData(t,n):[]}},{key:"getAlertItemListOfResultData",value:function(t,n){var i=[];switch(t){case g.a.TOTAL:e.getAlertTypeItemList(g.a.WARNING).forEach(function(e){return i.push(e)}),e.getAlertTypeItemList(g.a.CAUTION).forEach(function(e){return i.push(e)}),e.getAlertTypeItemList(g.a.RECOMMEND).forEach(function(e){return i.push(e)});break;case g.a.WARNING:n.warningInfo.rstInfoList.forEach(function(t){e.getUnHoldingItemList(t.itemIdListWithHolding).forEach(function(e){return i.push(e)})});break;case g.a.CAUTION:n.cautionInfo.rstInfoList.forEach(function(t){e.getUnHoldingItemList(t.itemIdListWithHolding).forEach(function(e){return i.push(e)})});break;case g.a.RECOMMEND:n.recommendInfo.rstInfoList.forEach(function(t){e.getUnHoldingItemList(t.itemIdListWithHolding).forEach(function(e){return i.push(e)})});break;case g.a.HOLD:i=n.holdItemIdList}return i}},{key:"getUnHoldingItemList",value:function(e){var t=[];return e.forEach(function(e,n){e||t.push(n)}),t}},{key:"makeRestrictionWrapper",value:function(e,t){var n=h.a.makeDiv(m.a.PRINTOUT_INFO_RESTRICTIONS);return n.classList.add(t),e.appendChild(n),n}},{key:"showAlertRestrictionMap",value:function(e,t){t?t.forEach(function(t){if(e.has(t)){var n=e.get(t);h.a.fadeInElement(n.element),n.element.classList.remove(f.a.DISABLE)}}):e.forEach(function(e){h.a.fadeInElement(e.element),e.element.classList.remove(f.a.DISABLE)})}},{key:"hideAlertRestrictionMap",value:function(e,t){t?t.forEach(function(t){if(e.has(t)){var n=e.get(t);h.a.fadeOutElement(n.element),n.element.classList.add(f.a.DISABLE)}}):e.forEach(function(e){h.a.fadeOutElement(e.element),e.element.classList.add(f.a.DISABLE)})}}]),e}(),T=n(472),y=n(42),I=n(298),L=function(){function e(t,n){l()(this,e),p()(this,"dynamicElements",new Map),p()(this,"warningAlert",new T.a),this.width=t,this.height=n}return u()(e,[{key:"setListener",value:function(e){this.listener=e}},{key:"clear",value:function(){this.dynamicElements.clear()}},{key:"checkAlert",value:function(e){var t=e.itemTbpeId,n=e.rstTypes.length>0,i=n&&!this.dynamicElements.has(t),a=n&&this.dynamicElements.has(t),r=!n&&this.dynamicElements.has(t),s=n?e.rstLevel:g.e.NONE;this.listener&&this.listener.onStatusChanged(e.itemTbpeId,s),i?this.createAlert(e):a?this.updateAlert(e):r&&this.removeAlert(t)}},{key:"updateAlertByRestrictionLevel",value:function(e,t){this.dynamicElements.has(e)&&h.a.changeAlertIconCSSbyLevel(this.dynamicElements.get(e).element,t)}},{key:"createAlert",value:function(e){var t=this.warningAlert.create(I.a.getAlertParam(e,this.width,this.height,this.listener.onItemSelected));t.rstTypes=e.rstTypes.slice(),this.dynamicElements.set(e.itemTbpeId,t)}},{key:"closeAlertPopup",value:function(){this.warningAlert.closeAlertPopup()}},{key:"updateAlert",value:function(e){var t=this.dynamicElements.get(e.itemTbpeId),n=y.a.instance.pageEditScale*y.a.instance.zoomScale,i=(y.a.instance.pageEditScale,this.warningAlert.getLeftTopPoint(t.element,e.itemBound.itemLTRB.getCenterPos(),e.itemBound.degree,this.width,this.height,n)),a=t.element;a&&!I.a.isSameRstTypes(t.rstTypes,e.rstTypes.slice())&&(t.rstTypes=e.rstTypes.slice(),this.warningAlert.update(a,I.a.getAlertParam(e,this.width,this.height,this.listener.onItemSelected)),this.warningAlert.closeAlertPopup()),h.a.setElementLeftTopByPx(a,i.x,i.y),h.a.changeAlertIconCSSbyLevel(a,e.rstLevel),h.a.fadeInElement(a)}},{key:"removeAlert",value:function(e){if(this.dynamicElements.has(e)){var t=this.dynamicElements.get(e);this.warningAlert.removeCenterPosCacheOfAlert(t.element),t.element.parentElement.removeChild(t.element),this.dynamicElements.delete(e)}}},{key:"render",value:function(e){this.dynamicElements.forEach(function(t){var n=t.element;n.parentElement||e.appendChild(n)})}},{key:"updateScale",value:function(e,t,n){this.warningAlert.updateElementsScale(e,t,n)}},{key:"showAlert",value:function(e){E.showAlertRestrictionMap(this.dynamicElements,e)}},{key:"hideAlert",value:function(e){E.hideAlertRestrictionMap(this.dynamicElements,e)}},{key:"showAlertPopup",value:function(e){var t=this.dynamicElements.get(e);t?t.element.click():console.error("요청한 itemTbpeId 에 해당하는 경고가 없습니다. : ".concat(e))}}]),e}(),k=n(39),_=n.n(k),w=n(44),b=n.n(w),S=n(38),O=n.n(S),C=n(46),P=n.n(C),D=n(40),A=n.n(D),R=n(49),M=function(){function e(t){l()(this,e),p()(this,"ltrb",new R.a(0,0,0,0)),this.wrapper=h.a.makeDiv(t)}return u()(e,[{key:"init",value:function(e,t){this.ltrb=e.ltrb.clone(),this.shapeType=e.shapeType,this.update(t)}},{key:"setParentElement",value:function(e){this.wrapper.parentElement||e.appendChild(this.wrapper)}},{key:"update",value:function(e){}},{key:"clear",value:function(){h.a.removeAllChild(this.wrapper)}},{key:"show",value:function(){this.wrapper.classList.add(e.ACTIVE)}},{key:"hide",value:function(){this.wrapper.classList.remove(e.ACTIVE)}}]),e}();p()(M,"ACTIVE","active"),p()(M,"INACTIVE","inactive");var N,x=n(215),B=function(e){function t(){return l()(this,t),_()(this,O()(t).apply(this,arguments))}return A()(t,e),u()(t,[{key:"getLineInfos",value:function(e,t,n){var i=t.clone().changeScale(n);return{element:e,left:i.left,top:i.top,width:i.getWidth(),height:i.getHeight()}}},{key:"init",value:function(e,n){if(P()(O()(t.prototype),"init",this).call(this,e,n),this.shapeType===x.a.CIRCLE){var i=this.ltrb.getWidth(),a=this.ltrb.getHeight();i<a?(this.ltrb.top+=(a-i)/2,this.ltrb.bottom=this.ltrb.top+i):(this.ltrb.left+=(i-a)/2,this.ltrb.right=this.ltrb.left+a)}}},{key:"getCenterPosition",value:function(e,t){return e.clone().changeScale(t).getCenterPos()}}]),t}(M);!function(e){e[e.DARK_COLOR=0]="DARK_COLOR",e[e.BRIGHT_COLOR=1]="BRIGHT_COLOR"}(N||(N={}));var U=function(e){function t(){var e;return l()(this,t),e=_()(this,O()(t).call(this,t.DOTTED_GUIDE_AREA)),p()(b()(e),"lineMap",new Map),e.lineMap.set(N.DARK_COLOR,h.a.makeDiv(t.DARK_COLOR_DOTTED_LINE)),e.lineMap.set(N.BRIGHT_COLOR,h.a.makeDiv(t.BRIGHT_COLOR_DOTTED_LINE)),e}return A()(t,e),u()(t,[{key:"init",value:function(e,n){var i=this;P()(O()(t.prototype),"init",this).call(this,e,n),this.wrapper.classList.add(e.shapeType),this.lineMap.forEach(function(e){return i.wrapper.appendChild(e)})}},{key:"update",value:function(e){var n=this;P()(O()(t.prototype),"update",this).call(this,e),this.lineMap.forEach(function(t){return h.a.setLTPosition(n.getLineInfos(t,n.ltrb,e))})}}]),t}(B);p()(U,"DOTTED_GUIDE_AREA","dotted_guide_area"),p()(U,"DARK_COLOR_DOTTED_LINE","dark_color_dotted_line"),p()(U,"BRIGHT_COLOR_DOTTED_LINE","bright_color_dotted_line");var H=function(e){function t(){var e;return l()(this,t),e=_()(this,O()(t).call(this,"printout_highlight_wrapper")),p()(b()(e),"highlightElements",[]),e.highlightElements.push(h.a.makeDiv("left")),e.highlightElements.push(h.a.makeDiv("right")),e.highlightElements.push(h.a.makeDiv("top")),e.highlightElements.push(h.a.makeDiv("bottom")),e.highlightElements.forEach(function(t){return e.wrapper.appendChild(t)}),e}return A()(t,e),u()(t,[{key:"update",value:function(e){if(P()(O()(t.prototype),"update",this).call(this,e),this.ltrb){var n=this.ltrb.clone().changeScale(e),i=n.left,a="".concat(i,"px"),r=n.top,s="".concat(r,"px");this.highlightElements[0].style.width=a,this.highlightElements[1].style.width="calc(100% - ".concat(n.right,"px)"),this.highlightElements[2].style.height=s,this.highlightElements[2].style.width="".concat(n.right-n.left,"px"),this.highlightElements[2].style.left=a,this.highlightElements[3].style.height="calc(100% - ".concat(n.bottom,"px)"),this.highlightElements[3].style.width="".concat(n.right-n.left,"px"),this.highlightElements[3].style.left=a}}}]),t}(B),G=function(e){function t(e,n,i,a){var r;return l()(this,t),(r=_()(this,O()(t).call(this,e,n,i))).area=a,r}return A()(t,e),t}(n(366).a),z=n(45),F=n(55),W=n(56),K=function(e){function t(e){var n;l()(this,t);var i=(n=_()(this,O()(t).call(this,t.TEXT_GUIDE_WRAPPER))).container=h.a.makeDiv(t.TEXT_GUIDE_AREA);return n.container.appendChild(h.a.makeLabel(e,t.DISPLAY_TEXT)),n.subLine=h.a.makeDiv(t.SUB_LINE),n.wrapper.appendChild(i),n}return A()(t,e),u()(t,[{key:"init",value:function(e,n){this.isVerticalArea=e.ltrb.getWidth()<=e.ltrb.getHeight(),P()(O()(t.prototype),"init",this).call(this,e,n),e.shapeType===x.a.LINE&&this.container.appendChild(this.subLine),this.isVerticalArea?this.wrapper.classList.add(t.VERTICAL):this.wrapper.classList.add(t.HORIZON)}},{key:"update",value:function(e){if(P()(O()(t.prototype),"update",this).call(this,e),this.isVerticalArea){var n=this.getCenterPosition(this.ltrb,e).x-50;this.container.style.left="".concat(n,"px")}else{var i=this.getCenterPosition(this.ltrb,e).y-12;this.container.style.top="".concat(i,"px")}}}]),t}(B);p()(K,"TEXT_GUIDE_WRAPPER","text_guide_wrapper"),p()(K,"TEXT_GUIDE_AREA","text_guide_area"),p()(K,"DISPLAY_TEXT","display_text"),p()(K,"SUB_LINE","sub_line"),p()(K,"VERTICAL","vertical"),p()(K,"HORIZON","horizon");var V=n(285),Y=function(e){function t(){var e;return l()(this,t),e=_()(this,O()(t).call(this,t.SOLID_GUIDE_AREA)),p()(b()(e),"lineList",[]),e.lineList.push(h.a.makeDiv(t.SOLID_LINE)),e}return A()(t,e),u()(t,[{key:"init",value:function(e,n){var i=this;P()(O()(t.prototype),"init",this).call(this,e,n),this.wrapper.classList.add(e.shapeType),this.lineList.forEach(function(e){return i.wrapper.appendChild(e)})}},{key:"update",value:function(e){var n=this;P()(O()(t.prototype),"update",this).call(this,e),this.lineList.forEach(function(t){h.a.setLTPosition(n.getLineInfos(t,n.ltrb,e))})}}]),t}(B);p()(Y,"SOLID_GUIDE_AREA","solid_guide_area"),p()(Y,"SOLID_LINE","solid_line");var j=function(e){function t(e){var n;return l()(this,t),(n=_()(this,O()(t).call(this,t.INSIDE_SHAPE_DISPLAY_AREA))).color=e,n.element=h.a.makeDiv(t.INSIDE_SHAPE_CONTAINER),""===n.color&&(n.color=t.DEFAULT_FILL_COLOR),n.wrapper.appendChild(n.element),n}return A()(t,e),u()(t,[{key:"init",value:function(e,n){P()(O()(t.prototype),"init",this).call(this,e,n),this.wrapper.classList.add(e.shapeType),this.element.style.background=this.color,this.update(n)}},{key:"update",value:function(e){P()(O()(t.prototype),"update",this).call(this,e),h.a.setLTPosition(this.getLineInfos(this.element,this.ltrb,e))}}]),t}(B);p()(j,"INSIDE_SHAPE_DISPLAY_AREA","inside_shape_display_area"),p()(j,"INSIDE_SHAPE_CONTAINER","inside_shape_container"),p()(j,"DEFAULT_FILL_COLOR","#00CCBB");var $=function(e){function t(e){var n;return l()(this,t),n=_()(this,O()(t).call(this,t.OUTSIDE_SHAPE_DISPLAY_AREA)),p()(b()(n),"highlightElements",[]),n.color=e,""===n.color&&(n.color=t.DEFAULT_FILL_COLOR),n.highlightElements.push(h.a.makeDiv("left")),n.highlightElements.push(h.a.makeDiv("right")),n.highlightElements.push(h.a.makeDiv("top")),n.highlightElements.push(h.a.makeDiv("bottom")),n.highlightElements.forEach(function(e){return n.wrapper.appendChild(e)}),n}return A()(t,e),u()(t,[{key:"init",value:function(e,n){var i=this;P()(O()(t.prototype),"init",this).call(this,e,n),this.highlightElements.forEach(function(e){e.style.background=i.color}),this.update(n)}},{key:"update",value:function(e){if(P()(O()(t.prototype),"update",this).call(this,e),this.ltrb){var n=this.ltrb.clone().changeScale(e),i=n.left,a="".concat(i,"px"),r=n.top,s="".concat(r,"px");this.highlightElements[0].style.width=a,this.highlightElements[1].style.width="calc(100% - ".concat(n.right,"px)"),this.highlightElements[2].style.height=s,this.highlightElements[2].style.width="".concat(n.right-n.left,"px"),this.highlightElements[2].style.left=a,this.highlightElements[3].style.height="calc(100% - ".concat(n.bottom,"px)"),this.highlightElements[3].style.width="".concat(n.right-n.left,"px"),this.highlightElements[3].style.left=a}}}]),t}(B);p()($,"OUTSIDE_SHAPE_DISPLAY_AREA","outside_shape_display_area"),p()($,"DEFAULT_FILL_COLOR","#00CCBB"),n.d(t,"a",function(){return X});var X=function(){function e(t,n,i,a){var r=this;l()(this,e),p()(this,"guideAreaViews",new Array),p()(this,"highlightGuideAreaViews",new Array),p()(this,"lastZoomScale",-1),this.width=t,this.height=n,this.warningIconVC=new L(t,n),this.warningIconVC.setListener(this),this.makeElement(),i.forEach(function(e){return r.initAreaGuide(e)}),I.a.addImageMinDpiGuide(a)}return u()(e,[{key:"initAreaGuide",value:function(e){e.inspection.check?this.addAlertGuideArea(e):this.addGuideArea(e)}},{key:"addAlertGuideArea",value:function(e){var t=I.a.getArea(e),n=new G(V.a[e.alertType],e.title,e.warningText,t);I.a.setGuideAreaData(n),this.addGuideArea(e);var i=new H;i.init(t,y.a.instance.zoomScale),this.highlightGuideAreaViews.push(i)}},{key:"addGuideArea",value:function(e){var t=I.a.getArea(e),n=y.a.instance.zoomScale,i=this.getLineDisplayView(e.lineDisplay);if(i&&(i.init(t,n),this.guideAreaViews.push(i)),e.displayText){var a=new K(e.displayText);a.init(t,n),this.guideAreaViews.push(a)}if(e.insideShapeDisplay){var r=this.getDisplayType(e.insideShapeDisplay),s=new j(r);s.init(t,n),this.guideAreaViews.push(s)}if(e.outsideShapeDisplay){var o=this.getDisplayType(e.outsideShapeDisplay),l=new $(o);l.init(t,n),this.guideAreaViews.push(l)}}},{key:"getDisplayType",value:function(e){var t=e.type;return"NONE"===t?"":"COLOR"===t?e.color:void 0}},{key:"getLineDisplayView",value:function(e){return e===V.b.DOT?new U:e===V.b.SOLID?new Y:null}},{key:"makeElement",value:function(){var t=this.wrapper=h.a.makeDiv(e.PRINTOUT_INFO),n=h.a.makeDiv(e.PRINTOUT_INFO_CONTENTS);this.staticWrapper=E.makeRestrictionWrapper(n,e.PRINTOUT_INFO_STATICS),this.dynamicWrapper=E.makeRestrictionWrapper(n,e.PRINTOUT_INFO_DYNAMICS),t.appendChild(n)}},{key:"clear",value:function(){h.a.removeAllChild(this.staticWrapper),h.a.removeAllChild(this.dynamicWrapper),this.guideAreaViews=[],this.warningIconVC.clear(),this.guideAreaViews.forEach(function(e){return e.clear()})}},{key:"appendElementTo",value:function(t){var n=t.getElementsByClassName(e.PRINTOUT_LAYER).item(0);n&&n.appendChild(this.wrapper)}},{key:"onStatusChanged",value:function(e,t){y.a.dispatch(new z.c(function(n,i,a){return a.rightSection.printoutFinalConfirm.render(e,t)}))}},{key:"onItemSelected",value:function(e){e&&y.a.dispatch(new z.c(function(){var t=s()(a.a.mark(function t(n,i,r){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n.pages.forEach(function(t){return t.getAllSingleItems().forEach(function(t){t.tbpeId!==e||t.isOnlyOneItem()||W.a.selectItem(t)})}),t.next=3,r.renderAuto(n,i);case 3:case"end":return t.stop()}},t)}));return function(e,n,i){return t.apply(this,arguments)}}()))}},{key:"removeAlert",value:function(e){this.warningIconVC.removeAlert(e),this.highlightGuideAreaViews.forEach(function(e){return e.hide()})}},{key:"render",value:function(e){var t=this,n=y.a.instance.zoomScale;if(this.lastZoomScale!==n){this.lastZoomScale=n;var i=y.a.instance.pageEditScale*n;this.guideAreaViews.forEach(function(e){return e.update(i)}),this.highlightGuideAreaViews.forEach(function(e){return e.update(n*y.a.instance.pageEditScale)}),this.warningIconVC.updateScale(this.width,this.height,i)}this.guideAreaViews.forEach(function(e){return e.setParentElement(t.staticWrapper)}),this.highlightGuideAreaViews.forEach(function(e){return e.setParentElement(t.staticWrapper)}),this.warningIconVC.render(this.dynamicWrapper),this.setVisible(this.isShowGuide())}},{key:"isShowGuide",value:function(){return y.a.instance.option.size.unit!==F.b.PX}},{key:"setVisible",value:function(e){h.a.setElementVisible(this.wrapper,e)}},{key:"setSize",value:function(e,t){this.width=e,this.height=t}},{key:"setVisibleHighlight",value:function(e){this.highlightGuideAreaViews.forEach(function(t){e?t.show():t.hide()})}}]),e}();p()(X,"PRINTOUT_INFO","printout_info"),p()(X,"PRINTOUT_INFO_CONTENTS","contents"),p()(X,"PRINTOUT_INFO_STATICS","statics"),p()(X,"PRINTOUT_INFO_DYNAMICS","dynamics"),p()(X,"PRINTOUT_LAYER","printout_layer")},499:function(e,t,n){"use strict";var i,a=n(73),r=n.n(a),s=n(35),o=n.n(s),l=n(36),c=n.n(l),u=n(39),d=n.n(u),p=n(44),h=n.n(p),m=n(38),g=n.n(m),v=n(46),f=n.n(v),E=n(40),T=n.n(E),y=n(37),I=n.n(y),L=n(109),k=n(42),_=n(75),w=n(45),b=n(140),S=n(51),O=function(e){function t(e,n,a){var s,l;(o()(this,t),s=d()(this,g()(t).call(this)),I()(h()(s),"oldBorders",[]),I()(h()(s),"actionType",w.a.GRID_CELL_BORDER),I()(h()(s),"commitAction",function(e,t,n){var a=s.gridItem.positionTool.getCells(s.selectedCells),r=!0,o=!1,l=void 0;try{for(var c,u=a[Symbol.iterator]();!(r=(c=u.next()).done);r=!0){var d=c.value,p=d.row,h=d.col;switch(s.borderChangeType){case i.LEFT:h===s.left&&d.borders.left.assign(s.border);break;case i.TOP:p===s.top&&d.borders.top.assign(s.border);break;case i.RIGHT:h===s.right&&d.borders.right.assign(s.border);break;case i.BOTTOM:p===s.bottom&&d.borders.bottom.assign(s.border);break;case i.DOWNDIAGONAL:d.borders.downDiagonal.assign(s.border);break;case i.UPDIAGONAL:d.borders.upDiagonal.assign(s.border);break;case i.INNERVER:h!==s.left&&d.borders.left.assign(s.border);break;case i.INNERHOR:p!==s.top&&d.borders.top.assign(s.border);break;case i.OUTER:h===s.left&&d.borders.left.assign(s.border),p===s.top&&d.borders.top.assign(s.border),h===s.right&&d.borders.right.assign(s.border),p===s.bottom&&d.borders.bottom.assign(s.border);break;case i.CROSS:h!==s.left&&d.borders.left.assign(s.border),p!==s.top&&d.borders.top.assign(s.border);break;case i.ALL:d.borders.left.assign(s.border),d.borders.top.assign(s.border),d.borders.right.assign(s.border),d.borders.bottom.assign(s.border);break;case i.NONE:d.borders.left.visible=!1,d.borders.left.thickness=0,d.borders.top.visible=!1,d.borders.top.thickness=0,d.borders.right.visible=!1,d.borders.right.thickness=0,d.borders.bottom.visible=!1,d.borders.bottom.thickness=0,d.borders.downDiagonal.visible=!1,d.borders.downDiagonal.thickness=0,d.borders.upDiagonal.visible=!1,d.borders.upDiagonal.thickness=0}d.synchronizeBorder(d.borders.left),d.synchronizeBorder(d.borders.right),d.synchronizeBorder(d.borders.top),d.synchronizeBorder(d.borders.bottom)}}catch(e){o=!0,l=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw l}}s.gridItem.isTextEditMode&&t.pageController.getItemRenderer(s.gridItem).elements.editElement.updateCursor();s.gridItem.adjustSize(),s.gridItem.setStatus(S.d.CHANGE),n.renderCanvas(e,t,[s.gridItem]),n.renderHandler(e,t)}),I()(h()(s),"rollbackAction",function(e,t,n){var i=s.gridItem.positionTool.getCells(s.selectedCells),a=0,r=!0,o=!1,l=void 0;try{for(var c,u=i[Symbol.iterator]();!(r=(c=u.next()).done);r=!0){var d=c.value;d.borders.left.assign(s.oldBorders[a].left),d.borders.top.assign(s.oldBorders[a].top),d.borders.right.assign(s.oldBorders[a].right),d.borders.bottom.assign(s.oldBorders[a].bottom),d.borders.downDiagonal.assign(s.oldBorders[a].downDiagonal),d.borders.downDiagonal.visible=!1,d.borders.upDiagonal.assign(s.oldBorders[a].upDiagonal),d.borders.upDiagonal.visible=!1,a++,d.synchronizeBorder(d.borders.left),d.synchronizeBorder(d.borders.right),d.synchronizeBorder(d.borders.top),d.synchronizeBorder(d.borders.bottom)}}catch(e){o=!0,l=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw l}}s.gridItem.adjustSize(),s.gridItem.setStatus(S.d.CHANGE),n.renderCanvas(e,t,[s.gridItem]),n.renderHandler(e,t)}),I()(h()(s),"recycle",function(){s.gridItem=null,s.oldBorders=[],s.selectedCells=null,s.border=null}),s.gridItem=e,s.borderChangeType=a,s.selectedCells=e.selectedCells,0===s.selectedCells.length)&&(l=s.selectedCells).push.apply(l,r()(s.gridItem.everyCells));s.border=n.clone();var c=s.gridItem.positionTool.isRectSelectedCells(s.selectedCells),u=s.selectedCells.length===s.gridItem.everyCells.length;if(c||u){var p=s.gridItem.positionTool.arrayOfCellPosToCellsPos(s.selectedCells);s.left=p.startPos.col,s.top=p.startPos.row,s.right=p.endPos.col,s.bottom=p.endPos.row}var m=s.gridItem.positionTool.getCells(s.selectedCells),v=!0,f=!1,E=void 0;try{for(var T,y=m[Symbol.iterator]();!(v=(T=y.next()).done);v=!0){var L=T.value;s.oldBorders.push(L.borders.clone())}}catch(e){f=!0,E=e}finally{try{v||null==y.return||y.return()}finally{if(f)throw E}}return s}return T()(t,e),t}(b.a);!function(e){e.LEFT="left",e.TOP="top",e.RIGHT="right",e.BOTTOM="bottom",e.DOWNDIAGONAL="downDiagonal",e.UPDIAGONAL="upDiagonal",e.INNERVER="innerVer",e.INNERHOR="innerHor",e.OUTER="outer",e.CROSS="cross",e.ALL="all",e.NONE="none"}(i||(i={})),n.d(t,"a",function(){return C});var C=function(e){function t(e,n,i,a,r,s){var l,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,u=!(arguments.length>7&&void 0!==arguments[7])||arguments[7];return o()(this,t),l=d()(this,g()(t).call(this,n,i,a,r,s,c)),I()(h()(l),"oldValues",[]),I()(h()(l),"cells",[]),l.propsType=e,l.actionType=n,l.groupName=i,l.propName=a,l.newValue=r,l.updateUI=s,l.timeout=c,l.saveQueue=u,l.selectedCells=l.items[0].selectedCells,l.doSaveQueue=u,l.isRender=s,l}return T()(t,e),c()(t,[{key:"commitAction",value:function(e,n){var i=this;if(this.propsType===_.a.GRID)this.propsArray[0]=this.items[0].props,f()(g()(t.prototype),"commitProps",this).call(this,e,n),this.oldValues.push(this.oldValue);else{if(this.cells=this.items[0].positionTool.getCells(this.selectedCells),0===this.cells.length){var a=!0,s=!1,o=void 0;try{for(var l,c=this.items[0].cells[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var u,d=l.value;(u=this.cells).push.apply(u,r()(d))}}catch(e){s=!0,o=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw o}}}this.cells.forEach(function(a){switch(i.propsType){case _.a.CELL:i.propsArray[0]=a.cellProps;break;case _.a.TEXT:i.propsArray[0]=a.childTextItem.props;break;default:return}f()(g()(t.prototype),"commitProps",i).call(i,e,n),i.oldValues.push(i.oldValue)})}this.updateGridCells(),n.renderer.renderLayerThumb(this.items)}},{key:"rollbackAction",value:function(e,n){var i=this;this.propsType===_.a.GRID?(this.oldValue=this.oldValues.shift(),f()(g()(t.prototype),"rollbackProps",this).call(this,e,n)):this.cells.forEach(function(a){switch(i.propsType){case _.a.CELL:i.propsArray[0]=a.cellProps;break;case _.a.TEXT:i.propsArray[0]=a.childTextItem.props;break;default:return}i.oldValue=i.oldValues.shift(),f()(g()(t.prototype),"rollbackProps",i).call(i,e,n)}),this.updateGridCells(),n.renderer.renderLayerThumb(this.items)}},{key:"updateGridCells",value:function(){var e=this.items[0].props;e.isLeftBorder()&&(e.updateBorder(),k.a.dispatch(new O(this.items[0],e.border,i.LEFT))),e.isTopBorder()&&(e.updateBorder(),k.a.dispatch(new O(this.items[0],e.border,i.TOP))),e.isRightBorder()&&(e.updateBorder(),k.a.dispatch(new O(this.items[0],e.border,i.RIGHT))),e.isBottomBorder()&&(e.updateBorder(),k.a.dispatch(new O(this.items[0],e.border,i.BOTTOM))),e.isInnerCrossBorder()&&(e.updateBorder(),k.a.dispatch(new O(this.items[0],e.border,i.CROSS))),e.isInnerHorBorders()&&(e.updateBorder(),k.a.dispatch(new O(this.items[0],e.border,i.INNERHOR))),e.isInnerVerBorders()&&(e.updateBorder(),k.a.dispatch(new O(this.items[0],e.border,i.INNERVER))),e.isUpDiagonalBorder()&&(e.updateBorder(),k.a.dispatch(new O(this.items[0],e.border,i.UPDIAGONAL))),e.isDownDiagonalBorder()&&(e.updateBorder(),k.a.dispatch(new O(this.items[0],e.border,i.DOWNDIAGONAL))),e.isOuterBorders()&&(e.updateBorder(),k.a.dispatch(new O(this.items[0],e.border,i.OUTER))),e.isAllBorders()&&(e.updateBorder(),k.a.dispatch(new O(this.items[0],e.border,i.ALL))),e.isNoneBorders()&&(e.updateBorder(),k.a.dispatch(new O(this.items[0],e.border,i.NONE))),e.setLeftBorder(!1),e.setTopBorder(!1),e.setRightBorder(!1),e.setBottomBorder(!1),e.setDownDiagonalBorder(!1),e.setUpDiagonalBorder(!1),e.setAllBorders(!1),e.setInnerCrossBorder(!1),e.setInnerHorBorders(!1),e.setInnerVerBorders(!1),e.setOuterBorders(!1),e.setNoneBorders(!1)}}]),t}(L.d)},500:function(e,t,n){"use strict";var i,a=n(35),r=n.n(a),s=n(36),o=n.n(s),l=n(39),c=n.n(l),u=n(38),d=n.n(u),p=n(44),h=n.n(p),m=n(40),g=n.n(m),v=n(37),f=n.n(v),E=n(367),T=n(42),y=n(45),I=n(54),L=function(){function e(){r()(this,e)}return o()(e,null,[{key:"getPosition",value:function(e,t){if(!e)return 0;var n=e.getLTRBCoordinate(!0);switch(t){case i.LEFT:return n.left;case i.TOP:return n.top;case i.RIGHT:return n.right;case i.BOTTOM:return n.bottom;default:return 0}}},{key:"removeLastItems",value:function(e,t){e.forEach(function(n){var i=I.b.getRootGroup(n.groupId);(n===t||i&&i.has(t))&&e.splice(e.indexOf(n),1)})}},{key:"isSameItemsToSort",value:function(e,t){var n=I.b.getRootGroup(e.groupId);return e===t||n&&n.has(t)}},{key:"sortItems",value:function(t,n){var a=t.slice();return a.sort(function(t,i){var a=e.getPosition(t,n),r=e.getPosition(i,n);return a>r?1:a<r?-1:0}),n!==i.RIGHT&&n!==i.BOTTOM||a.reverse(),e.getItemsToSort(a)}},{key:"getItemsToSort",value:function(e){var t=[],n=[],i=!0,a=!1,r=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value,c=I.b.getRootGroup(l.groupId);c?n.indexOf(c.getGroupId())<0&&(t.push(l),n.push(c.getGroupId())):t.push(l)}}catch(e){a=!0,r=e}finally{try{i||null==o.return||o.return()}finally{if(a)throw r}}return t}},{key:"getItemsCountToSort",value:function(t){return e.getItemsToSort(t).length}}]),e}();!function(e){e[e.LEFT=0]="LEFT",e[e.TOP=1]="TOP",e[e.RIGHT=2]="RIGHT",e[e.BOTTOM=3]="BOTTOM"}(i||(i={})),n.d(t,"c",function(){return _}),n.d(t,"e",function(){return w}),n.d(t,"f",function(){return b}),n.d(t,"a",function(){return S}),n.d(t,"b",function(){return O}),n.d(t,"d",function(){return C}),n.d(t,"g",function(){return D}),n.d(t,"h",function(){return A});var k=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I.b.getGroupItemsAddedArray(T.a.instance.activeItems.slice());return r()(this,t),e=c()(this,d()(t).call(this)),f()(h()(e),"groupMoveMap",new Map),f()(h()(e),"groupLTRBMap",new Map),f()(h()(e),"recycle",function(){e.groupLTRBMap=null,e.groupMoveMap=null}),e.selectedItems=n,n.length<2&&(e.doSaveQueue=!1),e}return g()(t,e),o()(t,[{key:"getItemLTRBCoorinate",value:function(e){var t=I.b.getRootGroup(e.groupId);if(t){var n=t.getLTRBCoordinate(!0);return this.groupLTRBMap.has(t.getGroupId())||this.groupLTRBMap.set(t.getGroupId(),n),n}return e.getLTRBCoordinate(!0)}},{key:"sumDistributeItemWidth",value:function(e){var t=0,n=!0,i=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(n=(r=s.next()).done);n=!0){var o=r.value;t+=this.getItemLTRBCoorinate(o).getWidth()}}catch(e){i=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return t}},{key:"sumDistributeItemHeight",value:function(e){var t=0,n=!0,i=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(n=(r=s.next()).done);n=!0){var o=r.value;t+=this.getItemLTRBCoorinate(o).getHeight()}}catch(e){i=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return t}}]),t}(E.a),_=function(e){function t(){var e,n;r()(this,t);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=c()(this,(e=d()(t)).call.apply(e,[this].concat(a))),f()(h()(n),"actionType",y.a.ALIGN_LEFT),f()(h()(n),"commitAlignAction",function(e,t){var i=!0,a=!1,r=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value,c=n.getItemLTRBCoorinate(l),u=t.left-c.left,d=I.b.getRootGroup(l.groupId);d&&(n.groupMoveMap.has(d.getGroupId())?u=n.groupMoveMap.get(d.getGroupId()).x:n.groupMoveMap.set(d.getGroupId(),{x:u,y:0})),n.movePositions.push({x:u,y:0}),l.move(u,0)}}catch(e){a=!0,r=e}finally{try{i||null==o.return||o.return()}finally{if(a)throw r}}}),n}return g()(t,e),t}(k),w=function(e){function t(){var e,n;r()(this,t);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=c()(this,(e=d()(t)).call.apply(e,[this].concat(a))),f()(h()(n),"actionType",y.a.ALIGN_RIGHT),f()(h()(n),"commitAlignAction",function(e,t){var i=!0,a=!1,r=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value,c=n.getItemLTRBCoorinate(l),u=t.right-c.right,d=I.b.getRootGroup(l.groupId);d&&(n.groupMoveMap.has(d.getGroupId())?u=n.groupMoveMap.get(d.getGroupId()).x:n.groupMoveMap.set(d.getGroupId(),{x:u,y:0})),n.movePositions.push({x:u,y:0}),l.move(u,0)}}catch(e){a=!0,r=e}finally{try{i||null==o.return||o.return()}finally{if(a)throw r}}}),n}return g()(t,e),t}(k),b=function(e){function t(){var e,n;r()(this,t);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=c()(this,(e=d()(t)).call.apply(e,[this].concat(a))),f()(h()(n),"actionType",y.a.ALIGN_TOP),f()(h()(n),"commitAlignAction",function(e,t){var i=!0,a=!1,r=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value,c=n.getItemLTRBCoorinate(l),u=t.top-c.top,d=I.b.getRootGroup(l.groupId);d&&(n.groupMoveMap.has(d.getGroupId())?u=n.groupMoveMap.get(d.getGroupId()).y:n.groupMoveMap.set(d.getGroupId(),{x:0,y:u})),n.movePositions.push({x:0,y:u}),l.move(0,u)}}catch(e){a=!0,r=e}finally{try{i||null==o.return||o.return()}finally{if(a)throw r}}}),n}return g()(t,e),t}(k),S=function(e){function t(){var e,n;r()(this,t);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=c()(this,(e=d()(t)).call.apply(e,[this].concat(a))),f()(h()(n),"actionType",y.a.ALIGN_BOTTOM),f()(h()(n),"commitAlignAction",function(e,t){var i=!0,a=!1,r=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value,c=n.getItemLTRBCoorinate(l),u=t.bottom-c.bottom,d=I.b.getRootGroup(l.groupId);d&&(n.groupMoveMap.has(d.getGroupId())?u=n.groupMoveMap.get(d.getGroupId()).y:n.groupMoveMap.set(d.getGroupId(),{x:0,y:u})),n.movePositions.push({x:0,y:u}),l.move(0,u)}}catch(e){a=!0,r=e}finally{try{i||null==o.return||o.return()}finally{if(a)throw r}}}),n}return g()(t,e),t}(k),O=function(e){function t(){var e,n;r()(this,t);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=c()(this,(e=d()(t)).call.apply(e,[this].concat(a))),f()(h()(n),"actionType",y.a.ALIGN_CENTER),f()(h()(n),"commitAlignAction",function(e){var t=n.selectedItems.reduce(function(e,t){return e.getLTRBCoordinate().getRotatedLTRB(e.props.getRotate()).left>t.getLTRBCoordinate().getRotatedLTRB(t.props.getRotate()).left?t:e}),i=n.selectedItems.reduce(function(e,t){return e.getLTRBCoordinate().getRotatedLTRB(e.props.getRotate()).right<t.getLTRBCoordinate().getRotatedLTRB(t.props.getRotate()).right?t:e}),a=(t.getLTRBCoordinate().getRotatedLTRB(t.props.getRotate()).left+i.getLTRBCoordinate().getRotatedLTRB(i.props.getRotate()).right)/2,r=!0,s=!1,o=void 0;try{for(var l,c=e[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var u=l.value,d=n.getItemLTRBCoorinate(u),p=-(d.left-(a-d.getWidth()/2)),h=I.b.getRootGroup(u.groupId);h&&(n.groupMoveMap.has(h.getGroupId())?p=n.groupMoveMap.get(h.getGroupId()).x:n.groupMoveMap.set(h.getGroupId(),{x:p,y:0})),n.movePositions.push({x:p,y:0}),u.move(p,0)}}catch(e){s=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(s)throw o}}}),n}return g()(t,e),t}(k),C=function(e){function t(){var e,n;r()(this,t);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=c()(this,(e=d()(t)).call.apply(e,[this].concat(a))),f()(h()(n),"actionType",y.a.ALIGN_MIDDLE),f()(h()(n),"commitAlignAction",function(e){var t=n.selectedItems.reduce(function(e,t){return e.getLTRBCoordinate().getRotatedLTRB(e.props.getRotate()).top>t.getLTRBCoordinate().getRotatedLTRB(t.props.getRotate()).top?t:e}),i=n.selectedItems.reduce(function(e,t){return e.getLTRBCoordinate().getRotatedLTRB(e.props.getRotate()).bottom<t.getLTRBCoordinate().getRotatedLTRB(t.props.getRotate()).bottom?t:e}),a=(t.getLTRBCoordinate().getRotatedLTRB(t.props.getRotate()).top+i.getLTRBCoordinate().getRotatedLTRB(i.props.getRotate()).bottom)/2,r=!0,s=!1,o=void 0;try{for(var l,c=e[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var u=l.value,d=n.getItemLTRBCoorinate(u),p=-(d.top-(a-d.getHeight()/2)),h=I.b.getRootGroup(u.groupId);h&&(n.groupMoveMap.has(h.getGroupId())?p=n.groupMoveMap.get(h.getGroupId()).y:n.groupMoveMap.set(h.getGroupId(),{x:0,y:p})),n.movePositions.push({x:0,y:p}),u.move(0,p)}}catch(e){s=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(s)throw o}}}),n}return g()(t,e),t}(k),P=function(e){function t(){return r()(this,t),c()(this,d()(t).apply(this,arguments))}return g()(t,e),o()(t,[{key:"initMovePositions",value:function(e){for(var t=0,n=e.length;t<n;t++)this.movePositions[t]={x:0,y:0}}},{key:"itemMoveX",value:function(e,t,n){for(var i=I.b.getRootGroup(t.groupId),a=0,r=e.length;a<r;a++){var s=e[a];(s.tbpeId===t.tbpeId||i&&i.has(s))&&(this.movePositions[a]={x:n,y:0},s.move(n,0))}}},{key:"itemMoveY",value:function(e,t,n){for(var i=I.b.getRootGroup(t.groupId),a=0,r=e.length;a<r;a++){var s=e[a];(s.tbpeId===t.tbpeId||i&&i.has(s))&&(this.movePositions[a]={x:0,y:n},s.move(0,n))}}},{key:"getHorizontalInterval",value:function(e,t,n){var i=e.length-(n?0:1);return(t-(this.sumDistributeItemWidth(e)-(n?t:0)))/i}},{key:"getVerticalInterval",value:function(e,t,n){var i=e.length-(n?0:1);return(t-(this.sumDistributeItemHeight(e)-(n?t:0)))/i}}]),t}(k),D=function(e){function t(){var e,n;r()(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return n=c()(this,(e=d()(t)).call.apply(e,[this].concat(s))),f()(h()(n),"actionType",y.a.DISTRIBUTE_HORIZONTALLY),f()(h()(n),"commitAlignAction",function(e){var t=L.sortItems(e,i.LEFT);n.initMovePositions(e);var a=t[0],r=L.sortItems(e,i.RIGHT)[0],s=L.isSameItemsToSort(a,r),o=n.getItemLTRBCoorinate(r).right-n.getItemLTRBCoorinate(a).left,l=n.getHorizontalInterval(t,o,s);s||L.removeLastItems(t,r);for(var c=1,u=t.length;c<u;c++){var d=t[c],p=n.getItemLTRBCoorinate(t[c-1]),h=n.getItemLTRBCoorinate(d).left,m=(s&&1===c?p.left:p.right)+l-h;n.itemMoveX(e,d,m)}}),n}return g()(t,e),t}(P),A=function(e){function t(){var e,n;r()(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return n=c()(this,(e=d()(t)).call.apply(e,[this].concat(s))),f()(h()(n),"actionType",y.a.DISTRIBUTE_VERTICALLY),f()(h()(n),"commitAlignAction",function(e){var t=L.sortItems(e,i.TOP);n.initMovePositions(e);var a=t[0],r=L.sortItems(e,i.BOTTOM)[0],s=L.isSameItemsToSort(a,r),o=n.getItemLTRBCoorinate(r).bottom-n.getItemLTRBCoorinate(a).top,l=n.getVerticalInterval(t,o,s);s||L.removeLastItems(t,r);for(var c=1,u=t.length;c<u;c++){var d=t[c],p=n.getItemLTRBCoorinate(t[c-1]),h=n.getItemLTRBCoorinate(d).top,m=(s&&1===c?p.top:p.bottom)+l-h;n.itemMoveY(e,d,m)}}),n}return g()(t,e),t}(P)}}]);